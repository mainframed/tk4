         TITLE 'AMDPRAPP-EDIT FORMAT APPENDAGE INTERFACE               *
                        '
AMDPRAPP CSECT ,                                                   0001
@MAINENT DS    0H                                                  0001
         USING *,@15                                               0001
         B     @PROLOG                                             0001
         DC    AL1(16)                                             0001
         DC    C'AMDPRAPP  74.298'                                 0001
         DROP  @15
@PROLOG  ST    @14,12(,@13)                                        0001
         STM   @00,@12,20(@13)                                     0001
         BALR  @11,0                                               0001
@PSTART  LA    @05,4095(,@11)                                      0001
         USING @PSTART,@11                                         0001
         USING @PSTART+4095,@05                                    0001
         ST    @13,@SA00001+4                                      0001
         LA    @14,@SA00001                                        0001
         ST    @14,8(,@13)                                         0001
         LR    @13,@14                                             0001
         EQUATES                        AMDPRDMP EQU MACRO
         COMMON                         EXPANDS TO AMDPRCOM TABLE
AMDPRAPP CSECT                          RE-ESTABLISH AMDPRAPP CSECT
         USING COMMON,COMBASE           SET UP DSECT FOR AMDPRCOM
*   AEDITCBR=AEDITCB;               /* INITIALIZE AMDPRTAB PTR       */
         L     AEDITCBR,AEDITCB                                    0085
*   APP='1'B;                       /* SET ON AMDPRAPP BIT           */
         OI    APP(AEDITCBR),B'10000000'                           0086
*   LDSW=0;                         /* INIT SW TO ZERO               */
         SLR   LDSW,LDSW                                           0087
*   WKAREA=WKAREA&&WKAREA;          /* ZERO WORK AREA          Y02014*/
         L     @08,REENTWKA(,AEDITCBR)                             0088
         XC    WKAREA(200,@08),WKAREA(@08)                         0088
*   ABDPLPTR=REENTWKA;              /* PARMLIST IN WORK AREA   Y02014*/
         LR    ABDPLPTR,@08                                        0089
*   ADPLSBPL='80'X;                 /* SET PARMLIST FLAGS      Y02014*/
         MVI   ADPLSBPL(ABDPLPTR),X'80'                            0090
*   NSISAVE=COMPTR;                 /* SAVE ADDRS OF AMDPRCOM        */
         ST    COMPTR,NSISAVE                                      0091
*   SPIESAVE=SVAREA;                /* FOR SPIE RECOVERY             */
         L     @08,SVAREA(,AREAPTR)                                0092
         ST    @08,SPIESAVE                                        0092
*   IF(INREC(OFSTEID)&'F0'X)        /* IF EID INDICATES X'E'         */
*       ='E0'X THEN                 /* THEN                          */
         LH    @08,OFSTEID(,AEDITCBR)                              0093
         L     @03,CURREC(,AEDITCBR)                               0093
         ALR   @03,@08                                             0093
         AL    @03,@CF00475                                        0093
         MVC   @TS00001(1),INREC(@03)                              0093
         NI    @TS00001,X'F0'                                      0093
         CLI   @TS00001,X'E0'                                      0093
         BNE   @RF00093                                            0093
*     DO;                           /* DO THE FOLLOWING              */
*       EXITNM=USRCON;              /* INSERT 'AMDUSR' INTO SLOT     */
         MVI   EXITNM+6(AEDITCBR),C' '                             0095
         MVI   EXITNM+7(AEDITCBR),C' '                             0095
         MVC   EXITNM(6,AEDITCBR),USRCON                           0095
*       FIDTBPTR=ADDR(USRTABL);     /* INITIALIZE FID TBL PTR TO   0096
*                                      USRTABL                       */
         LA    @08,USRTABL                                         0096
         ST    @08,FIDTBPTR                                        0096
*       LDSW=1;                     /* INDICATE 'AMDUSR' LOAD        */
         LA    LDSW,1                                              0097
*       GOTO AMDPAPP2;              /* CONTINUE PROCESS              */
         B     AMDPAPP2                                            0098
*     END;                                                         0099
*   IF INREC(6)>'05'X               /* IF SYSTEM FID> X'05'          */
*     THEN                          /* THEN                          */
@RF00093 L     @08,CURREC(,AEDITCBR)                               0100
         CLI   INREC+5(@08),X'05'                                  0100
         BNH   @RF00100                                            0100
*     DO;                           /* DO THE FOLLOWING              */
*AMDPRTN:                                                          0102
*       APP='0'B;                   /* TURN OFF AMDPRAPP BIT         */
AMDPRTN  NI    APP(AEDITCBR),B'01111111'                           0102
*       RETURN;                     /* RETURN TO AMDPRFLT            */
@EL00001 L     @13,4(,@13)                                         0103
@EF00001 DS    0H                                                  0103
@ER00001 L     @14,12(,@13)                                        0103
         LM    @00,@12,20(@13)                                     0103
         BR    @14                                                 0103
*     END;                                                         0104
*   EXITNM=SYSCON;                  /* INSERT 'AMDSYS' INTO SLOT     */
@RF00100 MVI   EXITNM+6(AEDITCBR),C' '                             0105
         MVI   EXITNM+7(AEDITCBR),C' '                             0105
         MVC   EXITNM(6,AEDITCBR),SYSCON                           0105
*   FIDTBPTR=ADDR(SYSTAB);          /* INITIALIZE FID TBL PTR TO   0106
*                                      SYSTAB                        */
         LA    @08,SYSTAB                                          0106
         ST    @08,FIDTBPTR                                        0106
*AMDPAPP2:                                                         0107
*   INDEX=INREC(6)+1;               /* CALCULATE INDEX INTO FIDTB    */
AMDPAPP2 L     @08,CURREC(,AEDITCBR)                               0107
         LA    @03,1                                               0107
         SLR   @00,@00                                             0107
         IC    @00,INREC+5(,@08)                                   0107
         ALR   @03,@00                                             0107
         ST    @03,INDEX                                           0107
*   IF ERRBIT(INDEX)='1'B           /* IF APPROPRIATE ERROR BIT      */
*     THEN                          /* IS ON, THEN                   */
         L     @08,FIDTBPTR                                        0108
         ALR   @03,@08                                             0108
         AL    @03,@CF00475                                        0108
         TM    ERRBIT(@03),B'00001000'                             0108
         BO    @RT00108                                            0108
*     GOTO AMDPRTN;                 /* RETURN TO AMDPRFLT            */
*   IF HEXBIT(INDEX)='1'B           /* IF HEX BIT IS ON              */
*     THEN                          /* THEN                          */
         L     @03,INDEX                                           0110
         ALR   @08,@03                                             0110
         AL    @08,@CF00475                                        0110
         TM    HEXBIT(@08),B'10000000'                             0110
         BNO   @RF00110                                            0110
*     DO;                           /* DO THE FOLLOWING              */
*       EXITADDR=AHEX;              /* SAVE ADDRS OF AMDPRHEX        */
         L     @10,AFRMAD(,AEDITCBR)                               0112
         L     @10,AHEX(,@10)                                      0112
         ST    @10,EXITADDR(,AEDITCBR)                             0112
*       EXITNM='AMDPRHEX';          /* MOVE AMDPRHEX INTO EXITNM     */
         MVC   EXITNM(8,AEDITCBR),@CC00391                         0113
*       GOTO AMDNOSPI;              /* NO SPIE AND CONTINUE SETUP    */
         B     AMDNOSPI                                            0114
*     END;                                                         0115
*   RFY                                                            0116
*    (WREG6,                        /* NEED REG 6              Y02014*/
*     WREG7) RSTD;                  /* NEED REG 7              Y02014*/
*                                                                  0116
@RF00110 DS    0H                                                  0117
*   /*****************************************************************/
*   /*                                                               */
*   /* CALCULATE OUTPUT AREA ADDRESS                                 */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0117
*   WREG6=ADDR(EXITNM)+6;                                          0117
*                                                                  0117
         LA    WREG6,EXITNM(,AEDITCBR)                             0117
         AL    WREG6,@CF00110                                      0117
*   /*****************************************************************/
*   /*                                                               */
*   /* OBTAIN FID ADDRESS ACCOUNTING FOR 0-ORIGIN OFFSET             */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0118
*   WREG7=CURREC+6-1;                                              0118
         L     WREG7,CURREC(,AEDITCBR)                             0118
         SL    WREG7,@CF00463                                      0118
*   GEN(HEXCNVT  (6),(7),2);        /* CONVERT TO EBCDIC             */
         HEXCNVT  (6),(7),2
*   IF LDSW=0 THEN                  /* SYS FORMAT APP          Y02014*/
         LTR   LDSW,LDSW                                           0120
         BZ    @RT00120                                            0120
*     GOTO AMDPLOAD;                /* GO ATTEMP LOAD          Y02014*/
*   IF HMDUSED(INDEX)='1'B THEN     /* VS1 VERSION FOUND       Y02014*/
         L     @08,FIDTBPTR                                        0122
         L     @03,INDEX                                           0122
         ALR   @03,@08                                             0122
         AL    @03,@CF00475                                        0122
         TM    HMDUSED(@03),B'00100000'                            0122
         BO    @RT00122                                            0122
*     GO TO USEHMD;                 /* GO LOAD VS1 VERSION     Y02014*/
*   IF IMDUSED(INDEX)='1'B THEN     /* OS VERSION FOUND        Y02014*/
         L     @03,INDEX                                           0124
         ALR   @08,@03                                             0124
         AL    @08,@CF00475                                        0124
         TM    IMDUSED(@08),B'00010000'                            0124
         BNO   @RF00124                                            0124
*     DO;                           /* YES                     Y02014*/
*       LDSW=2;                     /* INDICATE OS VERSION     Y02014*/
         LA    LDSW,2                                              0126
*       GOTO USEIMD;                /* GO LOAD OS VERSION      Y02014*/
         B     USEIMD                                              0127
*     END;                          /*                         Y02014*/
*AMDPLOAD:                                                         0129
*   PARMPTR=-ADDR(EXITNM);          /* PARM FOR CALL TO AMDPRSEG     */
@RF00124 DS    0H                                                  0129
AMDPLOAD LA    PARMPTR,EXITNM(,AEDITCBR)                           0129
         LCR   PARMPTR,PARMPTR                                     0129
*   RFY                                                            0130
*    (WREG6,                                                       0130
*     WREG7) UNRSTD;                /*                         Y02014*/
*   CALL AMDPRSEG;                  /* ATTEMPT TO HAVE FORMAT      0131
*                                      APPENDAGE LOADED              */
         L     @15,ALOADER                                         0131
         BALR  @14,@15                                             0131
*   RFY                                                            0132
*    (CODEREG) RSTD;                /*                         Y02014*/
*   IF CODEREG=0 THEN               /* SUCCESSFUL LOAD OR MODULE     */
         LTR   CODEREG,CODEREG                                     0133
         BZ    @RT00133                                            0133
*     GOTO AMDPAPP5;                /* ALREADY IN CORE               */
*   IF CODEREG=4 THEN                                              0135
         C     CODEREG,@CF00099                                    0135
         BNE   @RF00135                                            0135
*     DO;                           /* UNSUCCESSFUL LOAD             */
*       SYNMSGA=ADDR(AMDPRE12);     /* ADDR OF MSG AMD229I           */
         L     @14,AFMG(,AEDITCBR)                                 0137
         LA    @14,AMDPRE12(,@14)                                  0137
         ST    @14,SYNMSGA                                         0137
*       ERRBUF(20:27)=EXITNM;       /* MOVE IN RTN NAME              */
         L     @14,MSGADDR(,@14)                                   0138
         MVC   ERRBUF+19(8,@14),EXITNM(AEDITCBR)                   0138
*       GEN(OI SWD,NOSTDMG);        /* NO STND MSG BIT               */
         OI SWD,NOSTDMG
*       CALL AMDPRSYN;              /* OUTPUT MSG FOR > 10K RTN      */
         L     @15,ASYNTAX                                         0140
         BALR  @14,@15                                             0140
*       GOTO AMDPAPP3;              /* CHECK TYPE OF DATA SET        */
         B     AMDPAPP3                                            0141
*     END;                                                         0142
*   IF CODEREG=8 THEN               /* MODULE NOT FOUND              */
@RF00135 C     CODEREG,@CF00044                                    0143
         BNE   @RF00143                                            0143
*     DO;                           /* DO THE FOLLOWING              */
*USEHMD:                                                           0145
*       IF LDSW=1 THEN              /* TRY LOADING VS1 VERSION Y02014*/
USEHMD   C     LDSW,@CF00046                                       0145
         BNE   @RF00145                                            0145
*         DO;                                                      0146
*           EXITNM(1:1)=HMDPREF;    /* USE VS1 NAME            Y02014*/
         MVC   EXITNM(1,AEDITCBR),HMDPREF                          0147
*           LDSW=2;                 /* INDICATE LOAD VS1       Y02014*/
         LA    LDSW,2                                              0148
*           WHOUSED(INDEX)='10'B;   /* INDICATE VS1            Y02014*/
         L     @14,FIDTBPTR                                        0149
         AL    @14,INDEX                                           0149
         AL    @14,@CF00475                                        0149
         NI    WHOUSED(@14),B'11101111'                            0149
         OI    WHOUSED(@14),B'00100000'                            0149
*           GOTO AMDPLOAD;          /* GO ATTEMPT LOAD         Y02014*/
         B     AMDPLOAD                                            0150
*         END;                      /*                         Y02014*/
*USEIMD:                                                           0152
*       IF LDSW=2 THEN              /* TRY LOADING OS VERSION  Y02014*/
@RF00145 DS    0H                                                  0152
USEIMD   C     LDSW,@CF00079                                       0152
         BNE   @RF00152                                            0152
*         DO;                       /*                         Y02014*/
*           EXITNM(1:1)=IMDPREF;    /* INDICATE IMD VERSION    Y02014*/
         MVC   EXITNM(1,AEDITCBR),IMDPREF                          0154
*           LDSW=3;                 /* OS VERSION TRIED        Y02014*/
         LA    LDSW,3                                              0155
*           WHOUSED(INDEX)='01'B;   /* INDICATE OS VERSION     Y02014*/
         L     @14,FIDTBPTR                                        0156
         AL    @14,INDEX                                           0156
         AL    @14,@CF00475                                        0156
         NI    WHOUSED(@14),B'11011111'                            0156
         OI    WHOUSED(@14),B'00010000'                            0156
*           GO TO AMDPLOAD;         /* GO ATTEMPT LOAD         Y02014*/
         B     AMDPLOAD                                            0157
*         END;                                                     0158
*       IF LDSW=3 THEN              /* AMD×HMD×IMD VERSIONS    Y02014*/
@RF00152 C     LDSW,@CF00169                                       0159
         BNE   @RF00159                                            0159
*         DO;                       /* NOT FOUND               Y02014*/
*           EXITNM(1:1)=AMDPREF;    /* AMD NAME FOR MSG        Y02014*/
         MVC   EXITNM(1,AEDITCBR),AMDPREF                          0161
*           WHOUSED(INDEX)='00'B;   /* INDICATE NONE FOUND     Y02014*/
         L     @14,FIDTBPTR                                        0162
         AL    @14,INDEX                                           0162
         AL    @14,@CF00475                                        0162
         NI    WHOUSED(@14),B'11001111'                            0162
*         END;                                                     0163
*AMDPHDMP:                                                         0164
*       SYNMSGA=ADDR(AMDPRE06);     /* ADDRS OF ADDRS OF MSG         */
@RF00159 DS    0H                                                  0164
AMDPHDMP L     @14,AFMG(,AEDITCBR)                                 0164
         LA    @14,AMDPRE06(,@14)                                  0164
         ST    @14,SYNMSGA                                         0164
*       ERRBUF(37:44)=              /* MOVE IN NAME OF MODULE IN     */
*           EXITNM;                 /* ERROR                         */
         L     @14,MSGADDR(,@14)                                   0165
         MVC   ERRBUF+36(8,@14),EXITNM(AEDITCBR)                   0165
*       GEN(OI  SWD,NOSTDMG);       /* TURN ON NO STANDARD MSG BT    */
         OI  SWD,NOSTDMG
*       CALL AMDPRSYN;              /* OUTPUT HEX DUMP MESSAGE       */
         L     @15,ASYNTAX                                         0167
         BALR  @14,@15                                             0167
*       HEXBIT(INDEX)='1'B;         /* SET ON HEX DUMP BIT           */
         L     @14,FIDTBPTR                                        0168
         AL    @14,INDEX                                           0168
         AL    @14,@CF00475                                        0168
         OI    HEXBIT(@14),B'10000000'                             0168
*       CALL PRHEX;                 /* DUMP RECORD IN HEX            */
         L     @10,AFRMAD(,AEDITCBR)                               0169
         L     @15,AHEX(,@10)                                      0169
         BALR  @14,@15                                             0169
*       GOTO AMDPRTN;               /* PREPARE FOR RETURN            */
         B     AMDPRTN                                             0170
*     END;                                                         0171
*   RFY                                                            0172
*    (CODEREG) UNRSTD;              /*                         Y02014*/
*   GOTO AMDPAPP4;                  /* CODE OF 12 OR 16, SO TERM     */
         B     AMDPAPP4                                            0173
*AMDPAPP3:                                                         0174
*   IF DDNAME=BLANK1 THEN           /* IF NO DDNAME (DUMP DATA       */
AMDPAPP3 CLC   DDNAME(8,AEDITCBR),BLANK1                           0174
         BE    @RT00174                                            0174
*     GOTO AMDPHDMP;                /* SET), HEX DUMP BIT ON         */
*AMDPAPP4:                                                         0176
*   TERM='1'B;                      /* SET ON TERMINATION BIT        */
AMDPAPP4 OI    TERM(AEDITCBR),B'01000000'                          0176
*   SYNMSGA=ADDR(AMDPRE05);         /* ADDRS OF ADDRS OF MSG         */
         L     @10,AFMG(,AEDITCBR)                                 0177
         LA    @10,AMDPRE05(,@10)                                  0177
         ST    @10,SYNMSGA                                         0177
*   GEN(OI  SWD,NOSTDMG);           /* TURN ON NO STANDARD MSG BT    */
         OI  SWD,NOSTDMG
*   CALL AMDPRSYN;                  /* OUTPUT APPRORIATE ERR MSG     */
         L     @15,ASYNTAX                                         0179
         BALR  @14,@15                                             0179
*   GOTO AMDPRTN;                   /* PREPARE FOR RETURN            */
         B     AMDPRTN                                             0180
*AMDPAPP5:                                                         0181
*   EXITADDR=PARMPTR;               /* SAVE ENTRY POINT ADDRS        */
AMDPAPP5 ST    PARMPTR,EXITADDR(,AEDITCBR)                         0181
*   ITEMPREC(1:256)='';             /* BLANK TEMP REC          Y02014*/
         MVI   ITEMPREC,C' '                                       0182
         MVC   ITEMPREC+1(255),ITEMPREC                            0182
*   ITEMPREC(257:284)='';           /* BLANK TEMP REC          Y02014*/
         MVI   ITEMPREC+256,C' '                                   0183
         MVC   ITEMPREC+257(27),ITEMPREC+256                       0183
*   IF RECDLL<=256 THEN             /* ONE MOVE NEEDED         Y02014*/
         L     @10,RECDLL-1(,AEDITCBR)                             0184
         LA    @10,0(,@10)                                         0184
         C     @10,@CF00121                                        0184
         BH    @RF00184                                            0184
*     ITEMPREC(1:RECDLL)=INREC(1:RECDLL);/*                    Y02014*/
         BCTR  @10,0                                               0185
         L     @08,CURREC(,AEDITCBR)                               0185
         EX    @10,@SM00483                                        0185
*   ELSE                                                           0186
*     DO;                           /* TWO MOVES NEEDED        Y02014*/
         B     @RC00184                                            0186
@RF00184 DS    0H                                                  0187
*       ITEMPREC(1:256)=INREC(1:256);/* MOVE 256 BYTES         Y02014*/
         L     @10,CURREC(,AEDITCBR)                               0187
         MVC   ITEMPREC(256),INREC(@10)                            0187
*       ITEMPREC(257:RECDLL)=INREC(257:RECDLL);/* MOVE REST          */
         L     @08,RECDLL-1(,AEDITCBR)                             0188
         LA    @08,0(,@08)                                         0188
         SL    @08,@CF00414                                        0188
         EX    @08,@SM00485                                        0188
*     END;                          /* OF RECORD               Y02014*/
*                                                                  0189
*   /*****************************************************************/
*   /*                                                               */
*   /* CONSTRUCT PARAMETER LIST                                      */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0190
*   RECPTR=ADDR(ITEMPREC);          /* WORD 1 OF PARAMETER LIST    0190
*                                                              Y02014*/
@RC00184 LA    @10,ITEMPREC                                        0190
         ST    @10,RECPTR                                          0190
*   BUFPTR=CURBUF+11;               /* WORD 2 OF PARAMETER LIST      */
         LA    @08,11                                              0191
         L     @03,CURBUF                                          0191
         ALR   @03,@08                                             0191
         ST    @03,BUFPTR                                          0191
*   GTFOPTR=GTFWDPTR;               /* WORD 3 OF PARAMETER LIST      */
         L     @03,GTFWDPTR(,AEDITCBR)                             0192
         ST    @03,GTFOPTR                                         0192
*   EIDPTR=RECPTR+OFSTEID-1;        /* WORD 4 OF PARAMETER LIST      */
         LH    @03,OFSTEID(,AEDITCBR)                              0193
         LR    @00,@10                                             0193
         ALR   @00,@03                                             0193
         BCTR  @00,0                                               0193
         ST    @00,EIDPTR                                          0193
*   IF(INREC(OFSTEID)&'F0'X)='E0'X THEN/*                    @YM07434*/
         L     @15,CURREC(,AEDITCBR)                               0194
         ALR   @15,@03                                             0194
         AL    @15,@CF00475                                        0194
         MVC   @TS00001(1),INREC(@15)                              0194
         NI    @TS00001,X'F0'                                      0194
         CLI   @TS00001,X'E0'                                      0194
         BNE   @RF00194                                            0194
*     DATAPTR=RECPTR+OFSTDATA+11;   /* WORD 5 OF PARAMETER LIST    0195
*                                                            @YM07434*/
         AH    @10,OFSTDATA(,AEDITCBR)                             0195
         ALR   @10,@08                                             0195
         ST    @10,DATAPTR                                         0195
*   ELSE                                                           0196
*     DATAPTR=RECPTR+OFSTDATA-1;    /* WORD 5 OF PARAMETER LIST    0196
*                                                            @YM07434*/
         B     @RC00194                                            0196
@RF00194 LH    @10,OFSTDATA(,AEDITCBR)                             0196
         AL    @10,RECPTR                                          0196
         BCTR  @10,0                                               0196
         ST    @10,DATAPTR                                         0196
*   FRMADDR=PRFMTADD;               /* ADDR AMDPRFMT           Y02014*/
@RC00194 L     @10,PRFMTADD(,AEDITCBR)                             0197
         ST    @10,FRMADDR                                         0197
*   ADPLFRMT=PRFMTADD;              /* ADDR AMDPRFMT           Y02014*/
         ST    @10,ADPLFRMT(,ABDPLPTR)                             0198
*   WKAREADD=REENTWKA+LENGTH(ABDPL);/* ADDR WORK AREA          Y02014*/
         L     @10,REENTWKA(,AEDITCBR)                             0199
         LA    @08,56                                              0199
         ALR   @08,@10                                             0199
         ST    @08,WKAREADD                                        0199
*   SNAPPARM=REENTWKA;              /* ADDR SNAP PARMS         Y02014*/
         ST    @10,SNAPPARM                                        0200
*   ADPLBUF=CURBUF+1;               /* SNAP PARM PTRS TO BUF   Y02014*/
         LA    @10,1                                               0201
         AL    @10,CURBUF                                          0201
         ST    @10,ADPLBUF(,ABDPLPTR)                              0201
*AMDPREDR:                                                         0202
*   IF EDITER=3 THEN                /* IF ER PARM =3, THEN     Y02014*/
AMDPREDR CLI   EDITER,3                                            0202
         BE    @RT00202                                            0202
*     GOTO AMDNOSPI;                /* BYPASS SPIE             Y02014*/
*AMDPCAL:                                                          0204
*   GENERATE;                                                      0204
AMDPCAL  DS    0H                                                  0204
*                                       /* ISSUE SPIE                */
         SPIE  AMDPRSPI,((1,15)) SPIE FOR ALL PGM CHECKS
*AMDPPCA:                                                          0205
*   PICASAVE=PARMPTR;               /* SAVE ADDRS OF PREV PICA       */
AMDPPCA  ST    PARMPTR,PICASAVE                                    0205
*AMDNOSPI:                                                         0206
*   PARMPTR=ADDR(PLIST);            /* REG1 PTR PARM LIST      Y02014*/
AMDNOSPI LA    PARMPTR,PLIST                                       0206
*   GEN(STM  R0,R14,LOCAREA);       /* SAVE OWN REGISTERS            */
         STM  R0,R14,LOCAREA
*   CALL USERRTN;                   /* CALL EXIT, FMT APP, OR PRHEX  */
         L     @15,EXITADDR(,AEDITCBR)                             0208
         BALR  @14,@15                                             0208
*   GENERATE;                                                      0209
         BALR  R7,R0                    ESTABLISH TEMP ADDRESSABILITY
         USING *,R7                     IN CASE USR RTN DESTROYED REGS
         LM  R0,R14,LOCAREA             RESTORE REGS
         DROP  R7                       RE-ESTABLISH ORIG BASE REG
         ST    CODEREG,CODESAVE         SAVE RETURN CODE
*   IF EDITER^=3                    /* WAS SPIE ISSUED         Y02014*/
*       &EXITNM^='AMDPRHEX' THEN                                   0210
         CLI   EDITER,3                                            0210
         BE    @RF00210                                            0210
         CLC   EXITNM(8,AEDITCBR),@CC00391                         0210
         BE    @RF00210                                            0210
*     DO;                           /*                         Y02014*/
*       PARMPTR=PICASAVE;           /* RESTORE PICA ADDR       Y02014*/
         L     PARMPTR,PICASAVE                                    0212
*       GEN(SPIE MF=(E,(R1)));      /* RESTORE SPIE            Y02014*/
         SPIE MF=(E,(R1))
*     END;                                                         0214
*   IF CODESAVE=0 THEN              /* RETURN CODE OF 0 INDICATES    */
@RF00210 L     @10,CODESAVE                                        0215
         LTR   @10,@10                                             0215
         BNZ   @RF00215                                            0215
*     DO;                           /* ANOTHER CALL TO ROUTINE       */
*       CALL AMDPRDNT;              /* ALIGN OUTPUT CORRECTLY        */
         BAL   @14,AMDPRDNT                                        0217
*       GEN(BRWRITE 1);             /* OUTPUT BUFFER CONTENTS        */
         BRWRITE 1
*       BUFPTR=CURBUF+11;           /* NEW OUTPUT BUFFER IN USE      */
         L     @10,CURBUF                                          0219
         LA    @08,11                                              0219
         ALR   @08,@10                                             0219
         ST    @08,BUFPTR                                          0219
*       ADPLBUF=CURBUF+1;           /* UPDATE SNAP PARM        Y02014*/
         AL    @10,@CF00046                                        0220
         ST    @10,ADPLBUF(,ABDPLPTR)                              0220
*       GOTO AMDPREDR;              /* CALL FMT APPENDAGE AGAIN      */
         B     AMDPREDR                                            0221
*     END;                                                         0222
*   IF CODESAVE=4 THEN              /* RETURN CODE OF 4 INDICATES    */
@RF00215 CLC   CODESAVE(4),@CF00099                                0223
         BNE   @RF00223                                            0223
*     DO;                           /* CURRENT OUTPUT COMPLETE       */
*       CALL AMDPRDNT;              /* ALIGN OUTPUT CORRECTLY        */
         BAL   @14,AMDPRDNT                                        0225
*       GEN(BRWRITE 1);             /* OUTPUT BUFFER CONTENTS        */
         BRWRITE 1
*       IF OPTTIME='0'B THEN        /* IF NO TIME STAMP IN REC Y02014*/
         L     @10,GTFWDPTR(,AEDITCBR)                             0227
         TM    OPTTIME(@10),B'00000001'                            0227
         BZ    @RT00227                                            0227
*         GOTO AMDPRTN;             /* THEN PREPARE FOR RETURN       */
*       CALL PRTME;                 /* HAVE TIME STAMP FORMATTED     */
         L     @10,AFRMAD(,AEDITCBR)                               0229
         L     @15,ATME(,@10)                                      0229
         BALR  @14,@15                                             0229
*       GEN(BRWRITE 1);             /* OUTPUT BUFFER CONTENTS        */
         BRWRITE 1
*       GOTO AMDPRTN;               /* PREPARE FOR RETURN            */
         B     AMDPRTN                                             0231
*     END;                                                         0232
*   IF CODESAVE=8                   /* IF RETURN CODE OF 8, THEN     */
*     THEN                                                         0233
@RF00223 CLC   CODESAVE(4),@CF00044                                0233
         BNE   @RF00233                                            0233
*     DO;                           /* DO THE FOLLOWING              */
*       RET='0'B;                   /* RESET INDENTING SWITCH        */
         NI    RET(AEDITCBR),B'11110111'                           0235
*       BLDBUF=BLANK1;              /* BLANK OUTPUT BUFFER           */
         L     @10,CURBUF                                          0236
         MVI   BLDBUF+10(@10),C' '                                 0236
         MVC   BLDBUF+11(109,@10),BLDBUF+10(@10)                   0236
         MVC   BLDBUF(10,@10),BLANK1                               0236
*       GOTO AMDPRTN;               /* IGNORE THIS RECORD            */
         B     AMDPRTN                                             0237
*     END;                                                         0238
*   IF CODESAVE=12 THEN             /* RC =12                  Y02014*/
@RF00233 CLC   CODESAVE(4),@CF00076                                0239
         BNE   @RF00239                                            0239
*     DO;                           /* YES                     Y02014*/
*       CALL PRHEX;                 /* DUMP RECORD IN HEX      Y02014*/
         L     @10,AFRMAD(,AEDITCBR)                               0241
         L     @15,AHEX(,@10)                                      0241
         BALR  @14,@15                                             0241
*       RET='0'B;                   /* RESET IDENT SWITCH      Y02014*/
         NI    RET(AEDITCBR),B'11110111'                           0242
*       BLDBUF=BLANK1;              /* BLANK OUTPUT BUFF       Y02014*/
         L     @10,CURBUF                                          0243
         MVI   BLDBUF+10(@10),C' '                                 0243
         MVC   BLDBUF+11(109,@10),BLDBUF+10(@10)                   0243
         MVC   BLDBUF(10,@10),BLANK1                               0243
*       GOTO AMDPRTN;               /* PREPARE FOR RETURN      Y02014*/
         B     AMDPRTN                                             0244
*     END;                          /*                         Y02014*/
*   SYNMSGA=ADDR(AMDPRE03);         /* ADDRS OF ADDRS OF MSG         */
@RF00239 L     @10,AFMG(,AEDITCBR)                                 0246
         LA    @10,AMDPRE03(,@10)                                  0246
         ST    @10,SYNMSGA                                         0246
*   RFY                                                            0247
*    (WREG6,                                                       0247
*     WREG7) RSTD;                  /*                         Y02014*/
*   WREG6=MSGADDR;                  /* OBTAIN ADDRESS OF MESSAGE     */
         L     WREG6,MSGADDR(,@10)                                 0248
*   GEN(BRWRITE SKIP);              /* SKIP TO NEW PAGE              */
         BRWRITE SKIP
*   GENERATE;                                                      0250
         LA  WREG6,39(WREG6)         OBTAIN ADDRESS OF RC PLACEMENT
         LA  WREG7,CODESAVE             OBTAIN INPUT ADDRESS
         HEXCNVT (6),(7),4              CONVERT TO EBCDIC
*   ERRBUF(64:71)                   /* MOVE IN FMT APPENDAGE NAME    */
*       =EXITNM;                                                   0251
         L     @10,SYNMSGA                                         0251
         L     @10,MSGADDR(,@10)                                   0251
         MVC   ERRBUF+63(8,@10),EXITNM(AEDITCBR)                   0251
*   GENERATE;                                                      0252
         L     R6,PAGENUMB              PREPARE FOR CVD
         CVD   R6,DBLWORD               CONVERT PAGE NO TO DECIMAL
         UNPK  COMP4(4),DBLWORD+6(2) CONVERT TO EBCDIC
         OI    COMP4+3,X'F0'      STRIP '0'B ZONE
*   ERRBUF(24:27)                   /* MOVE PRINTABLE RETURN CODE    */
*       =COMP4;                     /* INTO RC MSG                   */
         L     @10,SYNMSGA                                         0253
         L     @10,MSGADDR(,@10)                                   0253
         MVC   ERRBUF+23(4,@10),COMP4                              0253
*   GEN(OI  SWD,NOSTDMG);           /* TURN ON NO STANDARD MSG BT    */
         OI  SWD,NOSTDMG
*   CALL AMDPRSYN;                  /* OUTPUT INVALID RC MSG         */
         L     @15,ASYNTAX                                         0255
         BALR  @14,@15                                             0255
*   RFY                                                            0256
*    (WREG6,                                                       0256
*     WREG7) UNRSTD;                /*                         Y02014*/
*   IF EDITER^=0 THEN               /* IF 'ER=0' NOT SPECIFIED,      */
         CLI   EDITER,0                                            0257
         BNE   @RT00257                                            0257
*     GOTO AMDPERR;                 /* CHECK FURTHER                 */
*   ERRBIT(INDEX)='1'B;             /* SET ON APPROP ERROR BIT       */
         L     @10,FIDTBPTR                                        0259
         AL    @10,INDEX                                           0259
         AL    @10,@CF00475                                        0259
         OI    ERRBIT(@10),B'00001000'                             0259
*   SYNMSGA=ADDR(AMDPRE04);         /* ADDRS OF ADDRS OF MSG         */
         L     @10,AFMG(,AEDITCBR)                                 0260
         LA    @10,AMDPRE04(,@10)                                  0260
         ST    @10,SYNMSGA                                         0260
*   ERRBUF(54:61)                   /* MOVE IN RTN NAME TO           */
*       =EXITNM;                    /* INTERFACE IGNORED MSG         */
         L     @10,MSGADDR(,@10)                                   0261
         MVC   ERRBUF+53(8,@10),EXITNM(AEDITCBR)                   0261
*AMDPERMG:                                                         0262
*   GEN(OI  SWD,NOSTDMG);           /* TURN ON NO STANDARD MSG BT    */
AMDPERMG OI  SWD,NOSTDMG
*   CALL AMDPRSYN;                  /* OUTPUT ERROR MESSAGE          */
         L     @15,ASYNTAX                                         0263
         BALR  @14,@15                                             0263
*   CALL PRHEX;                     /* DUMP RECORD IN HEX            */
         L     @10,AFRMAD(,AEDITCBR)                               0264
         L     @15,AHEX(,@10)                                      0264
         BALR  @14,@15                                             0264
*   GEN(BRWRITE SKIP);              /* SKIP TO NEW PAGE              */
         BRWRITE SKIP
*   GOTO AMDPRTN;                   /* PREPARE FOR RETURN            */
         B     AMDPRTN                                             0266
*AMDPERR:                                                          0267
*   IF EDITER^=1 THEN               /* IF 'ER=1' NOT SPECIFIED,      */
AMDPERR  CLI   EDITER,1                                            0267
         BE    @RF00267                                            0267
*     DO;                           /* DO THE FOLLOWING              */
*       TERM='1'B;                  /* SET ON TERM BIT               */
         OI    TERM(AEDITCBR),B'01000000'                          0269
*       SYNMSGA=ADDR(AMDPRE05);     /* ADDRS OF ADDRS OF MSG         */
         L     @10,AFMG(,AEDITCBR)                                 0270
         LA    @10,AMDPRE05(,@10)                                  0270
         ST    @10,SYNMSGA                                         0270
*       GOTO AMDPERMG;              /* OUTPUT ERROR MESSAGE          */
         B     AMDPERMG                                            0271
*     END;                                                         0272
*   HEXBIT(INDEX)='1'B;             /* 'ER=1' SO SET ON HEX BIT      */
@RF00267 L     @10,FIDTBPTR                                        0273
         AL    @10,INDEX                                           0273
         AL    @10,@CF00475                                        0273
         OI    HEXBIT(@10),B'10000000'                             0273
*   SYNMSGA=ADDR(AMDPRE06);         /* ADDRS OF ADDRS OF MSG         */
         L     @10,AFMG(,AEDITCBR)                                 0274
         LA    @10,AMDPRE06(,@10)                                  0274
         ST    @10,SYNMSGA                                         0274
*   ERRBUF(37:44)                   /* MOVE IN RTN NAME              */
*       =EXITNM;                                                   0275
         L     @10,MSGADDR(,@10)                                   0275
         MVC   ERRBUF+36(8,@10),EXITNM(AEDITCBR)                   0275
*   GOTO AMDPERMG;                  /* OUTPUT ERROR MSG              */
         B     AMDPERMG                                            0276
*/********************************************************************/
*/*  THE FOLLOWING SUBROUTINE ACCOMPLISHES THE IDENTIFICATION OF USER*/
*/*  TRACE RECORDS, AND THE INSERTION OF THE EID IN PRINTABLE FORMAT */
*/*  AT THE BEGINNING OF EACH USER TRACE RECORD.  OUTPUT LINES       */
*/*  BEYOND THE FIRST LINE ARE INDENTED TO ALLOW EASY IDENTIFICATION */
*/*  OF COMPLETE USER RECORDS.                                       */
*/********************************************************************/
*                                                                  0277
*AMDPRDNT:                                                         0277
*   PROC;                                                          0277
AMDPRDNT STM   @14,@12,@SA00002                                    0277
*   DCL                                                            0278
*     AMDPNSI LABEL;                /* LABEL IN SPIE ROUTINE         */
*   RFY                                                            0279
*    (PARMPTR,                      /* PARM LIST POINTER             */
*     WREG6,                        /* WORK REGISTER                 */
*     WREG7,                        /* WORK REGISTER                 */
*     AEDITCBR,                     /* POINTER TO AMDPRTAB           */
*     COMPTR) RSTD;                 /* POINTER TO COM          Y02014*/
*   CALL AMDTMCHK;                  /* OUTPUT TIME STAMP, IF NEC     */
         BAL   @14,AMDTMCHK                                        0280
*   IF(INREC(OFSTEID)&'F0'X)        /* IF EID IS NOT X'E' (USR       */
*       ^='E0'X THEN                /* EID), THEN                    */
         LH    @10,OFSTEID(,AEDITCBR)                              0281
         L     @08,CURREC(,AEDITCBR)                               0281
         ALR   @10,@08                                             0281
         AL    @10,@CF00475                                        0281
         MVC   @TS00001(1),INREC(@10)                              0281
         NI    @TS00001,X'F0'                                      0281
         CLI   @TS00001,X'E0'                                      0281
         BNE   @RT00281                                            0281
*     RETURN;                       /* RETURN TO CALLER              */
*   IF RET='1'B THEN                /* IF FORMATTING MULTIPLE        */
         TM    RET(AEDITCBR),B'00001000'                           0283
         BO    @RT00283                                            0283
*     GOTO AMDPDNT1;                /* LINES, SPECIAL ACTION         */
*   OTEMPREC=USRINFO;               /* COPY USER OUTPUT        Y02014*/
         L     @10,CURBUF                                          0285
         MVC   OTEMPREC(110),USRINFO(@10)                          0285
*   USRINFO='';                     /* BLANK OUTPUT BUFFER     Y02014*/
         MVI   USRINFO(@10),C' '                                   0286
         MVC   USRINFO+1(109,@10),USRINFO(@10)                     0286
*   ASCBPTR=CURREC+OFSTDATA-1;      /* ASCBPTR                 Y02014*/
         LH    @10,OFSTDATA(,AEDITCBR)                             0287
         ALR   @10,@08                                             0287
         BCTR  @10,0                                               0287
         ST    @10,ASCBPTR                                         0287
*   JOBNPTR=ASCBPTR+4;              /* JOBNAME PTR             Y02014*/
         AL    @10,@CF00099                                        0288
         ST    @10,JOBNPTR                                         0288
*   DATAPTR5=CURREC+OFSTEID-1;      /* INITIALIZE THE DATA PTR       */
         LH    @10,OFSTEID(,AEDITCBR)                              0289
         ALR   @08,@10                                             0289
         BCTR  @08,0                                               0289
         ST    @08,DATAPTR5                                        0289
*   PARMPTR=ADDR(USRFMT);           /* OBTAIN ADDRS OF FMT PTRN      */
         LA    PARMPTR,USRFMT                                      0290
*   CALL AMDPRGFR;                  /* FORMAT OUTPUT LINE            */
         L     @15,AFMTLINE                                        0291
         BALR  @14,@15                                             0291
*   BLDBUF(4:5)=EXITNM(7:8);        /* MOVE IN FID TO OUTPUT LINE    */
         L     @10,CURBUF                                          0292
         MVC   BLDBUF+3(2,@10),EXITNM+6(AEDITCBR)                  0292
*   BLDBUF(6)=' ';                  /* OMIT X'E' FOR READABILITY     */
         MVI   BLDBUF+5(@10),C' '                                  0293
*   GEN(BRWRITE 1);                 /* WRITE BUFFER            Y02014*/
         BRWRITE 1
*   USRINFO=OTEMPREC;               /* RESTORE USER DATA       Y02014*/
         L     @10,CURBUF                                          0295
         MVC   USRINFO(110,@10),OTEMPREC                           0295
*   BLDBUF(1:10)=BLANK1;            /* BLANK 1ST 10 BYTES      Y02014*/
         MVC   BLDBUF(10,@10),BLANK1                               0296
*AMDPDNT0:                                                         0297
*   IF CODESAVE=0 THEN              /* IF ZERO RETURN CODE, THEN     */
AMDPDNT0 L     @10,CODESAVE                                        0297
         LTR   @10,@10                                             0297
         BNZ   @RF00297                                            0297
*     RET='1'B;                     /* WILL NEED MORE FORMATTING     */
         OI    RET(AEDITCBR),B'00001000'                           0298
*   RETURN;                         /* RETURN TO CALLER              */
@EL00002 DS    0H                                                  0299
@EF00002 DS    0H                                                  0299
@ER00002 LM    @14,@12,@SA00002                                    0299
         BR    @14                                                 0299
*AMDPDNT1:                                                         0300
*   BLDBUF(1:10)=BLANK1;            /* INDENT LINE                   */
AMDPDNT1 L     @10,CURBUF                                          0300
         MVC   BLDBUF(10,@10),BLANK1                               0300
*   IF CODESAVE^=0 THEN             /* IF NON-ZERO RETURN CODE,      */
         L     @10,CODESAVE                                        0301
         LTR   @10,@10                                             0301
         BZ    @RF00301                                            0301
*     RET='0'B;                     /* NO MORE FORMATTING            */
         NI    RET(AEDITCBR),B'11110111'                           0302
*   RETURN;                         /* RETURN TO CALLER              */
         B     @EL00002                                            0303
*   RFY                                                            0304
*    (WREG6,                                                       0304
*     REG2) RSTD;                   /*                         Y02014*/
*AMDPRSPI:                                                         0305
*   GENERATE;                                                      0305
AMDPRSPI DS    0H                                                  0305
         DROP R11
         DROP R5
         BALR  R2,R0                    ESTABLISH ADDRESSABILITY
         USING *,R2                     USE REGISTER 2
         STM R0,R15,LOCAREA             STORE REGS IN LOCAL SAVE AREA
         L     COMBASE,NSISAVE          OBTAIN ADDRS OF AMDPRCOM
*   AEDITCBR=AEDITCB;               /* ESTABLISH DSECT FOR PRTAB     */
         L     AEDITCBR,AEDITCB                                    0306
*   PIESAVE=PARMPTR;                /* SAVE ADDRS OF PIE             */
         LR    PIESAVE,PARMPTR                                     0307
*   SPIE='1'B;                      /* SPIE ROUTINE INDICATION       */
         OI    SPIE(AEDITCBR),B'00100000'                          0308
*   SYNMSGA=ADDR(AMDPRE07);         /* ADRS OF ADRS OF PGM CK MSG    */
         L     @08,AFMG(,AEDITCBR)                                 0309
         LA    @08,AMDPRE07(,@08)                                  0309
         ST    @08,SYNMSGA                                         0309
*   AREAPTR=ADDR(SAVECALL);         /* SAVE AREA FOR USE OF CALLED 0310
*                                      ROUTINES                      */
         LA    AREAPTR,SAVECALL                                    0310
*   RETSAVE=RETPTR;                 /* SAVE SYSTEM RETURN ADDRS      */
         LR    RETSAVE,RETPTR                                      0311
*   GENERATE;                                                      0312
         ST    AREAPTR,SAVECALL+4               ESTABLISH BACKWARD PTR
         BRWRITE SKIP                   SKIP TO NEW PAGE
*   RET='0'B;                       /* INDENTING OK IN FUTURE        */
         NI    RET(AEDITCBR),B'11110111'                           0313
*   ERRBUF(66:73)                   /* MOVE IN RTN NAME              */
*       =EXITNM;                                                   0314
         L     @08,SYNMSGA                                         0314
         L     @08,MSGADDR(,@08)                                   0314
         MVC   ERRBUF+65(8,@08),EXITNM(AEDITCBR)                   0314
*   GENERATE;                                                      0315
         L     R6,PAGENUMB              PREPARE FOR CVD
         CVD   R6,DBLWORD               CONVERT PAGE NO TO DECIMAL
         UNPK  COMP4(4),DBLWORD+6(2) CONVERT TO EBCDIC
         OI    COMP4+3,X'F0'      STRIP '0'B ZONE
*   ERRBUF(39:42)                   /* MOVE IN PG NO TO PGM CK       */
*       =COMP4;                     /* MSG                           */
         L     @08,SYNMSGA                                         0316
         L     @08,MSGADDR(,@08)                                   0316
         MVC   ERRBUF+38(4,@08),COMP4                              0316
*   GEN(OI  SWD,NOSTDMG);           /* TURN ON NO STANDARD MSG BT    */
         OI  SWD,NOSTDMG
*   CALL AMDPRSYN;                  /* OUTPUT ERROR MESSAGE          */
         L     @15,ASYNTAX                                         0318
         BALR  @14,@15                                             0318
*   IF EOFINPRO='1'B THEN           /* EOF IN PROCESS          Y02014*/
         TM    EOFINPRO(AEDITCBR),B'01000000'                      0319
         BO    @RT00319                                            0319
*     GOTO NOEDITER;                /* YES BYPASS TESTS        Y02014*/
*   RFY                                                            0321
*    (WREG6) UNRSTD;                /*                         Y02014*/
*   IF EDITER=0 THEN                /* TAKE ERROR ACTIONS            */
         CLI   EDITER,0                                            0322
         BE    @RT00322                                            0322
*     GOTO AMDPSPI1;                                               0323
*   IF EDITER=1 THEN                /* TAKE HEX DUMP ACTIONS         */
         CLI   EDITER,1                                            0324
         BE    @RT00324                                            0324
*     GOTO AMDPSPI2;                                               0325
*   SYNMSGA=ADDR(AMDPRE05);         /* ADDRS OF ADDRS OF TRM MSG     */
         L     @08,AFMG(,AEDITCBR)                                 0326
         LA    @08,AMDPRE05(,@08)                                  0326
         ST    @08,SYNMSGA                                         0326
*   TERM='1'B;                      /* SET ON TERMINATION BIT        */
         OI    TERM(AEDITCBR),B'01000000'                          0327
*   IF REXT='1'B THEN               /* IF FROM USER EXIT, THEN       */
         TM    REXT(AEDITCBR),B'00000001'                          0328
         BNO   @RF00328                                            0328
*     USEREXIT=' ';                 /* BLANK IT OUT                  */
         MVI   USEREXIT+1(AEDITCBR),C' '                           0329
         MVC   USEREXIT+2(6,AEDITCBR),USEREXIT+1(AEDITCBR)         0329
         MVI   USEREXIT(AEDITCBR),C' '                             0329
*   GOTO AMDPSPI3;                  /* IN ANY CASE, CLEANUP          */
         B     AMDPSPI3                                            0330
*AMDPSPI1:                                                         0331
*   SYNMSGA=ADDR(AMDPRE04);         /* ADDRS OF ADDRS OF INTRFACE  0331
*                                      IGNORED MESSAGE               */
AMDPSPI1 L     @08,AFMG(,AEDITCBR)                                 0331
         LA    @08,AMDPRE04(,@08)                                  0331
         ST    @08,SYNMSGA                                         0331
*   ERRBUF(54:61)                   /* MOVE IN RTN NAME              */
*       =EXITNM;                                                   0332
         L     @08,MSGADDR(,@08)                                   0332
         MVC   ERRBUF+53(8,@08),EXITNM(AEDITCBR)                   0332
*   IF REXT='1'B THEN               /* IF FROM USER EXIT, THEN       */
         TM    REXT(AEDITCBR),B'00000001'                          0333
         BNO   @RF00333                                            0333
*     DO;                           /* DO THE FOLLOWING              */
*       USEREXIT=' ';               /* BLANK USER EXIT SLOT          */
         MVI   USEREXIT+1(AEDITCBR),C' '                           0335
         MVC   USEREXIT+2(6,AEDITCBR),USEREXIT+1(AEDITCBR)         0335
         MVI   USEREXIT(AEDITCBR),C' '                             0335
*       REXT='0'B;                  /* TURN OF EXIT INDIC      Y02014*/
         NI    REXT(AEDITCBR),B'11111110'                          0336
*       GOTO AMDPSPI3;              /* CONTINUE CLEANUP              */
         B     AMDPSPI3                                            0337
*     END;                                                         0338
*   ERRBIT(INDEX)='1'B;             /* ERROR BIT ON FOR FMT APP      */
@RF00333 L     @08,FIDTBPTR                                        0339
         AL    @08,INDEX                                           0339
         AL    @08,@CF00475                                        0339
         OI    ERRBIT(@08),B'00001000'                             0339
*   GOTO AMDPSPI3;                  /* CONTINUE CLEANUP              */
         B     AMDPSPI3                                            0340
*AMDPSPI2:                                                         0341
*   IF REXT='1'B THEN                                              0341
AMDPSPI2 TM    REXT(AEDITCBR),B'00000001'                          0341
         BNO   @RF00341                                            0341
*     DO;                           /* IF FROM USER EXIT, WON'T      */
*       REXT='0'B;                  /* TURN OFF EXIT INDIC     Y02014*/
         NI    REXT(AEDITCBR),B'11111110'                          0343
*       GOTO AMDPSPI1;              /* DUMP IN HEX/IGNORE INTRFC     */
         B     AMDPSPI1                                            0344
*     END;                                                         0345
*   SYNMSGA=ADDR(AMDPRE06);         /* ADDRS OF ADDRS OF HEX DUMP  0346
*                                      MESSAGE                       */
@RF00341 L     @08,AFMG(,AEDITCBR)                                 0346
         LA    @08,AMDPRE06(,@08)                                  0346
         ST    @08,SYNMSGA                                         0346
*   HEXBIT(INDEX)='1'B;             /* SET ON HEX DUMP BIT           */
         L     @06,FIDTBPTR                                        0347
         AL    @06,INDEX                                           0347
         AL    @06,@CF00475                                        0347
         OI    HEXBIT(@06),B'10000000'                             0347
*   ERRBUF(37:44)                   /* MOVE IN RTN NAME TO           */
*       =EXITNM;                    /* HEX DUMP MSG                  */
         L     @08,MSGADDR(,@08)                                   0348
         MVC   ERRBUF+36(8,@08),EXITNM(AEDITCBR)                   0348
*AMDPSPI3:                                                         0349
*   GEN(OI  SWD,NOSTDMG);           /* TURN ON NO STANDARD MSG BT    */
AMDPSPI3 OI  SWD,NOSTDMG
*   CALL AMDPRSYN;                  /* OUTPUT INFORMATIONAL MSG      */
         L     @15,ASYNTAX                                         0350
         BALR  @14,@15                                             0350
*   CALL PRHEX;                     /* DUMP ERROR REC IN HEX         */
         L     @08,AFRMAD(,AEDITCBR)                               0351
         L     @15,AHEX(,@08)                                      0351
         BALR  @14,@15                                             0351
*   GEN(BRWRITE 2);                 /* SKIP TWO LINES                */
         BRWRITE 2
*NOEDITER:                                                         0353
*   BLDBUF=PSWMSG;                  /* MOVE PSW INFO MSG TO PRINTER
*                                      DATA SET                Y02014*/
NOEDITER L     @08,CURBUF                                          0353
         MVI   BLDBUF+78(@08),C' '                                 0353
         MVC   BLDBUF+79(41,@08),BLDBUF+78(@08)                    0353
         MVC   BLDBUF(78,@08),PSWMSG                               0353
*   BLDBUF(61:68)=EXITNM;           /* MOVE MODNM TO PGM CHK MSG     */
         MVC   BLDBUF+60(8,@08),EXITNM(AEDITCBR)                   0354
*   RFY                                                            0355
*    (WREG6,                                                       0355
*     WREG7) RSTD;                  /*                         Y02014*/
*   WREG6=ADDR(BLDBUF);             /* OBTAIN ADDRS OF BUFFER        */
         LA    WREG6,BLDBUF(,@08)                                  0356
*   WREG7=ADDR(OPSW);               /* OBTAIN ADDRS OF OLD PSW       */
         LA    WREG7,OPSW(,PIESAVE)                                0357
*   GENERATE;                                                      0358
         LA    WREG6,18(WREG6)          OBTAIN OFFSET ADDRESS
         HEXCNVT (6),(7),8              CONVERT TO PRINTABLE EBCDIC
*   WREG6=ADDR(BLDBUF);             /* OBTAIN ADDRS OF BUFFER        */
         L     WREG6,CURBUF                                        0359
         LA    WREG6,BLDBUF(,WREG6)                                0359
*   WREG7=ADDR(EXITADDR);           /* OBTAIN ADDRS OF ENTRY PT @    */
         LA    WREG7,EXITADDR(,AEDITCBR)                           0360
*   GENERATE;                                                      0361
         LA    WREG6,72(WREG6)          OFFSET INTO BUFFER
         LA    WREG7,1(WREG7)         IGNORE HI-ORDER BYTE
         HEXCNVT (6),(7),3              CONVERT TO PRINTABLE EBCDIC
         BRWRITE 1                    PRINT LINE AND SPACE 1 LINE
*   RFY                                                            0362
*    (WREG6,                                                       0362
*     WREG7) UNRSTD;                /*                         Y02014*/
*   LOCAREA(57:64)=SVRGEF;          /* MOVE REGS 14 AND 15 INTO LOCAL
*                                      SAVE AREA                     */
         MVC   LOCAREA+56(8),SVRGEF(PIESAVE)                       0363
*   LOCAREA(1:12)=SVRG012;          /* MOVE REGS 0, 1, AND 2 INTO  0364
*                                      LOCAL SAVE AREA               */
         MVC   LOCAREA(12),SVRG012(PIESAVE)                        0364
*   DATAPTR3=ADDR(LOCAREA);         /* INITIALIZE THE DATA PTR       */
         LA    @08,LOCAREA                                         0365
         ST    @08,DATAPTR3                                        0365
*   PARMPTR=ADDR(REGLINE1);         /* OBTAIN ADDRS OF FMT PTRN      */
         LA    PARMPTR,REGLINE1                                    0366
*   CALL AMDPRGFR;                  /* FORMAT 1ST LINE OF REGS       */
         L     @15,AFMTLINE                                        0367
         BALR  @14,@15                                             0367
*   GEN(BRWRITE 1);                 /* PRINT LINE AND SPACE 1 LN     */
         BRWRITE 1
*   DATAPTR4=ADDR(LOCAREA)          /* UPDATE THE DATA PTR           */
*       +32;                                                       0369
         LA    @08,LOCAREA                                         0369
         AL    @08,@CF00092                                        0369
         ST    @08,DATAPTR4                                        0369
*   PARMPTR=ADDR(REGLINE2);         /* OBTAIN ADDRS OF FMT PTRN      */
         LA    PARMPTR,REGLINE2                                    0370
*   CALL AMDPRGFR;                  /* FORMAT 2ND LINE OF REGS       */
         L     @15,AFMTLINE                                        0371
         BALR  @14,@15                                             0371
*   GEN(BRWRITE SKIP);              /* OUTPUT LINE AND SKIP TO NEW 0372
*                                      PAGE                          */
         BRWRITE SKIP
*   OPSW(5:8)=ADDR                  /* MODIFY PSW IN PIE TO          */
*       (AMDPNSI);                  /* POINT TO AMDPNSI              */
         LA    @08,AMDPNSI                                         0373
         STCM  @08,15,OPSW+4(PIESAVE)                              0373
*   SPIE='0'B;                      /* TURN OFF SPIE BIT             */
         NI    SPIE(AEDITCBR),B'11011111'                          0374
*   GENERATE;                                                      0375
         L     AREAPTR,SAVECALL+4       RELOAD REGISTER 13 CONTENTS
         L     RETPTR,RETSAVE           RELOAD RETURN REGISTER
         BR    RETPTR                   RETURN TO SYSTEM
*AMDPNSI:                                                          0376
*   GENERATE;                                                      0376
AMDPNSI  DS    0H                                                  0376
         BALR  R2,R0                    ESTABLISH ADDRESSABILITY
         USING *,R2                     FOR ERROR RECOVERY
         L     R6,PICASAVE              OBTAIN PICA ADDRS
         SPIE  MF=(E,(R6))              RESTORE PREVIOUS PICA
*   AREAPTR=SPIESAVE;               /* PNT TO SV AREA AMDPRFLT       */
         L     AREAPTR,SPIESAVE                                    0377
*   GENERATE;                                                      0378
*                                       /* RETURN PROCEDURES         */
         LM R14,R12,12(R13)         RESTORE REGISTERS
         BR    R14                      RETURN TO AMDPRFLT
         DROP   R2
         USING @PSTART,@11
         USING @PSTART+4095,@05
*   END AMDPRDNT;                   /* END OF INTERNAL PROCEDURE     */
*                                                                  0379
         B     @EL00002                                            0379
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS SUBROUTINE DETERMINES IF A TIME STAMP RECORD IS TO BE    */
*   /* OUTPUTTED BEFORE THE CURRENT TRACE RECORD                     */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0380
*AMDTMCHK:                                                         0380
*   PROC;                           /*                         Y02014*/
AMDTMCHK STM   @14,@12,@SA00003                                    0380
*   DCL                                                            0381
*     TEMPBUF REG(2) PTR(31);       /* TS RECORD BUFFER        Y02014*/
*   IF TS='0'B THEN                 /* TS PENDING              Y02014*/
         TM    TS(AEDITCBR),B'10000000'                            0382
         BZ    @RT00382                                            0382
*     GOTO AMDEND;                  /* RETURN TO CALLER        Y02014*/
*   GEN(BRWRITE 2,IMM);             /* 2 BLNK LINES PRINTED    Y02014*/
         BRWRITE 2,IMM
*   TEMPBUF=CURBUF;                 /* SAVE CURBUF PTR         Y02014*/
         L     TEMPBUF,CURBUF                                      0385
*   CURBUF=ADTSBUF;                 /* PTR TO TS RECORD        Y02014*/
         L     @10,ADTSBUF(,AEDITCBR)                              0386
         ST    @10,CURBUF                                          0386
*   GEN(BRWRITE 2);                 /* TS AND SPACE OUTPUTTED  Y02014*/
         BRWRITE 2
*   TS='0'B;                        /* TURN OF TS PENDING SWITCH   0388
*                                                              Y02014*/
         NI    TS(AEDITCBR),B'01111111'                            0388
*   CURBUF=TEMPBUF;                 /* RESTORE CURBUF PTR      Y02014*/
         ST    TEMPBUF,CURBUF                                      0389
*AMDEND:                                                           0390
*   RETURN;                         /* RETURN TO CALLER        Y02014*/
@EL00003 DS    0H                                                  0390
@EF00003 DS    0H                                                  0390
@ER00003 LM    @14,@12,@SA00003                                    0390
         BR    @14                                                 0390
*   END;                            /* END PROCEDURE           Y02014*/
         B     @EL00003                                            0391
*   END AMDPRAPP                    /* END OF MAIN PROCEDURE         */
*                                                                  0392
*/* THE FOLLOWING INCLUDE STATEMENTS WERE FOUND IN THIS PROGRAM.     */
*/*%INCLUDE SYSLIB  (AMDPRTAB)                                       */
*/*%INCLUDE SYSLIB  (AMDOPTWD)                                       */
*/*%INCLUDE SYSLIB  (IHAABDPL)                                       */
*                                                                  0392
*       ;                                                          0392
@DATA    DS    0H
@SM00483 MVC   ITEMPREC(0),INREC(@08)
@SM00485 MVC   ITEMPREC+256(0),INREC+256(@10)
         DS    0F
@SA00001 DS    18F
@SA00002 DS    15F
@SA00003 DS    15F
         DS    0F
@CF00046 DC    F'1'
@CF00079 DC    F'2'
@CF00169 DC    F'3'
@CF00099 DC    F'4'
@CF00110 DC    F'6'
@CF00044 DC    F'8'
@CF00076 DC    F'12'
@CF00092 DC    F'32'
@CF00121 DC    F'256'
@CF00414 DC    F'257'
@CF00463 DC    F'-5'
@CF00475 DC    F'-1'
         DS    0D
SPIESAVE DS    A
NSISAVE  DS    A
FIDTBPTR DS    A
INDEX    DS    F
PICASAVE DS    A
CODESAVE DS    F
DISPL    DS    F
@TS00001 DS    CL1
@CC00391 DC    C'AMDPRHEX'
         DS    CL3
SAVECALL DS    CL72
PLIST    DS    CL32
         ORG   PLIST
RECPTR   DS    AL4
BUFPTR   DS    AL4
GTFOPTR  DS    AL4
EIDPTR   DS    AL4
DATAPTR  DS    AL4
FRMADDR  DS    AL4
WKAREADD DS    AL4
SNAPPARM DS    AL4
         ORG   PLIST+32
ITEMPREC DS    CL284
OTEMPREC DS    CL110
USRCON   DC    CL6'AMDUSR'
AMDPREF  DC    CL1'A'
USRCONI  DC    CL6'IMDUSR'
IMDPREF  DC    CL1'I'
USRCONH  DC    CL6'HMDUSR'
HMDPREF  DC    CL1'H'
SYSCON   DC    CL6'AMDSYS'
         DS    CL3
LOCAREA  DS    CL64
COMP4    DS    CL4
PSWMSG   DC    CL78'PGM CHECK OLD PSW XXXXXXXX XXXXXXXX.  ENTRY POINT OC
               F MODULE XXXXXXXX IS XXXXXX'
BLANK1   DC    CL10'          '
APPPTCH  DC    CL256'APPPTCH'
         DC    CL256' '
         DC    CL88' '
         DS    CL4
DBLWORD  DS    CL8
SYSTAB   DC    256B'00000000'
USRTABL  DC    X'80'
         DC    255B'00000000'
AMDPRAPP CSECT
FMTPTN8  FMTPTRN (LBL,LBLP,DTA,DTAP,DTAC),4,4,10,18,                   *
               TIMELAB,(DATAPTR2,0),LAST
TIMELAB  DC    C'TIME'
FMTPTNF  FMTPTRN (LBL,LBLP,DTA,DTAP,DTAC),4,4,10,18,                   *
               TIMELAB,(DATAPTR1,0),LAST
REGLINE1 FMTPTRN (LBL,LBLP,DTA,DTAP,DTAC),5,4,0,7,REG1LAB,             *
               (DATAPTR3,0)
         FMTPTRN (DTA,DTAC),,4,,16,,,
         FMTPTRN (DTA,DTAC),,4,,25,,,
         FMTPTRN (DTA,DTAC),,4,,34,,,
         FMTPTRN (DTA,DTAC),,4,,43,,,
         FMTPTRN (DTA,DTAC),,4,,52,,,
         FMTPTRN (DTA,DTAC),,4,,61,,,
         FMTPTRN (DTA,DTAC),,4,,70,,,LAST
REGLINE2 FMTPTRN (LBL,LBLP,DTA,DTAP,DTAC),6,4,0,7,REG2LAB,             *
               (DATAPTR4,0)
         FMTPTRN (DTA,DTAC),,4,,16,,,
         FMTPTRN (DTA,DTAC),,4,,25,,,
         FMTPTRN (DTA,DTAC),,4,,34,,,
         FMTPTRN (DTA,DTAC),,4,,43,,,
         FMTPTRN (DTA,DTAC),,4,,52,,,
         FMTPTRN (DTA,DTAC),,4,,61,,,
         FMTPTRN (DTA,DTAC),,4,,70,,,LAST
REG1LAB  DC    C'R0/R7'
         DS    0F
REG2LAB  DC    C'R8/R15'
         DS    0F
USRFMT   FMTPTRN (LBL,LBLP,DTA,DTAP,DTAC),3,2,0,5,USRLAB,              *
               (DATAPTR5,0)
         FMTPTRN (LBL,LBLP,DTA,DTAP,DTAC),4,4,10,15,                   *
               ASCBLAB,(ASCBPTR,0)
         FMTPTRN (LBL,LBLP,DTA,DTAP,DTAC,DTAE),4,8,25,30,              *
               JOBNLAB,(JOBNPTR,0),LAST
         DS    0F
USRLAB   DC    C'USR'
         DS    0F
ASCBLAB  DC    C'ASCB'
JOBNLAB  DC    C'JOBN'
AMDPRAPP CSECT
@00      EQU   00                      EQUATES FOR REGISTERS 0-15
@01      EQU   01
@02      EQU   02
@03      EQU   03
@04      EQU   04
@05      EQU   05
@06      EQU   06
@07      EQU   07
@08      EQU   08
@09      EQU   09
@10      EQU   10
@11      EQU   11
@12      EQU   12
@13      EQU   13
@14      EQU   14
@15      EQU   15
PIESAVE  EQU   @10
LDSW     EQU   @10
RETSAVE  EQU   @04
ABDPLPTR EQU   @04
AEDITCBR EQU   @09
COMPTR   EQU   @12
AREAPTR  EQU   @13
PARMPTR  EQU   @01
CODEREG  EQU   @15
REG2     EQU   @02
SPIEREG  EQU   @02
RETPTR   EQU   @14
WREG6    EQU   @06
WREG7    EQU   @07
TEMPBUF  EQU   @02
         ENTRY APPPTCH
         ENTRY AMDPRSPI
         ENTRY SPIESAVE
         ENTRY NSISAVE
         ENTRY PICASAVE
AMDPRTAB EQU   0
AFMG     EQU   AMDPRTAB
CURREC   EQU   AMDPRTAB+4
DEBGFLGS EQU   AMDPRTAB+8
PTHFLGS1 EQU   DEBGFLGS
REXT     EQU   PTHFLGS1
PTHFLGS2 EQU   DEBGFLGS+1
APP      EQU   PTHFLGS2
INRFCFGS EQU   DEBGFLGS+2
TERM     EQU   INRFCFGS
SPIE     EQU   INRFCFGS
RET      EQU   INRFCFGS
IOFLGS   EQU   DEBGFLGS+3
GTFWDPTR EQU   AMDPRTAB+20
USEREXIT EQU   AMDPRTAB+24
DDNAME   EQU   AMDPRTAB+32
STARTIME EQU   AMDPRTAB+40
STOPTIME EQU   AMDPRTAB+52
NAMES    EQU   AMDPRTAB+64
ADS      EQU   AMDPRTAB+104
AADS     EQU   ADS
SIF      EQU   AMDPRTAB+124
SIOFLGS  EQU   SIF
DVADS1   EQU   AMDPRTAB+128
IO       EQU   AMDPRTAB+228
IOFLGS2  EQU   IO
DVADS2   EQU   AMDPRTAB+232
VCF      EQU   AMDPRTAB+332
SVCFLGS  EQU   VCF
USR      EQU   AMDPRTAB+368
USRFLGS  EQU   USR
USRTAB   EQU   AMDPRTAB+372
PI       EQU   AMDPRTAB+452
PIFLGS   EQU   PI
PGMNGEN  EQU   AMDPRTAB+456
GENFLAGS EQU   PGMNGEN+3
GENFLGS1 EQU   AMDPRTAB+460
TS       EQU   GENFLGS1
EOFINPRO EQU   GENFLGS1
RECDLL   EQU   AMDPRTAB+461
EXITNM   EQU   AMDPRTAB+464
EXITADDR EQU   AMDPRTAB+472
PRFMTADD EQU   AMDPRTAB+480
REENTWKA EQU   AMDPRTAB+484
AFRMAD   EQU   AMDPRTAB+488
OFSTEID  EQU   AMDPRTAB+492
OFSTDATA EQU   AMDPRTAB+494
ADTSBUF  EQU   AMDPRTAB+496
ESTARTME EQU   AMDPRTAB+500
ESTOPTME EQU   AMDPRTAB+509
AMDOPTWD EQU   0
OPTS1    EQU   AMDOPTWD
OPTS2    EQU   AMDOPTWD+1
OPTS3    EQU   AMDOPTWD+2
OPTS4    EQU   AMDOPTWD+3
OPTTIME  EQU   OPTS4
ABDPL    EQU   0
ADPLSBPL EQU   ABDPL+6
ADPLFLAG EQU   ABDPL+7
ADPLBUF  EQU   ABDPL+8
ADPLFRMT EQU   ABDPL+24
FRMATAB  EQU   0
AGET     EQU   FRMATAB
AHEX     EQU   FRMATAB+4
ACON     EQU   FRMATAB+8
AFLT     EQU   FRMATAB+12
AAPP     EQU   FRMATAB+16
AEXT     EQU   FRMATAB+20
ASPI     EQU   FRMATAB+28
ATME     EQU   FRMATAB+32
PRHEX    EQU   0
PRTME    EQU   0
FIDTAB   EQU   0
HEXBIT   EQU   FIDTAB
WHOUSED  EQU   FIDTAB
HMDUSED  EQU   WHOUSED
IMDUSED  EQU   WHOUSED
ERRBIT   EQU   FIDTAB
PREFIXMP EQU   0
INREC    EQU   0
WKAREA   EQU   0
USRINFO  EQU   11
AMDPRSEG EQU   0
AMDPRSYN EQU   0
MSGADDR  EQU   0
ERRBUF   EQU   0
AMDFMGMS EQU   32
AMDPRE03 EQU   AMDFMGMS
AMDPRE04 EQU   AMDFMGMS+4
AMDPRE05 EQU   AMDFMGMS+8
AMDPRE06 EQU   AMDFMGMS+12
AMDPRE07 EQU   AMDFMGMS+16
AMDPRE12 EQU   AMDFMGMS+24
USERRTN  EQU   0
AMDPRGFR EQU   0
BLDBUF   EQU   1
PIE      EQU   0
OPSW     EQU   PIE+4
SVRGEF   EQU   PIE+12
SVRG012  EQU   PIE+20
SVAREA   EQU   4
PRAPP    EQU   0
PRCON    EQU   0
PREXT    EQU   0
PRFLT    EQU   0
PRGET    EQU   0
PRSPI    EQU   0
         AGO   .@UNREFD                START UNREFERENCED COMPONENTS
PICAAD   EQU   PIE+1
PIERES   EQU   PIE
AMDPRE11 EQU   AMDFMGMS+20
RECTIME  EQU   PREFIXMP+6
RECFID   EQU   PREFIXMP+5
RECAID   EQU   PREFIXMP+4
RECRES1  EQU   PREFIXMP+2
RECLL    EQU   PREFIXMP
NOUSE2   EQU   FIDTAB
RESVRD   EQU   FIDTAB
FRMRES1  EQU   FRMATAB+36
APRFMG   EQU   FRMATAB+24
ADPLEXT  EQU   ABDPL+52
ADPLFMT2 EQU   ABDPL+48
ADPLFMT1 EQU   ABDPL+44
ADPLCOM4 EQU   ABDPL+40
ADPLCOM3 EQU   ABDPL+36
ADPLCOM2 EQU   ABDPL+32
ADPLCOM1 EQU   ABDPL+28
ADPLMEMA EQU   ABDPL+20
ADPLCVT  EQU   ABDPL+16
ADPLPRNT EQU   ABDPL+12
@NM00002 EQU   ADPLFLAG
ADPLSYTM EQU   ADPLFLAG
ADPLSNPR EQU   ADPLFLAG
ADPLASID EQU   ABDPL+4
ADPLTCB  EQU   ABDPL
OPTRES3  EQU   OPTS4
OPTIOSIO EQU   OPTS3
OPTRES2  EQU   OPTS3
OPTRR    EQU   OPTS3
OPTSRM   EQU   OPTS3
OPTRNIO  EQU   OPTS3
OPTEXT   EQU   OPTS3
OPTIOP   EQU   OPTS2
OPTIO    EQU   OPTS2
OPTPIP   EQU   OPTS2
OPTPI    EQU   OPTS2
OPTSIOP  EQU   OPTS2
OPTSIO   EQU   OPTS2
OPTSVCP  EQU   OPTS2
OPTSVC   EQU   OPTS2
OPTPCI   EQU   OPTS1
OPTRES1  EQU   OPTS1
OPTDSP   EQU   OPTS1
OPTTRC   EQU   OPTS1
OPTUSR   EQU   OPTS1
OPTSYS   EQU   OPTS1
OPTSYSP  EQU   OPTS1
OPTSYSM  EQU   OPTS1
RESERVED EQU   AMDPRTAB+522
CVTTZONE EQU   AMDPRTAB+518
ESPSEC   EQU   ESTOPTME+7
ESPMIN   EQU   ESTOPTME+5
ESPHR    EQU   ESTOPTME+3
ESPDAY   EQU   ESTOPTME
ESSEC    EQU   ESTARTME+7
ESMIN    EQU   ESTARTME+5
ESHR     EQU   ESTARTME+3
ESDAY    EQU   ESTARTME
AEIOCT   EQU   AMDPRTAB+476
@NM00001 EQU   GENFLGS1
FIRSTHSW EQU   GENFLGS1
TSFOUND  EQU   GENFLGS1
EOF      EQU   GENFLAGS
RR       EQU   GENFLAGS
SRM      EQU   GENFLAGS
RNIO     EQU   GENFLAGS
SYSM     EQU   GENFLAGS
SYS      EQU   GENFLAGS
DSP      EQU   GENFLAGS
EXT      EQU   GENFLAGS
PICODEA  EQU   PGMNGEN+2
PICODES  EQU   PGMNGEN
Q        EQU   PI+1
P01R     EQU   PIFLGS
SELP     EQU   PIFLGS
ALLP     EQU   PIFLGS
USRNGTAB EQU   USRTAB
O        EQU   USR+1
N01R     EQU   USRFLGS
SELU     EQU   USRFLGS
ALLU     EQU   USRFLGS
SVCNUMS  EQU   AMDPRTAB+336
M        EQU   VCF+1
L        EQU   SVCFLGS
SELV     EQU   SVCFLGS
ALLV     EQU   SVCFLGS
IODVADS  EQU   DVADS2
K01RES   EQU   IO+1
JJ       EQU   IOFLGS2
SELI     EQU   IOFLGS2
ALLI     EQU   IOFLGS2
SIODVADS EQU   DVADS1
II       EQU   SIF+1
H        EQU   SIOFLGS
NOEQU    EQU   SIOFLGS
EQUIV    EQU   SIOFLGS
SELS     EQU   SIOFLGS
ALLS     EQU   SIOFLGS
ASCBADDR EQU   AADS
JOBNAMES EQU   NAMES
DAY2     EQU   STOPTIME+10
F        EQU   STOPTIME+8
TIME2    EQU   STOPTIME
DAY      EQU   STARTIME+10
D        EQU   STARTIME+8
TIME     EQU   STARTIME
C        EQU   DEBGFLGS+4
B        EQU   IOFLGS
GETEOF   EQU   IOFLGS
DMDFMT   EQU   INRFCFGS
EDITSTOP EQU   INRFCFGS
EXTTRC   EQU   INRFCFGS
FMT      EQU   INRFCFGS
FLMODE   EQU   INRFCFGS
REMAIN   EQU   PTHFLGS2
FRM      EQU   PTHFLGS1
FLT      EQU   PTHFLGS1
HEX      EQU   PTHFLGS1
CON      EQU   PTHFLGS1
GET      EQU   PTHFLGS1
SCN      EQU   PTHFLGS1
ROOT     EQU   PTHFLGS1
.@UNREFD ANOP                          END UNREFERENCED COMPONENTS
@RT00108 EQU   AMDPRTN
@RT00120 EQU   AMDPLOAD
@RT00122 EQU   USEHMD
@RT00133 EQU   AMDPAPP5
@RF00143 EQU   AMDPAPP4
@RT00174 EQU   AMDPHDMP
@RT00202 EQU   AMDNOSPI
@RT00227 EQU   AMDPRTN
@RT00257 EQU   AMDPERR
@RT00281 EQU   @EL00002
@RT00283 EQU   AMDPDNT1
@RF00297 EQU   @EL00002
@RF00301 EQU   @EL00002
@RT00319 EQU   NOEDITER
@RT00322 EQU   AMDPSPI1
@RT00324 EQU   AMDPSPI2
@RF00328 EQU   AMDPSPI3
AMDEND   EQU   @EL00003
@RT00382 EQU   AMDEND
@ENDDATA EQU   *
         END   AMDPRAPP,(C'PLS2041',0603,74298)
