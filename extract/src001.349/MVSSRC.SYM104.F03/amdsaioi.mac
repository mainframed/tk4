         TITLE 'AMDSAIOI VITRUAL DUMP I/O INTERRUPT HANDLER            *
                       '
AMDSAIOI CSECT
         STM   R0,R15,IOISAVE     SAVE REGISTERS AT TIME OF INTERRUPT
         BALR  BASEREG,0          ESTABLISH ADDRESSABILITY
         USING *,BASEREG
*   IOIBSW = OFF;                   /* INDICATE INTERRUPT ENTERED    */
         NI    IOIBSW,B'01111111'                               01S0198
*   GO TO SVECHAIN;                 /* SET UP SAVE AREA CHAIN        */
         B     SVECHAIN                                         01S0199
*                                                               01S0200
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS IS THE SVC 27 ENTRY TO IOI. IT IS AN ALTERNATE ''BRANCH''*/
*   /* TYPE ENTRY POINT                                              */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0200
*/*AMDSAIOB: E ENTRY VIA SVC 27                                      */
*/* N THIS ENTRY RECEIVES CONTROL VIA AN SVC                         */
*/* N THE DEVICE ADDR IS IN R10                                      */
*/* N THE CSW IS AT LOCATION FLCCSW                                  */
*/* P SAVE REGISTERS IN CALLER'S SAVE AREA                           */
*/* P SAVE R10 IN FLCIOAA                                            */
*/* P TURN ON IOIBSW                                                 */
*/*SVECHAIN: P ESTABLISH ADDRESSABILITY FOR COMMON ENTRY             */
*   GEN REFS(R0,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15)
*         SETS(BASEREG)FLOWS(AMDSAIOB);                         01S0200
         ENTRY AMDSAIOB
AMDSAIOB DS    0H
         STM   RETREG,R12,12(R13)    SAVE CALLERS REGISTERS
         BALR  BASEREG,0             ESTABLISH ADDRESSABILITY
         USING *,BASEREG
*   RESPECIFY R10 RESTRICTED;                                   01S0201
*   FLCIOAA = R10;                  /* SAVE INPUT DEVICE ADDRESS     */
         STCM  R10,7,FLCIOAA                                    01S0202
*   RESPECIFY R10 UNRESTRICTED;                                 01S0203
*   IOIBSW = ON;                    /* INDICATE BRANCH ENTRY         */
*                                                               01S0204
         OI    IOIBSW,B'10000000'                               01S0204
*SVECHAIN:                                                      01S0205
*   GEN SETS(BASEREG);                                          01S0205
SVECHAIN DS    0H                                               01S0205
   BALR  BASEREG,0     REESTABLISH ADDRESSABILITY FOR REST OF CODE
   USING *,BASEREG
*                                                               01S0206
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS SECTION OF CODE INITIALIZES IOI'S SAVE AREA AND QUEUES   */
*   /* THE RCB ON THE VCTRCB CHAIN                                   */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0206
*/*IOIRCBQ: P SET UP SAVE AREA CHAINING                              */
*/* P (RCB,DEQRCB,NORM,) ESTABLISH RCB AND QUEUE ON VCTRCB CHAIN     */
*   RESPECIFY R13 RESTRICTED;                                   01S0206
*   RESPECIFY SAVEFORM BASED (R13);                             01S0207
*   IF IOIBSW = ON THEN                                         01S0208
         TM    IOIBSW,B'10000000'                               01S0208
         BNO   @RF00208                                         01S0208
*     DO;                                                       01S0209
*       SAVENEXT = ADDR(IOIAREA);   /* SET UP FORWARD CHAIN          */
         LA    @10,IOIAREA                                      01S0210
         ST    @10,SAVENEXT(,R13)                               01S0210
*       RESPECIFY SAVEFORM BASED (ADDR(IOIAREA));               01S0211
*       SAVEBACK = R13;             /* SAVE BACK CHAIN               */
         ST    R13,SAVEBACK(,@10)                               01S0212
*     END;                                                      01S0213
*   R13 = ADDR(IOIAREA);            /* SET UP R13 WITH SAVE AREA
*                                      ADDRESS                       */
@RF00208 LA    R13,IOIAREA                                      01S0214
*   CCTREG = CCTADDR;               /* SET POINTER TO CCT            */
         LH    CCTREG,@CH00740                                  01S0215
*   VCCTREG = CTVCCT;               /* RESET POINTER TO VCCT         */
         L     VCCTREG,CTVCCT(,CCTREG)                          01S0216
*   IRCBNEXT = VCTRCB;              /* POINT TO NEXT LOWER CHAIN
*                                      ELEMENT                       */
         MVC   IRCBNEXT(4),VCTRCB(VCCTREG)                      01S0217
*   IRCBEXIT = ADDR (IOIRET);       /* ERROR EXIT                    */
         LA    @10,IOIRET                                       01S0218
         ST    @10,IRCBEXIT                                     01S0218
*   IRCBBASE = BASEREG;             /* SAVE BASE REGISTER FOR RCB
*                                      EXIT                          */
         ST    BASEREG,IRCBBASE                                 01S0219
*   VCTRCB = ADDR(IOIRCB);          /* QUEUE RCB ON CHAIN            */
         LA    @10,IOIRCB                                       01S0220
         ST    @10,VCTRCB(,VCCTREG)                             01S0220
*                                                               01S0221
*   /*****************************************************************/
*   /*                                                               */
*   /* WE SHALL NEXT DETERMINE IF THE INTERRUPT IS VALID (I.E. FROM A*/
*   /* DEVICE AMDSADMP IS USING - NOTE ONLY DA, WORKFILE, AND OUTPUT */
*   /* ARE CONSIDERED VALID DEVICES                                  */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0221
*/* D (YES,,NO,IOIWKCK) DOES DA IODBDEV = FLCIOAA ?                  */
*/* D (YES,,NO,IOIWKCK) DA I/O ACTIVE ?                              */
*/* P (,IOIRCBE2) SET IODBREG = ADDR OF DA IODB                      */
*/*IOIWKCK: D (YES,,NO,IOIOTCK) DOES WKFILE IODBDEV = FLCIOAA ?      */
*/* D (YES,,NO,IOIOTCK) I/O ACTIVE ON WKFILE ?                       */
*/* P (,IOIRCBE2) SET IODBREG = ADDR OF WKFILE IODB                  */
*/*IOIOTCK: D (YES,,NO,IOIEXTIN) DOES OUTPUT IODBDEV = FLCIOAA ?     */
*/* D (YES,,NO,IOIEXTIN) I/O ACTIVE ON OUTPUT ?                      */
*/* P (,IOIRCBE2) SET IODBREG = ADDR OF OUTPUT IODB                  */
*/*IOIEXTIN: N (,DEQRCB) EXTRANEOUS INTERRUPT - IGNORE               */
*   IODBREG = ADDR(IODBDA);         /* SET POINTER TO DA IODB        */
         L     IODBREG,@CA00945                                 01S0221
*   IF FLCIOAA = IODBDEV & IODBACTV = ON THEN                   01S0222
         SR    @10,@10                                          01S0222
         ICM   @10,7,FLCIOAA                                    01S0222
         CH    @10,IODBDEV(,IODBREG)                            01S0222
         BNE   @RF00222                                         01S0222
         TM    IODBACTV(IODBREG),B'00000100'                    01S0222
         BO    @RT00222                                         01S0222
*     GO TO IOIRCBE2;               /* USE DA IODB FOR INTERRUPT     */
*   IODBREG = ADDR(IODBWORK);       /* SET POINTER TO WORKFILE IODB  */
@RF00222 L     IODBREG,@CA00944                                 01S0224
*   IF FLCIOAA = IODBDEV & IODBACTV = ON THEN                   01S0225
         SR    @10,@10                                          01S0225
         ICM   @10,7,FLCIOAA                                    01S0225
         CH    @10,IODBDEV(,IODBREG)                            01S0225
         BNE   @RF00225                                         01S0225
         TM    IODBACTV(IODBREG),B'00000100'                    01S0225
         BO    @RT00225                                         01S0225
*     GO TO IOIRCBE2;               /* USE WORKFILE IODB FOR    01S0226
*                                      INTERRUPT                     */
*   IODBREG = ADDR(IODBOUT);        /* SET POINTER TO OUTPUT IODB    */
@RF00225 L     IODBREG,@CA00946                                 01S0227
*   IF FLCIOAA = IODBDEV & IODBACTV = ON THEN                   01S0228
         SR    @10,@10                                          01S0228
         ICM   @10,7,FLCIOAA                                    01S0228
         CH    @10,IODBDEV(,IODBREG)                            01S0228
         BNE   @RF00228                                         01S0228
         TM    IODBACTV(IODBREG),B'00000100'                    01S0228
         BO    @RT00228                                         01S0228
*     GO TO IOIRCBE2;               /* USE OUTPUT IODB FOR INTERRUPT */
*   ELSE                                                        01S0230
*     GO TO IOIRET;                 /* EXTRANEOUS INTERRUPT - IGNORE */
*                                                               01S0230
         B     IOIRET                                           01S0230
*   /*****************************************************************/
*   /*                                                               */
*   /* MODIFY THE RCB EXIT ADDRESS TO IOI'S PRIMARY RCB EXIT         */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0231
*/*IOIRCBE2: P (NORM,,RCB2,RCBE2) MODIFY RCB EXIT ENTRY TO RCBE2     */
*                                                               01S0231
*IOIRCBE2:                                                      01S0231
*   IRCBEXIT = ADDR(RCBE2);         /* NORMAL IOI RCB EXIT           */
IOIRCBE2 LA    @10,RCBE2                                        01S0231
         ST    @10,IRCBEXIT                                     01S0231
*                                                               01S0232
*   /*****************************************************************/
*   /*                                                               */
*   /* NOW THE INTERRUPT CAN BE PROCESSED. WE KNOW THE DEVICE IS     */
*   /* VALID, THAT AN INTERRUPT OCCURRED FOR THE DEVICE, AND THAT    */
*   /* SOME ACTION MAY BE TAKEN                                      */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0232
*/* P SET IODBINT = 1 FOR THIS IODB                                  */
*/* P MOVE FLCCSW TO IODBCSW                                         */
*/* P SET CCW ADDRESS                                                */
*   IODBINT = ON;                   /* INDICATE AN INTERRUPT HAS
*                                      OCCURRED                      */
         OI    IODBINT(IODBREG),B'00100000'                     01S0232
*   IODBCSW = FLCCSW;               /* SAVE THE CSW AT THE TIME OF
*                                      THE INTERRUPT                 */
         MVC   IODBCSW(8,IODBREG),FLCCSW                        01S0233
*   IF CSWDE = ON THEN              /* DEVICE END RECEIVED           */
         LA    @10,IODBCSW(,IODBREG)                            01S0234
         TM    CSWDE(@10),B'00000100'                           01S0234
         BNO   @RF00234                                         01S0234
*     IODBACTV = OFF;               /* INDICATE I/O NO LONGER ACTIVE */
         NI    IODBACTV(IODBREG),B'11111011'                    01S0235
*   GEN FLOWS(RCBE2)                /* ANY ERROR WILL NOW CAUSE 01S0236
*                                      AMDSAAUD TO RETURN CONTROL AT
*                                      RCBE2                         */
*                                                               01S0236
@RF00234 DS    0H                                               01S0237
*   /*****************************************************************/
*   /*                                                               */
*   /* FIND OUT WHAT HAPPENED, I/O ERROR ?                           */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0237
*/*IOCATERR: D (YES,IOERR,NO,IOPCI) CATASTROPHIC ERROR ?             */
*/*IOERR: N FOR ALL ERRORS QUIESCE I/O ON ALL OTHER DEVICES          */
*                                                               01S0237
*IOCATERR:                                                      01S0237
*   IF CSWCADDR = ZERO × (CSWCADDR=IODBCAW & VCTCPOUT ^= IODBCAW) THEN
IOCATERR LA    @10,IODBCSW(,IODBREG)                            01S0237
         SR    @04,@04                                          01S0237
         ICM   @04,7,CSWCADDR(@10)                              01S0237
         LTR   @04,@04                                          01S0237
         BZ    @RT00237                                         01S0237
         L     @10,IODBCAW(,IODBREG)                            01S0237
         CR    @04,@10                                          01S0237
         BNE   @RF00237                                         01S0237
         C     @10,VCTCPOUT(,VCCTREG)                           01S0237
         BE    @RF00237                                         01S0237
@RT00237 DS    0H                                               01S0238
*                                   /* IS THERE A CCW ADDRESS        */
*     CURCCW = IODBCAW;             /* NO--USE THE CAW               */
         L     CURCCW,IODBCAW(,IODBREG)                         01S0238
*   ELSE                                                        01S0239
*     CURCCW = CSWCADDR - LENGTH(CCW); /* YES--THEN BACK IT UP       */
         B     @RC00237                                         01S0239
@RF00237 LA    @10,IODBCSW(,IODBREG)                            01S0239
         SR    CURCCW,CURCCW                                    01S0239
         ICM   CURCCW,7,CSWCADDR(@10)                           01S0239
         SH    CURCCW,@CH00036                                  01S0239
*   IF CSWATTN = ON × CSWSTMOD = ON × CSWBUSY = ON × CSWUC = ON ×
*         CSWUE = ON × CSWIL = ON × CSWPGC = ON × CSWPTC = ON × 01S0240
*         CSWCDC = ON × CSWCCC = ON × CSWICC = ON × CSWCHC = ON THEN
@RC00237 LA    @10,IODBCSW(,IODBREG)                            01S0240
         TM    CSWATTN(@10),B'11010011'                         01S0240
         BNZ   @RT00240                                         01S0240
         TM    CSWIL(@10),B'01111111'                           01S0240
         BNZ   @RT00240                                         01S0240
*     GO TO IOERR;                                              01S0241
*   IF (CSWPCI = ON & IODBREG ^= ADDR(IODBOUT)) THEN            01S0242
         TM    CSWPCI(@10),B'10000000'                          01S0242
         BNO   @RF00242                                         01S0242
         L     @10,@CA00946                                     01S0242
         CR    IODBREG,@10                                      01S0242
         BE    @RF00242                                         01S0242
*     DO;                           /* IF CATASTROPHIC ERROR PREPARE
*                                      TO PROCESS BY ERROR RECOVERY  */
*                                                               01S0243
*IOERR:                                                         01S0244
*       IODBHALT = ON;              /* SET ON HALTED I/O FOR PRIMARY
*                                      DEVICE                        */
IOERR    DS    0H                                               01S0245
*       IODBACTV = OFF;             /* I/O NOT ACTIVE ON DEVICE      */
         OI    IODBHALT(IODBREG),B'00001000'                    01S0245
         NI    IODBACTV(IODBREG),B'11111011'                    01S0245
*                                                               01S0246
*   /*****************************************************************/
*   /*                                                               */
*   /* ERROR SITUATION -- STOP I/O ON ALL OTHER DEVICES. WE DO NOT   */
*   /* WANT INTERFERENCE FROM OTHER ACTIVE AMDSADMP I/O DURING ERROR */
*   /* RECOVERY                                                      */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0246
*/* D (YES,,NO,HALTWK) IS ORIGINAL IODB = DA IODB ?                  */
*/* S IOIHALT:HALT I/O ON OTHER ACTIVE DEVICES                       */
*/*HALTWK: D (YES,,NO,HALTOP) IS ORIGINAL IODB = WKFILE IODB ?       */
*/* S IOIHALT:HALT I/O ON OTHER ACTIVE DEVICES                       */
*/*HALTOP: D (YES,,NO,HALTDONE) IS ORIGINAL IODB = OUTPUT IODB ?     */
*/* S IOIHALT:HALT I/O ON OTHER ACTIVE DEVICES                       */
*       IF IODBREG ^= ADDR(IODBDA) THEN                         01S0246
         L     @10,@CA00945                                     01S0246
         CR    IODBREG,@10                                      01S0246
         BE    @RF00246                                         01S0246
*         DO;                       /* SET UP TO HALT DA DEVICE      */
*           IODBADDR = ADDR(IODBDA); /* SET UP INPUT DEVICE ADDRESS  */
         LR    IODBADDR,@10                                     01S0248
*           CALL IOIHALT;           /* STOP I/O ON THE DEVICE        */
         BAL   @14,IOIHALT                                      01S0249
*         END;                                                  01S0250
*       IF IODBREG ^= ADDR(IODBWORK) THEN                       01S0251
@RF00246 L     @10,@CA00944                                     01S0251
         CR    IODBREG,@10                                      01S0251
         BE    @RF00251                                         01S0251
*         DO;                       /* SET UP TO HALT WORKFILE I/O   */
*           IODBADDR = ADDR(IODBWORK); /* WORKFILE IODB ADDRESS      */
         LR    IODBADDR,@10                                     01S0253
*           CALL IOIHALT;           /* STOP WORKFILE I/O             */
         BAL   @14,IOIHALT                                      01S0254
*         END;                                                  01S0255
*       IF IODBREG ^= ADDR(IODBOUT) THEN                        01S0256
@RF00251 L     @10,@CA00946                                     01S0256
         CR    IODBREG,@10                                      01S0256
         BE    @RF00256                                         01S0256
*         DO;                       /* STOP OUTPUT I/O               */
*           IODBADDR = ADDR(IODBOUT); /* SET UP FOR OUTPUT I/O       */
         LR    IODBADDR,@10                                     01S0258
*           CALL IOIHALT;           /* STOP I/O TO OUTPUT DEVICE     */
         BAL   @14,IOIHALT                                      01S0259
*         END;                                                  01S0260
*                                                               01S0261
*   /*****************************************************************/
*   /*                                                               */
*   /* NOW I/O HAS BEEN QUIESCED ON ALL OTHER ACTIVE DEVICES. WE CAN */
*   /* NOW ATTEMPT ERROR RECOVERY                                    */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0261
*/*HALTDONE: D (NO,,YES,IOITER) IODBCLAS = TAPE ?                    */
*/* D (NO,,YES,IOIDER) IODBCLAS = D. A. ?                            */
*/* P SET UP UNIQUE IOI AUDIT CODE                                   */
*/* W (RCB,RCBE2) CALL AMDSAAUD (SVC 13)                             */
*/*IOITER: L AMDSATER: TAPE ERROR RECOVERY ROUTINE                   */
*/*IOIHLT0: P (,IOIBUF) IODBHALT = 0                                 */
*/*IOIDER: L (,IOIHLT0) AMDSADER: DA ERROR RECOVERY ROUTINE          */
*       RESPECIFY R8 RESTRICTED;                                01S0261
@RF00256 DS    0H                                               01S0262
*       R8 = IODBREG;               /* SET UP ACTIVE DEVICE IODB     */
         LR    R8,IODBREG                                       01S0262
*       IF IODBCLAS = TAPE THEN                                 01S0263
         CLI   IODBCLAS(IODBREG),128                            01S0263
         BNE   @RF00263                                         01S0263
*         SVC (TERSVC);             /* HANDLE TAPE ERROR RECOVERY    */
         SVC   10                                               01S0264
*       ELSE                                                    01S0265
*         IF IODBCLAS = DA THEN                                 01S0265
         B     @RC00263                                         01S0265
@RF00263 CLI   IODBCLAS(IODBREG),32                             01S0265
         BNE   @RF00265                                         01S0265
*           SVC (DERSVC);           /* HANDLE DA ERROR RECOVERY      */
         SVC   15                                               01S0266
*         ELSE                                                  01S0267
*           DO;                                                 01S0267
         B     @RC00265                                         01S0267
@RF00265 DS    0H                                               01S0268
*             VCTAUDIT = IOIAUD1;   /* SET UP AUDIT ERROR CONDITION
*                                      CODE INDICATING INVALID DEVICE
*                                      TYPE                          */
         MVC   VCTAUDIT(2,VCCTREG),IOIAUD1                      01S0268
*             SVC (AUDSVC);         /* ERROR - DUMP AMDSADMP         */
         SVC   13                                               01S0269
*           END;                                                01S0270
*       IODBHALT = OFF;             /* RESET HALT SWITCH AS WE HAVE
*                                      HANDLED THE ERROR             */
@RC00265 DS    0H                                               01S0271
@RC00263 NI    IODBHALT(IODBREG),B'11110111'                    01S0271
*       RESPECIFY R8 UNRESTRICTED;                              01S0272
*       IF CSWCADDR=ZERO × (CSWCADDR=IODBCAW & VCTCPOUT ^= IODBCAW) THE
*                                   /* IS THERE A CCW ADDRESS        */
         LA    @10,IODBCSW(,IODBREG)                            01S0273
         SR    @04,@04                                          01S0273
         ICM   @04,7,CSWCADDR(@10)                              01S0273
         LTR   @04,@04                                          01S0273
         BZ    @RT00273                                         01S0273
         L     @10,IODBCAW(,IODBREG)                            01S0273
         CR    @04,@10                                          01S0273
         BNE   @RF00273                                         01S0273
         C     @10,VCTCPOUT(,VCCTREG)                           01S0273
         BE    @RF00273                                         01S0273
@RT00273 DS    0H                                               01S0274
*         CURCCW = IODBCAW;             /* NO--USE THE CAW           */
         L     CURCCW,IODBCAW(,IODBREG)                         01S0274
*       ELSE                                                    01S0275
*         CURCCW = CSWCADDR - LENGTH(CCW); /* YES--THEN BACK IT UP   */
         B     @RC00273                                         01S0275
@RF00273 LA    @10,IODBCSW(,IODBREG)                            01S0275
         SR    CURCCW,CURCCW                                    01S0275
         ICM   CURCCW,7,CSWCADDR(@10)                           01S0275
         SH    CURCCW,@CH00036                                  01S0275
*     END;                          /* ENDS CATATROPHIC ERROR   01S0276
*                                      PROCESSING                    */
@RC00273 DS    0H                                               01S0277
*                                                               01S0277
*   /*****************************************************************/
*   /*                                                               */
*   /* HERE WE WILL HANDLE NORMAL CONDITIONS                         */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0277
*/*IOPCI: D (YES,,NO,IOCHEND) PCI ?                                  */
*/* D (YES,,NO,IOCHEND) OUTPUT IODB ?                                */
*/* P (,IOIBUF) POINT TO CCW AFTER LAST COMPLETED WRITE              */
*/*IOCHEND: D (YES,,NO,IODEVEND) CHANNEL END?                        */
*/* P SET CCW ADDRESS IN IODBCAW                                     */
*/*IODEVEND: D (YES,IOIBUF,NO,IOINOINT) DEVICE END ?                 */
*/*IOINOINT: P (,IOIHLT0) SET IODBINT = 0 FOR THIS IODB              */
*   IF CSWPCI = ON & IODBREG = ADDR(IODBOUT) THEN               01S0277
@RF00242 LA    @10,IODBCSW(,IODBREG)                            01S0277
         TM    CSWPCI(@10),B'10000000'                          01S0277
         BNO   @RF00277                                         01S0277
         L     @10,@CA00946                                     01S0277
         CR    IODBREG,@10                                      01S0277
         BNE   @RF00277                                         01S0277
*     DO;                                                       01S0278
*       DO WHILE CCWCMD ^= TIC & CCWCMD ^= NOP; /* POINT TO TIC OR
*                                      NOP FOLLOWING WRITE           */
         B     @DE00279                                         01S0279
@DL00279 DS    0H                                               01S0280
*         CURCCW = CURCCW - LENGTH(CCW); /* BACK UP ONE CCW          */
         SH    CURCCW,@CH00036                                  01S0280
*         IF CURCCW <= ADDR(OUTCCW) THEN /* IS NEW ADDRESS OUT OF
*                                      TABLE                         */
         L     @10,@CA00942                                     01S0281
         CR    CURCCW,@10                                       01S0281
         BH    @RF00281                                         01S0281
*           CURCCW = ADDR(OUTCCW) + LENGTH(OUTCCW) - LENGTH(CCW);
         SH    @10,@CH00994                                     01S0282
         LR    CURCCW,@10                                       01S0282
*                                      /* YES--POINT TO LAST WRITE IN
*                                      TABLE                         */
*       END;                                                    01S0283
@RF00281 DS    0H                                               01S0283
@DE00279 CLI   CCWCMD(CURCCW),8                                 01S0283
         BE    @DC00279                                         01S0283
         CLI   CCWCMD(CURCCW),3                                 01S0283
         BNE   @DL00279                                         01S0283
@DC00279 DS    0H                                               01S0284
*       IODBCAW = ZERO;               /*                     @YM04511*/
         SR    @10,@10                                          01S0284
         ST    @10,IODBCAW(,IODBREG)                            01S0284
*       GO TO IOIBUF;             /* PCI VALID FOR OUTPUT ONLY       */
         B     IOIBUF                                           01S0285
*     END;                                                      01S0286
*   IF CSWUSTAT = '08'X THEN        /* CHANNEL END ONLY              */
@RF00277 LA    @10,IODBCSW(,IODBREG)                            01S0287
         CLI   CSWUSTAT(@10),X'08'                              01S0287
         BNE   @RF00287                                         01S0287
*     IODBCAW = CURCCW;             /* YES--RESET CAW PAST SUCCESSFUL
*                                      CCWS (USED FOR WTM, WTM, RUN
*                                      SEQUENCE)                     */
         ST    CURCCW,IODBCAW(,IODBREG)                         01S0288
*   IF CSWDE ^= ON THEN                                         01S0289
@RF00287 LA    @10,IODBCSW(,IODBREG)                            01S0289
         TM    CSWDE(@10),B'00000100'                           01S0289
         BO    @RF00289                                         01S0289
*     DO;                                                       01S0290
*       IODBINT = OFF;              /* CHANNEL END OR CONTROL UNIT
*                                      END - IGNORE AND WAIT FOR DE  */
*       IODBHALT = OFF;             /* RESET HALT I/O INDICATOR      */
         NI    IODBINT(IODBREG),B'11010111'                     01S0292
*       GO TO IOHDA;                /* SEE IF DONE                   */
         B     IOHDA                                            01S0293
*     END;                                                      01S0294
*                                                               01S0295
*   /*****************************************************************/
*   /*                                                               */
*   /* NORMAL PCI OR DEVICE END PROCESSING                           */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0295
*/*IOIBUF: P PICK UP IODBBCT 1ST BUFFER                              */
*/*IOIBACK: P BACK CCW ADDRESS UP BY 8 BYTES                         */
*/* D (YES,IOIBACK,NO,) TIC OR NOP OPERATION ?                       */
*/* D (YES,,NO,BCTFLG) OUTPUT IODB ?                                 */
*/* BCTADDR: D (YES,BCTFLG,NO,) ADDR IN CCW = BCTRADDR ?             */
*/* D (YES,%IOERR,NO,) BCTNEXT = 0 ?                                 */
*/* P (,BCTADDR) OBTAIN NEXT BCT FROM BCTNEXT                        */
*/*%IOERR: W CALL AUDIT-CODE IS 0201                                 */
*                                                               01S0295
*IOIBUF:                                                        01S0295
*   IF CTIOTERM = ON THEN                                       01S0295
@RF00289 DS    0H                                               01S0295
IOIBUF   TM    CTIOTERM(CCTREG),B'10000000'                     01S0295
         BO    @RT00295                                         01S0295
*     GO TO IOIRET;                 /* IF TERMINATION REQUEST - SKIP
*                                      FREEING ALL BUFFERS           */
*   DO WHILE CCWCMD = TIC × CCWCMD = NOP; /* LOOK ONLY FOR DATA 01S0297
*                                      COMMANDS                      */
         B     @DE00297                                         01S0297
@DL00297 DS    0H                                               01S0298
*     CURCCW = CURCCW - LENGTH(CCW); /* BACK UP A CCW                */
         SH    CURCCW,@CH00036                                  01S0298
*   END;                                                        01S0299
@DE00297 CLI   CCWCMD(CURCCW),8                                 01S0299
         BE    @DL00297                                         01S0299
         CLI   CCWCMD(CURCCW),3                                 01S0299
         BE    @DL00297                                         01S0299
*   IF IODBBCT ^= ZERO THEN         /* IS THERE A BCT                */
         L     @10,IODBBCT(,IODBREG)                            01S0300
         LTR   @10,@10                                          01S0300
         BZ    @RF00300                                         01S0300
*     DO;                           /* YES--FIND BUFFER AND MARK BCTS
*                                      COMPLETE                      */
*       BCTADDR = IODBBCT;          /* SET UP TO BUFFER TABLE        */
         LR    BCTADDR,@10                                      01S0302
*       IF IODBREG = ADDR(IODBOUT) THEN /* MATCH BCT & CCW IF OUTPUT */
         L     @10,@CA00946                                     01S0303
         CR    IODBREG,@10                                      01S0303
         BNE   @RF00303                                         01S0303
*         DO WHILE BCTRADDR ^= CCWDADDR; /* LOOK FOR VALID      01S0304
*                                      ADDRESS--NOTE THAT BCT'S ARE
*                                      CHAINED BEGINNING WITH THE
*                                      MOST RECENT BUFFER            */
         B     @DE00304                                         01S0304
@DL00304 DS    0H                                               01S0305
*           IF BCTNEXT = ZERO THEN                              01S0305
         ICM   @10,15,BCTNEXT(BCTADDR)                          01S0305
         BNZ   @RF00305                                         01S0305
*             DO;                                               01S0306
*               VCTAUDIT = IOIAUD2;   /* SET UP AUDIT ERROR CONDITION
*                                      CODE                          */
         MVC   VCTAUDIT(2,VCCTREG),IOIAUD2                      01S0307
*               SVC (AUDSVC);       /* ERROR CONDITION TAKE A DUMP   */
         SVC   13                                               01S0308
*             END;                                              01S0309
*           BCTADDR = BCTNEXT;      /* GET NEXT BUFFER               */
@RF00305 L     BCTADDR,BCTNEXT(,BCTADDR)                        01S0310
*         END;                                                  01S0311
@DE00304 L     @10,BCTRADDR(,BCTADDR)                           01S0311
         SR    @15,@15                                          01S0311
         ICM   @15,7,CCWDADDR(CURCCW)                           01S0311
         CR    @10,@15                                          01S0311
         BNE   @DL00304                                         01S0311
*                                                               01S0312
*   /*****************************************************************/
*   /*                                                               */
*   /* WE HAVE BUFFERS FOR WHICH I/O IS COMPLETE - MARK I/O STATUS   */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0312
*/*BCTFLG: P SET BCTCOMP FLAG FOR THIS BUFFER                        */
*/* D (YES,,NO,IOIHLT0) OUTPUT IODB ?                                */
*/* D (YES,RESTART,NO,) BCTADDR = 0 ?                                */
*/* P (,BCTFLG) SET TO NEXT BCT VIA BCTNEXT POINTER                  */
*/*RESTART: D (YES,,NO,IOIHLT0) DEVICE END ?                         */
*/* P OBTAIN IODBBCT (START OF CHAIN)                                */
*/* D (YES,IOIHLT0,NO,IOERR) BCTCOMP = 1 ?                           */
*       BCTCOMP = ON;               /* I/O COMPLETE FOR BUFFER       */
@RF00303 OI    BCTCOMP(BCTADDR),B'10000000'                     01S0312
*       IF IODBREG = ADDR(IODBOUT) THEN                         01S0313
         L     @10,@CA00946                                     01S0313
         CR    IODBREG,@10                                      01S0313
         BNE   @RF00313                                         01S0313
*         DO;                       /* DO ONLY FOR OUTPUT IODB       */
*           DO WHILE BCTADDR ^= ZERO; /* DO ENTIRE CHAIN             */
         B     @DE00315                                         01S0315
@DL00315 DS    0H                                               01S0316
*             BCTCOMP = ON;         /* MARK I/O COMPLETE             */
         OI    BCTCOMP(BCTADDR),B'10000000'                     01S0316
*             BCTADDR = BCTNEXT;    /* GET NEXT BCT                  */
         L     BCTADDR,BCTNEXT(,BCTADDR)                        01S0317
*           END;                                                01S0318
@DE00315 LTR   BCTADDR,BCTADDR                                  01S0318
         BNZ   @DL00315                                         01S0318
*           IF CSWDE = ON THEN                                  01S0319
         LA    @10,IODBCSW(,IODBREG)                            01S0319
         TM    CSWDE(@10),B'00000100'                           01S0319
         BNO   @RF00319                                         01S0319
*             DO;                   /* IF DE FOR TAPE                */
*               IODBACTV = OFF;     /* NO I/O ACTIVE ON DEVICE       */
         NI    IODBACTV(IODBREG),B'11111011'                    01S0321
*               BCTADDR = IODBBCT;  /* GET START OF CHAIN AND SEE IF
*                                      I/O MUST BE RESTARTED         */
         L     BCTADDR,IODBBCT(,IODBREG)                        01S0322
*               IF BCTCOMP = OFF THEN                           01S0323
         TM    BCTCOMP(BCTADDR),B'10000000'                     01S0323
         BNZ   @RF00323                                         01S0323
*                 DO;                                           01S0324
*                   PFIOIRST = PFIOIRST + 1; /* INCREMENT PERFORMANCE
*                                      COUNTER BY 1                  */
*                                                               01S0325
         LA    @10,1                                            01S0325
         AH    @10,PFIOIRST                                     01S0325
         STH   @10,PFIOIRST                                     01S0325
*                   GO TO IOERR;    /* GO RESTART I/O                */
         B     IOERR                                            01S0326
*                 END;                                          01S0327
*             END;                  /* END I/O COMPLETE FOR BUFFER   */
@RF00323 DS    0H                                               01S0329
*         END;                                                  01S0329
@RF00319 DS    0H                                               01S0330
*     END;                                                      01S0330
@RF00313 DS    0H                                               01S0331
*   IODBHALT = OFF;                 /* I/O PROCESSED                 */
@RF00300 NI    IODBHALT(IODBREG),B'11110111'                    01S0331
*   GO TO IOHDA;                    /* SKIP RCBE2                    */
         B     IOHDA                                            01S0332
*                                                               01S0333
*   /*****************************************************************/
*   /*                                                               */
*   /* SECOND RCB EXIT POINT                                         */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0333
*/*RCBE2: P SET IODBIOC = 1                                          */
*/* P (,IOHDA) SET IODBINT = 1                                       */
*                                                               01S0333
*RCBE2:                                                         01S0333
*   IODBIOC = ON;                   /* I/O ERROR AS STATE IS UNKNOWN */
RCBE2    DS    0H                                               01S0334
*   IODBINT = ON;                   /* SOMETHING WAS DONE FOR DEVICE */
*                                                               01S0334
         OI    IODBIOC(IODBREG),B'00110000'                     01S0334
*   /*****************************************************************/
*   /*                                                               */
*   /* PROCESS ALL POSSIBLE IODB'S                                   */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0335
*/*IOHDA: D (YES,,NO,IOHWK) IODBHALT ON FOR DA IODB ?                */
*/* P (,IOCATERR) SET IODBREG = ADDR OF DA IODB                      */
*/*IOHWK: D (YES,,NO,IOHOP) IODBHALT ON FOR WKFILE IODB ?            */
*/* P (,IOCATERR) SET IODBREG = ADDR OF WKFILE IODB                  */
*/*IOHOP: D (YES,,NO,DEQRCB) IODBHALT ON FOR OUTPUT IODB ?           */
*/* P (,IOCATERR) SET IODBREG = ADDR OF OUTPUT IODB                  */
*                                                               01S0335
*IOHDA:                                                         01S0335
*   IODBREG = ADDR(IODBDA);         /* SET UP TO DA IODB             */
IOHDA    L     IODBREG,@CA00945                                 01S0335
*   IF IODBHALT = ON THEN                                       01S0336
         TM    IODBHALT(IODBREG),B'00001000'                    01S0336
         BO    @RT00336                                         01S0336
*     GO TO IOCATERR;               /* HANDLE DA DEVICE              */
*   IODBREG = ADDR(IODBWORK);       /* LOOK AT WORKFILE              */
         L     IODBREG,@CA00944                                 01S0338
*   IF IODBHALT = ON THEN                                       01S0339
         TM    IODBHALT(IODBREG),B'00001000'                    01S0339
         BO    @RT00339                                         01S0339
*     GO TO IOCATERR;               /* HANDLE WORKFILE               */
*   IODBREG = ADDR(IODBOUT);        /* SET UP FOR OUTPUT             */
         L     IODBREG,@CA00946                                 01S0341
*   IF IODBHALT = ON THEN                                       01S0342
         TM    IODBHALT(IODBREG),B'00001000'                    01S0342
         BO    @RT00342                                         01S0342
*     GO TO IOCATERR;               /* HANDLE OUTPUT                 */
*                                                               01S0344
*   /*****************************************************************/
*   /*                                                               */
*   /* DETERMINE TYPE OF ENTRY AND SET UP TO RETURN                  */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0344
*/*DEQRCB: P DEQUEUE RCB FROM VCTRCB QUEUE                           */
*/* D (YES,IOBREXIT,NO,%LPSW) BRANCH ENTRY (IOIBSW = 1) ?            */
*/*IOBREXIT: P RESTORE REGISTERS FROM CALLER'S SAVE AREA             */
*/* R RETURN TO CALLER VIA BR 14                                     */
*/*%LPSW: P RESTORE REGISTERS FROM IOISAVE                           */
*/* P TURN OFF WAIT BIT                                              */
*/* R RESTORE PRE-INTERRUPT STATE VIA LPSW                           */
*                                                               01S0344
*IOIRET:                                                        01S0344
*   VCTRCB = IRCBNEXT;              /* DEQUEUE IOI RCB               */
IOIRET   MVC   VCTRCB(4,VCCTREG),IRCBNEXT                       01S0344
*   IF IOIBSW = ON THEN                                         01S0345
         TM    IOIBSW,B'10000000'                               01S0345
         BNO   @RF00345                                         01S0345
*     DO;                                                       01S0346
*       R13 = SAVEBACK;             /* SET UP SAVE AREA              */
         LA    @10,IOIAREA                                      01S0347
         L     R13,SAVEBACK(,@10)                               01S0347
*       GEN                                                     01S0348
*SETS(R0,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15)    01S0348
*             REFS(R13);                                        01S0348
       LM    RETREG,R12,12(R13)   RESTORE CALLERS REGISTERS
       BR    RETREG               RETURN TO CALLER
*     END;                                                      01S0349
*   ELSE                                                        01S0350
*     PSWAIT = OFF;                                             01S0350
         B     @RC00345                                         01S0350
@RF00345 LA    @10,FLCIOPSW                                     01S0350
         NI    PSWAIT(@10),B'11111101'                          01S0350
*   GEN SETS(R0,R1,R2,R3,R4,R5,R6,R6,R8,R9,R10,R11,R12,R13,R14,R15)
*         REFS(IOISAVE,FLCIOPSW);                               01S0351
@RC00345 DS    0H                                               01S0351
      LM    R0,R15,IOISAVE    RESTORE CALLERS REGISTERS
      LPSW  FLCIOPSW          RETURN
*                                                               01S0352
*IOIHALT:                                                       01S0352
*   PROC OPTIONS(NOSAVE);                                       01S0352
*                                                               01S0352
         B     @PB00002                                         01S0352
IOIHALT  DS    0H                                               01S0353
*   /*****************************************************************/
*   /*                                                               */
*   /* THE FOLLOWING ROUTINE IS RESPONSIBLE FOR QUIESCING I/O ON THE */
*   /* INPUT ACTIVE DEVICE. I/O IS ALLOWED TO REACH SOME REASONABLE  */
*   /* CONCLUSION, THAT IS IT IS NOT PREMATURELY STOPPED             */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0353
*/*IOIHALT: E I/O HALT ROUTINE                                       */
*/* N INPUT IS IODB IN IODBADDR                                      */
*/* D (YES,HALTRET,NO,) IODBBCT = 0 ?                                */
*/* L AMDSATAP: CALL VIA SVC 2 TO GET ON PROPER CPU                  */
*/* D (YES,HALTRET,NO,) ERROR ENTERING NEW CPU ?                     */
*/*HALTWAIT: W (CSW,HALTCSW,AVAL,HALTRET) TIO ON DEVICE              */
*/*HALTCSW: P IODBCSW = FLCCSW                                       */
*/* D (YES,,NO,HALTSET) OUTPUT DEVICE ?                              */
*/* D (YES,HALTWAIT,NO,HALTSET) PCI ONLY ?                           */
*/*HALTSET: P  IODBHALT = 1                                          */
*/* P IODBINT = 1                                                    */
*/*HALTRET: R RETURN TO CALLER                                       */
*/* P (,IOIRCBQ) INDICATE BRANCH ENTRY BY IOIBSW = 1                 */
*/*AMDSAIOI: END                                                     */
*   RESPECIFY IODB BASED(IODBADDR); /* USE IODB PASSED IN IODBADDR   */
*   RESPECIFY R14 RESTRICTED;       /* RESTRICT REGISTER             */
*   TEMPSAVE = R14;                 /* SAVE RETURN ADDRESS (CHANGED
*                                      BY SVC)                       */
         LR    TEMPSAVE,R14                                     01S0355
*   RESPECIFY R14 UNRESTRICTED;     /* RELEASE REG                   */
*   IF IODBACTV = ON THEN                                       01S0357
         TM    IODBACTV(IODBADDR),B'00000100'                   01S0357
         BNO   @RF00357                                         01S0357
*     DO;                           /* IF I/O ACTIVE - HANDLE        */
*       SAVECTIO = CTIOTYPE;        /* SAVE CURRENT CTIOTYPE         */
         MVC   SAVECTIO(1),CTIOTYPE(CCTREG)                     01S0359
*       CTIOTYPE = ZERO;            /* ZERO FOR USE                  */
         MVI   CTIOTYPE(CCTREG),X'00'                           01S0360
*       IF IODBADDR = ADDR(IODBDA) THEN                         01S0361
         L     @10,@CA00945                                     01S0361
         CR    IODBADDR,@10                                     01S0361
         BNE   @RF00361                                         01S0361
*         CTIODA = ON;              /* FOR DA GET ON ATTACHED CPU    */
         OI    CTIODA(CCTREG),B'00100000'                       01S0362
*       ELSE                                                    01S0363
*         IF IODBADDR = ADDR(IODBWORK) THEN                     01S0363
         B     @RC00361                                         01S0363
@RF00361 L     @10,@CA00944                                     01S0363
         CR    IODBADDR,@10                                     01S0363
         BNE   @RF00363                                         01S0363
*           CTIOWK = ON;            /* FOR WORKFILE ENTER IPLED CPU  */
         OI    CTIOWK(CCTREG),B'00010000'                       01S0364
*         ELSE                                                  01S0365
*           IF IODBADDR = ADDR(IODBOUT) THEN                    01S0365
         B     @RC00363                                         01S0365
@RF00363 L     @10,@CA00946                                     01S0365
         CR    IODBADDR,@10                                     01S0365
         BNE   @RF00365                                         01S0365
*             CTIOOUT = ON;         /* FOR OUTPUT ENTER IPLED CPU    */
         OI    CTIOOUT(CCTREG),B'01000000'                      01S0366
*       RESPECIFY RETCODE RESTRICTED;                           01S0367
@RF00365 DS    0H                                               01S0367
@RC00363 DS    0H                                               01S0367
@RC00361 DS    0H                                               01S0368
*       SVC (TAPSVC);               /* GET ON TARGET CPU             */
         SVC   2                                                01S0368
*       CTIOTYPE = SAVECTIO;        /* RESTORE CTIOTYPE              */
         MVC   CTIOTYPE(1,CCTREG),SAVECTIO                      01S0369
*       IF RETCODE = ZERO THEN                                  01S0370
         LTR   RETCODE,RETCODE                                  01S0370
         BNZ   @RF00370                                         01S0370
*         DO;                       /* IF RESTARTED ON PROPER CPU
*                                      THEN HANDLE THE INPUT REQUEST */
*                                                               01S0371
*   /*****************************************************************/
*   /*                                                               */
*   /* IF ON PROPER CPU THEN WAIT FOR I/O COMPLETION                 */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0372
*           RESPECIFY RETCODE UNRESTRICTED;                     01S0372
*                                                               01S0372
*TIOLOOP:                                                       01S0373
*           TIO (IODBDEV);                                      01S0373
TIOLOOP  LH    @10,IODBDEV(,IODBADDR)                           01S0373
         TIO   0(@10)                                           01S0373
*           BC (2,TIOLOOP);         /* LOOP UNTIL DONE               */
         BC    2,TIOLOOP                                        01S0374
*           BC (9,HALTRET);         /* IF AVAILABLE OR NOT OP - EXIT */
         BC    9,HALTRET                                        01S0375
*           IODBCSW = FLCCSW;       /* SAVE CSW STORED               */
         MVC   IODBCSW(8,IODBADDR),FLCCSW                       01S0376
*           IF CSWCE = ON THEN                                  01S0377
         LA    @10,IODBCSW(,IODBADDR)                           01S0377
         TM    CSWCE(@10),B'00001000'                           01S0377
         BNO   @RF00377                                         01S0377
*             DO;                                               01S0378
*               IF CSWATTN = OFF & CSWSTMOD = OFF & CSWCUE = OFF &
*                     CSWBUSY = OFF & CSWDE = OFF & CSWUC = OFF &
*                     CSWUE = OFF & CSWCSTAT = ZERO THEN        01S0379
         TM    CSWATTN(@10),B'11110111'                         01S0379
         BNZ   @RF00379                                         01S0379
         CLI   CSWCSTAT(@10),0                                  01S0379
         BE    @RT00379                                         01S0379
*                 GO TO TIOLOOP;    /* IGNORE CHANNEL END            */
*             END;                                              01S0381
@RF00379 DS    0H                                               01S0382
*           IF CSWPCI = ON & CSWUSTAT = ZERO & CSWIL = OFF & CSWPGC =
*                 OFF & CSWPTC = OFF & CSWCDC = OFF & CSWCCC = OFF &
*                 CSWICC = OFF & CSWCHC = OFF & IODBADDR =      01S0382
*                 ADDR(IODBOUT) THEN                            01S0382
@RF00377 LA    @10,IODBCSW(,IODBADDR)                           01S0382
         TM    CSWPCI(@10),B'10000000'                          01S0382
         BNO   @RF00382                                         01S0382
         CLI   CSWUSTAT(@10),0                                  01S0382
         BNE   @RF00382                                         01S0382
         TM    CSWIL(@10),B'01111111'                           01S0382
         BNZ   @RF00382                                         01S0382
         L     @10,@CA00946                                     01S0382
         CR    IODBADDR,@10                                     01S0382
         BE    @RT00382                                         01S0382
*             GO TO TIOLOOP;        /* IGNORE PCI                    */
*           IODBHALT = ON;          /* DEVICE HALTED                 */
@RF00382 DS    0H                                               01S0385
*           IODBINT = ON;           /* INTERRUPT OCCURRED            */
         OI    IODBHALT(IODBADDR),B'00101000'                   01S0385
*         END;                                                  01S0386
*     END;                                                      01S0387
*                                                               01S0387
@RF00370 DS    0H                                               01S0388
*HALTRET:                                                       01S0388
*   IODBACTV = OFF;                 /* INDICATE I/O NO LONGER ACTIVE */
@RF00357 DS    0H                                               01S0388
HALTRET  NI    IODBACTV(IODBADDR),B'11111011'                   01S0388
*   RESPECIFY R14 RESTRICTED;       /* RESTRICT REGISTER             */
*   R14 = TEMPSAVE;                 /* RESTORE RETURN ADDRESS   01S0390
*                                      (CHANGED BY SVC)              */
         LR    R14,TEMPSAVE                                     01S0390
*   RESPECIFY R14 UNRESTRICTED;     /* RELEASE REG                   */
*   END IOIHALT;                                                01S0392
@EL00002 DS    0H                                               01S0392
@EF00002 DS    0H                                               01S0392
@ER00002 BR    @14                                              01S0392
@PB00002 DS    0H                                               01S0392
*   END AMDSAIOI                                                01S0393
*/* THE FOLLOWING INCLUDE STATEMENTS WERE FOUND IN THIS PROGRAM.      *
*/*%INCLUDE SYSLIB  (IHAPSA  )                                        *
*/*%INCLUDE SYSLIB  (AMDSARMK)                                        *
*;                                                              01S0393
@DATA    DS    0H
@CH00994 DC    H'-232'
@CH00036 DC    H'8'
@CH00740 DC    H'28672'
         DS    0F
         DS    0F
@CA00942 DC    A(OUTCCW)
@CA00944 DC    A(IODBWORK)
@CA00945 DC    A(IODBDA)
@CA00946 DC    A(IODBOUT)
         DS    0D
IOISWITH DC    X'00'
         ORG   IOISWITH
IOIBSW   DS    BL1
@NM00055 EQU   IOISWITH+0
         ORG   IOISWITH+1
         DS    CL3
IOIAREA  DS    CL72
         ORG   IOIAREA
@NM00056 DC    CL1'L'
@NM00057 DC    CL3'IOI'
@NM00058 DC    17F'0'
         ORG   IOIAREA+72
IOIRCB   DS    CL20
         ORG   IOIRCB
IRCBNEXT DC    A(0)
@NM00059 DC    A(0)
@NM00060 DC    AL4(IOIAREA)
IRCBEXIT DC    AL4(IOIRET)
IRCBBASE DC    A(0)
         ORG   IOIRCB+20
SAVECTIO DS    BL1
IOIAUD1  DS    CL2
         ORG   IOIAUD1
@NM00061 DC    X'01'
@NM00062 DC    AL1(27)
         ORG   IOIAUD1+2
IOIAUD2  DS    CL2
         ORG   IOIAUD2
@NM00063 DC    X'02'
@NM00064 DC    AL1(27)
         ORG   IOIAUD2+2
         DS    CL3
IOIPATCH DC    15F'0'
@00      EQU   00                      EQUATES FOR REGISTERS 0-15
@01      EQU   01
@02      EQU   02
@03      EQU   03
@04      EQU   04
@05      EQU   05
@06      EQU   06
@07      EQU   07
@08      EQU   08
@09      EQU   09
@10      EQU   10
@11      EQU   11
@12      EQU   12
@13      EQU   13
@14      EQU   14
@15      EQU   15
BCTADDR  EQU   @04
CURCCW   EQU   @02
TEMPSAVE EQU   @06
CCTREG   EQU   @05
IODBADDR EQU   @04
IODBREG  EQU   @03
VCCTREG  EQU   @12
RETCODE  EQU   @15
BASEREG  EQU   @11
R0       EQU   @00
R1       EQU   @01
R2       EQU   @02
R3       EQU   @03
R4       EQU   @04
R5       EQU   @05
R6       EQU   @06
R7       EQU   @07
R8       EQU   @08
R9       EQU   @09
R10      EQU   @10
R11      EQU   @11
R12      EQU   @12
R13      EQU   @13
R14      EQU   @14
R15      EQU   @15
RETREG   EQU   @14
         EXTRN OUTCCW
         EXTRN IODBWORK
         EXTRN IODBDA
         EXTRN IODBOUT
PSA      EQU   0
FLCRNPSW EQU   PSA
FLCROPSW EQU   PSA+8
FLCICCW2 EQU   PSA+16
FLCIOPSW EQU   PSA+56
FLCCSW   EQU   PSA+64
PSAEEPSW EQU   PSA+132
PSAESPSW EQU   PSA+136
FLCSVILC EQU   PSAESPSW+1
PSAEPPSW EQU   PSA+140
FLCPIILC EQU   PSAEPPSW+1
FLCPICOD EQU   PSAEPPSW+2
PSAPICOD EQU   FLCPICOD+1
FLCTEA   EQU   PSAEPPSW+4
FLCPER   EQU   PSA+152
FLCMCLA  EQU   PSA+168
FLCIOEL  EQU   FLCMCLA+4
FLCIOA   EQU   FLCMCLA+16
FLCIOAA  EQU   FLCIOA+1
FLCFSA   EQU   FLCMCLA+80
PSASUPER EQU   PSA+552
PSASUP1  EQU   PSASUPER
PSASUP2  EQU   PSASUPER+1
PSASUP3  EQU   PSASUPER+2
PSASUP4  EQU   PSASUPER+3
PSACLHT  EQU   PSA+640
PSALKSA  EQU   PSA+696
PSAHLHI  EQU   PSA+760
PSADSSFL EQU   PSA+836
PSADSSF1 EQU   PSADSSFL
PSADSSF3 EQU   PSADSSFL+2
PSADSSF4 EQU   PSADSSFL+3
PSARSVT  EQU   PSA+896
DEBUGLSD EQU   3286
PFIOIRST EQU   DEBUGLSD+24
SADMPLSD EQU   3312
IOISAVE  EQU   SADMPLSD+372
ARB      EQU   0
BCTH     EQU   0
BCT      EQU   0
BCTNEXT  EQU   BCT+4
BCTRADDR EQU   BCT+16
BCTLPID  EQU   BCT+28
BCTFLGT  EQU   BCT+44
BCTFLGI  EQU   BCT+45
BCTCOMP  EQU   BCTFLGI
CCT      EQU   0
CTFLG1   EQU   CCT+1
CTFLG2   EQU   CCT+2
CTLOWFLG EQU   CCT+48
CTDMPTYP EQU   CCT+52
CTIOTYPE EQU   CTDMPTYP
CTIOTERM EQU   CTIOTYPE
CTIOOUT  EQU   CTIOTYPE
CTIODA   EQU   CTIOTYPE
CTIOWK   EQU   CTIOTYPE
CTCONFLG EQU   CTDMPTYP+2
CTBUFTYP EQU   CTDMPTYP+3
CTVCCT   EQU   CTDMPTYP+20
CTPRMT1  EQU   CTDMPTYP+24
CTPRMT2  EQU   CTDMPTYP+26
CCW      EQU   0
CCWCMD   EQU   CCW
CCWDADDR EQU   CCW+1
CCWFLAGS EQU   CCW+4
CSW      EQU   0
CSWKEY00 EQU   CSW
CSWCADDR EQU   CSW+1
CSWUSTAT EQU   CSW+4
CSWATTN  EQU   CSWUSTAT
CSWSTMOD EQU   CSWUSTAT
CSWCUE   EQU   CSWUSTAT
CSWBUSY  EQU   CSWUSTAT
CSWCE    EQU   CSWUSTAT
CSWDE    EQU   CSWUSTAT
CSWUC    EQU   CSWUSTAT
CSWUE    EQU   CSWUSTAT
CSWCSTAT EQU   CSW+5
CSWPCI   EQU   CSWCSTAT
CSWIL    EQU   CSWCSTAT
CSWPGC   EQU   CSWCSTAT
CSWPTC   EQU   CSWCSTAT
CSWCDC   EQU   CSWCSTAT
CSWCCC   EQU   CSWCSTAT
CSWICC   EQU   CSWCSTAT
CSWCHC   EQU   CSWCSTAT
DSCE     EQU   0
IODB     EQU   0
IODBFLAG EQU   IODB+8
IODBINT  EQU   IODBFLAG
IODBIOC  EQU   IODBFLAG
IODBHALT EQU   IODBFLAG
IODBACTV EQU   IODBFLAG
IODBDEV  EQU   IODB+10
IODBCLAS EQU   IODB+12
IODBBCT  EQU   IODB+16
IODBCAW  EQU   IODB+20
IODBCSW  EQU   IODB+24
IODBCCHH EQU   IODB+32
IODBSRCH EQU   IODBCCHH+3
MDCE     EQU   0
MDCB     EQU   0
MDCBGRS  EQU   MDCB+16
MDCBFLGS EQU   MDCB+86
PSW      EQU   0
PSWSM    EQU   PSW
@NM00047 EQU   PSW+1
PSWAIT   EQU   @NM00047
PSWCCPM  EQU   PSW+2
@NM00050 EQU   PSW+3
PTRT     EQU   0
PTRTRSA  EQU   0
RCB      EQU   0
VCCT     EQU   0
VCTRCB   EQU   VCCT+4
VCTRECSN EQU   VCCT+8
VCTFLGS  EQU   VCCT+9
VCTMDCE  EQU   VCCT+12
VCTDSCE  EQU   VCCT+20
VCTBCTH  EQU   VCCT+24
VCTAUDIT EQU   VCCT+62
VCTCBID  EQU   VCCT+64
VCTCPOUT EQU   VCCT+96
SDL      EQU   0
REGLOCAL EQU   0
SAVEFORM EQU   0
SAVEBACK EQU   SAVEFORM+4
SAVENEXT EQU   SAVEFORM+8
PTRTVSA  EQU   0
PSARSVTE EQU   PSARSVT
CTLOWDMP EQU   CTDMPTYP
FLC      EQU   PSA
         AGO   .@UNREFD                START UNREFERENCED COMPONENTS
CTADDRE  EQU   CTLOWDMP+4
CTADDRS  EQU   CTLOWDMP
PSARSAV  EQU   PSARSVTE+60
PSARSTK  EQU   PSARSVTE+56
PSAESAV3 EQU   PSARSVTE+52
PSAESTK3 EQU   PSARSVTE+48
PSAESAV2 EQU   PSARSVTE+44
PSAESTK2 EQU   PSARSVTE+40
PSAESAV1 EQU   PSARSVTE+36
PSAESTK1 EQU   PSARSVTE+32
PSAPSAV  EQU   PSARSVTE+28
PSAPSTK  EQU   PSARSVTE+24
PSAMSAV  EQU   PSARSVTE+20
PSAMSTK  EQU   PSARSVTE+16
PSASSAV  EQU   PSARSVTE+12
PSASSTK  EQU   PSARSVTE+8
PSANSTK  EQU   PSARSVTE+4
PSACSTK  EQU   PSARSVTE
SAVER12  EQU   SAVEFORM+68
SAVER11  EQU   SAVEFORM+64
SAVER10  EQU   SAVEFORM+60
SAVER9   EQU   SAVEFORM+56
SAVER8   EQU   SAVEFORM+52
SAVER7   EQU   SAVEFORM+48
SAVER6   EQU   SAVEFORM+44
SAVER5   EQU   SAVEFORM+40
SAVER4   EQU   SAVEFORM+36
SAVER3   EQU   SAVEFORM+32
SAVER2   EQU   SAVEFORM+28
SAVER1   EQU   SAVEFORM+24
SAVER0   EQU   SAVEFORM+20
SAVER15  EQU   SAVEFORM+16
SAVER14  EQU   SAVEFORM+12
SAVENAME EQU   SAVEFORM+1
SAVEID   EQU   SAVEFORM
REGL15   EQU   REGLOCAL+60
REGL14   EQU   REGLOCAL+56
REGL13   EQU   REGLOCAL+52
REGL12   EQU   REGLOCAL+48
REGL11   EQU   REGLOCAL+44
REGL10   EQU   REGLOCAL+40
REGL9    EQU   REGLOCAL+36
REGL8    EQU   REGLOCAL+32
REGL7    EQU   REGLOCAL+28
REGL6    EQU   REGLOCAL+24
REGL5    EQU   REGLOCAL+20
REGL4    EQU   REGLOCAL+16
REGL3    EQU   REGLOCAL+12
REGL2    EQU   REGLOCAL+8
REGL1    EQU   REGLOCAL+4
REGL0    EQU   REGLOCAL
SDLSPN   EQU   SDL+1
SDLNUM   EQU   SDL
VCTVCCTV EQU   VCCT+108
VCTCCTV  EQU   VCCT+104
@NM00054 EQU   VCCT+102
VCTEXTRA EQU   VCCT+100
VCTSVCTB EQU   VCCT+92
VCTPGT   EQU   VCCT+88
VCTLPA   EQU   VCCT+84
VCTCBADR EQU   VCCT+80
VCTJBNME EQU   VCCT+72
VCTCBIDN EQU   VCTCBID+7
@NM00053 EQU   VCTCBID
VCTASID  EQU   VCCT+60
VCTPTRT  EQU   VCCT+56
VCTMASCB EQU   VCCT+52
VCTASCB  EQU   VCCT+48
VCTCPUC  EQU   VCCT+46
VCTWKC   EQU   VCCT+45
VCTWKHI  EQU   VCCT+44
VCTSUBPL EQU   VCCT+40
VCTARB   EQU   VCCT+36
VCTIODB  EQU   VCCT+32
VCTBCTC  EQU   VCCT+28
VCTSTOR  EQU   VCCT+16
VCTRECVA EQU   VCCT+10
@NM00052 EQU   VCTFLGS
VCTNOI22 EQU   VCTFLGS
VCTLRCLM EQU   VCTFLGS
VCTARCLM EQU   VCTFLGS
VCTASMIC EQU   VCTFLGS
VCTMEMIN EQU   VCTFLGS
VCTSADMP EQU   VCTFLGS
@NM00051 EQU   VCTRECSN
VCTRSMR  EQU   VCTRECSN
VCTEXIR  EQU   VCTRECSN
VCTUPDR  EQU   VCTRECSN
VCTPGIR  EQU   VCTRECSN
VCTVCT   EQU   VCCT
RCBBASE  EQU   RCB+16
RCBEXIT  EQU   RCB+12
RCBSAVE  EQU   RCB+8
RCBSTOR  EQU   RCB+4
RCBNEXT  EQU   RCB
PTRTVS   EQU   PTRT+1032
PTRTRS   EQU   PTRT+8
PTRTLGID EQU   PTRT+4
PTRTPTRT EQU   PTRT
PSWEND   EQU   PSW+8
PSWIA    EQU   PSW+4
PSWSP    EQU   @NM00050
PSWSIG   EQU   PSWCCPM
PSWEU    EQU   PSWCCPM
PSWDO    EQU   PSWCCPM
PSWFPO   EQU   PSWCCPM
@NM00049 EQU   PSWCCPM
@NM00048 EQU   PSWCCPM
PSWPRBLM EQU   @NM00047
PSWMCH   EQU   @NM00047
PSWMODE  EQU   @NM00047
PSWKEY   EQU   @NM00047
PSWXTRNL EQU   PSWSM
PSWIO    EQU   PSWSM
PSWDAT   EQU   PSWSM
@NM00046 EQU   PSWSM
@NM00045 EQU   PSWSM
@NM00044 EQU   PSWSM
PSWPER   EQU   PSWSM
@NM00043 EQU   PSWSM
@NM00042 EQU   MDCB+87
@NM00041 EQU   MDCBFLGS
MDCBDUMP EQU   MDCBFLGS
MDCBASMI EQU   MDCBFLGS
MDCBPI   EQU   MDCB+84
MDCBSTOR EQU   MDCB+80
MDCBGR15 EQU   MDCBGRS+60
MDCBGR14 EQU   MDCBGRS+56
MDCBGR13 EQU   MDCBGRS+52
MDCBGR12 EQU   MDCBGRS+48
MDCBGR11 EQU   MDCBGRS+44
MDCBGR10 EQU   MDCBGRS+40
MDCBGR9  EQU   MDCBGRS+36
MDCBGR8  EQU   MDCBGRS+32
MDCBGR7  EQU   MDCBGRS+28
MDCBGR6  EQU   MDCBGRS+24
MDCBGR5  EQU   MDCBGRS+20
MDCBGR4  EQU   MDCBGRS+16
MDCBGR3  EQU   MDCBGRS+12
MDCBGR2  EQU   MDCBGRS+8
MDCBGR1  EQU   MDCBGRS+4
MDCBGR0  EQU   MDCBGRS
MDCBPSW  EQU   MDCB+8
MDCBNEXT EQU   MDCB+4
MDCBMDCB EQU   MDCB
MDCEAVIL EQU   MDCE+8
MDCEACTV EQU   MDCE+4
MDCEMDCE EQU   MDCE
IODBSENS EQU   IODB+40
IODBR    EQU   IODBCCHH+7
IODBHH   EQU   IODBSRCH+2
IODBCC   EQU   IODBSRCH
IODBSEEK EQU   IODBCCHH+1
IODBM    EQU   IODBCCHH
IODBCPU  EQU   IODB+14
IODBTYPE EQU   IODB+13
@NM00040 EQU   IODBFLAG+1
IODBSTRT EQU   IODBFLAG
IODBCONW EQU   IODBFLAG
IODBPTRM EQU   IODBFLAG
IODBTERM EQU   IODBFLAG
IODBIDEN EQU   IODB+4
IODBIODB EQU   IODB
DSCETEND EQU   DSCE+20
DSCETCUR EQU   DSCE+16
DSCETBEG EQU   DSCE+12
DSCENEXT EQU   DSCE+8
DSCEBEGN EQU   DSCE+4
DSCEDSCE EQU   DSCE
CSWCNT   EQU   CSW+6
@NM00039 EQU   CSWKEY00
CSWKEY   EQU   CSWKEY00
CCWCNT   EQU   CCW+6
@NM00038 EQU   CCW+5
@NM00037 EQU   CCWFLAGS
CCWIDA   EQU   CCWFLAGS
CCWPCI   EQU   CCWFLAGS
CCWSKIP  EQU   CCWFLAGS
CCWSLI   EQU   CCWFLAGS
CCWCC    EQU   CCWFLAGS
CCWDC    EQU   CCWFLAGS
CTHWMAX  EQU   CTDMPTYP+29
CTHWM    EQU   CTDMPTYP+28
CTPRMT2X EQU   CTPRMT2+1
CTPRMT2Y EQU   CTPRMT2
CTPRMT1X EQU   CTPRMT1+1
CTPRMT1Y EQU   CTPRMT1
CTEOR    EQU   CTDMPTYP+16
CTCOMMIO EQU   CTDMPTYP+12
CTLWKAD  EQU   CTDMPTYP+8
CTCONSOL EQU   CTDMPTYP+4
@NM00036 EQU   CTBUFTYP
CTDUMP   EQU   CTBUFTYP
CTLSQA   EQU   CTBUFTYP
CTASM    EQU   CTBUFTYP
CTPGT    EQU   CTBUFTYP
CTWKFLE  EQU   CTBUFTYP
@NM00035 EQU   CTBUFTYP
@NM00034 EQU   CTCONFLG
CTREAD   EQU   CTCONFLG
CTMSGOUT EQU   CTCONFLG
@NM00033 EQU   CTDMPTYP+1
@NM00032 EQU   CTIOTYPE
CTIORSET EQU   CTIOTYPE
CTIOINT  EQU   CTIOTYPE
CTIOCON  EQU   CTIOTYPE
CTEBCOPR EQU   CCT+49
@NM00031 EQU   CTLOWFLG
CTWKSTUS EQU   CTLOWFLG
CTINIT   EQU   CTLOWFLG
CTFP     EQU   CTLOWFLG
CTVIRTD  EQU   CTLOWFLG
CTEBCOPD EQU   CCT+45
CTCONTYP EQU   CCT+44
CTOUTAD  EQU   CCT+42
CTCPUI   EQU   CCT+40
CTERBCON EQU   CCT+36
CTERBTPE EQU   CCT+32
CTERBDA  EQU   CCT+28
CTCCHHW  EQU   CCT+24
CTCCHHE  EQU   CCT+20
CTCCHHS  EQU   CCT+16
CTPGECNT EQU   CCT+15
CTCCHHR  EQU   CCT+8
CTINADDR EQU   CCT+6
CTSENSE  EQU   CCT+4
CTDEVTYP EQU   CCT+3
@NM00030 EQU   CTFLG2
CTALTCON EQU   CTFLG2
CTWKDONE EQU   CTFLG2
CTVIRTR  EQU   CTFLG2
CTNOSTAT EQU   CTFLG2
CTPGEFLT EQU   CTFLG2
CTSTOR   EQU   CTFLG2
CTDUPSW  EQU   CTFLG2
CTERREC  EQU   CTFLG1
CTMP     EQU   CTFLG1
@NM00029 EQU   CTFLG1
CTDEFO   EQU   CTFLG1
CTWORK   EQU   CTFLG1
CTMORTPE EQU   CTFLG1
CTDEVICE EQU   CTFLG1
CTERROR  EQU   CTFLG1
CTWAIT   EQU   CCT
@NM00028 EQU   BCT+46
BCTRECLM EQU   BCTFLGI
BCTIOERR EQU   BCTFLGI
BCTALLOC EQU   BCTFLGI
@NM00027 EQU   BCTFLGT
BCTPGTF  EQU   BCTFLGT
BCTDUMP  EQU   BCTFLGT
BCTLSQA  EQU   BCTFLGT
BCTASM   EQU   BCTFLGT
BCTPGT   EQU   BCTFLGT
BCTWKFLE EQU   BCTFLGT
@NM00026 EQU   BCTFLGT
BCTRBA   EQU   BCT+40
BCTAMB   EQU   BCT+36
@NM00025 EQU   BCTLPID+4
BCTLGN   EQU   BCTLPID
BCTMDCB  EQU   BCT+24
BCTPGTE  EQU   BCT+20
BCTVADDR EQU   BCT+12
BCTASID  EQU   BCT+10
BCTKEY2  EQU   BCT+9
BCTKEY1  EQU   BCT+8
BCTBCT   EQU   BCT
BCTHLAST EQU   BCTH+8
BCTHFRST EQU   BCTH+4
BCTHBCTH EQU   BCTH
ARBADDRE EQU   ARB+4
ARBADDRB EQU   ARB
GTMSAVE  EQU   SADMPLSD+684
GTMNAME  EQU   SADMPLSD+680
FRMSAVE  EQU   SADMPLSD+580
FRMNAME  EQU   SADMPLSD+576
AUDSAVE  EQU   SADMPLSD+476
AUDNAME  EQU   SADMPLSD+472
IOINAME  EQU   SADMPLSD+368
PGISAVE  EQU   SADMPLSD+268
PGINAME  EQU   SADMPLSD+264
SVISAVE  EQU   SADMPLSD+164
SVINAME  EQU   SADMPLSD+160
LOWCRS   EQU   SADMPLSD+96
LOWGRS   EQU   SADMPLSD+32
SAVEDUMP EQU   SADMPLSD+24
AUDPSW   EQU   SADMPLSD+16
SVIRPSW  EQU   SADMPLSD+8
PSWSADMP EQU   SADMPLSD
PFWATOIP EQU   DEBUGLSD+22
PFWATDE  EQU   DEBUGLSD+20
PFWATEN  EQU   DEBUGLSD+18
PFWATENW EQU   DEBUGLSD+16
PFSIOWAT EQU   DEBUGLSD+14
PFSIOPCI EQU   DEBUGLSD+12
PFSIOOUT EQU   DEBUGLSD+10
PFSIOWK  EQU   DEBUGLSD+8
PFSIODA  EQU   DEBUGLSD+6
PFTAPCPU EQU   DEBUGLSD+4
PFBUFWAT EQU   DEBUGLSD+2
PFTRCLM  EQU   DEBUGLSD
@NM00024 EQU   PSA+3412
PSASTAK  EQU   PSA+3072
@NM00023 EQU   PSA+1032
PSAUSEND EQU   PSA+1032
PSAPCPSW EQU   PSA+1024
PSARV060 EQU   PSA+1020
PSARV059 EQU   PSA+1018
PSASVC13 EQU   PSA+1016
PSALSFCC EQU   PSA+1012
PSASFACC EQU   PSA+1008
PSASTOP  EQU   PSA+992
PSASTART EQU   PSA+976
PSARSPSW EQU   PSA+968
PSASRPSW EQU   PSA+960
PSARV045 EQU   PSA+892
PSARV044 EQU   PSA+888
PSARV043 EQU   PSA+884
PSARV042 EQU   PSA+880
PSARV041 EQU   PSA+876
PSARV040 EQU   PSA+872
PSARV025 EQU   PSA+868
PSADSSED EQU   PSA+868
PSADSSPR EQU   PSA+864
PSADSSFW EQU   PSA+860
PSADSS14 EQU   PSA+856
PSADSSPP EQU   PSA+848
PSADSSRP EQU   PSA+840
PSADSS05 EQU   PSADSSF4
PSADSS10 EQU   PSADSSF4
PSADSSVE EQU   PSADSSF4
PSADSSDE EQU   PSADSSF4
PSADSSC0 EQU   PSADSSF4
PSADSSIE EQU   PSADSSF4
PSADSS12 EQU   PSADSSF4
PSADSSRC EQU   PSADSSF4
PSARV057 EQU   PSADSSF3
PSARV056 EQU   PSADSSF3
PSARV055 EQU   PSADSSF3
PSADSSMC EQU   PSADSSF3
PSADSSRW EQU   PSADSSF3
PSADSSNM EQU   PSADSSF3
PSADSSES EQU   PSADSSF3
PSADSSGP EQU   PSADSSF3
PSADSSF2 EQU   PSADSSFL+1
PSADSSPI EQU   PSADSSF1
PSADSSOI EQU   PSADSSF1
PSADSSSP EQU   PSADSSF1
PSADSSTP EQU   PSADSSF1
PSADSSDW EQU   PSADSSF1
PSADSSDD EQU   PSADSSF1
PSADSSDM EQU   PSADSSF1
PSADSSMV EQU   PSADSSF1
PSADSSTS EQU   PSA+816
PSADSSWK EQU   PSA+812
PSADSSR3 EQU   PSA+808
PSADSSR2 EQU   PSA+804
PSADSSRS EQU   PSA+800
PSASTOR  EQU   PSA+796
PSACPUSA EQU   PSA+794
PSAVSTAP EQU   PSA+792
PSAWKVAP EQU   PSA+788
PSAWKRAP EQU   PSA+784
PSAMCHIC EQU   PSA+783
PSARV061 EQU   PSA+782
PSASYMSK EQU   PSA+781
PSAMCHFL EQU   PSA+780
PSACR0   EQU   PSA+776
PSAPSWSV EQU   PSA+768
PSALITA  EQU   PSA+764
PSACLHS  EQU   PSAHLHI
PSALKR15 EQU   PSALKSA+60
PSALKR14 EQU   PSALKSA+56
PSALKR13 EQU   PSALKSA+52
PSALKR12 EQU   PSALKSA+48
PSALKR11 EQU   PSALKSA+44
PSALKR10 EQU   PSALKSA+40
PSALKR9  EQU   PSALKSA+36
PSALKR8  EQU   PSALKSA+32
PSALKR7  EQU   PSALKSA+28
PSALKR6  EQU   PSALKSA+24
PSALKR5  EQU   PSALKSA+20
PSALKR4  EQU   PSALKSA+16
PSALKR3  EQU   PSALKSA+12
PSALKR2  EQU   PSALKSA+8
PSALKR1  EQU   PSALKSA+4
PSALKR0  EQU   PSALKSA
PSARV023 EQU   PSACLHT+52
PSALOCAL EQU   PSACLHT+48
PSACMSL  EQU   PSACLHT+44
PSAOPTL  EQU   PSACLHT+40
PSATPACL EQU   PSACLHT+36
PSATPDNL EQU   PSACLHT+32
PSATPNCL EQU   PSACLHT+28
PSAIOSLL EQU   PSACLHT+24
PSAIOSUL EQU   PSACLHT+20
PSAIOSCL EQU   PSACLHT+16
PSAIOSSL EQU   PSACLHT+12
PSASALCL EQU   PSACLHT+8
PSAASML  EQU   PSACLHT+4
PSADISPL EQU   PSACLHT
PSASRSA  EQU   PSA+636
PSARV050 EQU   PSA+634
PSADSSGO EQU   PSA+633
PSARECUR EQU   PSA+632
PSAHLHIS EQU   PSA+628
PSAIPCSA EQU   PSA+624
@NM00022 EQU   PSA+621
PSAIPCDM EQU   PSA+620
PSAIPCD  EQU   PSA+616
@NM00021 EQU   PSA+613
PSAIPCRM EQU   PSA+612
PSAIPCR  EQU   PSA+608
PSAMCHEX EQU   PSA+600
PSAMPSW  EQU   PSA+592
PSAEXPS2 EQU   PSA+584
PSAEXPS1 EQU   PSA+576
PSAPIREG EQU   PSA+572
PSARSREG EQU   PSA+568
PSAGPREG EQU   PSA+556
PSARV022 EQU   PSASUP4
PSARV021 EQU   PSASUP4
PSARV020 EQU   PSASUP4
PSARV019 EQU   PSASUP4
PSARV018 EQU   PSASUP4
PSARV017 EQU   PSASUP4
PSARV016 EQU   PSASUP4
PSARV015 EQU   PSASUP4
PSARV014 EQU   PSASUP3
PSARV013 EQU   PSASUP3
PSARV012 EQU   PSASUP3
PSARV011 EQU   PSASUP3
PSARV010 EQU   PSASUP3
PSARV009 EQU   PSASUP3
PSARV008 EQU   PSASUP3
PSAIOSUP EQU   PSASUP3
PSALCR   EQU   PSASUP2
PSARTM   EQU   PSASUP2
PSAACR   EQU   PSASUP2
PSAIPCE2 EQU   PSASUP2
PSAIPCES EQU   PSASUP2
PSAIPCEC EQU   PSASUP2
PSAGTF   EQU   PSASUP2
PSAIPCRI EQU   PSASUP2
PSAIPCRP EQU   PSASUP1
PSAIPCDR EQU   PSASUP1
PSADISP  EQU   PSASUP1
PSALOCK  EQU   PSASUP1
PSAPI    EQU   PSASUP1
PSAEXT   EQU   PSASUP1
PSASVC   EQU   PSASUP1
PSAIO    EQU   PSASUP1
PSAAOLD  EQU   PSA+548
PSAANEW  EQU   PSA+544
PSATOLD  EQU   PSA+540
PSATNEW  EQU   PSA+536
PSALCCAR EQU   PSA+532
PSALCCAV EQU   PSA+528
PSAPCCAR EQU   PSA+524
PSAPCCAV EQU   PSA+520
PSACPULA EQU   PSA+518
PSACPUPA EQU   PSA+516
PSAPSA   EQU   PSA+512
FLCHDEND EQU   PSA+512
FLCCRSAV EQU   FLCMCLA+280
FLCGRSAV EQU   FLCMCLA+216
FLCFPSAV EQU   FLCMCLA+184
FLCFLA   EQU   FLCMCLA+88
FLCRGNCD EQU   FLCMCLA+84
FLCFSAA  EQU   FLCFSA+1
@NM00020 EQU   FLCFSA
@NM00019 EQU   FLCMCLA+72
FLCMCIC  EQU   FLCMCLA+64
@NM00018 EQU   FLCMCLA+20
@NM00017 EQU   FLCIOA
@NM00016 EQU   FLCMCLA+15
@NM00015 EQU   FLCMCLA+14
@NM00014 EQU   FLCMCLA+12
FLCLCL   EQU   FLCMCLA+8
FLCIOELA EQU   FLCIOEL+1
@NM00013 EQU   FLCIOEL
FLCCHNID EQU   FLCMCLA
@NM00012 EQU   PSA+160
FLCMTRCD EQU   PSA+157
@NM00011 EQU   PSA+156
FLCPERA  EQU   FLCPER+1
@NM00010 EQU   FLCPER
@NM00009 EQU   PSA+151
FLCPERCD EQU   PSA+150
FLCMCNUM EQU   PSA+149
@NM00008 EQU   PSA+148
FLCTEAA  EQU   FLCTEA+1
@NM00007 EQU   FLCTEA
PSAPIPC  EQU   PSAPICOD
PSAPIMC  EQU   PSAPICOD
PSAPIPER EQU   PSAPICOD
PSARV049 EQU   FLCPICOD
FLCPILCB EQU   FLCPIILC
@NM00006 EQU   FLCPIILC
@NM00005 EQU   PSAEPPSW
FLCSVCN  EQU   PSAESPSW+2
FLCSILCB EQU   FLCSVILC
@NM00004 EQU   FLCSVILC
@NM00003 EQU   PSAESPSW
FLCEICOD EQU   PSAEEPSW+2
PSASPAD  EQU   PSAEEPSW
@NM00002 EQU   PSA+128
FLCINPSW EQU   PSA+120
FLCMNPSW EQU   PSA+112
FLCPNPSW EQU   PSA+104
FLCSNPSW EQU   PSA+96
FLCENPSW EQU   PSA+88
FLCTRACE EQU   PSA+84
FLCTIMER EQU   PSA+80
FLCCVT2  EQU   PSA+76
FLCCAW   EQU   PSA+72
FLCMOPSW EQU   PSA+48
FLCPOPSW EQU   PSA+40
FLCSOPSW EQU   PSA+32
FLCEOPSW EQU   PSA+24
@NM00001 EQU   FLCICCW2+4
FLCCVT   EQU   FLCICCW2
FLCICCW1 EQU   FLCROPSW
FLCIPPSW EQU   FLCRNPSW
.@UNREFD ANOP                          END UNREFERENCED COMPONENTS
@RT00222 EQU   IOIRCBE2
@RT00225 EQU   IOIRCBE2
@RT00228 EQU   IOIRCBE2
@RF00228 EQU   IOIRET
@RT00240 EQU   IOERR
@RT00295 EQU   IOIRET
@RT00336 EQU   IOCATERR
@RT00339 EQU   IOCATERR
@RT00342 EQU   IOCATERR
@RT00379 EQU   TIOLOOP
@RT00382 EQU   TIOLOOP
@ENDDATA EQU   *
         END   AMDSAIOI,(C'PL/S-II',0502,74107)
