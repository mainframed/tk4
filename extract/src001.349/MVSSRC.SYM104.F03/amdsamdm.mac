         TITLE 'AMDSAMDM   LOCAL MEMORY DUMP ROUTINE                   *
                        '
AMDSAMDM CSECT ,                                                   0001
@MAINENT DS    0H                                                  0001
         USING *,@15                                               0001
         B     @PROLOG                                             0001
         DC    AL2(@EP00001-@MAINENT)
         DC    AL1(16)                                             0001
         DC    C'AMDSAMDM  74.329'                                 0001
AMDSASPQ DS    0H                                                  0001
         USING *,@15                                               0001
         B     @PROLOG                                             0001
         DC    AL2(@EP00338-AMDSASPQ)
         ENTRY AMDSASPQ
         DROP  @15
@PROLOG  STM   @14,@12,12(@13)                                     0001
         BALR  @11,0                                               0001
@PSTART  DS    0H                                                  0001
         USING @PSTART,@11                                         0001
         ST    @13,@SA00001+4                                      0001
         LA    @14,@SA00001                                        0001
         ST    @14,8(,@13)                                         0001
         LR    @13,@14                                             0001
         AH    @15,4(,@15)                                         0001
         BR    @15                                                 0001
@EP00001 DS    0H                                                  0002
*   SAVEFORM(1:4) = 'LMDM';         /* MODULE ID TO SAVE AREA        */
         MVC   SAVEFORM(4,R13),@CC01305                            0210
*   RCBNEXT = VCTRCB;               /* PICK UP CURRENT RCB CHAIN     */
         LA    @10,MDMRCB                                          0211
         MVC   RCBNEXT(4,@10),VCTRCB(VCCTREG)                      0211
*   RCBSAVE = R13;                  /* SAVE AREA PTR TO RCB          */
         ST    R13,RCBSAVE(,@10)                                   0212
*   RCBEXIT = ADDR(MDMEXIT);        /* SET UP EXIT ADDRESS           */
         LA    @09,MDMEXIT                                         0213
         ST    @09,RCBEXIT(,@10)                                   0213
*   RCBBASE = BASEREG;              /* BASE REGISTER VALUE TO RCB    */
         ST    BASEREG,RCBBASE(,@10)                               0214
*   GENERATE REFS(R1) SETS(MDMSTOR) (STCTL R1,R1,MDMSTOR); /* SEGMENT
*                                      TABLE ORIGIN TO RCB           */
         STCTL R1,R1,MDMSTOR
*   VCTRCB = ADDR(MDMRCB);          /* MAKE RCB ACTIVE               */
         LA    @10,MDMRCB                                          0216
         ST    @10,VCTRCB(,VCCTREG)                                0216
*   SAVEBACK -> SAVER15 = 0;        /* SET UP 0 RETURN CODE          */
         SLR   @10,@10                                             0217
         L     @09,SAVEBACK(,R13)                                  0217
         ST    @10,SAVER15(,@09)                                   0217
*   MDMBUFTP = CTBUFTYP;            /* SAVE ORIGINAL BUFFER REQUEST  */
         L     @15,VCTCCTV(,VCCTREG)                               0218
         SLR   MDMBUFTP,MDMBUFTP                                   0218
         IC    MDMBUFTP,CTBUFTYP(,@15)                             0218
*   CTBUFTYP = OFF;                 /* RESET BUFFER REQUEST FLAGS    */
         MVI   CTBUFTYP(@15),B'00000000'                           0219
*   CTLSQA = ON;                    /* INDICATE LSQA BUFFERS         */
         OI    CTLSQA(@15),B'00001000'                             0220
*   MDMBINA = ADDR(ERRORAD) + 1;    /* SET UP ERROR ADDR FOR MSG     */
         LA    @09,ERRORAD                                         0221
         AH    @09,@CH00074                                        0221
         ST    @09,MDMBINA                                         0221
*                                                                  0222
*   /*****************************************************************/
*   /*                                                               */
*   /* CHECK IF MEMORY WAS SWAPPED OUT. IF SO, DUMP THE LSQA. GET THE*/
*   /* SPQE CHAIN FOR LSQA FROM THE LDA, POINTED TO BY THE ASCB. NOTE*/
*   /* THAT THE PAGE TABLES WILL HAVE ALREADY BEEN DUMPED BY         */
*   /* AMDSASIN.                                                     */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0222
*/* D (YES,,NO,MDMLOCAL) VCTMEMIN OFF                                */
*/* N MEMORY WAS SWAPPED OUT. DUMP LSQA.                             */
*/* P INITIALIZE MESSAGE AMD022I FOR LSQA                            */
*/* N THIS REQUIRES SETTING LNG22I AND DMP22I                        */
*/* P GET LDA ADDRESS FROM ASCBLDA                                   */
*/* P GET LSQAPTR (SPQE CHAIN FOR LSQA) FROM LDA                     */
*/* P PLACE CONTENTS OF LSQAPTR IN REG 1                             */
*/* D (NO,,YES,MDMLOCAL) LSQAPTR = 0                                 */
*/* S SPQESRCH:  SEARCH LSQA SPQE CHAIN                              */
*/* D (YES,MDMLOCAL,NO,) RC  =  0                                    */
*/* L  AMDSACON:  ISSUE MESSAGE AMD022I                              */
*   IF VCTMEMIN = OFF THEN          /* WAS MEMORY SWAPPED OUT        */
         TM    VCTMEMIN(VCCTREG),B'01000000'                       0222
         BNZ   @RF00222                                            0222
*     DO;                           /* YES - DUMP LSQA               */
*       VDMP22I(1:LENGTH(CHARLSQA)) = CHARLSQA; /* INITIALIZE ERROR
*                                      MESSAGE FOR LSQA DUMP         */
         L     @09,@CA01235                                        0224
         L     @14,VCTLPA(,VCCTREG)                                0224
         ALR   @09,@14                                             0224
         MVC   VDMP22I(4,@09),CHARLSQA                             0224
*       VLNG22I = LENGTH(CHARLSQA); /* INITIALIZE SECONDARY LENGTH   */
         L     @09,@CA01229                                        0225
         ALR   @09,@14                                             0225
         MVI   VLNG22I(@09),X'04'                                  0225
*       CTLSQA = ON;                /* REQUEST LSQA BUFFER           */
         OI    CTLSQA(@15),B'00001000'                             0226
*       RESPECIFY ASCB BASED(VCTASCB);                             0227
*       RESPECIFY LDA BASED(ASCBLDA);                              0228
*       RESPECIFY (R1,RETCODE) RESTRICTED;                         0229
*       R1 = LSQAPTR;               /* GET LSQA SPQE CHAIN FROM LDA  */
         L     @14,VCTASCB(,VCCTREG)                               0230
         L     @14,ASCBLDA(,@14)                                   0230
         L     R1,LSQAPTR(,@14)                                    0230
*       IF R1 ^= 0 THEN             /* ANY SPQE CHAIN                */
         CR    R1,@10                                              0231
         BE    @RF00231                                            0231
*         DO;                       /* YES - PROCESS IT              */
*           CALL SPQESRCH;          /* CALL SPQESRCH SUBROUTINE TO 0233
*                                      SEARCH SPQE CHAIN             */
         BAL   @14,SPQESRCH                                        0233
*           IF RETCODE ^= 0 THEN    /* ERROR SEARCHING SPQE CHAIN    */
         LTR   RETCODE,RETCODE                                     0234
         BZ    @RF00234                                            0234
*             DO;                                                  0235
*               R1 = AMD022I;       /* REQUEST MESSAGE AMD022I       */
         LA    R1,22                                               0236
*               SVC(CONSVC);        /* CALL AMDSACON TO ISSUE MESSAGE*/
         SVC   3                                                   0237
*             END;                                                 0238
*         END;                                                     0239
@RF00234 DS    0H                                                  0240
*       RESPECIFY (R1,RETCODE) UNRESTRICTED;                       0240
@RF00231 DS    0H                                                  0241
*     END;                                                         0241
*                                                                  0242
*   /*****************************************************************/
*   /*                                                               */
*   /* VALIDITY CHECK THE ASXB. GET THE TCB CHAIN FROM THE ASXB AND  */
*   /* SET UP DIRECTION OF TCB CHAIN SEARCH.                         */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0242
*/*MDMLOCAL: P INITIALIZE MESSAGE AMD022I FOR MEMORY                 */
*/* N THIS REQUIRES SETTING LNG22I AND DMP22I                        */
*/* P GET ASXB ADDRESS FROM ASCBASXB                                 */
*/* P SET VCTCBADR TO ASCBASXB                                       */
*/* P SET VCTCBID TO ASXB ID                                         */
*/* L  AMDSAVCK:  VALIDITY CHECK ASXB                                */
*/* D (YES,,NO,MDMEXIT) RC  =  0                                     */
*/* P GET TCB COUNT FROM ASXBTCBS                                    */
*/* D (NO,%MDMLO1,YES,%MDMLO0) TCB COUNT = 0                         */
*/*%MDMLO0: P (,%MDMLO1) SET DEFAULT TCB COUNT OF 256                */
*/*%MDMLO1: P INDICATE FORWARD TCB SEARCH                            */
*/* P SET LAST VALID TCB ADDRESS TO 0                                */
*/* D (NO,%MDMTCB,YES,%MDMFS1) ASXBFTCB = 0                          */
*/*%MDMFS1: D (NO,%MDMBS1,YES,%MDMRC0) ASXBTCBS = 0                  */
*/*%MDMBS1: P INDICATE BACKWARD TCB SEARCH                           */
*/* D (NO,%MDMTCB,YES,%MDMRC0) ASXBLTCB = 0                          */
*/*%MDMTCB: P GET TCB ADDRESS                                        */
*   VDMP22I(1:LENGTH(LCLMEMRY)) = LCLMEMRY; /* INITIALIZE ERROR    0242
*                                      MESSAGE FOR LOCAL MEMORY    0242
*                                      SEARCH                        */
@RF00222 L     @10,@CA01235                                        0242
         L     @09,VCTLPA(,VCCTREG)                                0242
         ALR   @10,@09                                             0242
         MVC   VDMP22I(12,@10),LCLMEMRY                            0242
*   VLNG22I = LENGTH(LCLMEMRY);     /* INITIALIZE SECONDARY LENGTH   */
         L     @10,@CA01229                                        0243
         ALR   @10,@09                                             0243
         MVI   VLNG22I(@10),X'0C'                                  0243
*   RESPECIFY ASXB BASED(ASCBASXB);                                0244
*   VCTCBADR = ASCBASXB;            /* GET ASXB ADDRESS FOR VALIDITY
*                                      CHECK                         */
         L     @10,VCTASCB(,VCCTREG)                               0245
         MVC   VCTCBADR(4,VCCTREG),ASCBASXB(@10)                   0245
*   VCTCBIDN = VASXBID;             /* SET ASXB CONTROL BLOCK ID     */
         MVI   VCTCBIDN(VCCTREG),X'03'                             0246
*   SVC(VCKSVC);                    /* CALL AMDSAVCK TO VALIDITY   0247
*                                      CHECK THE ASXB                */
         SVC   25                                                  0247
*   RESPECIFY RETCODE RESTRICTED;                                  0248
*   IF RETCODE ^= 0 THEN            /* IS THE ASXB VALID             */
         SLR   @14,@14                                             0249
         CR    RETCODE,@14                                         0249
         BNE   @RT00249                                            0249
*     GO TO MDMEXIT;                /* NO - EXIT                     */
*   RESPECIFY RETCODE UNRESTRICTED;                                0251
*   MDMTCBCT = ASXBTCBS;            /* PICK UP COUNT OF TCBS         */
         L     @10,VCTASCB(,VCCTREG)                               0252
         L     @10,ASCBASXB(,@10)                                  0252
         LH    MDMTCBCT,ASXBTCBS(,@10)                             0252
*   IF MDMTCBCT = 0 THEN            /* ANY TCBS ON TCB CHAIN         */
         CR    MDMTCBCT,@14                                        0253
         BNE   @RF00253                                            0253
*     MDMTCBCT = TCBDEFLT;          /* NO - SET DEFAULT COUNT IN CASE
*                                      ACTUAL COUNT WAS OVERLAID     */
         LA    MDMTCBCT,256                                        0254
*   MDMBKDSR = OFF;                 /* INDICATE FORWARD TCB SEARCH   */
@RF00253 NI    MDMBKDSR,B'01111111'                                0255
*   LASTTCB = 0;                    /* RESET LAST TCB ADDRESS        */
         SLR   @10,@10                                             0256
         LR    LASTTCB,@10                                         0256
*   TCBPTR = ASXBFTCB;              /* GET FORWARD CHAIN ADDRESS     */
         L     @09,VCTASCB(,VCCTREG)                               0257
         L     @09,ASCBASXB(,@09)                                  0257
         L     @15,ASXBFTCB(,@09)                                  0257
         LR    TCBPTR,@15                                          0257
*   IF ASXBFTCB = 0 THEN            /* ANY FORWARD CHAIN             */
         CR    @15,@10                                             0258
         BNE   @RF00258                                            0258
*     IF ASXBTCBS = 0 THEN          /* NO - ANY TCBS                 */
         CH    @10,ASXBTCBS(,@09)                                  0259
         BE    @RT00259                                            0259
*       GO TO MDMRET;               /* NO - NOTHING TO DUMP          */
*     ELSE                          /* YES - CHECK BACK CHAIN        */
*                                                                  0261
*MDMBS1:                                                           0261
*       DO;                                                        0261
MDMBS1   DS    0H                                                  0262
*         MDMBKDSR = ON;            /* INDICATE TCB SEARCH IN BACK 0262
*                                      DIRECTION                     */
         OI    MDMBKDSR,B'10000000'                                0262
*         IF ASXBLTCB = 0 THEN      /* ANY BACKWARD CHAIN            */
         L     @10,VCTASCB(,VCCTREG)                               0263
         L     @10,ASCBASXB(,@10)                                  0263
         L     @10,ASXBLTCB(,@10)                                  0263
         LTR   @10,@10                                             0263
         BZ    @RT00263                                            0263
*           GO TO MDMRET;           /* NO - RETURN                   */
*         TCBPTR = ASXBLTCB;        /* GET BACKWARD CHAIN ADDRESS    */
         LR    TCBPTR,@10                                          0265
*       END;                                                       0266
*                                                                  0267
*   /*****************************************************************/
*   /*                                                               */
*   /* SEARCH TCB CHAIN. VALIDITY CHECK EACH TCB. IF INVALID, GO     */
*   /* DOWN BACKWARD TCB CHAIN.                                      */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0267
*/*%MDMTCB1: P SET VCTCBADR TO CURRENT TCB ADDRESS                   */
*/* P SET VCTCBID TO TCB ID                                          */
*/* L  AMDSAVCK:  VALIDITY CHECK TCB                                 */
*/* D (YES,%MDMTCB2,NO,%MDMTCBE) RC  =  0                            */
*/*%MDMTCBE: P INCREMENT TCB ERROR COUNT                             */
*/* D (NO,,YES,%MDMTCBN) TCB ERROR COUNT < 3                         */
*/* D (YES,%MDMBS1,NO,%MDMRC4) FORWARD TCB SEARCH                    */
*   DO MDMTCBCT = MDMTCBCT TO 1 BY -1; /* SEARCH NUMBER OF TCBS GIVEN
*                                      BY COUNT                      */
@RF00258 B     @DE00267                                            0267
@DL00267 DS    0H                                                  0268
*     VCTCBADR = TCBPTR;            /* SET TCB ADDR FOR VALIDITY   0268
*                                      CHECK                         */
         ST    TCBPTR,VCTCBADR(,VCCTREG)                           0268
*     VCTCBIDN = VTCBID;            /* SET TCB CONTROL BLOCK ID      */
         MVI   VCTCBIDN(VCCTREG),X'12'                             0269
*     SVC(VCKSVC);                  /* CALL AMDSAVCK TO VALIDITY   0270
*                                      CHECK THE TCB                 */
         SVC   25                                                  0270
*     RESPECIFY RETCODE RESTRICTED;                                0271
*     IF RETCODE ^= 0 THEN          /* IS TCB VALID                  */
         LTR   RETCODE,RETCODE                                     0272
         BZ    @RF00272                                            0272
*       DO;                         /* NO -                          */
*         IF MDMBKDSR = ON THEN     /* SEARCHING CHAIN IN BACKWARD 0274
*                                      DIRECTION                     */
         TM    MDMBKDSR,B'10000000'                                0274
         BO    @RT00274                                            0274
*           GO TO MDMRC4;           /* YES - TERMINATE SEARCH        */
*         GO TO MDMBS1;             /* BEGIN SEARCH IN BACKWARD    0276
*                                      DIRECTION                     */
         B     MDMBS1                                              0276
*         RESPECIFY RETCODE UNRESTRICTED;                          0277
*       END;                                                       0278
*                                                                  0279
*   /*****************************************************************/
*   /*                                                               */
*   /* SET UP TCB ADDRESS FOR MESSAGE AMD022I.                       */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0279
*   MDMEBCA = ADDR(TCBADDR);        /* SET UP EBCDIC ADDRESS         */
@RF00272 LA    @10,TCBADDR                                         0279
         ST    @10,MDMEBCA                                         0279
*   ERRORAD = TCBPTR;               /* GET TCB ADDRESS               */
         ST    TCBPTR,ERRORAD                                      0280
*   RESPECIFY R1 RESTRICTED;                                       0281
*   R1 = ADDR(MDMBINL);             /* POINT TO CONVERT PARM LIST    */
         LA    R1,MDMBINL                                          0282
*   SVC (BINSVC);                   /* CONVERT TCB ADDRESS TO EBCDIC */
         SVC   28                                                  0283
*   MDMEBCA = ADDR(ADDR18I) + VCTLPA; /* INITIALIZE VIRTUAL ADDRESS
*                                      FOR MESSAGE OUTPUT            */
         L     @10,@CA01251                                        0284
         AL    @10,VCTLPA(,VCCTREG)                                0284
         ST    @10,MDMEBCA                                         0284
*   RESPECIFY R1 UNRESTRICTED;                                     0285
*                                                                  0285
*   /*****************************************************************/
*   /*                                                               */
*   /* TCB IS VALID.  SET UP AND DUMP SWA.                           */
*   /* ISSUE MESSAGE AMD022I IS ERROR OCCURS.                        */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0286
*/*%MDMTCB2: D (YES,,NO,%MDMLAST) FORWARD TCB SEARCH                 */
*/* P SAVE TCB ADDRESS AS LAST VALID                                 */
*/*%MDMLAST: P INITIALIZE MESSAGE AMD022I FOR SWA                    */
*/* N THIS REQUIRES SETTING LNG22I AND DMP22I                        */
*/* P PLACE TCBSWA IN REGISTER 1                                     */
*/* N SPQESRCH: SEARCH SWA SPQE CHAIN                                */
*/* D (YES,%MDMTCBM,NO,MDM22ISW) RC  =  0                            */
*/*MDM22ISW: L  AMDSACON:  ISSUE MESSAGE AMD022I                     */
*/* P (,%MDMTCBM) SET RETURN CODE = 4                                */
*     IF MDMBKDSR = OFF THEN        /* FORWARD TCB SEARCH            */
         TM    MDMBKDSR,B'10000000'                                0286
         BNZ   @RF00286                                            0286
*       LASTTCB = TCBPTR;           /* YES - SAVE TCB ADDRESS AS LAST
*                                      VALID                         */
         LR    LASTTCB,TCBPTR                                      0287
*     VDMP22I(1:LENGTH(CHARSWA)) = CHARSWA; /* INITIALIZE MESSAGE FOR
*                                      ERROR DUMPING SWA             */
@RF00286 L     @10,@CA01235                                        0288
         L     @09,VCTLPA(,VCCTREG)                                0288
         ALR   @10,@09                                             0288
         MVC   VDMP22I(3,@10),CHARSWA                              0288
*     VDMP22I(1+LENGTH(CHARSWA):LENGTH(CHARSWA)+LENGTH(TCBMG))=TCBMG;
         MVC   VDMP22I+3(15,@10),TCBMG                             0289
*                                   /* MOVE TCB ADDRESS TO MESSAGE   */
*     VLNG22I = LENGTH(CHARSWA)+LENGTH(TCBMG); /* SET UP SECONDARY 0290
*                                      MESSAGE LENGTH                */
         L     @10,@CA01229                                        0290
         ALR   @10,@09                                             0290
         MVI   VLNG22I(@10),X'12'                                  0290
*     RESPECIFY (R1,RETCODE) RESTRICTED;                           0291
*     R1 = TCBSWA;                  /* GET ADDRESS OF SPQE CHAIN FOR
*                                      SWA                           */
         L     R1,TCBSWA(,TCBPTR)                                  0292
*     CALL SPQESRCH;                /* CALL SPQESRCH SUBROUTINE TO 0293
*                                      SEARCH SPQE CHAIN             */
         BAL   @14,SPQESRCH                                        0293
*     IF RETCODE ^= 0 THEN          /* ERROR DURING SPQE SEARCH      */
         LTR   RETCODE,RETCODE                                     0294
         BZ    @RF00294                                            0294
*       DO;                         /* YES - ISSUE AMD022I           */
*         R1 = AMD022I;             /* REQUEST MESSAGE AMD022I       */
         LA    R1,22                                               0296
*         SVC(CONSVC);              /* CALL AMDSACON TO ISSUE AMD022I*/
         SVC   3                                                   0297
*         SAVEBACK -> SAVER15 = 4;  /* SET UP RETURN CODE 4          */
         L     @14,SAVEBACK(,R13)                                  0298
         MVC   SAVER15(4,@14),@CF00038                             0298
*       END;                                                       0299
*                                                                  0300
*   /*****************************************************************/
*   /*                                                               */
*   /* DUMP REMAINING SUBPOOLS ON SUBPOOL DUMP LIST (SDL) BY GETTING */
*   /* THE SPQE CHAIN POINTED TO BY TCBUKYSP. ISSUE MESSAGE AMD022I  */
*   /* IF AN ERROR OCCURS.                                           */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0300
*/*%MDMTCBM: P INITIALIZE MESSAGE AMD022I FOR LOCAL SUBPOOLS         */
*/* N THIS REQUIRES SETTING LNG22I AND DMP22I                        */
*/* P PLACE TCBUKYSP IN REGISTER 1                                   */
*/* S SPQESRCH:  SEARCH SPQE CHAIN FOR LOCAL SUBPOOLS                */
*/* D (YES,%MDMTCBN,NO,MDM22IMS) RC  =  0                            */
*/*MDM22IMS: L  AMDSACON:  ISSUE MESSAGE AMD022I                     */
*/* P (,%MDMTCBN) SET RETURN CODE = 4                                */
*     VDMP22I(1:LENGTH(LCLSUBPL)) = LCLSUBPL; /* INITIALIZE MESSAGE
*                                      FOR ERROR DUMPING LOCAL     0300
*                                      SUBPOOLS                      */
@RF00294 L     @14,@CA01235                                        0300
         L     @10,VCTLPA(,VCCTREG)                                0300
         ALR   @14,@10                                             0300
         MVC   VDMP22I(14,@14),LCLSUBPL                            0300
*     VDMP22I(1+LENGTH(LCLSUBPL):LENGTH(LCLSUBPL)+LENGTH(TCBMG))=TCBMG;
         MVC   VDMP22I+14(15,@14),TCBMG                            0301
*     VLNG22I = LENGTH(LCLSUBPL)+LENGTH(TCBMG); /* SET UP SECONDARY
*                                      MESSAGE LENGTH                */
         L     @14,@CA01229                                        0302
         ALR   @14,@10                                             0302
         MVI   VLNG22I(@14),X'1D'                                  0302
*     R1 = TCBUKYSP;                /* GET SPQE CHAIN FOR SP 229,230 */
         L     R1,TCBUKYSP(,TCBPTR)                                0303
*     CALL SPQESRCH;                /* CALL SPQESRCH SUBROUTINE TO 0304
*                                      SEARCH SPQE CHAIN             */
         BAL   @14,SPQESRCH                                        0304
*     IF RETCODE ^= 0 THEN          /* ERROR SEARCHING SPQE CHAIN    */
         LTR   RETCODE,RETCODE                                     0305
         BZ    @RF00305                                            0305
*       DO;                         /* YES - ISSUE MESSAGE AMD022I   */
*         R1 = AMD022I;             /* REQUEST MESSAGE AMD022I       */
         LA    R1,22                                               0307
*         SVC(CONSVC);              /* CALL AMDSACON TO ISSUE AMD022I*/
         SVC   3                                                   0308
*       END;                                                       0309
*                                                                  0310
*   /*****************************************************************/
*   /*                                                               */
*   /* GET NEXT TCB PROCEEDING IN CURRENT DIRECTION OF SEARCH.       */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0310
*/*%MDMTCBN: P DECREMENT TCB COUNT                                   */
*/* D (YES,,NO,%MDMBS2) FORWARD TCB SEARCH                           */
*/* P (,%MDMTCB3) GET NEXT TCB ADDR FROM TCBTCB                      */
*/*%MDMBS2: P GET NEXT TCB ADDR FROM TCBBACK                         */
*/* D (YES,,NO,%MDMTCB3) IS THIS SAVED TCB ADDR                      */
*/* N (,%MDMRC0) ALREADY PROCESSED THIS TCB                          */
*/*%MDMTCB3: D (NO,,YES,%MDMRC0) CURRENT TCB ADDR = 0                */
*                                                                  0310
*MDMTCBN:                                                          0310
*     IF MDMBKDSR = OFF THEN        /* SEARCHING TCB CHAIN IN FORWARD
*                                      DIRECTION                     */
@RF00305 DS    0H                                                  0310
MDMTCBN  TM    MDMBKDSR,B'10000000'                                0310
         BNZ   @RF00310                                            0310
*       TCBPTR = TCBTCB;            /* YES - GET FORWARD CHAIN     0311
*                                      POINTER                       */
         L     TCBPTR,TCBTCB(,TCBPTR)                              0311
*     ELSE                                                         0312
*       DO;                                                        0312
         B     @RC00310                                            0312
@RF00310 DS    0H                                                  0313
*         TCBPTR = TCBBACK;         /* PICK UP BACK CHAIN POINTER    */
         L     TCBPTR,TCBBACK(,TCBPTR)                             0313
*         IF TCBPTR = LASTTCB THEN  /* ALREADY PROCESSED THIS TCB    */
         CR    TCBPTR,LASTTCB                                      0314
         BE    @RT00314                                            0314
*           GO TO MDMRET;           /* YES - DONE                    */
*       END;                                                       0316
*     IF TCBPTR = 0 THEN            /* END OF TCB CHAIN              */
@RC00310 LTR   TCBPTR,TCBPTR                                       0317
         BZ    @RT00317                                            0317
*       GO TO MDMRET;               /* YES - DONE                    */
*     RESPECIFY (R1,RETCODE) UNRESTRICTED;                         0319
*   END;                            /* CONTINUE DOWN TCB CHAIN       */
         BCTR  MDMTCBCT,0                                          0320
@DE00267 LTR   MDMTCBCT,MDMTCBCT                                   0320
         BP    @DL00267                                            0320
*                                                                  0321
*   /*****************************************************************/
*   /*                                                               */
*   /* REACH HERE ONLY IF TCB COUNT REACHES 0 BUT THE END OF THE TCB */
*   /* CHAIN HAS NOT BEEN REACHED. THIS COULD BE A POSSIBLE LOOP.    */
*   /* ISSUE MESSAGE AMD018I TO INDICATE THIS.                       */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0321
*/* D (NO,%MDMTCB1,YES,%MDMLOOP) TCB COUNT = 0                       */
*/*%MDMLOOP: L  AMDSABIN:  CONVERT TCB ADDRESS TO EBCDIC             */
*/* P INITIALIZE MESSAGE AMD018I FOR TCB LOOP                        */
*/* N THIS REQUIRES SETTING CBN18I, CBER18I, AND ADDR18I             */
*/* L (,%MDMRC4)  AMDSACON:  ISSUE MESSAGE AMD018I                   */
*   RESPECIFY R1 RESTRICTED;                                       0321
*   ERRORAD = TCBPTR;               /* GET TCB ADDRESS               */
         ST    TCBPTR,ERRORAD                                      0322
*   R1 = ADDR(MDMBINL);             /* POINT TO CONVERT PARAMETER  0323
*                                      LIST                          */
         LA    R1,MDMBINL                                          0323
*   SVC(BINSVC);                    /* CALL AMDSABIN TO CONVERT TO 0324
*                                      EBCDIC                        */
         SVC   28                                                  0324
*   VCBN18I = 'TCB     ';           /* MOVE CONTROL BLOCK NAME TO  0325
*                                      MESSAGE                       */
         L     @10,@CA01249                                        0325
         L     @09,VCTLPA(,VCCTREG)                                0325
         ALR   @10,@09                                             0325
         MVC   VCBN18I(8,@10),@CC01319                             0325
*   VCBER18I = LOOPMSG;             /* MOVE LOOP INDICATOR TO MESSAGE*/
         L     @10,@CA01250                                        0326
         ALR   @10,@09                                             0326
         MVC   VCBER18I(7,@10),LOOPMSG                             0326
*   R1 = AMD018I;                   /* REQUEST MESSAGE AMD018I BE  0327
*                                      ISSUED                        */
         LA    R1,18                                               0327
*   SVC(CONSVC);                    /* CALL AMDSACON TO ISSUE MESSAGE*/
         SVC   3                                                   0328
*                                                                  0329
*   /*****************************************************************/
*   /*                                                               */
*   /* SET UP RETURN CODE OF 4 AND EXIT                              */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0329
*/*%MDMRC4: P (,MDMRET) SET RETURN CODE = 4                          */
*                                                                  0329
*MDMRC4:                                                           0329
*   SAVEBACK -> SAVER15 = 4;        /* SET RETURN CODE 4             */
MDMRC4   L     @10,SAVEBACK(,R13)                                  0329
         MVC   SAVER15(4,@10),@CF00038                             0329
*                                                                  0330
*   /*****************************************************************/
*   /*                                                               */
*   /* DUMP REMAINING ARBS.                                          */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0330
*/*%MDMRC0: P SET RETURN CODE = 0                                    */
*/*MDMRET: P SET REGISTER 1 TO 0                                     */
*/* L  AMDSAARD:  DUMP REMAINING ARBS                                */
*/* P DEQUEUE RCB                                                    */
*/* P RESTORE REGISTERS                                              */
*/* R RETURN TO CALLER                                               */
*                                                                  0330
*MDMRET:                                                           0330
*   R1 = 0;                         /* REQUEST DUMPING OF ARBS       */
MDMRET   SLR   R1,R1                                               0330
*   SVC(ARDSVC);                    /* CALL AMDSAARD TO DUMP ARBS    */
         SVC   16                                                  0331
*   CTBUFTYP = MDMBUFTP;            /* RESTORE ORIGINAL BUFFER     0332
*                                      REQUEST                       */
         L     @10,VCTCCTV(,VCCTREG)                               0332
         STC   MDMBUFTP,CTBUFTYP(,@10)                             0332
*   VCTRCB = RCBNEXT;               /* DEQUEUE RCB FROM RCB CHAIN    */
         LA    @10,MDMRCB                                          0333
         MVC   VCTRCB(4,VCCTREG),RCBNEXT(@10)                      0333
*   RETURN;                         /* RETURN TO CALLER              */
@EL00001 L     @13,4(,@13)                                         0334
@EF00001 DS    0H                                                  0334
@ER00001 LM    @14,@12,12(@13)                                     0334
         BR    @14                                                 0334
*                                                                  0335
*   /*****************************************************************/
*   /*                                                               */
*   /* RCB EXIT - ISSUE MESSAGE AMD022I AND EXIT.                    */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0335
*/*MDMEXIT: L  AMDSACON:  ISSUE MESSAGE AMD022I                      */
*/* P RESET CTLSQA                                                   */
*/* P (,MDMRET) SET RETURN CODE = 4                                  */
*                                                                  0335
*MDMEXIT:                                                          0335
*   R1 = AMD022I;                   /* REQUEST MESSAGE AMD022I BE  0335
*                                      ISSUED                        */
MDMEXIT  LA    R1,22                                               0335
*   SVC(CONSVC);                    /* CALL AMDSACON TO ISSUE MESSAGE*/
         SVC   3                                                   0336
*   GO TO MDMRC4;                   /* SET UP RETURN CODE OF 4 AND 0337
*                                      EXIT                          */
         B     MDMRC4                                              0337
*                                                                  0338
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS IS THE EXTERNAL ENTRY TO THE SPQE SEARCH SUBROUTINE.     */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0338
*/*AMDSASPQ: E AMDSASPQ                                              */
*/* N ENTRY TO SPQE SEARCH ROUTINE                                   */
*/* N REGISTER 1 CONTAINS FIRST SPQE ADDRESS                         */
*/* P OBSERVE STANDARD LINKAGE CONVENTIONS                           */
*/* L  SPQESRCH:  SEARCH SPQE CHAIN                                  */
*/* R RETURN TO CALLER                                               */
*                                                                  0338
*AMDSASPQ:                                                         0338
*   ENTRY;                                                         0338
@EP00338 DS    0H                                                  0339
*   RESPECIFY (R1,R13,RETCODE) RESTRICTED;                         0339
*   SAVEFORM(1:4) = 'LMDS';         /* MODULE ID TO SAVE AREA        */
         MVC   SAVEFORM(4,R13),@CC01326                            0340
*   CALL SPQESRCH;                  /* CALL SPQE SEARCH SUBROUTINE   */
         BAL   @14,SPQESRCH                                        0341
*   SAVEBACK -> SAVER15 = RETCODE;  /* SET UP RETURN CODE            */
         L     @14,SAVEBACK(,R13)                                  0342
         ST    RETCODE,SAVER15(,@14)                               0342
*   RETURN;                         /* RETURN TO CALLER              */
         B     @EL00001                                            0343
*   RESPECIFY (R1,R13,RETCODE) UNRESTRICTED;                       0344
*                                                                  0345
*   /*****************************************************************/
*   /*                                                               */
*   /* SPQE SEARCH SUBROUTINE - THIS ROUTINE SEARCHES THE SPQE CHAIN */
*   /* WHOSE ADDRESS IS PASSED IN REGISTER 1. IF THE SPQE IS VALID,  */
*   /* THE CORRESPONDING DQE IS OBTAINED AND THE STORAGE RANGE IS    */
*   /* ENQUEUED FOR DUMPING.                                         */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0345
*                                                                  0345
*SPQESRCH:                                                         0345
*   PROC OPTIONS(SAVEAREA);                                        0345
*                                                                  0345
SPQESRCH STM   @14,@12,12(@13)                                     0345
         ST    @13,@SA00002+4                                      0345
         LA    @14,@SA00002                                        0345
         ST    @14,8(,@13)                                         0345
         LR    @13,@14                                             0345
*   /*****************************************************************/
*   /*                                                               */
*   /* RCB FOR ERROR RECOVERY IN SPQE SEARCH                         */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0346
*   DCL                                                            0346
*         1 SPQRCB BDY(WORD) CHAR(LENGTH(RCB)),                    0346
*             3 * PTR(31),                                         0346
*             3 SPQSTOR PTR(31),                                   0346
*             3 * PTR(31),                                         0346
*             3 * PTR(31),                                         0346
*             3 * PTR(31);                                         0346
*                                                                  0346
*   /*****************************************************************/
*   /*                                                               */
*   /* LOCAL CONSTANTS AND VARIABLES                                 */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0347
*   DCL                                                            0347
*         SPQECNTR FIXED(31);       /* SPQE LOOP COUNTER             */
*   DCL                                                            0348
*         SPQESDLI FIXED(31);       /* SUBPOOL DUMP LIST (SDL)     0348
*                                      COUNTER                       */
*   DCL                                                            0349
*         SDLPTR PTR(31);           /* SDL ENTRY POINTER             */
*   DCL                                                            0350
*         NUMSPQE FIXED(31) CONSTANT(256); /* MAXIMUM NUMBER OF SPQES*/
*                                                                  0351
*   /*****************************************************************/
*   /*                                                               */
*   /* INITIALIZE RCB FOR ERROR RECOVERY. INITIALIZE COUNTERS.       */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0351
*/*SPQESRCH: E SPQESRCH                                              */
*/* N SPQE SEARCH ROUTINE                                            */
*/* N REGISTER 1 CONTAINS FIRST SPQE ADDRESS                         */
*/* P OBSERVE STANDARD LINKAGE CONVENTIONS                           */
*/* P (NORM,,RCB,SPQEXIT) ESTABLISH RCB FOR ERROR RECOVERY (VCTRCB)  */
*/* P INITIALIZE SPQE COUNTER TO 256                                 */
*/* P SET UP RETURN CODE OF 0                                        */
*   RESPECIFY (R1,R13) RESTRICTED;                                 0351
*   RESPECIFY RCB BASED(ADDR(SPQRCB));                             0352
*   SPQESPTR = R1;                  /* PICK UP SPQE ADDRESS PASSED BY
*                                      CALLER                        */
         LR    SPQESPTR,R1                                         0353
*   SAVEFORM(1:4) = 'LSPQ';         /* MODULE ID TO SAVE AREA        */
         MVC   SAVEFORM(4,R13),@CC01342                            0354
*   RCBNEXT = VCTRCB;               /* PICK UP CURRENT RCB CHAIN     */
         LA    @10,SPQRCB                                          0355
         MVC   RCBNEXT(4,@10),VCTRCB(VCCTREG)                      0355
*   RCBEXIT = ADDR(SPQEXIT);        /* SET UP EXIT ADDRESS           */
         LA    @04,SPQEXIT                                         0356
         ST    @04,RCBEXIT(,@10)                                   0356
*   RCBSAVE = R13;                  /* SAVE AREA POINTER TO RCB      */
         ST    R13,RCBSAVE(,@10)                                   0357
*   RCBBASE = BASEREG;              /* BASE REGISTER VALUE TO RCB    */
         ST    BASEREG,RCBBASE(,@10)                               0358
*   GENERATE REFS(R1) SETS(SPQSTOR) FLOWS(SPQEXIT)                 0359
*         (STCTL R1,R1,SPQSTOR);    /* SEGMENT TABLE ORIGIN TO RCB   */
         STCTL R1,R1,SPQSTOR
*   VCTRCB = ADDR(SPQRCB);          /* MAKE RCB ACTIVE               */
         LA    @10,SPQRCB                                          0360
         ST    @10,VCTRCB(,VCCTREG)                                0360
*   SAVEBACK -> SAVER15 = 0;        /* SET UP RETURN CODE 0          */
         SLR   @10,@10                                             0361
         L     @04,SAVEBACK(,R13)                                  0361
         ST    @10,SAVER15(,@04)                                   0361
*   IF SPQESPTR = 0 THEN            /* SPQE ADDRESS OF 0             */
         CR    SPQESPTR,@10                                        0362
         BE    @RT00362                                            0362
*     GO TO SPQRET;                 /* YES - RETURN                  */
*   RESPECIFY R1 UNRESTRICTED;                                     0364
*                                                                  0365
*   /*****************************************************************/
*   /*                                                               */
*   /* SEARCH THE SPQE CHAIN. VALIDITY CHECK EACH SPQE. IF AN SPQE IS*/
*   /* INVALID, TERMINATE THE SEARCH.                                */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0365
*/*SPQVLD1: P SET VCTCBADR TO SPQE ADDRESS                           */
*/* P SET VCTCBID TO SPQE ID                                         */
*/* L  AMDSAVCK:  VALIDITY CHECK SPQE                                */
*/* D (YES,%SPQOK,NO,SPQEXIT) RC  =  0                               */
*   DO SPQECNTR = NUMSPQE TO 1 BY -1; /* SEARCH ALL SPQES            */
         LA    SPQECNTR,256                                        0365
@DL00365 DS    0H                                                  0366
*     VCTCBADR = SPQESPTR;          /* SPQE ADDRESS FOR VALIDITY   0366
*                                      CHECK                         */
         ST    SPQESPTR,VCTCBADR(,VCCTREG)                         0366
*     VCTCBIDN = VSPQEID;           /* SPQE CONTROL BLOCK ID         */
         MVI   VCTCBIDN(VCCTREG),X'0B'                             0367
*     SVC(VCKSVC);                  /* CALL AMDSAVCK TO VALIDITY   0368
*                                      CHECK THE SPQE                */
         SVC   25                                                  0368
*     RESPECIFY RETCODE RESTRICTED;                                0369
*     IF RETCODE ^= 0 THEN          /* SPQE VALID                    */
         LTR   RETCODE,RETCODE                                     0370
         BNZ   @RT00370                                            0370
*       GO TO SPQEXIT;              /* YES - EXIT                    */
*       RESPECIFY RETCODE UNRESTRICTED;                            0372
*                                                                  0373
*   /*****************************************************************/
*   /*                                                               */
*   /* SPQE IS VALID. CHECK IF THE SUBPOOL                           */
*   /* SHOULD BE DUMPED.                                             */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0373
*/*%SPQOK: D (YES,%SPQEON,NO,SPQENEXT) SPQEID ON SDL                 */
*     RESPECIFY SDL BASED(SDLPTR);                                 0373
*     SDLPTR = VCTSUBPL + 4 + VCTLPA; /* GET VIRTUAL ADDRESS OF SDL,
*                                      SKIPPING THE ACRONYM          */
         LA    SDLPTR,4                                            0374
         AL    SDLPTR,VCTSUBPL(,VCCTREG)                           0374
         AL    SDLPTR,VCTLPA(,VCCTREG)                             0374
*     SPQESDLI = SDLNUM;            /* GET NUMBER OF ENTRIES ON SDL  */
         SLR   SPQESDLI,SPQESDLI                                   0375
         IC    SPQESDLI,SDLNUM(,SDLPTR)                            0375
*     DO SPQESDLI = SPQESDLI TO 1 BY -1; /* SEARCH THE SDL           */
         B     @DE00376                                            0376
@DL00376 DS    0H                                                  0377
*       IF SPQEID = SDLSPN THEN     /* IS SUBPOOL ON SDL             */
         CLC   SPQEID(1,SPQESPTR),SDLSPN(SDLPTR)                   0377
         BE    @RT00377                                            0377
*         GO TO SPQEON;             /* YES - CONTINUE                */
*       SDLPTR = SDLPTR + LENGTH(SDLSPN); /* POINT TO NEXT ENTRY ON
*                                      SDL                           */
         AH    SDLPTR,@CH00074                                     0379
*     END;                          /* CONTINUE SDL SEARCH           */
         BCTR  SPQESDLI,0                                          0380
@DE00376 LTR   SPQESDLI,SPQESDLI                                   0380
         BP    @DL00376                                            0380
*     GO TO SPQENEXT;               /* SUBPOOL NOT ON SDL            */
         B     SPQENEXT                                            0381
*                                                                  0382
*   /*****************************************************************/
*   /*                                                               */
*   /* SPQE IS ON SDL. IF IT IS OWNED, SEARCH THE DQE CHAIN TO BUILD */
*   /* ARBS FOR THE STORAGE RANGES IN THE SUBPOOL.                   */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0382
*/*%SPQEON: D (NO,,YES,SPQENEXT) SPSHARE BIT ON                      */
*/* N SUBPOOL IS OWNED                                               */
*/* P PLACE SPDQEPTR IN REGISTER 1                                   */
*/* S AMDSADQE: SEARCH DQE CHAIN                                     */
*                                                                  0382
*SPQEON:                                                           0382
*     IF SPSHARE = OFF THEN         /* IS SUBPOOL OWNED BY THIS TASK */
SPQEON   TM    SPSHARE(SPQESPTR),B'10000000'                       0382
         BNZ   @RF00382                                            0382
*       DO;                         /* YES - DUMP SUBPOOL            */
*         RESPECIFY (R1,RETCODE) RESTRICTED;                       0384
*         R1 = SPDQEPTR;            /* GET DQE ADDRESS               */
         L     R1,SPDQEPTR(,SPQESPTR)                              0385
*         CALL AMDSADQE;            /* SEARCH DQE CHAIN              */
         BAL   @14,AMDSADQE                                        0386
*         IF RETCODE ^= 0 THEN      /* ERROR IN DQE SEARCH           */
         LTR   RETCODE,RETCODE                                     0387
         BZ    @RF00387                                            0387
*           SAVEBACK -> SAVER15 = RETCODE; /* INDICATE ERROR         */
         L     @14,SAVEBACK(,R13)                                  0388
         ST    RETCODE,SAVER15(,@14)                               0388
*         RESPECIFY (R1,RETCODE) UNRESTRICTED;                     0389
@RF00387 DS    0H                                                  0390
*       END;                                                       0390
*                                                                  0391
*   /*****************************************************************/
*   /*                                                               */
*   /* CHECK IF END OF SPQE CHAIN HAS BEEN REACHED. IF SO, EXIT. IF  */
*   /* NOT, CONTINUE DOWN THE SPQE CHAIN.                            */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0391
*/*SPQENEXT: P DECREMENT SPQE COUNTER                                */
*/* D (YES,SPQRET,NO,%SPQLP) SPQEAD = 0                              */
*/*%SPQLP: D (NO,,YES,%SPQ18I) SPQE COUNTER = 0                      */
*/* D (NO,,YES,SPQRET) LASTSPQE BIT ON                               */
*/* P (,SPQVLD1) MAKE NEXT SPQE CURRENT                              */
*                                                                  0391
*SPQENEXT:                                                         0391
*     IF SPQEAD = 0  LASTSPQE = ON THEN /* IS THIS THE LAST SPQE    */
@RF00382 DS    0H                                                  0391
SPQENEXT L     @10,SPQEAD(,SPQESPTR)                               0391
         LTR   @10,@10                                             0391
         BZ    @RT00391                                            0391
         TM    LASTSPQE(SPQESPTR),B'01000000'                      0391
         BO    @RT00391                                            0391
*       GO TO SPQRET;               /* YES - DONE                    */
*     SPQESPTR = SPQEAD;            /* GET ADDRESS OF NEXT SPQE      */
         LR    SPQESPTR,@10                                        0393
*   END;                            /* CONTINUE SPQE SEARCH          */
         BCTR  SPQECNTR,0                                          0394
         LTR   SPQECNTR,SPQECNTR                                   0394
         BP    @DL00365                                            0394
*                                                                  0395
*   /*****************************************************************/
*   /*                                                               */
*   /* IF WE ENTER HERE, MORE THAN 256 SPQES EXIST ON THE CHAIN, I.E.*/
*   /* THE LASTSPQE BIT IS ALWAYS OFF AND THE LINK FIELD IS ALWAYS   */
*   /* NON-ZERO. THIS IS A PROBABLE LOOP.                            */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0395
*/*%SPQ18I: P INITIALIZE MESSAGE AMD018I FOR SPQE LOOP               */
*/* N THIS REQUIRES SETTING CBER18I                                  */
*   VCBER18I = LOOPMSG;             /* SET UP FOR LOOP MESSAGE       */
*                                                                  0395
         L     @10,@CA01250                                        0395
         AL    @10,VCTLPA(,VCCTREG)                                0395
         MVC   VCBER18I(7,@10),LOOPMSG                             0395
*   /*****************************************************************/
*   /*                                                               */
*   /* CONVERT CURRENT SPQE ADDRESS TO EBCDIC AND ISSUE MESSAGE      */
*   /* AMD018I.                                                      */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0396
*/* L  AMDSABIN:  CONVERT SPQE ADDRESS TO EBCDIC                     */
*/* P INITIALIZE MESSAGE AMD018I WITH ADDRESS AND NAME               */
*/* N THIS REQUIRES SETTING CBN18I, AND ADDR18I                      */
*/* L (,SPQEXIT)  AMDSACON:  ISSUE MESSAGE AMD018I                   */
*                                                                  0396
*SPQMSG18:                                                         0396
*   ERRORAD = SPQESPTR;             /* SET UP CURRENT SPQE ADDRESS   */
SPQMSG18 ST    SPQESPTR,ERRORAD                                    0396
*   RESPECIFY R1 RESTRICTED;                                       0397
*   R1 = ADDR(MDMBINL);             /* POINT TO CONVERT PARAMETER  0398
*                                      LIST                          */
         LA    R1,MDMBINL                                          0398
*   SVC(BINSVC);                    /* CALL AMDSABIN TO CONVERT ADDR
*                                      TO EBCDIC                     */
         SVC   28                                                  0399
*   VCBN18I = 'SPQE    ';           /* SET UP CONTROL BLOCK NAME     */
         L     @10,@CA01249                                        0400
         AL    @10,VCTLPA(,VCCTREG)                                0400
         MVC   VCBN18I(8,@10),@CC01353                             0400
*   R1 = AMD018I;                   /* REQUEST MESSAGE AMD018I BE  0401
*                                      ISSUED                        */
         LA    R1,18                                               0401
*   SVC(CONSVC);                    /* CALL AMDSACON TO ISSUE MESSAGE*/
*                                                                  0402
         SVC   3                                                   0402
*   /*****************************************************************/
*   /*                                                               */
*   /* SPQE ERROR EXIT - SET UP RETURN CODE OF 4 AND EXIT.           */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0403
*/*SPQEXIT: P (,SPQRET) SET UP RETURN CODE OF 4                      */
*                                                                  0403
*SPQEXIT:                                                          0403
*   SAVEBACK -> SAVER15 = 4;        /* SET UP ERROR RETURN CODE      */
SPQEXIT  L     @10,SAVEBACK(,R13)                                  0403
         MVC   SAVER15(4,@10),@CF00038                             0403
*   RESPECIFY R1 UNRESTRICTED;                                     0404
*                                                                  0405
*   /*****************************************************************/
*   /*                                                               */
*   /* COMMON RETURN PATH - DEQUEUE THE RCB AND RETURN TO CALLER.    */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0405
*/*SPQRET: P DEQUEUE RCB                                             */
*/* P PLACE RETURN CODE IN REGISTER 15                               */
*/* P RESTORE REGISTERS                                              */
*/* R RETURN TO CALLER                                               */
*                                                                  0405
*SPQRET:                                                           0405
*   VCTRCB = RCBNEXT;               /* DEQUEUE RCB                   */
SPQRET   LA    @10,SPQRCB                                          0405
         MVC   VCTRCB(4,VCCTREG),RCBNEXT(@10)                      0405
*   RETURN;                         /* RETURN TO CALLER              */
@EL00002 L     @13,4(,@13)                                         0406
@EF00002 DS    0H                                                  0406
@ER00002 LM    @14,@12,12(@13)                                     0406
         BR    @14                                                 0406
*   END SPQESRCH;                                                  0407
*                                                                  0408
*   /*****************************************************************/
*   /*                                                               */
*   /* DQE SEARCH ROUTINE - THIS ROUTINE SEARCHES THE DQE CHAIN,     */
*   /* CALLING AMDSAARD TO ENQUEUE THE STORAGE RANGES FOR DUMPING.   */
*   /* INPUT IS THE ADDRESS OF THE DQE CHAIN IN REGISTER 1.          */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0408
*                                                                  0408
*AMDSADQE:                                                         0408
*   PROC OPTIONS(SAVEAREA);                                        0408
*                                                                  0408
AMDSADQE STM   @14,@12,12(@13)                                     0408
         ST    @13,@SA00003+4                                      0408
         LA    @14,@SA00003                                        0408
         ST    @14,8(,@13)                                         0408
         LR    @13,@14                                             0408
*   /*****************************************************************/
*   /*                                                               */
*   /* INTERNAL CONSTANTS AND VARIABLES                              */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0409
*   DCL                                                            0409
*         NUMDQE FIXED(31) CONSTANT(1024); /* MAXIMUM NUMBER OF DQES
*                                      THAT WILL BE EXAMINED - THIS
*                                      NUMBER REPRESENTS AT LEAST 8
*                                      MEGABYTES OF STORAGE          */
*   DCL                                                            0410
*         DQERRCNT FIXED(31);       /* DQE ERROR COUNTER             */
*   DCL                                                            0411
*         DQECNTR FIXED(31);        /* DQE LOOP COUNTER              */
*                                                                  0412
*   /*****************************************************************/
*   /*                                                               */
*   /* INITIALIZE COUNTERS                                           */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0412
*/*AMDSADQE: E AMDSADQE                                              */
*/* N SEARCH DQES AND BUILD ARBS                                     */
*/* N DQE ADDRESS IN REGISTER 1                                      */
*/* P OBSERVE STANDARD LINKAGE CONVENTIONS                           */
*/* P SET DQE COUNTER TO 1024                                        */
*/* P SET DQE ERROR COUNT TO 0                                       */
*   RESPECIFY R1 RESTRICTED;                                       0412
*   SAVEFORM(1:4) = 'LSPQ';         /* SET UP MODULE ID              */
         MVC   SAVEFORM(4,R13),@CC01342                            0413
*   DQERRCNT = 0;                   /* RESET DQE ERROR COUNTER       */
         SLR   @10,@10                                             0414
         LR    DQERRCNT,@10                                        0414
*   DQESEPTR = R1;                  /* PICK UP DQE CHAIN ADDR PASSED
*                                      BY CALLER                     */
         LR    DQESEPTR,R1                                         0415
*   IF DQESEPTR = 0 THEN            /* DQE ADDRESS OF 0              */
         CR    DQESEPTR,@10                                        0416
         BE    @RT00416                                            0416
*     GO TO DQERET;                 /* YES - RETURN                  */
*   RESPECIFY R1 UNRESTRICTED;                                     0418
*                                                                  0418
*   /*****************************************************************/
*   /*                                                               */
*   /* SEARCH DQE CHAIN. VALIDITY CHECK EACH DQE. IF INVALID,        */
*   /* INCREMENT THE ERROR COUNT.                                    */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0419
*/*DQEVLD: P SET VCTCBADR TO DQE ADDRESS                             */
*/* P SET VCTCBID TO DQE ID                                          */
*/* L  AMDSAVCK:  VALIDITY CHECK DQE                                 */
*/* D (YES,%DQEOK,NO,%DQERC4) RC  =  0                               */
*   DO DQECNTR = NUMDQE TO 1 BY -1; /* SEARCH DQE CHAIN              */
         LA    DQECNTR,1024                                        0419
@DL00419 DS    0H                                                  0420
*     VCTCBADR = DQESEPTR;          /* DQE ADDRESS FOR VALIDITY CHECK*/
         ST    DQESEPTR,VCTCBADR(,VCCTREG)                         0420
*     VCTCBIDN = VDQEID;            /* DQE CONTROL BLOCK ID          */
         MVI   VCTCBIDN(VCCTREG),X'07'                             0421
*     SVC(VCKSVC);                  /* CALL AMDSAVCK TO VALIDITY   0422
*                                      CHECK THE DQE                 */
         SVC   25                                                  0422
*     RESPECIFY RETCODE RESTRICTED;                                0423
*     IF RETCODE ^= 0 THEN          /* DQE VALID                     */
         LTR   RETCODE,RETCODE                                     0424
         BZ    @RF00424                                            0424
*       DO;                         /* NO -                          */
*         DQERRCNT = 1;             /* IINDICATE DQE ERROR           */
         LA    DQERRCNT,1                                          0426
*         GO TO DQERET;             /* EXIT                          */
         B     DQERET                                              0427
*       END;                                                       0428
*     RESPECIFY RETCODE UNRESTRICTED;                              0429
@RF00424 DS    0H                                                  0430
*                                                                  0430
*   /*****************************************************************/
*   /*                                                               */
*   /* DQE IS VALID. CALL AMDSAARD TO ENQUEUE STORAGE RANGE FOR      */
*   /* DUMPING.                                                      */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0430
*/*%DQEOK: P PLACE DQEBLKAD IN REGISTER 1                            */
*/* P PLACE DQELNTH IN REGISTER 0                                    */
*/* D (YES,,NO,DQENEXT) R0 AND R1 NON-ZERO                           */
*/* L  AMDSAARD:  BUILD ARB FOR ADDRESS RANGE                        */
*     RESPECIFY (R0,R1) RESTRICTED;                                0430
*     R1 = DQEBLKAD;                /* STORAGE ADDRESS FOR DUMPING   */
         L     R1,DQEBLKAD(,DQESEPTR)                              0431
*     R0 = DQELNTH;                 /* STORAGE LENGTH FOR DUMPING    */
         L     R0,DQELNTH(,DQESEPTR)                               0432
*     IF (R1 ^= 0) & (R0 ^= 0) THEN /* ADDRESS AND LENGTH NON-ZERO   */
         SLR   @10,@10                                             0433
         CR    R1,@10                                              0433
         BE    @RF00433                                            0433
         CR    R0,@10                                              0433
         BE    @RF00433                                            0433
*       SVC(ARDSVC);                /* YES-CALL AMDSAARD TO BUILD ARBS
*                                      FOR DUMPING                   */
         SVC   16                                                  0434
*     RESPECIFY (R0,R1) UNRESTRICTED;                              0435
*                                                                  0435
@RF00433 DS    0H                                                  0436
*   /*****************************************************************/
*   /*                                                               */
*   /* CONTINUE DOWN THE DQE CHAIN.                                  */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0436
*/*DQENEXT: P DECREMENT DQE COUNTER                                  */
*/* D (NO,,YES,%DQERC0) DQEPTR = 0                                   */
*/* D (NO,,YES,%DQE18I) DQE COUNTER = 0                              */
*/* P (,DQEVLD) MAKE NEXT DQE CURRENT                                */
*                                                                  0436
*DQENEXT:                                                          0436
*     IF DQEPTR = 0 THEN            /* END OF CHAIN                  */
DQENEXT  L     @10,DQEPTR(,DQESEPTR)                               0436
         LTR   @10,@10                                             0436
         BZ    @RT00436                                            0436
*       GO TO DQERET;               /* YES - RETURN                  */
*     DQESEPTR = DQEPTR;            /* GET NEXT DQE                  */
         LR    DQESEPTR,@10                                        0438
*   END;                            /* CONTINUE DONE DQE CHAIN       */
         BCTR  DQECNTR,0                                           0439
         LTR   DQECNTR,DQECNTR                                     0439
         BP    @DL00419                                            0439
*                                                                  0440
*   /*****************************************************************/
*   /*                                                               */
*   /* IF WE ENTER HERE, THE END OF THE DQE CHAIN WAS NOT REACHED    */
*   /* AFTER INSPECTING 1024 DQES. THIS IS A PROBABLE LOOP.          */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0440
*/*%DQE18I: L  AMDSABIN: CONVERT DQE ADDRESS TO EBCDIC               */
*/* P INITIALIZE MESSAGE AMD018I FOR DQE LOOP                        */
*/* N THIS REQUIRES SETTING CBN18I, CBER18I, AND ADDR18I             */
*/* L  AMDSACON:  ISSUE MESSAGE AMD018I                              */
*   RESPECIFY R1 RESTRICTED;                                       0440
*   ERRORAD = DQESEPTR;             /* SET UP DQE ADDRESS FOR ERROR  */
         ST    DQESEPTR,ERRORAD                                    0441
*   R1 = ADDR(MDMBINL);             /* POINT TO CONVERT PARAMETER  0442
*                                      LIST                          */
         LA    R1,MDMBINL                                          0442
*   SVC(BINSVC);                    /* CALL AMDSABIN TO CONVERT ADDR
*                                      TO EBCDIC                     */
         SVC   28                                                  0443
*   VCBN18I = VCTCBID;              /* CONTROL BLOCK NAME TO MESSAGE */
         L     @10,@CA01249                                        0444
         L     @04,VCTLPA(,VCCTREG)                                0444
         ALR   @10,@04                                             0444
         MVC   VCBN18I(8,@10),VCTCBID(VCCTREG)                     0444
*   VCBER18I = LOOPMSG;             /* LOOP ERROR INDICATOR TO     0445
*                                      MESSAGE                       */
         L     @10,@CA01250                                        0445
         ALR   @10,@04                                             0445
         MVC   VCBER18I(7,@10),LOOPMSG                             0445
*   R1 = AMD018I;                   /* REQUEST MESSAGE AMD018I BE  0446
*                                      ISSUED                        */
         LA    R1,18                                               0446
*   SVC(CONSVC);                    /* CALL AMDSACON TO ISSUE MESSAGE*/
         SVC   3                                                   0447
*   DQERRCNT = 1;                   /* INDICATE ERROR OCCURRED       */
         LA    DQERRCNT,1                                          0448
*   RESPECIFY R1 UNRESTRICTED;                                     0449
*                                                                  0450
*   /*****************************************************************/
*   /*                                                               */
*   /* SET UP RETURN CODE AND RETURN TO CALLER.                      */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0450
*/*%DQERC4: P (,DQERET) SET UP RETURN CODE OF 4                      */
*/*%DQERC0: P SET UP RETURN CODE OF 0                                */
*/*DQERET: P RESTORE REGISTERS AND RETURN CODE                       */
*/* R RETURN TO CALLER                                               */
*                                                                  0450
*DQERET:                                                           0450
*   RESPECIFY RETCODE RESTRICTED;                                  0450
DQERET   DS    0H                                                  0451
*   RETCODE = 0;                    /* SET UP RETURN CODE 0          */
         SLR   @10,@10                                             0451
         LR    RETCODE,@10                                         0451
*   IF DQERRCNT ^= 0 THEN           /* DID ANY ERRORS OCCUR          */
         CR    DQERRCNT,@10                                        0452
         BE    @RF00452                                            0452
*     RETCODE = 4;                  /* YES - SET ERROR RETURN CODE   */
         LA    RETCODE,4                                           0453
*   RETURN CODE(RETCODE);           /* RETURN TO CALLER              */
@RF00452 L     @13,4(,@13)                                         0454
         L     @14,12(,@13)                                        0454
         LM    @00,@12,20(@13)                                     0454
         BR    @14                                                 0454
*   RESPECIFY RETCODE UNRESTRICTED;                                0455
*   END AMDSADQE;                                                  0456
*   END AMDSAMDM                                                   0457
*/* THE FOLLOWING INCLUDE STATEMENTS WERE FOUND IN THIS PROGRAM.      *
*/*%INCLUDE SYSLIB  (IHAASCB )                                        *
*/*%INCLUDE SYSLIB  (IHAASXB )                                        *
*/*%INCLUDE SYSLIB  (IHADQE  )                                        *
*/*%INCLUDE SYSLIB  (IHALDA  )                                        *
*/*%INCLUDE SYSLIB  (IHASPQE )                                        *
*/*%INCLUDE SYSLIB  (IKJTCB  )                                        *
*/*%INCLUDE SYSLIB  (AMDSARMK)                                        *
*;                                                                 0457
@DATA    DS    0H
@CH00074 DC    H'1'
         DS    0F
@SA00001 DS    18F
@SA00002 DS    18F
@SA00003 DS    18F
         DS    0F
@CF00038 DC    F'4'
@CA01229 DC    A(LNG22I)
@CA01235 DC    A(DMP22I)
@CA01249 DC    A(CBN18I)
@CA01250 DC    A(CBER18I)
@CA01251 DC    A(ADDR18I)
         DS    0D
ERRORAD  DC    A(0)
I        DS    F
@CC01319 DC    C'TCB     '
@CC01353 DC    C'SPQE    '
@CC01305 DC    C'LMDM'
@CC01326 DC    C'LMDS'
@CC01342 DC    C'LSPQ'
MDMRCB   DS    CL20
         ORG   MDMRCB
@NM00036 DS    AL4
MDMSTOR  DS    AL4
@NM00037 DS    AL4
@NM00038 DS    AL4
@NM00039 DS    AL4
         ORG   MDMRCB+20
LCLSUBPL DC    CL14'LOCAL SUBPOOLS'
TCBMG    DS    CL15
         ORG   TCBMG
@NM00042 DC    CL9' FOR TCB='
TCBADDR  DC    CL6' '
         ORG   TCBMG+15
LCLMEMRY DC    CL12'LOCAL MEMORY'
CHARSWA  DC    CL3'SWA'
CHARLSQA DC    CL4'LSQA'
LOOPMSG  DC    CL7'LOOP IN'
MDMSWTCH DC    X'00'
         ORG   MDMSWTCH
MDMBKDSR DS    BL1
         ORG   MDMSWTCH+1
MDMBINL  DS    CL10
         ORG   MDMBINL
MDMBINA  DS    AL4
MDMEBCA  DS    AL4
MDMBLEN  DC    AL2(4-1)
         ORG   MDMBINL+10
         DS    CL2
SDLH     DS    CL20
         ORG   SDLH
@NM00043 DC    CL4'SDL '
SDLHCNT  DC    AL1(8)
@NM00044 DC    AL1(229)
@NM00045 DC    AL1(230)
@NM00046 DC    AL1(231)
@NM00047 DC    AL1(236)
@NM00048 DC    AL1(237)
@NM00049 DC    AL1(239)
@NM00050 DC    AL1(241)
@NM00051 DC    AL1(255)
@NM00052 DC    AL1(0)
@NM00053 DC    AL1(0)
@NM00054 DC    AL1(0)
@NM00055 DC    AL1(0)
@NM00056 DC    AL1(0)
@NM00057 DC    AL1(0)
@NM00058 DC    AL1(0)
         ORG   SDLH+20
SPQRCB   DS    CL20
         ORG   SPQRCB
@NM00059 DS    AL4
SPQSTOR  DS    AL4
@NM00060 DS    AL4
@NM00061 DS    AL4
@NM00062 DS    AL4
         ORG   SPQRCB+20
MDMPATCH DC    25F'0'
@00      EQU   00                      EQUATES FOR REGISTERS 0-15
@01      EQU   01
@02      EQU   02
@03      EQU   03
@04      EQU   04
@05      EQU   05
@06      EQU   06
@07      EQU   07
@08      EQU   08
@09      EQU   09
@10      EQU   10
@11      EQU   11
@12      EQU   12
@13      EQU   13
@14      EQU   14
@15      EQU   15
DQECNTR  EQU   @06
DQERRCNT EQU   @05
SDLPTR   EQU   @02
SPQESDLI EQU   @03
SPQECNTR EQU   @06
MDMTCBCT EQU   @06
LASTTCB  EQU   @07
MDMBUFTP EQU   @08
TCBPTR   EQU   @05
SPQESPTR EQU   @05
DQESEPTR EQU   @03
VCCTREG  EQU   @12
RETCODE  EQU   @15
BASEREG  EQU   @11
R0       EQU   @00
R1       EQU   @01
R13      EQU   @13
RETREG   EQU   @14
R10      EQU   @10
R11      EQU   @11
R12      EQU   @12
R14      EQU   @14
R15      EQU   @15
R2       EQU   @02
R3       EQU   @03
R4       EQU   @04
R5       EQU   @05
R6       EQU   @06
R7       EQU   @07
R8       EQU   @08
R9       EQU   @09
         ENTRY SDLH
         EXTRN LNG22I
         EXTRN DMP22I
         EXTRN CBN18I
         EXTRN CBER18I
         EXTRN ADDR18I
SADMPLSD EQU   3312
ASCB     EQU   0
ASCBLDA  EQU   ASCB+48
ASCBFW1  EQU   ASCB+100
ASCBRCTF EQU   ASCBFW1+2
ASCBFLG1 EQU   ASCBFW1+3
ASCBASXB EQU   ASCB+108
ASCBDSP1 EQU   ASCB+114
ASCBFLG2 EQU   ASCB+115
ASCBPTR  EQU   0
ASXB     EQU   0
ASXBFTCB EQU   ASXB+4
ASXBLTCB EQU   ASXB+8
ASXBTCBS EQU   ASXB+12
ASXBAEQ  EQU   ASXB+168
ASXBPTR  EQU   0
DQESECT  EQU   0
DQEPTR   EQU   DQESECT+4
DQEBLKAD EQU   DQESECT+8
DQELNTH  EQU   DQESECT+12
LDA      EQU   0
LVSMFLAG EQU   LDA
LSQAPTR  EQU   LDA+1464
LDAPTR   EQU   0
SPQESECT EQU   0
SPQEAD   EQU   SPQESECT
SPDQEPTR EQU   SPQESECT+4
SPQEFLGS EQU   SPQESECT+8
SPSHARE  EQU   SPQEFLGS
LASTSPQE EQU   SPQEFLGS
SPQEID   EQU   SPQESECT+10
TCBFIX   EQU   0
TCBFRS   EQU   TCBFIX
TCB      EQU   0
TCBPIE   EQU   TCB+4
TCBPMASK EQU   TCBPIE
TCBCMP   EQU   TCB+16
TCBCMPF  EQU   TCBCMP
TCBCPP   EQU   TCBCMPF
TCBSTCC  EQU   TCBCMPF
TCBCDBL  EQU   TCBCMPF
TCBCWTO  EQU   TCBCMPF
TCBCIND  EQU   TCBCMPF
TCBCMSG  EQU   TCBCMPF
TCBTRN   EQU   TCB+20
TCBABF   EQU   TCBTRN
TCBMSS   EQU   TCB+24
TCBPKF   EQU   TCB+28
TCBFLGS  EQU   TCB+29
TCBFLGS1 EQU   TCBFLGS
TCBFLGS2 EQU   TCBFLGS+1
TCBFLGS3 EQU   TCBFLGS+2
TCBFLGS4 EQU   TCBFLGS+3
TCBFLGS5 EQU   TCBFLGS+4
TCBABWF  EQU   TCBFLGS5
TCBJPQ   EQU   TCB+44
TCBPURGE EQU   TCBJPQ
TCBGRS   EQU   TCB+48
TCBFSA   EQU   TCB+112
TCBTCB   EQU   TCB+116
TCBTME   EQU   TCB+120
TCBJSTCB EQU   TCB+124
TCBTSFLG EQU   TCB+148
TCBTSTSK EQU   TCBTSFLG
TCBSTAB  EQU   TCB+160
TCBNSTAE EQU   TCBSTAB
TCBTCT   EQU   TCB+164
TCBTCTGF EQU   TCBTCT
TCBSCNDY EQU   TCB+172
TCBNDSP  EQU   TCBSCNDY
TCBNDSP1 EQU   TCBNDSP+1
TCBNDSP2 EQU   TCBNDSP+2
TCBNDSP3 EQU   TCBNDSP+3
TCBJSCB  EQU   TCB+180
TCBRECDE EQU   TCBJSCB
TCBEXT1  EQU   TCB+196
TCBBITS  EQU   TCB+200
TCBNDSP4 EQU   TCBBITS
TCBNDSP5 EQU   TCBBITS+1
TCBFLGS6 EQU   TCBBITS+2
TCBFLGS7 EQU   TCBBITS+3
TCBDAR   EQU   TCB+204
TCBDARC  EQU   TCBDAR
TCBEXT2  EQU   TCB+208
TCBBACK  EQU   TCB+220
TCBFOE   EQU   TCB+244
TCBSWA   EQU   TCB+248
TCBESTAE EQU   TCB+264
TCBESTRM EQU   TCBESTAE+1
TCBUKYSP EQU   TCB+268
TCBFBYT1 EQU   TCB+276
TCBFBYT2 EQU   TCB+277
TCBRV124 EQU   TCB+278
TCBRV133 EQU   TCB+279
TCBXTNT2 EQU   0
TCBGTF   EQU   TCBXTNT2
TCBTFLG  EQU   TCBGTF
TCBRV146 EQU   TCBXTNT2+28
TCBRV155 EQU   TCBXTNT2+29
TCBRV164 EQU   TCBXTNT2+30
TCBRV173 EQU   TCBXTNT2+31
ARB      EQU   0
BCTH     EQU   0
BCT      EQU   0
BCTLPID  EQU   BCT+28
BCTFLGT  EQU   BCT+44
BCTFLGI  EQU   BCT+45
CCT      EQU   0
CTFLG1   EQU   CCT+1
CTFLG2   EQU   CCT+2
CTLOWFLG EQU   CCT+48
CTDMPTYP EQU   CCT+52
CTIOTYPE EQU   CTDMPTYP
CTCONFLG EQU   CTDMPTYP+2
CTBUFTYP EQU   CTDMPTYP+3
CTLSQA   EQU   CTBUFTYP
CTPRMT1  EQU   CTDMPTYP+24
CTPRMT2  EQU   CTDMPTYP+26
CCW      EQU   0
CCWFLAGS EQU   CCW+4
CSW      EQU   0
CSWKEY00 EQU   CSW
CSWUSTAT EQU   CSW+4
CSWCSTAT EQU   CSW+5
DSCE     EQU   0
IODB     EQU   0
IODBFLAG EQU   IODB+8
IODBCCHH EQU   IODB+32
IODBSRCH EQU   IODBCCHH+3
MDCE     EQU   0
MDCB     EQU   0
MDCBGRS  EQU   MDCB+16
MDCBFLGS EQU   MDCB+86
PSW      EQU   0
PSWSM    EQU   PSW
@NM00028 EQU   PSW+1
PSWCCPM  EQU   PSW+2
@NM00031 EQU   PSW+3
PTRT     EQU   0
PTRTRSA  EQU   0
RCB      EQU   0
RCBNEXT  EQU   RCB
RCBSAVE  EQU   RCB+8
RCBEXIT  EQU   RCB+12
RCBBASE  EQU   RCB+16
VCCT     EQU   0
VCTRCB   EQU   VCCT+4
VCTRECSN EQU   VCCT+8
VCTFLGS  EQU   VCCT+9
VCTMEMIN EQU   VCTFLGS
VCTMDCE  EQU   VCCT+12
VCTDSCE  EQU   VCCT+20
VCTBCTH  EQU   VCCT+24
VCTSUBPL EQU   VCCT+40
VCTASCB  EQU   VCCT+48
VCTCBID  EQU   VCCT+64
VCTCBIDN EQU   VCTCBID+7
VCTCBADR EQU   VCCT+80
VCTLPA   EQU   VCCT+84
VCTCCTV  EQU   VCCT+104
SDL      EQU   0
SDLNUM   EQU   SDL
SDLSPN   EQU   SDL+1
REGLOCAL EQU   0
SAVEFORM EQU   0
SAVEBACK EQU   SAVEFORM+4
SAVER15  EQU   SAVEFORM+16
DUMMYLNG EQU   0
VLNG22I  EQU   0
VDMP22I  EQU   0
VCBN18I  EQU   0
VCBER18I EQU   0
PTRTVSA  EQU   0
CTLOWDMP EQU   CTDMPTYP
         AGO   .@UNREFD                START UNREFERENCED COMPONENTS
CTADDRE  EQU   CTLOWDMP+4
CTADDRS  EQU   CTLOWDMP
@NM00041 EQU   DUMMYLNG+14
@NM00040 EQU   DUMMYLNG
SAVER12  EQU   SAVEFORM+68
SAVER11  EQU   SAVEFORM+64
SAVER10  EQU   SAVEFORM+60
SAVER9   EQU   SAVEFORM+56
SAVER8   EQU   SAVEFORM+52
SAVER7   EQU   SAVEFORM+48
SAVER6   EQU   SAVEFORM+44
SAVER5   EQU   SAVEFORM+40
SAVER4   EQU   SAVEFORM+36
SAVER3   EQU   SAVEFORM+32
SAVER2   EQU   SAVEFORM+28
SAVER1   EQU   SAVEFORM+24
SAVER0   EQU   SAVEFORM+20
SAVER14  EQU   SAVEFORM+12
SAVENEXT EQU   SAVEFORM+8
SAVENAME EQU   SAVEFORM+1
SAVEID   EQU   SAVEFORM
REGL15   EQU   REGLOCAL+60
REGL14   EQU   REGLOCAL+56
REGL13   EQU   REGLOCAL+52
REGL12   EQU   REGLOCAL+48
REGL11   EQU   REGLOCAL+44
REGL10   EQU   REGLOCAL+40
REGL9    EQU   REGLOCAL+36
REGL8    EQU   REGLOCAL+32
REGL7    EQU   REGLOCAL+28
REGL6    EQU   REGLOCAL+24
REGL5    EQU   REGLOCAL+20
REGL4    EQU   REGLOCAL+16
REGL3    EQU   REGLOCAL+12
REGL2    EQU   REGLOCAL+8
REGL1    EQU   REGLOCAL+4
REGL0    EQU   REGLOCAL
VCTVCCTV EQU   VCCT+108
@NM00035 EQU   VCCT+102
VCTEXTRA EQU   VCCT+100
VCTCPOUT EQU   VCCT+96
VCTSVCTB EQU   VCCT+92
VCTPGT   EQU   VCCT+88
VCTJBNME EQU   VCCT+72
@NM00034 EQU   VCTCBID
VCTAUDIT EQU   VCCT+62
VCTASID  EQU   VCCT+60
VCTPTRT  EQU   VCCT+56
VCTMASCB EQU   VCCT+52
VCTCPUC  EQU   VCCT+46
VCTWKC   EQU   VCCT+45
VCTWKHI  EQU   VCCT+44
VCTARB   EQU   VCCT+36
VCTIODB  EQU   VCCT+32
VCTBCTC  EQU   VCCT+28
VCTSTOR  EQU   VCCT+16
VCTRECVA EQU   VCCT+10
@NM00033 EQU   VCTFLGS
VCTNOI22 EQU   VCTFLGS
VCTLRCLM EQU   VCTFLGS
VCTARCLM EQU   VCTFLGS
VCTASMIC EQU   VCTFLGS
VCTSADMP EQU   VCTFLGS
@NM00032 EQU   VCTRECSN
VCTRSMR  EQU   VCTRECSN
VCTEXIR  EQU   VCTRECSN
VCTUPDR  EQU   VCTRECSN
VCTPGIR  EQU   VCTRECSN
VCTVCT   EQU   VCCT
RCBSTOR  EQU   RCB+4
PTRTVS   EQU   PTRT+1032
PTRTRS   EQU   PTRT+8
PTRTLGID EQU   PTRT+4
PTRTPTRT EQU   PTRT
PSWEND   EQU   PSW+8
PSWIA    EQU   PSW+4
PSWSP    EQU   @NM00031
PSWSIG   EQU   PSWCCPM
PSWEU    EQU   PSWCCPM
PSWDO    EQU   PSWCCPM
PSWFPO   EQU   PSWCCPM
@NM00030 EQU   PSWCCPM
@NM00029 EQU   PSWCCPM
PSWPRBLM EQU   @NM00028
PSWAIT   EQU   @NM00028
PSWMCH   EQU   @NM00028
PSWMODE  EQU   @NM00028
PSWKEY   EQU   @NM00028
PSWXTRNL EQU   PSWSM
PSWIO    EQU   PSWSM
PSWDAT   EQU   PSWSM
@NM00027 EQU   PSWSM
@NM00026 EQU   PSWSM
@NM00025 EQU   PSWSM
PSWPER   EQU   PSWSM
@NM00024 EQU   PSWSM
@NM00023 EQU   MDCB+87
@NM00022 EQU   MDCBFLGS
MDCBDUMP EQU   MDCBFLGS
MDCBASMI EQU   MDCBFLGS
MDCBPI   EQU   MDCB+84
MDCBSTOR EQU   MDCB+80
MDCBGR15 EQU   MDCBGRS+60
MDCBGR14 EQU   MDCBGRS+56
MDCBGR13 EQU   MDCBGRS+52
MDCBGR12 EQU   MDCBGRS+48
MDCBGR11 EQU   MDCBGRS+44
MDCBGR10 EQU   MDCBGRS+40
MDCBGR9  EQU   MDCBGRS+36
MDCBGR8  EQU   MDCBGRS+32
MDCBGR7  EQU   MDCBGRS+28
MDCBGR6  EQU   MDCBGRS+24
MDCBGR5  EQU   MDCBGRS+20
MDCBGR4  EQU   MDCBGRS+16
MDCBGR3  EQU   MDCBGRS+12
MDCBGR2  EQU   MDCBGRS+8
MDCBGR1  EQU   MDCBGRS+4
MDCBGR0  EQU   MDCBGRS
MDCBPSW  EQU   MDCB+8
MDCBNEXT EQU   MDCB+4
MDCBMDCB EQU   MDCB
MDCEAVIL EQU   MDCE+8
MDCEACTV EQU   MDCE+4
MDCEMDCE EQU   MDCE
IODBSENS EQU   IODB+40
IODBR    EQU   IODBCCHH+7
IODBHH   EQU   IODBSRCH+2
IODBCC   EQU   IODBSRCH
IODBSEEK EQU   IODBCCHH+1
IODBM    EQU   IODBCCHH
IODBCSW  EQU   IODB+24
IODBCAW  EQU   IODB+20
IODBBCT  EQU   IODB+16
IODBCPU  EQU   IODB+14
IODBTYPE EQU   IODB+13
IODBCLAS EQU   IODB+12
IODBDEV  EQU   IODB+10
@NM00021 EQU   IODBFLAG+1
IODBSTRT EQU   IODBFLAG
IODBCONW EQU   IODBFLAG
IODBACTV EQU   IODBFLAG
IODBHALT EQU   IODBFLAG
IODBIOC  EQU   IODBFLAG
IODBINT  EQU   IODBFLAG
IODBPTRM EQU   IODBFLAG
IODBTERM EQU   IODBFLAG
IODBIDEN EQU   IODB+4
IODBIODB EQU   IODB
DSCETEND EQU   DSCE+20
DSCETCUR EQU   DSCE+16
DSCETBEG EQU   DSCE+12
DSCENEXT EQU   DSCE+8
DSCEBEGN EQU   DSCE+4
DSCEDSCE EQU   DSCE
CSWCNT   EQU   CSW+6
CSWCHC   EQU   CSWCSTAT
CSWICC   EQU   CSWCSTAT
CSWCCC   EQU   CSWCSTAT
CSWCDC   EQU   CSWCSTAT
CSWPTC   EQU   CSWCSTAT
CSWPGC   EQU   CSWCSTAT
CSWIL    EQU   CSWCSTAT
CSWPCI   EQU   CSWCSTAT
CSWUE    EQU   CSWUSTAT
CSWUC    EQU   CSWUSTAT
CSWDE    EQU   CSWUSTAT
CSWCE    EQU   CSWUSTAT
CSWBUSY  EQU   CSWUSTAT
CSWCUE   EQU   CSWUSTAT
CSWSTMOD EQU   CSWUSTAT
CSWATTN  EQU   CSWUSTAT
CSWCADDR EQU   CSW+1
@NM00020 EQU   CSWKEY00
CSWKEY   EQU   CSWKEY00
CCWCNT   EQU   CCW+6
@NM00019 EQU   CCW+5
@NM00018 EQU   CCWFLAGS
CCWIDA   EQU   CCWFLAGS
CCWPCI   EQU   CCWFLAGS
CCWSKIP  EQU   CCWFLAGS
CCWSLI   EQU   CCWFLAGS
CCWCC    EQU   CCWFLAGS
CCWDC    EQU   CCWFLAGS
CCWDADDR EQU   CCW+1
CCWCMD   EQU   CCW
CTHWMAX  EQU   CTDMPTYP+29
CTHWM    EQU   CTDMPTYP+28
CTPRMT2X EQU   CTPRMT2+1
CTPRMT2Y EQU   CTPRMT2
CTPRMT1X EQU   CTPRMT1+1
CTPRMT1Y EQU   CTPRMT1
CTVCCT   EQU   CTDMPTYP+20
CTEOR    EQU   CTDMPTYP+16
CTCOMMIO EQU   CTDMPTYP+12
CTLWKAD  EQU   CTDMPTYP+8
CTCONSOL EQU   CTDMPTYP+4
@NM00017 EQU   CTBUFTYP
CTDUMP   EQU   CTBUFTYP
CTASM    EQU   CTBUFTYP
CTPGT    EQU   CTBUFTYP
CTWKFLE  EQU   CTBUFTYP
@NM00016 EQU   CTBUFTYP
@NM00015 EQU   CTCONFLG
CTREAD   EQU   CTCONFLG
CTMSGOUT EQU   CTCONFLG
@NM00014 EQU   CTDMPTYP+1
@NM00013 EQU   CTIOTYPE
CTIORSET EQU   CTIOTYPE
CTIOINT  EQU   CTIOTYPE
CTIOCON  EQU   CTIOTYPE
CTIOWK   EQU   CTIOTYPE
CTIODA   EQU   CTIOTYPE
CTIOOUT  EQU   CTIOTYPE
CTIOTERM EQU   CTIOTYPE
CTEBCOPR EQU   CCT+49
@NM00012 EQU   CTLOWFLG
CTWKSTUS EQU   CTLOWFLG
CTINIT   EQU   CTLOWFLG
CTFP     EQU   CTLOWFLG
CTVIRTD  EQU   CTLOWFLG
CTEBCOPD EQU   CCT+45
CTCONTYP EQU   CCT+44
CTOUTAD  EQU   CCT+42
CTCPUI   EQU   CCT+40
CTERBCON EQU   CCT+36
CTERBTPE EQU   CCT+32
CTERBDA  EQU   CCT+28
CTCCHHW  EQU   CCT+24
CTCCHHE  EQU   CCT+20
CTCCHHS  EQU   CCT+16
CTPGECNT EQU   CCT+15
CTCCHHR  EQU   CCT+8
CTINADDR EQU   CCT+6
CTSENSE  EQU   CCT+4
CTDEVTYP EQU   CCT+3
@NM00011 EQU   CTFLG2
CTALTCON EQU   CTFLG2
CTWKDONE EQU   CTFLG2
CTVIRTR  EQU   CTFLG2
CTNOSTAT EQU   CTFLG2
CTPGEFLT EQU   CTFLG2
CTSTOR   EQU   CTFLG2
CTDUPSW  EQU   CTFLG2
CTERREC  EQU   CTFLG1
CTMP     EQU   CTFLG1
@NM00010 EQU   CTFLG1
CTDEFO   EQU   CTFLG1
CTWORK   EQU   CTFLG1
CTMORTPE EQU   CTFLG1
CTDEVICE EQU   CTFLG1
CTERROR  EQU   CTFLG1
CTWAIT   EQU   CCT
@NM00009 EQU   BCT+46
BCTRECLM EQU   BCTFLGI
BCTIOERR EQU   BCTFLGI
BCTALLOC EQU   BCTFLGI
BCTCOMP  EQU   BCTFLGI
@NM00008 EQU   BCTFLGT
BCTPGTF  EQU   BCTFLGT
BCTDUMP  EQU   BCTFLGT
BCTLSQA  EQU   BCTFLGT
BCTASM   EQU   BCTFLGT
BCTPGT   EQU   BCTFLGT
BCTWKFLE EQU   BCTFLGT
@NM00007 EQU   BCTFLGT
BCTRBA   EQU   BCT+40
BCTAMB   EQU   BCT+36
@NM00006 EQU   BCTLPID+4
BCTLGN   EQU   BCTLPID
BCTMDCB  EQU   BCT+24
BCTPGTE  EQU   BCT+20
BCTRADDR EQU   BCT+16
BCTVADDR EQU   BCT+12
BCTASID  EQU   BCT+10
BCTKEY2  EQU   BCT+9
BCTKEY1  EQU   BCT+8
BCTNEXT  EQU   BCT+4
BCTBCT   EQU   BCT
BCTHLAST EQU   BCTH+8
BCTHFRST EQU   BCTH+4
BCTHBCTH EQU   BCTH
ARBADDRE EQU   ARB+4
ARBADDRB EQU   ARB
@NM00005 EQU   TCBXTNT2+32
TCBRV181 EQU   TCBRV173
TCBRV180 EQU   TCBRV173
TCBRV179 EQU   TCBRV173
TCBRV178 EQU   TCBRV173
TCBRV177 EQU   TCBRV173
TCBRV176 EQU   TCBRV173
TCBRV175 EQU   TCBRV173
TCBRV174 EQU   TCBRV173
TCBRV172 EQU   TCBRV164
TCBRV171 EQU   TCBRV164
TCBRV170 EQU   TCBRV164
TCBRV169 EQU   TCBRV164
TCBRV168 EQU   TCBRV164
TCBRV167 EQU   TCBRV164
TCBRV166 EQU   TCBRV164
TCBRV165 EQU   TCBRV164
TCBRV163 EQU   TCBRV155
TCBRV162 EQU   TCBRV155
TCBRV161 EQU   TCBRV155
TCBRV160 EQU   TCBRV155
TCBRV159 EQU   TCBRV155
TCBRV158 EQU   TCBRV155
TCBRV157 EQU   TCBRV155
TCBRV156 EQU   TCBRV155
TCBRV154 EQU   TCBRV146
TCBRV153 EQU   TCBRV146
TCBRV152 EQU   TCBRV146
TCBRV151 EQU   TCBRV146
TCBRV150 EQU   TCBRV146
TCBRV149 EQU   TCBRV146
TCBRV148 EQU   TCBRV146
TCBRV147 EQU   TCBRV146
TCBRV145 EQU   TCBXTNT2+26
TCBRV144 EQU   TCBXTNT2+24
TCBRV143 EQU   TCBXTNT2+20
TCBRV142 EQU   TCBXTNT2+16
TCBRSV49 EQU   TCBXTNT2+12
TCBEVENT EQU   TCBXTNT2+8
TCBRCMP  EQU   TCBXTNT2+5
TCBRSVAB EQU   TCBXTNT2+4
TCBGTFA  EQU   TCBGTF+1
TCBRSV47 EQU   TCBTFLG
TCBRSV46 EQU   TCBTFLG
TCBRSV45 EQU   TCBTFLG
TCBRSV44 EQU   TCBTFLG
TCBRSV43 EQU   TCBTFLG
TCBDSPIT EQU   TCBTFLG
TCBERRTN EQU   TCBTFLG
TCBASYNC EQU   TCBTFLG
@NM00004 EQU   TCB+296
TCBRV185 EQU   TCB+292
TCBSWASA EQU   TCB+288
TCBDBTB  EQU   TCB+284
TCBRPT   EQU   TCB+280
TCBRV141 EQU   TCBRV133
TCBRV140 EQU   TCBRV133
TCBRV139 EQU   TCBRV133
TCBRV138 EQU   TCBRV133
TCBRV137 EQU   TCBRV133
TCBRV136 EQU   TCBRV133
TCBRV135 EQU   TCBRV133
TCBRV134 EQU   TCBRV133
TCBRV132 EQU   TCBRV124
TCBRV131 EQU   TCBRV124
TCBRV130 EQU   TCBRV124
TCBRV129 EQU   TCBRV124
TCBRV128 EQU   TCBRV124
TCBRV127 EQU   TCBRV124
TCBRV126 EQU   TCBRV124
TCBRV125 EQU   TCBRV124
TCBRV123 EQU   TCBFBYT2
TCBRV122 EQU   TCBFBYT2
TCBECBNV EQU   TCBFBYT2
TCBSSSYN EQU   TCBFBYT2
TCBFPRAP EQU   TCBFBYT2
TCBFDW   EQU   TCBFBYT2
TCBFMW   EQU   TCBFBYT2
TCBCNCB  EQU   TCBFBYT2
TCBLLH   EQU   TCBFBYT1
TCBRV113 EQU   TCBFBYT1
TCBEOT   EQU   TCBFBYT1
TCBRTM2  EQU   TCBFBYT1
TCBPGNLY EQU   TCBFBYT1
TCBNDIOS EQU   TCBFBYT1
TCBACTIV EQU   TCBFBYT1
TCBEOTFM EQU   TCBFBYT1
TCBAFFN  EQU   TCB+274
TCBCCPVI EQU   TCB+272
TCBMODE  EQU   TCBESTAE+3
TCBERTYP EQU   TCBESTAE+2
TCBRV314 EQU   TCBESTRM
TCBRV313 EQU   TCBESTRM
TCBRV312 EQU   TCBESTRM
TCBRV311 EQU   TCBESTRM
TCBRV310 EQU   TCBESTRM
TCBRV309 EQU   TCBESTRM
TCBRV308 EQU   TCBESTRM
TCBETERM EQU   TCBESTRM
TCBSCBKY EQU   TCBESTAE
TCBRTM12 EQU   TCB+260
TCBTCBID EQU   TCB+256
TCBRSV96 EQU   TCB+252
TCBFOEA  EQU   TCBFOE+1
TCBRSV42 EQU   TCBFOE
TCBRV306 EQU   TCB+240
TCBRSV41 EQU   TCB+239
TCBTID   EQU   TCB+238
TCBRSVAA EQU   TCB+237
TCBABCUR EQU   TCB+236
TCBTMSAV EQU   TCB+232
TCBIOTIM EQU   TCB+228
TCBRTWA  EQU   TCB+224
TCBTIRB  EQU   TCB+216
TCBAECB  EQU   TCB+212
TCBEXT2A EQU   TCBEXT2+1
TCBRSV39 EQU   TCBEXT2
TCBSTMCT EQU   TCB+207
TCBSYSCT EQU   TCB+206
TCBRSV37 EQU   TCB+205
TCBEXSVC EQU   TCBDAR
TCBRSV36 EQU   TCBDAR
TCBDARWT EQU   TCBDAR
TCBDARO  EQU   TCBDAR
TCBDARMC EQU   TCBDARC
TCBDARD  EQU   TCBDAR
TCBDARS  EQU   TCBDAR
TCBDARP  EQU   TCBDAR
TCBGTOFM EQU   TCBFLGS7
TCBADMP  EQU   TCBFLGS7
TCBRSTSK EQU   TCBFLGS7
TCBRSV35 EQU   TCBFLGS7
TCBSTACK EQU   TCBFLGS7
TCBRSV34 EQU   TCBFLGS7
TCBRSV33 EQU   TCBFLGS7
TCBGPECB EQU   TCBFLGS7
TCBNTJS  EQU   TCBFLGS6
TCBAPG   EQU   TCBFLGS6
TCBMIGR  EQU   TCBFLGS6
TCBRV303 EQU   TCBFLGS6
TCBSPVLK EQU   TCBFLGS6
TCBCPU   EQU   TCBFLGS6
TCBPIE17 EQU   TCBFLGS6
TCBRV    EQU   TCBFLGS6
TCBRSV79 EQU   TCBNDSP5
TCBRSV78 EQU   TCBNDSP5
TCBRSV77 EQU   TCBNDSP5
TCBRSV76 EQU   TCBNDSP5
TCBRSV75 EQU   TCBNDSP5
TCBRSV74 EQU   TCBNDSP5
TCBRSV95 EQU   TCBNDSP5
TCBRSV94 EQU   TCBNDSP5
TCBRSV93 EQU   TCBNDSP4
TCBRSV92 EQU   TCBNDSP4
TCBRSV91 EQU   TCBNDSP4
TCBRSV90 EQU   TCBNDSP4
TCBRSV89 EQU   TCBNDSP4
TCBRSV88 EQU   TCBNDSP4
TCBRSV87 EQU   TCBNDSP4
TCBRSV86 EQU   TCBNDSP4
TCBEXT1A EQU   TCBEXT1+1
TCBRSV32 EQU   TCBEXT1
TCBEXCPD EQU   TCB+192
TCBIOBRC EQU   TCB+188
TCBDDWTC EQU   TCB+186
TCBDDEXC EQU   TCB+184
TCBJSCBB EQU   TCBJSCB+1
@NM00003 EQU   TCBRECDE
TCBREC   EQU   TCBRECDE
TCBMDIDS EQU   TCB+176
TCBNDINT EQU   TCBNDSP3
TCBRSV27 EQU   TCBNDSP3
TCBRSV26 EQU   TCBNDSP3
TCBRSV25 EQU   TCBNDSP3
TCBRSV24 EQU   TCBNDSP3
TCBSRBND EQU   TCBNDSP3
TCBRV302 EQU   TCBNDSP3
TCBLJSND EQU   TCBNDSP3
TCBABE   EQU   TCBNDSP2
TCBDSS   EQU   TCBNDSP2
TCBOWAIT EQU   TCBNDSP2
TCBIWAIT EQU   TCBNDSP2
TCBNDTS  EQU   TCBNDSP2
TCBNDSVC EQU   TCBNDSP2
TCBSTPP  EQU   TCBNDSP2
TCBABD   EQU   TCBNDSP2
TCBRSV22 EQU   TCBNDSP1
TCBPIEND EQU   TCBNDSP1
TCBTPSP  EQU   TCBNDSP1
TCBDDRND EQU   TCBNDSP1
TCBRSPND EQU   TCBNDSP1
TCBRSTND EQU   TCBNDSP1
TCBDARPN EQU   TCBNDSP1
TCBDARTN EQU   TCBNDSP1
TCBNDSP0 EQU   TCBNDSP
TCBUSER  EQU   TCB+168
TCBTCTB  EQU   TCBTCT+1
TCBRSV9C EQU   TCBTCTGF
TCBRSV9B EQU   TCBTCTGF
TCBRSV9A EQU   TCBTCTGF
TCBRSV99 EQU   TCBTCTGF
TCBRSV98 EQU   TCBTCTGF
TCBRSV97 EQU   TCBTCTGF
TCBRSV20 EQU   TCBTCTGF
TCBSMFGF EQU   TCBTCTGF
TCBSTABB EQU   TCBSTAB+1
TCBSTCUR EQU   TCBNSTAE
TCBRV301 EQU   TCBNSTAE
TCBSYNCH EQU   TCBNSTAE
TCBHALT  EQU   TCBNSTAE
TCBPPSUP EQU   TCBNSTAE
TCB33E   EQU   TCBNSTAE
TCBQUIES EQU   TCBNSTAE
TCBSTABE EQU   TCBNSTAE
TCBAQE   EQU   TCB+156
TCBPQE   EQU   TCB+152
TCBTSDP  EQU   TCB+151
TCBTSLP  EQU   TCB+150
TCBSTPCT EQU   TCB+149
TCBCPUBN EQU   TCBTSFLG
TCBDYDSP EQU   TCBTSFLG
TCBRSV18 EQU   TCBTSFLG
TCBRSV17 EQU   TCBTSFLG
TCBTIOTG EQU   TCBTSFLG
TCBATT   EQU   TCBTSFLG
TCBSTPPR EQU   TCBTSFLG
TCBRV300 EQU   TCBTSTSK
TCBECB   EQU   TCB+144
TCBIQE   EQU   TCB+140
TCBLTC   EQU   TCB+136
TCBOTC   EQU   TCB+132
TCBNTC   EQU   TCB+128
TCBJSTCA EQU   TCBJSTCB+1
TCBRSV16 EQU   TCBJSTCB
TCBTQET  EQU   TCBTME
TCBFSAB  EQU   TCBFSA+1
TCBQEL   EQU   TCBFSA
TCBGRS15 EQU   TCBGRS+60
TCBGRS14 EQU   TCBGRS+56
TCBGRS13 EQU   TCBGRS+52
TCBGRS12 EQU   TCBGRS+48
TCBGRS11 EQU   TCBGRS+44
TCBGRS10 EQU   TCBGRS+40
TCBGRS9  EQU   TCBGRS+36
TCBGRS8  EQU   TCBGRS+32
TCBGRS7  EQU   TCBGRS+28
TCBGRS6  EQU   TCBGRS+24
TCBGRS5  EQU   TCBGRS+20
TCBGRS4  EQU   TCBGRS+16
TCBGRS3  EQU   TCBGRS+12
TCBGRS2  EQU   TCBGRS+8
TCBGRS1  EQU   TCBGRS+4
TCBGRS0  EQU   TCBGRS
TCBJPQB  EQU   TCBJPQ+1
TCBRSV15 EQU   TCBPURGE
TCBRSV14 EQU   TCBPURGE
TCBRSV13 EQU   TCBPURGE
TCBRSV12 EQU   TCBPURGE
TCBRSV11 EQU   TCBPURGE
TCBRSV10 EQU   TCBPURGE
TCBRSV09 EQU   TCBPURGE
TCBJPQF  EQU   TCBPURGE
TCBJLB   EQU   TCB+40
TCBLLS   EQU   TCB+36
TCBDSP   EQU   TCB+35
TCBLMP   EQU   TCB+34
TCBPNDSP EQU   TCBFLGS5
TCBFCD1  EQU   TCBFLGS5
TCBSTP   EQU   TCBFLGS5
TCBSYS   EQU   TCBFLGS5
TCBANDSP EQU   TCBFLGS5
TCBPAGE  EQU   TCBFLGS5
TCBUXNDF EQU   TCBABWF
TCBFC    EQU   TCBFLGS5
TCBONDSP EQU   TCBFLGS4
TCBMPCND EQU   TCBFLGS4
TCBMPCVQ EQU   TCBFLGS4
TCBUXNDV EQU   TCBFLGS4
TCBHNDSP EQU   TCBFLGS4
TCBRQENA EQU   TCBFLGS4
TCBSER   EQU   TCBFLGS4
TCBNDUMP EQU   TCBFLGS4
TCBDWSTA EQU   TCBFLGS3
TCBRSV08 EQU   TCBFLGS3
TCBRSV07 EQU   TCBFLGS3
TCBRSV06 EQU   TCBFLGS3
TCBABGM  EQU   TCBFLGS3
TCBABTRM EQU   TCBFLGS3
TCBADINP EQU   TCBFLGS3
TCBFSM   EQU   TCBFLGS3
TCBFTS   EQU   TCBFLGS2
TCBFETXR EQU   TCBFLGS2
TCBFDSOP EQU   TCBFLGS2
TCBFJMC  EQU   TCBFLGS2
TCBFSMC  EQU   TCBFLGS2
TCBFABOP EQU   TCBFLGS2
TCBFSTI  EQU   TCBFLGS2
TCBFOINP EQU   TCBFLGS2
TCBFX    EQU   TCBFLGS1
TCBFS    EQU   TCBFLGS1
TCBFT    EQU   TCBFLGS1
TCBPDUMP EQU   TCBFLGS1
TCBRSV04 EQU   TCBFLGS1
TCBFERA  EQU   TCBFLGS1
TCBFE    EQU   TCBFLGS1
TCBFA    EQU   TCBFLGS1
TCBZERO  EQU   TCBPKF
TCBFLAG  EQU   TCBPKF
TCBMSSB  EQU   TCBMSS+1
TCBRSV03 EQU   TCBMSS
TCBTRNB  EQU   TCBTRN+1
TCBRSV02 EQU   TCBABF
TCBOLTEP EQU   TCBABF
TCBTCP   EQU   TCBABF
TCBTCPP  EQU   TCBABF
TCBRSV01 EQU   TCBABF
TCBGRPH  EQU   TCBABF
TCBNOCHK EQU   TCBABF
TCBMOD91 EQU   TCBABF
TCBCMPC  EQU   TCBCMP+1
TCBRV318 EQU   TCBCMSG
TCBRV317 EQU   TCBCIND
TCBRV316 EQU   TCBCWTO
TCBCASID EQU   TCBCDBL
TCBNOCC  EQU   TCBSTCC
TCBDMPO  EQU   TCBCPP
TCBCSTEP EQU   TCBCMPF
TCBCREQ  EQU   TCBCMPF
TCBTIO   EQU   TCB+12
TCBDEB   EQU   TCB+8
TCBPIEA  EQU   TCBPIE+1
TCBPM    EQU   TCBPMASK
@NM00002 EQU   TCBPMASK
TCBRBP   EQU   TCB
TCBFRS6  EQU   TCBFRS+24
TCBFRS4  EQU   TCBFRS+16
TCBFRS2  EQU   TCBFRS+8
TCBFRS0  EQU   TCBFRS
SPQERES2 EQU   SPQESECT+12
SPQEKEY  EQU   SPQESECT+11
SPQERES1 EQU   SPQESECT+9
SPQEOWN  EQU   SPQEFLGS
SPDQEAD  EQU   SPDQEPTR
SPQEPTR  EQU   SPQEAD
LDAEND   EQU   LDA+1496
LCLCELCT EQU   LDA+1492
LCLCELL  EQU   LDA+1488
LDALIMIT EQU   LDA+1484
LDARSVPT EQU   LDA+1480
LDASRPQE EQU   LDA+1476
CURRGNTP EQU   LDA+1472
VVREGSZ  EQU   LDA+1468
CFAPWKAR EQU   LDA+1164
CSAVE    EQU   LDA+1100
OBFRSAVE EQU   LDA+1036
GFRESAVE EQU   LDA+972
GMREPSAV EQU   LDA+908
FBQSAVE  EQU   LDA+844
G4KSAVE  EQU   LDA+780
FSAVE    EQU   LDA+716
BSAVE    EQU   LDA+652
SAVEREG2 EQU   LDA+588
BRANCHSV EQU   LDA+524
GMFMWKAR EQU   LDA+24
LDARES2  EQU   LDA+21
LDACBSP  EQU   LDA+20
LDARQSTA EQU   LDA+16
LDATCB   EQU   LDA+12
ASDPQE   EQU   LDA+8
PASCBSV  EQU   LDA+4
@NM00001 EQU   LVSMFLAG+1
LDABRSW  EQU   LVSMFLAG
LDAFLAGS EQU   LVSMFLAG
LDASTART EQU   LDA
DQEHRID  EQU   DQEBLKAD
DQFQEPTR EQU   DQESECT
ASXBEND  EQU   ASXB+232
ASXBRV25 EQU   ASXB+228
ASXBRV24 EQU   ASXB+224
ASXBRV23 EQU   ASXB+220
ASXBRV22 EQU   ASXB+216
ASXBRV21 EQU   ASXB+212
ASXBRV20 EQU   ASXB+208
ASXBRV19 EQU   ASXB+204
ASXBRV18 EQU   ASXB+200
ASXBRV17 EQU   ASXB+196
ASXBRV16 EQU   ASXB+192
ASXBLSRB EQU   ASXBAEQ+20
ASXBFSRB EQU   ASXBAEQ+16
ASXBLRQE EQU   ASXBAEQ+12
ASXBFRQE EQU   ASXBAEQ+8
ASXBLIQE EQU   ASXBAEQ+4
ASXBFIQE EQU   ASXBAEQ
ASXBETSK EQU   ASXB+164
ASXBSIRB EQU   ASXB+160
ASXBPSWD EQU   ASXB+152
ASXBPRG  EQU   ASXB+136
ASXBRV26 EQU   ASXB+132
ASXBOUSB EQU   ASXB+128
ASXBDDR  EQU   ASXB+124
ASXBRCTD EQU   ASXB+120
ASXBRSMD EQU   ASXB+116
ASXBSPSA EQU   ASXB+112
ASXBFRWA EQU   ASXB+108
ASXBFLSA EQU   ASXB+36
ASXBIHSA EQU   ASXB+32
ASXBRV15 EQU   ASXB+28
ASXBRV14 EQU   ASXB+24
ASXBLWA  EQU   ASXB+20
ASXBMPST EQU   ASXB+16
ASXBRS00 EQU   ASXB+14
ASXBASXB EQU   ASXB
ASXBEGIN EQU   ASXB
ASCBEND  EQU   ASCB+208
ASCBSRBT EQU   ASCB+200
ASCBSWTL EQU   ASCB+196
ASCBRS14 EQU   ASCB+195
ASCBSMCT EQU   ASCB+194
ASCBRS12 EQU   ASCB+192
ASCBPCTT EQU   ASCB+188
ASCBVGTT EQU   ASCB+184
ASCBLGCB EQU   ASCB+180
ASCBJBNS EQU   ASCB+176
ASCBJBNI EQU   ASCB+172
ASCBMCC  EQU   ASCB+168
ASCBRTWA EQU   ASCB+164
ASCBIQEA EQU   ASCB+160
ASCBXMPQ EQU   ASCB+156
ASCBRS01 EQU   ASCB+154
ASCBFMCT EQU   ASCB+152
ASCBOUXB EQU   ASCB+148
ASCBOUCB EQU   ASCB+144
ASCBMECB EQU   ASCB+140
ASCBQECB EQU   ASCB+136
ASCBCMSB EQU   ASCB+132
ASCBCMSF EQU   ASCB+128
ASCBTCBS EQU   ASCB+124
ASCBNVSC EQU   ASCB+122
ASCBVSC  EQU   ASCB+120
ASCBSRBS EQU   ASCB+118
ASCBSSRB EQU   ASCB+116
ASCBRV06 EQU   ASCBFLG2
ASCBRV05 EQU   ASCBFLG2
ASCBRV04 EQU   ASCBFLG2
ASCBSNQS EQU   ASCBFLG2
ASCBS2S  EQU   ASCBFLG2
ASCBCEXT EQU   ASCBFLG2
ASCBPXMT EQU   ASCBFLG2
ASCBXMPT EQU   ASCBFLG2
ASCBRF07 EQU   ASCBDSP1
ASCBRF06 EQU   ASCBDSP1
ASCBRF05 EQU   ASCBDSP1
ASCBRF04 EQU   ASCBDSP1
ASCBRF03 EQU   ASCBDSP1
ASCBRF02 EQU   ASCBDSP1
ASCBFAIL EQU   ASCBDSP1
ASCBNOQ  EQU   ASCBDSP1
ASCBSWCT EQU   ASCB+112
ASCBTMCH EQU   ASCB+104
ASCBNSWP EQU   ASCBFLG1
ASCBTYP1 EQU   ASCBFLG1
ASCBSTND EQU   ASCBFLG1
ASCBABNT EQU   ASCBFLG1
ASCBTERM EQU   ASCBFLG1
ASCBS3S  EQU   ASCBFLG1
ASCBCMSH EQU   ASCBFLG1
ASCBTOFF EQU   ASCBFLG1
ASCBRF01 EQU   ASCBRCTF
ASCBTMLW EQU   ASCBRCTF
ASCBOUT  EQU   ASCBRCTF
ASCBWAIT EQU   ASCBRCTF
ASCBRV08 EQU   ASCBRCTF
ASCBFQU  EQU   ASCBRCTF
ASCBFRS  EQU   ASCBRCTF
ASCBTMNO EQU   ASCBRCTF
ASCBAFFN EQU   ASCBFW1
ASCBDUMP EQU   ASCB+96
ASCBQSVC EQU   ASCB+92
ASCBUBET EQU   ASCB+88
ASCBECB  EQU   ASCB+84
ASCBJSTL EQU   ASCB+80
ASCBEWST EQU   ASCB+72
ASCBEJST EQU   ASCB+64
ASCBTSB  EQU   ASCB+60
ASCBCSCB EQU   ASCB+56
ASCBRSM  EQU   ASCB+52
ASCBSTOR EQU   ASCB+44
ASCBDP   EQU   ASCB+43
ASCBRV07 EQU   ASCB+42
ASCBIOSM EQU   ASCB+40
ASCBSEQN EQU   ASCB+38
ASCBASID EQU   ASCB+36
ASCBCPUS EQU   ASCB+32
ASCBSPL  EQU   ASCB+28
ASCBLSLQ EQU   ASCB+24
ASCBFSLQ EQU   ASCB+20
ASCBIOSP EQU   ASCB+16
ASCBLOCK EQU   ASCB+12
ASCBBWDP EQU   ASCB+8
ASCBFWDP EQU   ASCB+4
ASCBASCB EQU   ASCB
ASCBEGIN EQU   ASCB
GTMSAVE  EQU   SADMPLSD+684
GTMNAME  EQU   SADMPLSD+680
FRMSAVE  EQU   SADMPLSD+580
FRMNAME  EQU   SADMPLSD+576
AUDSAVE  EQU   SADMPLSD+476
AUDNAME  EQU   SADMPLSD+472
IOISAVE  EQU   SADMPLSD+372
IOINAME  EQU   SADMPLSD+368
PGISAVE  EQU   SADMPLSD+268
PGINAME  EQU   SADMPLSD+264
SVISAVE  EQU   SADMPLSD+164
SVINAME  EQU   SADMPLSD+160
LOWCRS   EQU   SADMPLSD+96
LOWGRS   EQU   SADMPLSD+32
SAVEDUMP EQU   SADMPLSD+24
AUDPSW   EQU   SADMPLSD+16
SVIRPSW  EQU   SADMPLSD+8
PSWSADMP EQU   SADMPLSD
.@UNREFD ANOP                          END UNREFERENCED COMPONENTS
@RT00249 EQU   MDMEXIT
@RT00259 EQU   MDMRET
@RT00263 EQU   MDMRET
@RT00274 EQU   MDMRC4
@RT00314 EQU   MDMRET
@RT00317 EQU   MDMRET
@RT00362 EQU   SPQRET
@RT00370 EQU   SPQEXIT
@RT00377 EQU   SPQEON
@RT00391 EQU   SPQRET
@RT00416 EQU   DQERET
@RT00436 EQU   DQERET
@ENDDATA EQU   *
         END   AMDSAMDM,(C'PLS2044',0603,74329)
