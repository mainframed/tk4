         TITLE 'AMDSACON VIRTUAL DUMP CONSOLE FUNCTION                 *
                       '
AMDSACON CSECT ,                                                   0001
@MAINENT DS    0H                                                  0001
         USING *,@15                                               0001
         B     @PROLOG                                             0001
         DC    AL1(16)                                             0001
         DC    C'AMDSACON  73.230'                                 0001
         DROP  @15
@PROLOG  STM   @14,@12,12(@13)                                     0001
         BALR  @09,0                                               0001
@PSTART  DS    0H                                                  0001
         USING @PSTART,@09                                         0001
*   MSGREQ = R1;                    /* SAVE MESSAGE REQUESTED        */
         LR    MSGREQ,R1                                           0187
*   SVC (GTMSVC);                   /* CALL AMDSAGTM FOR SAVE/WORK 0188
*                                      AREA                          */
         SVC   4                                                   0188
*   IF RETCODE ^= 0 THEN            /* STORAGE OBTAINED              */
         LTR   RETCODE,RETCODE                                     0189
         BZ    @RF00189                                            0189
*     DO;                           /* NO - ERROR                    */
*       GENERATE REFS(R12,R13,R14)SETS(R15);                       0191
       LM R14,R12,12(R13)
       LA R15,4
       BR RETREG
*     END;                                                         0192
*   R8=R1;                                                         0193
@RF00189 LR    R8,R1                                               0193
*   GENERATE REFS(R8,R13,R15);                                     0194
   USING @DATD,R8
   ST R13,@SA00001+4
   LA R15,@SA00001
*   RESPECIFY (BASEREG) UNRESTRICTED;                              0195
*   RESPECIFY SAVEFORM BASED(R13);                                 0196
*   SAVENEXT = R15;                 /* CHAIN THE SAVE AREA           */
         ST    R15,SAVENEXT(,R13)                                  0197
*   R13 = R15;                      /* SET UP MY SAVE AREA IN R13    */
         LR    R13,R15                                             0198
*   SAVENAME = 'CON';               /* MODULE ID TO SAVE AREA        */
         MVC   SAVENAME(3,R13),@CC00931                            0199
*   RESPECIFY RCB BASED (ADDR(CONRCB));                            0200
*   RCBNEXT = VCTRCB;               /* SAVE LAST RCB ON QUEUE        */
         LA    @14,CONRCB                                          0201
         MVC   RCBNEXT(4,@14),VCTRCB(VCCTREG)                      0201
*   RCBBASE = R9;                   /* SAVE MY BASE REGISTER         */
         ST    R9,RCBBASE(,@14)                                    0202
*   RCBSAVE = R13;                  /* SET UP SAVE AREA PTR          */
         ST    R13,RCBSAVE(,@14)                                   0203
*   RCBEXIT = ADDR(CONRCBE);        /* SET UP EXIT ADDRESS           */
         LA    @05,CONRCBE                                         0204
         ST    @05,RCBEXIT(,@14)                                   0204
*   VCTRCB = ADDR(CONRCB);          /* SET UP CONSOLE RCB ON CHAIN   */
         ST    @14,VCTRCB(,VCCTREG)                                0205
*   RESPECIFY (R1,R15,RETCODE) UNRESTRICTED;                       0206
*                                                                  0207
*   /*****************************************************************/
*   /*                                                               */
*   /* DETERMINE IF MESSAGE INPUT ID IS VALID. IF NOT EXIT WITH AN   */
*   /* ERROR RETURN CODE TO THE CALLER                               */
*   /*                                                               */
*   /*****************************************************************/
*/*CONMSGCK: D (YES,,NO,CONRCBE) VALID MESSAGE ID?                   */
*/* P SPECIFY CONSOLE I/O IN PROGRESS - CTIOCON = 1                  */
*/* L AMDSATXT: OBTAIN MESSAGE ADDRESS                               */
*/* L AMDSATAP: EXECUTE ON IPLED CPU - ISSUE SVC 2                   */
*/* D (YES,,NO,CONRCBE) ON CPU?                                      */
*/* P INITIALIZE CONSOLE FLAGS - CTCONFLG = X'00'                    */
*/* P R12 = CCT ADDRESS                                              */
*                                                                  0207
*                                                                  0207
*CONMSGCK:                                                         0207
*   IF MSGREQ > MSGMAXID THEN                                      0207
CONMSGCK CH    MSGREQ,@CH00821                                     0207
         BH    @RT00207                                            0207
*     GO TO CONRCBE;                /* IF INVALID MSG ID TAKE ERROR
*                                      EXIT                          */
*   SAVECTIO = CTIOTYPE;            /* SAVE THE CALLER'S CTIOTYPE    */
         LH    @05,@CH00724                                        0209
         SR    SAVECTIO,SAVECTIO                                   0209
         IC    SAVECTIO,CTIOTYPE(,@05)                             0209
*   CTIOTYPE = OFF;                 /* RESET FOR CONSOLE CALL TO TAP */
         MVI   CTIOTYPE(@05),B'00000000'                           0210
*   CTIOCON = ON;                   /* TURN ON CONSOLE CALL          */
         OI    CTIOCON(@05),B'00001000'                            0211
*   SVC (TAPSVC);                   /* GET ON THE PROPER CPU         */
         SVC   2                                                   0212
*   RESPECIFY RETCODE RESTRICTED;                                  0213
*   CTIOTYPE = SAVECTIO;            /* RESTORE ORIGINAL I/O REQUEST
*                                      TYPE                          */
         LH    @14,@CH00724                                        0214
         STC   SAVECTIO,CTIOTYPE(,@14)                             0214
*   IF RETCODE ^= 0 THEN                                           0215
         LTR   RETCODE,RETCODE                                     0215
         BNZ   @RT00215                                            0215
*     GO TO CONRCBE;                /* IF NOT ON PROPER CPU THEN EXIT*/
*                                                                  0217
*   /*****************************************************************/
*   /*                                                               */
*   /* CHECK IF AT BOTTOM OF SCREEN ON GRAPHICS CONSOLE. IF SO, ISSUE*/
*   /* MESSAGE AMD029D TO LET OPERATOR COPY MESSAGES ON SCREEN. IF   */
*   /* OPERATOR INDICATES HE NO LONGER WANTS TO SEE SCREEN, DO NOT   */
*   /* ISSUE THE MESSAGE.                                            */
*   /*                                                               */
*   /*****************************************************************/
*/* D (YES,,NO,%NONGPH) GRAPHICS CONSOLE                             */
*/* D (YES,,NO,%NONGPH) WAIT AT END OF SCREEN                        */
*/* D (YES,,NO,%NONGPH) AT BOTTOM OF SCREEN                          */
*/* D (NO,,YES,%NONGPH) DEPENDENT MSG REQUESTED                      */
*/* P SAVE REQUESTED MESSAGE ID                                      */
*/*ISS29D: P SET UP MESSAGE AMD029D                                  */
*/* S CONIO: ISSUE MESSAGE AMD029D                                   */
*/* D (N,,W,%NONGPH,OTH,ISS29D) REPLY = ?                            */
*/* P INDICATE NO WAIT AT BOTTOM OF SCREEN                           */
*/*%NONGPH: S CONIO: ISSUE REQUESTED MESSAGE                         */
*                                                                  0217
*   IF IODBTYPE = T3066&IODBCONW = OFF&CTPRMT1Y+2>=CTHWM THEN /* IS THI
*                                      A GRAPHICS CONSOLE, AT BOTTOM,
*                                      AND SHOULD WE WAIT            */
         L     @05,@CA00924                                        0217
         CLI   IODBTYPE(@05),2                                     0217
         BNE   @RF00217                                            0217
         TM    IODBCONW(@05),B'00000010'                           0217
         BNZ   @RF00217                                            0217
         LA    @05,2                                               0217
         SR    @11,@11                                             0217
         IC    @11,CTPRMT1Y(,@14)                                  0217
         AR    @05,@11                                             0217
         SR    @11,@11                                             0217
         IC    @11,CTHWM(,@14)                                     0217
         CR    @05,@11                                             0217
         BL    @RF00217                                            0217
*     DO;                           /* YES -                         */
*       IF MSGDEP = MSGDEPNT THEN   /* DEPENDENT MSG REQUESTED       */
         LR    @14,MSGREQ                                          0219
         SLA   @14,2                                               0219
         L     @05,@CA00910                                        0219
         AL    @05,@CF00962                                        0219
         L     @14,TXTABLE-TXTABLE(@14,@05)                        0219
         CLI   MSGDEP(@14),255                                     0219
         BE    @RT00219                                            0219
*         GO TO ISSMSG;             /* YES - ISSUE THE MESSAGE       */
*       MSGSAVE = MSGREQ;           /* SAVE REQUESTED MESSAGE ID     */
*                                                                  0221
         LR    MSGSAVE,MSGREQ                                      0221
*ISS29D:                                                           0222
*       MSGREQ = AMD029D;           /* INDICATE MESSAGE AMD029D      */
ISS29D   LA    MSGREQ,29                                           0222
*       REPLY29D = ' ';             /* END OF BLOCK INDICATOR        */
         L     @14,@CA00905                                        0223
         MVI   REPLY29D-REPLY29D(@14),C' '                         0223
*       CALL CONIO;                 /* ISSUE MESSAGE                 */
         BAL   @14,CONIO                                           0224
*       REPLY29D = REPLY29D × ' ';  /* FOLD TO UPPER CASE            */
         L     @14,@CA00905                                        0225
         OI    REPLY29D-REPLY29D(@14),C' '                         0225
*       IF REPLY29D = ' ' THEN      /* END OF BLOCK REPLIED          */
         CLI   REPLY29D-REPLY29D(@14),C' '                         0226
         BNE   @RF00226                                            0226
*         REPLY29D = 'W';           /* YES - DEFAULT TO WAIT         */
         MVI   REPLY29D-REPLY29D(@14),C'W'                         0227
*       IF REPLY29D = 'N' THEN      /* NO MORE WAITING               */
@RF00226 L     @14,@CA00905                                        0228
         CLI   REPLY29D-REPLY29D(@14),C'N'                         0228
         BNE   @RF00228                                            0228
*         IODBCONW = ON;            /* YES - INDICATE NO WAIT        */
         L     @14,@CA00924                                        0229
         OI    IODBCONW(@14),B'00000010'                           0229
*       ELSE                        /* REPLY NOT 'N'                 */
*         IF REPLY29D ^= 'W' THEN   /* WAS 'W' REPLIED               */
         B     @RC00228                                            0230
@RF00228 L     @14,@CA00905                                        0230
         CLI   REPLY29D-REPLY29D(@14),C'W'                         0230
         BNE   @RT00230                                            0230
*           GO TO ISS29D;           /* NO-INVALID REPLY. REISSUE MSG */
*       MSGREQ = MSGSAVE;           /* RESTORE ORIGINAL REQUEST      */
@RC00228 LR    MSGREQ,MSGSAVE                                      0232
*     END;                                                         0233
*                                                                  0233
*ISSMSG:                                                           0234
*   CALL CONIO;                     /* ISSUE REQUESTED MESSAGE       */
@RF00217 DS    0H                                                  0234
ISSMSG   BAL   @14,CONIO                                           0234
*                                                                  0235
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS IS THE NORMAL RETURN PATH TO THE CALLER                  */
*   /*                                                               */
*   /*****************************************************************/
*/*CONRETN: P CTCONERB = 0                                           */
*/* P (,CONEXIT) RETURN CODE = 0                                     */
*                                                                  0235
*                                                                  0235
*CONRETN:                                                          0235
*   VCCTREG = CTVCCT;               /* GET REAL ADDRESS OF VCCT      */
CONRETN  LH    @14,@CH00724                                        0235
         L     VCCTREG,CTVCCT(,@14)                                0235
*   CTERBCON = 0;                   /* RESET THE ERB FOR ALL ERRORS
*                                      HAVE BEEN CORRECTED           */
         SR    @05,@05                                             0236
         ST    @05,CTERBCON(,@14)                                  0236
*   SAVEBACK -> SAVER15 = 0;        /* SET ZERO RETURN CODE IN     0237
*                                      CALLER'S R15 SAVE AREA        */
         L     @14,SAVEBACK(,R13)                                  0237
         ST    @05,SAVER15(,@14)                                   0237
*   GO TO CONEXIT;                  /* DEQUEUE THE RCB AND RETURN    */
*                                                                  0238
         B     CONEXIT                                             0238
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS IS THE CONSOLE ERROR EXIT WHICH SETS A RETURN CODE       */
*   /* OF 4 TO THE CALLER                                            */
*   /*                                                               */
*   /*****************************************************************/
*/*CONRCBE: P (,CONEXIT) RETURN CODE = 4                             */
*                                                                  0239
*CONRCBE:                                                          0239
*   VCCTREG = CTVCCT;               /* GET REAL ADDRESS OF VCCT      */
CONRCBE  LH    @14,@CH00724                                        0239
         L     VCCTREG,CTVCCT(,@14)                                0239
*   SAVEBACK -> SAVER15 = 4;        /* SET AN ERROR RETURN CODE FOR
*                                      THE CALLER                    */
         L     @14,SAVEBACK(,R13)                                  0240
         MVC   SAVER15(4,@14),@CF00045                             0240
*                                                                  0241
*   /*****************************************************************/
*   /*                                                               */
*   /* EXIT CODE TO DEQUEUE RCB, AND RETURN TO THE CALLER            */
*   /*                                                               */
*   /*****************************************************************/
*/*CONEXIT: P REMOVE RCB FROM QUEUE                                  */
*/* L  AMDSAFRM:  FREE SAVE/WORK AREA                                */
*/* R RETURN TO CALLER                                               */
*/*AMDSACON: END                                                     */
*                                                                  0241
*                                                                  0241
*CONEXIT:                                                          0241
*   VCTRCB = RCBNEXT;               /* QUEUE UP NEXT RCB ON CHAIN    */
CONEXIT  LA    @14,CONRCB                                          0241
         MVC   VCTRCB(4,VCCTREG),RCBNEXT(@14)                      0241
*   RESPECIFY R1 RESTRICTED;                                       0242
*   R1 = R8;                        /* ADDRESS OF AREA TO BE FREED   */
         LR    R1,R8                                               0243
*   SVC (FRMSVC);                   /* CALL AMDSAFRM TO FREE WORKING
*                                      STORAGE                       */
         SVC   5                                                   0244
*   RESPECIFY R1 UNRESTRICTED;                                     0245
*   RETURN;                                                        0246
@EL00001 L     @13,4(,@13)                                         0246
@EF00001 DS    0H                                                  0246
@ER00001 LM    @14,@12,12(@13)                                     0246
         BR    @14                                                 0246
*                                                                  0247
*   /*****************************************************************/
*   /*                                                               */
*   /* OBTAIN THE MESSAGE ADDRESS TO PLACE INTO R6. THE LENGTH OF THE*/
*   /* MESSAGE IS IN THE HIGH ORDER BYTE OF R6. R5 RECEIVES THE INPUT*/
*   /* MESSAGE LENGTH AND ADDRESS                                    */
*   /*                                                               */
*   /*****************************************************************/
*/*CONIO: E CONIO                                                    */
*/* P CALCULATE THE LENGTH OF MSG TO OUTPUT                          */
*/* P CALCULATE THE INPUT MSG LENGTH                                 */
*/* P R6 = ADDR OF MSG TO OUTPUT                                     */
*/* P HIGH ORDER BYTE R6 = LENGTH MSG                                */
*/* P CTMSGOUT = OFF                                                 */
*/* D (YES,,NO,%CONMSGD) DEPENDENT MESSAGE                           */
*/* P CTMSGOUT = 1 (SET CONDITIONAL MSG SWITCH)                      */
*/* %CONMSGD: P R5 = 0 (INITIALIZE TO NO READ REQUIRED)              */
*/* D (YES,,NO,CONOREAD) MESSAGE READ INPUT?                         */
*/* P R5 = INPUT AREA ADDRESS                                        */
*/* P INPUT LENGTH IS IN HIGH ORDER BYTE OF R5                       */
*                                                                  0247
*                                                                  0247
*CONIO:                                                            0247
*   PROC OPTIONS(NOSAVE,NOSAVEAREA);                               0247
CONIO    DS    0H                                                  0248
*   RESPECIFY RETREG RESTRICTED;                                   0248
*   CTCONFLG = OFF;                 /* RESET CONSOLE FLAGS           */
         LH    @05,@CH00724                                        0249
         MVI   CTCONFLG(@05),B'00000000'                           0249
*   RESPECIFY R12 RESTRICTED;                                      0250
*   R12 = ADDR(CCT);                /* SET UP CCT ADDRESS FOR HSR    */
         LR    R12,@05                                             0251
*/* P CTREAD = 1 (SET READ SWITCH)                                   */
*                                                                  0252
*   WRITLNG = WRITL1 + WRITL2;      /* ADD BOTH WRITE LENGTHS      0252
*                                      (VARIABLE PLUS THE FIXED TO 0252
*                                      OBTAIN THE ACTUAL LENGTH OF 0252
*                                      THE MESSAGE                   */
         LR    @05,MSGREQ                                          0252
         SLA   @05,2                                               0252
         L     @02,@CA00910                                        0252
         AL    @02,@CF00962                                        0252
         L     @05,TXTABLE-TXTABLE(@05,@02)                        0252
         SR    @02,@02                                             0252
         IC    @02,WRITL1(,@05)                                    0252
         SR    @11,@11                                             0252
         IC    @11,WRITL2(,@05)                                    0252
         AR    @02,@11                                             0252
         STC   @02,WRITLNG                                         0252
*   READLNG = READL1;               /* ACQUIRE LENGTH OF INPUT TEXT  */
         MVC   READLNG(1),READL1(@05)                              0253
*   RESPECIFY (R5,R6) RESTRICTED;                                  0254
*   R6 = ADDR(MSGTXT);              /* POINT TO THE MESSAGE TEXT     */
         ST    @05,@TF00001                                        0255
         L     R6,@TF00001                                         0255
         LA    R6,MSGTXT(,R6)                                      0255
*   IF R6=0 THEN                                                   0256
         LTR   R6,R6                                               0256
         BNZ   @RF00256                                            0256
*     RETURN TO CONRCBE;            /* IF INVALID ID, RETURN         */
         LA    @14,CONRCBE                                         0257
@EL00002 DS    0H                                                  0257
@EF00002 DS    0H                                                  0257
@ER00002 BR    @14                                                 0257
*   GEN REFS(WRITLNG) SETS(R6);                                    0258
@RF00256 DS    0H                                                  0258
   ICM R6,B'1000',WRITLNG SET UP MESSAGE LENGTH
*   IF MSGDEP = MSGDEPNT THEN                                      0259
         LR    @07,MSGREQ                                          0259
         SLA   @07,2                                               0259
         L     @02,@CA00910                                        0259
         AL    @02,@CF00962                                        0259
         L     @07,TXTABLE-TXTABLE(@07,@02)                        0259
         CLI   MSGDEP(@07),255                                     0259
         BNE   @RF00259                                            0259
*     CTMSGOUT = ON;                /* DEPENDENT MESSAGE             */
         LH    @07,@CH00724                                        0260
         OI    CTMSGOUT(@07),B'10000000'                           0260
*   ELSE                                                           0261
*     CTMSGOUT = OFF;               /* RESET SO GRAPHIC SCREEN IS  0261
*                                      ERASED                        */
         B     @RC00259                                            0261
@RF00259 LH    @07,@CH00724                                        0261
         NI    CTMSGOUT(@07),B'01111111'                           0261
*   IF READLNG = 0 THEN                                            0262
@RC00259 CLI   READLNG,0                                           0262
         BNE   @RF00262                                            0262
*     R5 = 0;                       /* IF NOTHING TO READ SET UP THE
*                                      INPUT REGISTER TO ZERO FOR HSR
*                                      CONSOLE FUNCTION              */
         SR    R5,R5                                               0263
*   ELSE                                                           0264
*     DO;                                                          0264
         B     @RC00262                                            0264
@RF00262 DS    0H                                                  0265
*       R5 = R6 + WRITLNG;          /* SET UP TO INPUT AREA          */
         LR    R5,R6                                               0265
         SR    @07,@07                                             0265
         IC    @07,WRITLNG                                         0265
         AR    R5,@07                                              0265
*       GEN REFS(READLNG)SETS(R5) (ICM R5,B'1000',READLNG); /* OBTAIN
*                                      THE LENGTH OF THE TEXT TO BE
*                                      READ                          */
         ICM R5,B'1000',READLNG
*       CTREAD = ON;                /* INIDCATE THAT A READ OPERATION
*                                      IS IN PROGRESS                */
         LH    @07,@CH00724                                        0267
         OI    CTREAD(@07),B'01000000'                             0267
*     END;                                                         0268
*                                                                  0269
*   /*****************************************************************/
*   /*                                                               */
*   /* SET UP THE INTERFACE TO THE CONSOLE SUBROUTINE OF AMDSAHSR    */
*   /*                                                               */
*   /*****************************************************************/
*/*CONOREAD: P R15 = CTCONSOL (ADDR OF CONSOLE ROUTINE)              */
*/* P SAVE REGISTERS 0 - 8 IN CONSAVE                                */
*/* L AMDSAHSR: CALL CONSOLE TO OUTPUT MSG                           */
*/* P RESTORE REGISTERS 0 - 8 FROM CONSAVE                           */
*                                                                  0269
*   RESPECIFY (R10,R11,R12,R13,R14,R15) RESTRICTED;                0269
@RC00262 DS    0H                                                  0270
*   R15 = R12 -> CTCONSOL;          /* SET UP ADDRESS OF CONSOLE   0270
*                                      SUBROUTINE                    */
         L     R15,CTCONSOL(,R12)                                  0270
*   GEN REFS(R0,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14)    0271
*         SETS(LOWGRS,RETREG);                                     0271
   STM R0,R14,LOWGRS SAVE THE CONSOLE REGISTERS ACROSS
* THE CALL TO AMDSAHSR
   BALR RETREG,RETCODE EXIT TO THE CONSOLE ROUTINE
   LM R0,R9,LOWGRS RESTORE THE CONSOLE REGISTERS
   LM R11,R14,LOWGRS+44 RESTORE THE CONSOLE REGISTERS
*                                                                  0272
*   /*****************************************************************/
*   /*                                                               */
*   /* DETERMINE STATUS OF THE CONSOLE I/O OPERATION. IF THE I/O     */
*   /* COMPLETED SUCCESSFULLY RETURN TO THE CALLER. IF AN ERROR      */
*   /* OCCURRED, SET UP FOR ERROR RECOVERY                           */
*   /*                                                               */
*   /*****************************************************************/
*/* P IODBDEV = R10 (SAVE DEVICE ADDRESS)                            */
*/* P CTWAIT = 0 SET ZERO ERROR CODE                                 */
*/* P SAVE FLCCAW IN IODBCAW FOR ERROR RECOVERY                      */
*/* D (YES,CONRETN,NO,) RETURN CODE FROM CON = 0?                    */
*                                                                  0272
*   IODBDEV = R10;                                                 0272
         L     @07,@CA00924                                        0272
         STH   R10,IODBDEV(,@07)                                   0272
*   R12 -> CTWAIT = 0;              /* SET UP CTWAIT FOR NO ERROR  0273
*                                      RECOVERY REQUIRED             */
         MVI   CTWAIT(R12),X'00'                                   0273
*   IODBCAW = FLCCAW;               /* SAVE CAW IF AN ERROR OCCURRED */
         MVC   IODBCAW(4,@07),FLCCAW                               0274
*   IF RETCODE = 0 THEN                                            0275
         LTR   RETCODE,RETCODE                                     0275
         BZ    @RT00275                                            0275
*     GO TO CONIORET;               /* RETURN TO CALLER IF I/O TO  0276
*                                      CONSOLE WENT AS NORMAL        */
*                                                                  0277
*   /*****************************************************************/
*   /*                                                               */
*   /* AN I/O ERROR OCCURRED, DETERMINE IF IT IS CORRECTABLE OR NOT, */
*   /* THEN TAKE THE STEPS TO CORRECT OR BYPASS THE ERROR            */
*   /*                                                               */
*   /*****************************************************************/
*/* P CTWAIT = INPUT MSGREQ VALUE (MSG ID)                           */
*/* D (YES,CONERREC,NO,CONRCBE) RETURN CODE = 8?                     */
*/*CONERREC: P SAVE FLCCSW IN IODBCSW                                */
*                                                                  0277
*   R12 -> CTWAIT = MSGREQ;         /* SAVE THE ERROR CODE IF      0277
*                                      UNRECOVERABLE                 */
         STC   MSGREQ,CTWAIT(,R12)                                 0277
*   IF RETCODE ^= 8 THEN                                           0278
         CH    RETCODE,@CH00037                                    0278
         BE    @RF00278                                            0278
*     RETURN TO CONRCBE;            /* IF TERMINAL ERROR EXIT WITH NO
*                                      RETRIES                       */
         LA    @14,CONRCBE                                         0279
         BR    @14                                                 0279
*   RESPECIFY (R10,R11,R12,R14,R15) UNRESTRICTED;                  0280
@RF00278 DS    0H                                                  0281
*   IODBCSW = FLCCSW;               /* SAVE CSW FROM LOW CORE IN   0281
*                                      CONSOLE IODB                  */
         L     @07,@CA00924                                        0281
         MVC   IODBCSW(8,@07),FLCCSW                               0281
*   RESPECIFY CSW BASED (ADDR(IODBCSW));                           0282
*                                                                  0283
*   /*****************************************************************/
*   /*                                                               */
*   /* IF UNIT CHECK CONDITION RECOVERY IS POSSIBLE                  */
*   /*                                                               */
*   /*****************************************************************/
*/*CONUCK: D (YES,,NO,CONDEVER) UNIT CHECK ?                         */
*/* P IODBSENS = 0 (INIT SENSE AREA)                                 */
*/* P CTERROR = 1 (SET UP TO HANDLE I/O ERRORS)                      */
*/* P R11 = ADDR OF SENSE COMMAND                                    */
*/* P R14 = COMMIO ADDRESS - DUMPSIO ADDR                            */
*/* L AMDSAHSR: CALL DUMPSIO TO ISSUE SENSE                          */
*/* D (YES,CONDEVER,NO,) ERROR ON SENSE CMD ?                        */
*/* D (YES,CONDEVER,NO,) CTERRROR = OFF ?                            */
*/* P CTERROR = 0                                                    */
*                                                                  0283
*   IF CSWUC = ON THEN                                             0283
         LA    @02,IODBCSW(,@07)                                   0283
         TM    CSWUC(@02),B'00000010'                              0283
         BNO   @RF00283                                            0283
*     DO;                           /* IF UNIT CHECK CONDITION_ ISSUE
*                                      SENSE                         */
*       IODBSENS = IODBSENS&&IODBSENS; /* ZERO SENSE AREA FOR SENSE
*                                      COMMAND                       */
         XC    IODBSENS(24,@07),IODBSENS(@07)                      0285
*       CTERROR = ON;               /* SET IGNORE ERROR SWITCH FOR 0286
*                                      SENSE ERRORS                  */
         ST    @07,@TF00001                                        0286
         LH    @07,@CH00724                                        0286
         OI    CTERROR(@07),B'10000000'                            0286
*       RESPECIFY (R10,R11,R12,R14,R15) RESTRICTED;                0287
*       R10 = IODBDEV;              /* SET UP CONSOLE DEVICE ADDRESS */
         L     @02,@TF00001                                        0288
         LH    R10,IODBDEV(,@02)                                   0288
*       SENSEADR = ADDR(IODBSENS);  /* ADDRESS OF SENSE AREA         */
         L     @02,@TF00001                                        0289
         LA    @02,IODBSENS(,@02)                                  0289
         STCM  @02,7,SENSEADR                                      0289
*       R11 = ADDR(CONSENSE);       /* SET UP SENSE COMMAND ADDRESS  */
         LA    R11,CONSENSE                                        0290
*       R12 = ADDR(CCT);            /* OBTAIN START OF CCT AND     0291
*                                      ADDRESSABILITY FOR HSR
         LR    R12,@07                                             0291
*       GEN(STM   R0,R15,LOWGRS);   /* SAVE CONSOLE REGISTERS        */
         STM   R0,R15,LOWGRS
*       R14 = CTCOMMIO;             /* ADDRESS OF DUMPSIO SUBROUTINE
*                                      IN HSR                        */
         LH    @07,@CH00724                                        0293
         L     R14,CTCOMMIO(,@07)                                  0293
*       GEN REFS(R14) SETS(R13);                                   0294
         BALR  R13,R14                 ISSUE SENSE COMMAND
*       GEN(LM    R0,R15,LOWGRS);   /* RESTORE CONSOLE REGISTERS     */
         LM    R0,R15,LOWGRS
*       IF CTERROR = ON THEN                                       0296
         LH    @07,@CH00724                                        0296
         TM    CTERROR(@07),B'10000000'                            0296
         BNO   @RF00296                                            0296
*         DO;                       /* IF SENSE OBTAINED, HANDLE   0297
*                                      ERROR                         */
*           CTERROR = OFF;          /* RESET ERROR SWITCH            */
         NI    CTERROR(@07),B'01111111'                            0298
*                                                                  0299
*   /*****************************************************************/
*   /*                                                               */
*   /* DETERMINE IF ERROR IS CORRECTABLE. EQUIPMENT CHECK READ ERRORS*/
*   /* ARE CORRECTABLE. BUS OUT CHECK ERRORS ARE CORRECTABLE. FOR    */
*   /* 1052 CONSOLES THESE ARE THE ONLY CORRECTABLE ERRORS.          */
*   /*                                                               */
*   /*****************************************************************/
*/* D (YES,CONCONOK,NO,CON3066) 1052 TYPE CONS ?                     */
*/*CON3066: D (YES,CONCONOK,NO,CONDEVER) 3066 TYPE CONS ?            */
*/*CONCONOK: D (YES,,NO,CONDEVER) CTERBCON = 0 ?                     */
*/* P CTERBCON = IODBSENS                                            */
*/* D (YES,CONREC1,NO,CONBUSCK) EQU CHK ?                            */
*/*CONBUSCK: D (YES,CONREC2,NO,) BUS OUT CHK ?                       */
*/* D (YES,CONDEVER,NO,) 1052 TYPE CONSOLE ?                         */
*/*CONREC1: D (YES,CONREC2,NO,CONDEVER) CTREAD = 1 ?                 */
*/*CONREC2: P (,CONMSGCK) R1 = INPUT MESSAGE IDENTIFIER              */
*                                                                  0299
*           IF IODBTYPE = T1052 × IODBTYPE = T3066 THEN            0299
         L     @07,@CA00924                                        0299
         CLI   IODBTYPE(@07),1                                     0299
         BE    @RT00299                                            0299
         CLI   IODBTYPE(@07),2                                     0299
         BNE   @RF00299                                            0299
@RT00299 DS    0H                                                  0300
*             DO;                   /* ONLY TWO CONSOLE SUPPORTTED   */
*               IF CTERBCON = 0 THEN                               0301
         LH    @07,@CH00724                                        0301
         ICM   @02,15,CTERBCON(@07)                                0301
         BNZ   @RF00301                                            0301
*                 DO;               /* IF FIRST RETRY CONDITION      */
*                   CTERBCON = IODBSENS(1:4); /* SET UP CONSOLE ERB
*                                      WITH SENSE DATA               */
         L     @02,@CA00924                                        0303
         MVC   CTERBCON(4,@07),IODBSENS(@02)                       0303
*                   IF SENSEC = ON THEN                            0304
         LA    @07,IODBSENS(,@02)                                  0304
         TM    SENSEC(@07),B'00010000'                             0304
         BO    @RT00304                                            0304
*                     GO TO CONREC1; /* EQUIPMENT CHECK IS         0305
*                                      RECOVERABLE                   */
*                   IF SENSBOC = ON THEN                           0306
         TM    SENSBOC(@07),B'00100000'                            0306
         BO    @RT00306                                            0306
*                     GO TO CONIO; /* BUS OUT CK IS RECOVERABLE      */
*                   IF IODBTYPE = T1052 THEN                       0308
         CLI   IODBTYPE(@02),1                                     0308
         BE    @RT00308                                            0308
*                     GO TO CONDEVER; /* END OF 1052 RETRIES         */
*                                                                  0309
*CONREC1:                                                          0310
*                   IF CTREAD = ON THEN                            0310
CONREC1  LH    @07,@CH00724                                        0310
         TM    CTREAD(@07),B'01000000'                             0310
         BO    @RT00310                                            0310
*                     GO TO CONIO; /* RETRY ONLY IF READ             */
*                 END;                                             0312
*             END;                                                 0313
@RF00301 DS    0H                                                  0314
*         END;                                                     0314
@RF00299 DS    0H                                                  0315
*     END;                                                         0315
@RF00296 DS    0H                                                  0316
*                                                                  0316
*   /*****************************************************************/
*   /*                                                               */
*   /* RETRY THE ERROR BY RECYCLING THROUGH THE CONSOLE ROUTINE      */
*   /*                                                               */
*   /*****************************************************************/
*/*CONDEVER: P (,CONRCBE) SET IODBIOC = 1                            */
*                                                                  0316
*                                                                  0316
*CONDEVER:                                                         0316
*   IODBIOC = ON;                   /* DEVICE ERROR                  */
*                                                                  0316
@RF00283 DS    0H                                                  0316
CONDEVER L     @07,@CA00924                                        0316
         OI    IODBIOC(@07),B'00010000'                            0316
*CONIORET:                                                         0317
*   RETURN;                         /* RETURN TO CALLER              */
         B     @EL00002                                            0317
*   RESPECIFY RETREG UNRESTRICTED;                                 0318
*   END CONIO;                                                     0319
         B     @EL00002                                            0319
*   END AMDSACON                                                   0320
*/* THE FOLLOWING INCLUDE STATEMENTS WERE FOUND IN THIS PROGRAM.      *
*/*%INCLUDE SYSLIB  (IHAPSA  )                                        *
*/*%INCLUDE SYSLIB  (AMDSARMK)                                        *
*;                                                                 0320
         B     @EL00001                                            0320
@DATA    DS    0H
@CH00037 DC    H'8'
@CH00724 DC    H'28672'
@CH00821 DC    XL2'22'
@DATD    DSECT
         DS    0F
@SA00001 DS    18F
@TF00001 DS    F
AMDSACON CSECT
         DS    0F
@CF00962 DC    F'-4'
@CF00045 DC    F'4'
@DATD    DSECT
         DS    0D
WRITLNG  DS    FL1
READLNG  DS    FL1
         DS    CL2
CONRCB   DS    CL20
AMDSACON CSECT
         NOPR  ((@ENDDATD-@DATD)/257*16)
         DS    0F
@SIZDATD DC    AL1(0)
         DC    AL3(@ENDDATD-@DATD)
@CA00905 DC    A(REPLY29D)
@CA00910 DC    A(TXTABLE)
@CA00924 DC    A(IODBCON)
         DS    0D
@CC00931 DC    C'CON'
         DS    CL5
CONSENSE DS    CL8
         ORG   CONSENSE
@NM00057 DC    X'04'
SENSEADR DS    AL3
@NM00058 DC    X'20000018'
         ORG   CONSENSE+8
AMDSACON CSECT
         DS   0H
CONPATCH DC ((@DATA-@PSTART)/20)X'00'
@DATD    DSECT
         ORG   *+1-(*-@DATD)/(*-@DATD) INSURE DSECT DATA
@ENDDATD EQU   *
AMDSACON CSECT
@00      EQU   00                      EQUATES FOR REGISTERS 0-15
@01      EQU   01
@02      EQU   02
@03      EQU   03
@04      EQU   04
@05      EQU   05
@06      EQU   06
@07      EQU   07
@08      EQU   08
@09      EQU   09
@10      EQU   10
@11      EQU   11
@12      EQU   12
@13      EQU   13
@14      EQU   14
@15      EQU   15
MSGSAVE  EQU   @03
SAVECTIO EQU   @02
VCCTREG  EQU   @12
RETREG   EQU   @14
RETCODE  EQU   @15
BASEREG  EQU   @11
R0       EQU   @00
R1       EQU   @01
R2       EQU   @02
R3       EQU   @03
R4       EQU   @04
R5       EQU   @05
R6       EQU   @06
R7       EQU   @07
R8       EQU   @08
R9       EQU   @09
R10      EQU   @10
R11      EQU   @11
R12      EQU   @12
R13      EQU   @13
R14      EQU   @14
R15      EQU   @15
MSGREQ   EQU   @04
         EXTRN REPLY29D
         EXTRN TXTABLE
         EXTRN IODBCON
PSA      EQU   0
FLCRNPSW EQU   PSA
FLCROPSW EQU   PSA+8
FLCICCW2 EQU   PSA+16
FLCCSW   EQU   PSA+64
FLCCAW   EQU   PSA+72
PSAEEPSW EQU   PSA+132
PSAESPSW EQU   PSA+136
FLCSVILC EQU   PSAESPSW+1
PSAEPPSW EQU   PSA+140
FLCPIILC EQU   PSAEPPSW+1
FLCPICOD EQU   PSAEPPSW+2
PSAPICOD EQU   FLCPICOD+1
FLCTEA   EQU   PSAEPPSW+4
FLCPER   EQU   PSA+152
FLCMCLA  EQU   PSA+168
FLCIOEL  EQU   FLCMCLA+4
FLCIOA   EQU   FLCMCLA+16
FLCFSA   EQU   FLCMCLA+80
PSASUPER EQU   PSA+552
PSASUP1  EQU   PSASUPER
PSASUP2  EQU   PSASUPER+1
PSASUP3  EQU   PSASUPER+2
PSASUP4  EQU   PSASUPER+3
PSACLHT  EQU   PSA+640
PSALKSA  EQU   PSA+696
PSAHLHI  EQU   PSA+760
PSADSSFL EQU   PSA+836
PSADSSF1 EQU   PSADSSFL
PSADSSF3 EQU   PSADSSFL+2
PSADSSF4 EQU   PSADSSFL+3
PSARSVT  EQU   PSA+896
SADMPLSD EQU   3312
LOWGRS   EQU   SADMPLSD+32
ARB      EQU   0
BCTH     EQU   0
BCT      EQU   0
BCTLPID  EQU   BCT+28
BCTFLGT  EQU   BCT+44
BCTFLGI  EQU   BCT+45
CCT      EQU   0
CTWAIT   EQU   CCT
CTFLG1   EQU   CCT+1
CTERROR  EQU   CTFLG1
CTFLG2   EQU   CCT+2
CTERBCON EQU   CCT+36
CTLOWFLG EQU   CCT+48
CTDMPTYP EQU   CCT+52
CTIOTYPE EQU   CTDMPTYP
CTIOCON  EQU   CTIOTYPE
CTCONFLG EQU   CTDMPTYP+2
CTMSGOUT EQU   CTCONFLG
CTREAD   EQU   CTCONFLG
CTBUFTYP EQU   CTDMPTYP+3
CTCONSOL EQU   CTDMPTYP+4
CTCOMMIO EQU   CTDMPTYP+12
CTVCCT   EQU   CTDMPTYP+20
CTPRMT1  EQU   CTDMPTYP+24
CTPRMT1Y EQU   CTPRMT1
CTPRMT2  EQU   CTDMPTYP+26
CTHWM    EQU   CTDMPTYP+28
CCW      EQU   0
CCWFLAGS EQU   CCW+4
CSW      EQU   0
CSWKEY00 EQU   CSW
CSWUSTAT EQU   CSW+4
CSWUC    EQU   CSWUSTAT
CSWCSTAT EQU   CSW+5
DSCE     EQU   0
IODB     EQU   0
IODBFLAG EQU   IODB+8
IODBIOC  EQU   IODBFLAG
IODBCONW EQU   IODBFLAG
IODBDEV  EQU   IODB+10
IODBTYPE EQU   IODB+13
IODBCAW  EQU   IODB+20
IODBCSW  EQU   IODB+24
IODBCCHH EQU   IODB+32
IODBSRCH EQU   IODBCCHH+3
IODBSENS EQU   IODB+40
MDCE     EQU   0
MDCB     EQU   0
MDCBGRS  EQU   MDCB+16
MDCBFLGS EQU   MDCB+86
PSW      EQU   0
PSWSM    EQU   PSW
@NM00047 EQU   PSW+1
PSWCCPM  EQU   PSW+2
@NM00050 EQU   PSW+3
PTRT     EQU   0
PTRTRSA  EQU   0
RCB      EQU   0
RCBNEXT  EQU   RCB
RCBSAVE  EQU   RCB+8
RCBEXIT  EQU   RCB+12
RCBBASE  EQU   RCB+16
VCCT     EQU   0
VCTRCB   EQU   VCCT+4
VCTRECSN EQU   VCCT+8
VCTFLGS  EQU   VCCT+9
VCTMDCE  EQU   VCCT+12
VCTDSCE  EQU   VCCT+20
VCTBCTH  EQU   VCCT+24
VCTCBID  EQU   VCCT+64
SDL      EQU   0
REGLOCAL EQU   0
SAVEFORM EQU   0
SAVENAME EQU   SAVEFORM+1
SAVEBACK EQU   SAVEFORM+4
SAVENEXT EQU   SAVEFORM+8
SAVER15  EQU   SAVEFORM+16
SENSE00  EQU   0
SENSBOC  EQU   SENSE00
SENSEC   EQU   SENSE00
MSGFORM  EQU   0
WRITL1   EQU   MSGFORM
WRITL2   EQU   MSGFORM+1
READL1   EQU   MSGFORM+2
MSGDEP   EQU   MSGFORM+3
MSGTXT   EQU   MSGFORM+4
PTRTVSA  EQU   0
PSARSVTE EQU   PSARSVT
CTLOWDMP EQU   CTDMPTYP
FLC      EQU   PSA
         AGO   .@UNREFD                START UNREFERENCED COMPONENTS
CTADDRE  EQU   CTLOWDMP+4
CTADDRS  EQU   CTLOWDMP
PSARSAV  EQU   PSARSVTE+60
PSARSTK  EQU   PSARSVTE+56
PSAESAV3 EQU   PSARSVTE+52
PSAESTK3 EQU   PSARSVTE+48
PSAESAV2 EQU   PSARSVTE+44
PSAESTK2 EQU   PSARSVTE+40
PSAESAV1 EQU   PSARSVTE+36
PSAESTK1 EQU   PSARSVTE+32
PSAPSAV  EQU   PSARSVTE+28
PSAPSTK  EQU   PSARSVTE+24
PSAMSAV  EQU   PSARSVTE+20
PSAMSTK  EQU   PSARSVTE+16
PSASSAV  EQU   PSARSVTE+12
PSASSTK  EQU   PSARSVTE+8
PSANSTK  EQU   PSARSVTE+4
PSACSTK  EQU   PSARSVTE
@NM00056 EQU   SENSE00
@NM00055 EQU   SENSE00
SAVER12  EQU   SAVEFORM+68
SAVER11  EQU   SAVEFORM+64
SAVER10  EQU   SAVEFORM+60
SAVER9   EQU   SAVEFORM+56
SAVER8   EQU   SAVEFORM+52
SAVER7   EQU   SAVEFORM+48
SAVER6   EQU   SAVEFORM+44
SAVER5   EQU   SAVEFORM+40
SAVER4   EQU   SAVEFORM+36
SAVER3   EQU   SAVEFORM+32
SAVER2   EQU   SAVEFORM+28
SAVER1   EQU   SAVEFORM+24
SAVER0   EQU   SAVEFORM+20
SAVER14  EQU   SAVEFORM+12
SAVEID   EQU   SAVEFORM
REGL15   EQU   REGLOCAL+60
REGL14   EQU   REGLOCAL+56
REGL13   EQU   REGLOCAL+52
REGL12   EQU   REGLOCAL+48
REGL11   EQU   REGLOCAL+44
REGL10   EQU   REGLOCAL+40
REGL9    EQU   REGLOCAL+36
REGL8    EQU   REGLOCAL+32
REGL7    EQU   REGLOCAL+28
REGL6    EQU   REGLOCAL+24
REGL5    EQU   REGLOCAL+20
REGL4    EQU   REGLOCAL+16
REGL3    EQU   REGLOCAL+12
REGL2    EQU   REGLOCAL+8
REGL1    EQU   REGLOCAL+4
REGL0    EQU   REGLOCAL
SDLSPN   EQU   SDL+1
SDLNUM   EQU   SDL
VCTVCCTV EQU   VCCT+108
VCTCCTV  EQU   VCCT+104
@NM00054 EQU   VCCT+102
VCTEXTRA EQU   VCCT+100
VCTCPOUT EQU   VCCT+96
VCTSVCTB EQU   VCCT+92
VCTPGT   EQU   VCCT+88
VCTLPA   EQU   VCCT+84
VCTCBADR EQU   VCCT+80
VCTJBNME EQU   VCCT+72
VCTCBIDN EQU   VCTCBID+7
@NM00053 EQU   VCTCBID
VCTAUDIT EQU   VCCT+62
VCTASID  EQU   VCCT+60
VCTPTRT  EQU   VCCT+56
VCTMASCB EQU   VCCT+52
VCTASCB  EQU   VCCT+48
VCTCPUC  EQU   VCCT+46
VCTWKC   EQU   VCCT+45
VCTWKHI  EQU   VCCT+44
VCTSUBPL EQU   VCCT+40
VCTARB   EQU   VCCT+36
VCTIODB  EQU   VCCT+32
VCTBCTC  EQU   VCCT+28
VCTSTOR  EQU   VCCT+16
VCTRECVA EQU   VCCT+10
@NM00052 EQU   VCTFLGS
VCTLRCLM EQU   VCTFLGS
VCTARCLM EQU   VCTFLGS
VCTASMIC EQU   VCTFLGS
VCTMEMIN EQU   VCTFLGS
VCTSADMP EQU   VCTFLGS
@NM00051 EQU   VCTRECSN
VCTRSMR  EQU   VCTRECSN
VCTEXIR  EQU   VCTRECSN
VCTUPDR  EQU   VCTRECSN
VCTPGIR  EQU   VCTRECSN
VCTVCT   EQU   VCCT
RCBSTOR  EQU   RCB+4
PTRTVS   EQU   PTRT+1032
PTRTRS   EQU   PTRT+8
PTRTLGID EQU   PTRT+4
PTRTPTRT EQU   PTRT
PSWEND   EQU   PSW+8
PSWIA    EQU   PSW+4
PSWSP    EQU   @NM00050
PSWSIG   EQU   PSWCCPM
PSWEU    EQU   PSWCCPM
PSWDO    EQU   PSWCCPM
PSWFPO   EQU   PSWCCPM
@NM00049 EQU   PSWCCPM
@NM00048 EQU   PSWCCPM
PSWPRBLM EQU   @NM00047
PSWAIT   EQU   @NM00047
PSWMCH   EQU   @NM00047
PSWMODE  EQU   @NM00047
PSWKEY   EQU   @NM00047
PSWXTRNL EQU   PSWSM
PSWIO    EQU   PSWSM
PSWDAT   EQU   PSWSM
@NM00046 EQU   PSWSM
@NM00045 EQU   PSWSM
@NM00044 EQU   PSWSM
PSWPER   EQU   PSWSM
@NM00043 EQU   PSWSM
@NM00042 EQU   MDCB+87
@NM00041 EQU   MDCBFLGS
MDCBDUMP EQU   MDCBFLGS
MDCBASMI EQU   MDCBFLGS
MDCBPI   EQU   MDCB+84
MDCBSTOR EQU   MDCB+80
MDCBGR15 EQU   MDCBGRS+60
MDCBGR14 EQU   MDCBGRS+56
MDCBGR13 EQU   MDCBGRS+52
MDCBGR12 EQU   MDCBGRS+48
MDCBGR11 EQU   MDCBGRS+44
MDCBGR10 EQU   MDCBGRS+40
MDCBGR9  EQU   MDCBGRS+36
MDCBGR8  EQU   MDCBGRS+32
MDCBGR7  EQU   MDCBGRS+28
MDCBGR6  EQU   MDCBGRS+24
MDCBGR5  EQU   MDCBGRS+20
MDCBGR4  EQU   MDCBGRS+16
MDCBGR3  EQU   MDCBGRS+12
MDCBGR2  EQU   MDCBGRS+8
MDCBGR1  EQU   MDCBGRS+4
MDCBGR0  EQU   MDCBGRS
MDCBPSW  EQU   MDCB+8
MDCBNEXT EQU   MDCB+4
MDCBMDCB EQU   MDCB
MDCEAVIL EQU   MDCE+8
MDCEACTV EQU   MDCE+4
MDCEMDCE EQU   MDCE
IODBR    EQU   IODBCCHH+7
IODBHH   EQU   IODBSRCH+2
IODBCC   EQU   IODBSRCH
IODBSEEK EQU   IODBCCHH+1
IODBM    EQU   IODBCCHH
IODBBCT  EQU   IODB+16
IODBCPU  EQU   IODB+14
IODBCLAS EQU   IODB+12
@NM00040 EQU   IODBFLAG+1
IODBSTRT EQU   IODBFLAG
IODBACTV EQU   IODBFLAG
IODBHALT EQU   IODBFLAG
IODBINT  EQU   IODBFLAG
IODBPTRM EQU   IODBFLAG
IODBTERM EQU   IODBFLAG
IODBIDEN EQU   IODB+4
IODBIODB EQU   IODB
DSCETEND EQU   DSCE+20
DSCETCUR EQU   DSCE+16
DSCETBEG EQU   DSCE+12
DSCENEXT EQU   DSCE+8
DSCEBEGN EQU   DSCE+4
DSCEDSCE EQU   DSCE
CSWCNT   EQU   CSW+6
CSWCHC   EQU   CSWCSTAT
CSWICC   EQU   CSWCSTAT
CSWCCC   EQU   CSWCSTAT
CSWCDC   EQU   CSWCSTAT
CSWPTC   EQU   CSWCSTAT
CSWPGC   EQU   CSWCSTAT
CSWIL    EQU   CSWCSTAT
CSWPCI   EQU   CSWCSTAT
CSWUE    EQU   CSWUSTAT
CSWDE    EQU   CSWUSTAT
CSWCE    EQU   CSWUSTAT
CSWBUSY  EQU   CSWUSTAT
CSWCUE   EQU   CSWUSTAT
CSWSTMOD EQU   CSWUSTAT
CSWATTN  EQU   CSWUSTAT
CSWCADDR EQU   CSW+1
@NM00039 EQU   CSWKEY00
CSWKEY   EQU   CSWKEY00
CCWCNT   EQU   CCW+6
@NM00038 EQU   CCW+5
@NM00037 EQU   CCWFLAGS
CCWIDA   EQU   CCWFLAGS
CCWPCI   EQU   CCWFLAGS
CCWSKIP  EQU   CCWFLAGS
CCWSLI   EQU   CCWFLAGS
CCWCC    EQU   CCWFLAGS
CCWDC    EQU   CCWFLAGS
CCWDADDR EQU   CCW+1
CCWCMD   EQU   CCW
CTHWMAX  EQU   CTDMPTYP+29
CTPRMT2X EQU   CTPRMT2+1
CTPRMT2Y EQU   CTPRMT2
CTPRMT1X EQU   CTPRMT1+1
CTEOR    EQU   CTDMPTYP+16
CTLWKAD  EQU   CTDMPTYP+8
@NM00036 EQU   CTBUFTYP
CTDUMP   EQU   CTBUFTYP
CTLSQA   EQU   CTBUFTYP
CTASM    EQU   CTBUFTYP
CTPGT    EQU   CTBUFTYP
CTWKFLE  EQU   CTBUFTYP
@NM00035 EQU   CTBUFTYP
@NM00034 EQU   CTCONFLG
@NM00033 EQU   CTDMPTYP+1
@NM00032 EQU   CTIOTYPE
CTIORSET EQU   CTIOTYPE
CTIOINT  EQU   CTIOTYPE
CTIOWK   EQU   CTIOTYPE
CTIODA   EQU   CTIOTYPE
CTIOOUT  EQU   CTIOTYPE
CTIOTERM EQU   CTIOTYPE
CTEBCOPR EQU   CCT+49
@NM00031 EQU   CTLOWFLG
CTWKSTUS EQU   CTLOWFLG
CTINIT   EQU   CTLOWFLG
CTFP     EQU   CTLOWFLG
CTVIRTD  EQU   CTLOWFLG
CTEBCOPD EQU   CCT+45
CTCONTYP EQU   CCT+44
CTOUTAD  EQU   CCT+42
CTCPUI   EQU   CCT+40
CTERBTPE EQU   CCT+32
CTERBDA  EQU   CCT+28
CTCCHHW  EQU   CCT+24
CTCCHHE  EQU   CCT+20
CTCCHHS  EQU   CCT+16
CTPGECNT EQU   CCT+15
CTCCHHR  EQU   CCT+8
CTINADDR EQU   CCT+6
CTSENSE  EQU   CCT+4
CTDEVTYP EQU   CCT+3
@NM00030 EQU   CTFLG2
CTALTCON EQU   CTFLG2
CTWKDONE EQU   CTFLG2
CTVIRTR  EQU   CTFLG2
CTNOSTAT EQU   CTFLG2
CTPGEFLT EQU   CTFLG2
CTSTOR   EQU   CTFLG2
CTDUPSW  EQU   CTFLG2
CTERREC  EQU   CTFLG1
CTMP     EQU   CTFLG1
@NM00029 EQU   CTFLG1
CTDEFO   EQU   CTFLG1
CTWORK   EQU   CTFLG1
CTMORTPE EQU   CTFLG1
CTDEVICE EQU   CTFLG1
@NM00028 EQU   BCT+46
BCTRECLM EQU   BCTFLGI
BCTIOERR EQU   BCTFLGI
BCTALLOC EQU   BCTFLGI
BCTCOMP  EQU   BCTFLGI
@NM00027 EQU   BCTFLGT
BCTPGTF  EQU   BCTFLGT
BCTDUMP  EQU   BCTFLGT
BCTLSQA  EQU   BCTFLGT
BCTASM   EQU   BCTFLGT
BCTPGT   EQU   BCTFLGT
BCTWKFLE EQU   BCTFLGT
@NM00026 EQU   BCTFLGT
BCTRBA   EQU   BCT+40
BCTAMB   EQU   BCT+36
@NM00025 EQU   BCTLPID+4
BCTLGN   EQU   BCTLPID
BCTMDCB  EQU   BCT+24
BCTPGTE  EQU   BCT+20
BCTRADDR EQU   BCT+16
BCTVADDR EQU   BCT+12
BCTASID  EQU   BCT+10
BCTKEY2  EQU   BCT+9
BCTKEY1  EQU   BCT+8
BCTNEXT  EQU   BCT+4
BCTBCT   EQU   BCT
BCTHLAST EQU   BCTH+8
BCTHFRST EQU   BCTH+4
BCTHBCTH EQU   BCTH
ARBADDRE EQU   ARB+4
ARBADDRB EQU   ARB
GTMSAVE  EQU   SADMPLSD+684
GTMNAME  EQU   SADMPLSD+680
FRMSAVE  EQU   SADMPLSD+580
FRMNAME  EQU   SADMPLSD+576
AUDSAVE  EQU   SADMPLSD+476
AUDNAME  EQU   SADMPLSD+472
IOISAVE  EQU   SADMPLSD+372
IOINAME  EQU   SADMPLSD+368
PGISAVE  EQU   SADMPLSD+268
PGINAME  EQU   SADMPLSD+264
SVISAVE  EQU   SADMPLSD+164
SVINAME  EQU   SADMPLSD+160
LOWCRS   EQU   SADMPLSD+96
SAVEDUMP EQU   SADMPLSD+24
AUDPSW   EQU   SADMPLSD+16
SVIRPSW  EQU   SADMPLSD+8
PSWSADMP EQU   SADMPLSD
@NM00024 EQU   PSA+3412
PSASTAK  EQU   PSA+3072
@NM00023 EQU   PSA+1024
PSAUSEND EQU   PSA+1024
PSARV060 EQU   PSA+1020
PSARV059 EQU   PSA+1018
PSASVC13 EQU   PSA+1016
PSALSFCC EQU   PSA+1012
PSASFACC EQU   PSA+1008
PSASTOP  EQU   PSA+992
PSASTART EQU   PSA+976
PSARSPSW EQU   PSA+968
PSASRPSW EQU   PSA+960
PSARV045 EQU   PSA+892
PSARV044 EQU   PSA+888
PSARV043 EQU   PSA+884
PSARV042 EQU   PSA+880
PSARV041 EQU   PSA+876
PSARV040 EQU   PSA+872
PSARV025 EQU   PSA+868
PSADSSED EQU   PSA+868
PSADSSPR EQU   PSA+864
PSADSSFW EQU   PSA+860
PSADSS14 EQU   PSA+856
PSADSSPP EQU   PSA+848
PSADSSRP EQU   PSA+840
PSADSS05 EQU   PSADSSF4
PSADSS10 EQU   PSADSSF4
PSADSSVE EQU   PSADSSF4
PSADSSDE EQU   PSADSSF4
PSADSSC0 EQU   PSADSSF4
PSADSSIE EQU   PSADSSF4
PSADSS12 EQU   PSADSSF4
PSADSSRC EQU   PSADSSF4
PSARV057 EQU   PSADSSF3
PSARV056 EQU   PSADSSF3
PSARV055 EQU   PSADSSF3
PSARV054 EQU   PSADSSF3
PSADSSRW EQU   PSADSSF3
PSADSSNM EQU   PSADSSF3
PSADSSES EQU   PSADSSF3
PSADSSGP EQU   PSADSSF3
PSADSSF2 EQU   PSADSSFL+1
PSADSSPI EQU   PSADSSF1
PSADSSOI EQU   PSADSSF1
PSADSSSP EQU   PSADSSF1
PSADSSTP EQU   PSADSSF1
PSADSSDW EQU   PSADSSF1
PSADSSDD EQU   PSADSSF1
PSADSSDM EQU   PSADSSF1
PSADSSMV EQU   PSADSSF1
PSADSSTS EQU   PSA+816
PSADSSWK EQU   PSA+812
PSADSSR3 EQU   PSA+808
PSADSSR2 EQU   PSA+804
PSADSSRS EQU   PSA+800
PSASTOR  EQU   PSA+796
PSARV058 EQU   PSA+794
PSAVSTAP EQU   PSA+792
PSAWKVAP EQU   PSA+788
PSAWKRAP EQU   PSA+784
PSAMCHIC EQU   PSA+783
PSAMODE  EQU   PSA+782
PSASYMSK EQU   PSA+781
PSAMCHFL EQU   PSA+780
PSACR0   EQU   PSA+776
PSAPSWSV EQU   PSA+768
PSALITA  EQU   PSA+764
PSACLHS  EQU   PSAHLHI
PSALKR15 EQU   PSALKSA+60
PSALKR14 EQU   PSALKSA+56
PSALKR13 EQU   PSALKSA+52
PSALKR12 EQU   PSALKSA+48
PSALKR11 EQU   PSALKSA+44
PSALKR10 EQU   PSALKSA+40
PSALKR9  EQU   PSALKSA+36
PSALKR8  EQU   PSALKSA+32
PSALKR7  EQU   PSALKSA+28
PSALKR6  EQU   PSALKSA+24
PSALKR5  EQU   PSALKSA+20
PSALKR4  EQU   PSALKSA+16
PSALKR3  EQU   PSALKSA+12
PSALKR2  EQU   PSALKSA+8
PSALKR1  EQU   PSALKSA+4
PSALKR0  EQU   PSALKSA
PSARV023 EQU   PSACLHT+52
PSALOCAL EQU   PSACLHT+48
PSACMSL  EQU   PSACLHT+44
PSAOPTL  EQU   PSACLHT+40
PSATPACL EQU   PSACLHT+36
PSATPDNL EQU   PSACLHT+32
PSATPNCL EQU   PSACLHT+28
PSAIOSLL EQU   PSACLHT+24
PSAIOSUL EQU   PSACLHT+20
PSAIOSCL EQU   PSACLHT+16
PSAIOSSL EQU   PSACLHT+12
PSASALCL EQU   PSACLHT+8
PSAASML  EQU   PSACLHT+4
PSADISPL EQU   PSACLHT
PSASRSA  EQU   PSA+636
PSARV050 EQU   PSA+634
PSADSSGO EQU   PSA+633
PSARECUR EQU   PSA+632
PSAHLHIS EQU   PSA+628
PSAIPCSA EQU   PSA+624
@NM00022 EQU   PSA+621
PSAIPCDM EQU   PSA+620
PSAIPCD  EQU   PSA+616
@NM00021 EQU   PSA+613
PSAIPCRM EQU   PSA+612
PSAIPCR  EQU   PSA+608
PSAMCHEX EQU   PSA+600
PSAMPSW  EQU   PSA+592
PSAEXPS2 EQU   PSA+584
PSAEXPS1 EQU   PSA+576
PSAPIREG EQU   PSA+572
PSARSREG EQU   PSA+568
PSAGPREG EQU   PSA+556
PSARV022 EQU   PSASUP4
PSARV021 EQU   PSASUP4
PSARV020 EQU   PSASUP4
PSARV019 EQU   PSASUP4
PSARV018 EQU   PSASUP4
PSARV017 EQU   PSASUP4
PSARV016 EQU   PSASUP4
PSARV015 EQU   PSASUP4
PSARV014 EQU   PSASUP3
PSARV013 EQU   PSASUP3
PSARV012 EQU   PSASUP3
PSARV011 EQU   PSASUP3
PSARV010 EQU   PSASUP3
PSARV009 EQU   PSASUP3
PSARV008 EQU   PSASUP3
PSAIOSUP EQU   PSASUP3
PSALCR   EQU   PSASUP2
PSARTM   EQU   PSASUP2
PSAACR   EQU   PSASUP2
PSAIPCE2 EQU   PSASUP2
PSAIPCES EQU   PSASUP2
PSAIPCEC EQU   PSASUP2
PSAGTF   EQU   PSASUP2
PSAIPCRI EQU   PSASUP2
PSAIPCRP EQU   PSASUP1
PSAIPCDR EQU   PSASUP1
PSADISP  EQU   PSASUP1
PSALOCK  EQU   PSASUP1
PSAPI    EQU   PSASUP1
PSAEXT   EQU   PSASUP1
PSASVC   EQU   PSASUP1
PSAIO    EQU   PSASUP1
PSAAOLD  EQU   PSA+548
PSAANEW  EQU   PSA+544
PSATOLD  EQU   PSA+540
PSATNEW  EQU   PSA+536
PSALCCAR EQU   PSA+532
PSALCCAV EQU   PSA+528
PSAPCCAR EQU   PSA+524
PSAPCCAV EQU   PSA+520
PSACPULA EQU   PSA+518
PSACPUPA EQU   PSA+516
PSAPSA   EQU   PSA+512
FLCHDEND EQU   PSA+512
FLCCRSAV EQU   FLCMCLA+280
FLCGRSAV EQU   FLCMCLA+216
FLCFPSAV EQU   FLCMCLA+184
FLCFLA   EQU   FLCMCLA+88
FLCRGNCD EQU   FLCMCLA+84
FLCFSAA  EQU   FLCFSA+1
@NM00020 EQU   FLCFSA
@NM00019 EQU   FLCMCLA+72
FLCMCIC  EQU   FLCMCLA+64
@NM00018 EQU   FLCMCLA+20
FLCIOAA  EQU   FLCIOA+1
@NM00017 EQU   FLCIOA
@NM00016 EQU   FLCMCLA+15
@NM00015 EQU   FLCMCLA+14
@NM00014 EQU   FLCMCLA+12
FLCLCL   EQU   FLCMCLA+8
FLCIOELA EQU   FLCIOEL+1
@NM00013 EQU   FLCIOEL
FLCCHNID EQU   FLCMCLA
@NM00012 EQU   PSA+160
FLCMTRCD EQU   PSA+157
@NM00011 EQU   PSA+156
FLCPERA  EQU   FLCPER+1
@NM00010 EQU   FLCPER
@NM00009 EQU   PSA+151
FLCPERCD EQU   PSA+150
FLCMCNUM EQU   PSA+149
@NM00008 EQU   PSA+148
FLCTEAA  EQU   FLCTEA+1
@NM00007 EQU   FLCTEA
PSAPIPC  EQU   PSAPICOD
PSAPIMC  EQU   PSAPICOD
PSAPIPER EQU   PSAPICOD
PSARV049 EQU   FLCPICOD
FLCPILCB EQU   FLCPIILC
@NM00006 EQU   FLCPIILC
@NM00005 EQU   PSAEPPSW
FLCSVCN  EQU   PSAESPSW+2
FLCSILCB EQU   FLCSVILC
@NM00004 EQU   FLCSVILC
@NM00003 EQU   PSAESPSW
FLCEICOD EQU   PSAEEPSW+2
PSASPAD  EQU   PSAEEPSW
@NM00002 EQU   PSA+128
FLCINPSW EQU   PSA+120
FLCMNPSW EQU   PSA+112
FLCPNPSW EQU   PSA+104
FLCSNPSW EQU   PSA+96
FLCENPSW EQU   PSA+88
FLCTRACE EQU   PSA+84
FLCTIMER EQU   PSA+80
FLCCVT2  EQU   PSA+76
FLCIOPSW EQU   PSA+56
FLCMOPSW EQU   PSA+48
FLCPOPSW EQU   PSA+40
FLCSOPSW EQU   PSA+32
FLCEOPSW EQU   PSA+24
@NM00001 EQU   FLCICCW2+4
FLCCVT   EQU   FLCICCW2
FLCICCW1 EQU   FLCROPSW
FLCIPPSW EQU   FLCRNPSW
.@UNREFD ANOP                          END UNREFERENCED COMPONENTS
@RT00207 EQU   CONRCBE
@RT00215 EQU   CONRCBE
@RT00219 EQU   ISSMSG
@RT00230 EQU   ISS29D
@RT00304 EQU   CONREC1
@RT00306 EQU   CONIO
@RT00308 EQU   CONDEVER
@RT00310 EQU   CONIO
CONIORET EQU   @EL00002
@PB00002 EQU   @EL00001
@RT00275 EQU   CONIORET
@ENDDATA EQU   *
         END   AMDSACON,(C'PL/S-II',0502,73230)
