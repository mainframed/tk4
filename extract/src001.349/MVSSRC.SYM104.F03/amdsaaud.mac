         TITLE 'AMDSAAUD  DUMP/ERROR RECOVERY FOR VIRTUAL DUMP         *
                       '
AMDSAAUD CSECT
         STM   R0,R15,AUDSAVE          SAVE CALLERS REGISTERS
         BALR  BASEREG,0
         USING *,BASEREG
*   VCCTREG = CTVCCT;               /* SET UP TO ADDRESS THE VCCT    */
         LH    @10,@CH00725                                     01S0180
         L     VCCTREG,CTVCCT(,@10)                             01S0180
*                                                               01S0181
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS SECTION OF CODE ISOLATES THE CURRENT RCB ON THE CHAIN.   */
*   /* THIS RCB BELONGS TO THE ROUTINE TO RECEIVE CONTROL IF         */
*   /* SUCCESSFUL RECOVERY IS POSSIBLE                               */
*   /*                                                               */
*   /*****************************************************************/
*/* P OBTAIN FIRST RCB FROM VCTRCB QUEUE                             */
*/* D (YES,,NO,DUMPCK) RCB ADDRESS > VCTLPA ?                        */
*/* P RCB ADDRESS = RCB ADDRESS - VCTLPA                             */
*                                                               01S0181
*   RESPECIFY RCB BASED (RCBADDR);                              01S0181
*   RCBADDR = VCTRCB;               /* OBTAIN FIRST RCB FROM THE
*                                      VCTRCB QUEUE                  */
         L     RCBADDR,VCTRCB(,VCCTREG)                         01S0182
*   IF RCBADDR > VCTLPA THEN                                    01S0183
         L     @10,VCTLPA(,VCCTREG)                             01S0183
         CR    RCBADDR,@10                                      01S0183
         BNH   @RF00183                                         01S0183
*     RCBADDR = RCBADDR - VCTLPA;   /* IF THE RCB IS A VIRTUAL  01S0184
*                                      ADDRESS MAKE IT A REAL ADDRESS
*                                      FOR USE BY AUDIT IN      01S0184
*                                      UNTRANSLATED MODE.            */
         SR    RCBADDR,@10                                      01S0184
*                                                               01S0185
*   /*****************************************************************/
*   /*                                                               */
*   /* DETERMINE IF A DUMP IS REQUESTED. IF YES, DETERMINE IF THE    */
*   /* DUMP CAN BE TAKEN AND CALL AUDUMP TO TAKE THE DUMP            */
*   /*                                                               */
*   /*****************************************************************/
*/*DUMPCK: D (YES,,NO,%AUDCTRL) VCTSADMP = 1 ? DUMP REQ ?            */
*/* D (YES,PGERCB,NO,) VCTRECVA = X'FFFF' ?                          */
*/* S (,%AUDCTRL) AUDUMP:TAKE DUMP OF SADUMP ERROR                   */
*                                                               01S0185
*   IF VCTSADMP = ON THEN           /* DUMP REQUESTED?               */
@RF00183 TM    VCTSADMP(VCCTREG),B'10000000'                    01S0185
         BNO   @RF00185                                         01S0185
*     DO;                                                       01S0186
*       IF VCTRECVA = MAXASID THEN                              01S0187
         CLC   VCTRECVA(2,VCCTREG),@CH00899                     01S0187
         BNE   @RF00187                                         01S0187
*         DO;                       /* OVER THE TOP IN NUMBER OF
*                                      SADUMP DUMPS OF SADUMP TAKEN  */
*                                                               01S0188
*   /*****************************************************************/
*   /*                                                               */
*   /* IF OVER DUMP LIMIT GIVE CONTROL TO AMDSAPGE RCB WITH A WAIT   */
*   /* STATE CODE                                                    */
*   /*                                                               */
*   /*****************************************************************/
*/*PGERCB: D (YES,PGEWAIT,NO,) RCBNEXT = 0 ?                         */
*/* P OBTAIN NEXT RCB ADDRESS FROM RCBNEXT                           */
*/* D (YES,,NO,PGERCB) RCB ADDRESS > VCTLPA ?                        */
*/* P (,PGERCB) RCB ADDRESS = RCB ADDRESS - VCTLPA ADDRESS           */
*/*PGEWAIT: N THIS IS THE AMDSAPGE RCB                               */
*/* P CTWAIT = X'2F'                                                 */
*                                                               01S0189
*           DO WHILE RCBNEXT ^= ZERO; /* GO SEARCHING FOR THE PGE RCB
*                                      - TOP ONE ON THE RCB QUEUE    */
         B     @DE00189                                         01S0189
@DL00189 DS    0H                                               01S0190
*             RCBADDR = RCBNEXT;    /* SET UP TO NEXT RCB ON QUEUE   */
         L     RCBADDR,RCBNEXT(,RCBADDR)                        01S0190
*             IF RCBADDR > VCTLPA THEN                          01S0191
         L     @10,VCTLPA(,VCCTREG)                             01S0191
         CR    RCBADDR,@10                                      01S0191
         BNH   @RF00191                                         01S0191
*               RCBADDR = RCBADDR - VCTLPA; /* ADJUST TO REAL ADDRESS*/
         SR    RCBADDR,@10                                      01S0192
*           END;                                                01S0193
@RF00191 DS    0H                                               01S0193
@DE00189 ICM   @10,15,RCBNEXT(RCBADDR)                          01S0193
         BNZ   @DL00189                                         01S0193
*           CTWAIT = AUDWAIT;       /* SET UP WAIT STATE CODE NO
*                                      RECOVERY                      */
         LH    @10,@CH00725                                     01S0194
         MVI   CTWAIT(@10),X'2F'                                01S0194
*         END;                                                  01S0195
*       ELSE                                                    01S0196
*         CALL AUDUMP;              /* TAKE A DUMP OF SADUMP         */
         B     @RC00187                                         01S0196
@RF00187 BAL   @14,AUDUMP                                       01S0196
*     END;                          /* DUMPCK END                    */
@RC00187 DS    0H                                               01S0198
*                                                               01S0198
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS SECTION OF CODE USES THE INPUT RCB IN RCBADDR AND SETS UP*/
*   /* TO PASS THE OWNER OF THE RCB ONTROL IN THE OWNER'S MODE       */
*   /*                                                               */
*   /*****************************************************************/
*/*%AUDCTRL: N THIS SECTION PASSES CONTROL TO RCB EXIT               */
*/* P VCTSADMP = ON                                                  */
*/* P R13 = RCBSAVE                                                  */
*/* P R14 = RCBEXIT                                                  */
*/* P R11 = RCBBASE                                                  */
*                                                               01S0198
*   RESPECIFY (R13,RETREG) RESTRICTED;                          01S0198
@RF00185 DS    0H                                               01S0199
*   RESPECIFY PSW BASED(ADDR(AUDPSW));                          01S0199
*   VCTSADMP = ON;                  /* RESTORE DUMP SWITCH (NORMAL
*                                      STATE)                        */
         OI    VCTSADMP(VCCTREG),B'10000000'                    01S0200
*   R13 = RCBSAVE;                  /* RESTORE SAVE AREA REGISTER OF
*                                      OWNER                         */
         L     R13,RCBSAVE(,RCBADDR)                            01S0201
*   RETREG = RCBEXIT;               /* SET UP THE RETURN REGISTER OF
*                                      OWNER                         */
         L     RETREG,RCBEXIT(,RCBADDR)                         01S0202
*                                                               01S0203
*   /*****************************************************************/
*   /*                                                               */
*   /* DETERMINE MEMORY STATE - IF UNTRANSLATED CONTROL GOES TO THE  */
*   /* OWNER . IF TRANSLATED, CONTROL REGISTER 1 MUST BE SET UP, THE */
*   /* LOOKASIDE BUFFER PURGED, AND ADDRESSES ADJUSTED TO VIRTUAL    */
*   /* ADDRESSES                                                     */
*   /*                                                               */
*   /*****************************************************************/
*/* D (NO,%RCBVIRT,YES,) RCBSTOR = 0 ?                               */
*/* P (,%BASE) SET UP NON-TRANSLATE MODE                             */
*/*%RCBVIRT: P LOAD CR 1 FROM RCBSTOR                                */
*/* P PURGE CPU LOOKASIDE BUFFER                                     */
*/* P SET UP TRANSLATE MODE FROM AUDMASK                             */
*                                                               01S0203
*   IF RCBSTOR = ZERO THEN                                      01S0203
         ICM   @15,15,RCBSTOR(RCBADDR)                          01S0203
         BNZ   @RF00203                                         01S0203
*     AUDPSW(1:4) = NODATPSW;       /* SET UP NON-DAT PSW            */
         MVC   AUDPSW(4),NODATPSW                               01S0204
*   ELSE                                                        01S0205
*     DO;                                                       01S0205
         B     @RC00203                                         01S0205
@RF00203 DS    0H                                               01S0206
*       WORKAREA = RCBSTOR;         /* SET UP CR1 FOR MEMORY         */
         MVC   WORKAREA(4),RCBSTOR(RCBADDR)                     01S0206
*       GEN REFS(WORKAREA) (LCTL  R1,R1,WORKAREA); /* INITIALIZE
*                                      CONTROL REG 1 WITH MEMORY
*                                      SEGMENT TABLE                 */
         LCTL  R1,R1,WORKAREA
*       GEN (PTLB);                 /* PURGE THE LOOK-ASIDE BUFFER   */
         PTLB
*       AUDPSW(1:4) = DATPSW;       /* SET UP DAT PSW                */
         MVC   AUDPSW(4),DATPSW                                 01S0209
*     END;                                                      01S0210
*   PSWIA = RETREG;                 /* SET UP RETURN ADDR IN PSW     */
@RC00203 LA    @15,AUDPSW                                       01S0211
         ST    RETREG,PSWIA(,@15)                               01S0211
*                                                               01S0212
*   /*****************************************************************/
*   /*                                                               */
*   /* SET UP BASE REGISTER AND RESTORE ALL REGISTERS BEFORE GIVING  */
*   /* CONTROL TO RCB EXIT ROUTINE                                   */
*   /*                                                               */
*   /*****************************************************************/
*/*%BASE: D (YES,,NO,%AUDSAVE) SAVE AREA REGISTERS RESTORE ?         */
*/* P RESTORE R15 - R10 FROM RCBSAVE                                 */
*/* P ENTER MODE SET UP EARLIER                                      */
*/* R RETURN TO OWNER VIA BR 14                                      */
*/*%AUDSAVE: P RESTORE REGISTERS FROM AUDSAVE AS ON ENTRY            */
*/* P ENTER MODE SET UP EARLIER                                      */
*/* R GIVE CONTROL TO RCB EXIT VIA BR 14                             */
*                                                               01S0212
*   RESPECIFY R10 RESTRICTED;                                   01S0212
*   R10 = RCBSAVE;                  /* ADDRESS THE RCB VIA REGISTER
*                                      10                            */
         L     R10,RCBSAVE(,RCBADDR)                            01S0213
*   RESPECIFY REGLOCAL BASED (ADDR(AUDSAVE));                   01S0214
*   IF R10 ^= REGL13 THEN                                       01S0215
         LA    @15,AUDSAVE                                      01S0215
         C     R10,REGL13(,@15)                                 01S0215
         BE    @RF00215                                         01S0215
*     DO;                                                       01S0216
*       IF R10 > VCTLPA THEN        /* VIRTUAL SAVE AREA ADDRESS     */
         L     @15,VCTLPA(,VCCTREG)                             01S0217
         CR    R10,@15                                          01S0217
         BNH   @RF00217                                         01S0217
*         DO;                       /* YES -                         */
*           R10 = R10 - VCTLPA;     /* GET REAL ADDRESS              */
         SR    R10,@15                                          01S0219
*           VCCTREG = VCTVCCTV;     /* SET UP VIRTUAL VCCT ADDRESS   */
         L     VCCTREG,VCTVCCTV(,VCCTREG)                       01S0220
*         END;                                                  01S0221
*       BASEREG = RCBBASE;          /* SET UP BASE REGISTER          */
@RF00217 L     BASEREG,RCBBASE(,RCBADDR)                        01S0222
*       GENERATE REFS(R10) SETS(R15,R0,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10);
         LM    R15,R10,16(R10)         RESTORE REST OF OWNERS REGS
*       LPSW (AUDPSW);              /* GIVE CONTROL TO RCB EXIT      */
         LPSW  AUDPSW                                           01S0224
*     END;                                                      01S0225
*   GENERATE REFS(AUDSAVE)                                      01S0226
*        SETS(R0,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15);
@RF00215 DS    0H                                               01S0226
         LM    R0,R15,AUDSAVE          RESTORE OWNERS REGISTERS
*   LPSW (AUDPSW);                  /* GIVE CONTROL TO RCB EXIT      */
         LPSW  AUDPSW                                           01S0227
*   RESPECIFY (R10,RETREG,R13) UNRESTRICTED;                    01S0228
*                                                               01S0229
*AUDUMP:                                                        01S0229
*   PROC OPTIONS(NOSAVE);                                       01S0229
*                                                               01S0229
         B     @PB00002                                         01S0229
AUDUMP   DS    0H                                               01S0230
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS ROUTINE PERFORMS THE DUMPING FUNCTION FOR VIRTUAL DUMP TO*/
*   /* TAKE STAND-ALONE DUMPS OF AMDSADMP                            */
*   /*                                                               */
*   /*****************************************************************/
*   /*****************************************************************/
*   /*                                                               */
*   /* AUDUMP DECLARED CONSTANTS                                     */
*   /*                                                               */
*   /*****************************************************************/
*                                                               01S0230
*   DCL                                                         01S0230
*         IODBOUT PTR (31) EXTERNAL NONLOCAL; /* USED FOR REFERENCE
*                                      TO OUTPUT IODB                */
*   DCL                                                         01S0231
*         DUMPLOC FIXED (31);       /* CURRENT DUMP LOCATION COUNTER */
*   DCL                                                         01S0232
*         DUMPINCR FIXED(31) CONSTANT(4096); /* DUMP INCREMENTS      */
*   DCL                                                         01S0233
*         MAXDUMP FIXED (31) CONSTANT (131072); /* HIGHEST SADUMP
*                                      LOCATION DUMPED               */
*   DCL                                                         01S0234
*         INITLOC FIXED (8) CONSTANT(0); /* INITIAL DUMP LOCATION    */
*   DCL                                                         01S0235
*         ASID17I CHAR(4) EXTERNAL NONLOCAL; /* ASID FOR MSG 17I     */
*   DCL                                                         01S0236
*         MOD17I CHAR(8) EXTERNAL NONLOCAL; /* MODULE FOR MSG 17I    */
*   DCL                                                         01S0237
*         LNG17I CHAR(1) EXTERNAL NONLOCAL; /* LENGTH FOR MSG 17I    */
*   DCL                                                         01S0238
*         1 MODNME17 CHAR(8),                                   01S0238
*             3 * CHAR(5) INIT('AMDSA'),                        01S0238
*             3 MODNAME CHAR(3);                                01S0238
*   DCL                                                         01S0239
*         UNKNOWN CHAR(8) INIT('UNKNOWN');                      01S0239
*   DCL                                                         01S0240
*         1 AUDSWTCH BIT(8) INIT('00'X), /* SWITCHES                 */
*             3 AUDINT BIT(1);      /* INTERRUPT RECEIVED DURING DUMP
*                                      PROCESSING                    */
*   DCL                                                         01S0241
*         1 SADUMP BDY(WORD),       /* MAPPING FOR SADUMP HEADER FOR
*                                      VIRTUAL DUMPS                 */
*             3 SAKEY1 PTR(8) INIT('00'X), /* AMDSADMP STORAGE KEY 1
*                                      - ALWAYS ZERO                 */
*             3 SAKEY2 PTR(8) INIT('00'X), /* AMDSADMP STORAGE KEY 2
*                                      - ALWAYS ZERO                 */
*             3 SAASID FIXED (15),  /* ASID OF AMDSADMP DUMP         */
*             3 SARADDR PTR (31);   /* REAL ADDRESS OF STORAGE DUMPED*/
*   DCL                                                         01S0242
*         1 AUDCCW BDY(DWORD),      /* AUDIT DUMP CCW'S              */
*             3 AUDCCW1 BDY(DWORD), /* HEADER DUMP CCW               */
*                 5 AUDCCWCD CHAR(1) INIT('01'X), /* TAPE WRITE 01S0242
*                                      COMMAND                       */
*                 5 AUDCCWAD PTR(24) INIT(ADDR(SADUMP)), /* HEADER
*                                      DEFINITION                    */
*                 5 AUDFLGS CHAR (4) INIT('A0000008'X), /* COMMAND
*                                      CHAIN CCW WITH SUPRESS   01S0242
*                                      INCORRECT LENGTH ON WRITING
*                                      THE 8 BYTE HEADER             */
*             3 AUDCCW2 CHAR(8) BDY(DWORD) INIT('0100000020001000'X);
*                                   /* A TAPE WRITE CCW WITH INCORECT
*                                      LENGTH ON, WRITING A 4K  01S0243
*                                      RECORD. THE ADDRESS IS FILLED
*                                      IN DYNAMICALLY DURING THE DUMP
*                                      CYCLE                         */
*   DCL                                                         01S0243
*         TIC BIT(8) CONSTANT('08'X); /* CCW TIC COMMAND             */
*   DCL                                                         01S0244
*         NOP BIT(8) CONSTANT('03'X); /* CCW NOP COMMAND             */
*   DCL                                                         01S0245
*         1 CVTBLK BDY (WORD),      /* CONVERT PARAMETER LIST        */
*             3 CVTBINA PTR(31) INIT                            01S0245
*               (ADDR(SAASID)),     /* ASID TO CONVERT               */
*             3 CVTEBCA PTR(31),    /* ASID ADDRESS                  */
*             3 CVTBINL FIXED (15) INIT(2); /* LENGTH OF ASID TO
*                                      CONVERT                       */
*   DCL                                                         01S0246
*         1 AUDSAVEA BDY (WORD),    /* CONVERT PARAMETER LIST        */
*             3 AUDSAVID CHAR(1) INIT('L'), /* SAVE AREA IDENTIFIER  */
*             3 AUDID CHAR(3) INIT('AUD'), /* SAVE AREA NAME         */
*             3 AUDREGS CHAR(68);   /* SAVE AREA REGISTERS           */
*   DCL                                                         01S0247
*         AUDR14 FIXED(31);         /* SAVE AREA FOR R14             */
*   DCL                                                         01S0248
*       AUDCSW CHAR(LENGTH(CSW));    /* CSW SAVE AREA        @YM08294*/
*                                                               01S0249
*   /*****************************************************************/
*   /*                                                               */
*   /* INITIALLY OBTAIN THE OUTPUT IODB FOR OBTAINING DEVICE TYPE    */
*   /* INFORMATION                                                   */
*   /*                                                               */
*   /*****************************************************************/
*/*AUDUMP: E AUDIT DUMP SUBROUTINE                                   */
*/* P OBTAIN OUTPUT IODB                                             */
*                                                               01S0249
*   RESPECIFY IODB BASED (ADDR(IODBOUT));                       01S0249
*   RESPECIFY R13 RESTRICTED;                                   01S0250
*   RESPECIFY R14 RESTRICTED;                                   01S0251
*   RESPECIFY SAVEFORM BASED(R13);                              01S0252
*   AUDR14 = RETREG;                /* SET UP REGISTER 14 SAVE AREA
*                                      FOR RETURN                    */
         LR    AUDR14,RETREG                                    01S0253
*   RESPECIFY R14 UNRESTRICTED;                                 01S0254
*   R13 = ADDR(AUDSAVEA);           /* SET UP R13 SAVE AREA          */
         LA    R13,AUDSAVEA                                     01S0255
*   LNG17I = LENGTH(ASID17I) + 12;  /* INITIALIZE SECONDARY LENGTH,
*                                      INCLUDING DUMP ASID= PORTION  */
         L     @10,@CA00929                                     01S0256
         MVI   LNG17I-LNG17I(@10),X'10'                         01S0256
*   AUDINT = OFF;                   /* NO INTERRUPT RECEIVED YET     */
         NI    AUDINT,B'01111111'                               01S0257
*                                                               01S0258
*   /*****************************************************************/
*   /*                                                               */
*   /* NOW THE DEVICE STATE MUST BE EXAMINED. IF A CATASTROPHIC ERROR*/
*   /* HAS OCCURRED ON THE DEVICE NO DUMP CAN BE TAKEN AND CONTROL   */
*   /* WILL BE PASSED DIRECTLY TO AMDSAPGE FOR VIRTUAL DUMP          */
*   /* TERMINATION AS NO FURTHER I/O CAN OCCUR ON THE OUTPUT DEVICE. */
*   /* ALSO TERMINATE IF TERMINATION I/O IS IN PROGRESS SINCE THE    */
*   /* OUTPUT TAPE MAY HAVE BEEN REWOUND ALREADY.                    */
*   /*                                                               */
*   /*****************************************************************/
*/* D (NO,,YES,%PGERCB) CTIOTERM = 1 ?                               */
*/* D (YES,,NO,%TAKEDMP) IODBPTRM = 1 ?                              */
*/*%PGERCB: D (YES,%PGEWAIT,NO,) RCBNEXT = 0 ?                       */
*/* P OBTAIN RCB ADDRESS FROM RCBNEXT                                */
*/* D (YES,,NO,%PGERCB) RCB ADDRESS > VCTLPA ?                       */
*/* P (,%PGERCB) RCB ADDRESS = RCB ADDRESS - VCTLPA ADDRESS          */
*/*%PGEWAIT: N (,%DMPRET2) THIS IS THE AMDSAPGE RCB                  */
*                                                               01S0258
*   IF IODBPTRM = ON × CTIOTERM = ON THEN                       01S0258
         L     @10,@CA00920                                     01S0258
         TM    IODBPTRM(@10),B'01000000'                        01S0258
         BO    @RT00258                                         01S0258
         LH    @10,@CH00725                                     01S0258
         TM    CTIOTERM(@10),B'10000000'                        01S0258
         BNO   @RF00258                                         01S0258
@RT00258 DS    0H                                               01S0259
*     DO WHILE RCBNEXT ^= ZERO;                                 01S0259
         B     @DE00259                                         01S0259
@DL00259 DS    0H                                               01S0260
*       RCBADDR = RCBNEXT;                                      01S0260
         L     RCBADDR,RCBNEXT(,RCBADDR)                        01S0260
*       IF RCBADDR > VCTLPA THEN                                01S0261
         L     @10,VCTLPA(,VCCTREG)                             01S0261
         CR    RCBADDR,@10                                      01S0261
         BNH   @RF00261                                         01S0261
*         RCBADDR = RCBADDR - VCTLPA;                           01S0262
         SR    RCBADDR,@10                                      01S0262
*     END;                                                      01S0263
@RF00261 DS    0H                                               01S0263
@DE00259 ICM   @10,15,RCBNEXT(RCBADDR)                          01S0263
         BNZ   @DL00259                                         01S0263
*                                                               01S0264
*   /*****************************************************************/
*   /*                                                               */
*   /* OTHERWISE A DUMP CAN BE TAKEN. THE CCT MUST BE INITIALIZED AND*/
*   /* REGISTERS SET UP FOR DUMPSIO IN AMDSAHSR TO PROCESS. IN       */
*   /* ADDITION, AMDSATAP MUST BE CALLED TO INSURE THAT DUMPSIO      */
*   /* RECEIVES CONTROL ON THE IPLED CPU FOR DUMPING TO THE OUTPUT   */
*   /* TAPE. DUMPSIO WILL HANDLE ERROR RECOVERY                      */
*   /*                                                               */
*   /*****************************************************************/
*/*%TAKEDMP: L AMDSATAP: SVC 2 ENTER ON PROPER CPU                   */
*/* D (YES,,NO,NODUMP) ON PROPER CPU ?                               */
*/* P MOVE ASID FROM VCTRECVA INTO HDR                               */
*/* P VCTRECVA = VCTRECVA + 1                                        */
*/* P R12 = ADDRESS OF CCT                                           */
*/* P R10 = CTOUTAD                                                  */
*/* P DUMPLOC = X'0000'                                              */
*/* P CTDEVICE = 0                                                   */
*/* N HDR FORMAT IS KEY1, KEY2, ASID, REAL ADDRESS                   */
*                                                               01S0264
*   ELSE                                                        01S0264
*                                                               01S0264
*DMP:                                                           01S0264
*     DO;                                                       01S0264
         B     @RC00258                                         01S0264
@RF00258 DS    0H                                               01S0264
DMP      DS    0H                                               01S0265
*       SAVECTIO = CTIOTYPE;        /* SAVE ORIGINAL CTIOTYPE        */
         LH    @10,@CH00725                                     01S0265
         SR    SAVECTIO,SAVECTIO                                01S0265
         IC    SAVECTIO,CTIOTYPE(,@10)                          01S0265
*       CTIOTYPE = OFF;             /* RESET FLAGS FOR CALL TO  01S0266
*                                      AMDSATAP                      */
         MVI   CTIOTYPE(@10),B'00000000'                        01S0266
*       CTIOOUT = ON;               /* OUTPUT I/O IN PROGRESS        */
         OI    CTIOOUT(@10),B'01000000'                         01S0267
*       SVC (TAPSVC);               /* ENTER IPLED CPU               */
         SVC   2                                                01S0268
*       RESPECIFY RETCODE RESTRICTED;                           01S0269
*       CTIOTYPE = SAVECTIO;        /* RESTORE ORIGINAL I/O REQUEST
*                                      FLAGS                         */
         LH    @14,@CH00725                                     01S0270
         STC   SAVECTIO,CTIOTYPE(,@14)                          01S0270
*       IF RETCODE = ZERO THEN                                  01S0271
*                                                               01S0271
         LTR   RETCODE,RETCODE                                  01S0271
         BNZ   @RF00271                                         01S0271
*NMDMP:                                                         01S0272
*         DO;                       /* IF ON PROPER CPU THEN PERFORM
*                                      DUMP                          */
NMDMP    DS    0H                                               01S0273
*           RESPECIFY RETCODE UNRESTRICTED;                     01S0273
*           SAASID = VCTRECVA;      /* SET UP DUMP ASID              */
         SR    @10,@10                                          01S0274
         ICM   @10,3,VCTRECVA(VCCTREG)                          01S0274
         STH   @10,SAASID                                       01S0274
*           VCTRECVA = VCTRECVA + 1; /* INCREMENT DUMP COUNTER BY ONE*/
         AH    @10,@CH00067                                     01S0275
         STH   @10,VCTRECVA(,VCCTREG)                           01S0275
*           RESPECIFY (R10,R12) RESTRICTED;                     01S0276
*           R12 = CCTADDR;          /* OBTAIN REAL ADDRESS OF CCT FOR
*                                      AMDSAHSR                      */
         LH    R12,@CH00725                                     01S0277
*           R10 = CTOUTAD;         /* SET UP DEVICE ADDRESS FOR 01S0278
*                                      AMDSAHSR                      */
         LH    @07,@CH00725                                     01S0278
         LH    R10,CTOUTAD(,@07)                                01S0278
*           DUMPLOC = INITLOC;      /* INITIALIZE STARTING DUMP 01S0279
*                                      LOCATION COUNTER              */
         SR    DUMPLOC,DUMPLOC                                  01S0279
*           CTDEVICE = OFF;         /* INDICATE I/O TO THE OUTPUT
*                                      TAPE DEVICE                   */
         NI    CTDEVICE(@07),B'10111111'                        01S0280
*                                                               01S0281
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS SECTION WAITS FOR COMPLETION OF I/O ON THE OUTPUT        */
*   /* VOLUME, IF ANY I/O WAS ACTIVE.  IF AN INTERRUPT IS RECEIVED,  */
*   /* THE CSW IS SAVED SO THAT IT MAY BE PROCESSED BY AMDSAIOI.     */
*   /* IF ANY I/O ERROR OCCURRED, NO DUMP IS TAKEN.                  */
*   /*                                                               */
*   /*****************************************************************/
*/*AUDTIO: I TEST I/O                                                */
*/* D (NO,,YES,DUMPLOOP) AVAILABLE                                   */
*/* D (YES,,NO,AUDTIO) CSW STORED                                    */
*/* P INDICATE INTERRUPT RECEIVED                                    */
*/* P SAVE CSW IN OUTPUT IODB                                        */
*/* D (NO,,YES,NODUMP) I/O ERROR                                     */
*/* D (YES,,NO,AUDTIO) DEVICE END RECEIVED                           */
*/* D (YES,,NO,DUMPLOOP) UNIT EXCEP                                  */
*/* S DUMPUE: HANDLE END OF REEL                                     */
*/* D (NO,,YES,NODUMP) ERROR DURING EOR                              */
*/* P RESET UNIT EXCEP FLAG IN CSW                                   */
*/* D (NO,,YES,%UPDTCCW) CCW CMD = TIC                               */
*/* D (NO,DUMPLOOP,YES,) CCW CMD = NOP                               */
*/*%UPDTCCW: P POINT CSW TO NEXT CCW                                 */
*                                                               01S0281
*                                                               01S0281
*AUDTIO:                                                        01S0281
*   AUDINT = OFF;                   /* NO INTERRUPT                  */
AUDTIO   NI    AUDINT,B'01111111'                               01S0281
*   TIO (R10);                      /* TEST I/O ON OUTPUT DEVICE     */
         TIO   0(R10)                                           01S0282
*   BC (8,DUMPLOOP);                /* AVAILABLE - NO I/O ACTIVE     */
         BC    8,DUMPLOOP                                       01S0283
*   BC (3,AUDTIO);                  /* BUSY OR NOT OPER - CHECK AGAIN*/
         BC    3,AUDTIO                                         01S0284
*   AUDCSW = FLCCSW;       /* CSW STORED - SAVE FOR IOI      @YM08294*/
         MVC   AUDCSW(8),FLCCSW                                 01S0285
*   RESPECIFY CSW BASED(ADDR(AUDCSW));                     /*@YM08294*/
*   AUDINT = ON;                    /* INTERRUPT RECEIVED            */
         OI    AUDINT,B'10000000'                               01S0287
*   IF CSWATTN=ON×CSWUC=ON×CSWIL=ON×CSWPGC=ON×CSWPTC=ON×CSWCDC=ON×
*    CSWCCC=ON×CSWICC=ON×CSWCHC=ON THEN /* ANY I/O ERROR             */
         LA    @07,AUDCSW                                       01S0288
         TM    CSWATTN(@07),B'10000010'                         01S0288
         BNZ   @RT00288                                         01S0288
         TM    CSWIL(@07),B'01111111'                           01S0288
         BNZ   @RT00288                                         01S0288
*     GO TO NODUMP;                 /* YES - SKIP DUMP               */
*   IF CSWDE ^= ON THEN             /* DEVICE END RECEIVED YET       */
         TM    CSWDE(@07),B'00000100'                           01S0290
         BNO   @RT00290                                         01S0290
*     GO TO AUDTIO;                 /* NO - WAIT FOR DEVICE END      */
*   IF CSWUE = ON THEN              /* UNIT EXCEPTION                */
         TM    CSWUE(@07),B'00000001'                           01S0292
         BNO   @RF00292                                         01S0292
*     DO;                           /* YES - HANDLE END OF REEL      */
*       CALL DUMPUE;                /* HANDLE END OF REEL            */
         BAL   @14,DUMPUE                                       01S0294
*       RESPECIFY RETCODE RESTRICTED;                           01S0295
*       IF RETCODE ^= 0 THEN        /* ERROR DURING EOR              */
         LTR   RETCODE,RETCODE                                  01S0296
         BNZ   @RT00296                                         01S0296
*         GO TO NODUMP;             /* YES - SKIP DUMP               */
*       CSWUE = OFF;                /* END OF REEL HANDLED           */
         LA    @14,AUDCSW                                       01S0298
         NI    CSWUE(@14),B'11111110'                           01S0298
*       RESPECIFY CCW BASED(CSWCADDR);                          01S0299
*       IF (CCWCMD = TIC) × (CCWCMD = NOP) THEN /* DID EOR OCCUR ON
*                                      A TIC OR NOP                  */
         SR    @07,@07                                          01S0300
         ICM   @07,7,CSWCADDR(@14)                              01S0300
         CLI   CCWCMD(@07),8                                    01S0300
         BE    @RT00300                                         01S0300
         CLI   CCWCMD(@07),3                                    01S0300
         BNE   @RF00300                                         01S0300
@RT00300 DS    0H                                               01S0301
*         CSWCADDR = CSWCADDR + LENGTH(CCW); /* YES - POINT CSW TO NEXT
*                                      CCW FOR AMDSAIOB              */
         LA    @14,AUDCSW                                       01S0301
         LA    @07,8                                            01S0301
         SR    @09,@09                                          01S0301
         ICM   @09,7,CSWCADDR(@14)                              01S0301
         AR    @07,@09                                          01S0301
         STCM  @07,7,CSWCADDR(@14)                              01S0301
*       RESPECIFY RETCODE UNRESTRICTED;                         01S0302
@RF00300 DS    0H                                               01S0303
*     END;                                                      01S0303
*                                                               01S0303
*   /*****************************************************************/
*   /*                                                               */
*   /* THE DUMPLOOP SECTION OF CODE WILL DUMP REAL STORAGE IN 4K     */
*   /* BLOCKS                                                        */
*   /*                                                               */
*   /*****************************************************************/
*/*DUMPLOOP: N CCW'S ARE WRITE HDR, WRITE 4K DUMP RECORD             */
*/* P STORE DUMPLOC INTO WRITE CCW ADDRESS FIELD                     */
*/* P STORE DUMPLOC INTO HEADER                                      */
*                                                               01S0304
*           RESPECIFY CCW BASED (ADDR(AUDCCW2));                01S0304
*                                                               01S0304
@RF00292 DS    0H                                               01S0305
*DUMPLOOP:                                                      01S0305
*           DO WHILE DUMPLOC < MAXDUMP; /* DUMP FROM 0 TO X'20000'   */
DUMPLOOP B     @DE00305                                         01S0305
@DL00305 DS    0H                                               01S0306
*             CCWDADDR = DUMPLOC;   /* SET LOCATION TO DUMP FROM IN
*                                      THE CCW                       */
         LA    @07,AUDCCW2                                      01S0306
         STCM  DUMPLOC,7,CCWDADDR(@07)                          01S0306
*             SARADDR = DUMPLOC;    /* SET REAL ADDRESS IN HEADER FOR
*                                      AMDPRDMP                      */
         ST    DUMPLOC,SARADDR                                  01S0307
*                                                               01S0308
*   /*****************************************************************/
*   /*                                                               */
*   /* NOW THE PROGRAM INTERFACES TO AMDSAHSR DUMPSIO ROUTINE-       */
*   /* REGISTERS ARE SAVED AND RESTORED AROUND THE CALL              */
*   /*                                                               */
*   /*****************************************************************/
*/* P CTERREC = 1                                                    */
*/* P CTERROR = 0                                                    */
*/* P SAVE AUDIT REGISTERS                                           */
*/* P R11 = ADDRESS OF DUMP CCW'S                                    */
*/* P R14 = CTCOMMIO                                                 */
*/* N R13 IS RETURN REGISTER                                         */
*/* L AMDSAHSR: CALL DUMPSIO SUBROUTINE TO DUMP TO OUTPUT TAPE       */
*/* P RESTORE AUDIT REGISTERS                                        */
*                                                               01S0308
*             RESPECIFY (BASEREG,RETREG,RETCODE) RESTRICTED;    01S0308
*             CTERREC = ON;         /* SET UP CATASTROPHIC ERRORS
*                                      HANDLED BY AUDIT              */
*             CTERROR = OFF;        /* ALLOW NORMAL AMDSAHSR ERROR
*                                      RECOVERY                      */
         LH    @07,@CH00725                                     01S0310
         OI    CTERREC(@07),B'00000001'                         01S0310
         NI    CTERROR(@07),B'01111111'                         01S0310
*             GENERATE SETS(LOWGRS)                             01S0311
*         REFS(R0,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15);
         STM   R0,R15,LOWGRS           SAVE AUDIT REGISTERS
*                                      ACROSS AMDSAHSR CALL
*             RESPECIFY (BASEREG,RETREG) RESTRICTED;            01S0312
*             BASEREG = ADDR(AUDCCW); /* DUMPSIO REQUIRES CCW ADDRESS
*                                      IN R11                        */
         LA    BASEREG,AUDCCW                                   01S0313
*             RETREG = R12 -> CTCOMMIO; /*DUMPSIO ADDRESS IN AMDSAHSR*/
         L     RETREG,CTCOMMIO(,R12)                            01S0314
*             GEN REFS(RETREG) SETS(R13) (BALR  R13,RETREG); /* GO TO
*                                      DUMPSIO                       */
         BALR  R13,RETREG
*             GENERATE REFS(LOWGRS)                             01S0316
*         SETS(R0,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15);
         LM    R0,R15,LOWGRS           RESTORE AUDIT REGISTERS
*                                      ACROSS AMDSAHSR CALL
*                                                               01S0317
*   /*****************************************************************/
*   /*                                                               */
*   /* NOW WE MUST CHECK IF ANY CATASTROPHIC ERRORS OCCURRED, IF SO  */
*   /* ONLY A PARTIAL DUMP HAS BEEN TAKEN, AND WE MUST TERMINATE,    */
*   /* OTHERWISE, DUMPLOC CAN BE BUMPED BY 4K AND DUMPING CONTINUED  */
*   /* UNTIL ALL AMDSADMP STORAGE HAS BEEN DUMPED. THE NORMAL ERROR  */
*   /* CONDITION HANDLED IS END OF REEL.                             */
*   /*                                                               */
*   /*****************************************************************/
*/* D (YES,DUMPART,NO,) CTERREC = 0 ?                                */
*/* D (YES,,NO,%DI) EOR ?                                            */
*/* S DUMPUE: HANDLE END OF REEL                                     */
*/* D (YES,,NO,%DI) ERROR IN EOR ?                                   */
*/* P (,MSGNAME) IODBTERM = ON                                       */
*/*%DI: P DUMPLOC = DUMPLOC + X'1000'                                */
*/* D (YES,,NO,DUMPLOOP) DUMPLOC >= X'20000' ?                       */
*                                                               01S0317
*             IF CTERREC = OFF THEN                             01S0317
         LH    @07,@CH00725                                     01S0317
         TM    CTERREC(@07),B'00000001'                         01S0317
         BNZ   @RF00317                                         01S0317
*               DO;                 /* DID AN I/O ERROR OCCUR ?      */
*                 IODBTERM = ON;    /* YES, SET TERMINAL ERROR ON
*                                      OUTPUT TAPE                   */
         L     @07,@CA00920                                     01S0319
         OI    IODBTERM(@07),B'10000000'                        01S0319
*                 GO TO MSGNAME;    /* TELL OPERATOR THE SITUATION   */
         B     MSGNAME                                          01S0320
*               END;                                            01S0321
*             ELSE                                              01S0322
*                                                               01S0322
*DUMPDE:                                                        01S0322
*               DO;                                             01S0322
@RF00317 DS    0H                                               01S0322
DUMPDE   DS    0H                                               01S0323
*                 RESPECIFY CSW BASED (ADDR(FLCCSW));           01S0323
*                 IF CSWUE = ON THEN                            01S0324
         LA    @07,FLCCSW                                       01S0324
         TM    CSWUE(@07),B'00000001'                           01S0324
         BNO   @RF00324                                         01S0324
*                   DO;             /* IF UNIT EXCEPTION = EOR, 01S0325
*                                      HANDLE                        */
*                     CALL DUMPUE; /* HANDLE EOR                     */
         BAL   @14,DUMPUE                                       01S0326
*                     IF RETCODE ^= ZERO THEN                   01S0327
         LTR   RETCODE,RETCODE                                  01S0327
         BZ    @RF00327                                         01S0327
*                       DO;         /* EOR HANDLED OKAY ?            */
*                         IODBTERM = ON; /* NO CATASTROPHIC ERROR -
*                                      SET UP TO TERMINATE VIRTUAL
*                                      DUMP                          */
         L     @07,@CA00920                                     01S0329
         OI    IODBTERM(@07),B'10000000'                        01S0329
*                         GO TO MSGNAME; /* OUTPUT DIAGNOSTIC MESSAGE
*                                      TO OPERATOR                   */
         B     MSGNAME                                          01S0330
*                       END;                                    01S0331
*                     RESPECIFY (RETREG,RETCODE) UNRESTRICTED;  01S0332
@RF00327 DS    0H                                               01S0333
*                   END;                                        01S0333
*               END DUMPDE;                                     01S0334
@RF00324 DS    0H                                               01S0335
*             DUMPLOC = DUMPLOC + DUMPINCR; /* BUMP TO DUMP NEXT 4K
*                                      INCREMENT                     */
         AH    DUMPLOC,@CH00923                                 01S0335
*           END DUMPLOOP;                                       01S0336
@DE00305 C     DUMPLOC,@CF00925                                 01S0336
         BL    @DL00305                                         01S0336
*                                                               01S0337
*   /*****************************************************************/
*   /*                                                               */
*   /* WHEN ALL AMDSADMP STORAGE HAS BEEN DUMPED, THE MESSAGE WILL BE*/
*   /* PRODUCED. THEN A RETURN VIA A BR 14 WILL BE MADE TO THE CALLER*/
*   /*                                                               */
*   /*****************************************************************/
*/*MSGNAME: P MOVE MODULE NAME INTO MOD17I FROM ENTRY R13 SAVE AREA  */
*/* L AMDSABIN: SVC 28 CONVERT ASID TO EBCDIC                        */
*/* P MOVE CONVERTED ASID INTO ASID17I                               */
*/* L (,%DMPRET) AMDSACON: OUTPUT MSG AMD017I TO CONSOLE             */
*/*NODUMP: P (,MSGNAME) NO ASID IN MESSAGE                           */
*/*DUMPART: P (,MSGNAME) SET IODBTERM ON IN OUTPUT IODB              */
*/*%DMPRET: D (NO,,YES,%RSTRTIO) WAS AN INTERRUPT RECEIVED           */
*/*%DMPRET2: R RETURN TO CALLER                                      */
*/*%RSTRTIO: P MOVE CSW FROM IODB TO LOW CORE                        */
*/* L  AMDSAIOB:  HANDLE INTERRUPT                                   */
*/* R RETURN TO CALLER                                               */
*                                                               01S0337
*         END NMDMP;                                            01S0337
*       ELSE                                                    01S0338
*                                                               01S0338
*NODUMP:                                                        01S0338
*         LNG17I = 0;               /* INDICATE NO SECONDARY MESSAGE */
*                                                               01S0338
         B     @RC00271                                         01S0338
@RF00271 DS    0H                                               01S0338
NODUMP   L     @07,@CA00929                                     01S0338
         MVI   LNG17I-LNG17I(@07),X'00'                         01S0338
*MSGNAME:                                                       01S0339
*       RESPECIFY R1 RESTRICTED;                                01S0339
@RC00271 DS    0H                                               01S0339
MSGNAME  DS    0H                                               01S0340
*       RESPECIFY REGLOCAL BASED (ADDR(AUDSAVE));               01S0340
*       RESPECIFY SAVEFORM BASED (REGL13-R1);                   01S0341
*       VCCTREG = CTVCCT;           /* GET ADDRESS OF VCCT           */
         LH    @07,@CH00725                                     01S0342
         L     VCCTREG,CTVCCT(,@07)                             01S0342
*       R1 = 0;                     /* ZERO DECREMENT                */
         SR    R1,R1                                            01S0343
*       IF REGL13 >= VCTLPA THEN    /* ERROR IN TRANSLATED MODE      */
         LA    @07,AUDSAVE                                      01S0344
         L     @05,VCTLPA(,VCCTREG)                             01S0344
         C     @05,REGL13(,@07)                                 01S0344
         BH    @RF00344                                         01S0344
*         R1 = VCTLPA;              /* YES - SUBTRACT LPA ADDRESS    */
         LR    R1,@05                                           01S0345
*       MOD17I = UNKNOWN;           /* SET UP UNKNOWN MODULE NAME    */
@RF00344 L     @07,@CA00928                                     01S0346
         MVC   MOD17I-MOD17I(8,@07),UNKNOWN                     01S0346
*       IF (SAVENAME >= 'AAA') & (SAVENAME <= 'ZZZ') THEN /* IS MODULE
*                                      NAME EBCDIC                   */
         LA    @05,AUDSAVE                                      01S0347
         L     @05,REGL13(,@05)                                 01S0347
         SR    @05,R1                                           01S0347
         CLC   SAVENAME(3,@05),@CC01001                         01S0347
         BL    @RF00347                                         01S0347
         CLC   SAVENAME(3,@05),@CC01002                         01S0347
         BH    @RF00347                                         01S0347
*         DO;                                                   01S0348
*           MODNAME = SAVENAME;     /* GET MODULE NAME               */
         MVC   MODNAME(3),SAVENAME(@05)                         01S0349
*           MOD17I = MODNME17;      /* SET UP MODULE NAME            */
         MVC   MOD17I-MOD17I(8,@07),MODNME17                    01S0350
*         END;                                                  01S0351
*       CVTEBCA = ADDR (ASID17I);   /* CONVERT ASID TO EBCDIC        */
@RF00347 L     @07,@CA00927                                     01S0352
         ST    @07,CVTEBCA                                      01S0352
*       R1 = ADDR(CVTBLK);          /* ADDRESS OF CONVERT PARAMETER
*                                      LIST                          */
         LA    R1,CVTBLK                                        01S0353
*       SVC (BINSVC);                                           01S0354
         SVC   28                                               01S0354
*       R1 = AMD017I;                                           01S0355
         LA    R1,17                                            01S0355
*       SVC (CONSVC);                                           01S0356
         SVC   3                                                01S0356
*       RESPECIFY R1 UNRESTRICTED;                              01S0357
*     END DMP;                                                  01S0358
*   IF AUDINT = ON THEN             /* WAS AN INTERRUPT RECEIVED     */
@RC00258 TM    AUDINT,B'10000000'                               01S0359
         BNO   @RF00359                                         01S0359
*     DO;                           /* YES - HANDLE INTERRUPT        */
*       FLCCSW = AUDCSW;            /* RESTORE CSW TO LOW CORE      */
         MVC   FLCCSW(8),AUDCSW                                 01S0361
*       SVC (IOBSVC);               /* CALL AMDSAIOI VIA BRANCH ENTRY*/
         SVC   27                                               01S0362
*     END;                                                      01S0363
*   RESPECIFY RETREG RESTRICTED;                                01S0364
@RF00359 DS    0H                                               01S0365
*   RETREG = AUDR14;                /* RESTORE RETURN REGISTER TO
*                                      CALLER                        */
         LR    RETREG,AUDR14                                    01S0365
*   RESPECIFY RETREG UNRESTRICTED;                              01S0366
*   END AUDUMP;                     /* RETURN TO CALLER              */
@EL00002 DS    0H                                               01S0367
@EF00002 DS    0H                                               01S0367
@ER00002 BR    @14                                              01S0367
*                                                               01S0368
*   /*****************************************************************/
*   /*                                                               */
*   /* THIS SUBROUTINE PROVIDES AN INTERFACE TO THE END-OF-REEL      */
*   /* (EOR) ROUTINE IN AMDSAHSR.  THE RETURN CODE FROM EOR IS       */
*   /* PASSED BACK TO THE CALLER.                                    */
*   /*                                                               */
*   /*****************************************************************/
*/*DUMPUE: E EOR                                                     */
*/* P CTERREC = OFF                                                  */
*/* P CTERROR = OFF                                                  */
*/* P SAVE AUDIT'S REGISTERS                                         */
*/* P R15 = CTEOR                                                    */
*/* S AMDSAHSR: CALL END OF REEL ROUTINE                             */
*/* R RETURN                                                         */
*/*AMDSAAUD: END                                                     */
*                                                               01S0368
*                                                               01S0368
*DUMPUE:                                                        01S0368
*   PROC OPTIONS(NOSAVE,NOSAVEAREA);                            01S0368
DUMPUE   DS    0H                                               01S0369
*   RESPECIFY (RETREG,RETCODE) RESTRICTED;                      01S0369
*   CTERREC = OFF;                  /* RESET ERROR FLAGS FOR EOR
*                                      SUBROUTINE                    */
*   CTERROR = OFF;                   /* RESET ERROR FLAGS FOR EOR
*                                      SUBROUTINE                    */
         LH    @07,@CH00725                                     01S0371
         NI    CTERREC(@07),B'01111110'                         01S0371
*   GENERATE SETS(LOWGRS)                                       01S0372
*         REFS(R0,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15);
         STM   R0,R15,LOWGRS           SAVE AUDIT REGISTERS
*                                      ACROSS AMDSAHSR (EOR) CALL
*   RETCODE = CTEOR;                /* SET UP BRANCH REGISTER FOR
*                                      BALR TO EOR                   */
         LH    @07,@CH00725                                     01S0373
         L     RETCODE,CTEOR(,@07)                              01S0373
*   GEN REFS(RETCODE) SETS(RETREG) (BALR  RETREG,RETCODE); /* BALR TO
*                                      EOR                           */
         BALR  RETREG,RETCODE
*   GENERATE REFS(LOWGRS)                                       01S0375
*         SETS(R0,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14);
         LM    R0,R14,LOWGRS           RESTORE AUDIT REGISTERS
*                                      ACROSS AMDSAHSR (EOR) CALL
*   END DUMPUE;                                                 01S0376
@EL00003 DS    0H                                               01S0376
@EF00003 DS    0H                                               01S0376
@ER00003 BR    @14                                              01S0376
@PB00003 DS    0H                                               01S0376
*   END AMDSAAUD                                                01S0377
*/* THE FOLLOWING INCLUDE STATEMENTS WERE FOUND IN THIS PROGRAM.      *
*/*%INCLUDE SYSLIB  (IHAPSA  )                                        *
*/*%INCLUDE SYSLIB  (AMDSARMK)                                        *
*;                                                              01S0377
@DATA    DS    0H
@CH00067 DC    H'1'
@CH00923 DC    H'4096'
@CH00725 DC    H'28672'
@CH00899 DC    XL2'FFFF'
         DS    0F
         DS    0F
@CF00925 DC    F'131072'
@CA00920 DC    A(IODBOUT)
@CA00927 DC    A(ASID17I)
@CA00928 DC    A(MOD17I)
@CA00929 DC    A(LNG17I)
         DS    0D
WORKAREA DS    F
@CC01001 DC    C'AAA'
@CC01002 DC    C'ZZZ'
NODATPSW DC    X'010C0000'
DATPSW   DC    X'050C0000'
MODNME17 DS    CL8
         ORG   MODNME17
@NM00055 DC    CL5'AMDSA'
MODNAME  DS    CL3
         ORG   MODNME17+8
UNKNOWN  DC    CL8'UNKNOWN'
AUDSWTCH DC    X'00'
         ORG   AUDSWTCH
AUDINT   DS    BL1
         ORG   AUDSWTCH+1
         DS    CL1
SADUMP   DS    CL8
         ORG   SADUMP
SAKEY1   DC    XL1'00'
SAKEY2   DC    XL1'00'
SAASID   DS    FL2
SARADDR  DS    AL4
         ORG   SADUMP+8
         DS    CL4
AUDCCW   DS    CL16
         ORG   AUDCCW
AUDCCW1  DS    CL8
         ORG   AUDCCW1
AUDCCWCD DC    X'01'
AUDCCWAD DC    AL3(SADUMP)
AUDFLGS  DC    X'A0000008'
         ORG   AUDCCW+8
AUDCCW2  DC    X'0100000020001000'
         ORG   AUDCCW+16
CVTBLK   DS    CL10
         ORG   CVTBLK
CVTBINA  DC    AL4(SAASID)
CVTEBCA  DS    AL4
CVTBINL  DC    H'2'
         ORG   CVTBLK+10
         DS    CL2
AUDSAVEA DS    CL72
         ORG   AUDSAVEA
AUDSAVID DC    CL1'L'
AUDID    DC    CL3'AUD'
AUDREGS  DS    CL68
         ORG   AUDSAVEA+72
AUDCSW   DS    CL8
AUDPATCH DC    20F'0'
@00      EQU   00                      EQUATES FOR REGISTERS 0-15
@01      EQU   01
@02      EQU   02
@03      EQU   03
@04      EQU   04
@05      EQU   05
@06      EQU   06
@07      EQU   07
@08      EQU   08
@09      EQU   09
@10      EQU   10
@11      EQU   11
@12      EQU   12
@13      EQU   13
@14      EQU   14
@15      EQU   15
AUDR14   EQU   @06
DUMPLOC  EQU   @05
RCBADDR  EQU   @04
SAVECTIO EQU   @02
VCCTREG  EQU   @12
RETREG   EQU   @14
RETCODE  EQU   @15
BASEREG  EQU   @11
R0       EQU   @00
R1       EQU   @01
R2       EQU   @02
R3       EQU   @03
R4       EQU   @04
R5       EQU   @05
R6       EQU   @06
R7       EQU   @07
R8       EQU   @08
R9       EQU   @09
R10      EQU   @10
R11      EQU   @11
R12      EQU   @12
R13      EQU   @13
R14      EQU   @14
R15      EQU   @15
         EXTRN IODBOUT
         EXTRN ASID17I
         EXTRN MOD17I
         EXTRN LNG17I
PSA      EQU   0
FLCRNPSW EQU   PSA
FLCROPSW EQU   PSA+8
FLCICCW2 EQU   PSA+16
FLCCSW   EQU   PSA+64
PSAEEPSW EQU   PSA+132
PSAESPSW EQU   PSA+136
FLCSVILC EQU   PSAESPSW+1
PSAEPPSW EQU   PSA+140
FLCPIILC EQU   PSAEPPSW+1
FLCPICOD EQU   PSAEPPSW+2
PSAPICOD EQU   FLCPICOD+1
FLCTEA   EQU   PSAEPPSW+4
FLCPER   EQU   PSA+152
FLCMCLA  EQU   PSA+168
FLCIOEL  EQU   FLCMCLA+4
FLCIOA   EQU   FLCMCLA+16
FLCFSA   EQU   FLCMCLA+80
PSASUPER EQU   PSA+552
PSASUP1  EQU   PSASUPER
PSASUP2  EQU   PSASUPER+1
PSASUP3  EQU   PSASUPER+2
PSASUP4  EQU   PSASUPER+3
PSACLHT  EQU   PSA+640
PSALKSA  EQU   PSA+696
PSAHLHI  EQU   PSA+760
PSADSSFL EQU   PSA+836
PSADSSF1 EQU   PSADSSFL
PSADSSF3 EQU   PSADSSFL+2
PSADSSF4 EQU   PSADSSFL+3
PSARSVT  EQU   PSA+896
SADMPLSD EQU   3312
AUDPSW   EQU   SADMPLSD+16
LOWGRS   EQU   SADMPLSD+32
AUDSAVE  EQU   SADMPLSD+476
ARB      EQU   0
BCTH     EQU   0
BCT      EQU   0
BCTLPID  EQU   BCT+28
BCTFLGT  EQU   BCT+44
BCTFLGI  EQU   BCT+45
CCT      EQU   0
CTWAIT   EQU   CCT
CTFLG1   EQU   CCT+1
CTERROR  EQU   CTFLG1
CTDEVICE EQU   CTFLG1
CTERREC  EQU   CTFLG1
CTFLG2   EQU   CCT+2
CTOUTAD  EQU   CCT+42
CTLOWFLG EQU   CCT+48
CTDMPTYP EQU   CCT+52
CTIOTYPE EQU   CTDMPTYP
CTIOTERM EQU   CTIOTYPE
CTIOOUT  EQU   CTIOTYPE
CTCONFLG EQU   CTDMPTYP+2
CTBUFTYP EQU   CTDMPTYP+3
CTCOMMIO EQU   CTDMPTYP+12
CTEOR    EQU   CTDMPTYP+16
CTVCCT   EQU   CTDMPTYP+20
CTPRMT1  EQU   CTDMPTYP+24
CTPRMT2  EQU   CTDMPTYP+26
CCW      EQU   0
CCWCMD   EQU   CCW
CCWDADDR EQU   CCW+1
CCWFLAGS EQU   CCW+4
CSW      EQU   0
CSWKEY00 EQU   CSW
CSWCADDR EQU   CSW+1
CSWUSTAT EQU   CSW+4
CSWATTN  EQU   CSWUSTAT
CSWDE    EQU   CSWUSTAT
CSWUC    EQU   CSWUSTAT
CSWUE    EQU   CSWUSTAT
CSWCSTAT EQU   CSW+5
CSWIL    EQU   CSWCSTAT
CSWPGC   EQU   CSWCSTAT
CSWPTC   EQU   CSWCSTAT
CSWCDC   EQU   CSWCSTAT
CSWCCC   EQU   CSWCSTAT
CSWICC   EQU   CSWCSTAT
CSWCHC   EQU   CSWCSTAT
DSCE     EQU   0
IODB     EQU   0
IODBFLAG EQU   IODB+8
IODBTERM EQU   IODBFLAG
IODBPTRM EQU   IODBFLAG
IODBCCHH EQU   IODB+32
IODBSRCH EQU   IODBCCHH+3
MDCE     EQU   0
MDCB     EQU   0
MDCBGRS  EQU   MDCB+16
MDCBFLGS EQU   MDCB+86
PSW      EQU   0
PSWSM    EQU   PSW
@NM00047 EQU   PSW+1
PSWCCPM  EQU   PSW+2
@NM00050 EQU   PSW+3
PSWIA    EQU   PSW+4
PTRT     EQU   0
PTRTRSA  EQU   0
RCB      EQU   0
RCBNEXT  EQU   RCB
RCBSTOR  EQU   RCB+4
RCBSAVE  EQU   RCB+8
RCBEXIT  EQU   RCB+12
RCBBASE  EQU   RCB+16
VCCT     EQU   0
VCTRCB   EQU   VCCT+4
VCTRECSN EQU   VCCT+8
VCTFLGS  EQU   VCCT+9
VCTSADMP EQU   VCTFLGS
VCTRECVA EQU   VCCT+10
VCTMDCE  EQU   VCCT+12
VCTDSCE  EQU   VCCT+20
VCTBCTH  EQU   VCCT+24
VCTCBID  EQU   VCCT+64
VCTLPA   EQU   VCCT+84
VCTVCCTV EQU   VCCT+108
SDL      EQU   0
REGLOCAL EQU   0
REGL13   EQU   REGLOCAL+52
SAVEFORM EQU   0
SAVENAME EQU   SAVEFORM+1
PTRTVSA  EQU   0
PSARSVTE EQU   PSARSVT
CTLOWDMP EQU   CTDMPTYP
FLC      EQU   PSA
         AGO   .@UNREFD                START UNREFERENCED COMPONENTS
CTADDRE  EQU   CTLOWDMP+4
CTADDRS  EQU   CTLOWDMP
PSARSAV  EQU   PSARSVTE+60
PSARSTK  EQU   PSARSVTE+56
PSAESAV3 EQU   PSARSVTE+52
PSAESTK3 EQU   PSARSVTE+48
PSAESAV2 EQU   PSARSVTE+44
PSAESTK2 EQU   PSARSVTE+40
PSAESAV1 EQU   PSARSVTE+36
PSAESTK1 EQU   PSARSVTE+32
PSAPSAV  EQU   PSARSVTE+28
PSAPSTK  EQU   PSARSVTE+24
PSAMSAV  EQU   PSARSVTE+20
PSAMSTK  EQU   PSARSVTE+16
PSASSAV  EQU   PSARSVTE+12
PSASSTK  EQU   PSARSVTE+8
PSANSTK  EQU   PSARSVTE+4
PSACSTK  EQU   PSARSVTE
SAVER12  EQU   SAVEFORM+68
SAVER11  EQU   SAVEFORM+64
SAVER10  EQU   SAVEFORM+60
SAVER9   EQU   SAVEFORM+56
SAVER8   EQU   SAVEFORM+52
SAVER7   EQU   SAVEFORM+48
SAVER6   EQU   SAVEFORM+44
SAVER5   EQU   SAVEFORM+40
SAVER4   EQU   SAVEFORM+36
SAVER3   EQU   SAVEFORM+32
SAVER2   EQU   SAVEFORM+28
SAVER1   EQU   SAVEFORM+24
SAVER0   EQU   SAVEFORM+20
SAVER15  EQU   SAVEFORM+16
SAVER14  EQU   SAVEFORM+12
SAVENEXT EQU   SAVEFORM+8
SAVEBACK EQU   SAVEFORM+4
SAVEID   EQU   SAVEFORM
REGL15   EQU   REGLOCAL+60
REGL14   EQU   REGLOCAL+56
REGL12   EQU   REGLOCAL+48
REGL11   EQU   REGLOCAL+44
REGL10   EQU   REGLOCAL+40
REGL9    EQU   REGLOCAL+36
REGL8    EQU   REGLOCAL+32
REGL7    EQU   REGLOCAL+28
REGL6    EQU   REGLOCAL+24
REGL5    EQU   REGLOCAL+20
REGL4    EQU   REGLOCAL+16
REGL3    EQU   REGLOCAL+12
REGL2    EQU   REGLOCAL+8
REGL1    EQU   REGLOCAL+4
REGL0    EQU   REGLOCAL
SDLSPN   EQU   SDL+1
SDLNUM   EQU   SDL
VCTCCTV  EQU   VCCT+104
@NM00054 EQU   VCCT+102
VCTEXTRA EQU   VCCT+100
VCTCPOUT EQU   VCCT+96
VCTSVCTB EQU   VCCT+92
VCTPGT   EQU   VCCT+88
VCTCBADR EQU   VCCT+80
VCTJBNME EQU   VCCT+72
VCTCBIDN EQU   VCTCBID+7
@NM00053 EQU   VCTCBID
VCTAUDIT EQU   VCCT+62
VCTASID  EQU   VCCT+60
VCTPTRT  EQU   VCCT+56
VCTMASCB EQU   VCCT+52
VCTASCB  EQU   VCCT+48
VCTCPUC  EQU   VCCT+46
VCTWKC   EQU   VCCT+45
VCTWKHI  EQU   VCCT+44
VCTSUBPL EQU   VCCT+40
VCTARB   EQU   VCCT+36
VCTIODB  EQU   VCCT+32
VCTBCTC  EQU   VCCT+28
VCTSTOR  EQU   VCCT+16
@NM00052 EQU   VCTFLGS
VCTNOI22 EQU   VCTFLGS
VCTLRCLM EQU   VCTFLGS
VCTARCLM EQU   VCTFLGS
VCTASMIC EQU   VCTFLGS
VCTMEMIN EQU   VCTFLGS
@NM00051 EQU   VCTRECSN
VCTRSMR  EQU   VCTRECSN
VCTEXIR  EQU   VCTRECSN
VCTUPDR  EQU   VCTRECSN
VCTPGIR  EQU   VCTRECSN
VCTVCT   EQU   VCCT
PTRTVS   EQU   PTRT+1032
PTRTRS   EQU   PTRT+8
PTRTLGID EQU   PTRT+4
PTRTPTRT EQU   PTRT
PSWEND   EQU   PSW+8
PSWSP    EQU   @NM00050
PSWSIG   EQU   PSWCCPM
PSWEU    EQU   PSWCCPM
PSWDO    EQU   PSWCCPM
PSWFPO   EQU   PSWCCPM
@NM00049 EQU   PSWCCPM
@NM00048 EQU   PSWCCPM
PSWPRBLM EQU   @NM00047
PSWAIT   EQU   @NM00047
PSWMCH   EQU   @NM00047
PSWMODE  EQU   @NM00047
PSWKEY   EQU   @NM00047
PSWXTRNL EQU   PSWSM
PSWIO    EQU   PSWSM
PSWDAT   EQU   PSWSM
@NM00046 EQU   PSWSM
@NM00045 EQU   PSWSM
@NM00044 EQU   PSWSM
PSWPER   EQU   PSWSM
@NM00043 EQU   PSWSM
@NM00042 EQU   MDCB+87
@NM00041 EQU   MDCBFLGS
MDCBDUMP EQU   MDCBFLGS
MDCBASMI EQU   MDCBFLGS
MDCBPI   EQU   MDCB+84
MDCBSTOR EQU   MDCB+80
MDCBGR15 EQU   MDCBGRS+60
MDCBGR14 EQU   MDCBGRS+56
MDCBGR13 EQU   MDCBGRS+52
MDCBGR12 EQU   MDCBGRS+48
MDCBGR11 EQU   MDCBGRS+44
MDCBGR10 EQU   MDCBGRS+40
MDCBGR9  EQU   MDCBGRS+36
MDCBGR8  EQU   MDCBGRS+32
MDCBGR7  EQU   MDCBGRS+28
MDCBGR6  EQU   MDCBGRS+24
MDCBGR5  EQU   MDCBGRS+20
MDCBGR4  EQU   MDCBGRS+16
MDCBGR3  EQU   MDCBGRS+12
MDCBGR2  EQU   MDCBGRS+8
MDCBGR1  EQU   MDCBGRS+4
MDCBGR0  EQU   MDCBGRS
MDCBPSW  EQU   MDCB+8
MDCBNEXT EQU   MDCB+4
MDCBMDCB EQU   MDCB
MDCEAVIL EQU   MDCE+8
MDCEACTV EQU   MDCE+4
MDCEMDCE EQU   MDCE
IODBSENS EQU   IODB+40
IODBR    EQU   IODBCCHH+7
IODBHH   EQU   IODBSRCH+2
IODBCC   EQU   IODBSRCH
IODBSEEK EQU   IODBCCHH+1
IODBM    EQU   IODBCCHH
IODBCSW  EQU   IODB+24
IODBCAW  EQU   IODB+20
IODBBCT  EQU   IODB+16
IODBCPU  EQU   IODB+14
IODBTYPE EQU   IODB+13
IODBCLAS EQU   IODB+12
IODBDEV  EQU   IODB+10
@NM00040 EQU   IODBFLAG+1
IODBSTRT EQU   IODBFLAG
IODBCONW EQU   IODBFLAG
IODBACTV EQU   IODBFLAG
IODBHALT EQU   IODBFLAG
IODBIOC  EQU   IODBFLAG
IODBINT  EQU   IODBFLAG
IODBIDEN EQU   IODB+4
IODBIODB EQU   IODB
DSCETEND EQU   DSCE+20
DSCETCUR EQU   DSCE+16
DSCETBEG EQU   DSCE+12
DSCENEXT EQU   DSCE+8
DSCEBEGN EQU   DSCE+4
DSCEDSCE EQU   DSCE
CSWCNT   EQU   CSW+6
CSWPCI   EQU   CSWCSTAT
CSWCE    EQU   CSWUSTAT
CSWBUSY  EQU   CSWUSTAT
CSWCUE   EQU   CSWUSTAT
CSWSTMOD EQU   CSWUSTAT
@NM00039 EQU   CSWKEY00
CSWKEY   EQU   CSWKEY00
CCWCNT   EQU   CCW+6
@NM00038 EQU   CCW+5
@NM00037 EQU   CCWFLAGS
CCWIDA   EQU   CCWFLAGS
CCWPCI   EQU   CCWFLAGS
CCWSKIP  EQU   CCWFLAGS
CCWSLI   EQU   CCWFLAGS
CCWCC    EQU   CCWFLAGS
CCWDC    EQU   CCWFLAGS
CTHWMAX  EQU   CTDMPTYP+29
CTHWM    EQU   CTDMPTYP+28
CTPRMT2X EQU   CTPRMT2+1
CTPRMT2Y EQU   CTPRMT2
CTPRMT1X EQU   CTPRMT1+1
CTPRMT1Y EQU   CTPRMT1
CTLWKAD  EQU   CTDMPTYP+8
CTCONSOL EQU   CTDMPTYP+4
@NM00036 EQU   CTBUFTYP
CTDUMP   EQU   CTBUFTYP
CTLSQA   EQU   CTBUFTYP
CTASM    EQU   CTBUFTYP
CTPGT    EQU   CTBUFTYP
CTWKFLE  EQU   CTBUFTYP
@NM00035 EQU   CTBUFTYP
@NM00034 EQU   CTCONFLG
CTREAD   EQU   CTCONFLG
CTMSGOUT EQU   CTCONFLG
@NM00033 EQU   CTDMPTYP+1
@NM00032 EQU   CTIOTYPE
CTIORSET EQU   CTIOTYPE
CTIOINT  EQU   CTIOTYPE
CTIOCON  EQU   CTIOTYPE
CTIOWK   EQU   CTIOTYPE
CTIODA   EQU   CTIOTYPE
CTEBCOPR EQU   CCT+49
@NM00031 EQU   CTLOWFLG
CTWKSTUS EQU   CTLOWFLG
CTINIT   EQU   CTLOWFLG
CTFP     EQU   CTLOWFLG
CTVIRTD  EQU   CTLOWFLG
CTEBCOPD EQU   CCT+45
CTCONTYP EQU   CCT+44
CTCPUI   EQU   CCT+40
CTERBCON EQU   CCT+36
CTERBTPE EQU   CCT+32
CTERBDA  EQU   CCT+28
CTCCHHW  EQU   CCT+24
CTCCHHE  EQU   CCT+20
CTCCHHS  EQU   CCT+16
CTPGECNT EQU   CCT+15
CTCCHHR  EQU   CCT+8
CTINADDR EQU   CCT+6
CTSENSE  EQU   CCT+4
CTDEVTYP EQU   CCT+3
@NM00030 EQU   CTFLG2
CTALTCON EQU   CTFLG2
CTWKDONE EQU   CTFLG2
CTVIRTR  EQU   CTFLG2
CTNOSTAT EQU   CTFLG2
CTPGEFLT EQU   CTFLG2
CTSTOR   EQU   CTFLG2
CTDUPSW  EQU   CTFLG2
CTMP     EQU   CTFLG1
@NM00029 EQU   CTFLG1
CTDEFO   EQU   CTFLG1
CTWORK   EQU   CTFLG1
CTMORTPE EQU   CTFLG1
@NM00028 EQU   BCT+46
BCTRECLM EQU   BCTFLGI
BCTIOERR EQU   BCTFLGI
BCTALLOC EQU   BCTFLGI
BCTCOMP  EQU   BCTFLGI
@NM00027 EQU   BCTFLGT
BCTPGTF  EQU   BCTFLGT
BCTDUMP  EQU   BCTFLGT
BCTLSQA  EQU   BCTFLGT
BCTASM   EQU   BCTFLGT
BCTPGT   EQU   BCTFLGT
BCTWKFLE EQU   BCTFLGT
@NM00026 EQU   BCTFLGT
BCTRBA   EQU   BCT+40
BCTAMB   EQU   BCT+36
@NM00025 EQU   BCTLPID+4
BCTLGN   EQU   BCTLPID
BCTMDCB  EQU   BCT+24
BCTPGTE  EQU   BCT+20
BCTRADDR EQU   BCT+16
BCTVADDR EQU   BCT+12
BCTASID  EQU   BCT+10
BCTKEY2  EQU   BCT+9
BCTKEY1  EQU   BCT+8
BCTNEXT  EQU   BCT+4
BCTBCT   EQU   BCT
BCTHLAST EQU   BCTH+8
BCTHFRST EQU   BCTH+4
BCTHBCTH EQU   BCTH
ARBADDRE EQU   ARB+4
ARBADDRB EQU   ARB
GTMSAVE  EQU   SADMPLSD+684
GTMNAME  EQU   SADMPLSD+680
FRMSAVE  EQU   SADMPLSD+580
FRMNAME  EQU   SADMPLSD+576
AUDNAME  EQU   SADMPLSD+472
IOISAVE  EQU   SADMPLSD+372
IOINAME  EQU   SADMPLSD+368
PGISAVE  EQU   SADMPLSD+268
PGINAME  EQU   SADMPLSD+264
SVISAVE  EQU   SADMPLSD+164
SVINAME  EQU   SADMPLSD+160
LOWCRS   EQU   SADMPLSD+96
SAVEDUMP EQU   SADMPLSD+24
SVIRPSW  EQU   SADMPLSD+8
PSWSADMP EQU   SADMPLSD
@NM00024 EQU   PSA+3412
PSASTAK  EQU   PSA+3072
@NM00023 EQU   PSA+1032
PSAUSEND EQU   PSA+1032
PSAPCPSW EQU   PSA+1024
PSARV060 EQU   PSA+1020
PSARV059 EQU   PSA+1018
PSASVC13 EQU   PSA+1016
PSALSFCC EQU   PSA+1012
PSASFACC EQU   PSA+1008
PSASTOP  EQU   PSA+992
PSASTART EQU   PSA+976
PSARSPSW EQU   PSA+968
PSASRPSW EQU   PSA+960
PSARV045 EQU   PSA+892
PSARV044 EQU   PSA+888
PSARV043 EQU   PSA+884
PSARV042 EQU   PSA+880
PSARV041 EQU   PSA+876
PSARV040 EQU   PSA+872
PSARV025 EQU   PSA+868
PSADSSED EQU   PSA+868
PSADSSPR EQU   PSA+864
PSADSSFW EQU   PSA+860
PSADSS14 EQU   PSA+856
PSADSSPP EQU   PSA+848
PSADSSRP EQU   PSA+840
PSADSS05 EQU   PSADSSF4
PSADSS10 EQU   PSADSSF4
PSADSSVE EQU   PSADSSF4
PSADSSDE EQU   PSADSSF4
PSADSSC0 EQU   PSADSSF4
PSADSSIE EQU   PSADSSF4
PSADSS12 EQU   PSADSSF4
PSADSSRC EQU   PSADSSF4
PSARV057 EQU   PSADSSF3
PSARV056 EQU   PSADSSF3
PSARV055 EQU   PSADSSF3
PSADSSMC EQU   PSADSSF3
PSADSSRW EQU   PSADSSF3
PSADSSNM EQU   PSADSSF3
PSADSSES EQU   PSADSSF3
PSADSSGP EQU   PSADSSF3
PSADSSF2 EQU   PSADSSFL+1
PSADSSPI EQU   PSADSSF1
PSADSSOI EQU   PSADSSF1
PSADSSSP EQU   PSADSSF1
PSADSSTP EQU   PSADSSF1
PSADSSDW EQU   PSADSSF1
PSADSSDD EQU   PSADSSF1
PSADSSDM EQU   PSADSSF1
PSADSSMV EQU   PSADSSF1
PSADSSTS EQU   PSA+816
PSADSSWK EQU   PSA+812
PSADSSR3 EQU   PSA+808
PSADSSR2 EQU   PSA+804
PSADSSRS EQU   PSA+800
PSASTOR  EQU   PSA+796
PSACPUSA EQU   PSA+794
PSAVSTAP EQU   PSA+792
PSAWKVAP EQU   PSA+788
PSAWKRAP EQU   PSA+784
PSAMCHIC EQU   PSA+783
PSARV061 EQU   PSA+782
PSASYMSK EQU   PSA+781
PSAMCHFL EQU   PSA+780
PSACR0   EQU   PSA+776
PSAPSWSV EQU   PSA+768
PSALITA  EQU   PSA+764
PSACLHS  EQU   PSAHLHI
PSALKR15 EQU   PSALKSA+60
PSALKR14 EQU   PSALKSA+56
PSALKR13 EQU   PSALKSA+52
PSALKR12 EQU   PSALKSA+48
PSALKR11 EQU   PSALKSA+44
PSALKR10 EQU   PSALKSA+40
PSALKR9  EQU   PSALKSA+36
PSALKR8  EQU   PSALKSA+32
PSALKR7  EQU   PSALKSA+28
PSALKR6  EQU   PSALKSA+24
PSALKR5  EQU   PSALKSA+20
PSALKR4  EQU   PSALKSA+16
PSALKR3  EQU   PSALKSA+12
PSALKR2  EQU   PSALKSA+8
PSALKR1  EQU   PSALKSA+4
PSALKR0  EQU   PSALKSA
PSARV023 EQU   PSACLHT+52
PSALOCAL EQU   PSACLHT+48
PSACMSL  EQU   PSACLHT+44
PSAOPTL  EQU   PSACLHT+40
PSATPACL EQU   PSACLHT+36
PSATPDNL EQU   PSACLHT+32
PSATPNCL EQU   PSACLHT+28
PSAIOSLL EQU   PSACLHT+24
PSAIOSUL EQU   PSACLHT+20
PSAIOSCL EQU   PSACLHT+16
PSAIOSSL EQU   PSACLHT+12
PSASALCL EQU   PSACLHT+8
PSAASML  EQU   PSACLHT+4
PSADISPL EQU   PSACLHT
PSASRSA  EQU   PSA+636
PSARV050 EQU   PSA+634
PSADSSGO EQU   PSA+633
PSARECUR EQU   PSA+632
PSAHLHIS EQU   PSA+628
PSAIPCSA EQU   PSA+624
@NM00022 EQU   PSA+621
PSAIPCDM EQU   PSA+620
PSAIPCD  EQU   PSA+616
@NM00021 EQU   PSA+613
PSAIPCRM EQU   PSA+612
PSAIPCR  EQU   PSA+608
PSAMCHEX EQU   PSA+600
PSAMPSW  EQU   PSA+592
PSAEXPS2 EQU   PSA+584
PSAEXPS1 EQU   PSA+576
PSAPIREG EQU   PSA+572
PSARSREG EQU   PSA+568
PSAGPREG EQU   PSA+556
PSARV022 EQU   PSASUP4
PSARV021 EQU   PSASUP4
PSARV020 EQU   PSASUP4
PSARV019 EQU   PSASUP4
PSARV018 EQU   PSASUP4
PSARV017 EQU   PSASUP4
PSARV016 EQU   PSASUP4
PSARV015 EQU   PSASUP4
PSARV014 EQU   PSASUP3
PSARV013 EQU   PSASUP3
PSARV012 EQU   PSASUP3
PSARV011 EQU   PSASUP3
PSARV010 EQU   PSASUP3
PSARV009 EQU   PSASUP3
PSARV008 EQU   PSASUP3
PSAIOSUP EQU   PSASUP3
PSALCR   EQU   PSASUP2
PSARTM   EQU   PSASUP2
PSAACR   EQU   PSASUP2
PSAIPCE2 EQU   PSASUP2
PSAIPCES EQU   PSASUP2
PSAIPCEC EQU   PSASUP2
PSAGTF   EQU   PSASUP2
PSAIPCRI EQU   PSASUP2
PSAIPCRP EQU   PSASUP1
PSAIPCDR EQU   PSASUP1
PSADISP  EQU   PSASUP1
PSALOCK  EQU   PSASUP1
PSAPI    EQU   PSASUP1
PSAEXT   EQU   PSASUP1
PSASVC   EQU   PSASUP1
PSAIO    EQU   PSASUP1
PSAAOLD  EQU   PSA+548
PSAANEW  EQU   PSA+544
PSATOLD  EQU   PSA+540
PSATNEW  EQU   PSA+536
PSALCCAR EQU   PSA+532
PSALCCAV EQU   PSA+528
PSAPCCAR EQU   PSA+524
PSAPCCAV EQU   PSA+520
PSACPULA EQU   PSA+518
PSACPUPA EQU   PSA+516
PSAPSA   EQU   PSA+512
FLCHDEND EQU   PSA+512
FLCCRSAV EQU   FLCMCLA+280
FLCGRSAV EQU   FLCMCLA+216
FLCFPSAV EQU   FLCMCLA+184
FLCFLA   EQU   FLCMCLA+88
FLCRGNCD EQU   FLCMCLA+84
FLCFSAA  EQU   FLCFSA+1
@NM00020 EQU   FLCFSA
@NM00019 EQU   FLCMCLA+72
FLCMCIC  EQU   FLCMCLA+64
@NM00018 EQU   FLCMCLA+20
FLCIOAA  EQU   FLCIOA+1
@NM00017 EQU   FLCIOA
@NM00016 EQU   FLCMCLA+15
@NM00015 EQU   FLCMCLA+14
@NM00014 EQU   FLCMCLA+12
FLCLCL   EQU   FLCMCLA+8
FLCIOELA EQU   FLCIOEL+1
@NM00013 EQU   FLCIOEL
FLCCHNID EQU   FLCMCLA
@NM00012 EQU   PSA+160
FLCMTRCD EQU   PSA+157
@NM00011 EQU   PSA+156
FLCPERA  EQU   FLCPER+1
@NM00010 EQU   FLCPER
@NM00009 EQU   PSA+151
FLCPERCD EQU   PSA+150
FLCMCNUM EQU   PSA+149
@NM00008 EQU   PSA+148
FLCTEAA  EQU   FLCTEA+1
@NM00007 EQU   FLCTEA
PSAPIPC  EQU   PSAPICOD
PSAPIMC  EQU   PSAPICOD
PSAPIPER EQU   PSAPICOD
PSARV049 EQU   FLCPICOD
FLCPILCB EQU   FLCPIILC
@NM00006 EQU   FLCPIILC
@NM00005 EQU   PSAEPPSW
FLCSVCN  EQU   PSAESPSW+2
FLCSILCB EQU   FLCSVILC
@NM00004 EQU   FLCSVILC
@NM00003 EQU   PSAESPSW
FLCEICOD EQU   PSAEEPSW+2
PSASPAD  EQU   PSAEEPSW
@NM00002 EQU   PSA+128
FLCINPSW EQU   PSA+120
FLCMNPSW EQU   PSA+112
FLCPNPSW EQU   PSA+104
FLCSNPSW EQU   PSA+96
FLCENPSW EQU   PSA+88
FLCTRACE EQU   PSA+84
FLCTIMER EQU   PSA+80
FLCCVT2  EQU   PSA+76
FLCCAW   EQU   PSA+72
FLCIOPSW EQU   PSA+56
FLCMOPSW EQU   PSA+48
FLCPOPSW EQU   PSA+40
FLCSOPSW EQU   PSA+32
FLCEOPSW EQU   PSA+24
@NM00001 EQU   FLCICCW2+4
FLCCVT   EQU   FLCICCW2
FLCICCW1 EQU   FLCROPSW
FLCIPPSW EQU   FLCRNPSW
.@UNREFD ANOP                          END UNREFERENCED COMPONENTS
@RT00288 EQU   NODUMP
@RT00290 EQU   AUDTIO
@RT00296 EQU   NODUMP
@PB00002 EQU   @PB00003
@ENDDATA EQU   *
         END   AMDSAAUD,(C'PL/S-II',0502,74107)
