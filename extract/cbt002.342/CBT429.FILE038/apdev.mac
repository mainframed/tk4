CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
C
      SUBROUTINE APDEV
C
C  PURPOSE: ACTIVATE THE ANTI PHOTON DEVICE IS NOT SET, ELSE
C  DISPLAY MSG SAYING "IT'S ON"
C
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
C
      COMMON /INFO/ ICOND(2),ENERGY,ISHUPD,ISHENG,IAPDEV,IPOF,IOVER
C
      COMMON /DEVICE/ XCDC,XSRDC,XIEDC,XLRDC,XWEDC,XDSDC,XSSDC,XPTDC
C
      CALL DBUGIN ('APDEV  ENTERED',IW(14),0)
      CALL DBUGIN ('AT ENTRY, THE DEVICE FLAG=',IW(25),IAPDEV)
      IF (IAPDEV.EQ.1) GO TO 270
      IF (XDSDC.LE.0.001) GO TO 260
      CALL LINEF
      CALL PRMSG (
     *     'ANTI-PHOTON DEVICE IS POWERED BY THE SHIELDS, AND CANNOT',
     *     IW(56))
      CALL PRMSG (
     *     'BE USED IF THE SHIELDS ARE NOT WORKING, LORD COMMANDER',
     *     IW(54))
      GO TO 150
260   IF (ISHENG.GT.500) GO TO 280
      CALL LINEF
      CALL PRMSG (
     *'INSUFFICENT ENERGY IN SHIELDS TO USE ANTI-PHOTON DEVICE',IW(55))
      GO TO 150
270   CALL LINEF
      CALL PRMSG (
     *'THE ANTI-PHOTON DEVICE IS ALREADY ARMED, LORD COMMANDER',IW(55))
      GO TO 150
280   CALL LINEF
      CALL PRMSG ('ANTI-PHOTON DEVICE ARMED, LORD COMMANDER',IW(40))
      ISHENG = ISHENG-500
      IAPDEV = 1
      CALL DBUGIN ('THE DEVICE FLAG IS NOW=',IW(22),IAPDEV)
150   CONTINUE
      CALL DBUGIN ('APDEV  EXITED',IW(13),0)
      RETURN
      END
