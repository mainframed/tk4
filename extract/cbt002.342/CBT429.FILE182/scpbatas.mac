PROC 2 MEMNAME HASPSRC DEBUG
CONTROL NOFLUSH
IF &DEBUG=DEBUG THEN CONTROL LIST CONLIST SYMLIST
SET NAMLEN=&LENGTH(&MEMNAME)
SET JESNAME=&SUBSTR(5:&NAMLEN,&MEMNAME)
SET PREFIX=&SUBSTR(1:4,&MEMNAME)
IF &PREFIX=SPNB THEN SET JESNAME=&SUBSTR(1:4,S&JESNAME     )
SET JAJOBN=JES2&JESNAME
SET DSNLEN=&LENGTH(&HASPSRC)
SET HASPOBJ=&SUBSTR(1:&DSNLEN-3,&HASPSRC)OBJ
  SET TITLE=BATCH ASM PROMPTER
  SET CLR=R
    ISPEXEC  CONTROL NONDISPL
    ISPEXEC  DISPLAY  PANEL(SCPENT1)
    IF &LASTCC ^= 0 THEN  DO          /* RETURN CODES               */
      EXIT
      END                             /* 12 - PANEL, MESSAGE, OR    */
  SET REQ1=&MEMNAME
  SET REQ2=&HASPSRC
  SET REQ3=&HASPOBJ
  SET REQ5=JOBCLASS
  SET ENT5=A
  SET REQ6=MSGCLASS
  SET ENT6=A
  SET REQ7=OUTCLASS
  SET ENT7=&STR(*)
  SET REQ8=ASM OPTS
  IF &JESNAME=DOC THEN -
  SET ENT8=&STR(NODECK,XREF(FULL))
  ELSE -
  SET ENT8=&STR(DECK,XREF(SHORT))
    ISPEXEC  DISPLAY  PANEL(SCPENT1)
    IF &LASTCC ^= 0 THEN  DO          /* RETURN CODES               */
      EXIT
      END                             /* 12 - PANEL, MESSAGE, OR    */
  SET JAJCLS=&ENT5
  SET JAMSGS=&ENT6
  SET JAOUTS=&STR(&ENT7)
  SET JAOPTS=&ENT8
  SET IDR=&SUBSTR(1:30,&STR(&IDR)                           )
  ISPEXEC FTOPEN  TEMP
  ISPEXEC VGET (ZTEMPF)
  ISPEXEC FTINCL SCPBATA1
  ISPEXEC FTCLOSE
  SUB '&ZTEMPF'
