 ISREDIT MACRO (DSN) NOPROCESS
  IF &STR(&DSN) = ? THEN +
    DO
      ISPEXEC DISPLAY PANEL(BLDCOPY)
      EXIT CODE(1)
    END
SET  PDSDSN = &DSN
  SET N = 0
  ISREDIT PROCESS DEST
  IF &LASTCC = 0 THEN DO
  ISREDIT LOCATE .ZDEST
  IF &LASTCC = 8 THEN +
     DO
           SET ZEDSMSG = &STR(EMPTY DATA SET )
       SET ZEDLMSG = &STR(DSIGEN WORKS ONLY WHEN DATA SET HAS VALID +
                                 DATA AND LINE NUMBERS)
           ISPEXEC SETMSG MSG(ISRZ001)
         EXIT CODE(12)
   END
 END
/* INITIALIZE DATASET */
ISPEXEC  LMINIT DATAID(PDSID) DATASET(&PDSDSN) +
                ENQ(SHRW)                        +
                ORG(PDSORG)
SET LMRC = &LASTCC
IF &LMRC ^= 0 THEN +
   DO
      WRITE LMINIT FAILED - RETURN CODE &LMRC
      WRITE DATA SET IS NOT ALLOCATED OR NOT PARTITIONED
      EXIT CODE(8)
   END

/* OPEN DATA SET */
ISPEXEC LMOPEN DATAID(&PDSID) OPTION(INPUT)
SET LMRC = &LASTCC

/* CALL EDIT WITH EACH MEMBER OF THE DATA SET AND SPECIFY THE */
/* INITIAL EDIT MACRO.                                        */
DO WHILE (&LMRC = 0)
  /* BUILD MEMBER LIST AND RETURN NEXT MEMBER */
  ISPEXEC LMMLIST DATAID(&PDSID) -
        OPTION(LIST) MEMBER(MEMBER) -
        STATS(NO)
  SET LMRC = &LASTCC
  IF &LMRC = 0 THEN /* NOT END OF MEMBER LIST */ +
     DO
       ISREDIT (LINEPTR) = LINENUM .ZDEST
       SET &LINEPTR = &LINEPTR + &N
       ISREDIT MASKLINE = "    S M=&MEMBER"
       ISREDIT LINE_AFTER &LINEPTR = MASKLINE
       SET &N = &N + 1
     END
 END
ISPEXEC LMMLIST DATAID(&PDSID) OPTION(FREE)
/* CLOSE DATA SET */
ISPEXEC LMCLOSE DATAID(&PDSID)
/* FREE DATA ID */
ISPEXEC LMFREE  DATAID(&PDSID)

ERROROUT:+
       ISREDIT MASKLINE = ' '

EXIT CODE(0)
