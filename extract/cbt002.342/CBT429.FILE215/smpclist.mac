/* THIS CLIST INVOKES SMP/E INTERACTIVELY, SENDING OUTPUT TO THE   */
/*  TSO USER'S TERMINAL.  POINT THE CSI DEFAULT TO THE GLOBAL ZONE */
/*  THAT YOU ARE USING.  THE REST OF THIS STUFF SHOULD BE SELF-    */
/*  EVIDENT.  I.E. YOU SHOULD BE EASILY ABLE TO FIGURE IT OUT.     */
/*                                                                 */
/* NOTE:  THIS CLIST USED TO BE VB-LRECL 255, AND WAS CONVERTED    */
/*  TO FB-LRECL 80 BY THE CVTCLIST PROGRAM ON FILE 187 OF THE CBT  */
/*  TAPE.  THE LONG LINES HAVE BEEN FOLDED OVER.  ACTUALLY, THIS   */
/*  CLIST "LOOKS" A LOT BETTER WHEN IT IS IN VB-255 FORMAT, WITH   */
/*  THE LONG LINES.                                                */
/*                                                                 */
PROC 0  VOLID  CSI('SMPEZ.GLOBAL.CSI')     UNIT(DISK) -
  TYPE(SYS1) NOLOG SYSOUT LOGDISP(MOD) NOPTS -
         LIST()  /*** YES OR NO ****/
   SET VOLID= ZRS001
 IF &LIST = YES THEN -
     CONTROL LIST
 ELSE -
 IF &LIST = NO THEN -
     CONTROL NOLIST
PASSTYPE: -
CLEAR
CONTROL PROMPT
WRITE *****************************************************************-
*************
WRITE *                                                                -
            *
WRITE *    WELCOME TO THE SMP INQUIRY SYSTEM.  THIS MEANS MAKE INQUIRIE-
S ONLY.     *
WRITE *                                                                -
            *
WRITE *****************************************************************-
*************
WRITE                               T Y P E = &TYPE
WRITE
WRITE                   ====> FOREGROUND EXECUTION OF SMP/E <====
WRITE
WRITE                       ***  SYSTEM DEFAULT ==> &TYPE  ***
WRITE
WRITE                        TYPE = &TYPE MVS SP 4.3.0 DFSMS
WRITENR                         ENTER DESIRED TYPE ===>
READ ANS
IF &LENGTH(&STR(&ANS))^=0 THEN SET TYPE=&STR(&ANS)
IF &TYPE = SYS1      THEN SET VOLID = ZRS001
IF &TYPE = SYS1      THEN SET DIST  = ZGLB01
WRITE
WRITE              ===> YOU HAVE SPECIFIED  &TYPE AS THE SYSTEM. <===
WRITE              ===> TARGET = &VOLID --- DISTRIBUTION = &DIST <===
ERROR -
   GOTO ENDALL
ATTN -
   GOTO ENDALL
ALLOC FI(SMPOUT)   DA(*)
ALLOC FI(SMPLIST)  DA(*)
ALLOC FI(SMPCNTL)  DA(*)
ALLOC FI(SMPRPT)   DUMMY
IF &NOLOG = NOLOG THEN ALLOC FILE(SMPLOG) DUMMY
 ELSE ALLOC FI(SMPLOG) &LOGDISP KEEP DA('SMPEZ.GLOBAL.SMPLOG') SH
IF &NOLOG = NOLOG THEN ALLOC FILE(SMPLOGA) DUMMY
 ELSE ALLOC FI(SMPLOGA) &LOGDISP KEEP DA('SMPEZ.GLOBAL.SMPLOGA') SH
IF &NOPTS ^= NOPTS AND     +
 &TYPE = SYS1 THEN ALLOC FILE(SMPPTS) DA('SMPEZ.GLOBAL.SMPPTS') SH
ALLOC FI(SMPCNTL)      DA(*)
IF &SYSOUT = SYSOUT THEN ALLOC F(SMPOUT) SYS(T)
    ELSE ALLOC FI(SMPOUT)       DA(*)
CALL '&TYPE..LINKLIB(GIMSMP)' 'CSI=&CSI'
ENDALL: -
ERROR OFF
ATTN OFF
FREE FI(SMPLIST  SMPRPT        SMPCNTL     -
      SMPLOGA  SMPLOG SMPOUT SMPPTS        )
/*  FREE DA('&TYPE..LINKLIB')
END
