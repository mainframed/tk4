*
*        REF:  LY35-0077 DATA FACILITY HIRERARCHICAL STORAGE MANAGER
*                        DIAGNOSIS REFERENCE VOLUME 2
*
*        MWE - MANAGEMENT WORK ELEMENT
*
MWEHDR   DS    0XL140
MWEFWD   DS    F
MWEBWD   DS    F
MWESPN   DS    CL1
MWELEN   DS    AL3
MWEFSR   DS    F
MWETSTIM DS    F
MWETSDAT DS    F
MWEFUNC  DS    X
*
*   CODE 0 - RETURN QUEUE CONTROL TABLE PTR
*        1 - START HSM
*        2 - STOP HSM
*        3 - RECALL A DATA SET
*        4 - UNUSED
*        5 - RECOVER A DATA SET
*        6 - MIGRATE A DATA SET
*        7 - BACK UP A DATA SET
*        8 - READ A CONTROL DATA SET RECORD
*        9 - PROCESS AN OPERATOR COMMAND
*       10 - POST AN MWE AS COMPLETED
*       11 - PURGE MWE'S
*       12 - DELETE A MIGRATED DATA SET
*
MWEFLGS  DS    0XL3
MWEFLG11 DS    X
*        EQU   B'10000000' RESERVED
MWEFNOW  EQU   B'01000000' NOWAIT WAS SPECIFIED
MWEFRECV EQU   B'00100000' HSM HAS COPIED MWE INTO ITS ADDR SPACE
MWEFTSOR EQU   B'00010000' THIS MWE IS TSO INTERACTIVE REQUEST
*        EQU   B'00001000' RESERVED
MWEMLEV2 EQU   B'00000100' IF MWEFUNC=6 THEN MIGRATE TO LEVEL 2
MWEFDATE EQU   B'00000100' IF MWEFUNC=5 THEN MWEDATE CONTAINS DATE
MWEFRTYW EQU   B'00000010' TASK IS WAITING FOR VOLUME BEFORE RETRY
MWEFUNWT EQU   B'00000001' USER HAS BEEN NOTIFIED THAT MWE IS WAITING
MWEFLG12 DS    X
MWE29DU  EQU   B'10000000' REQUEST IS FROM IGG029DU
MWEGDG   EQU   B'01000000' SCRATCH GDG FROM CATALOGUE MANAGEMENT
MWEFEX0A EQU   B'00100000' REQUEST IS FROM IGG0EX0A
MWEFPODS EQU   B'00010000' MIG,DEL OR RECL REQUIRES OLD DATA SET PURGE
MWEFNOMT EQU   B'00001000' NO WAIT FOR VOLUME MOUNT
MWEFBTOT EQU   B'00000100' BACKUP IS TOTAL, ELSE INCREMENTAL
MWEFKGT  EQU   B'00000010' IF MWEFUNC=8 THEN GET KEY GRTR THAN SPECFD
*                      0   IF MWEFUNC=8 THEN GET KEY EQUAL TO SPECFD
MWEFNCAT EQU   B'00000001' GET NEXT CONTROL DATA SET RECORD
*                       0  GET SPECIFIED CONTROL DATA SET RECORD
MWEFLG13 DS    X
MWEFDAYS EQU   B'10000000' MWEDAYS CONTAINS VALID DATE
MWEFAUTH EQU   B'01000000' SENDER OF MWE HAS SPACE MANAGEMENT AUTH
MWEFRSV  EQU   B'00100000' IF MWEFUNC=3 VOLUME SPECIFIED FOR RECALL
MWEFTERM EQU   B'00100000' IF MWEFUNC=6 ROUTE LOG OUTPUT TO TERMINAL
*                              FOR MIGRATE REQUEST
MWEFDONE EQU   B'00010000' THIS MWE HAS BEEN PROCESSED
MWEFABND EQU   B'00001000' HSM ABNORMALLY TERMINATED THIS MWE
MWEFOP   EQU   B'00000100' THIS MWE IF FOR OPERATOR COMMAND
MWEFMFRC EQU   B'00000010' FORCE VOL MOUNT EVEN IF MCV SHOWS IN USE
MWEFBUSY EQU   B'00000001' MWE IS BEING PROCESSED BY HSM
MWEUID   DS    0CL8  ID FOR TSO USER MAKING REQUEST
*                    A DUMMY ID OTHERWISE
         DS    CL7   FIRST SEVEN CHARS OF TSO ID
*                    '**OPER*' IF FROM OPERATOR CONSOLE
MWECONID DS    X     CONSOLE ID IF FROM OPERATOR CONSOLE
MWERQN   DS    F     HSM MWE NUMBER
MWEASCB  DS    F     USER ASCB ADDR
MWEECB   DS    F     ECB FOR WAITING UNTIL MWE DONE
MWERC    DS    F     RETURN CODE
MWEREAS  DS    F     REASON CODE
MWEID    DS    CL4   MUST BE 'MWE '
MWEABCC  DS    F     SYSTEM ABEND CODE
MWEGROUP DS    XL8   GROUP ID FOR RACF
MWELOCK  DS    X     LOCK BYTE FOR CROSS-MEMORY POST IF TSO AND
*                    ATTENTION INTERRUPT OCCURS
MWEFLG2  DS    0CL2
MWEFLG21 DS    X
MWEFATMP EQU   B'10000000'   CONSIDERED BUT NOT PROCESSED BECAUSE
*                            IT CONFLICTED WITH AN EXECUTING MWE
*                            OR THE FUNCTION IS HELD
MWEFBDCS EQU   B'01000000'   BACKUP DEVICE CATEGORY SPECIFIED
MWEFBDCT EQU   B'00100000'   IF MWEFBDCS=1 THEN DEVICE IS TAPE
*                  0         IF MWEFBDCS=1 THEN DEVICE IS DISK
MWEFSMSP EQU   B'00010000'   THIS COMMAND DOES SPACE MANAGEMENT
MWEFDBA  EQU   B'00001000'   0 = MIGRATE, OTHERWISE SEE MWEFRBU
MWEFRBU  EQU   B'00000100'   IF MWEFDBA=1 THEN DATA SET RETIREMENT OK
*                     0      IF MWEFDBA=1 THEN DATA SET DELETION OK
MWEFCNVT EQU   B'00000010'   CNVT FUNC REQ OR XTND REDUCE DONE
MWEFSTCK EQU   B'00000001'   STCK HAS BEEN DONE FOR THIS MWE
MWEFLG22 DS    X
MWEFRDRC EQU   B'10000000'   MCD MUST BE READ TO STORE IN THIS MWE
*                            THE BEGINNING AND ENDING TAPE VOLSERS
*                            FOR THE MIGRATED DATA SET
MWEFINHB EQU   B'01000000'   THIS MWE NOT SELECTED DURING RECALL Q SCAN
MWEFNATT EQU   B'00100000'   ARCATTNW SHOULD NOT ATTACH THE SVC
MWEFDNOW EQU   B'00010000'   ARCCTL SHOULD DELETE THIS MWE AFTER ARCCTL
*                            COPIES IT TO THE DFHSM ADDRESS SPACE
MWEF26DU EQU   B'00001000'   DELETE REQUEST FROM IGG026DU
MWEFWSDP EQU   B'00000100'   WAITING FOR ANOTHER RECALL FROM SDSP
*        EQU   B'00000011'   RESERVED
MWERCLCT DS    0X     NUMBER OF ATTEMPTS AT RECALL OF DATA SET
MWEATCTR DS    X      ALIAS FOR MWERCLCT
MWEJBN   DS    CL8    REQUESTOR JOB NAME
MWERST   DS    F      READER START TIME FOR JOB  HHMMSSTH
MWERSD   DS    F      READ START DATE OF JOB     00YYDDDS
MWERHSCT DS    X      TIMES RECALL TRIED WHILE ANOTHER CPU WAS USING
*                     THE DATASET
         DS    XL3    RESERVED
         DS    XL16   RESERVED
         DS    XL16   RESERVED
         DS    XL4    RESERVED
MWEVINUS DS    CL6    VOLSER OF TAPE CAUSING RC=82 FOR MSG ARC0380I
         DS    XL2    RESERVED
MWEHDRND DS    0X     END OF MWEHDR
*
         ORG   MWEHDRND
*
*   APPENDED TO HEADER FOR OPERATOR COMMANDS OR HSEND
*
MWECMDL  DS    H       LENGTH OF COMMAND TEXT PLUS 4
MWECMDO  DS    H       OFFSET FOR TSO SCAN AND PARSE
MWECMDT  DS    0C      COMMAND TEXT
*
         ORG   MWEHDRND
*
*   APPENDED TO HEADER FOR OTHER THAN OPER COMMANDS OR HSEND
*
MWEMCNT  DS    H     NUMBER OF MWE IN THIS REQUEST
MWESEQN  DS    H     SEQUENCE NUMBER IN MULTIPLE REQUEST
MWECCNT  DS    H     NUMBER OF MWE PROCESSED IN THIS REQUEST SO FAR
MWEDARC  DS    H     DYNAMIC ALLOCATION RETURN CODE
MWEDSN   DS    CL44  DATA SET NAME
         DS    XL8   RESERVED
MWEPW    DS    CL8   DATA SET PASSWORD
MWEDEVT  DS    XL4   DEVICE TYPE AS IN UCB
MWEVSN   DS    CL6   VOLSER  '*ALL  ' MEANS ALL VOLUMES
*                            '*LEV0 ' MEANS ALL PRIMARY
*                            '*LEV1 ' MEANS ALL ML1
MWECETYP DS    C     IF MWEFUNC=8 THEN IS CONTROL DATAT SET TYPE
MWEFRACF DS    X     RACF FLAGS AS ACEEFLG1 IN ACEE
MWEGEN   DS    0F    IF MWEFDATE = 0 THEN IS BACKUP VERSION NUMBER
MWEDATE  DS    0F    IF MWEFDATE = 1 THEN IS 00YYDDDS FOR RECOVER
MWE2DEVT DS    F     DEVT OF MWE2VSN VOL
MWEDAYS  DS    F     DAYS PARAMETER FROM MIGRATE COMMAND
MWE2VSN  DS    CL6   VSN OF THE CONVERT PARAM OF MIGRATE CMD
         DS    XL2   RESERVED
MWEDBADY DS    H     DBA DAYS FROM MIGRATE COMMAND
MWECVSN  DS    CL6   VOLSER OF CATALOG VOLUME
MWECDEVT DS    F     DEVICE TYPE OF CATALOG VOLUME
MWEPDEP  DS    F     ADDR OF POOL DESCRIPTOR ELEMENT
MWESTAMP DS    F     TWO MINUTE WAIT INTERVAL STAMP
         DS    XL12  RESERVED
MWEFBID  DS    F     FILE SEQ OF MIGRATED DATA SET ON TAPE
MWESTVOL DS    CL6   VOL SER OF TAPE WHERE MIGRATED DATA SET BEGINS
MWELSTVL DS    CL6   VOL SER OF TAPE WHERE MIGRATED DATA SET ENDS
MWEBUFL  DS    H     LENGTH OF BUFFER OF CONTROL DATA SET
MWEBUFU  DS    H     LENGTH USED IN THAT BUFFER
MWEBUFD  DS    0C    BUFFER OF DATA FROM CONTROL DATA SET
*
         ORG   MWEBUFD
*
*   APPENDED TO THE MWE FOR RECOVER REQUESTS ONLY
*
MWENDSN  DS    CL44      NEW DATA SET NAME FOR BACKUP VERSION
MWEFRVOL DS    CL6       ORIGINAL VOLUME OF BACKUPED DATA SET
         DS    CL6       RESERVED
MWENDSPW DS    CL8       PASSWORD FOR NEW NAME
*
         ORG   MWEBUFD
*
*   APPENDED TO THE MWE FOR JES3
*   WHEN MWEFUNC = 8 AND MWECETYP = (M OR G)
*
MWERVCT  DS    H         NUMBER OF VOLSERS
MWERVSN1 DS    CL6       VSN  OF FIRST     RETURNED VOL
MWERDVT1 DS    XL4       DEVT OF FIRST     RETURNED VOL
MWERVSN2 DS    CL6       VSN  OF SECOND    RETURNED VOL
MWERDVT2 DS    XL4       DEVT OF SECOND    RETURNED VOL
MWERVSN3 DS    CL6       VSN  OF THIRD     RETURNED VOL
MWERDVT3 DS    XL4       DEVT OF THIRD     RETURNED VOL
MWERVSN4 DS    CL6       VSN  OF FOURTH    RETURNED VOL
MWERDVT4 DS    XL4       DEVT OF FOURTH    RETURNED VOL
MWERVSN5 DS    CL6       VSN  OF FIFTH     RETURNED VOL
MWERDVT5 DS    XL4       DEVT OF FIFTH     RETURNED VOL
         ORG   ,
