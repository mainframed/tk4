BOOK DISK MANAGEMENT USER'S GUIDE
COVR1                 D I S K   M A N A G E M E N T
COVR2                          U S E R ' S
COVR3                           G U I D E
DATE 110187
SECTNJCL
HEAD JOB FLOW
          THE DISK MANAGEMENT SYSTEM FROM AN OPERATIONAL POINT OF VIEW
     IS ACTUALLY TWO SEPARATE SYSTEMS, THE PRODUCTION SYSTEM AND THE
     TEST SYSTEM.  SOME PROGRAMS ARE COMMON TO BOTH SYSTEMS AND SOME
     PROGRAMS RUN IN ONLY ONE SYSTEM.  INCLUDED ARE COMPLETE EXAMPLES
     OF ALL JOBS, PROCS, AND CONTROL CARD FILES REQUIRED TO RUN BOTH
     SYSTEMS.  DM2----- JOBS, PROCS, AND CONTROL CARD MEMBERS
     CONSTITUTE THE PRODUCTION SYSTEM.  DM3----- JOBS, PROCS, AND
     CONTROL CARD MEMBERS CONSTITUTE THE TEST SYSTEM.  FUNCTIONS HAVE
     BEEN BROKEN UP TO PERMIT THE MAXIMUM AMOUNT OF PARALLELISM.
INDEXPRODUCTION FLOW
                    P R O D U C T I O N   F L O W

                               DM200RRP  (ONLY AS REQUIRED)
                                X   X
                               X     X
                              X       X
                         DM203DDM   DM206DDM
                              X      X
                               X    X
                                X  X
                               DM210DUM
                                  X
                                  X
                                  X
                               DM220WRM
                                  X
                                  X
                                  X
                               DM230MRM
                                  X
                                  X
                                  X
                               DM299DTM
EJECT
INDEXTEST FLOW
                          T E S T   F L O W

                               DM300RUM  (ONLY AS REQUIRED)
                            XXXX X  X XXXX
                       XXXXX    X    X    XXXX
                  XXXXX        X      X       XXXX
               DM310WDM   DM315WDM   DM330WDM   DM340WDM
                    X      X              X      X
                     X    X                X    X
                      X  X                  X  X
                   DM320WUM              DM350WUM
                         XXX            XXX
                            XXX      XXX
                               X    X
                              DM360WUM
                               X   X
                              X     X
                             X       X
                        DM370WUM   DM380WUM
                             X      X
                              X    X
                               X  X
                              DM390WTM

     ALL JOBS ARE SHOWN REGUARDLESS OF WHETHER THEY ARE ALWAYS RUN.
INDEXSCHEDULE
     OUR STANDARD SCHEDULE IS AS FOLLOWS:

          DM200RRP - RUN ONLY AS REQUIRED (FILE RESTORE FOR RERUN)
          DM203DDM - DAILY
          DM206DDM - DAILY
          DM210DUM - DAILY
          DM220WRM - WEEKLY AT A QUIET TIME (SUNDAY)
          DM230MRM - MONTHLY
          DM299DTM - DAILY

          DM300RUM - RUN ONLY AS REQUIRED (FILE RESTORE FOR RERUN)
          DM310WDM - WEEKLY AT A QUIET TIME (SUNDAY)
          DM315WDM - WEEKLY AT A QUIET TIME (SUNDAY)
          DM320WUM - WEEKLY AT A QUIET TIME (SUNDAY)
          DM330WDM - WEEKLY AT A QUIET TIME (SUNDAY)
          DM340WDM - WEEKLY AT A QUIET TIME (SUNDAY)
          DM350WUM - WEEKLY AT A QUIET TIME (SUNDAY)
          DM360WUM - WEEKLY AT A QUIET TIME (SUNDAY)
          DM370WUM - WEEKLY AT A QUIET TIME (SUNDAY)
          DM380MUM - MONTHLY (PICKS UP DATA FROM PREV WEEKEND RUN)
          DM350WTM - WEEKLY AT A QUIET TIME (SUNDAY)
HEAD SAMPLE JCL
          SAMPLE JCL IS PROVIDED FOR ALL JOBS.  ALL JCL ASSUMES THAT
     NO STEPLIBS ARE REQUIRED TO RUN THE PROGRAMS.  REVIEW JOB
     CLASSES AND SYSOUT CLASSES AND CHANGE THEM TO MEET YOUR SHOP
     STANDARDS.  ALL JOBS SIMPLY EXECUTE A CORRESPONDING PROC.  THE
     FOLLOWING TABLE GIVES THE SPECIFICS.  THE TWO 'MBR' COLUMNS
     INDICATE THE MEMBER NAME IN THIS PDS IN WHICH THE JCL OR
     PROC IS STORED.

          JOB       JOB MBR   PROC      PROC MBR

          DM200RRP  JCLDM200  DM200P10  PRCDM200
          DM203DDM  JCLDM203  DM203P10  PRCDM203
          DM206DDM  JCLDM206  DM206P10  PRCDM206
          DM210DUM  JCLDM210  DM210P10  PRCDM210
          DM220WRM  JCLDM220  DM220P10  PRCDM220
          DM230MRM  JCLDM230  DM230P10  PRCDM230
          DM299DTM  JCLDM299  DM299P10  PRCDM299

          DM300RUM  JCLDM300  DM300P10  PRCDM300
          DM310WDM  JCLDM310  DM310P10  PRCDM310
          DM315WDM  JCLDM315  DM315P10  PRCDM315
          DM320WUM  JCLDM320  DM320P10  PRCDM320
          DM330WDM  JCLDM330  DM330P10  PRCDM330
          DM340WDM  JCLDM340  DM340P10  PRCDM340
          DM350WUM  JCLDM350  DM350P10  PRCDM350
          DM360WUM  JCLDM360  DM360P10  PRCDM360
          DM370WUM  JCLDM370  DM370P10  PRCDM370
          DM380MUM  JCLDM380  DM380P10  PRCDM380
          DM390WTM  JCLDM390  DM390P10  PRCDM390
HEAD CONTROL CARD FILES
          SEVERAL JOBS REQUIRE PARAMETERS.  IN SEVERAL CASES ALL
     THAT IS INVOLVED IS CONTROL CARDS FOR STAND ALONE SORTS.  THE
     SAMPLE JCL POINTS TO MEMBERS IN THIS PDS WHICH ARE EXAMPLES.
     FOR THE PURPOSES OF THE SAMPLE JCL THIS PDS IS ASSUMED TO
     BE NAMED 'U220PJR.SHAREDM.DATA'.  ALL CONTROL CARD FILES ARE
     80 BYTE CARD IMAGE FILES.  ALL PROGRAMS WILL ACCEPT ANY BLOCKING
     THAT IS ACCEPTABLE TO MVS.  EACH FILE IS DOCUMENTED BELOW.
     RECORD LAYOUTS, ETC. ARE PROVIDED WHERE APPROPRIATE.
INDEXCLTDM203
          SORT PARAMETER CARDS.
INDEXCTLDM206
          SORT PARAMETER CARDS.
INDEXCTLDM220
          DASD VOLSER ATTRIBUTE LIST.  INCLUDE ONE CARD FOR EACH VOLSER
     TO BE FOUND IN EITHER THE TEST OR PRODUCTION SYSTEM.  CARDS MUST BE
     IN ASCENDING ORDER BY VOLSER.  DUPLICATES ARE NOT ALLOWED BUT CARDS
     FOR VOLSERS NOT PROCESSED ARE OK.  RECORD LAYOUT:

     COLS   DESCRIPTION

     01-06  VOLSER OF DASD VOLUME
     08-14  TRACK SIZE
     16-18  TRACKS PER CYLINDER
     20-24  CYLINDERS PER VOLUME
     26-28  POOL ID
     30     SYS SWITCH   (Y/N)
     31-80  COMMENTS

          THE POOL ID IS USED TO IDENTIFY WHICH POOL A VOLUME BELONGS
     TO.  THE DM210PRP PROGRAM IS HARD CODED TO GENERATE TOTALS BASED ON
     THE FOLLOWING POOLS:

               PRD - BATCH PRODUCTION
               ONL - ONLINE PRODUCTION
               SYS - SYSTEM (NUCLEUS, SPOOL, ETC. FOR PRODUCTION SYSTEM)
               IPO - ALL DLIB FILES PLUS IPO SYSRES FILES

     THE DM200PRP PROGRAM WILL IGNORE OTHER POOL IDS.  WE HAVE OTHER
     REPORT WRITER TYPE PROGRAMS THAT USE THE OTHER POOL IDS.  THESE
     REPORT WRITER PROGRAMS ARE NOT INCLUDED IN THIS PACKAGE.

          THE SYS SWITCH IS DESIGNED TO HANDLE THE MULTIPLE SYSRES
     SITUATION.  A PRODUCTION AND AN IPO SYSRES WILL BOTH CONTAIN A
     'SYS1.NUCLEUS'.  THESE ARE SEPARATE DATA SETS BUT BOTH DISK
     MANAGEMENT SYSTEMS ASSUME ALL DATA SET NAMES ARE UNIQUE.  THIS
     ALLOWS TRACKING OF DATA SET MOVEMENT AND DETECTION OF INADVERTENT
     DUPLICATIONS.  TO HANDLE THIS SITUATION THE SYS SWITCH CAN BE SET
     TO 'Y' FOR ALL VOLUMES THAT PROPERLY CONTAIN DATA SETS WITH
     DUPLICATED NAMES.  THIS WILL CAUSE THE VOLSER OF THE PACK TO BE
     ADDED AS THE RIGHT MOST 6 CHARACTERS OF THE DATA SET NAME.  THIS
     WILL HAVE THE EFFECT OF MAKING EACH DATA SET NAME UNIQUE.  THUS
     THE VARIOUS COPIES OF THE DATA SET CAN BE TRACKED INDIVIDUALLY.
INDEXCTLDM230
          THIS IS A PARAMETER CARD USED BY THE DM230PRP PROGRAM.
     FILE LAYOUT:

     COLS   DESCRIPTION

     01-04  CONSTANT - MUST BE 'CTRL'
     05     FILLER (IGNORED - SHOULD BE SPACES)
     06-13  CONSTANT - MUST BE 'DM230PRP'
     14-18  FILLER (IGNORED - SHOULD BE SPACES)
     19-26  POSSIBLE DATE - SHOULD BE 'MM/DD/YY'
     27-46  FILLER AND SWITCHES - MUST BE SPACES
     47-49  DEFAULT GROUP.  USED WHERE AAM IS INVALID
            OR AAM IS NOT AVAIALBLE.
     50-80  COMMENTS
INDEXCLTDM310
          SORT PARAMETER CARDS.
INDEXCTLDM315
          SORT PARAMETER CARDS.
INDEXCLTDM330
          SORT PARAMETER CARDS.
INDEXCTLDM350
          SORT PARAMETER CARDS.
INDEXCTLDM380
          THIS IS A PARAMETER CARD USED BY THE DM170PRP PROGRAM.
     FILE LAYOUT:

     COLS   DESCRIPTION

     01-04  CONSTANT - MUST BE 'CTRL'
     05     FILLER (IGNORED - SHOULD BE SPACES)
     06-13  CONSTANT - MUST BE 'DM170PRP'
     14-18  FILLER (IGNORED - SHOULD BE SPACES)
     19-26  POSSIBLE DATE - SHOULD BE 'MM/DD/YY'
     27-46  FILLER AND SWITCHES - MUST BE SPACES
     47-49  DEFAULT GROUP.  USED WHERE AAM IS INVALID
            OR AAM IS NOT AVAIALBLE.
     50-80  COMMENTS
INDEXCTLMEAAM
          THIS TABLE IS USED TO VALIDATE OUR AAM ACCOUNTING CODES.  THE
     TABLE MUST BE MAINTAINED IN ASCENDING ALPHABETIC ORDER BY AAM.
     DUPLICATE AAMS ARE NOT PERMITTED.  AN AAM IS CONSIDERED INVALID IF
     IT IS NOT IN THIS TABLE.  THIS TABLE IS ALSO USED TO TRANSLATE THE
     AAM INTO A GROUP CODE THAT IS USED BY OUR FINANCE PEOPLE.  (SEE
     CTLMEGRP FOR MORE ON THIS).  RECORD LAYOUT:

     COLS   DESCRIPTION

     01-03  AAM
     04-05  FILLER (IGNORED - SHOULD BE SPACES)
     06-08  GROUP CODE
     09-80  COMMENTS
INDEXCTLMEGRP
          THIS TABLE DEFINES THE VALID GROUP AND TYPE CODES.  ALTHOUGH
     THE GROUP IS REFERRED TO AS A THREE DIGIT NUMBER ELSEWHERE IT IS
     ACTUALLY COMPOSED OF TWO PARTS.  THE FIRST TWO DIGITS ARE THE TRUE
     GROUP.  THIS IS AKIN TO AN APPLICATION CODE.  THE LAST DIGIT IS
     THE SUB GROUP.  THIS IS AKIN TO THE MAJOR PART OF THE AAM.  RECORD
     LAYOUT:

     COLS   DESCRIPTION

     01-03  TYPE - 'TYP' FOR SUBGROUP DEFINITION
                   'GRP' FOR GROUP DEFINITION
     04-05  FILLER (IGNORED - SHOULD BE SPACES)
     06-07  SUB TYPE NUMBER (01-08) OR GROUP NUMBER (01-99)
     08-09  FILLER (IGNORED - SHOULD BE SPACES)
     10-39  SUB TYPE DESCRIPTION OR GROUP DESCRIPTION
     40-80  COMMENTS

          IF YOU HAVE COME TO THE CONCLUSION THAT AAMS AND GROUP NUMBERS
     REALLY PERFORM THE SAME FUNCTION YOU ARE RIGHT.  SO WHY DO WE GO
     THRU THIS ELABORATE PROCESS OF TRANSLATING AAMS TO GROUP NUMBERS?
     TRADITION.  THE SYSTEM WAS SET UP THIS WAY AT ONE TIME AND IT HAS
     BEEN EASIER TO MAINTAIN IT THAN TO TALK ANYONE INTO SIMPLIFYING
     IT.  I WOULD SUGGEST YOU CONSIDER SIMPLIFYING THINGS WHEN YOU
     INSTALL THIS SYSTEM.  THE PROGRAMS INVOLVED ARE THE DM230PRP FOR
     THE PRODUCTION SYSTEM AND THE DM170PRP FOR THE TEST SYSTEM.
INDEXCTLTSOID
          THIS TABLE ASSOCIATES ACCOUNTING INFORMATION AND DISTRIBUTION
     INFORMATION WITH HIGH LEVEL DATA SET NAME QUALIFIERS FOR TEST
     FILES.  FILE LAYOUT:

     COLS   DESCRIPTION

     01-02  FILLER (IGNORED - SHOULD BE SPACES)
     03-10  HIGH LEVEL DATA SET NAME QUALIFIER, LEFT JUSTIFIED
            WITH TRAILING BLANKS
     11     FILLER (IGNORED - SHOULD BE SPACES)
     12-39  NAME OF PERSON OR DEP'T OWNING FILES
     40     FILLER (IGNORED - SHOULD BE SPACES)
     41-59  REPORT DISTRIBUTION INFORMATION
     60     FILLER (IGNORED - SHOULD BE SPACES)
     61-63  ACCOUNTING FIELD -
            IF ALPHABETIC THEN THREE LETTER AAM
            IF NUMERIC THEN THREE DIGIT DEPARTMENT NUMBER
     64     FILLER (IGNORED - SHOULD BE SPACES)
     65-72  DD NAME OF DD STATEMENT ON WHICH REPORT WILL PRINT
     73-80  COMMENTS

          ENTRIES MUST BE IN ASCENDING ALPHABETIC ORDER BY HIGH LEVEL
     DATA SET NAME QUALIFIER.  DUPLICATES ARE NOT PERMITTED.  EXTRA
     ENTRIES ARE OK.  IF A HIGH LEVEL DATA SET NAME QUALIFIER IS
     ENCOUNTERED IN THE DATA THAT IS NOT IN THE TABLE THEN THE DD
     NAME 'ERROR   ' IS USED AND THE DM160PRP PROGRAM FILLS IN
     DEFAULT VALUES FOR THE OTHER FIELDS IN THE TABLE.  THE ERROR DD
     AND THE DDS SELECTED FROM THE TABLE ARE DYNAMICALLY ALLOCATED
     SO THEY MUST NOT BE SPECIFIED IN THE JCL.
SECT PROGRAM DOCUMENATATION
INDEXDM011SCR - SUPERSCRATCH FOR TMP POOL
          THIS PROGRAM IS DESIGNED TO CLEAN UP TEMP PACKS.  IT
     LOOKS FOR OLD TEMPORARY FILES OR NON-TEMPORARY FILES THAT DO
     NOT BELONG ON THE PACK.  THE LOGIC IS CONTROLLED BY THE PARM
     FIELD AND BY CODING A UCS PARAMETER.

          CERTAIN FILES ARE ALWAYS LEFT ALONE.  THEY ARE  FILES
     STARTING WITH 'SYS1.', 'SYS2.', 'SYS3', 'DSCB.', 'CATALOG.',
     AND ANY VSAM FILE.

          THE PARM FIELD CAN BE USED TO SET THREE INDICATORS.
     'RUN=TEST' OR 'RUN=REAL' CONTROLS THE OVERALL EXECUTION OF
     THE PROGRAM.  TEST WILL CAUSE THE PROGRAM TO EXECUTE AND
     PRODUCE A REPORT BUT NO FILE ACTION WILL ACTUALLY TAKE PLACE.
     REAL WILL CAUSE DELETE AND UNCATALOG PROCESSING TO TAKE PLACE.

          'TEMP=DD.HH' DETERMINES THE SAFETY WINDOW ON TEMP FILES.  A
     FILE CREATED LESS THAN DD DAYS AND HH HOURS WILL BE RETAINED.  THE
     TIME STAMP IN THE DATA SET NAME IS USED FOR THIS CHECK.  'DS=DD'
     DETERMINES THE SAFETY WINDOW OF OTHER FILES.  A FILE CREATED LESS
     THAN DD DAYS AGO WILL BE RETAINED.  THE LAST USED DATE IS USED FOR
     THIS CHECK.  IF THE FILES HAS NEVER BEEN USED THEN THE CREATE DATE
     IS USED INSTEAD.

          THESE PARAMETERS MUST BE SEPARATED BY COMMAS.  THE DEFAULT
     PARM IS 'RUN=TEST,TEMP=01.00,DS=02'.

          THE UCS PARAMETER IS CODED ON DD STATEMENTS THAT POINT TO
     THE VOLUMES TO BE PROCESSED.  IT MAY BE DIFFERENT FOR EACH DD.
     POSSIBLE VALUES ARE:
          UCS=NTMP - CHECK NON-TEMPORARY DATA SETS.
          UCS=TSO  - CHECK TSO DATA SETS.
          UCS=ALL  - CHECK NON-TEMPORARY AND TSO DATA SETS.

          CODE DISKXX DDS TO INDICATE THE PACKS TO BE PROCESSED.  THE
     FIRST DD MUST BE DISK01.  THE SECOND DD MUST BE DISK02.  THE THIRD
     . . . , ETC.  NUMBERS MUST BE USED IN SEQUENCE.  IF YOU NEED TO
     SKIP A NUMBER IN THE SEQUENCE INCLUDE A DD WITH THE 'DUMMY'
     PARAMETER OR WITH 'DSN=NULLFILE'.   THIS WILL CAUSE A DD TO BE
     SKIPPED.  FOR INSTANCE, IN THE SITUATION WHERE THE DDS ARE IN A
     PROC AND YOU DO NOT WISH TO CHANGE THE PROC YOU CAN INCLUDE A JCL
     OVERRIDE WITH 'DSN=NULLFILE' FOR THE DD IN THE MIDDLE OF A LIST TO
     SKIP PROCESSING OF A VOLUME.  CODE ONLY ONE VOLUME PER DD.

          TEMPORARY FILES AND TSO FILES ARE IDENTIFIED BY CERTAIN
     CHARACTERISTICS OF THEIR DATA SET NAMES.  SEE THE PROGRAM LOGIC FOR
     SPECIFIC DETAILS.
INDEXDM100PUP - HSM MCDS EXTRACT
          THIS PROGRAM SCANS THE HSM MCDS FILE LOOKING FOR 'D' (DATASET)
     RECORDS AND 'A' (ALIAS) RECORDS.  (ALIAS IS THE NAME OF THE DATA
     SET AFTER IT HAS BEEN MIGRATED.)  KEY FIELDS FROM EACH 'D' RECORD
     IS PLACED IN A RECORD WRITTEN TO THE EXTRACTD FILE.  KEY FIELDS
     FROM EACH 'A' RECORD IS PLACED IN A RECORD WRITTEN TO THE EXTRACTA
     FILE.

          THIS PROGRAM DOES NOT USE PARMS OR OPTION FILES.  IT READS
     A VSAM FILE (DDNAME=MCDS) AND PUTS OUR TWO SEQUENTIAL FILES
     (DDNAME=EXTRACTA AND DDNAME=EXTRACTD).  NO REPORTS ARE PRODUCED.
INDEXDM110PUP - VTOC EXTRACT
          THIS PROGRAM EXTRACTS DATA FROM VTOCS.  MANY VTOCS CAN BE
     PROCESSED IN ONE EXECUTION OF THIS PROGRAM.  ONE RECORD IS PLACED
     IN THE OUTPUT FILE (DDNAME=EXTRACTV) FOR EACH FILE LOCATED BY
     MEANS OF A FORMAT1 DSCB.  DATA FROM MULTIPLE VTOCS IS EFFECTIVELY
     CONCATENATED TOGETHER.

          A PROCESSING OPTION IS PROVIDED VIA THE PARM FIELD.
     PARM=HSM INDICATES THAT ONLY FILES WITH A DATA SET NAME OF THE
     FORM *.HMIG.** SHOULD BE INCLUDED IN THE OUTPUT FILE.  A
     PARM=NOSYS OPTION INDICATES THAT DATA SETS OF THE FORM SYS1.**
     SHOULD BE EXCLUDED.  OMITTING THE PARM CAUSES ALL DATA SETS TO BE
     INCLUDED.

          ANY DD WITH A DDNAME OF DISKXXXX WHERE XXXX MAY BE ANY
     CHARACTERS IS PROCESSED.  THE VTOC ON THE VOLUME POINTED TO BY
     THE DD IS PROCESSED.  DO NOT USE A LIST IN THE VOL=SER= FIELD
     NOR CONCATENATE DDS TOGETHER ON THESE DDS.  INCLUDE A SINGLE
     DISKXXXX DD FOR EACH VOLUME AND MAKE THE DD NAMES UNIQUE BY
     VARYING THE XXXX PART.

          THE PARM=HSM IS USED IN THE STEP THAT PROCESSES HSM MIGRATE
     VOLUMES.  THIS CAUSES SYS1.VTOCIX.* DATA SETS TO BE IGNORED
     (SEE PRCDM330).  PARM=NOSYS IS NOT USED IN ANY OF THE SAMPLE
     JCL.
INDEXDM120PUP - MATCH HSM 'A' RECS TO MIGRAT VTOC
          THIS PROGRAM IS DESIGNED TO CHECK UP ON HSM.  EARLIER
     PROCESSING GENERATES A LIST OF ALL 'ALIAS' DATA SETS FROM THE
     MCDS.  A VTOC SCAN GENERATES A LIST OF THE ALIAS DATA SETS
     THEMSELVES.  BOTH LISTS ARE SORTED AND INPUT TO THIS PROGRAM.
     THIS PROGRAM COMPARES THE LISTS AND GENERATES AN EXCPETION
     REPORT (DDNAME=SYSPRINT).  PROPERLY MATCHED FILES ARE OUTPUT
     (DDNAME=MERGEA) FOR FURTHER PROCESSING.  THE INPUT FILES ARE
     THE MCDS 'A' REC FILE (DDNAME=EXTRACTA) AND THE VTOC FILE
     (DDNAME=SORTVDSN).

          THIS PROGRAM HAS NO PARM OR CONTROL CARD OPTIONS.
INDEXDM130PRP - PRODUCE COMBINED TEST MASTER FILE
          THIS PROGRAM PERFORMS CROSS CHECKING ON HSM AND PRODUCES
     A CLEAN FILE OF MIGRATED DATA SETS.  INPUT CONSISTS OF THE
     MERGED 'A' REC FILE (SEE DDNAME=MERGEA IN PROGRAM DM120PUP)
     AFTER IT HAS BEEN SORTED INTO ORIGINAL DATA SET NAME (NOT ALIAS)
     ORDER (DDNAME=SORTAMRG) AND THE 'D' REC FILE FROM THE DM110PUP
     PROGRAM (SEE DDNAME=EXTRACTV IN THAT PROGRAM) WHICH IS ALREADY
     IN THE CORRECT ORDER.

          THE MAIN OUTPUT IS A CLEANED UP FILE (DDNAME=EDTDMCDS) THAT IS
     AVAILABLE FOR SUBSEQUENT PROCESSING.  THREE REPORT FILES ARE
     CREATED.  THE FIRST ONE (DDNAME=RPTERROR) CONTAINS MISCELLANEOUS
     ERRORS.  THE OTHER TWO (DDNAME=RPTXTRAA AND DDNAME=RPTXTRAD) REPORT
     'A' RECORDS WITH UNMATCHED 'D'S AND 'D' RECORDS WITH UNMATCHED 'A'S
     RESPECTIVELY.  THESE, OR OTHER ERRORS MAY CAUSE THIS PROGRAM TO
     DECIDE THAT EITHER A 'D' OR AN 'A' RECORD NEEDS TO BE DELETED FROM
     THE HSM MCDS.  TWO FILES (DDNAME=HCMDA AND DDNAME=HCMDD) WILL BE
     CARD IMAGE FILES CONTAINING HSM COMMANDS TO DELETE THESE RECORDS.
     THEY CAN BE FED INTO THE DM190PUP PROGRAM FOR ACTION.

          THIS PROGRAM PERFORMS A VERIETY OF EDITS DEPENDING ON WHETHER
     THE FILE HAS BEEN MIGRATED TO DISK OR TAPE.  FOR DISK THE FOLLOWING
     SHOULD BE TRUE:
         A)  MCDS D RECORD PRESENT
         B)  MCDS A RECORD PRESENT
         C)  ALIAS DATA SET ON MIGRAT VOLUME
         D)  CATALOG ENTRY WITH VOLSER=MIGRAT
     FOR TAPE THE FOLLOWING SHOULD BE TRUE:
         A)  MCDS D RECORD PRESENT
         B)  MCDS A RECORD PRESENT
         C)  NO ALIAS DATA SET ON MIGRAT VOLUME
         D)  CATALOG ENTRY WITH VOLSER=MIGRAT
     THE FOLLOWING CROSS CHECKS ARE ALSO PERFORMED:
         E)  'D' DSN IN 'D' REC MATCHES 'D' DSN IN 'A' REC
         F)  'A' DSN IN 'D' REC MATCHES 'A' DSN IN 'A' REC
         G)  VOLSER IN 'D' REC MATCHES VOLSER OF ALIAS REC IN VTOC
     A VIOLATION OF ANY OF THIS WILL BE REPORTED IN ONE OF THE
     REPORT FILES.

          THIS PROGRAM HAS NO PARM OR CONTROL CARD OPTIONS.
INDEXDM140PUP - VVDS EXTRACT
          THIS PROGRAM EXTRACTS KEY INFORMATION ABOUT VSAM FILES FROM
     THE SYS1.VVDS.* FILES.  MANY VVDSS CAN BE PROCESSED IN ONE
     EXECUTION OF THIS PROGRAM.  ONE RECORD IS PLACED IN THE OUTPUT FILE
     (DDNAME=EXTRACT) FOR EACH FILE LOCATED BY MEANS OF A 'Z' (VVR
     PRIMARY) RECORD.  DATA FROM MULTIPLE VVDSS IS EFFECTIVELY
     CONCATENATED TOGETHER.  THIS ALLOWS US TO GET TRUE NUMBERS FOR
     TRACKS USED, LRECL, AND CI SIZE (SUBSTITUTED FOR BLKSIZE) ON VSAM
     FILES.

          ANY DD WITH A DDNAME OF VVDSXXXX WHERE XXXX MAY BE ANY
     CHARACTERS IS PROCESSED.  SEE PRCDM203 OR PRCDM315 FOR SAMPLE JCL.
     IF YOU ARE NOT SURE WHICH VOLUMES HAVE A VVDS CONSULT THE OUTPUT OF
     THE DM110PUP PROGRAM AFTER YOU HAVE SORTED IT BY DATA SET NAME.  DO
     NOT USE A LIST IN THE VOL=SER= FIELD NOR CONCATENATE DDS TOGETHER
     ON THESE DDS.  INCLUDE A SINGLE VVDSXXXX DD FOR EACH VVDS AND MAKE
     THE DD NAMES UNIQUE BY VARYING THE XXXX PART.

          THE FOLLOWING JCL PARAMETERS ARE REQUIRED ON THE VVDSXXXX
     DD STATEMENTS:

          DSN=           DATA SET NAME OF THE VVDS, USUALLY:
                         SYS1.VVDS.V------ WHERE ------ IS THE
                         VOLSER
          DISP=          OLD OR SHR
          UNIT=          3380 OR SYSDA OR WHATEVER
          VOL=SER=       HARD CODE THE VOLSER
          AMP=AMORG      TELLS ALLOCATION IT'S A VSAM FILE

     CODING UNIT, VOL=SER, AND AMP ALLOWS THE DATA SET TO BE PROCESSED
     WITHOUT REFERENCE TO A VSAM CATALOG.  THE RULES FOR DETERMINING
     WHICH CATLOG THIS VVDS IS TO BE FOUND IN ARE COMPLEX.  THIS GETS
     OUT OF THE PROBLEM ENTIRELY.

          THIS PROGRAM HAS NO PARM OR CONTROL CARD OPTIONS.
INDEXDM150PUP - UPDATE VTOC DATA FROM VVDS RECS
          THIS PROGRAM MERGES DATA FROM VTOCS (DDNAME=SORTVDSN)
     WITH VVDS DATA FOR VSAM FILES (DDNAME=SORTVVVR) TO FORM A MERGED
     OUTPUT FILE (DDNAME=MERGVDSN).  DM110PUP AND DM140PUP OUTPUT
     MUST BE SORTED BEFORE USE WITH THIS PROGRAM.

          VTOC DATA ON NON-VSAM FILES IS PASSED THRU UNCHANGED.  A MERGE
     IS ATTEMPTED FROM THE VVDS DATA FOR VSAM FILES.  ON MATCH (DATA SET
     NAME AND VOLSER ARE EQUAL):

          A)  VVDS TRACKS USED REPLACES VTOC TRACKS USED
          B)  VVDS CI SIZE REPLACES VTOC BLOCK SIZE
          C)  VVDS MAX LRECL REPLCAES VTOC LRECL
          D)  VVDS EXTENT COUNT REPLCAES VTOC EXTENT COUNT
          E)  RECFM FORCED TO 'VB'

          ONE ADDITIONAL FIXUP IS PERFORMED.  DADSM DOES NOT UPDATE THE
     REF DATE ON VDAM INDEX COMPONENTS BUT IT DOES UPDATE THE THE REF
     DATE ON DATA COMPONENTS.  WE USE A NAMING STANDARD WHERE IF THE
     CLUSTER IS NAMED XXXX, THE DATA COMPONENT XXXX.DATA AND THE INDEX
     COMPONENT IS NAMED XXXX.INDEX.  BASED ON THIS, A DATA SET NAME SORT
     WILL CAUSE THE DATA COMPONENT TO FALL JUST AHEAD OF THE INDEX
     COMPONENT.  AS VSAM FILES ARE PROCESSED THE DSN AND REF DATE OF THE
     PREVIOUS VSAM FILE ARE SAVED.  WHEN A NEW VSAM FILE IS PROCESSED
     THE DSN IS COMPARED TO THE PREVIOUS ONE.  IF THE NEW NAME ENDS IN
     '.INDEX', THE OLD ONE ENDS IN '.DATA', AND THE ENTIRE PRECEEDING
     PART OF THE DATA SET NAMES ARE IDENTICAL WE PROPAGATE THE REF DATE
     FROM THE OLD ONE TO THE NEW ONE.  THIS HAS THE EFFECT OF FIXING THE
     INDEX REF DATE.  SINCE WE DO NOT USE VDAM AIXS THIS SCHEME HAS
     WORKED WELL FOR US.

          AN UNMATCHED NON-VSAM VTOC RECORD IS CONSIDERED NORMAL.  AN
     UNMATCHED VSAM VTOC RECORD OR AN UNMATCHED VSAM VVDS RECORD IS
     CONSIDERED AN ERROR AND REPORTED ON THE REPORT FILE
     (DDNAME=SYSPRINT).  UNMATCHED VSAM VTOC RECORDS ARE PASSED
     UNCHANGED TO THE OUTPUT FILE BUT UNMATCHED VVDS RECORDS ARE
     DROPPED.

          THIS PROGRAM HAS NO PARM OR CONTROL CARD OPTIONS.
INDEXDM160PRP - TEST SYSTEM PROGRAMMER REPORTS
          THIS PROGRAM TAKES TWO FILES AS INPUT.  THE FIRST FILE
     CONTAINS SORTED VTOC DATA FROM TEST PACKS (DDNAME=TESTVTOC).  THE
     SECOND FILE CONTAINS THE MERGED DATA ON MIGRATED FILES
     (DDNAME=EDTDMCDS).  TOGETHER THEY CONTAIN DATA ON ALL TEST FILES.
     THE OUTPUT IS A MERGED MASTER FILE CONTAINING A RECORD FOR EACH
     TEST FILE REGUARDLESS OF WHETHER IS IS MIGRATED OR NOT AND REPORTS.

          EACH TEST FILE IS REPORTED ON TWICE.  ALL FILES ARE REPORTED
     ON A MASTER REPORT (DDNAME=RPTMAST).  THE SECOND PLACE A FILE IS
     REPORTED ON IS IN A DETAIL REPORT.  ANY NUMBER OF DDS CAN BE USED
     TO FOR THE DETAIL REPORT.  THIS ALLOWS A GREAT DEAL OF FLEXIBILITY
     WITH RESPECT TO HOW THE DETAIL REPORTS ARE GROUPED.  THE FINAL
     OUTPUT IS A CARD IMAGE FILE (DDNAME=HCMDD) CONTAINING HSM COMMANDS
     TO DELETE EXPIRED MIGRATED TEST FILES (SEE DM190PUP).

          OPTIONS ARE SPECIFIED VIA BOTH THE PARM FIELD AND CONTROL
     CARDS.  FIRST, AS TO THE PARM FIELD.  THREE OPTIONS ARE SPECIFIED
     IN THE PARM FIELD:

          A)  OUT= - MAY BE A-Z OR *.  SPECIFIES THE SYSOUT
              CLASS OF THE DDS THAT ARE DYNAMICALLY BUILT FOR
              THE DETAIL REPORTS.  THE DEFAULT IS '*'.
          B)  EXP= - MAY BE 000 - 999.  NUMBER OF DAYS TILL
              MIGRATED FILES EXPIRE.  MUST BE SPECIFIED.
              IF EXP=180 THEN FILES WILL EXPIRE 181 DAYS
              AFTER MIGRATING.
          C)  WARN= - MAY BE 000 - 999.  NUMBER OF DAYS OF
              WARNING.  MUST BE SPECIFIED.  IF WARN=014 THEN
              A WARNING MESSAGE WILL BE GENERATED 14 DAYS BEFORE
              EXPIRATION.

          THIS PROGRAM USES THE CTLTSOID CONTROL CARD MEMBER AS
     PARAMETER INPUT (DDNAME=DISTTBL).  SEE 'CONTROL CARD FILES' ABOVE
     FOR ADDITIONAL INFORMATION.  AS EACH TEST FILE IS PROCESSED THE
     HIGH LEVEL QUALIFIER IS MATCHED AGAINST THIS TABLE.  SEVERAL FIELDS
     IN THE CONTROL RECORD ARE USED TO BUILD TITLING INFORMATION.  ONE
     FIELD IS USED TO FILL IN AN ACCOUNTING FIELD IN THE MASTER DISK
     FILE.  A KEY HOWEVER, IS THE DDNAME FIELD IN THE CONTROL CARD FILE.
     A CHAIN OF DDS IS BUILT ON AN AS NEEDED BASIS.  IF A DDNAME IN THE
     CHAIN MATCHES THE FIELD IN THE CONTROL CARD IT IS USED.  OTHERWISE,
     A NEW SEGMENT IS ADDED TO THE CHAIN.  A DYNAMIC ALLOCATION FOR A
     DD OF THE FORM:

          //XXXXXXXX DD SYSOUT=Z

     IS DONE.  THE XXXXXXXX IS FROM THE DDNAME FILED IN THE CONTROL
     RECORD.  THE Z IS THE SYSOUT CLASS FROM THE OUT PARMATER IN THE
     PARM.  AN OPEN IS PERFORMED AGAINST THIS NEW DD AND ALL DETAILED
     REPORTING FOR THAT HIGH LEVEL QUALIFIER ROUTED TO THE DD.  ALL
     OF THESE DDS ARE CLOSED AT PROGRAM TERMINATION TIME.  IF A MATCH
     ON HIGH LEVEL QUALIFIER WITH THE CONTROL CARD TABLE IS NOT FOUND
     THEN A:

          //ERROR   DD SYSOUT=Z

     IS DYNAMICALLY ALLOCATE AND OPENED, IF NECESSARY, AND DETAIL
     IS PRINTED ON IT.  TITLE INFORMATION AND ACCOUNTING INFORMATION
     ARE SUPPLIED BY HARD CODED VALUES IN THE PROGRAM.
INDEXDM170PRP - TEST SYSTEM MONTHLY BILLING RPT
          THIS PROGRAM TAKES TWO FILES AS THE MAIN INPUT.  THE FIRST
     IS THE CONSOLIDATED TEST MASTER FILE (DDNAME=MASTER).  THIS
     REPRESENTS THE CURRENT STATE OF ALL TEST FILES.  THE SECOND
     FILE IS THE HISTORY FILE (DDNAME=HISTORY).  INFORMATION FROM
     THE MASTER FILE IS USED TO UPDATE THE HISTORY FILE WHICH IS
     REWRITTEN ON TOP OF ITSELF.  A WORKING COPY OF THE HISTORY
     FILE IS BUILT (DDNAME=WORKHIST) BEFORE HISTORY FILE UPDATING
     STARTS.

          SEVERAL REPORT FILES ARE PRODUCED.  (DDNAME=RPTDET) CONTAINS
     FILE LEVEL DETAIL INFORMATION.  (DDNAME=RPTSUM) CONTAINS LEDGER
     BREAK TOTALS AND GRAND TOTALS.  (DDNAME=RPTBILL) CONTAINS TOTALS
     ORGANIZED IN THE PROPER FORMAT FOR OUR FINANCE PEOPLE.  (DDNAME=
     BILLOUT) COONTAINS THE FINANCE INFORMATION IN A CARD IMAGE FORMAT
     SUITABLE FOR OUR BILLING SYSTEM.

          THE PARM FIELD IS NOT USED.  TWO CONTROL CARD FILES ARE
     USED FOR MOST PARAMETER INPUT.  (DDNAME=AAMIN) IS USED TO READ THE
     CTLMEAAM CONTROL CARD MEMBER.  (DDNAME=GRPIN) IS USED TO READ IN
     THE CTLMEGRP CONTROL CARD MEMBER.  TOGETHER THESE TWO FILES PERMIT
     VALIDATION OF ACCOUNTING INFORMATION AND TRANSLATION TO THE GROUP
     CODES USED BY THE FINANCE PEOPLE.  THE FINAL PARAMETER INPUT
     (DDNAME=CTRLCTRL) SETS THE DEFAULT GROUP.  SEE DOCUMENTATION ON
     THE CTLDM230 MEMBER FOR ADDITIONAL INFORMATION.
INDEXDM190PUP - SEND COMMANDS TO HSM
          THIS PROGRAM SENDS COMMANDS TO HSM USING THE HSMXEQ
     SUBROUTINE.  SINCE THE HSM INTERFACE USED IS THE SAME ONE AS
     TSO THE COMMAND FORMAT IS THE SAME.  INPUT (DDNAME=SYSIN) IS
     CARD IMAGES WHERE COLUMNS 73 TO 80 ARE IGNORED.  OUTPUT
     (DDNAME=SYSPRINT) IS A REPORT SHOWING THE RESULTS.

          THIS PROGRAM HAS NO PARM OR CONTROL CARD OPTIONS.
INDEXDM200PUP - PROD SYSTEM DAILY UPDATE & RPT
          THIS PROGRAM UPDATES THE PRODUCTION DISK MANAGEMENT MASTER
     FILE AND PRODUCES DAILY REPORTS.  THE MASTER FILE (DDNAME=MASTER)
     IF FIRST COPIED TO A WORK FILE (DDNAME=WORK) AND THEN UPDATED USING
     INFORMATION FROM THE MERGED VTOCS (DDNAME=TRANFILE).  THE TRANFILE
     DATA IS SORTED BEFORE USE.  IF AN OUT OF SEQUENCE CONDITION IS
     DETECTED IN THE MASTER FILE IT IS AUTOMATICALLY SORTED BEFORE USE
     ALSO.

          SEVERAL REPORTS ARE PRODUCED.  ANY ERRORS THAT ARE FOUND ARE
     REPORTED (DDNAME=ERROUT).  ALL FILES IN 'TEMPORARY' STATUS ARE
     LISTED IN (DDNAME=RPTTEMP).  A COMPLETE LISTING OF THE UPDATED
     MASTER FILE IS ALSO PRODUCED (DDNAME=LISTOUT).

          THIS PROGRAM CONTAINS A CONSIDERABLE AMOUNT OF EDITING AND
     VALIDATION LOGIC.  EACH FIELD OF EACH RECORD OF THE MASTER FILE IS
     CHECKED AND INVALID DATA IS FORCED TO VALID.  NUMERIC FIELDS, FOR
     INSTANCE ARE CHECKED FOR SPACES.  ANY SPACES ARE REPLACED BY
     ZEROES.  THE FIELD IS THEN 'NUMERIC' CHECKED.  ANY INVALID DATA
     CAUSES THE FIELD TO BE RESET TO ZERO.  SWITCH FIELDS ARE CHECKED TO
     INSURE THAT THEY CONTAIN ONLY VALID VALUES AND ARE RESET TO A
     DEFAULT IF NECESSARY.

          A RECORD IS AUTOMATICALLY ADDED TO THE MASTER FILE FOR ANY
     HERETOFORE UNKNOWN FILE.  THE SWITCHES ARE SET TO 'YYT' AND THE
     ACCOUNTING FIELD LEFT BLANK.  THE LAST 'T' VALUE INDICATES THAT THE
     FILE IS TEMPORARY.  TO MAKE THE FILE PERMANENT THE 'T' MUST BE
     CHANGED, THE OTHER TWO SWITCHES PROPERLY SET, AND THE ACCOUNTING
     FIELD SET.  WE DO THIS WITH SPF EDIT.  A 'FIND' FOR 'YYT' IN THE
     RIGHT COLUMNS IS AN EFFICIENT WAY OF LOCATING THE RECORDS THAT NEED
     UPDATING.  THUS, OUR PROCEDURE FOR ADDING A FILE TO THE PRODUCTION
     DISK MANAGEMENT SYSTEM IS TO LET THE SYSTEM FIND IT AND ASSIGN IT A
     TEMPORARY STATUS.  WE THEN UPDATE THE MASTER FILE WITH ISPF TO MAKE
     IT PERMANEMT.  THIS RESULTS IN VERY LITTLE DATA ENTRY PER FILE.

          SOMETIMES FILES MUST BE CREATED TO WORK AROUND A PRODUCTION
     PROBLEM.  THESE FILES WILL BE PICKED UP BY THE SYSTEM.  WE JUST
     LEAVE THEM ALONE.  IF A TEMPORARY FILE DOES NOT SHOW UP IN A
     SUBSEQUENT DAY'S POSTING THE RECORD FOR THE TEMPORARY FILE IS
     AUTOMATICALLY DELETED.  IF A PERMANENT FILE DOES NOT SHOW UP IT IS
     LISTED ON THE ERROR REPORT.  IF WE HAVE DELETED THE FILE ON PURPOSE
     WE JUST CHANGE THE SWITCH BACK TO 'T' AND IT WILL BE DELETED ON THE
     NEXT POSTING.  OF COURSE, YOU CAN ALSO USE ISPF EDIT TO DELETE THE
     RECORD IF YOU WANT TO.

          BOTH DSNAME AND VOLSER ARE MONITORED.  IF A FILE'S VOLSER
     CHANGES THIS WILL BE NOTED ON THE ERROR REPORT AND THE MASTER
     RECORD UPDATED.  DUPLICATE DATA SET NAMES WILL RESULT IN SEVERAL
     MESSAGES.  THE DETAILS WILL DEPEND ON THE COLATING SEQUENCE OF THE
     VOLSERS INVOLVED.  SEE THE DESCRIPTION OF THE SYSTEM SWITCH IN THE
     CTLDM220 CONTROL CARD MEMBER AND MATERIAL BELOW FOR THE PROPER WAY
     OF DEALING WITH LEGITIMATE FILE NAME DUPLICATIONS.

          THERE IS SPECIAL LOGIC IN THIS PROGRAM TO HANDLE SEVERAL
     CONDITIONS.  FIRST, ALL FILES STARTING WITH 'DSCB.' ARE DISCARDED.
     SECOND, DISK GDGS ARE TREATED IN A SPECIAL MANNER.  OUR NAMING
     CONVENTIONS MEAN THAT THE DATA SET NAME WILL CONTAIN A '.G' IN ONE
     OF TWO LOCATIONS.  IF THIS CASE IS DETECTED THE .G----V-- IS
     REPLACED BY .GDG.  THE DSORG IS FORCED TO 'GO '.  ALL EXTENTS OF
     ALL GENERATIONS IS ADDED TOGETHER AND SPECIAL LOGIC APPLIES TO
     SEVERAL OTHER FIELDS.  SEE THE PROGRAM FOR DETAILS.  THIRD,
     'SYSCATLG' CVOL CATALOGS ARE CHANGED TO 'SYSCATLG.VXXXXXX' WHERE
     XXXXXX IS THE VOLSER.  THIS IS SIMILAR TO WHAT ICF CATALOGS DO AND
     MAKES THE DATA SET NAMES UNIQUE.  FOURTH, ISAM FILES ARE FOCED TO
     100% USED INSTEAD OF 0% USED, WHICH IS WHAT THE VTOC SHOWS.
     FINALLY, THIS IS THE PROGRAM THAT ADDS THE VOLSER AS THE LAST 6
     BYTES OF THE DATA SET NAME IF THE SYSTEM SWITCH IS SET.  USUALLY
     THIS RESULTS IN A DATA SET NAME THAT LOOKS LIKE THIS
     'WWW.XXX.YYY.ZZZ    VVV'.  THE BLANKS IN THE MIDDLE DO NOT STOP THE
     FIELD FROM BEING UNIQUE.  NOTE THAT IF YOUR DATA SET NAME IS MORE
     THAN 38 BYTES LONG PART OF IT WILL BE OVERLAYED.

          THIS PROGRAM DOES NOT USE A PARM.  PARAMETERS ARE SUPPLIED
     BY THE (DDNAME=VOLSERIN) FILE.  SEE CTLDM220 FOR MORE INFORMATION.
INDEXDM210PRP - PROD SYSTEM WEEKLY REPORTS
          THIS PROGRAM TAKES THE PRODUCTION MASTER FILE AS INPUT
     (DDNAME=MASTER) AND PRODUCES A SERIES OF REPORTS.  PARAMETER INPUT
     IS SPECIFIED IN (DDNAME=VOLSERIN) SPECIFYING THE CHARACTERISTICS OF
     VOLUMES.  AN OUTPUT FILE (DDNAME=OUTFIXC) IS GENERATED CONTAINING
     CONTROL CARDS FOR THE DM298PUP 'TRIM' PROGRAM.

           (DDNAME=RPTPERM) LISTS ALL 'PERMANENT' FILES.
     (DDNAME=RPTRGDG) LISTS ALL GDGS.  (DDNAME=RPTVSUM) GIVES VOLUME
     LEVEL SUMMARY STATISTICS.  (DDNAME=RPTXTNT) REPORTS ON ALL NON-VSAM
     FILES THAT ARE IN MORE THAN ONE EXTENT.  (DDNAME=RPTVTNT) PROVIDES
     A SIMILAR REPORT FOR VSAM FILES.  (DDNAME=RPTOVER) LISTS ALL OVER
     ALLOCATED FILES.  AN OVER ALLOCATED FILE IS ONE THAT THE HIGH WATER
     USED IS LESS THAN 90% OF THE CURRENT ALLOCATION.  AN UNDER
     ALLOCATED FILE WILL BE IN MULTIPLE EXTENTS.

          (DDNAME=RPTMPTY) LISTS ALL EMPTY FILES.  (DDNAME=RPTEOLD)
     LISTS ALL EXPIRED FILES.  ONE OF THE SWITCHES INDICATEDS REFERENCE
     FREQUENCY (E.G. DAILY, MONTHLY, ETC.).  EACH REFERENCE FREQUENCY
     HAS A NUMBER OF DAYS ASSOCIATED WITH IT.  FOR INSTANCE, THE NUMBER
     OF DAYS ASSOCIATED WITH A DAILY REFERENCE FREQUENCY IS 10.  IF THE
     FILE HAS NOT BEEN REFERENCED IN 10 DAYS IT IS EXPIRED.
     (DDNME=RPTVDET) LISTS ALL OF THE DATA SETS ON EACH VOLUME.
     (DDNAME=RPTSUMY) PUTS OUT ONE PAGE OF SUMMARY STATISTICS.

          THIS PROGRAM DOES NOT USE PARM OPTIONS.
INDEXDM230PRP - PROD SYSTEM MONTHLY BILLING RPT
          THIS PROGRAM PRODUCES BILLING DATA ON A MONTHLY BASIS FOR OUR
     FINANCE PEOPLE.  IT TAKES AS INPUT THE MASTER FILE (DDNAME=MASTER)
     AND A HISTORY FILE (DDNAME=HISTORY).  IT PRODUCES AN UPDATED
     HISTORY FILE (THE HISTORY FILE IS COPIED TO A TEMPORARY FILE
     (DDNAME=WORKHIST) BEFORE UPDATING BEGINS).  SEVERAL REPORTS
     ARE PRODUCED.

          (DDNAME=RPTDET) CONTAINS DETAIL SORTED BY AAM WITHIN
     GROUP.  OLD FILE SIZE, NEW FILE SIZE, AND NET CHANGE ARE
     SHOWN.  (DDNAME=RPTSUM) ROLLS THE DETAIL UP INTO LEDGER BREAKS.
     (DDNAME=RPTBILL) SHOWS GROUP TOTALS ORGANIZED TO BE
     CONVENIENT FOR OUR FINANCE PEOPLE.  (DDNAME=BILLOUT) CONTAINS
     THE SAME FIGURES AS RPTBILL BUT ORGANIZED FOR CONVENIENT
     PROCESSING BY ANOTHER COMPUTER PROGRAM.

          THIS PROGRAM DOES NOT USE THE PARM FIELD.  CONTROL INFORMATION
     IS SUPPLIED BY TWO FILES (DDNAME=AAMIN) AND (DDNAME=GRPIN).  SEE
     THE DOCUMENTATION ON THE CTLMEAAM AND CTLMEGRP MEMBERS FOR
     ADDITIONAL INFORMATION.
INDEXDM298PUP - 'TRIM' RESIZES FILES
          THIS PROGRAM RESIZES FILES ACCORDING TO CONTROL CARD
     PARAMETERS.  ONE CONTROL CARD IS SUPPLIED FOR EACH FILE TO
     BE PROCESSED.  THE GENERAL APPROACH IS TO COPY THE DATA IN
     THE FILE TO A WORK FILE (DDNAME=WORK), DELETE THE OLD FILE,
     ALLOCATE THE FILE WITH NEW FILE CHARACTERISTICS (PRIMARILY
     SIZE), AND COPY THE DATA BACK.  EXTENSIVE RESTART/RERUN
     FACILITIES ARE PROVIDED.

          CONTROL CARDS ARE PROVIDED IN THE INPUT FILE (DDNAME=SYSIN).
     EACH STAGE OF THE PROCESS IS REPORTED IN THE REPORT FILE
     (DDNAME=SYSPRINT).  THE COMMAND BYTE IN THE INPUT RECORD IS UPDATED
     AS PROCESSING PROGRESSES SO THE INPUT FILE MUST BE A DISK FILE.
     THIS PROGRAM IS ONLY CAPABLE OF PROCESSING SEQUENTIAL FILES.  IF
     THE PROGRAM IS UNABLE TO PROCESS THE FILE THE COMMAND BYTE IS
     CHANGED TO AN 'E' FOR ERROR.  A PARAMETER FILE (DDNAME=VOLSERIN) IS
     USED TO SELECT THE CORRECT NUMBER OF TRACKS PER CYLINDER.

          EXTENSIVE USE OF DYNAMIC ALLOCATE IS USED.  THE FOLLOWING
     IS THE COMPLETE 10 STAGE PROCESSING FOR NORMAL PROCESSING.  THE
     'F' COLUMN INDICATES THE VALUE OF THE COMMAND BYTE IN THE CONTROL
     CARD.

     STEP  CMD F PROCESSING
       1)  --- - SCAN CONTROL CARD.
       2)  MOV M DYNA A DD=FILEDD OF THE CURRENT VERSION OF DATASET.
       3)  PH1 1 COPY TO WORK.
       4)  PH2 2 DYND - THIS WILL KEEP THE CURRENT VERSION.
       5)  PH3 3 DYNA A DD=FILEDD WITH A DISP=(,DELETE).
       6)  PH3 3 DYND - THIS WILL DELETE THE CURRENT VERSION.
       7)  PH4 4 DYNA A DD=FILEDD WITH DISP=(,CATLG),SPACE=ETC.
                 THIS WILL ALLOCATE THE NEW VERSION OF THE FILE.
       8)  PH5 5 COPY WORK BACK TO THE NEW VERSION.
       9)  PH5 5 DYND - THIS WILL CATALOG THE NEW VERSION
                 THE DATA IS NOW IN THE NEW VERSION OF THE FILE.
      10)  --- - LOOP BACK TO STEP 1 ON NEXT CONTROL CARD.

     ALL CONTROL CARDS SHOULD START WITH THE COMMAND FIELD SET TO
     'M'.  WHEN THE PROCESS IS DONE THE COMMAND BYTE IS CLEARED TO
     A SPACE.  THIS UPDATING OF THE COMMAND BYTE MAKES RESTART/RERUN
     POSSIBLE.

          THE FIRST TIME THIS PROGRAM IS RUN AGAINST A SET OF CONTROL
     CARDS THE COMMAND BYTE WILL BE 'M' FOR ALL THE FILES.  THE PROGRAM
     WILL ATTEMPT TO PROCESS EACH FILE.  IF THE FILE IS BUSY (DYNALLOC
     DISP=OLD FAILS) THE CARD WILL BE LEFT ALONE AND THE PROGRAM WILL
     SKIP ON TO THE NEXT.  IF THE FILE CANNOT BE PROCESSED, SAY
     BECAUSE IT IS A VSAM FILE, THE COMMAND BYTE WILL BE SET TO 'E'.
     THOSE FILES THAT PROCESS NORMALLY WILL HAVE THEIR COMMAND BYTES SET
     TO SPACE.  THIS CONTROL CARD FILE CAN NOW BE REPROCESSED.  ALL
     CARDS WITH A COMMAND BYTE OF SPACE OR 'E' WILL BE SKIPPED.  THOSE
     STILL HAVING AN 'M' WILL BE RETRIED.  THIS RERUN PROCESS CAN
     BE CONTINUED UNTIL ALL FILES THAT CAN PROCESS ARE PROCESSED.  OTHER
     POSSIBILITIES OCCUR WHEN AN ABEND OCCURS.

          IF THE SYSTEM CRASHES, THE PROGRAM IS CANCELLED, OR AN
     UNRECOVERABLE ERROR OCCURS THE PROGRAM WILL BE AT SOME INTERMEDIATE
     STAGE.  THIS IS INDICATED BY THE COMMAND BYTE BEING A 1 - 5.  WHEN
     THIS HAPPENS THE PROGRAM AUTOMATICALLY PICKS UP WHERE IT LEFT OFF.
     THE FOLLOWING TABLE COVERS ALL THE POSSIBILITIES:

           CMD F DESCRIPTION                    RESTART ACTION

           MOV M PROCESS NORMALLY             - PROCESS AS NON-RESTART
           OK    MOVED OK                     - SKIP TO NEXT CARD
           ERR E FATAL ERROR OCCURED          - SKIP TO NEXT CARD
           PH1 1 RESET CMD TO MOV             - START OVER FROM MOV
           PH2 2 ASSUME FILE IS OUT THERE     - SKIP TO PH3
           PH3 3 ASSUME FILE IS OUT THERE     - PROCESS FROM HERE
           PH4 4 ASSUME FILE IS NOT OUT THERE - PROCESS FROM HERE
           PH5 5 ASSUME FILE IS OUT THERE     - DYNA DISP=OLD THEN
            "  " CONTINUED                    - PROCESS FROM HERE

     THE PROCESS IS COMPLETELY AUTOMATIC EXCEPT FOR PHASES 3 AND 4.  THE
     FILE MAY OR MAY NOT EXIST.  IF IT EXISTS IT MAY BE UNDER THE OLD
     ALLOCATION.  IN ANY CASE IT HAS BEEN SUCCESSFULLY COPIED TO THE
     'WORK' FILE.  CHECK TO SEE IF THE FILE EXISTS.  IF IT DOES DELETE
     IT.  THEN SET THE COMMNAD BYTE TO 4 AND RESTART THE PROGRAM.

          THERE ARE TWO SPECIAL CONCERNS WITH AUTOMATIC RESTART/RERUN
     IF THE PROGRAM FAILS TO COMPLETE.  FIRST, MAKE SURE THAT THE 'WORK'
     FILE IS A PERMANENT FILE.  IT MAY CONTAIN THE ONLY COPY OF
     THE DATA IN THE FILE YOU ARE RESIZING.  IT ALSO NEEDS TO BE BIG
     ENOUGH TO HANDLE THE LARGEST FILE THAT WILL BE RESIZED.  SECOND,
     THERE IS ONE OBSCURE WAY THINGS CAN GO WRONG WITH RESTART/RERUN.
     IF A CONTROL CARD THAT IS EARLY IN THE FILE DOES NOT PROCESS AT
     ALL BECAUSE THE FILE IS BUSY AND THE PROGRAM LATER ABENDS THEN
     THE DATA IN 'WORK' MAY BE OVERLAYED BY THE DATA FROM THE EARLIER
     FILE.

          ON RESTART AN ATTEMPT WILL BE MADE TO RETRY THE EARLIER FILE
     THAT WAS BUSY.  IF THE FILE IS NO LONGER BUSY THEN EVERYTHING
     WILL WORK AND THE 'WORK' FILE WILL CONTAIN DATA FROM THIS FILE.
     LATER WHEN THE CONTROL CARD FOR THE FILE THAT WAS BEING PROCESSED
     IS RETRIED THE RETRY MAY ASSUME THAT 'WORK' CONTAINS THE DATA
     FROM THE FIRST TRY.  BUT IT WON'T.  TWO APPROACHES ARE POSSIBLE.
     THE FIRST ONE IS TO DELETE ALL CONTROL CARDS THAT CAME BEFORE
     THE ONE THAT WAS BEING PROCESSED WHEN THE ABEND OCCURED.  THIS
     WILL GUARANTEE THAT THE RETRY CARD WILL BE FIRST.  IT ALSO MEANS
     THAT BUSY FILES WILL NOT BE RETRIED.  A SECOND APPROACH IS TO
     MOVE THE CARDS TO THE END.  THEY WILL BE PROCESSED AFTER THE ONE
     WITH THE RESTART SO EVERYTHING WILL WORK FINE.

          THE PARM FIELD IS NOT USED BUT THE 'QEDIT' MVS OPERATOR
     INTERFACE IS AVAILABLE.  THE MVS CONSOLE OPERATOR MAY ISSUE
     'MODIFY' OR 'STOP' COMMANDS.  THE FOLLOWING COMMANDS ARE
     SUPPORTED:

          P JOBNAME   - STOP THE JOB AT THE END OF THE CURRENT PHASE
          F JOBNAME,D - DISPLAY COMMAND BYTE AND DSN OF CURRENT PHASE
          F JOBNAME,P - STOP AT THE END OF THE CURRENT CONTROL CARD
INDEXDM999DSU - PREPROCESSOR FOR ADRDSSU
          THIS PROGRAM PERMITS IDENTIFYING FILES TO BE DUMPED OR
     RESTORED BY ADRDSSU (DF/DSS) TO BE IDENTIFIED VIA JCL.  THIS
     PERMITS SETTING UP DUMP/RESTORE JOBS THAT DO NOT HAVE TO BE
     MODIFIED WHEN THE LOCATION OF A FILE CHANGES.

          THE PROGRAM SCANS THE DD STATEMENTS OF THE EXECUTION JCL AND
     BUILDS A SET OF ADRDSSU CONTROL CARDS IN A WORK FILE
     (DDNAME=SYSIN).  IT THEN EXECUTES ADRDSSU AND CHECKS ITS RETURN
     CODE.  A NON-ZERO RETURN CODE FROM ADRDSSU CAUSES THE PROGRAM TO
     ABEND.  ADRDSSU EXPECTS A REPORT FILE (DDNAME=SYSPRINT) SO THIS
     MUST BE SPECIFIED.  THE ADRDSSU PARAMETER CARDS SPECIFY EITHER A
     DUMP TO OR A RESTORE FROM (DDNAME=TAPE1).

          THE DDNAME, DSNAME, AND VOL=SER ARE EXTRACTED FROM THE
     EXECUTION JCL VIA THE TIOT AND THE RDJFCB MACRO.  DD NAMES ARE
     CHECKED TO SEE IF THEY BEGIN WITH EITHER 'DMP' OR 'RST'.  PRESENCE
     OF 'DMP' DDS INDICATES THAT A DUMP IS REQUESTED.  PRESENCE OF 'RST'
     DDS INDICATES THAT A RESTORE IS REQUESTED.  DUMP AND RESTORE CANNOT
     BE MIXED IN THE SAME EXECUTION.  ONLY ONE DATA SET ON ONE VOLUME
     MAY BE SPECIFIED PER DD.  AS MANY DDS AS NECESSARY MAY BE SPECIFIED
     SPANNING UP TO 256 VOLUMES.  FOR DUMPS A SINGLE DATA SET NAME LIST
     AND A SINGLE VOLUME LIST ARE CREATED.  FOR RESTORES A SEPARATE
     CONTROL CARD SET IS BUILT FOR EACH FILE TO INSURE THAT THE FILE IS
     RESORED TO THE CORRECT VOLUME.

          THE PARM FIELD IS PASSED THRU TO ADRDSSU INTACT.  THIS PERMITS
     RUNNING THE PROGRAM IN TEST MODE BY SPECIFYING 'TYPRUN=SCAN'.
INDEXVVDSLIST - PRINT VVDS
          THIS PROGRAM PROVIDES A FORMATTED LISTING OF ALL FIELDS OF
     ALL RECORDS OF A DFP/VSAM VVDS.  MULTIPLE VVDS FILES MAY BE
     PROCESSED.  THE EXECUTION JCL IS SCANNED FOR ANY DD STARTING WITH
     VVDS.  THIS FILE IS OPENED AS A VVDS AND A REPORT PRINTED.  THE
     REPORT IS PRODUCED ON (DDNAME=SYSPRINT).

          SPECIAL JCL PARAMETERS ARE RECOMMENDED.  THE REQUREMENTS
     ARE THE SAME AS THE DM140PUP PROGRAM.  SEE THE DESCRIPTION OF
     THIS PROGRAM ABOVE FOR MORE COMPLETE INFORMATION.

          THIS PROGRAM DOES NOT USE ANY SPECIAL CONTROL CARDS OR
     PARM VALUES.
SECT SUBROUTINE DOCUMENATATION
INDEXDATCNVRT - DATE CONVERSION ROUTINE
SPAC2CONVERTS A DATE FROM ONE OF THREE FORMATS INTO THE OTHER TWO.  ALSO
     COMPUTES THE DAY OF THE WEEK.
SPAC2ALL PARAMETERS ARE FULL WORD INTEGERS ALIGNED ON A WORD BOUNDARY
     (E.G. PIC S9(8) COMP SYNC IN COBOL). THE NAME AND DESCRIPTION OF
     ALL 6 PARAMETERS ARE LISTED BELOW:
IND-BD-C-YEAR     YEAR
IND-BD-C-MONTH    MONTH (01=JANUARY - 12=DECEMBER)
IND-BD-C-DOM      DAY OF MONTH
IND-BD-C-DOY      DAY OF YEAR (RELATIVE JULIAN)
IND-BD-C-DOW      DAY OF WEEK (01=SUNDAY - 07=SATURDAY)
IND-BD-C-JDAY     ABSOLUTE JULIAN DAY (NUMBER OF DAYS SINCE A
IND-B                 PARTICULAR DAY ABOUT 4000 BC)
SPAC2ALL ARGUMENTS MUST BE POSITIVE OR ZERO. SEE OTHER RESTRICTIONS IN
     THE DESCRIPTION SEGMENT BELOW.
SPAC2THE CALLING PROGRAM SUPPLIES DATCNVRT WITH THE DATE IN ONE OF THE
     FOLLOWING THREE FORMS:
IND-AANNUAL JULIAN   - INPUT D-C-YEAR D-C-DOY
IND-AGREGORIAN       - INPUT D-C-MONTH D-C-DOM D-C-YEAR
IND-AABSOLUTE JULIAN - INPUT D-C-JDAY
SPAC1ALL OTHER PARAMETERS MUST BE SET TO ZERO. DATCNVRT WILL THEN
     COMPUTE THE CORRECT VALUES FOR THE ZEROED OUT PARAMETERS.  THE
     YEAR MAY BE SET TO THE FULL YEAR (1975) OR THE SHORT-FORM YEAR
     (75) BY THE CALLING PROGRAM. DATCNVRT WILL ADD 1900 INTERNALLY IF
     THE SHORT FORM IS USED. IF DATCNVRT IS TO COMPUTE THE YEAR IT WILL
     COMPUTE THE LONG FORM. IN ANY CASE ALL NONZERO VALUES WILL BE LEFT
     UNCHANGED UPON EXIT FROM DATCNVRT.
SPAC1        WORKING-STORAGE.
             77  D-C-YEAR     PIC S9(8) COMP SYNC.
             77  D-C-MONTH    PIC S9(8) COMP SYNC.
             77  D-C-DOM      PIC S9(8) COMP SYNC.
             77  D-C-DOY      PIC S9(8) COMP SYNC.
             77  D-C-DOW      PIC S9(8) COMP SYNC.
             77  D-C-JDAY     PIC S9(8) COMP SYNC.
SPAC1             E T C .
SPAC3        PROCEDURE DIVISION.
SPAC1                 (INITIALIZE VARIABLES)
SPAC1            CALL 'DATCNVRT' USING D-C-YEAR D-C-MONTH
                     D-C-DOM D-C-DOY D-C-DOW D-C-JDAY.
SPAC1                 (USE RESULTS)
SPAC2THE FOLLOWING TABLE GIVES TYPICAL INPUT VALUES AND THE RESULT:
SPAC1       YEAR MONTH DOM  DOY  DOW JULIAN DAY (ABS)
SPAC1INPUT    75   5    19    0   0            0
     RESULT   75   5    19  139   2      2442698
SPAC1INPUT  1975   0     0  139   0            0
     RESULT 1975   5    19  139   2      2442698
SPAC1INPUT     0   0     0    0   0      2442698
     RESULT 1975   5    19  139   2      2442698
SPAC1INPUT     0   0     0    0   0            0
     RESULT        *****    ERROR    *****
SPAC1INPUT    75   5    19  139   0            0
     RESULT        *****    ERROR    *****
INDEXGETCTRL - LOCATE AND LOAD CONTROL RECORD
SPAC2READ APPLICATION CONTROL FILE AND LOAD CONTROL RECORD WITH MATCHING
     PROGRAM IDENTIFICATION.
SPAC21. NAME OF AN 80 BYTE WORK AREA. SHOULD BE INCLUDED FROM
        'CTRL001'.
SPAC2THE CONTROL FILE RECORDS MUST BE 80 CHARACTERS LONG.
     'CTRL' MUST BE IN POSITIONS 1-4 OF THE CONTROL RECORDS.
     PROGRAM NAME MUST BE IN POSITIONS 6-13, LEFT-JUSTIFIED.
     THE CONTROL FILE MUST BE CLOSED WHEN 'GETCTRL' IS CALLED.
SPAC2'GETCTRL' OPENS THE FILE AND READS TO EOF. ANY CONTROL RECORDS WITH
     IDENTIFICATION WHICH MATCHES THE CALLING PROGRAM IS MOVED TO THE 80
     CHARACTER AREA IN WORKING STORAGE. THE LAST MATCHING RECORD READ
     WILL BE RETURNED TO THE CALLING PROGRAM, IF MORE THAN ONE IS IN THE
     FILE. IF NO MATCHING CONTROL RECORD IS FOUND, GETCTRL WILL ABEND
     WITH A USER CODE OF 1004.
SPAC1'GETCTRL' ALSO CONTAINS AN EDITING CAPABILITY WHICH MAY BE
     ACTIVATED BY MOVING THE CONSTANT 'EDIT' TO THE FIRST FOUR BYTES IN
     PARAMETER 1. WHEN EDITING IS INDICATED:
SPAC1A. THE DATE FIELD IS CHECKED FOR TWO NUMERICS, SLASH, TWO NUMERICS,
        ANOTHER SLASH, AND TWO NUMERICS.
SPAC1B. IF THE DATE FIELD CONTAINS 'MM/DD/YY', THE CURRENT SYSTEM DATE
        IS SUBSTITUTED.
SPAC1THE CALLING PROGRAM IS TR195DRP.
SPAC1  WORKING-STORAGE SECTION.
      * -INC CTRL001,BRFB   (NEXT PAGE)
      ********************************************************  000001
      * CTRL001                                                 000002
      *                                                         000002
       01  CTRL-CARD.                                           000003
           02  CTRL-TYPE           PIC XXXX.                    000005
           02  FILLER              PIC X.                       000006
           02  CTRL-PID            PIC X(8).                    000007
           02  FILLER              PIC X.                       000008
           02  CTRL-BANK           PIC XXX.                     000009
           02  FILLER              PIC X.                       000010
           02  CTRL-DATE           PIC X(8).                    000011
           02  FILLER              PIC X.                       000012
           02  CTRL-SWITCHES.                                   000013
               03  SW-1            PIC X.                       000014
               03  SW-2            PIC X.                       000015
               03  SW-3            PIC X.                       000016
               03  SW-4            PIC X.                       000017
               03  SW-5            PIC X.                       000018
               03  SW-6            PIC X.                       000019
               03  SW-7            PIC X.                       000020
               03  SW-8            PIC X.                       000021
               03  SW-9            PIC X.                       000022
               03  SW-10           PIC X.                       000023
           02  CTRL-USER-AREA      PIC X(34).                   000024
           02  FILLER              PIC X.                       000025
           02  FILLER              PIC X(8).                    000026
      ********************************************************  000027
SPAC1  PROCEDURE DIVISION.
           MOVE 'TR195DRP' TO CTRL-PID.
           MOVE 'EDIT' TO CTRL-TYPE. NOTE - THIS IS OPTIONAL.
           CALL 'GETCTRL' USING CTRL-CARD.
SPAC1JCL:
SPAC1//CTRLCTRL  DD   *
     CTRL TR195DRP PNB 11/06/74 1010000000   COMMENTS HERE
     /*
SPAC1OR:
SPAC1//CTRLCTRL  DD   DSN=PBDS.TR.NEW.CTL,DISP=SHR
INDEXHSMXEQ - ISSUE HSM SVC TO PROCESS A COMMAND
          HSMXEQ PASSES A COMMAND TO HSM TO PROCESS BY ISSUING THE
     PROPER SVC.  SINCE THIS IS NOT A STANDARD DOCUMENTED INTERFACE
     CONSULT THE COMMENTS IN THE CODE FOR HOW TO CALL THIS ROUTINE.
     ALTHOUGH THIS INTERFACE IS NOT A 'STANDARD SUPPORTED' INTERFACE
     IT IS USED BY SEVERAL IBM SOFTWARE PRODUCTS SUCH AS TSO.
     THEREFORE, THE CHANCE OF MAJOR CHANGES TO THIS INTERFACE ARE
     SMALL.
INDEXJGDATE - CONVERTS JULIAN TO CALENDAR DATE
SPAC2CONVERTS A JULIAN DATE TO GREGORIAN DATE.
SPAC21. NAME OF A 4 BYTE YEAR (PIC S9(8) COMP).
     2. NAME OF A 4 BYTE DAY OF YEAR (PIC S9(8) COMP).
     3. NAME OF A 4 BYTE MONTH (PIC S9(8) COMP).
     4. NAME OF A 4 BYTE DAY OF MONTH (PIC S9(8) COMP).
SPAC2JGDATE REQUIRES A VALID DATE WHICH MUST BE NUMERIC. A SIMPLE DIVIDE
     BY 4 TEST IS USED TO DETECT LEAP YEAR. DAY OF YEAR MUST BE 1-365
     (1-366 FOR LEAP YEAR) BUT NO CHECK IS MADE.
SPAC2JGDATE CONVERTS THE JULIAN DATE GIVEN TO A GREGORIAN DATE. THE
     MONTH NUMBER IS FILLED IN (1 = JAN, 2 = FEB, ETC.) AND THE DAY OF
     MONTH FIELD IS FILLED IN. ALL NUMBERS ARE FULLWORD INTEGERS (PIC
     S9(8) COMP). NO ERROR MESSAGES ARE GENERATED.  THE SUBROUTINE IS
     RE-ENTRANT AND IS WRITTEN IN ASSEMBLY.
SPAC2       77  J-YEAR                  PIC S9(8) COMP.
            77  J-DAY                   PIC S9(8) COMP.
            77  G-MONTH                 PIC S9(8) COMP.
            77  G-DAY                   PIC S9(8) COMP.
SPAC1           MOVE +75 TO J-YEAR.
                MOVE +32 TO J-DAY
                CALL 'JGDATE' USING J-YEAR
                                    J-DAY
                                    G-MONTH
                                    G-DAY.
SPAC1G-MONTH WILL CONTAIN +2. G-DAY WILL CONTAIN +1.  J-YEAR AND
     J-DAY WILL REMAIN UNCHANGED.
INDEXUSERDUMP - ABENDS WITH USER RETURN CODE.
SPAC2SETS A USER RETURN CODE AND ABENDS WITH AN OPTIONAL DUMP.
SPAC21. NAME OF A PIC S9(4) COMP SYNC RETURN CODE FIELD.
SPAC2THIS ONE CANT FAIL TO ABEND. MISSING OR INVALID PARAMETER WILL
     CAUSE DUMP AND RETURN CODE TO BE UNPREDICTABLE.
SPAC2AN ABEND IS ISSUED SETTING THE RETURN CODE TO THE POSITIVE OR
     ABSOLUTE VALUE OF PARAMETER 1. IF PARAMETER 1 IS POSITIVE A DUMP
     WILL BE TAKEN, OTHERWISE IT WIL NOT.
SPAC2//SYSUDUMP   DD SYSOUT=A
SPAC1       77  ABEND-CODE              PIC S9(4) COMP SYNC VALUE +0.
SPAC1           MOVE -1234 TO ABEND-CODE.
            CALL 'USERDUMP' USING ABEND-CODE.
SPAC1THE ABOVE CODE TERMINATES THE PROGRAM WITH AN ABEND. NO DUMP IS
     TAKEN (BECAUSE ABEND-CODE IS NEGATIVE) AND A USER RETURN CODE OF
     1234 IS ISSUED.
SPAC1BE AWARE THAT THERE IS A DIFFERENCE BETWEEN USING THE COBOL SPECIAL
     REGISTER 'SORT-RETURN' AND USING 'USERDUMP'. THE FORMER SETS A
     RETURN CODE THAT YOU MAY TEST IN YOUR JCL; THE LATTER CAUSES
     FOLLOWING JOB STEPS TO BE BYPASSED UNLESS COND=(EVEN) IS CODED IN
     THOSE JOBSTEPS. ALSO 'USERDUMP' PROVIDES AN OPTIONAL DUMP.
SECT FILE DOCUMENTATION
          ALL FILES CONTAIN ONLY CHARACTER DATA.  SOME OF THE FILES
     CONTAIN SPACES BETWEEN THE FIELDS.  OTHERS DO NOT.  THIS WAS DONE
     SO THAT ALL FILES COULD BE BROUSED OR MODIFIED WITH TSO/ISPF.
     NUMERIC FIELDS WILL ALWAYS CONTAIN AT LEAST ONE NON-BLANK DIGIT,
     ALTHOUGH MOST CONTAIN LEADING SPACES FOR READABILITY.

          ALL FILES ARE LISTED IN THIS SECTION.  THEY ARE LISTED
     ACCORDING TO THE DATA SET NAME USED IN THE SAMPLE JCL.  IN
     SOME CASES THE FORMAT OF TWO FILES IS IDENTICAL.  IN THESE
     CASES ONLY THE FIRST FILE WILL HAVE DETAILED DOCUMENTATION.
     SUBSEQUENT FILES WILL REFER BACK TO THE FIRST.
INDEXPBDS.DM200RRP.BIL.FIL
     RECFM=FB  LRECL=80

     NAME      PIC       DESCRIPTION
     INDIC     X         INDICATOR
     NUM       99        GROUP NUMBER
     TOT1      ZZZZZZZ9  SUB GROUP 1 TOTAL
     TOT2      ZZZZZZZ9  SUB GROUP 2 TOTAL
     TOT3      ZZZZZZZ9  SUB GROUP 3 TOTAL
     TOT4      ZZZZZZZ9  SUB GROUP 4 TOTAL
     TOT5      ZZZZZZZ9  SUB GROUP 5 TOTAL
     TOT6      ZZZZZZZ9  SUB GROUP 6 TOTAL
     TOT7      ZZZZZZZ9  SUB GROUP 7 TOTAL
     TOT8      ZZZZZZZ9  SUB GROUP 8 TOTAL
               X(13)     FILLER

          THE MEANING OF THE TOT FILEDS IS INDICATED BY THE INDIC
     FIELD.  POSSIBLE INDIC VALUES ARE:

     1 - DATE CARD                              DM230MUM, DM380MUM
     2 - CPU CRUS (SIMILAR TO CPU SECONDS)      (NOT USED)
     3 - PRINT LINES                            (NOT USED)
     4 - DASD EXCPS                             (NOT USED)
     5 - TAPE EXCPS                             (NOT USED)
     6 - DASD TRACKS                            DM230MRM
     7 - FICHE LINES                            (NOT USED)
     8 - PRINT PAGES                            (NOT USED)
     9 - DASD TRACKS                            DM380MUM
     A - DASD TRACKS BY DEPT                    DM380MUM
     B - TAPE REELS                             (NOT USED)

     'NOT USED' INDICATES THAT THESE INDIC VALUES ARE NOT GENERATED
     BY ANY OF THE PROGRAMS INCLUDED HERE.  FOR INDIC = 1 THE
     FOLLOWING VALUES ARE SET:

     INDIC    - '1'
     NUM      - '00'
     TOT1     - FILE DATE - MONTH (01-12)
     TOT2     - FILE DATE - DAY   (01-31)
     TOT3     - FILE DATE - YEAR  (00-99)

     FOR INDIC = '6' AND INDIC = '9'NUM CONTAINS THE FIRST TWO
     DIGITS OF THE GROUP CODE.  TOTALS FOR EACH SUBGROUP ARE INDICATED
     IN THE APPROPRIATE 'TOT' BUCKET.  FOR INDIC = 'A' NUM WILL CONTAIN
     '00', TOT1 WILL CONTAIN THE DEPARTMENT NUMBER, AND TOT2 WILL
     CONTAIN THE DEPARTMENT TOTAL.
INDEXPBDS.DM200RRP.FIX.CRD
     RECFM = FB  LRECL = 80

     NAME      PIC       DESCRIPTION

     CMD       X         COMMAND - MUST BE 'M'
     DSNAME    X(44)     DATA SET NAME
     VOLSER    X(6)      VOLUME SERIAL
     ALLOC     9(5)      PRIMARY ALLOCATION IN TRACKS
     DSORG     X(3)      DATA SET ORGANIZATION
     RECFM     X(3)      RECORD FORMAT
     LRECL     9(5)      LOGICAL RECORD LENGTH
     BLKSI     9(5)      BLOCK SIZE
               X(8)      FILLER

          PRIMARY ALLOCATION WILL BE CHANGED TO CYLINDERS IF THE
     FILE WILL BE 10 CYLINDERS OR MORE ON THE NEW VOLUME.  SECONDARY
     ALLOCATION WILL BE SET TO 10% OF PRIMARY WITH ROUNDING UP.  ALL
     VALUES ARE FORM THE PRODUCTION DISK MANAGEMENT MASTER EXCEPT
     PRIMARY ALLOCATION.  THIS IS 110% OF HIGH USED.  A DATA SET
     MAY BE MOVED TO A NEW VOLUME SIMPLY BY CHANGING THE VOLSER
     FIELD.  IF THE DEVICE TYPE CHANGES THE PRIMARY ALLOCATION MAY
     HAVE TO CHANGE.

INDEXPBDS.DM200RRP.HST.FIL
     RECFM = FB  LRECL = 55

     NAME      PIC       DESCRIPTION (HEADER REC)

     LIT       X(11)     CONSTANT 'DM-HST-HEAD'
     DATE      X(8)      FILE DATE IN MM/DD/YY FORMAT
               X(36)     FILLER

     NAME      PIC       DESCRIPTION DETAIL REC)

     GRP       999       THREE DIGIT GROUP CODE
     AAM       XXX       THREE LETTER AAM ACCOUNTING CODE
     DSNAME    X(44)     DATA SET NAME
     ALLOC     9(5)      CURRENT ALLOCATION

          THERE IS 1 HEADER RECORD AT THE BEGINNING OF THE FILE.
     THERE IS ONE DETAIL RECORD FOR EVERY PRODUCTION FILE.  THE
     DETAIL RECORDS ARE IN ASCENDING ORDER BY GRP AAM AND DSNAME.
INDEXPBDS.DM200RRP.MST.FIL
     RECFM = FB  LRECL = 150

     NAME      PIC       DESCRIPTION (HEADER REC)

     AAM       X(3)      THREE LETTER AAM ACCOUNTING CODE
               X         FILLER
     SW-1      X         CHANGE EXTENT INDICATOR
                         Y - YES -     OK TO CHANGE EXTENT
                         N - NO  - NOT OK TO CHANGE EXTENT
     SW-2      X         CHANGE BLOCKSIZE INDICATOR
                         Y - YES -     OK TO CHANGE BLOCKSIZE
                         N - NO  - NOT OK TO CHANGE BLOCKSIZE
                         C - *** - FILE IS CONCATINATED
     SW-3      X         REFERENCE FREQUENCY INDICATOR
                         I - IGNORE (PERMANENT FILE)
                         T - TEMPORARY FILE
                         D - DAILY     - EXPIRES AFTER  10 DAYS
                         M - MONTHLY   - EXPIRES AFTER  70 DAYS
                         Q - QUARTERLY - EXPIRES AFTER 193 DAYS
                         A - ANNUALLY  - EXPIRES AFTER 376 DAYS
               X         FILLER
     DSNAME    X(44)     DATA SET NAME
               X(2)      FILLER
     ALLOC     9(5)      TRACKS CURRENTLY ALLOCATED
               X(2)      FILLER
     USED-CUR  9(5)      TRACKS CURRENTLY USED
               X         FILLER
     DSORG     X(3)      DATA SET ORGANIZATION
               X         FILLER
     RECFM     X(3)      RECORD FORMAT
               X         FILLER
     BLKSIZE   9(5)      BLOCK SIZE
               X         FILLER
     LRECL     9(5)      LOGICAL RECORD LENGTH
               X         FILLER
     VOLSER    X(6)      CURRENT VOLUME SERIAL
               X         FILLER
     USED-HI   9(5)      HIGH WATER TRACKS USED
               X         FILLER
     DT-CREATE 9(5)      FILE CREATION DATE
               X         FILLER
     DT-REF    9(5)      DATE LAST REFERENCED
               X         FILLER
     EXTENT-CT 9(2)      EXTENT COUNT
               X         FILLER
     USED-LO   9(5)      LOW WATER TRACKS USED
               X(30)     FILLER

          A RECORD IS BUILT FOR EVERY NEW PRODUCTION FILE.  SEE THE
     DOCUMENTATION ON THE DM200PUP PROGRAM FOR THE RULES FOR RECORD
     DELETION.  THE FILE IS MAINTAINED IN ASCENDING ORDER ON THE
     DSNAME FIELD.
INDEXPBDS.DM203DDM.VVDS.FIL
     RECFM = FB  LRECL = 81

     NAME      PIC       DESCRIPTION

     DSN       X(44)     DATA SET NAME
     ALOC      9(9)      TRACKS CURRENTLY ALLOCATED
     USED      9(9)      TRACKS CURRENTLY USED
     CISZ      9(5)      CONTROL INTERVAL SIZE
     XTNT      9(3)      NUMBER OF EXTENTS
     RECL      9(5)      MAXIMUM RECORD LENGTH
     VOL       X(6)      VOLUME SERIAL

          ONE RECORD IS BUILT FOR EACH 'Z' RECORD FOUND IN A VVDS.
     THIS FILE SHOULD BE SORTED BEFORE USE.
INDEXPBDS.DM203DDM.VVDS.SRT
          SEE PBDS.DM203DDM.VVDS.FIL
INDEXPBDS.DM206DDM.VTC.FIL
     RECFM = FB  LRECL = 89

     NAME      PIC       DESCRIPTION

     DSNAME    X(44)     DATA SET NAME
     VOLSER    X(6)      VOLUME SERIAL NUMBER
     ALLOC     9(5)      CURRENT TRACKS ALLOCATED
     USED      9(5)      CURRENT TRACKS USED
     DSO       X(3)      DATA SET ORGANIZATION
     BLKSZ     9(5)      BLOCK SIZE
     LRECL     9(5)      LOGICAL RECORD LENGTH
     RFM       X(3)      RECORD FORMAT
     EXTENT-CT 9(3)      NUMBER OF EXTENTS
     DT-CREATE 9(5)      FILE CREATION DATE
     DT-REF    9(5)      DATE FILE WAS LAST REFERENCED

          ONE RECORD IS BUILT FOR EACH FORMAT 1 DSCB FOUND IN A VTOC.
     THIS FILE SHOULD BE SORTED BEFORE USE.
INDEXPBDS.DM206DDM.VTC.SRT
          SEE PBDS.DM206DDM.VTC.FIL
INDEXPBDS.DM210DUM.PRD.FIL
          SEE PBDS.DM206DDM.VTC.FIL
INDEXPBDS.DM310WDM.VTC.FIL
          SEE PBDS.DM206DDM.VTC.FIL
INDEXPBDS.DM310WDM.VTC.SRT
          SEE PBDS.DM206DDM.VTC.FIL
INDEXPBDS.DM315WDM.VVDS.FIL
          SEE PBDS.DM203DDM.VVDS.FIL
INDEXPBDS.DM315WDM.VVDS.SRT
          SEE PBDS.DM203DDM.VVDS.FIL
INDEXPBDS.DM320WUM.TST.FIL
          SEE PBDS.DM206DDM.VTC.FIL
INDEXPBDS.DM330WDM.HSM.FIL
          SEE PBDS.DM206DDM.VTC.FIL
INDEXPBDS.DM330WDM.HSM.SRT
          SEE PBDS.DM206DDM.VTC.FIL
INDEXPBDS.DM340WDM.AREC.FIL
     RECFM = FB  LRECL = 88

     NAME      PIC       DESCRIPTION

     DSND      X(44)     PRIMARY (D) DATA SET NAME
     DSNA      X(44)     ALIAS   (A) DATA SET NAME

          ONE RECORD IS BUILT FOR EACH ALIAS RECORD FOUND IN THE MCDS.
     THE RECORD IS CHECKED TO INSURE THAT IT REPRESENTS A DATA SET
     THAT IS STILL MIGRATED AS A RECORDS ARE NOT CLEANED UP UNTIL
     SOME TIME AFTER RECALL.  THE FILE IS IN ORDER BY DSNA.
INDEXPBDS.DM340WDM.DREC.FIL
     RECFM = FB  LRECL = 124

     NAME      PIC       DESCRIPTION

     DSND      X(44)     PRIMARY (D) DATA SET NAME
     DSNA      X(44)     ALIAS   (A) DATA SET NAME
     PVOL      X(6)      VOLUME SERIAL BEFORE THE DATA SET WAS MIGRATED
     MVOL      X(6)      VOLUME SERIAL OF THE MIGRATED DATA SET
     LVL       X         MIGRATION LEVEL
                         '1' - LEVEL 1
                         '2' - LEVEL 2
     DEV       X         MIGRATION DEVICE TYPE
                         'D' - DISK
                         'T' - TAPE
     CSZ       9(7)      MIGRATED FILE SIZE IN 2K BLOCKS
     RDAT      9(5)      PRIMARY FILE REF DATE       - FORMAT = YYDDD
     CDAT      9(5)      PRIMARY FILE CREATE DATE    - FORMAT = YYDDD
     MDAT      9(5)      PRIMARY FILE MIGRATE DATE   - FORMAT = YYDDD

          ONE RECORD IS BUILT FOR EACH PRIMARY RECORD FOUND IN THE MCDS.
     THE RECORD IS CHECKED TO INSURE THAT IT REPRESENTS A DATA SET THAT
     IS STILL MIGRATED AS D RECORDS ARE NOT ALWAYS CLEANED UP
     IMMEDIATELY.  THE FILE IS IN ORDER BY DSND.
INDEXPBDS.DM350WUM.AREC.DEL
     RECFM = FB  LRECL = 80

     NAME      PIC       DESCRIPTION

               X(9)      CONSTANT - 'FIXCDS A '
     DSN       X(44)     DATA SET NAME (KEY) OF 'A' REC
               X(7)      CONSTANT - ' DELETE'
               X(20)     CONSTANT - SPACES

          ONE RECORD IS GENERATED FOR EACH 'A' RECORD IN THE MCDS
     THAT NEEDS TO BE DELETED.
INDEXPBDS.DM350WUM.AREC.MRG
     RECFM = FB  LRECL = 133

     NAME      PIC       DESCRIPTION

     DSND      X(44)     PRIMARY DATA SET NAME
     VOL       X(6)      MIGRATE VOLUME SERIAL IF FOUND
                         '      ' IF NOT FOUND
     ALOC      9(5)      MIGRATE ALLOCATED TRACKS
     USED      9(5)      MIGRATE USED TRACKS
     DSO       X(3)      DATA SET ORGANIZATION OF MIGRATED DATA SET
     BSIZ      9(5)      BLOCK SIZE OF MIGRATED DATA SET
     RECL      9(5)      LOGICAL RECORD LENGTH OF MIGRATED DATA SET
     RFM       X(3)      RECORD FORMAT OF MIGRATED DATA SET
     XTNT      9(3)      NUMBER OF EXTENTS OF MIGRATED DATA SET
     CDAT      9(5)      MIGRATED DATA SET CREATE DATE - FORMAT = YYDDD
     RDAT      9(5)      MIGRATED DATA SET REF DATE    - FORMAT = YYDDD
     DSNA      X(44)     ALIAS DATA SET NAME

          THE DATA FROM THE VTOC SCAN IS MERGED WITH THE 'A' RECORD
     INFORMATION FROM THE MCDS.  ALL FIELDS SHOULD BE FILLED IN FOR
     A DATA SET THAT IS MIGRATED TO DISK.  TAPE OR MISSING DATA SETS
     WILL HAVE A VOL OF '      ' AND MANY OF THE OTHER FIELDS WILL
     NOT BE FILLED IN.  A 'MIGRATED' DATA SET THAT IS ON THE PACK
     BUT DOES NOT HAVE AN 'A' REC WILL BE DROPPED.  THE FILE SHAPE
     INFORMATION (LRECL, DSO, ETC.) IS LARGELY USELESS BECAUSE WE DON'T
     CARE WHAT THE MIGRATED DATA SET LOOKS LIKE, ONLY THE DATA SET
     IT CAME FROM.
INDEXPBDS.DM350WUM.AREC.SRT
          SEE PBDS.DM350WUM.AREC.MRG
INDEXPBDS.DM350WUM.DREC.DEL
     RECFM = FB  LRECL = 80

     NAME      PIC       DESCRIPTION

               X(9)      CONSTANT - 'FIXCDS D '
     DSN       X(44)     DATA SET NAME (KEY) OF 'D' REC
               X(7)      CONSTANT - ' DELETE'
               X(20)     CONSTANT - SPACES

          ONE RECORD IS GENERATED FOR EACH 'D' RECORD IN THE MCDS
     THAT NEEDS TO BE DELETED.
INDEXPBDS.DM350WUM.MCDS.FIL
     RECFM = FB  LRECL = 80

     NAME      PIC       DESCRIPTION

     DSND      X(44)     PRIMARY (D) DATA SET NAME
     ALOC      9(5)      MIGRATE ALLOCATED TRACKS
     XTNT      9(3)      MIGRATE NUMBER OF EXTENTS
     DSNA      X(44)     ALIAS   (A) DATA SET NAME
     VOLP      X(6)      VOLUME SERIAL BEFORE MIGRATION
     VOLM      X(6)      MIGRATE VOLUME SERIAL
     LVL       X         MIGRATE LEVEL
                         '1' - LEVEL 1
                         '2' - LEVEL 2
     DEV       X         MIGRATE DEVICE TYPE
                         'D' - DISK
                         'T' - TAPE
     SIZE      9(7)      MIGRATE FILE SIZE IN 2K BLOCKS
     RDAT      9(5)      PRIMARY DATA SET REF     DATE - FORMAT = YYDDD
     CDAT      9(5)      PRIMARY DATA SET CREATE  DATE - FORMAT = YYDDD
     MDAT      9(5)      PRIMARY DATA SET MIGRATE DATE - FORMAT = YYDDD

          ONE RECORD IS CREATED FOR EACH 'CLEAN' MIGRATED DATA SET.
INDEXPBDS.DM360WUM.LVL2.DEL
     RECFM = FB  LRECL = 80

     NAME      PIC       DESCRIPTION

               X(7)      CONSTANT - 'DELETE '
     DSN       X(44)     DATA SET NAME (KEY) OF 'D' REC
               X(29)     CONSTANT - SPACES

          ONE RECORD IS GENERATED FOR EACH LEVEL 2 DATA SET THAT
     HAS EXPIRED.
INDEXPBDS.DM360WUM.TST.MST
     RECFM = FB  LRECL = 80

     NAME      PIC       DESCRIPTION

     DSN       X(44)     PM - PRIMARY DATA SET NAME
     VOLP      X(6)      PM - PRIMARY VOLUME SERIAL
     ALOC      9(5)      PM - ALLOCATION IN TRACKS
                         P  - PRIMARY ALLOCATION IN TRACKS
                          M - (DEV = 'D') MIGRATE TRACKS ALLOCATED
                          M - (DEV = 'T') CONSTANT - '    0'
     USED      9(5)      P  - PRIMARY TRACKS USED
     DSO       X(3)      P  - PRIMARY DATA SET ORGANIZATION
     BSIZ      9(5)      P  - PRIMARY BLOCK SIZE
     RECL      9(5)      P  - PRIMARY LOGICAL RECORD LENGTH
     RFM       X(3)      P  - PRIMARY RECORD FORMAT
     XTNT      9(3)      P  - PRIMARY EXTENT COUNT
     CDAT      9(5)      PM - PRIMARY CREATE DATE - FORMAT = YYDDD
     RDAT      9(5)      PM - PRIMARY REF    DATE - FORMAT = YYDDD
     VOLM      X(6)       M - MIGRATE VOLUME SERIAL
     LVL       X         PM - MIGRATE LEVEL
                         P  - P = PRIMARY
                          M - 1 = LEVEL 1
                          M - 2 = LEVEL 2
     DEV       X          M - MIGRATE DEVICE
                          M - D = DISK
                          M - T = TAPE
     SIZE      9(7)       M - MIGRATE FILE SIZE IN 2K BLOCKS
     AAM       X(3)      PM - ACCOUNTING CODE

          ONE RECORD IS BUILT FOR EACH FILE REGUARDLESS OF WHETHER IT IS
     A PRIMARY FILE OR A MIGRATED FILE.  THE P/M THAT PRECEEDS THE FIELD
     DESCRIPTION INDICATES WHETHER THE FIELD IS FILLED IN FOR A PRIMARY
     OR MIGRATED FILE.  'PM' INDICATES THAT IT IS ALWAYS FILLED IN.  'P'
     ALONE INDICATES THAT THE FIELD IS ONLY FILLED IN FOR PRIMARY FILES.
     'M' ALONE INDICATES THAT THE FIELD IS ONLY FILLED IN FOR MIGRATED
     FILES.  ALL MISSING FIELDS WILL BE FILLED WITH SPACES.  A 'P' IN
     THE LVL FIELD INDICATES THAT THE FILE IS A PRIMARY FILE.  A '1' OR
     '2' INDICATE THAT IT HAS MIGRATED.
INDEXPBDS.DM380MUM.BIL.FIL
          SEE PBDS.DM200RRP.BIL.FIL
INDEXPBDS.DM380MUM.HST.FIL
     RECFM = FB  LRECL = 57

     NAME      PIC       DESCRIPTION (HEADER REC)

     LIT       X(11)     CONSTANT 'DM-HST-HEAD'
     DATE      X(8)      FILE DATE IN MM/DD/YY FORMAT
               X(38)     FILLER

     NAME      PIC       DESCRIPTION DETAIL REC)

     GRP       999       THREE DIGIT GROUP CODE
     AAM       XXX       THREE LETTER AAM ACCOUNTING CODE
     DSNAME    X(44)     DATA SET NAME
     ALLOC     9(5)      CURRENT ALLOCATION
     L         X         MIGRATE LEVEL
                         P = PRIMARY
                         1 = LEVEL 1
                         2 = LEVEL 2
     D         X         MIGRATE DEVICE
                         D = DISK
                         T = TAPE

          THERE IS 1 HEADER RECORD AT THE BEGINNING OF THE FILE.
     THERE IS ONE DETAIL RECORD FOR EVERY PRODUCTION FILE.  THE
     DETAIL RECORDS ARE IN ASCENDING ORDER BY GRP AAM AND DSNAME.
