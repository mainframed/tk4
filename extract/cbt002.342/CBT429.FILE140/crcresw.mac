PROC 0 DEBUG ARCWCAT(NO)
/* REF: ABL.CMDPROC(ARCRESW)
/* DOC: CLIST FOR SUBMITTING BATCH DF/DSS DASD RESTORE JOBSTREAM
/*      TO RECOVER A DATASET FROM A WEEKLY DUMP TAPE.
/*      THIS CLIST INVOKED VIA SPF 3.A.ARC.RESW (DASD ARCHIVE SYSTEM)
CONTROL MSG NOLIST
IF &DEBUG = DEBUG THEN CONTROL MSG LIST SYMLIST CONLIST
ISPEXEC DISPLAY PANEL(ARCRESW)
IF &LASTCC EQ 8 THEN +
 DO
  ISPEXEC SETMSG MSG(ARC012A)
  EXIT CODE(0)
 END
ISPEXEC VGET (ZTEMPF ARCWDSN ARCWVOL ARCWTAPE)
IF &SYSDSN('&ARCWDSN') = OK THEN +
 DO
  /* SET FLAG TO ALLOW TO RESTORE TO OCCUR AS AN UNCATALOGED DATASET
  /* WITH ".RESTORED" APPENDED TO THE DATASET NAME ..... THEN ....
  /* WARN THE RESTOREE AS SUCH VIA A PANEL MESSAGE.
  SET &ARCWCAT = YES
  ISPEXEC SETMSG MSG(ARC012D)
 END
ISPEXEC FTOPEN TEMP
ISPEXEC FTINCL ARCRESW
ISPEXEC FTCLOSE
SUBMIT '&ZTEMPF'
SET &WHOFOR = &SUBSTR(1:7,&ARCWDSN)
SE 'RESTORE OF DATASET &ARCWDSN BEGAN AT &SYSTIME',USER(&WHOFOR),LOGON
ISPEXEC SETMSG MSG(ARC012C)
SE '#ABLUTIL: RESTORE OF DATASET &ARCDSN REQUESTED',CN(01)
SE '#ABLUTIL: USING WEEKLY DUMP VOL=SER=(&ARCWTAPE)',CN(01)
%OUTLIST
EXIT CODE (0)
