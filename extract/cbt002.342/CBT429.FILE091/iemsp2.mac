//IDS  JOB  400565,S.EGGETT,MSGLEVEL=1,CLASS=B,REGION=108K,PRTY=8
//X EXEC PL1LFCLG,PARM.PL1L='SIZE=45056,S,NL,A,X,LD,ND,SM=(2,72),EB,C',
//             PARM.LKED='LET'
//PL1L.SYSIN DD *
 IEMSP2 : PROCEDURE OPTIONS(MAIN);
 /* THIS PROGRAM TRANSFERS CARD IMAGES FROM ONE FILE TO ANOTHER.
 /* EACH IMAGE HAS A TYPE NUMBER AS FIRST CHARACTER.THE PROGRAM
 /* RECORDS THE NUMBER OF CARDS THERE ARE OF EACH TYPE. */
    DECLARE CARDS INPUT ENVIRONMENT(F(80)) ,
            BUILD OUTPUT ENVIRONMENT(F(480,80)),
          1 CARD,
          2 TYP CHAR(1),
          2 BODY CHAR(79),
            T FIXED BINARY,
            TYPE(0:9) FIXED(3) STATIC INITIAL((10) 0 );
    PUT EDIT('OUTPUT OF PL/1 SAMPLE PROGRAM')(COLUMN(45),A) PAGE;
    ON ENDFILE(CARDS) GOTO FINISH;
    ON CONVERSION BEGIN;PUT EDIT
 ('THIS CARD IGNORED BECAUSE TYPE IS NOT NUMERIC := ',CARD)(A) SKIP(2);
    GOTO LOOP; END;
 LOOP: READ FILE(CARDS) INTO(CARD);
    T=TYP;TYPE(T) = TYPE(T) + 1;
    WRITE FROM(CARD) FILE(BUILD);
    GOTO LOOP;
 FINISH: PUT DATA(TYPE) SKIP(3);
    PUT EDIT('END OF SAMPLE OUTPUT')(COLUMN(47),A) SKIP(2);
    END IEMSP2;
/*
//GO.SYSABEND  DD  SYSOUT=A
//GO.BUILD DD UNIT=SYSDA,SPACE=(480,(10,5))
//GO.CARDS DD *,DCB=BLKSIZE=80
2    FIRST OF DATA FOR PL1 SAMPLE PROGRAM
6
6 THE
8  CONTENTS
6   OF
2   THESE
4     CARDS
7      IMMATERIAL
2       SINCE
0       THEY
6        ARE
6         ONLY
6          TRANSMITTED
6           NOT
6            PRINTED
6
&       DELIBERATE DUD CARD
6
2   LAST OF SOURCE DATA FOR PL1 SAMPLE
/*
