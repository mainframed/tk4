                           RESCUE
                A ONE-PACK OPERATING SYSTEM

                                          RICK STECKER
                                          SYNECTICS FOR MGMT DECISIONS
                                          (301) 965-5627 (INSTALLATION)
                                          (703) 528-2772 (MAIN OFFICE)

   THIS FACILITY WAS OBTAINED FROM FILE 22 OF THE CBT TAPE. THIS IS A
  MODIFIED VERSION OF THAT MACRO.
   THE ORIGINAL MACRO HAS BEEN MODIFIED EXTENSIVELY TO YIELD THE
  FOLLOWING RESULTS:
  - SUPPORT FOR MVS/XA 2.2.0.
  - ABILITY TO INCLUDE/EXCLUDE CBIPO LIBRARIES, MVS/DITTO, ISMF,
    SDSF, A PROGRAM PRODUCT LINKLIB,AND A COMTEN FRONTEND.
  - SUPPORT FOR 5 TSO USERS FROM THE SOURCE SYSTEM.
  - ABILITY TO SELECT/CHANGE DSN PREFIXES FOR CBIPO, SDSF, ISPF, PDF,
    AND THE PROGRAM PRODUCT LIBRARIES.
  - USE OF IDCAMS WHENEVER POSSIBLE TO SIMPLIFY THE CONTINUATION OF
    CONTROL STATEMENTS WHEN USING MACRO VARIABLES (NO 'X' REQUIRED
    IN COL. 72 OR CONTINUATION IN COL. 16)
  - A FIFTH JOB HAS BEEN ADDED THAT PRODUCES INFORMATION TO HELP YOU
    VERIFY THAT THE PROCS, PARMS, ETC. ARE IN ORDER, AND ALLOWS BACKUP
    OF THE RESCUE VOLUME WITH EITHER DF/DSS OR FDR (OR NOT AT ALL).

  FUNCTION

   THE FUNCTION OF THIS FACILITY IS TO PROVIDE AN OPERATING SYSTEM THAT
  CAN BE USED TO RECOVER FROM CATASTROPHIC PROBLEMS WITH YOUR NORMAL
  SYSTEM. SINCE ALL OF THE RESOURCES REQUIRED TO IPL ARE ON 1 VOLUME,
  THE EXPOSURE TO HARDWARE PROBLEMS IS MINIMIZED. ADDITIONALLY, A BACKUP
  TAPE OF THE VOLUME PUTS YOU NO MORE THAN A SINGLE RESTORE (STAND-ALONE
  IF NECESSARY) AWAY FROM AN IPL.
   BEING A 1 VOLUME SYSTEM, PERFORMANCE WILL BE ATROCIOUS. IF YOU USE
  THIS SYSTEM ONLY TO FIX THE PROBLEM(S) WITH YOUR NORMAL SYSTEM AND
  LIMIT IT'S AVAILABILITY TO THOSE FIXING THE PROBLEM, IT MAY NOT BE
  NOTICEABLE.

  OPERATION

   THE RESCUE MACRO PUNCHES JCL TO CREATE THE OPERATING SYSTEM. THE JOBS
  CREATED BY THE MACRO ARE THEN RUN TO INIT THE VOLUME, DEFINE A MASTER
  CATALOG, DEFINE THE VSAM DATASETS, BUILD THE CATALOG, COPY THE
  LIBRARIES FROM THE SOURCE SYSTEM, SETUP THE PARMLIB, SETUP THE
  PROCLIB, SETUP VTAMLST, COPY AND SETUP TSO USERS IN UADS, CREATE THE
  SYSCATLG POINTER IN THE NUCLEUS, FORMAT THE DUMP DATASETS, FORMAT THE
  SMF MAN FILES, FORMAT LOGREC, LIST CRITICAL PDS MEMBERS THAT CAN
  AFFECT THE ABILITY TO IPL, RENAME ALL THE TARGET DATASETS TO THE SAME
  NAME AS ON THE TARGET SYSTEM, PRINT A VTOC OF THE PACK, AND BACK THE
  RESCUE VOLUME UP TO TAPE (WHEW×).

   THE MACRO CAN BE ASSEMBLED AS-IS, IF DESIRED. HOWEVER, BEFORE THE
  JOBS WILL RUN SUCCESSFULLY, SEVERAL MEMBERS OF LIBRARIES ON THE SOURCE
  SYSTEM MUST BE IN PLACE AND SEVERAL MACRO VARIABLES SHOULD BE
  VERIFIED. SEE USAGE NOTES, BELOW.

   ONCE YOU GET EVERYTHING YOU NEED (YOU MAY NEED TO MODIFY THE MACRO
  FOR ONE REASON OR ANOTHER), SAVE THE JCL THAT POPS THE MACRO SO THAT
  YOU CAN RECREATE THE RESCUE SYSTEM WHEN NECESSARY (AFTER MAINTENANCE,
  A NEW VERSION OF A PRODUCT, ETC.).

  VERIFICATION

   THE LAST JOB OF THE PROCESS PRINTS SOME OF THE MORE CRITICAL ITEMS
  THAT CAN AFFECT YOUR ABILITY TO IPL (IEASYS00, JES2 PROC, VTAM PROC,
  ETC.). THIS GIVES YOU THE ABILITY TO REVIEW YOUR RESCUE SYSTEM PRIOR
  TO THE FIRST IPL. THIS JOB ALSO PROVIDES THE ABILITY TO BACK THE
  RESCUE PACK UP TO TAPE.

   EACH TIME YOU (RE)CREATE THE RESCUE SYSTEM, IT SHOULD BE IPL'ED TO
  MAKE SURE THAT YOU'VE GOT WHAT YOU THINK YOU'VE GOT. THE IPL WILL
  REQUIRE:
   - CLPA
   - JES2 COLD-START

  USAGE NOTES

   1. BEFORE THE JOBS WILL RUN SUCCESSFULLY, SEVERAL THINGS MUST BE IN
     PLACE ON THE SOURCE SYSTEM.  SOME THOUGHT WAS GIVEN TO CREATING
     THESE THINGS IN THE RESCUE MACRO, BUT THERE ARE TOO MANY VARIABLES
     (AT LEAST FOR NOW).
    A). THE FOLLOWING MEMBERS MUST RESIDE IN SYS1.PROCLIB.
      -JES2RESQ- THIS MEMBER WILL BE RENAMED TO 'JES2'. MODIFY AS
                NECESSARY TO INCLUDE ONLY THE DATASETS YOU ARE COPYING
                TO THE RESCUE VOLUME. POINT IT TO A INIT DECK THAT YOU
                HAVE MODIFIED FOR THE SAME PURPOSE (NO DUPLEXING, ETC.)
      -VTAMRESQ- THIS MEMBER WILL BE RENAMED TO 'VTAM'. AS ABOVE,
                MODIFY IT TO MEET YOUR RESCUE ENVIRONMENT.
      -VTAM0RSQ- THIS MEMBER WILL BE RENAMED TO 'VTAM0'. THIS PROC IS
                USED TO START VTAM APPLICATIONS AFTER VTAM IS UP.
    B). THE FOLLOWING MEMBERS MUST RESIDE IN SYS1.PARMLIB.
      -IEASYSRQ- THIS MEMBER WILL BE RENAMED TO 'IEASYS00'. IT SHOULD
                POINT TO OTHER 'RESCUE' MEMBERS THAT ARE DIFFERENT FROM
                THE SOURCE SYSTEM (APF LIST, LINK LIST, PAGE DATASETS,
                SMF PARM, COMMNDXX, ETC.). CREATE THESE OTHER MEMBERS AS
                NECESSARY.
      -IEACMDRQ- THIS MEMBER WILL BE RENAMED TO 'IEACMD00'. MODIFY IT IF
                NECESSARY. IF NOT, IT CAN BE A DUPLICATE OF IEACMD00
    C). THE FOLLOWING MEMBERS MUST RESIDE IN SYS1.VTAMLST.
      -ATCSTRRQ- THIS MEMBER WILL BE RENAMED TO 'ATCSTR00'. MODIFY IT IF
                NECESSARY/DESIRED TO BRING VTAM UP THE WAY YOU WANT IT
                IN THE RESCUE ENVIRONMENT. IT SHOULD POINT TO THE
                MEMBERS (ATCCONXX, ETC.) THAT YOU WANT.

   2. DASD SPACE - THIS VERSION (UNMODIFIED) REQUIRES ABOUT 550 CYLS OF
     3380 SPACE, SO IT WILL FIT ON A 3380-A. FOR THE MOST PART, THE
     LIBRARIES ARE ALLOCATED BASED ON THE SIZE AT MY INSTALLATION. I
     RECOMMEND THAT YOU REVIEW THESE SPACE REQUIREMENTS FOR YOUR SITE.
     ONE WAY TO DO THIS IS TO SORT OUT ALL THE MEMBERS, MACRO VARIABLES,
     ETC. AND RUN THE JOBS. IF YOU'RE CLOSE, THE JOBS WILL RUN, AND YOU
     CAN REVIEW THE SHORT VTOC LISTING PRODUCED BY RESCUE4 FOR DSN'S
     IN MULTIPLE EXTENTS. IF NOT, ONE OF THE LOAD#99 STEPS WILL ABEND.
     THE LIBRARIES ARE ALLOCATED IN STEP 'ALLOC' OF RESCUE2.

   3. MAKE SURE THAT YOU HAVE A TSO LOGON PROC THAT WILL WORK IN THE
     RESCUE ENVIRONMENT. THE PROC IS ADDED TO UADS DURING THE RESCUE
     PROCESS, AND IS PRINTED IN THE VERIFICATION JOB.

   4. REVIEW THE MACRO VARIABLES TO SELECT THE PRODUCTS AND/OR DATASETS
     THAT YOU WANT COPIED FROM THE SOURCE SYSTEM. THE DEFAULTS AND THE
     FUNCTION OF EACH VARIABLE IS LISTED BELOW.

    - JOBNAME=RESCUE - THE JOBS GENERATED BY THE MACRO WILL BEGIN WITH
                THIS VALUE, AND HAVE 0,1,2,3, OR 4 APPENDED TO IT. DON'T
                DEFINE IT LONGER THAN 7 CHARS.
    - JOBCLASS=A - THE CLASS OF THE 5 RESCUE JOBS.
    - JOBACCT='ACCTING,INFO' - THE JOB ACCOUNTING INFO FOR THE RESCUE
                JOBS. SEE MISC. NOTES, BELOW.
    - JOBPROGM=PROGRAMMER - THE PROGRAMMER NAME FIELD OF THE JOB CARD.
                DON'T USE QUOTES OR SPACES - TRY DASHES (-).
    - JOBMSGCL=X - MSGCLASS FOR THE RESCUE JOBS.
    - NOTIFY=SYS1 - NOTIFY FOR THE RESCUE JOBS. CAN BE NULLIFIED.
    - TYPRUN=, - FOR THE RESCUE JOBS. 'HOLD' IS A GOOD IDEA IF YOU
                SUBMIT THE ENTIRE MEMBER.
    - CATALOG=CATALOG.RESCUE - THE MASTER CATALOG NAME FOR THE RESCUE
                SYSTEM. SEE MISC. NOTES, BELOW.
    - COMMAND=Y - IF YOU HAVE PGM=COMMAND. THE RESCUE VOLUME WILL BE
                VARIED OFF, ON, & MOUNTED WHEN NECESSARY. ELSE 'N'.
    - CMDPROC='SYS1.CMDPROC' - THE TSO CLIST LIBRARY THAT YOU NEED.
    - MASTRCAT=CATALOG.MVSICFM.VMVSCAT - THE SOURCE SYSTEM'S MASTER
                CATALOG.
    - MASTRPW=MASTER - THE SOURCE SYSTEM'S MASTER CATALOG PASSWORD. ALSO
                BECOMES RESCUE'S MASTER PASSWORD.
    - MCATVOL=MVSCAT - SOURCE SYSTEM'S MASTER CATALOG VOLUME.
    - NCP=N - 'Y' INCLUDES NCP DATASETS. SEE MISC. NOTES, BELOW.
    - COMTEN=Y - INCLUDES THE COMTEN LOADLIB.
    - C10LIB=OCSE.COMLOAD - THE DSN OF THE COMTEN LOADLIB.
    - IPLTXT1=SYS1.SAMPLIB(IPLRECS) - BOOTSTRAP RECORDS.
    - IPLTXT2=SYS1.SAMPLIB(IEAIPL00) - IPL TEXT.
    - VOLUME=RESCUE - VOLSER OF THE RESCUE VOLUME.
    - DEVT=3380 - MUST BE A REAL DEVICE TYPE. USED FOR BOTH SOURCE &
                TARGET VOLUMES, AND FOR SYSCATLG POINTER FLAGS.
    - OWNER=RESCUE - OWNERID IN THE VARIOUS DEFINES & ICKDSF.
    - ICF=Y - TYPE OF MASTER CATALOG TO DEFINE. SEE MISC. NOTES, BELOW.
    - CBIPO=Y - INCLUDES CBIPO LIBRARIES. SEE MISC. NOTES, BELOW.
    - IPOPRE=IPO1 - THE DSN PREFIX FOR THE CBIPO LIBRARIES.
    - RACF=Y - INCLUDES THE RACF DATASET. SEE MISC. NOTES, BELOW
    - DITTO=Y - INCLUDES MVS/DITTO LIBRARIES.
    - ISMF=Y - INCLUDES ISMF LIBRARIES.
    - SDSF=Y - INCLUDES SDSF LIBRARIES.
    - ISFPRE=ISF.V1R1M0 - DSN PREFIX FOR SDSF LIBRARIES.
    - ISPPRE=ISP.V2R3M0 - DSN PREFIX FOR ISPF LIBRARIES
    - ISRPRE=ISR.V2R3M0 - DSN PREFIX FOR PDF LIBRARIES
    - OEMPP=Y - INCLUDES A PROGRAM PRODUCT LIBRARY.
    - OEMPRE=SYS2 - DSN PREFIX FOR P/P LIBRARY (OEMPRE.LINKLIB)
    - RENAME=Y - 'Y' RENAMES ALL RESCUE DSNS TO THE SAME NAME AS THE
                SOURCE SYSTEM.
    - USR1=AMK - 1ST TSO USER.
    - USR2=AXS - 2ND TSO USER.
    - USR3=LLA - 3RD TSO USER.
    - USR4=RGS - 4TH TSO USER.
    - USR5=RXR - 5TH TSO USER.
    - TSOPROC=$RESCUE - MEMBER NAME OF A LOGON PROC CUSTOMIZED FOR THE
                RESCUE SYSTEM.
    - TSOPASS=RESCUE - TSO PASSWORD (SO YOU DON'T HAVE TO REMEMBER WHAT
                IT WAS WHEN THE RESCUE SYSTEM WAS CREATED).
    - BACKUP=DSS - 'DSS' CAUSES DF/DSS JCL TO BE CREATED, 'FDR' CAUSES
                FDR JCL TO BE CREATED, 'NONE' CREATES NO BACKUP JCL.
    - BKUPDSN=BKUP.RESCUE - THE DSN OF THE BACKUP TAPE.
    - BKUPUNT=TAPE - UNIT NAME FOR THE BACKUP TAPE.
    - SYSID=IPO1 - THIS WAS HERE WHEN I GOT IT. DON'T KNOW WHY IT'S HERE
    - SYS1=SYS1 - DSN PREFIX. USED FOR BOTH SOURCE & TARGET.
    - SYSX=SYSX - DSN PREFIX USED TO AVOID ENQUEUE CONFLICTS WITH THE
                SOURCE SYSTEM.
    - SYSRES=MVSRES - SOURCE SYSTEM'S SYSRES.
    - TAPEUNIT=TAPE - HERE WHEN I GOT IT. DON'T KNOW WHY IT'S HERE.
    - TPDSN=SADPGM - HERE WHEN I GOT IT. DON'T KNOW WHY IT'S HERE.
    - TPVOL=RESCUT - HERE WHEN I GOT IT. DON'T KNOW WHY IT'S HERE.
    - TMS=Y - HERE WHEN I GOT IT. DON'T KNOW WHY IT'S HERE.
    - UNITADR=1C3 - DEVICE NUMBER OF RESCUE VOLUME.
    - VTAMLIB=VTAMLIB - DSN SUFFIX FOR THE VTAM LOADLIB.
    - VTAMLST=VTAMLST - DSN SUFFIX FOR THE VTAM START PARAMETERS.
    - TBLDSN=OCSE.XA.VTAMLIB - IF YOU USE A SEPARATE LIBRARY FOR VTAM
                TABLES, ETC. IF YOU DON'T HERE'S A PLACE FOR AN EXTRA PD
    - ICKSADSF=SYS1.SAMPLIB - HERE WHEN I GOT IT. DON'T KNOW WHY IT'S HE
    - ADRDMPRS=SYS1.SAMPLIB - HERE WHEN I GOT IT. DON'T KNOW WHY IT'S HE
    - LIST=Y - PRINT OR PRINT OFF


   5. MISCELLANEOUS NOTES
    - THE RENAMES FOR PROCLIB, PARMLIB, & VTAMLST RENAME THE PRODUCTION
     MEMBERS SO THAT YOU CAN SEE THEM WHILE UP UNDER RESCUE. MAKE SURE
     THESE NAMES AREN'T USED IN YOUR SHOP OR CHANGE WHAT YOU RENAME
     THEM TO.
    - IF YOUR SHOP REQUIRES MULTI-FIELD ACCOUNTING INFO, YOU MUST
     SURROUND IT IN QUOTES WHEN YOU POP THE MACRO. YOU MUST THEN EDIT
     THEM OUT AFTER THE JCL IS GENERATED.
    - IF YOU CHANGE THE 'LENGTH' OF THE NAME OF THE MASTER CATALOG OF
     THE RESCUE SYSTEM, YOU WILL HAVE TO STRUGGLE WITH IEBDG CONTROL
     STATEMENTS (THE LENGTH OF THE PUNCHED PICTURE STRING VARIES WITH
     THE LENGTH OF THE EXPANDED VARIABLE).
    - GIVE YOURSELF ENOUGH PRIMARY SPACE ON THE LIBRARIES TO KEEP EACH
     ONE IN THE PRIMARY EXTENT. I HAVE USED A SMALL SECONDARY QUANTITY
     SO THAT YOU DON'T D37 BECAUSE YOU CAN'T EDIT (OR COPY) WHILE UP
     UNDER RESCUE.
    - THE CBIPO LIBRARIES INCLUDE THE INSTLIB AND JCLLIB SO THAT YOU'RE
     ASSURED OF HAVING ACCESS TO SOME UTILITY JCL.
    - I DIDN'T SPEND MUCH TIME ON VSAM CATALOGS, RACF, OR NCP, SINCE WE
     DON'T USE THEM. THESE WERE LEFT IN THE SAME STATE AS WHEN I GOT THE
     MACRO.
    - HAVE FUN AND LET ME KNOW HOW IT GOES×

