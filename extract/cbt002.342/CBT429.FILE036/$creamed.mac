        A BIT OF ADVICE FOR WHAT TO DO IF A PDS DIRECTORY IS
                           WIPED OUT
           (AND FOR RESTORING DELETED MEMBERS IN GENERAL)

INTRODUCTION ---

 A PDS CONSISTS OF A DIRECTORY, FOLLOWED BY PHYSICAL MEMBERS.  THE
   DIRECTORY HAS BLKSIZE(256) AND HAS ENTRY SLOTS WHICH POINT TO THE
   TTR LOCATION OF THE MEMBERS.  EACH PHYSICAL MEMBER HAS AN EOF
   MARKER AFTER IT.  THE LRECL AND BLOCKSIZE OF THE PHYSICAL MEMBERS
   CORRESPOND TO THE STATED DCB ATTRIBUTES AS RECORDED IN THE VTOC
   ENTRY FOR THE DATASET.  THE DIRECTORY IS AT THE BEGINNING OF THE
   DATASET AND THE PHYSICAL MEMBERS START SEQUENTIALLY AFTER THE END
   OF THE DIRECTORY BLOCKS, EVEN IN THE MIDDLE OF A TRACK.

 IF A PHYSICAL MEMBER HAS NO DIRECTORY ENTRY POINTING TO IT, IT IS
   SAID TO BE DELETED.  SPACE OCCUPIED BY DELETED MEMBERS IS RECOVERED
   DURING A DATASET COMPRESS OPERATION (USING FOR EXAMPLE THE IEBCOPY
   PROGRAM).  A DELETED MEMBER CAN BE RESTORED IF A NEW DIRECTORY
   ENTRY CAN BE CREATED WHICH POINTS TO IT.  THIS CAN BE DONE BY THE
   FIXPDS PROGRAM, OR THE "PDS" TSO COMMAND (FILE 182 OF THE CBT TAPE),
   OR THE "PDSGAS" PROGRAM (FILE 316 - JIM MARSHALL'S COLLECTION).

 SO MUCH FOR INTRODUCTION.


HOW TO PROCEED ---

 IF YOU HAVE THE "PDS" COMMAND (CBT TAPE FILE 182), THE FIRST THING
   TO DO IS TO EXAMINE THE HELP FOR THE "RESTORE" SUBCOMMAND OF PDS.
   THIS FACILITY HAS THE CAPABILITY OF STOWING NEW DIRECTORY ENTRIES
   REPEATEDLY FOR DELETED MEMBERS AND IT IS FAST.  THE "PDSGAS"
   PROGRAM IS ALSO VERY FAST, AND IT IS A BATCH PROGRAM.  THESE
   ALTERNATIVES ARE PREFERABLE TO OUR FIXPDS PROGRAM BECAUSE THEY
   ARE FASTER.

 THE ADVANTAGE OF THE "FIXPDS" PROGRAM IS IN THE WAY IT WORKS.
   THIS IS DIFFERENT FROM THE OTHER METHODS IN THAT IT GOES BACKWARDS,
   WHEREAS THE OTHER RESTORE-TYPE PROGRAMS GO FORWARDS FROM THE END
   OF THE DIRECTORY.

 ALSO, THIS "FIXPDS" PROGRAM LOOKS AT PHYSICAL MEMBERS FIRST USING
   ISPF BROWSE, SO YOU CAN EXAMINE THE MEMBER THOROUGHLY BEFORE
   DECIDING WHETHER TO RESTORE IT OR NOT.

 NOW FOR THE MAIN THING--IF THE DIRECTORY PART (BEGINNING TRACK(S)
   OF THE DATASET) IS OVERLAID BY DATA, OR "CREAMED".  THERE IS NOW
   NO DIRECTORY, ONLY PHYSICAL MEMBERS.  YOU MAY ALSO HAVE WIPED OUT
   SOME OF THE PHYSICAL MEMBERS AT THE BEGINNING.  CAN YOU SAVE THE
   REST OF THEM.  THE ANSWER IS YES.

 FIRST YOU MUST CREATE A DUMMY DIRECTORY.  YOU CAN USE THE "FIXPDS"
   SUBCOMMAND OF THE "PDS" TSO SUBCOMMAND TO DO THIS.

            FIXPDS EXPANDDIR(NN)
                           (IF DSORG OF THE PDS IS STILL PO)
                           FOLLOWED BY
            FIXPDS MAXSPACE
                           (MARKS ALL OF THE DATASET AS USED)

   AN ALTERNATIVE IS TO RESTORE THE DIRECTORY TRACKS FROM AN OLD FDR
   OR DF/DSS (OR IEHDASDR) BACKUP.  THE PROBLEM IN THAT CASE IS THAT
   THE MEMBER POINTERS MAY BE OBSOLETE.  BUT AT LEAST YOU'LL HAVE A
   DIRECTORY.  YOU CAN THEN DELETE THE MEMBERS TO GET A BLANK
   DIRECTORY (IF YOU KNOW FOR SURE THAT THEY ARE WRONG.  OTHERWISE
   YOU CAN KEEP THE DIRECTORY AS IS.)

   ONCE THIS IS DONE, YOU CAN GET INTO OUR "FIXPDS" PROGRAM UNDER
   ISPF AND STOW NEW ENTRIES FOR THE PHYSICAL MEMBERS AT THE END OF
   THE DATASET.  THESE ARE THE ONES WHICH HAVE BEEN PUT THERE MOST
   RECENTLY.  USE YOUR KNOWLEDGE AND PROCEED WITH CAUTION.


