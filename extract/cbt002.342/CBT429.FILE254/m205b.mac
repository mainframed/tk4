//JEFFKZ   JOB (530000000000),'TECH.JEFF.KAPLAN',
// CLASS=S,MSGCLASS=G,MSGLEVEL=(1,1),NOTIFY=JEFFK,REGION=6M
//S EXEC ASMHCL,PARM.L='XREF,LIST'
//C.SYSIN  DD *
M205B    TITLE 'M205B'
M205B    CSECT ,
M205B    AMODE 31
M205B    RMODE ANY
R0       EQU   0
R1       EQU   1
R2       EQU   2
R3       EQU   3
R4       EQU   4
R5       EQU   5
R6       EQU   6
R7       EQU   7
R8       EQU   8
R9       EQU   9
RA       EQU   10
RB       EQU   11
RC       EQU   12
RD       EQU   13
RE       EQU   14
RF       EQU   15
         USING M205B,RF , MAP
         STM   RE,RC,12(RD) SAVE CALLERS REGISTERS
         B     EYECATCH BRANCH AROUND EYECATCHER
         DC    C'CPI M205B   ' EYECATCHER
EYECATCH LR    RC,RF ESTABLISH ADDRESSABILITY VIA REG 12
         DROP  RF
         USING M205B,RC , MAP
         ST    RD,SAVEAREA+4 BACKCHAIN OUR SAVEAREA
         LR    R2,RD TEMP PTR TO CALLERS SAVEAREA
         LA    RD,SAVEAREA PTR TO OUR SAVEAREA
         ST    RD,8(R2) FORWARD CHAIN OLD SAVEAREA TO OUR SAVEAREA
LOOPPARM L     R3,4(R1) PICKUP PTR TO SECOND PASSED PARAMETER
         MVC   0(4,R3),0(R1) COPY ADDR(PTR) TO SECOND PARAM
         TM    4(R1),X'80' LAST PARAM SET PASSED
         BNO   CONTINUE NO
         B     RETURN EXIT
CONTINUE LA    R1,8(R1) ADVANCE PASSED PARAM PTR
         B     LOOPPARM
RETURN   L     RD,SAVEAREA+4 CALLERS SAVEAREA PTR
         LM    RE,RC,12(RD) CALLERS REGS
         LA    RF,0 SET RC = 0
         BR    RE RETURN TO CALLER
SAVEAREA DC    18F'0' OUR SAVEAREA
         END
/*
//*L.SYSLMOD DD DSN=YOURDSN(LOADMOD),DISP=SHR,
//*  UNIT=,SPACE=
