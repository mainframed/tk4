
             C  O  P  Y  F  I  L  E

          RELEASE 3   10 MAY  1982


   FUNCTION:  COPY SELECTED FILES FROM A MULTIPLE-FILE INPUT TAPE
              TO A MULTIPLE FILE OUTPUT TAPE.

   EXEC PARAMETER:  IF PARM=TAPEL IS SPECIFIED ON THE EXEC CARD,
              A 'TAPEL' LISTING OF THE OUTPUT TAPE AFTER THE
              COPY OPERATION WILL BE PROVIDED.



   PROCEDURE:

        //COPYFILE PROC FROM=,TO=,DSP=KEEP
        //COPYSTEP EXEC PGM=COPYFILE,REGION=200K,PARM=' -OPTIONAL- '
        //MSG      DD SYSOUT=A
        //TAPELOUT DD SYSOUT=A
        //IN       DD DSN=INPUT.FILE,UNIT=TAPE,DISP=OLD,
        //            VOL=SER=&FROM
        //TAPELIN  DD DSN=OUTPUT.FILE,UNIT=TAPE,VOL=SER=&TO,
        //            DISP=(NEW,&DSP)
        //         PEND


        //SYSIN    DD *
         - CONTROL CARDS -
         /*


   DATASETS:  (ALL PROVIDED BY THE PROCEDURE)

              //IN      DD     - THE INPUT TAPE -

              //TAPELIN DD     - THE OUTPUT TAPE, EITHER A SCRATCH
                                 TAPE OR ONE ALREADY CONTAINING SOME
                                 FILES TO BE PRESERVED.

              //MGS      DD SYSOUT=A

              //TAPELOUT DD SYSOUT=A   -TAPEL LISTING FOR THE OUTPUT
                                        TAPE-



   CONTROL CARDS:

              THE COPYFILE PROGRAM IS CONTROLLED BY SYSIN CARDS. ONE OR
              MORE CARDS MAY BE USED.  72  CARD COLUMNS ARE SCANNED.
              THE CARDS CONTAIN THE NUMBERS OF THE FILES OF THE INPUT
              TAPE (IN ASCENDING ORDER) WHICH ARE TO BE COPIED TO THE
              OUTPUT TAPE. IF THE FILES ARE TO BE COPIED TO AN EXIST-
              ING SET OF FILES OF FILES ON THE OUTPUT TAPE, THE NUMBER
              OF THE FIRST NEW OUTPUT FILE IS ATTACHED TO THE NUMBER
              OF THE FIRST INPUT FILE WITH / . SEE THE EXAMPLES.


   EXAMPLES:

              1. COPY FILES 3, 5, 6, 9 FROM TAPE 101003 TO A NEW
                 SCRATCH TAPE.

                 // EXEC COPYFILE,FROM=101003
                 //SYSIN    DD *
                  3 5 6 9
                 /*

              2. ADD THE SAME FILES TO TAPE 007177, WHICH ALREADY
                 HAS SEVEN FILES WHICH ARE TO BE PRESERVED.

                 //   EXEC COPYFILE,FROM=101003,TO=007177
                 //SYSIN  DD *
                   3/8  5  6  9
                 /*

              3. MERGE SELECTED FILES FROM THREE TAPES, AND PRODUCE
                 A TAPEL LISTING OF THE RESULT.

                 //  EXEC COPYFILE,FROM=123770,TO=100022,DSP=PASS
                 //SYSIN   DD *
                  1  2  52  53
                 /*
                 //  EXEC COPYFILE,FROM=101832,TO=100022,DSP=PASS
                 //SYSIN   DD *
                   7/5  7  12  13
                 /*
                 //  EXEC COPYFILE,FROM=111333,TO=100022,
                 //      PARM=TAPEL
                 //SYSIN   DD *
                   12/9
                 /*


     NOTES:      1. FILES MUST BE COPIED FROM THE INPUT TAPE IN THE
                    SAME ORDER IN WHICH THEY APPEAR, I.E. EACH INPUT
                    FILE NUMBER IS LARGER THAN THE ONE SPECIFIED IN
                    THE PRECEDING CONTROL CARD.

                 2. NORMALLY THE FIRST OUTPUT FILE NUMBER SPECIFIED
                    WOULD BE ONE GREATER THAN THE LAST EXISTING FILE
                    ON THE OUTPUT TAPE. IF IT IS LESS, AN EXISTING
                    FILE WILL BE OVERWRITTEN. IF IT IS MORE, THE
                    TAPE WILL RUN OFF ITS REEL BY THE PROGRAM
                    SEARCHING FOR THE RIGHT STARTING POINT.

                 3. THE REGION REQUIRED IS 33K PLUS FIVE TIMES
                    ( MVT IS TWO TIMES ) THE LARGEST BLKSIZE OF
                    THE FILES COPIED. THE COPY TIME IS SUBSTANTIALLY
                    LESS THAN 1 MINUTE.

                 4. THE INPUT AND OUTPUT TAPES MUST HAVE STANDARD
                    LABELS.

                 5. DATASETS WITH ANY DCB PARAMETERS WILL BE COPIED
                    SUCCESSFULLY, EVEN IF THEY VARY FROM FILE TO FILE.
                    DCB PARAMETERS SHOULD NOT BE SPECIFIED AS AN
                    OVERRIDE TO THE PROCEDURE.


                 6. THE OUTPUT FILES SHOULD NOT BE CATALOGED VIA JCL.
                    EVEN THOUGH THE JOB CALLS FOR SL SCRATCH, IT APPEARS
                    THAT THE HEADER IS DESTROYED WHEN THE KEEP MSG
                    HAS L00100 ( EXAMPLE ) AS IF IT WAS A NL TAPE.
                    NEVER FEAR, THE OUTPUT LABEL IS INTACT.

               ADDENDUM TO THE COPYFILE PROGRAM
               --------------------------------


    THE WORD 'ALL' MAY NOW BE USED ON CONTROL CARDS. IT CAUSES THE REST
  THE FILES ON THE INPUT TAPE TO BE COPIED TO THE OUTPUT TAPE.


   EXAMPLES:

   1. COPY ALL FILES FROM TAPE 100035 TO A NEW SCRATCH TAPE.

      //  EXEC COPYFILE,FROM=100035
      //SYSIN  DD *
        ALL
      /*

   2. COPY FILES 3, 5, AND 7 THROUGH THE END OF THE TAPE TO A NEW
      SCRATCH TAPE.

     //  EXEC COPYFILE,FROM=100035
      //SYSIN   DD *
       3  5  7  ALL
      /*

   3. ADD THE FILES FROM TAPE 100035 TO TAPE 100070 AFTER EXIST-
      ING FILE 8.

      //  EXEC COPYFILE,FROM=100035,TO=100070
      //SYSIN  DD *
       1/9  ALL
      /*

   4. ADD FILES 3 AND 5 THROUGH 12 ( THAT IS ALL THERE ARE ) FROM
      TAPE 100035 TO TAPE 100050 WHICH ALREADY CONTAINS THREE
      FILES WHICH ARE TO BE KEPT.

      //  EXEC COPYFILE,FROM=100035,TO=100050
      //SYSIN    DD *
       3/4  5  ALL
      /*


     REGION REQUIREMENTS:
     ------------------

     THE REGION SIZE REQUIRED IS 18K PLUS FIVE TIMES ( MVT IS
   TWO TIMES ) THE LARGEST BLKSIZE BEING COPIED.

     NOTE: THE TAPEL OUTPUT FROM COPYFILE CONTAINS ONLY THOSE
           FILES WHICH HAVE BEEN COPIED. FILE NUMBERS LOWER
           THAN THE FIRST FILE NUMBER LISTED ARE STILL ON
          THE TAPE.

