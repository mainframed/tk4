./ ADD NAME=MIGCICS1 0106-92002-92009-1228-00209-00190-00000-DMV0016
&JC1
&JC2
&JC3
&JC4
&JC5
//*
//* LIB: XCICS.TSOISPF.SKELS(MIGCICS1)
//* GDE: KENNETH E. TOMIAK
//* DOC: THIS JOB WILL CLONE THE CICS ZONE &SRCZNE TO &DESTZNE..
//*
//* HST: GENERATED ON &SYSID ON &ZJDATE &ZDATE AT &ZTIME..
//*
)CM   -------------------------
)CM   BACKUP ON REQUEST ONLY!!!
)CM   -------------------------
)SEL &BACKUP EQ Y
//***********************************************************
//*      UNCATALOG THE OLD BACKUP                           *
//***********************************************************
//SCRAPIT EXEC PGM=IDCAMS,COND=(0,LT),
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  DELETE XCICS.BACKUP.LVL&OLDLV..&PROD NOSCRATCH
  SET MAXCC = 0
//***********************************************************
//*      TAKE A BACKUP                                      *
//***********************************************************
//BACKUP  EXEC PGM=ADRDSSU,COND=(0,LT),
//             REGION=8192K,TIME=1200
//TAPE1    DD  DSN=XCICS.BACKUP.LVL&LV..&PROD.,UNIT=3480,
//             LABEL=(1,SL,EXPDT=99000),DISP=(NEW,CATLG),
//             VOL=(,,,20),
//             DCB=(TRTCH=NOCOMP)
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 DUMP -
    OUTDDNAME(TAPE1) -
    DATASET(INCLUDE(XCICS.&SRCZNE..**, -
           ) -
    ) -
    TOLERATE(ENQFAILURE) -
    ALLDATA(*) ALLEXCP
/*
//***********************************************************
//*      DOCUMENT TARGET BACKUP                             *
//***********************************************************
//DOCBKP  EXEC PGM=IKJEFT01,DYNAMNBR=35,
//             REGION=8192K,TIME=1200,
//             PARM=('%BATCH DOCBKP PARMA(&SRCZNE)',
//             'PARMB(&DESTZNE) PARMC(B&PROD) PARMD(&LV)')
//SYSTSPRT DD  SYSOUT=*
//SYSTSIN  DD  DUMMY
//SYSPROC  DD  DISP=SHR,DSN=XCICS.TSOISPF.CLIST
//ISPLIST  DD  SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1210,LRECL=121)
//ISPLOG   DD  SYSOUT=*,DCB=(RECFM=VA,BLKSIZE=129,LRECL=125)
//ISPPROF  DD  DISP=(NEW,DELETE,DELETE),DSN=&&PROFILE,
//             UNIT=SYSALLDA,SPACE=(TRK,(1,1,5)),
//             DCB=(RECFM=FB,BLKSIZE=3120,LRECL=80)
//ISPLLIB  DD  DISP=SHR,DSN=ISR.ISRLOAD
//         DD  DISP=SHR,DSN=ISP.ISPLOAD
//ISPPLIB  DD  DISP=SHR,DSN=ISR.ISRPENU
//         DD  DISP=SHR,DSN=ISP.ISPPENU
//ISPMLIB  DD  DISP=SHR,DSN=ISR.ISRMENU
//         DD  DISP=SHR,DSN=ISP.ISPMENU
//ISPSLIB  DD  DISP=SHR,DSN=ISR.ISRSENU
//         DD  DISP=SHR,DSN=ISP.ISPSLIB
//ISPTLIB  DD  DISP=SHR,DSN=ISR.ISRTLIB
//         DD  DISP=SHR,DSN=ISP.ISPTENU
)ENDSEL
)SEL &DFOUND = Y
//***********************************************************
//*  DELETE AN ENTRY FROM THE GZONE ZONEINDEX               *
//***********************************************************
//ZONEDEL EXEC PGM=GIMSMP,COND=(0,LT),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=XCICS.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      DEL GLOBALZONE ZONEINDEX((&DESTZNE)) .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*      DELETE THE OLD TARGET ZONE IF IT EXISTS            *
//***********************************************************
//DELCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
    DELETE XCICS.&DESTZNE..*
  SET MAXCC = 0
/*
)ENDSEL
//***********************************************************
//*      DEFINE THE NEW TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//DEFCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  DEFINE CLUSTER( -
                 NAME(XCICS.&DESTZNE..CSI) -
                 MODEL(XCICS.&SRCZNE..CSI) -
                 VOLUMES(&DSTVOL) -
                ) -
         DATA( -
                 NAME(XCICS.&DESTZNE..CSI.DATA) -
                 CYLINDERS(10 2) -
                ) -
         INDEX( -
                 NAME(XCICS.&DESTZNE..CSI.INDEX) -
                 CYLINDERS(1 1) -
                )
/*
//***********************************************************
//*      INITIALIZE THE TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//ZPOOL   EXEC PGM=IDCAMS,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//TZONE    DD  DSN=XCICS.&DESTZNE..CSI,DISP=OLD
//ZPOOL    DD  DSN=SYS1.MACLIB(GIMZPOOL),DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  REPRO INFILE(ZPOOL) OUTFILE(TZONE)
/*
//***********************************************************
//*  ADD AN ENTRY TO THE GZONE ZONEINDEX                    *
//***********************************************************
//ZONEADD EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=XCICS.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      ADD GLOBALZONE
          ZONEINDEX((&DESTZNE,XCICS.&DESTZNE..CSI,TARGET))
      .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*  ZONECOPY TO THE NEW VOLUME TARGET ZONE                 *
//***********************************************************
//ZONECPY EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1439
//SMPCSI   DD  DSN=XCICS.GLOBAL.CSI,DISP=SHR
//SMPLOG   DD  DSN=XCICS.GLOBAL.SMPLOG,DISP=MOD
//SMPOUT   DD  SYSOUT=*
//SMPRPT   DD  SYSOUT=*
//SYSPRINT DD  SYSOUT=*
//SMPCNTL  DD  *
  SET BDY(&DESTZNE) .
    ZONECOPY (&SRCZNE) INTO(&DESTZNE) .
    ZONEEDIT DDDEF.
      CHANGE DATASET(XCICS.&SRCZNE..*,XCICS.&DESTZNE..*) .
    ENDZONEEDIT.
/*
//***********************************************************
//*  DFDSS CLONE THE TARGET DATASETS                        *
//***********************************************************
//COPYDSN EXEC PGM=ADRDSSU,REGION=6144K,TIME=1200,
//             PARM='',COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//&DSTVOL   DD  UNIT=SYSALLDA,VOL=SER=&DSTVOL,DISP=SHR
//SYSIN    DD  *
 COPY -
    OUTDDNAME(&DSTVOL) -
    DATASET(INCLUDE(XCICS.&SRCZNE..**, -
           ) -
            BY(DSORG,NE,VSAM) -
    ) -
    RENAMEUNC((XCICS.&SRCZNE..**,XCICS.&DESTZNE..**)) -
    TOLERATE(ENQFAILURE) -
    ALLDATA(*) ALLEXCP -
    CATALOG
 IF LASTCC = 4 THEN SET MAXCC = 0
/*
//***********************************************************
//*      DOCUMENT CLONE                                     *
//***********************************************************
//DOCCLN  EXEC PGM=IKJEFT01,DYNAMNBR=35,
//             REGION=8192K,TIME=1200,
//             COND=(0,LT),
//             PARM=('%BATCH DOCTGT PARMA(&SRCZNE)',
//             'PARMB(&DESTZNE) PARMC(&LV)')
//SYSTSPRT DD  SYSOUT=*
//SYSTSIN  DD  DUMMY
//SYSPROC  DD  DISP=SHR,DSN=XCICS.TSOISPF.CLIST
//ISPLIST  DD  SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1210,LRECL=121)
//ISPLOG   DD  SYSOUT=*,DCB=(RECFM=VA,BLKSIZE=129,LRECL=125)
//ISPPROF  DD  DISP=(NEW,DELETE,DELETE),DSN=&&PROFILE,
//             UNIT=SYSALLDA,SPACE=(TRK,(1,1,5)),
//             DCB=(RECFM=FB,BLKSIZE=3120,LRECL=80)
//ISPLLIB  DD  DISP=SHR,DSN=ISR.ISRLOAD
//         DD  DISP=SHR,DSN=ISP.ISPLOAD
//ISPPLIB  DD  DISP=SHR,DSN=ISR.ISRPENU
//         DD  DISP=SHR,DSN=ISP.ISPPENU
//ISPMLIB  DD  DISP=SHR,DSN=ISR.ISRMENU
//         DD  DISP=SHR,DSN=ISP.ISPMENU
//ISPSLIB  DD  DISP=SHR,DSN=ISR.ISRSENU
//         DD  DISP=SHR,DSN=ISP.ISPSLIB
//ISPTLIB  DD  DISP=SHR,DSN=ISR.ISRTLIB
//         DD  DISP=SHR,DSN=ISP.ISPTENU
./ ADD NAME=MIGDRS1  0101-92002-92002-1324-00190-00190-00000-DMV0016
&JC1
&JC2
&JC3
&JC4
&JC5
//*
//* LIB: XDRS.TSOISPF.SKELS(MIGDRS1)
//* GDE: KENNETH E. TOMIAK
//* DOC: THIS JOB WILL CLONE THE DRS ZONE &SRCZNE TO &DESTZNE..
//*
)SEL &DFOUND = Y
//***********************************************************
//*  DELETE AN ENTRY FROM THE GZONE ZONEINDEX               *
//***********************************************************
//ZONEDEL EXEC PGM=GIMSMP,COND=(0,LT),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=DRSMPE.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      DEL GLOBALZONE ZONEINDEX((&DESTZNE)) .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*      DELETE THE OLD TARGET ZONE IF IT EXISTS            *
//***********************************************************
//DELCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
    DELETE &SKELDEST..SDGOCLIB
    DELETE &SKELDEST..SDGOLMD0
    DELETE &SKELDEST..SDGOMLIB
    DELETE &SKELDEST..SDGOPLIB
    DELETE &SKELDEST..SDGOSLIB
    DELETE &SKELDEST..SDGOTLIB
    DELETE &SKELDEST..DSNCLIST
    DELETE &SKELDEST..DSNEXIT
    DELETE &SKELDEST..DSNHELP
    DELETE &SKELDEST..DSNLINK
    DELETE &SKELDEST..DSNLOAD
    DELETE &SKELDEST..DSNMACS
    DELETE &SKELDEST..DSNSAMP
    DELETE &SKELDEST..DSNSPFM
    DELETE &SKELDEST..DSNSPFP
    DELETE &SKELDEST..DVRDATAE
    DELETE &SKELDEST..DVRDBRM
    DELETE &SKELDEST..DVRINTER
    DELETE &SKELDEST..DVRJEDIE
    DELETE &SKELDEST..DVRLOAD
    DELETE &SKELDEST..DVRMLIBE
    DELETE &SKELDEST..DVRPFPSE
    DELETE &SKELDEST..DVRPLIBE
    DELETE &SKELDEST..DVRPVPSE
    DELETE &SKELDEST..DVRSAMPE
    DELETE &SKELDEST..DVRSLIBE
    DELETE &SKELDEST..DVRTADME
    DELETE &SKELDEST..DVRTLIBE
    DELETE &SKELDEST..RLRESLIB
    DELETE &SKELDEST..DSQCHART
    DELETE &SKELDEST..DSQCLSTE
    DELETE &SKELDEST..DSQCLSTU
    DELETE &SKELDEST..DSQDBRM
    DELETE &SKELDEST..DSQEXECE
    DELETE &SKELDEST..DSQEXECU
    DELETE &SKELDEST..DSQLOAD
    DELETE &SKELDEST..DSQMAPE
    DELETE &SKELDEST..DSQMAPU
    DELETE &SKELDEST..DSQMLIBE
    DELETE &SKELDEST..DSQMLIBU
    DELETE &SKELDEST..DSQPLIBE
    DELETE &SKELDEST..DSQPLIBU
    DELETE &SKELDEST..DSQSAMPE
    DELETE &SKELDEST..DSQSAMPU
    DELETE &SKELDEST..DSQSLIBE
    DELETE &SKELDEST..DSQTLIBE
    DELETE &SKELDEST..DSQTLIBU
    DELETE &SKELDEST..SMPLOG
    DELETE &SKELDEST..SMPLOGA
    DELETE &SKELDEST..SMPMTS
    DELETE &SKELDEST..SMPPUNCH
    DELETE &SKELDEST..SMPSCDS
    DELETE &SKELDEST..SMPSTS
    DELETE &SKELDEST..CSI
  SET MAXCC = 0
/*
)ENDSEL
//***********************************************************
//*      DEFINE THE NEW TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//DEFCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  DEFINE CLUSTER( -
                 NAME(&SKELDEST..CSI) -
                 MODEL(&SKELSRC..CSI) -
                 VOLUMES(HRA001) -
                ) -
         DATA( -
                 NAME(&SKELDEST..CSI.DATA) -
                 CYLINDERS(5 5) -
                ) -
         INDEX( -
                 NAME(&SKELDEST..CSI.INDEX) -
                 TRACKS(10 2) -
                )
/*
//***********************************************************
//*      INITIALIZE THE TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//ZPOOL   EXEC PGM=IDCAMS,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//TZONE    DD  DSN=&SKELDEST..CSI,DISP=OLD
//ZPOOL    DD  DSN=SYS1.MACLIB(GIMZPOOL),DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  REPRO INFILE(ZPOOL) OUTFILE(TZONE)
/*
//***********************************************************
//*  ADD AN ENTRY TO THE GZONE ZONEINDEX                    *
//***********************************************************
//ZONEADD EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=DRSMPE.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      ADD GLOBALZONE
          ZONEINDEX((&DESTZNE,&SKELDEST..CSI,TARGET))
      .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*  ZONECOPY TO THE NEW VOLUME TARGET ZONE                 *
//***********************************************************
//ZONECPY EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1439
//SMPCSI   DD  DSN=DRSMPE.GLOBAL.CSI,DISP=SHR
//SMPLOG   DD  DSN=DRSMPE.SMPLOG,DISP=MOD
//SMPOUT   DD  SYSOUT=*
//SMPRPT   DD  SYSOUT=*
//SYSPRINT DD  SYSOUT=*
//SMPCNTL  DD  *
  SET BDY(&DESTZNE) .
    ZONECOPY (&SRCZNE) INTO(&DESTZNE) .
    UCLIN .
      REP TZONE(&DESTZNE)
        RELATED(DBSEDLB) .
    ENDUCL  .
    ZONEEDIT DDDEF.
      CHANGE DATASET(&SKELSRC..*,&SKELDEST..*) .
    ENDZONEEDIT.
/*
//***********************************************************
//*  DFDSS CLONE THE TARGET DATASETS                        *
//***********************************************************
//COPYDSN EXEC PGM=ADRDSSU,REGION=6144K,TIME=1200,
//             PARM='',COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//HRA001   DD  UNIT=SYSALLDA,VOL=SER=HRA001,DISP=SHR
//SYSIN    DD  *
 COPY -
    OUTDDNAME(HRA001) -
    DATASET(INCLUDE(&SKELSRC..**, -
           ) -
            BY(DSORG,NE,VSAM) -
    ) -
    RENAMEUNC((&SKELSRC..**,&DFDSSDST..**)) -
    TOLERATE(ENQFAILURE) -
    ALLDATA(*) ALLEXCP -
    CATALOG
/*
//***********************************************************
//*  IDCAMS ALTERS TO GET TRUE NAMES                        *
//***********************************************************
//FIXNAME EXEC PGM=IDCAMS,REGION=2048K,TIME=1200,COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 /*                                  */
  ALTER &DFDSSDST..LOADLIB +
    NEWNAME(&SKELDEST..LOADLIB)
/*
//
./ ADD NAME=MIGMIGR1 0101-92002-92002-1324-00190-00190-00000-DMV0016
&JC1
&JC2
&JC3
&JC4
&JC5
//*
//* LIB: XMIGR.TSOISPF.SKELS(MIGMIGR1)
//* GDE: KENNETH E. TOMIAK
//* DOC: THIS JOB WILL CLONE THE MIGR ZONE &SRCZNE TO &DESTZNE..
//*
)SEL &DFOUND = Y
//***********************************************************
//*  DELETE AN ENTRY FROM THE GZONE ZONEINDEX               *
//***********************************************************
//ZONEDEL EXEC PGM=GIMSMP,COND=(0,LT),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=MIGRMPE.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      DEL GLOBALZONE ZONEINDEX((&DESTZNE)) .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*      DELETE THE OLD TARGET ZONE IF IT EXISTS            *
//***********************************************************
//DELCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
    DELETE &SKELDEST..SDGOCLIB
    DELETE &SKELDEST..SDGOLMD0
    DELETE &SKELDEST..SDGOMLIB
    DELETE &SKELDEST..SDGOPLIB
    DELETE &SKELDEST..SDGOSLIB
    DELETE &SKELDEST..SDGOTLIB
    DELETE &SKELDEST..DSNCLIST
    DELETE &SKELDEST..DSNEXIT
    DELETE &SKELDEST..DSNHELP
    DELETE &SKELDEST..DSNLINK
    DELETE &SKELDEST..DSNLOAD
    DELETE &SKELDEST..DSNMACS
    DELETE &SKELDEST..DSNSAMP
    DELETE &SKELDEST..DSNSPFM
    DELETE &SKELDEST..DSNSPFP
    DELETE &SKELDEST..DVRDATAE
    DELETE &SKELDEST..DVRDBRM
    DELETE &SKELDEST..DVRINTER
    DELETE &SKELDEST..DVRJEDIE
    DELETE &SKELDEST..DVRLOAD
    DELETE &SKELDEST..DVRMLIBE
    DELETE &SKELDEST..DVRPFPSE
    DELETE &SKELDEST..DVRPLIBE
    DELETE &SKELDEST..DVRPVPSE
    DELETE &SKELDEST..DVRSAMPE
    DELETE &SKELDEST..DVRSLIBE
    DELETE &SKELDEST..DVRTADME
    DELETE &SKELDEST..DVRTLIBE
    DELETE &SKELDEST..RLRESLIB
    DELETE &SKELDEST..DSQCHART
    DELETE &SKELDEST..DSQCLSTE
    DELETE &SKELDEST..DSQCLSTU
    DELETE &SKELDEST..DSQDBRM
    DELETE &SKELDEST..DSQEXECE
    DELETE &SKELDEST..DSQEXECU
    DELETE &SKELDEST..DSQLOAD
    DELETE &SKELDEST..DSQMAPE
    DELETE &SKELDEST..DSQMAPU
    DELETE &SKELDEST..DSQMLIBE
    DELETE &SKELDEST..DSQMLIBU
    DELETE &SKELDEST..DSQPLIBE
    DELETE &SKELDEST..DSQPLIBU
    DELETE &SKELDEST..DSQSAMPE
    DELETE &SKELDEST..DSQSAMPU
    DELETE &SKELDEST..DSQSLIBE
    DELETE &SKELDEST..DSQTLIBE
    DELETE &SKELDEST..DSQTLIBU
    DELETE &SKELDEST..SMPLOG
    DELETE &SKELDEST..SMPLOGA
    DELETE &SKELDEST..SMPMTS
    DELETE &SKELDEST..SMPPUNCH
    DELETE &SKELDEST..SMPSCDS
    DELETE &SKELDEST..SMPSTS
    DELETE &SKELDEST..CSI
  SET MAXCC = 0
/*
)ENDSEL
//***********************************************************
//*      DEFINE THE NEW TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//DEFCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  DEFINE CLUSTER( -
                 NAME(&SKELDEST..CSI) -
                 MODEL(&SKELSRC..CSI) -
                 VOLUMES(HRA001) -
                ) -
         DATA( -
                 NAME(&SKELDEST..CSI.DATA) -
                 CYLINDERS(5 5) -
                ) -
         INDEX( -
                 NAME(&SKELDEST..CSI.INDEX) -
                 TRACKS(10 2) -
                )
/*
//***********************************************************
//*      INITIALIZE THE TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//ZPOOL   EXEC PGM=IDCAMS,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//TZONE    DD  DSN=&SKELDEST..CSI,DISP=OLD
//ZPOOL    DD  DSN=SYS1.MACLIB(GIMZPOOL),DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  REPRO INFILE(ZPOOL) OUTFILE(TZONE)
/*
//***********************************************************
//*  ADD AN ENTRY TO THE GZONE ZONEINDEX                    *
//***********************************************************
//ZONEADD EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=MIGRMPE.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      ADD GLOBALZONE
          ZONEINDEX((&DESTZNE,&SKELDEST..CSI,TARGET))
      .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*  ZONECOPY TO THE NEW VOLUME TARGET ZONE                 *
//***********************************************************
//ZONECPY EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1439
//SMPCSI   DD  DSN=MIGRMPE.GLOBAL.CSI,DISP=SHR
//SMPLOG   DD  DSN=MIGRMPE.SMPLOG,DISP=MOD
//SMPOUT   DD  SYSOUT=*
//SMPRPT   DD  SYSOUT=*
//SYSPRINT DD  SYSOUT=*
//SMPCNTL  DD  *
  SET BDY(&DESTZNE) .
    ZONECOPY (&SRCZNE) INTO(&DESTZNE) .
    UCLIN .
      REP TZONE(&DESTZNE)
        RELATED(DBSEDLB) .
    ENDUCL  .
    ZONEEDIT DDDEF.
      CHANGE DATASET(&SKELSRC..*,&SKELDEST..*) .
    ENDZONEEDIT.
/*
//***********************************************************
//*  DFDSS CLONE THE TARGET DATASETS                        *
//***********************************************************
//COPYDSN EXEC PGM=ADRDSSU,REGION=6144K,TIME=1200,
//             PARM='',COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//HRA001   DD  UNIT=SYSALLDA,VOL=SER=HRA001,DISP=SHR
//SYSIN    DD  *
 COPY -
    OUTDDNAME(HRA001) -
    DATASET(INCLUDE(&SKELSRC..**, -
           ) -
            BY(DSORG,NE,VSAM) -
    ) -
    RENAMEUNC((&SKELSRC..**,&DFDSSDST..**)) -
    TOLERATE(ENQFAILURE) -
    ALLDATA(*) ALLEXCP -
    CATALOG
/*
//***********************************************************
//*  IDCAMS ALTERS TO GET TRUE NAMES                        *
//***********************************************************
//FIXNAME EXEC PGM=IDCAMS,REGION=2048K,TIME=1200,COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 /*                                  */
  ALTER &DFDSSDST..LOADLIB +
    NEWNAME(&SKELDEST..LOADLIB)
/*
//
./ ADD NAME=MIGOMEG1 0101-92002-92002-1324-00190-00190-00000-DMV0016
&JC1
&JC2
&JC3
&JC4
&JC5
//*
//* LIB: XOMEG.TSOISPF.SKELS(MIGOMEG1)
//* GDE: KENNETH E. TOMIAK
//* DOC: THIS JOB WILL CLONE THE OMEG ZONE &SRCZNE TO &DESTZNE..
//*
)SEL &DFOUND = Y
//***********************************************************
//*  DELETE AN ENTRY FROM THE GZONE ZONEINDEX               *
//***********************************************************
//ZONEDEL EXEC PGM=GIMSMP,COND=(0,LT),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=OMEGMPE.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      DEL GLOBALZONE ZONEINDEX((&DESTZNE)) .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*      DELETE THE OLD TARGET ZONE IF IT EXISTS            *
//***********************************************************
//DELCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
    DELETE &SKELDEST..SDGOCLIB
    DELETE &SKELDEST..SDGOLMD0
    DELETE &SKELDEST..SDGOMLIB
    DELETE &SKELDEST..SDGOPLIB
    DELETE &SKELDEST..SDGOSLIB
    DELETE &SKELDEST..SDGOTLIB
    DELETE &SKELDEST..DSNCLIST
    DELETE &SKELDEST..DSNEXIT
    DELETE &SKELDEST..DSNHELP
    DELETE &SKELDEST..DSNLINK
    DELETE &SKELDEST..DSNLOAD
    DELETE &SKELDEST..DSNMACS
    DELETE &SKELDEST..DSNSAMP
    DELETE &SKELDEST..DSNSPFM
    DELETE &SKELDEST..DSNSPFP
    DELETE &SKELDEST..DVRDATAE
    DELETE &SKELDEST..DVRDBRM
    DELETE &SKELDEST..DVRINTER
    DELETE &SKELDEST..DVRJEDIE
    DELETE &SKELDEST..DVRLOAD
    DELETE &SKELDEST..DVRMLIBE
    DELETE &SKELDEST..DVRPFPSE
    DELETE &SKELDEST..DVRPLIBE
    DELETE &SKELDEST..DVRPVPSE
    DELETE &SKELDEST..DVRSAMPE
    DELETE &SKELDEST..DVRSLIBE
    DELETE &SKELDEST..DVRTADME
    DELETE &SKELDEST..DVRTLIBE
    DELETE &SKELDEST..RLRESLIB
    DELETE &SKELDEST..DSQCHART
    DELETE &SKELDEST..DSQCLSTE
    DELETE &SKELDEST..DSQCLSTU
    DELETE &SKELDEST..DSQDBRM
    DELETE &SKELDEST..DSQEXECE
    DELETE &SKELDEST..DSQEXECU
    DELETE &SKELDEST..DSQLOAD
    DELETE &SKELDEST..DSQMAPE
    DELETE &SKELDEST..DSQMAPU
    DELETE &SKELDEST..DSQMLIBE
    DELETE &SKELDEST..DSQMLIBU
    DELETE &SKELDEST..DSQPLIBE
    DELETE &SKELDEST..DSQPLIBU
    DELETE &SKELDEST..DSQSAMPE
    DELETE &SKELDEST..DSQSAMPU
    DELETE &SKELDEST..DSQSLIBE
    DELETE &SKELDEST..DSQTLIBE
    DELETE &SKELDEST..DSQTLIBU
    DELETE &SKELDEST..SMPLOG
    DELETE &SKELDEST..SMPLOGA
    DELETE &SKELDEST..SMPMTS
    DELETE &SKELDEST..SMPPUNCH
    DELETE &SKELDEST..SMPSCDS
    DELETE &SKELDEST..SMPSTS
    DELETE &SKELDEST..CSI
  SET MAXCC = 0
/*
)ENDSEL
//***********************************************************
//*      DEFINE THE NEW TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//DEFCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  DEFINE CLUSTER( -
                 NAME(&SKELDEST..CSI) -
                 MODEL(&SKELSRC..CSI) -
                 VOLUMES(HRA001) -
                ) -
         DATA( -
                 NAME(&SKELDEST..CSI.DATA) -
                 CYLINDERS(5 5) -
                ) -
         INDEX( -
                 NAME(&SKELDEST..CSI.INDEX) -
                 TRACKS(10 2) -
                )
/*
//***********************************************************
//*      INITIALIZE THE TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//ZPOOL   EXEC PGM=IDCAMS,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//TZONE    DD  DSN=&SKELDEST..CSI,DISP=OLD
//ZPOOL    DD  DSN=SYS1.MACLIB(GIMZPOOL),DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  REPRO INFILE(ZPOOL) OUTFILE(TZONE)
/*
//***********************************************************
//*  ADD AN ENTRY TO THE GZONE ZONEINDEX                    *
//***********************************************************
//ZONEADD EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=OMEGMPE.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      ADD GLOBALZONE
          ZONEINDEX((&DESTZNE,&SKELDEST..CSI,TARGET))
      .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*  ZONECOPY TO THE NEW VOLUME TARGET ZONE                 *
//***********************************************************
//ZONECPY EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1439
//SMPCSI   DD  DSN=OMEGMPE.GLOBAL.CSI,DISP=SHR
//SMPLOG   DD  DSN=OMEGMPE.SMPLOG,DISP=MOD
//SMPOUT   DD  SYSOUT=*
//SMPRPT   DD  SYSOUT=*
//SYSPRINT DD  SYSOUT=*
//SMPCNTL  DD  *
  SET BDY(&DESTZNE) .
    ZONECOPY (&SRCZNE) INTO(&DESTZNE) .
    UCLIN .
      REP TZONE(&DESTZNE)
        RELATED(DBSEDLB) .
    ENDUCL  .
    ZONEEDIT DDDEF.
      CHANGE DATASET(&SKELSRC..*,&SKELDEST..*) .
    ENDZONEEDIT.
/*
//***********************************************************
//*  DFDSS CLONE THE TARGET DATASETS                        *
//***********************************************************
//COPYDSN EXEC PGM=ADRDSSU,REGION=6144K,TIME=1200,
//             PARM='',COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//HRA001   DD  UNIT=SYSALLDA,VOL=SER=HRA001,DISP=SHR
//SYSIN    DD  *
 COPY -
    OUTDDNAME(HRA001) -
    DATASET(INCLUDE(&SKELSRC..**, -
           ) -
            BY(DSORG,NE,VSAM) -
    ) -
    RENAMEUNC((&SKELSRC..**,&DFDSSDST..**)) -
    TOLERATE(ENQFAILURE) -
    ALLDATA(*) ALLEXCP -
    CATALOG
/*
//***********************************************************
//*  IDCAMS ALTERS TO GET TRUE NAMES                        *
//***********************************************************
//FIXNAME EXEC PGM=IDCAMS,REGION=2048K,TIME=1200,COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 /*                                  */
  ALTER &DFDSSDST..LOADLIB +
    NEWNAME(&SKELDEST..LOADLIB)
/*
//
./ ADD NAME=MIGTMON1 0101-92002-92002-1324-00190-00190-00000-DMV0016
&JC1
&JC2
&JC3
&JC4
&JC5
//*
//* LIB: XTMON.TSOISPF.SKELS(MIGTMON1)
//* GDE: KENNETH E. TOMIAK
//* DOC: THIS JOB WILL CLONE THE TMON ZONE &SRCZNE TO &DESTZNE..
//*
)SEL &DFOUND = Y
//***********************************************************
//*  DELETE AN ENTRY FROM THE GZONE ZONEINDEX               *
//***********************************************************
//ZONEDEL EXEC PGM=GIMSMP,COND=(0,LT),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=TMONMPE.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      DEL GLOBALZONE ZONEINDEX((&DESTZNE)) .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*      DELETE THE OLD TARGET ZONE IF IT EXISTS            *
//***********************************************************
//DELCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
    DELETE &SKELDEST..SDGOCLIB
    DELETE &SKELDEST..SDGOLMD0
    DELETE &SKELDEST..SDGOMLIB
    DELETE &SKELDEST..SDGOPLIB
    DELETE &SKELDEST..SDGOSLIB
    DELETE &SKELDEST..SDGOTLIB
    DELETE &SKELDEST..DSNCLIST
    DELETE &SKELDEST..DSNEXIT
    DELETE &SKELDEST..DSNHELP
    DELETE &SKELDEST..DSNLINK
    DELETE &SKELDEST..DSNLOAD
    DELETE &SKELDEST..DSNMACS
    DELETE &SKELDEST..DSNSAMP
    DELETE &SKELDEST..DSNSPFM
    DELETE &SKELDEST..DSNSPFP
    DELETE &SKELDEST..DVRDATAE
    DELETE &SKELDEST..DVRDBRM
    DELETE &SKELDEST..DVRINTER
    DELETE &SKELDEST..DVRJEDIE
    DELETE &SKELDEST..DVRLOAD
    DELETE &SKELDEST..DVRMLIBE
    DELETE &SKELDEST..DVRPFPSE
    DELETE &SKELDEST..DVRPLIBE
    DELETE &SKELDEST..DVRPVPSE
    DELETE &SKELDEST..DVRSAMPE
    DELETE &SKELDEST..DVRSLIBE
    DELETE &SKELDEST..DVRTADME
    DELETE &SKELDEST..DVRTLIBE
    DELETE &SKELDEST..RLRESLIB
    DELETE &SKELDEST..DSQCHART
    DELETE &SKELDEST..DSQCLSTE
    DELETE &SKELDEST..DSQCLSTU
    DELETE &SKELDEST..DSQDBRM
    DELETE &SKELDEST..DSQEXECE
    DELETE &SKELDEST..DSQEXECU
    DELETE &SKELDEST..DSQLOAD
    DELETE &SKELDEST..DSQMAPE
    DELETE &SKELDEST..DSQMAPU
    DELETE &SKELDEST..DSQMLIBE
    DELETE &SKELDEST..DSQMLIBU
    DELETE &SKELDEST..DSQPLIBE
    DELETE &SKELDEST..DSQPLIBU
    DELETE &SKELDEST..DSQSAMPE
    DELETE &SKELDEST..DSQSAMPU
    DELETE &SKELDEST..DSQSLIBE
    DELETE &SKELDEST..DSQTLIBE
    DELETE &SKELDEST..DSQTLIBU
    DELETE &SKELDEST..SMPLOG
    DELETE &SKELDEST..SMPLOGA
    DELETE &SKELDEST..SMPMTS
    DELETE &SKELDEST..SMPPUNCH
    DELETE &SKELDEST..SMPSCDS
    DELETE &SKELDEST..SMPSTS
    DELETE &SKELDEST..CSI
  SET MAXCC = 0
/*
)ENDSEL
//***********************************************************
//*      DEFINE THE NEW TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//DEFCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  DEFINE CLUSTER( -
                 NAME(&SKELDEST..CSI) -
                 MODEL(&SKELSRC..CSI) -
                 VOLUMES(HRA001) -
                ) -
         DATA( -
                 NAME(&SKELDEST..CSI.DATA) -
                 CYLINDERS(5 5) -
                ) -
         INDEX( -
                 NAME(&SKELDEST..CSI.INDEX) -
                 TRACKS(10 2) -
                )
/*
//***********************************************************
//*      INITIALIZE THE TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//ZPOOL   EXEC PGM=IDCAMS,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//TZONE    DD  DSN=&SKELDEST..CSI,DISP=OLD
//ZPOOL    DD  DSN=SYS1.MACLIB(GIMZPOOL),DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  REPRO INFILE(ZPOOL) OUTFILE(TZONE)
/*
//***********************************************************
//*  ADD AN ENTRY TO THE GZONE ZONEINDEX                    *
//***********************************************************
//ZONEADD EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=TMONMPE.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      ADD GLOBALZONE
          ZONEINDEX((&DESTZNE,&SKELDEST..CSI,TARGET))
      .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*  ZONECOPY TO THE NEW VOLUME TARGET ZONE                 *
//***********************************************************
//ZONECPY EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1439
//SMPCSI   DD  DSN=TMONMPE.GLOBAL.CSI,DISP=SHR
//SMPLOG   DD  DSN=TMONMPE.SMPLOG,DISP=MOD
//SMPOUT   DD  SYSOUT=*
//SMPRPT   DD  SYSOUT=*
//SYSPRINT DD  SYSOUT=*
//SMPCNTL  DD  *
  SET BDY(&DESTZNE) .
    ZONECOPY (&SRCZNE) INTO(&DESTZNE) .
    UCLIN .
      REP TZONE(&DESTZNE)
        RELATED(DBSEDLB) .
    ENDUCL  .
    ZONEEDIT DDDEF.
      CHANGE DATASET(&SKELSRC..*,&SKELDEST..*) .
    ENDZONEEDIT.
/*
//***********************************************************
//*  DFDSS CLONE THE TARGET DATASETS                        *
//***********************************************************
//COPYDSN EXEC PGM=ADRDSSU,REGION=6144K,TIME=1200,
//             PARM='',COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//HRA001   DD  UNIT=SYSALLDA,VOL=SER=HRA001,DISP=SHR
//SYSIN    DD  *
 COPY -
    OUTDDNAME(HRA001) -
    DATASET(INCLUDE(&SKELSRC..**, -
           ) -
            BY(DSORG,NE,VSAM) -
    ) -
    RENAMEUNC((&SKELSRC..**,&DFDSSDST..**)) -
    TOLERATE(ENQFAILURE) -
    ALLDATA(*) ALLEXCP -
    CATALOG
/*
//***********************************************************
//*  IDCAMS ALTERS TO GET TRUE NAMES                        *
//***********************************************************
//FIXNAME EXEC PGM=IDCAMS,REGION=2048K,TIME=1200,COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 /*                                  */
  ALTER &DFDSSDST..LOADLIB +
    NEWNAME(&SKELDEST..LOADLIB)
/*
//
./ ADD NAME=MIGVMCF1 0101-92002-92002-1324-00190-00190-00000-DMV0016
&JC1
&JC2
&JC3
&JC4
&JC5
//*
//* LIB: XVMCF.TSOISPF.SKELS(MIGVMCF1)
//* GDE: KENNETH E. TOMIAK
//* DOC: THIS JOB WILL CLONE THE VMCF ZONE &SRCZNE TO &DESTZNE..
//*
)SEL &DFOUND = Y
//***********************************************************
//*  DELETE AN ENTRY FROM THE GZONE ZONEINDEX               *
//***********************************************************
//ZONEDEL EXEC PGM=GIMSMP,COND=(0,LT),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=VMCFMPE.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      DEL GLOBALZONE ZONEINDEX((&DESTZNE)) .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*      DELETE THE OLD TARGET ZONE IF IT EXISTS            *
//***********************************************************
//DELCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
    DELETE &SKELDEST..SDGOCLIB
    DELETE &SKELDEST..SDGOLMD0
    DELETE &SKELDEST..SDGOMLIB
    DELETE &SKELDEST..SDGOPLIB
    DELETE &SKELDEST..SDGOSLIB
    DELETE &SKELDEST..SDGOTLIB
    DELETE &SKELDEST..DSNCLIST
    DELETE &SKELDEST..DSNEXIT
    DELETE &SKELDEST..DSNHELP
    DELETE &SKELDEST..DSNLINK
    DELETE &SKELDEST..DSNLOAD
    DELETE &SKELDEST..DSNMACS
    DELETE &SKELDEST..DSNSAMP
    DELETE &SKELDEST..DSNSPFM
    DELETE &SKELDEST..DSNSPFP
    DELETE &SKELDEST..DVRDATAE
    DELETE &SKELDEST..DVRDBRM
    DELETE &SKELDEST..DVRINTER
    DELETE &SKELDEST..DVRJEDIE
    DELETE &SKELDEST..DVRLOAD
    DELETE &SKELDEST..DVRMLIBE
    DELETE &SKELDEST..DVRPFPSE
    DELETE &SKELDEST..DVRPLIBE
    DELETE &SKELDEST..DVRPVPSE
    DELETE &SKELDEST..DVRSAMPE
    DELETE &SKELDEST..DVRSLIBE
    DELETE &SKELDEST..DVRTADME
    DELETE &SKELDEST..DVRTLIBE
    DELETE &SKELDEST..RLRESLIB
    DELETE &SKELDEST..DSQCHART
    DELETE &SKELDEST..DSQCLSTE
    DELETE &SKELDEST..DSQCLSTU
    DELETE &SKELDEST..DSQDBRM
    DELETE &SKELDEST..DSQEXECE
    DELETE &SKELDEST..DSQEXECU
    DELETE &SKELDEST..DSQLOAD
    DELETE &SKELDEST..DSQMAPE
    DELETE &SKELDEST..DSQMAPU
    DELETE &SKELDEST..DSQMLIBE
    DELETE &SKELDEST..DSQMLIBU
    DELETE &SKELDEST..DSQPLIBE
    DELETE &SKELDEST..DSQPLIBU
    DELETE &SKELDEST..DSQSAMPE
    DELETE &SKELDEST..DSQSAMPU
    DELETE &SKELDEST..DSQSLIBE
    DELETE &SKELDEST..DSQTLIBE
    DELETE &SKELDEST..DSQTLIBU
    DELETE &SKELDEST..SMPLOG
    DELETE &SKELDEST..SMPLOGA
    DELETE &SKELDEST..SMPMTS
    DELETE &SKELDEST..SMPPUNCH
    DELETE &SKELDEST..SMPSCDS
    DELETE &SKELDEST..SMPSTS
    DELETE &SKELDEST..CSI
  SET MAXCC = 0
/*
)ENDSEL
//***********************************************************
//*      DEFINE THE NEW TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//DEFCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  DEFINE CLUSTER( -
                 NAME(&SKELDEST..CSI) -
                 MODEL(&SKELSRC..CSI) -
                 VOLUMES(HRA001) -
                ) -
         DATA( -
                 NAME(&SKELDEST..CSI.DATA) -
                 CYLINDERS(5 5) -
                ) -
         INDEX( -
                 NAME(&SKELDEST..CSI.INDEX) -
                 TRACKS(10 2) -
                )
/*
//***********************************************************
//*      INITIALIZE THE TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//ZPOOL   EXEC PGM=IDCAMS,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//TZONE    DD  DSN=&SKELDEST..CSI,DISP=OLD
//ZPOOL    DD  DSN=SYS1.MACLIB(GIMZPOOL),DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  REPRO INFILE(ZPOOL) OUTFILE(TZONE)
/*
//***********************************************************
//*  ADD AN ENTRY TO THE GZONE ZONEINDEX                    *
//***********************************************************
//ZONEADD EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=VMCFMPE.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      ADD GLOBALZONE
          ZONEINDEX((&DESTZNE,&SKELDEST..CSI,TARGET))
      .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*  ZONECOPY TO THE NEW VOLUME TARGET ZONE                 *
//***********************************************************
//ZONECPY EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1439
//SMPCSI   DD  DSN=VMCFMPE.GLOBAL.CSI,DISP=SHR
//SMPLOG   DD  DSN=VMCFMPE.SMPLOG,DISP=MOD
//SMPOUT   DD  SYSOUT=*
//SMPRPT   DD  SYSOUT=*
//SYSPRINT DD  SYSOUT=*
//SMPCNTL  DD  *
  SET BDY(&DESTZNE) .
    ZONECOPY (&SRCZNE) INTO(&DESTZNE) .
    UCLIN .
      REP TZONE(&DESTZNE)
        RELATED(DBSEDLB) .
    ENDUCL  .
    ZONEEDIT DDDEF.
      CHANGE DATASET(&SKELSRC..*,&SKELDEST..*) .
    ENDZONEEDIT.
/*
//***********************************************************
//*  DFDSS CLONE THE TARGET DATASETS                        *
//***********************************************************
//COPYDSN EXEC PGM=ADRDSSU,REGION=6144K,TIME=1200,
//             PARM='',COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//HRA001   DD  UNIT=SYSALLDA,VOL=SER=HRA001,DISP=SHR
//SYSIN    DD  *
 COPY -
    OUTDDNAME(HRA001) -
    DATASET(INCLUDE(&SKELSRC..**, -
           ) -
            BY(DSORG,NE,VSAM) -
    ) -
    RENAMEUNC((&SKELSRC..**,&DFDSSDST..**)) -
    TOLERATE(ENQFAILURE) -
    ALLDATA(*) ALLEXCP -
    CATALOG
/*
//***********************************************************
//*  IDCAMS ALTERS TO GET TRUE NAMES                        *
//***********************************************************
//FIXNAME EXEC PGM=IDCAMS,REGION=2048K,TIME=1200,COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 /*                                  */
  ALTER &DFDSSDST..LOADLIB +
    NEWNAME(&SKELDEST..LOADLIB)
/*
//
./ ADD NAME=OLDCICS1 0100-92016-92016-1455-00209-00209-00000-DMV0016
&JC1
&JC2
&JC3
&JC4
&JC5
//*
//* LIB: XCICS.TSOISPF.SKELS(MIGCICS1)
//* GDE: KENNETH E. TOMIAK
//* DOC: THIS JOB WILL CLONE THE CICS ZONE &SRCZNE TO &DESTZNE..
//*
//* HST: GENERATED ON &SYSID ON &ZJDATE &ZDATE AT &ZTIME..
//*
)CM   -------------------------
)CM   BACKUP ON REQUEST ONLY!!!
)CM   -------------------------
)SEL &BACKUP EQ Y
//***********************************************************
//*      UNCATALOG THE OLD BACKUP                           *
//***********************************************************
//SCRAPIT EXEC PGM=IDCAMS,COND=(0,LT),
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  DELETE XCICS.BACKUP.LVL&OLDLV..&PROD NOSCRATCH
  SET MAXCC = 0
//***********************************************************
//*      TAKE A BACKUP                                      *
//***********************************************************
//BACKUP  EXEC PGM=ADRDSSU,COND=(0,LT),
//             REGION=8192K,TIME=1200
//TAPE1    DD  DSN=XCICS.BACKUP.LVL&LV..&PROD.,UNIT=3480,
//             LABEL=(1,SL,EXPDT=99000),DISP=(NEW,CATLG),
//             VOL=(,,,20),
//             DCB=(TRTCH=NOCOMP)
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 DUMP -
    OUTDDNAME(TAPE1) -
    DATASET(INCLUDE(XCICS.&SRCZNE..**, -
           ) -
    ) -
    TOLERATE(ENQFAILURE) -
    ALLDATA(*) ALLEXCP
/*
//***********************************************************
//*      DOCUMENT TARGET BACKUP                             *
//***********************************************************
//DOCBKP  EXEC PGM=IKJEFT01,DYNAMNBR=35,
//             REGION=8192K,TIME=1200,
//             PARM=('%BATCH DOCBKP PARMA(&SRCZNE)',
//             'PARMB(&DESTZNE) PARMC(B&PROD) PARMD(&LV)')
//SYSTSPRT DD  SYSOUT=*
//SYSTSIN  DD  DUMMY
//SYSPROC  DD  DISP=SHR,DSN=XCICS.TSOISPF.CLIST
//ISPLIST  DD  SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1210,LRECL=121)
//ISPLOG   DD  SYSOUT=*,DCB=(RECFM=VA,BLKSIZE=129,LRECL=125)
//ISPPROF  DD  DISP=(NEW,DELETE,DELETE),DSN=&&PROFILE,
//             UNIT=SYSALLDA,SPACE=(TRK,(1,1,5)),
//             DCB=(RECFM=FB,BLKSIZE=3120,LRECL=80)
//ISPLLIB  DD  DISP=SHR,DSN=ISR.ISRLOAD
//         DD  DISP=SHR,DSN=ISP.ISPLOAD
//ISPPLIB  DD  DISP=SHR,DSN=ISR.ISRPENU
//         DD  DISP=SHR,DSN=ISP.ISPPENU
//ISPMLIB  DD  DISP=SHR,DSN=ISR.ISRMENU
//         DD  DISP=SHR,DSN=ISP.ISPMENU
//ISPSLIB  DD  DISP=SHR,DSN=ISR.ISRSENU
//         DD  DISP=SHR,DSN=ISP.ISPSLIB
//ISPTLIB  DD  DISP=SHR,DSN=ISR.ISRTLIB
//         DD  DISP=SHR,DSN=ISP.ISPTENU
)ENDSEL
)SEL &DFOUND = Y
//***********************************************************
//*  DELETE AN ENTRY FROM THE GZONE ZONEINDEX               *
//***********************************************************
//ZONEDEL EXEC PGM=GIMSMP,COND=(0,LT),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=XCICS.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      DEL GLOBALZONE ZONEINDEX((&DESTZNE)) .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*      DELETE THE OLD TARGET ZONE IF IT EXISTS            *
//***********************************************************
//DELCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
    DELETE XCICS.&DESTZNE..*
  SET MAXCC = 0
/*
)ENDSEL
//***********************************************************
//*      DEFINE THE NEW TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//DEFCSI  EXEC PGM=IDCAMS,
//             REGION=8192K,TIME=1200
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  DEFINE CLUSTER( -
                 NAME(XCICS.&DESTZNE..CSI) -
                 MODEL(XCICS.&SRCZNE..CSI) -
                 VOLUMES(&DSTVOL) -
                ) -
         DATA( -
                 NAME(XCICS.&DESTZNE..CSI.DATA) -
                 CYLINDERS(10 2) -
                ) -
         INDEX( -
                 NAME(XCICS.&DESTZNE..CSI.INDEX) -
                 CYLINDERS(1 1) -
                )
/*
//***********************************************************
//*      INITIALIZE THE TARGET ZONE ON THE NEW VOLUME       *
//***********************************************************
//ZPOOL   EXEC PGM=IDCAMS,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//TZONE    DD  DSN=XCICS.&DESTZNE..CSI,DISP=OLD
//ZPOOL    DD  DSN=SYS1.MACLIB(GIMZPOOL),DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
  REPRO INFILE(ZPOOL) OUTFILE(TZONE)
/*
//***********************************************************
//*  ADD AN ENTRY TO THE GZONE ZONEINDEX                    *
//***********************************************************
//ZONEADD EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1200
//SMPRPT   DD  SYSOUT=*
//SMPOUT   DD  SYSOUT=*
//SMPCSI   DD  DSN=XCICS.GLOBAL.CSI,DISP=OLD
//SMPCNTL  DD  *
  SET BDY(GLOBAL) .
    UCLIN.
      ADD GLOBALZONE
          ZONEINDEX((&DESTZNE,XCICS.&DESTZNE..CSI,TARGET))
      .
    ENDUCL.
  RESETRC.
/*
//***********************************************************
//*  ZONECOPY TO THE NEW VOLUME TARGET ZONE                 *
//***********************************************************
//ZONECPY EXEC PGM=GIMSMP,COND=(0,NE,DEFCSI),
//             REGION=8192K,TIME=1439
//SMPCSI   DD  DSN=XCICS.GLOBAL.CSI,DISP=SHR
//SMPLOG   DD  DSN=XCICS.GLOBAL.SMPLOG,DISP=MOD
//SMPOUT   DD  SYSOUT=*
//SMPRPT   DD  SYSOUT=*
//SYSPRINT DD  SYSOUT=*
//SMPCNTL  DD  *
  SET BDY(&DESTZNE) .
    ZONECOPY (&SRCZNE) INTO(&DESTZNE) .
    ZONEEDIT DDDEF.
      CHANGE DATASET(XCICS.&SRCZNE..*,XCICS.&DESTZNE..*) .
    ENDZONEEDIT.
/*
//***********************************************************
//*  DFDSS CLONE THE TARGET DATASETS                        *
//***********************************************************
//COPYDSN EXEC PGM=ADRDSSU,REGION=6144K,TIME=1200,
//             PARM='',COND=(0,NE,DEFCSI)
//SYSPRINT DD  SYSOUT=*
//&DSTVOL   DD  UNIT=SYSALLDA,VOL=SER=&DSTVOL,DISP=SHR
//SYSIN    DD  *
 COPY -
    OUTDDNAME(&DSTVOL) -
    DATASET(INCLUDE(XCICS.&SRCZNE..**, -
           ) -
            BY(DSORG,NE,VSAM) -
    ) -
    RENAMEUNC((XCICS.&SRCZNE..**,XCICS.&DESTZNE..**)) -
    TOLERATE(ENQFAILURE) -
    ALLDATA(*) ALLEXCP -
    CATALOG
 IF LASTCC = 4 THEN SET MAXCC = 0
/*
//***********************************************************
//*      DOCUMENT CLONE                                     *
//***********************************************************
//DOCCLN  EXEC PGM=IKJEFT01,DYNAMNBR=35,
//             REGION=8192K,TIME=1200,
//             COND=(0,LT),
//             PARM=('%BATCH DOCTGT PARMA(&SRCZNE)',
//             'PARMB(&DESTZNE) PARMC(&LV)')
//SYSTSPRT DD  SYSOUT=*
//SYSTSIN  DD  DUMMY
//SYSPROC  DD  DISP=SHR,DSN=XCICS.TSOISPF.CLIST
//ISPLIST  DD  SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1210,LRECL=121)
//ISPLOG   DD  SYSOUT=*,DCB=(RECFM=VA,BLKSIZE=129,LRECL=125)
//ISPPROF  DD  DISP=(NEW,DELETE,DELETE),DSN=&&PROFILE,
//             UNIT=SYSALLDA,SPACE=(TRK,(1,1,5)),
//             DCB=(RECFM=FB,BLKSIZE=3120,LRECL=80)
//ISPLLIB  DD  DISP=SHR,DSN=ISR.ISRLOAD
//         DD  DISP=SHR,DSN=ISP.ISPLOAD
//ISPPLIB  DD  DISP=SHR,DSN=ISR.ISRPENU
//         DD  DISP=SHR,DSN=ISP.ISPPENU
//ISPMLIB  DD  DISP=SHR,DSN=ISR.ISRMENU
//         DD  DISP=SHR,DSN=ISP.ISPMENU
//ISPSLIB  DD  DISP=SHR,DSN=ISR.ISRSENU
//         DD  DISP=SHR,DSN=ISP.ISPSLIB
//ISPTLIB  DD  DISP=SHR,DSN=ISR.ISRTLIB
//         DD  DISP=SHR,DSN=ISP.ISPTENU
./ ADD NAME=PTFAPCK  0101-91240-91240-1438-00023-00023-00000-DMV0016
//&ZUSER.A JOB (A006,SYTM),'ROOM28: &SYSMOD',
//            MSGCLASS=X,CLASS=J,
//            NOTIFY=&ZUSER
//*
//MYPROCS JCLLIB ORDER=(XSYS.MVSESA.PROCLIB)
//*
//* LIB: XSYS.MVSESA.CNTL(PTFAPCK)
//* GDE: SMP/E REFERENCE
//* DOC: THIS JOB DOES AN APPLY CHECK.
//*
//S01#01  EXEC PROC=SMPPROC
//SMPCNTL  DD  *
 SET BDY(&ZONE) .
   APPLY
     CHECK
     S(
       &SYSMOD
      )
     GROUPEXTEND
     BYPASS(HOLDSYSTEM(ACTION,DEP,DOC))
   .
/*
//
./ ADD NAME=PTFF1    0108-91074-91230-0730-00083-00098-00000-DMV0016
&WA
//             USER=&CSCSUSER,PASSWORD=&CSCSPSWD,
&WB
&WC
&WD
&WE
//*
//* LIB: SKELS(PTFF1)
//* GDE: KENNETH E. TOMIAK
//* DOC: INVOKE SERVICE TO RECEIVE PTF FROM IESERV.
//*
//*------------------------------------------------------------------
//*                    RETRIEVE DATA FROM IE MAILBOX
//*------------------------------------------------------------------
//*
//S01#04  EXEC PGM=TPMAIN,
//*            PARM='NOSPIE,NOSTAE/,IBM0DIMR,,,,3600'
//             PARM='NOSPIE,NOSTAE/,IBM0ATR1,,,,3600'
//STEPLIB  DD  DISP=SHR,DSN=EXPEDITE.MVS.R30.LOADLIB
//         DD  DSN=PLI.V2R2M0.PLILINK,DISP=SHR
//         DD  DSN=PLI.V2R2M0.SIBMLINK,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//OUTFILE  DD  SYSOUT=*
)SEL &TYPE = P
//PDSOUT   DD  DISP=SHR,DSN=&DSN(MLST&USRCLS)
)ENDSEL
)SEL &TYPE = S
//SEQOUT   DD  DISP=SHR,DSN=&DSN
)ENDSEL
//INFILE   DD  *
CSS&RECA
CRF&RECB
)SEL &TYPE = P
CRFC DPDSOUT
)ENDSEL
)SEL &TYPE = S
CRFC DSEQOUT
)ENDSEL
CSE
/*
//ISCTRACE DD  DUMMY
//ISCMSGS  DD  DUMMY
//PLIDUMP  DD  DUMMY
//*
//*-------------------------------------------------------------------*
//*                    RETRIEVE PTF  FROM IE MAILBOX                  *
//*-------------------------------------------------------------------*
//*
//S02#04  EXEC PGM=TPMAIN,
//*            PARM='NOSPIE,NOSTAE/,IBM0DIMR,,,,3600'
//             PARM='NOSPIE,NOSTAE/,IBM0ATR1,,,,3600'
//STEPLIB  DD  DISP=SHR,DSN=EXPEDITE.MVS.R30.LOADLIB
//         DD  DSN=PLI.V2R2M0.PLILINK,DISP=SHR
//         DD  DSN=PLI.V2R2M0.SIBMLINK,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//OUTFILE  DD  SYSOUT=*
//TERSED   DD  DISP=(NEW,CATLG,DELETE),
//             DCB=(RECFM=FB,BLKSIZE=7168,LRECL=1024),
//             UNIT=SYSALLDA,SPACE=(TRK,(10,20),RLSE),
//             DSN=&DSN..TERSED.MPTF&USRCLS
//INFILE   DD  *
CSS&RECA
CRF&RECC
CRFC DTERSED
CSE
/*
//ISCTRACE DD  DUMMY
//ISCMSGS  DD  DUMMY
//PLIDUMP  DD  DUMMY
//*
//S03#04  EXEC PGM=TRSUNPCK,COND=(0,NE),
//             PARM='UNPACK'
//STEPLIB  DD  DISP=SHR,DSN=EXPEDITE.MVS.R30.LOADLIB
//         DD  DSN=PLI.V2R2M0.PLILINK,DISP=SHR
//         DD  DSN=PLI.V2R2M0.SIBMLINK,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//INFILE   DD  DISP=OLD,DSN=&DSN..TERSED.MPTF&USRCLS
//OUTFILE  DD  DISP=SHR,DSN=&DSN(MPTF&USRCLS)
//*
//S04#04  EXEC PGM=IEFBR14
//INFILE   DD  DISP=(OLD,DELETE,KEEP),
//             DSN=&DSN..TERSED.MPTF&USRCLS
//
./ ADD NAME=PTFF2    0104-91098-91230-0729-00044-00050-00000-DMV0016
&WA
//             USER=&CSCSUSER,PASSWORD=&CSCSPSWD,
&WB
&WC
&WD
&WE
//*
//* LIB: SKELS(PTFF2)
//* GDE: KENNETH E. TOMIAK
//* DOC: INVOKE SERVICE TO RECEIVE PTF FROM IESERV.
//*
//*------------------------------------------------------------------
//*                    RETRIEVE DATA FROM IE MAILBOX
//*------------------------------------------------------------------
//*
//S01#01  EXEC PGM=TPMAIN,
//             PARM='NOSPIE,NOSTAE/,IBM0DIMR,,,,3600'
//*            PARM='NOSPIE,NOSTAE/,IBM0ATR1,,,,3600'
//STEPLIB  DD  DISP=SHR,DSN=EXPEDITE.MVS.R30.LOADLIB
//         DD  DSN=PLI.V2R2M0.PLILINK,DISP=SHR
//         DD  DSN=PLI.V2R2M0.SIBMLINK,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//OUTFILE  DD  SYSOUT=*
)SEL &TYPE = P
//PDSOUT   DD  DISP=SHR,DSN=&DSN(&USRCLS)
)ENDSEL
)SEL &TYPE = S
//SEQOUT   DD  DISP=SHR,DSN=&DSN
)ENDSEL
//INFILE   DD  *
CSS&RECA
CRF&RECB
)SEL &TYPE = P
CRFC DPDSOUT
)ENDSEL
)SEL &TYPE = S
CRFC DSEQOUT
)ENDSEL
CSE
/*
//ISCTRACE DD  DUMMY
//ISCMSGS  DD  DUMMY
//PLIDUMP  DD  DUMMY
//
./ ADD NAME=PTFF3    0102-91178-91230-0730-00083-00104-00000-DMV0016
&WA
//             USER=&CSCSUSER,PASSWORD=&CSCSPSWD,
&WB
&WC
&WD
&WE
//*
//* LIB: SKELS(PTFF1)
//* GDE: KENNETH E. TOMIAK
//* DOC: INVOKE SERVICE TO RECEIVE PTF FROM IESERV.
//*
//*------------------------------------------------------------------
//*                    RETRIEVE DATA FROM IE MAILBOX
//*------------------------------------------------------------------
//*
//S01#04  EXEC PGM=TPMAIN,
//*            PARM='NOSPIE,NOSTAE/,IBM0DIMR,,,,3600'
//             PARM='NOSPIE,NOSTAE/,IBM0ATR1,,,,3600'
//STEPLIB  DD  DISP=SHR,DSN=EXPEDITE.MVS.R30.LOADLIB
//         DD  DSN=PLI.V2R2M0.PLILINK,DISP=SHR
//         DD  DSN=PLI.V2R2M0.SIBMLINK,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//OUTFILE  DD  SYSOUT=*
)SEL &TYPE = P
//PDSOUT   DD  DISP=SHR,DSN=&DSN(ELST&USRCLS)
)ENDSEL
)SEL &TYPE = S
//SEQOUT   DD  DISP=SHR,DSN=&DSN
)ENDSEL
//INFILE   DD  *
CSS&RECA
CRF&RECB
)SEL &TYPE = P
CRFC DPDSOUT
)ENDSEL
)SEL &TYPE = S
CRFC DSEQOUT
)ENDSEL
CSE
/*
//ISCTRACE DD  DUMMY
//ISCMSGS  DD  DUMMY
//PLIDUMP  DD  DUMMY
//*
//*-------------------------------------------------------------------*
//*                    RETRIEVE PTF  FROM IE MAILBOX                  *
//*-------------------------------------------------------------------*
//*
//S02#04  EXEC PGM=TPMAIN,
//*            PARM='NOSPIE,NOSTAE/,IBM0DIMR,,,,3600'
//             PARM='NOSPIE,NOSTAE/,IBM0ATR1,,,,3600'
//STEPLIB  DD  DISP=SHR,DSN=EXPEDITE.MVS.R30.LOADLIB
//         DD  DSN=PLI.V2R2M0.PLILINK,DISP=SHR
//         DD  DSN=PLI.V2R2M0.SIBMLINK,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//OUTFILE  DD  SYSOUT=*
//TERSED   DD  DISP=(NEW,CATLG,DELETE),
//             DCB=(RECFM=FB,BLKSIZE=7168,LRECL=1024),
//             UNIT=SYSALLDA,SPACE=(TRK,(10,20),RLSE),
//             DSN=&DSN..TERSED.EPTF&USRCLS
//INFILE   DD  *
CSS&RECA
CRF&RECC
CRFC DTERSED
CSE
/*
//ISCTRACE DD  DUMMY
//ISCMSGS  DD  DUMMY
//PLIDUMP  DD  DUMMY
//*
//S03#04  EXEC PGM=TRSUNPCK,COND=(0,NE),
//             PARM='UNPACK'
//STEPLIB  DD  DISP=SHR,DSN=EXPEDITE.MVS.R30.LOADLIB
//         DD  DSN=PLI.V2R2M0.PLILINK,DISP=SHR
//         DD  DSN=PLI.V2R2M0.SIBMLINK,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//INFILE   DD  DISP=OLD,DSN=&DSN..TERSED.EPTF&USRCLS
//OUTFILE  DD  DISP=SHR,DSN=&DSN(EPTF&USRCLS)
//*
//S04#04  EXEC PGM=IEFBR14,COND=(0,NE,S03#04)
//INFILE   DD  DISP=(OLD,DELETE,KEEP),
//             DSN=&DSN..TERSED.EPTF&USRCLS
//
./ ADD NAME=PTFR1    0101-91074-91165-1555-00021-00047-00000-DMV0016
&PA
&PB
&PC
&PD
&PE
//*
//* LIB: SKELS(PTFR1)
//* GDE: KENNETH E. TOMIAK
//* DOC: THIS JOB RECEIVES MAINTENANCE FROM THE IESERV DATA SET.
//*
//S01#01  EXEC PROC=SMPPROC
//SMPPTFIN DD  DISP=SHR,DSN=&DOFDSN(MPTF&USRCLS)
//SMPHOLD  DD  DUMMY
//SMPCNTL  DD  *
  SET      BOUNDARY (GLOBAL) .
    RECEIVE
      SOURCEID(IESERV)
      LIST
    .
/*
//
./ ADD NAME=PTFR2    0101-91115-91165-1555-00021-00047-00000-DMV0016
&PA
&PB
&PC
&PD
&PE
//*
//* LIB: SKELS(PTFR2)
//* GDE: KENNETH E. TOMIAK
//* DOC: THIS JOB RECEIVES MAINTENANCE FROM THE IESERV DATA SET.
//*
//S01#01  EXEC PROC=SMPPROC
//SMPPTFIN DD  DISP=SHR,DSN=&DOFDSN(&USRCLS)
//SMPHOLD  DD  DUMMY
//SMPCNTL  DD  *
  SET      BOUNDARY (GLOBAL) .
    RECEIVE
      SOURCEID(IESERV)
      LIST
    .
/*
//
./ ADD NAME=WASCICS1 0102-88011-88099-1816-00089-00084-00033-#TSCON
//&ZUSER.M JOB (DPSU,M114),'CICS MIGRATION',
//       NOTIFY=&ZUSER,MSGCLASS=X,MSGLEVEL=(1,1),TYPRUN=SCAN,
)CM   ---------------------------------
)CM   FORCE JOB TO RUN ON CPU REQUESTED
)CM   ---------------------------------
)SEL &CPU EQ CPU1
//       CLASS=D
/*JOBPARM LINES=9999,SYSAFF=CPU1
)ENDSEL
)SEL &CPU EQ CPU2
//       CLASS=T
/*JOBPARM LINES=9999,SYSAFF=CPU2
)ENDSEL
/*ROUTE PRINT PRT3800
//*********************************************************************
//* COPY AND COMPRESS THE LIBRARIES                                   *
//*********************************************************************
//COPY    EXEC PGM=IEBCOPY,COND=(0,LT)
//SYSPRINT DD SYSOUT=*
//ICOB     DD DSN=CICS.&SRCZONE..COBLIB,DISP=SHR
//ILOAD    DD DSN=CICS.&SRCZONE..LOADLIB,DISP=SHR
//ILOAD1   DD DSN=CICS.&SRCZONE..LOADLIB1,DISP=SHR
//ILOAD2   DD DSN=CICS.&SRCZONE..LOADLIB2,DISP=SHR
//IPL1     DD DSN=CICS.&SRCZONE..PL1LIB,DISP=SHR
//IMTS     DD DSN=CICS.&SRCZONE..SMPMTS,DISP=SHR
//ISCDS    DD DSN=CICS.&SRCZONE..SMPSCDS,DISP=SHR
//ISTS     DD DSN=CICS.&SRCZONE..SMPSTS,DISP=SHR
//OCOB     DD DSN=CICS.&TGTZONE..COBLIB,DISP=SHR
//OLOAD    DD DSN=CICS.&TGTZONE..LOADLIB,DISP=SHR
//OLOAD1   DD DSN=CICS.&TGTZONE..LOADLIB1,DISP=SHR
//OLOAD2   DD DSN=CICS.&TGTZONE..LOADLIB2,DISP=SHR
//OPL1     DD DSN=CICS.&TGTZONE..PL1LIB,DISP=SHR
//OMTS     DD DSN=CICS.&TGTZONE..SMPMTS,DISP=SHR
//OSCDS    DD DSN=CICS.&TGTZONE..SMPSCDS,DISP=SHR
//OSTS     DD DSN=CICS.&TGTZONE..SMPSTS,DISP=SHR
//SYSIN DD *
  COPY     OUTDD=OCOB,INDD=((ICOB,R),OCOB)
  COPY     OUTDD=OLOAD,INDD=((ILOAD,R),OLOAD)
  COPY     OUTDD=OLOAD1,INDD=((ILOAD1,R),OLOAD1)
  COPY     OUTDD=OLOAD2,INDD=((ILOAD2,R),OLOAD2)
  COPY     OUTDD=OPL1,INDD=((IPL1,R),OPL1)
  COPY     OUTDD=OMTS,INDD=((IMTS,R),OMTS)
  COPY     OUTDD=OSCDS,INDD=((ISCDS,R),OSCDS)
  COPY     OUTDD=OSTS,INDD=((ISTS,R),OSTS)
//*********************************************************************
//* DELETE AND REDEFINE THE TZONE                                     *
//*********************************************************************
//DEFCSI EXEC PGM=IDCAMS,COND=(0,LT)
//SYSPRINT DD SYSOUT=*
//SYSIN DD *
  DELETE CICS.&TGTZONE..CSI
  DEFINE CLUSTER( -
                 NAME(CICS.&TGTZONE..CSI) -
                 MODEL(CICS.&SRCZONE..CSI) -
                 VOLUMES(&TGTVOL) -
                ) -
         DATA( -
                 NAME(CICS.&TGTZONE..CSI.DATA) -
                ) -
         INDEX( -
                 NAME(CICS.&TGTZONE..CSI.INDEX) -
                )
//*********************************************************************
//* INITIALIZE THE NEW TZONE                                          *
//*********************************************************************
//ZPOOL EXEC PGM=IDCAMS,COND=(0,LT)
//&TGTZONE DD DSN=CICS.&TGTZONE..CSI,DISP=SHR
//ZPOOL DD DSN=SYS1.MACLIB(GIMZPOOL),DISP=SHR
//SYSPRINT DD SYSOUT=*
//SYSIN DD *
  REPRO OUTFILE(&TGTZONE) INFILE(ZPOOL)
//*********************************************************************
//* PERFORM A ZONECOPY TO THE NEW TZONE, AND                          *
//* ZONEEDIT THE DATASET NAMES IN THE DDDEF'S TO                      *
//* POINT TO THAT ZONE'S DATASETS                                     *
//*********************************************************************
//ZONECOPY EXEC PGM=GIMSMP,REGION=4096K,COND=(0,LT)
//SMPCSI DD DSN=CICS.GLOBAL.CSI,DISP=SHR
//SMPLOG DD DSN=CICS.&TGTZONE..SMPLOG,DISP=SHR
//SMPOUT  DD SYSOUT=*
//SMPRPT  DD SYSOUT=*
//SMPCNTL DD *
  SET BDY(&TGTZONE) .
  ZONECOPY (&SRCZONE) INTO(&TGTZONE) .
  ZONEEDIT DDDEF.
     CHANGE DATASET(CICS.&SRCZONE..*,CICS.&TGTZONE..*).
  ENDZONEEDIT.
/*
//
./ ADD NAME=XCICSTRK 0100-92021-92021-1309-00045-00045-00000-DMV0016
)SEL &USERFLG = Y
//&USERID.B JOB (A006,SYTM),'ROOM17: SCRIPT',
//             MSGCLASS=X,MSGLEVEL=(1,1),
//             USER=&USERID,PASSWORD=&PASSWORD,
//             CLASS=L,REGION=4096K,NOTIFY=&ZUSER
/*ROUTE XEQ DOFNY
)ENDSEL
)SEL &USERFLG NE Y
//&ZUSER.B JOB (A006,SYTM),'ROOM17: SCRIPT',
//             MSGCLASS=X,MSGLEVEL=(1,1),
//             CLASS=L,REGION=4096K,NOTIFY=&ZUSER
)ENDSEL
//*
//SCRIPTIT EXEC PGM=IKJEFT01
//STEPLIB   DD  DSN=DCF.R32.DCFLOAD,DISP=SHR
//SYSPRINT  DD  SYSOUT=*
//SYSTSPRT  DD  SYSOUT=*
//SYSTSIN   DD  *
   SCRIPT 'XCICS.SCRIPT(TRACKING)' +
     PROFILE('DCF.R32.DCFGML3(DSMPROF3)') +
     LIB('DCF.R32.DCFGML3') +
     FONTLIB('SYS1.FONTLIBB') +
     SEGLIB('PPFA.PSEGLIB') +
     FILE('XCICS.SCRIPT.LIST') +
     TWOPASS INDEX +
     SYSVAR(X NO H YES) +
     DEVICE(PG1A)
/*
//*
//GENSTEP EXEC PGM=IEBGENER
//OUTDD OUTPUT FORMDEF=A10111,DEST=CSCBATCH,
//             PAGEDEF=D08462,
//             BURST=YES,
//             CKPTPAGE=5,
//             PIMSG=Y,
//             COPIES=1
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DSN=XCICS.SCRIPT.LIST,DISP=SHR
//SYSUT2   DD  SYSOUT=S,
//             OUTPUT=(*.OUTDD)
//SYSIN    DD  DUMMY
//*
//DELETE  EXEC PGM=IEFBR14
//DEL1     DD  DSN=XCICS.SCRIPT.LIST,DISP=(OLD,DELETE,DELETE)
//*
