GOPTIONS NOTEXT82;
GOPTIONS DEVICE=GDDMPCGX;
GOPTIONS CBACK=CYAN ;
GOPTIONS COLORS=(WHITE CYAN PINK BLUE GREEN YELLOW RED);
*OPTIONS DEVADDR=(ADMPRINT,.,L02MCE) DEVICE=GDDM87;
GOPTIONS HSIZE=8 VSIZE=7;
TITLE1    J=L H=1 F=NONE C=CYAN  '  ';
TITLE2    J=L H=1 F=NONE C=CYAN
   'REGRESSION ANALYSIS OF AVG PAGES/SEC BY DAY';
FOOTNOTE1 J=L H=1 F=NONE C=CYAN '  ';
FOOTNOTE2 J=L H=1 F=NONE C=RED
    'DEC 1988. AVERAGE PAGES PER SEC - RED LINE IS REGRESSION LINE' ;
FOOTNOTE3 J=L H=1 F=NONE C=CYAN
    'D2PPS   SOURCE RMF DATA. SYSTEM 3';
*
*
*
*       DOES A REGRESSION ANALYSIS OF PAGES/ SEC.
*
*    THIS SAS JOB TAKES THE FILE CREATED FROM RMF RECORD 71'S
*       PRODUCES A GRAPH
*
*     TO READ IN MORE THAN ONE MONTH'S WORTH OF DATA
*     CONCATENATE THE DATA AS FOLLOWS:
*          SET SASDB.P0718810
*              SASDB.P0718811
*              SASDB.P0718812
*
*     AND THEN USE MULTIPLE %INCLUDES TO EXCLUDE CERTAIN
*     DATES. FOR EXAMPLE,
*           %INCLUDE DD1(EX8810)
*           %INCLUDE DD1(EX8811)
*           %INCLUDE DD1(EX8812)
*
*     YOU COULD, OF COURSE, COPY THE EXCLUDE INSTRUCTIONS
*     INTO THE SAS PROGRAM BY ISSUING THE
*     INCLUDE COMMAND ON THE COMMAND LINE AND THEN MOVING
*     THOSE LINES OF CODE TO THE APPROPRIATE LOCATION.
*
*
*
*    UPDATE INFORMATION:
*       WORKS FOR MVS/SP 2.1.2  (AKA XA 2.1.2)
*       WORKS FOR MVS/SP 2.2
;
  DATA TEST0
       (KEEP=GDAT GHH GPGSEC);
  SET SASDB.P0718812
;
   IF S71IST LT 090000 THEN DELETE ;
   IF S71IST GT 155000 THEN DELETE ;
* LUNCH TIME   ;
IF S71IST GE 120000 AND S71IST LT 130000
   THEN DELETE;
%INCLUDE DD1(EX8812) ;
 HH = FLOOR(S71IST/10000);
GPGSEC = PGSEC;
GHH  = HH    ;
GDAT = S71DAT ;
 OUTPUT TEST0;
RETAIN;
RETURN;
 PROC MEANS  NOPRINT;
  VAR GPGSEC;
  BY GDAT;
  OUTPUT OUT=TEST1 MEAN=AVGPSEC;
*PROC PRINT DATA=TEST1;
  DATA TEST2
       (KEEP=GDAT GNUM AVGPSEC);
  SET TEST1  ;
 GNUM = _N_ ;
OUTPUT TEST2 ;
 RETURN ;
*PROC PRINT DATA=TEST1;
    SYMBOL1 W=1 C=GREEN  I=JOIN V=STAR    ;
    SYMBOL2 W=1 C=RED   I=JOIN V=DIAMOND ;
  PROC GLM ;
  MODEL AVGPSEC = GNUM / P;
  OUTPUT  OUT=TEST3 PREDICTED = PAVGPSEC
          RESIDUAL = RESID;
PROC PRINT;
* *PROC GPLOT      DATA = TEST2 GOUT=MYCAT.GRAPH;
  PROC GPLOT ;
  PLOT AVGPSEC*GNUM   PAVGPSEC*GNUM   / OVERLAY
                            VAXIS= 0 TO 300 BY 40
  ;
* *******                   VAXIS= 0 TO 400 BY 10;
RUN;

