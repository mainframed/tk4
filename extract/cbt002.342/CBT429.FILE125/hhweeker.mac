*-------------------------------------------------------------------*
× HHWEEKM - HIGH HOURLY WEEK FOR 1 PHYSICAL PROCESSOR COMLEX        ×
×                                                                   ×
*-------------------------------------------------------------------*
*
*    THIS SAS JOB TAKES THE FILE CREATED IN MEMBER RMF70W OR CPTOTW
*       AND PRODUCES A LISTING OF AVGCPU AND MAXCPU BY DATE
*       NOON HOUR EXCLUDED.
*
*    INPUT EITHER UTM1WK02 OR P0..WK01
*
;
  DATA       TEST3
       (KEEP=GDAT GHH GCPU_UT);
* FORMAT GDAT DATE7.;
  SET SASDB.UTM1WK02 ;
   IF S70IST LT 090000 THEN DELETE ;
   IF S70IST GT 155000 THEN DELETE ;
   IF S70IST GE 120000 AND
      S70IST LT 130000 THEN DELETE;
   IF S70INT LT 0500000 THEN DELETE /* THROW OUT SMALL INTERVAL */;
 HH = FLOOR(S70IST/10000);
GCPU_UT = CPU_UT  ;
GHH  = HH    ;
GDAT = S70DAT ;
 OUTPUT       TEST3  ;
RETAIN;
RETURN;
 PROC MEANS        ;
  VAR GCPU_UT;
  BY GDAT;
  OUTPUT OUT=TEST5 MEAN=AVGCPU MAX=MAXCPU;
 PROC PRINT DATA=TEST5;
*ITLE1 'WEEKLY CPU UTILIZATION SYS P0S3';
TITLE1 'WEEKLY CPU UTILIZATION FOR 3090-400E';
*
*    THIS SAS JOB TAKES THE FILE CREATED IN MEMBER RMF70W
*       AND PRODUCES A LISTING OF AVGCPU AND MAXCPU BY DATE
*
*
*
;
