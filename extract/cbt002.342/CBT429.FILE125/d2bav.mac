GOPTIONS NOTEXT82;
GOPTIONS DEVICE=GDDMPCGX;
GOPTIONS CBACK=CYAN ;
GOPTIONS COLORS=(WHITE CYAN PINK BLUE GREEN YELLOW RED);
*OPTIONS DEVADDR=(ADMPRINT,.,L02MCE) DEVICE=GDDM87;
GOPTIONS HSIZE=8 VSIZE=7;
TITLE1    J=L H=1 F=NONE C=CYAN  '  ';
TITLE2    J=L H=1 F=NONE C=cyan
     'DEC 1988 AVG BATCH USERS AND ASIDS OUT/READY'
 ;
FOOTNOTE1 J=L H=1 F=NONE C=CYAN '  ';
FOOTNOTE2 J=L H=1 F=NONE C=CYAN 'D2BAV   SOURCE: RMF DATA - SYSTEM 1';
FOOTNOTE3 J=L H=1 F=NONE C=GREEN
       'AVG BATCH USERS IN GREEN ';
FOOTNOTE4 J=L H=1 F=NONE C=RED
       'AVG ASIDS SWAPPED OUT AND READY IS IN RED';
*
*    THIS SAS JOB TAKES THE FILE CREATED FROM RMF RECORD 70'S
*       PRODUCES A GRAPH
*
*     TO READ IN MORE THAN ONE MONTH'S WORTH OF DATA
*     CONCATENATE THE DATA AS FOLLOWS:
*          SET SASDB.P0708810
*              SASDB.P0708811
*              SASDB.P0708812
*
*     AND THEN USE MULTIPLE %INCLUDES TO EXCLUDE CERTAIN
*     DATES. FOR EXAMPLE,
*           %INCLUDE DD1(EX8810)
*           %INCLUDE DD1(EX8811)
*           %INCLUDE DD1(EX8812)
*
*     YOU COULD, OF COURSE, COPY THE EXCLUDE INSTRUCTIONS
*     INTO THE SAS PROGRAM BY ISSUING THE
*     INCLUDE COMMAND ON THE COMMAND LINE AND THEN MOVING
*     THOSE LINES OF CODE TO THE APPROPRIATE LOCATION.
*
*
;
  DATA TEST0
       (KEEP=XDAT XHH  XBAV XOAV);
  SET SASDB.P0708812
;
   IF S70IST LT 090000 THEN DELETE ;
   IF S70IST GT 155000 THEN DELETE ;
%INCLUDE DD1(EX8811) ;
%INCLUDE DD1(EX8812) ;
 HH = FLOOR(S70IST/10000);
XBAV = S70BAV                  /* AVG BATCH JOBS */ ;
XOAV = S70OAV                  /* AVG ASIDS OUT AND WAITING */ ;
XHH  = HH ;
XDAT = S70DAT ;
 OUTPUT TEST0 ;
RETAIN;
RETURN;
*  PROC PRINT ;
  PROC SORT OUT=TEST1;
    BY XDAT ;
  PROC SUMMARY ;
    VAR XBAV XOAV ;
    BY XDAT ;
        OUTPUT OUT=TEST2  MEAN(XBAV)=GBAV   MEAN(XOAV)= GOAV
;
  DATA TEST3
       (KEEP=GDAT GBAV GOAV GNUM );
  SET TEST2         /*READ IN DAILY AVERAGES                */;
  GNUM = _N_        /*NUMBER EACH RECORD SO WE CAN GRAPH IT */;
  GDAT = XDAT       /*JUST THE DATE MAY USE IT LATER        */;
  GBAV = CEIL(GBAV) /*ROUND IT UP                           */;
  GOAV = CEIL(GOAV) /*ROUND IT UP                           */;
  OUTPUT TEST3;
*PROC PRINT DATA=TEST3;
SYMBOL1 W=1 C=GREEN I=JOIN V=DIAMOND ;
SYMBOL2 W=1 C=RED   I=JOIN V=STAR ;
   PROC GPLOT      DATA = TEST3;
        PLOT GBAV  *GNUM= 1
             GOAV  *GNUM= 2 / OVERLAY
        VAXIS= 0 TO 16  BY 2
  ;
RUN;
