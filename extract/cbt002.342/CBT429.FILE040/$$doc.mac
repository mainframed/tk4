THIS PDS CONTAINS SOURCE AND DOCUMENTATION FOR SEVERAL UTILITIES
IN USE AT PEOPLES NATIONAL BANK OF WASHINGTON.  THEY ARE

     PDSCLEAN - CLEANS OUT A PDS WITHOUT REQUIRING A DELETE/DEFINE.
                THE NUMBER OF DIRECTORY BLOCKS MAY BE CHANGED
                AT THE SAME TIME.  SEVERAL PDS'S MAY BE
                CLEANED IN ONE STEP.  CAN BE EXECUTED IN TSO
                FOREGROUND

     PDSPDS   - A PDS MASS SCAN/UPDATE UTILITY.  LOOK AT ALL OR A
                SUBSET OF MEMBERS OF A PDS.  CHANGE AS REQUESTED.
                SINCE RECORDS ARE NOT USUALLY ADDED OR DELETED
                UPDATES IN PLACE SAVING COMPRESSES.  XPDS TSO CLIST
                AND PROCPDS PROC ARE INCLUDED.

     RDOC72   - A DUCUMENTATION FORMATTER.  PROVIDES HEADERS, FOOTERS,
                TABLE OF CONTENTS, PAGE NUMBERS, AND LOTS MORE.

     SUPERGEN - SUPER IEBGENER.  FIND AND (LIMITED) CHANGE RECORDS
                IN A SEQUENTIAL FILE.  RELATIVE RECORD NUMBER, TTR,
                OR MBBCCHHR ADDRESSES CAN BE USED.  IDEAL FOR LOOKING
                AT 'ACTUAL' DATA IN A LARGE FILE IN FOREGROUND.
                SPGEN TSO CLIST AND PROCGEN PROC ARE INCLUDED.

SOURCE FOR ALL MODULES AND SUBROUTINES PROVIDED.  TO INSTALL USE THE
FOLLOWING INSTRUCTIONS.  SAMPLE JCL WILL REFER TO THIS PDS AS
"SHARE.DATA".

ASSEMBLER NOTE:  TWO MACROS ARE INCLUDED IN SHARE.DATA.  THEY ARE:

                 REGS    -  EQUS FOR R0 TO R15
                 DBAIOB  -  DSECT FOR AN IOB

                 SEVERAL PROGRAMS ALSO USE DSECT MAPPING MACROS
                 FROM SYS1.AMODGEN.  THEY ARE:

                 CVT     - MAPS COMMUNICATION VECTOR TABLE (CVT)
                 IEFJFCB - MAPS THE JOB FILE CONTROL BLOCK (JFCB)

                 INCLUDE SHARE.DATA AND SYS1.AMODGEN IN THE SYSLIB
                 CONCATENATION OF ALL ASSEMBLY STEPS.

1)  READ THIS MEMBER COMPLETELY BEFORE YOU START.

2)  COMPILE MODULE 'RDOC72' WITH THE STANDARD COBOL COMPILER.

3)  (OPTIONAL) RUN THE FOLLOWING JCL TO PRINT DOCUMENTATION ON
    RDOC72:

        //RDOC72     EXEC PGM=RDOC72
        //SYSPRINT   DD SYSOUT=*
        //SYSOUT     DD SYSOUT=*
        //SYSPUNCH   DD DUMMY
        //DIAGNOSE   DD DSN=&&DIAG,DISP=(NEW,DELETE,DELETE),UNIT=SYSDA,
        //           SPACE=(TRK,(020,020))
        //TABLES     DD DSN=&&TABL,DISP=(NEW,DELETE,DELETE),UNIT=SYSDA,
        //           SPACE=(TRK,(020,020))
        //LINEIMAG   DD DSN=&&LINE,DISP=(NEW,DELETE,DELETE),UNIT=SYSDA,
        //           SPACE=(TRK,(050,050))
        //ONEUP      DD DUMMY
        //TWOUP      DD DUMMY
        //SYSIN      DD DSN=SHARE.DATA(RDOC72UM),DISP=SHR

    NOTE:  THE SYSIN DD MAY REQUIRE CHANGING

4)  RUN THE FOLLOWING JCL TO PRINT DOCUMENTATION ON THE UTILITIES:

        //RDOC72     EXEC PGM=RDOC72
        //SYSPRINT   DD SYSOUT=*
        //SYSOUT     DD SYSOUT=*
        //SYSPUNCH   DD DUMMY
        //DIAGNOSE   DD DSN=&&DIAG,DISP=(NEW,DELETE,DELETE),UNIT=SYSDA,
        //           SPACE=(TRK,(020,020))
        //TABLES     DD DSN=&&TABL,DISP=(NEW,DELETE,DELETE),UNIT=SYSDA,
        //           SPACE=(TRK,(020,020))
        //LINEIMAG   DD DSN=&&LINE,DISP=(NEW,DELETE,DELETE),UNIT=SYSDA,
        //           SPACE=(TRK,(050,050))
        //ONEUP      DD DUMMY
        //TWOUP      DD DUMMY
        //SYSIN      DD DSN=SHARE.DATA(MOREDOC),DISP=SHR

    NOTE:  THE SYSIN DD MAY REQUIRE CHANGING

5)  ASSEMBLE AND LINKEDIT THE FOLLOWING SUBROUTINES.  ASMH IS NOT
    REQUIRED.

    VDBS$DDF - SCAN TIOT TO FIND A DD.
    VDBS$HEX - HEX PRINT UTILITY.
    DBACONSL - WTO/WTOR ASSIST.

6)  RUN A LINKEDIT USING THE "LINKIN" MEMBER AS THE SYSLIN DATA.
    THESE CONTROL CARDS ASSUME THAT THE SUBROUTINES ASSEMBLED AND LINKED
    IN STEP 4 ARE IN THE SYSLMOD FILE.  THIS STEP WILL CREATE THE
    FOLLOWING ALIASES:

    VDBS$DDF
     - DDFIND   - THE SAME THING
    VDBS$HEX
     - HEXDUMP  - START ADDR TO END ADDR
     - HEXDUMP2 - START ADDR FOR LENGTH
    DBACONSL
     - DBAWTO   - WTO SUPPORT
     - DBAWTOR  - WTOR SUPPORT

    NOTE:  LINKAGE EDITOR REQUIRES A BLOCKSIZE OF 3200 OR LESS ON
           THE CONTROL CARD INPUT.

    NOTE:  ADDITIONAL INFORMATION ON THESE SUBROUTINES IS FOUND
           IN "MOREDOC".

7) ASSEMBLE AND LINKEDIT THE FOLLOWING UTILITIES.  ASMH IS NOT
   REQUIRED.  REQUIRED SUBROUTINES ARE INDICATED.  MAKE SURE
   THEY ARE IN AN AUTOCALL LIBRARY IN THE LINK STEP.

   PDSCLEAN
    - NO REQUIRED SUBROUTINES
   PDSPDS
    - DDFIND   IN VDBS$DDF
   SUPERGEN
    - DBAWTO   IN DBACONSL
    - HEXDUMP  IN VDBS$HEX
    - VDBS$DDF IN VDBS$DDF

   NOTE:  SUPERGEN INCLUDES LOGIC TO DEFEAT DEB CHECKING.  THIS LOGIC IS
          USED BY WITH THE "DEB" AND "VTOC" SUBCOMMANDS.  THE LOGIC
          TO IMPLEMENT THIS FACILITY IS LOCATED AT LABEL "DEBMOD" IN THE
          CODE AND USES A USER SVC (247) TO FORCE AUTHORIZATION ON AND
          THEN OFF.  THE LOGIC WORKS BY MODIFYING THE DEB LOW CCHH TO
          0000 AND HIGH CCHH TO FFFF.  MODESET IS USED TO GET INTO AND
          OUT OF KEY ZERO.  IF YOU ARE UNCOMFORTABLE WITH THIS
          CAPABILITY INSERT A BRANCH TO JUMP AROUND THE LOGIC.
          OTHERWISE, MODIFY THE LOGIC TO USE WHATEVER FACILITIES YOU
          HAVE IN YOUR SHOP TO AUTHORIZE FOR MODESET.  WE HAVE HAD
          THIS LOGIC DISABLED (THE SVC IS A NOP) FOR SOME TIME SO IT HAS
          NOT BEEN TESTED RECENTLY.

8) (OPTIONAL) THE TSO CLISTS CAN BE INSTALLED IN A CLIST LIBRARY.
   THEY ARE:

    SPGEN    - SUPERGEN
    XPDS     - PDSPDS

   NOTE: THE LIBRARY NAME IN THE CALL STATEMENT WILL REQUIRE CHANGING.

   NOTE: THE CLIST LINES WERE TRUNCATED TO FIT INTO THIS PDS.  THE
         ONLY NON BLANK CHARACTERS AFFECTED WERE THOSE THAT COMPLETED
         THE BOX AROUND THE "YOU KEYED IN AN ATTENTION" MESSAGE.
         CLOSING THE BOX IN COLUMN 91 GIVES A PLEASING RESULT.

9) (OPTIONAL) INSTALL THE TWO PROCS IN A SUITABLE PROCLIB.  RENAME

        PROCGEN TO SPGEN  (EXECUTES SUPERGEN) AND
        PROCPDS TO PDSPDS (EXECUTES PDSPDS).

CERTIFICATION
-------------

     THESE UTILITIES HAVE BEEN RUN EXTENSIVELY IN AN MVS/SP ENVIRONMENT.
THEY HAVE BEEN EXAMINED FOR XA COMPATABILITY AND DO NOT HAVE ANY XA
DEPENDENCIES.  THEY HAVE BEEN TESTED SUPERFICIALLY IN AN XA ENVIRONMENT
AND NO PROBLEMS HAVE SHOWN UP.  THE PROCS AND CLISTS ARE COPIES OF THE
ONES WE RUN IN PRODUCTION.
