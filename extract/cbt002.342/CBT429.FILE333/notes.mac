
nt-flourç×»ç×±®10 Apr 1997ç×»ç':-ç'»××ço¹GZIP/MVS is a UNIX utilit
 to MVS by Harald Denker,¶who can be reached at harry@hal.westfalen.de
the²Ÿbit.listserv.c370-l and comp.compression news-groups.×¹Roland Sc
who can be reached at Roland@Schiradin.de¹have reported the GZIP/390 b
arald Denker have lost¬the source code for some reason. I have changed
eqfrom GZIP/MVS to GZIP/390×çoõGZIP/MVS is written in IBM C/370.mTh
run-time orLanguage Environment (LE) is required to execute it.·¹The
ble version require Language Environment 1.8 orehigher ×ço«GZIP/MVS c
voked as a program or as a TSO command.¬Running GZIP/390 as a program
er prompt your forfreplies…×çowGZIP writes messages to DDNAME(SYSOUT)
SOUT is not³allocated, GZIP allocates //SYSOUT DD SYSOUT=* in batch, a
YSOUT DD TERM=TS in TSO on-line.Ã×ço¿A user-specified dsname is always
 with the TSO user-id,¶even in batch, and even after issuing PROFILE N
²³Enclosing a fully-qualified dsname in apostrophes, as can be¶done w
 TSO commands, does not work in GZIP/MVS.²×³GZIP/390 allow you to use D
nstead of DYNALLOC-Files.¹Unfortunally the DDNAME OUTPUT is hardcoded
not befchanged…ìSample new styleÒ~//EXEC PGM=GZIP,PARM='DD:INPUT -v'
he InputFile must be FB80:!
 parm!f//INPUTsDD DISP=SHR,DSN=ROLANDS.UNGZIP.FILE//* This DDNAME
oded and can not be changed!·œ//OUTPUT DD DISP=(,CATLG),DSN=ROLANDS.UNG
,a//©pLIKE=ROLANDS.UNGZIP.FILEÃ¯or old styleüu//EXEC PGM=GZIP,PARM='
ile -v'›//* This generate "ROLANDS.UNGZIP.FILE.GZ" unlessµ//* your s
 different extension by th -S switch
×ço³During a compression or decomp
operation, GZIP always³deletes the input data set and reallocates a ne
 datacset.«This is not unique to GZIP/MVS, all other implementations
P do the same.zIf you're familiar with other ZIP programsøsuch as PKZ
foZip, this will confuse you.¸×[GZIP/390 will no longer delete the inpu
×ço]GZIP/MVS should only be used with RECFM=FB,LRECL=80 data sets.«Wh
pressing a data set, GZIP/MVS always re-creates¶a RECFM=FB,LRECL=80,BL
80 data set, whatever the²woriginal RECFM, LRECL and BLKSIZE were.èCon
y,
µcompressing, then decompressing a data set that is not
¼RECFM=FB,L
will produce a data set that is not usable.µI don't consider this as a
re like a limitation
¬of the GZIP format which has no room for DCB attr
«One way to work around this limitation is to use TRANSMIT¶OUTDA() to
" the data set before compressing it,²zand RECEIVE INDA() after decompr
t.À×ço¼GZIP/MVS supports sequential, non-VSAM, data sets (DSORG=PS).¼
ems to be some support for PDS members, but I haven'tòbeen able to get
ork.ò"GZIP jcl.cntl(abc)" creates¹jcl.cntl.gz(abc) (without deleting
inal) but "GZIP¬jcl.cntl.gz(abc) -d" does not decompress the abc membe
e again, TRANSMIT and RECEIVE can be used to unload/reload¯PDS members
P/390 offers nothing new in this areaÁ×ço¾During a decompression operat
P foo.gz -d) under on-lineªTSO, if GZIP detects that the output data s
 already›exists, it issues a message that looks like this:×	usamefile
, 0 and foo, 87224376Â×ìthen GZIP hangs.vWhat's actually happening is
PŸexpects the user to reply Y or N to a second message:×	¾GZIP123: fo
y exists; do you wish to overwrite (y or n)?±×ªbut the second message i
isplayed *after* the Y or Nkanwered is entered.vIf the user replies Y
IP hangs,ŸGZIP deletes the output data set and re-allocates it.×pGZI
xed that bug!Ë×ço¾GZIP uses the C/370 fopen() function to allocate new
s.³fopen() uses the system default for SPACE which is too smallmfor
ge files.sUnzipping large files may yield I/Onerrors or Sx37 abends.
390 offers the DDNAME feature. So it's up to you to decide¹the space b
ote that this limitation still perisistòif you choose the old style.×
efault, GZIP/MVS does *not* convert the data to ASCII.³If you want to
 text data and decompress it later onµa non-EBCDIC system (such as a P
the -a parm to
rconvert the text to ascii.É×¹Note that you may have to
ze the Translation-Tablesªsee C370.C. I try to find a a most common tr
n table××çoŸBecause of GZIP/MVS's limitations (RECFM=FB,LRECL=80,«us
fixing, deletion of source data set), unloadingthe data set you want
ess is almost a must,ªparticularly when the data set will be decompres
VS.×¶GZIP/390 offers some news, but the RECFM still persist!²×ço¹The
 version of GZIP (i.e. the UNIX version) worksöin the OPEN/MVS environ
a OMVS or OE).gLook in:²§÷http://www.s390.ibm.com/products/oe/bpxqp1.ht
Sample JCLÔ×hold styleƒ	d//TMPğEXEC PGM=IKJEFT01È	n//SYSTSPRT DD SYSOU
SYSOUT®DD SYSOUT=*Ë	é//SYSTSIN DD *Ò	ìGZIP jcl.cntl -vl/* compress, ve
GZIP jcl.cntl.gz -dè/* decompress
	fGZIP -hf/* help¸×	e//GZIPóEXEC PG
3,PARM='jcl -v'Á	g//SYSOUT®DD SYSOUT=*Ë×	e//GZIPõEXEC PGM=GZIP123,PARM
 -d'½	g//SYSOUT®DD SYSOUT=*Ëhnew styleƒ	d//TMPğEXEC PGM=IKJEFT01È	n//
 DD SYSOUT=*Ë	g//SYSOUT®DD SYSOUT=*Ë	é//SYSTSIN DD *Ò	wALLOCATE DDNAME(
SNAME(JCL.CNTL)	­ALLOCATE DDNAME(OUTPUT) DSNAME(JCL.CNTL.GZ)»	ìGZIP DD:
l/* compress, verbose	jFREE DDNAME(INPUT)	jFEEE DNAME(OUTPUT)	xALLOC
ME(ZIP) DSNAME(JCL.CNTL.GZ)À	xALLOCATE DDNAME(OUTPUT) DSNAME(JCL.CNTL)À	
:ZIP -dè/* decompress	ìFREE DDNAME(ZIP)Ğ	jFEEE DNAME(OUTPUT)	fGZIP -h
p¸¼as you see the old style is easier, but the new style provide¹you
 controlling and also offer an unlimited space×çohHelp text„×qGZIP123
24 Jun 93)Ì¶usage: GZIP123 :-acdfhlLnrtvV19: :-S suffix: :file ...:i-
i§¬ascii text; convert end-of-lines using local conventions®-c --stdou
 on standard output, keep original files unchanged¦ê-d --decompresside
Éi-f --force§›force overwrite of output file and compress links±h-h --
ve this helph-l --listnlist .gz file contents
¯-L --license¦pdisplay
e licenseÁ¯-n --no-name¦xdo not save or restore the original namei-q
msuppress all warnings¯-r --recurse¦ñrecurse through directories½f-S
suffix .suf¦óuse suffix .suf instead of .gzh-t --testótest compressed
tegrity¯-v --verbose¦¯verbose mode¯-V --version¦ndisplay version num
 --fastêcompress fasterÇh-9 --bestêcompress betterÇffile...°«files t
mpress. If none given, use standard input.×ÿ
