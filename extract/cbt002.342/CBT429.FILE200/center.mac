         MACRO
&NAME    CENTER &BASE=12,&SAVE=,&TYPE=E
         LCLA  &A1,&A2
         LCLB  &B1
         LCLC  &C1
&A1      SETA  K'&NAME
&B1      SETB  (T'&SAVE NE 'O')
         AIF   ('&BASE' GT '2' AND '&BASE' LT '13').BASEOK
         MNOTE 13,'REGISTER &BASE MAY NOT BE USED AS A BASE REG.'
         AGO   .MEND
.BASEOK  AIF   (&A1 GE 1).GE1
         MNOTE 13,'NO NAME ENTRY FOR CENTER MACRO'
         AGO   .MEND
.GE1     AIF   (&A1 LE 8).NAMEOK
         MNOTE 13,'THE NAME &NAME CONTAINS &A1 CHARACTERS'
         AGO   .MEND
.NAMEOK  AIF   (&B1).GOTSAVE
&C1      SETC  'SVR&SYSNDX'
         AGO   .SAVEOK
.GOTSAVE ANOP
&C1      SETC  '&SAVE'
.SAVEOK  AIF   ((&A1/2)*2 NE &A1).A1OK
&A1      SETA  &A1+1          MAKE L'NAME ODD IF NECESSARY
.A1OK    ANOP
&A2      SETA  &A1+5
         MNOTE *,' REG &BASE IS THE BASE REG FOR THIS ROUTINE'
         MNOTE *,' &C1 IS THE 18 WORD SAVE AREA FOR THIS ROUTINE'
         MNOTE *,' &NAME IS THE ENTRY POINT FOR THIS ROUTINE'
         AIF   ('&TYPE' EQ 'E').ENTRY
         AIF   ('&TYPE' EQ 'C').CSECT
         MNOTE 9,'INVALID TYPE OPERAND. &TYPE WAS SPECIFIED. E ASSUMED'
         AGO   .ENTRY
.CSECT   ANOP
&NAME    CSECT
         USING *,&BASE
         B     &A2.(15)       BOUNCE AROUND ID
         DC    X'&A1'
         DC    CL&A1'&NAME'
         STM   14,12,12(13)   SAVE REGS 14,15,0,...,12
         AGO   .COMMON
.ENTRY   ENTRY &NAME
         DC    X'&A1'
         DC    CL&A1'&NAME'
         USING *,&BASE
&NAME    STM   14,12,12(13)   SAVE REGS 14,15,0,...,12
.COMMON  LR    &BASE,15       PROVIDE ADDRESSABILITY
         LA    2,&C1          PICK UP ADDR OF THIS SAVE AREA
         ST    2,8(0,13)      STORE SAVE AREA ADDR IN CALLER
         ST    13,4(0,2)      STORE CALLER'S SAVE AREA ADDR IN SA
         LR    13,2           SET UP SAVE AREA POINTER REG.
         AIF   (&B1).MEND
         B     BYP&SYSNDX     BOUNCE AROUND SAVE AREA
&C1      DC    9D'0' .        SAVE AREA FOR THIS ROUTINE
BYP&SYSNDX EQU *
.MEND    MEND
