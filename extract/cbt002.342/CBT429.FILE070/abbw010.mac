++ USERMOD(ABBW010) /*     VIO ALLOCATION FILTER  :

         LIMIT VIO ALLOCATION TO SMALLER DATASETS : PRIMARY SPACE
         PLUS 4 TIMES SECONDARY MUST BE LESS THAN : 3.0 MEGABYTES OR
         240 TRACKS, OR 12 CYLINDERS (DEPENDING ON WHAT UNITS THE
         SPACE WAS REQUESTED IN). THESE NUMBERS ARE ROUGHLY BASED
         ON THE VIO 'WINDOW' DEVICE TYPE BEING A 3330. THIS MOD
         ALSO PREVENTS SORTWORK FILES BEING ASSIGNED VIO.
                                                                 */ .
++ VER(Z038) FMID(JBB2220)               /*   BASE          */ .
++ ZAP(IEFAB464) DISTLIB(AOSB3) .
 NAME IEFAB464
 VER 08CC 47E0,B8B2               BNO   @RF00338     NOT VIO ELGIBLE
 VER 0FA8 BF86,BF88     PATCH     DC
 VER 1002 BFE0,BFE2     PATCHEND  DC
 REP 08CC 47F0,BF90               B     PATCH+A    BRANCH TO PATCH
 REP 0FA8 0030,0000               DC    F'3.0 MB'  MAXIMUM CORE FOR VIO
 REP 0FAC E2D6,D9E3,E6D2          DC    C'SORTWK'  SORT WORK FILE
 REP 0FB2 47E0,B8B2     PATCH+A   BNO   @RF00338   ZAPPED INSTRUCTION
 REP 0FB6 1BFF                    SR    R15,R15    CLEAR 1ST WORK REG
 REP 0FB8 BFF7,709C               ICM   R15,7,JFCBSQTY  GET SECONDARY
 REP 0FBC 89F0,0002               SLL   R15,2      MULT BY 4
 REP 0FC0 1BEE                    SR    R14,R14    CLEAR 2ND WORK REG
 REP 0FC2 BFE7,7098               ICM   R14,7,JFCBPQTY  GET PRIMARY
 REP 0FC6 1AFE                    AR    R15,R14    ADD TOGETHER
 REP 0FC8 4190,000C               LA    R9,12      SET CYL LIMIT
 REP 0FCC 91C0,709B               TM    JFCBCTRI,B'11000000' IN CYLS ?
 REP 0FD0 4710,BFD0               BO    COMPARE
 REP 0FD4 4190,00F0               LA    R9,240     SET TRK LIMIT
 REP 0FD8 9180,709B               TM    JFCBCTRI,B'10000000' IN TRKS ?
 REP 0FDC 4710,BFD0               BO    COMPARE    YES
 REP 0FE0 9140,709B               TM    JFCBCTRI,B'01000000' IN BLKS ?
 REP 0FE4 4780,B8B2               BZ    @RF00338   NO - THEN NO VIO
 REP 0FE8 5890,BF86               L     R9,=X'00300000'  F'3.0 MB'
 REP 0FEC BFE7,70AB               ICM   R14,7,JFCBDRLH GET BLK SIZE
 REP 0FF0 1CEE                    MR    R14,R14    GET # BYTES
 REP 0FF2 19F9          COMPARE   CR    R15,R9     IS IT ALLOWED
 REP 0FF4 47B0,B8B2               BNL   @RF00338   MORE THAN ALLOWED
 REP 0FF8 D505,6004,BF8A          CLC   SCTDDNAM(6,CSIOTP),=C'SORTWK'
 REP 0FFE 4780,B8B2               BE    @RF00338   DONT ALLOW VIO
 REP 1002 47F0,B8AE               B     BACK       RETURN AND ALLOW VIO
