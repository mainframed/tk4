PROC 0 PGM()          /* PROGRAM TO EXECUTE              */ +
       SSID(DB2)      /* DB2 SUBSYSTEM NAME              */ +
       ACCESS(DIRECT) /* CTLG ACCESS DIRECT/INDIRECT     */ +
       LOADLQ(LOAD)   /* LAST QUALIFIER FOR LOAD LIBS    */ +
       PLIBLQ(PLIB)   /*  "       "      "  PLIBS        */ +
       MLIBLQ(MLIB)   /*  "       "      "  MLIBS        */ +
       SLIBLQ(SLIB)   /*  "       "      "  SLIBS        */ +
       TLIBLQ(TLIB)   /*  "       "      "  TLIBS        */ +
       CLSTLQ(CLIST)  /*  "       "      "  CLIST LIBS   */ +
       PCALL          /* PANEL CALL INDICATOR            */ +
       DEBUG          /* IF SET WILL PRINT CLIST AS EX'D */
/*----------------------------------------------------------------*/
/*   GENERATED BY TECH105    ON 93/04/19     AT 12:10             */
/*----------------------------------------------------------------*/
/*----------------------------------------------------------------*/
/*                                                                */
/* BMCDB2 DRIVER CLIST TO INVOKE BMC DB2 ADMINISTRATIVE PRODUCTS  */
/*                                                                */
/* TIS 1.1.03 AUGUST 1992                                         */
/*                                                                */
/* THIS CLIST CAN BE USED TO DISPLAY A SELECTION MENU FOR THE     */
/* BMC DB2 ADMINISTRATIVE PRODUCTS INSTALLED BY TIS.              */
/*                                                                */
/* THIS CLIST:                                                    */
/* 1. PROCESSES ANY PARMS PASSED TO IT.                           */
/* 2. LIBDEFS A PLIB TO DISPLAY THE SELECTION MENU.               */
/* 3. AFTER A SELECTION IS MADE ON THE PANEL, THE CLIST IS        */
/*    CALLED AGAIN WITH THE 'PCALL' PARAMETER.                    */
/* 4. LIBDEFS TO ALL REQUIRED ISPF LIBRARIES                      */
/* 5. SETS THE DEFAULT OPTIONS (DOPTS) MODULE NAME BASED ON THE   */
/*    PRODUCT AND SSID SELECTED.                                  */
/* 6. BUILDS THE EXECUTION PARAMETERS FOR EACH PRODUCT.           */
/* 7. INVOKES EACH PRODUCT.                                       */
/*                                                                */
/*                                                                */
/* EXAMPLES:                                                      */
/*                                                                */
/* 1. TO INVOKE THE SELECTION MENU:                               */
/*                                                                */
/*    EX 'SYSM.BMC.V1R2M04.MONITOR.INSTALL(BMCDB2)'               */
/*                                                                */
/*----------------------------------------------------------------*/
/*                                                                */
/* CUSTOMIZATION TIPS:                                            */
/*                                                                */
/* ALU = ALTER FOR DB2                                            */
/* ASU = DASD MANAGER FOR DB2                                     */
/* ACT = CATALOG MANAGER FOR DB2                                  */
/* ACM = CHANGE MANAGER FOR DB2                                   */
/* DOM = ACTIVITY MONITOR FOR DB2                                 */
/* DDT = OPERTUNE FOR DB2                                         */
/*                                                                */
/* DEFAULTS SHOULD BE SET AFTER THE "DEFAULTS" COMMENT BLOCK.     */
/*                                                                */
/* CUSTOMIZATION AREAS FOR MAINTINSTALL ARE INDICTED BY           */
/* 'MAINTINSTALL' COMMENT BLOCKS.                                 */
/*                                                                */
/* CUSTOMIZATION AREAS FOR SSIDINSTALL ARE INDICATED BY A         */
/* 'SSIDINSTALL' COMMENT BLOCK.                                   */
/*                                                                */
/* CUSTOMIZATION AREAS FOR CATALOG INDIRECTION ARE INDICATED BY A */
/* 'C-I-INSTALL' COMMENT BLOCK.                                   */
/*                                                                */
/* CUSTOMIZATION AREAS FOR MIGRINSTALL ARE INDICATED BY A         */
/* 'MIGRINSTALL' COMMENT BLOCK.                                   */
/*                                                                */
/*----------------------------------------------------------------*/
 /*----------------------------------------------------------------*/
 /* SET DEBUG OPTION                                               */
 /*----------------------------------------------------------------*/
 IF &DEBUG ^= DEBUG +
    THEN CONTROL NOLIST NOMSG NOFLUSH
    ELSE CONTROL SYM CON LIST
 /*----------------------------------------------------------------*/
 /* THE PCALL PARAMETER IS USED TO BYPASS DISPLAY OF THE SELECTION */
 /* MENU.                                                          */
 /*                                                                */
 /* NORMALLY, THIS CLIST DISPLAYS THE PANEL, WHICH CALLS (EXECUTES)*/
 /* THE CLIST AGAIN WITH THE PCALL PARM                            */
 /*----------------------------------------------------------------*/
 IF &PCALL = &STR() THEN DO
    IF &ALTER = ALTER THEN SET OPT = 1
    IF &DASD  = DASD  THEN SET OPT = 2
    IF &CAT   = CAT   THEN SET OPT = 3
    IF &ACM   = ACM   THEN SET OPT = 4
    IF &DB2AM = DB2AM THEN SET OPT = 5
    IF &DDT   = DB2AM THEN SET OPT = 6
    ISPEXEC LIBDEF ISPPLIB +
            DATASET ID('SYSM.BMC.V1R2M04.MONITOR.INSTALL')
    ISPEXEC SELECT PANEL(BMCDB2PR) OPT(&OPT)
    ISPEXEC LIBDEF ISPPLIB DATASET
    EXIT CODE(0)
 END
 /*----------------------------------------------------------------*/
 /* SET DEFAULTS HERE                                              */
 /*----------------------------------------------------------------*/
 /* NOTE:  IF THE BMC PRODUCTS FOR DB2 WERE INSTALLED USING        */
 /*        DIFFERENT HIGH LEVEL QUALIFIERS (HLQ), YOU WILL NEED    */
 /*        TO RESOLVE THE "HLQ" VARIABLES (HLQ1, HLQ2, HLQ3) TO    */
 /*        THE DIFFERENT HIGH LEVEL QUALIFIERS USED FOR EACH       */
 /*        PRODUCT.                                                */
 /*                                                                */
 /*        IF  YOU ARE NOT USING A SINGLE APF LIBRARY, YOU WILL    */
 /*        NEED TO PROCEED TO SECTION "SET THE PARMS FOR EACH      */
 /*        PRODUCT AND CALLED LOADLIB" AND MAKE SURE VARIABLE      */
 /*        "CALLOAD1" USES THE APPROPRIATE "HLQ#" WHEN RESOLVING   */
 /*        THE LOAD LIBRARY NAME.                                  */
 /*----------------------------------------------------------------*/
   SET HLQ1 = &STR(SYSM.BMC.V1R2M04.MONITOR)
   SET HLQ2 = &STR()      /* OPTIONAL 2ND HLQ                    */
   SET HLQ3 = &STR()      /* OPTIONAL 3RD HLQ                    */
   SET HLQ4 = &STR()
                          /* OPERTUNE HLQ FOR PROFILE DATASET    */
   SET DB2LOAD1 = &STR()  /* DB2 LOADLIB 1                       */
   SET DB2LOAD2 = &STR()  /* DB2 LOADLIB 2                       */
   SET AEXLOAD  = &STR()  /* OPTIONAL LOABLIB FOR EXEC/JCL GEN   */
                          /* DSNAME IN TICS.....                 */
   SET APFLOAD = &STR()
                          /* OPTIONAL SEPARATE APF LOADLIB       */
                          /* NO TICS PLEASE                      */
   SET TSOEVER = &SYSTSOE
                          /* TSO EXTENSION VERSION               */
   SET ALTCLIST = N       /* USE ALTLIB TO ACTIVATE CLIST        */
 /*----------------------------------------------------------------*/
 /* VALIDATE HLQ1 AND MANDATORY PROC PARMS                         */
 /*----------------------------------------------------------------*/
 IF &PCALL ^= &STR() THEN DO
    IF &HLQ1 = &STR() THEN DO
        SET ZEDSMSG = &STR("HLQ1" REQUIRED)
        SET ZEDLMSG = &STR(THE DSNAME HIGH LEVEL QUALIFER WAS BLANK. +
                         IT IS REQUIRED BY THE CLIST)
        GOTO SEVERITY2
    END
    IF  &SSID = &STR() THEN DO
        SET ZEDSMSG = &STR(SSID REQUIRED)
        SET ZEDLMSG = &STR(THE DB2 SUBSYSTEM NAME IS REQUIRED. THE +
                         PANEL DID NOT PASS A SSID NAME)
        GOTO SEVERITY2
    END
 END
 /*----------------------------------------------------------------*/
 /* OPTIONAL LOAD LIBRARY FOR EXECUTION/JCLGEN                     */
 /*----------------------------------------------------------------*/
 IF &SYSDSN(&AEXLOAD) = &STR(OK) +
    THEN ISPEXEC VPUT (AEXLOAD) SHARED  /* GIVE TO JCL GEN PROCESS */
 /*----------------------------------------------------------------*/
 /* USE THE SPECIAL APF LOADLIB (IF ANY)                           */
 /*----------------------------------------------------------------*/
 IF &APFLOAD ^= &STR() THEN DO
    SET LOAD1    = '&APFLOAD'
    SET CALLOAD1 = &APFLOAD
 END
 ELSE DO
    SET LOAD1    = '&HLQ1..&LOADLQ'
    SET CALLOAD1 = &STR()
 END
 /*----------------------------------------------------------------*/
 /* SET THE OTHER LIBRARIES AND CHECK TO SEE IF THEY EXIST         */
 /*----------------------------------------------------------------*/
 /*-------------------- LLIBS HERE --------------------------------*/
  SET LOAD2 = '&HLQ2..&LOADLQ'
  SET LOAD3 = '&HLQ3..&LOADLQ'
  IF &SYSDSN(&LOAD1) ^= &STR(OK) THEN SET LOAD1 = &STR()
  IF &SYSDSN(&LOAD2) ^= &STR(OK) THEN SET LOAD2 = &STR()
  IF &SYSDSN(&LOAD3) ^= &STR(OK) THEN SET LOAD3 = &STR()
 /*-------------------- PLIBS HERE --------------------------------*/
  SET PLIB1 = '&HLQ1..&PLIBLQ'
  SET PLIB2 = '&HLQ2..&PLIBLQ'
  SET PLIB3 = '&HLQ3..&PLIBLQ'
  IF &SYSDSN(&PLIB1) ^= &STR(OK) THEN SET PLIB1 = &STR()
  IF &SYSDSN(&PLIB2) ^= &STR(OK) THEN SET PLIB2 = &STR()
  IF &SYSDSN(&PLIB3) ^= &STR(OK) THEN SET PLIB3 = &STR()
 /*-------------------- MLIBS HERE --------------------------------*/
  SET MLIB1 = '&HLQ1..&MLIBLQ'
  SET MLIB2 = '&HLQ2..&MLIBLQ'
  SET MLIB3 = '&HLQ3..&MLIBLQ'
  IF &SYSDSN(&MLIB1) ^= &STR(OK) THEN SET MLIB1 = &STR()
  IF &SYSDSN(&MLIB2) ^= &STR(OK) THEN SET MLIB2 = &STR()
  IF &SYSDSN(&MLIB3) ^= &STR(OK) THEN SET MLIB3 = &STR()
 /*-------------------- SLIBS HERE --------------------------------*/
  SET SLIB1 = '&HLQ1..&SLIBLQ'
  SET SLIB2 = '&HLQ2..&SLIBLQ'
  SET SLIB3 = '&HLQ3..&SLIBLQ'
  IF &SYSDSN(&SLIB1) ^= &STR(OK) THEN SET SLIB1 = &STR()
  IF &SYSDSN(&SLIB2) ^= &STR(OK) THEN SET SLIB2 = &STR()
  IF &SYSDSN(&SLIB3) ^= &STR(OK) THEN SET SLIB3 = &STR()
 /*-------------------- TLIBS HERE --------------------------------*/
  SET TLIB1 = '&HLQ1..&TLIBLQ'
  SET TLIB2 = '&HLQ2..&TLIBLQ'
  SET TLIB3 = '&HLQ3..&TLIBLQ'
  IF &SYSDSN(&TLIB1) ^= &STR(OK) THEN SET TLIB1 = &STR()
  IF &SYSDSN(&TLIB2) ^= &STR(OK) THEN SET TLIB2 = &STR()
  IF &SYSDSN(&TLIB3) ^= &STR(OK) THEN SET TLIB3 = &STR()
 /*-------------------- CLIST HERE --------------------------------*/
  IF &ALTCLIST = Y THEN DO
     SET CLST1 = '&HLQ1..&CLSTLQ'
     SET CLST2 = '&HLQ2..&CLSTLQ'
     SET CLST3 = '&HLQ3..&CLSTLQ'
     IF &SYSDSN(&CLST1) ^= &STR(OK) THEN SET CLST1 = &STR()
     IF &SYSDSN(&CLST2) ^= &STR(OK) THEN SET CLST2 = &STR()
     IF &SYSDSN(&CLST3) ^= &STR(OK) THEN SET CLST3 = &STR()
  END
 /*---------------------------------------------------------------*/
 /*  SET DOPTS MODULE NAMES BASED ON SSID AND CATALOG ACCESS      */
 /*---------------------------------------------------------------*/
 SELECT (&SSID)
   /*-------------------------------------------------------------*/
   /* SSIDINSTALL:                                                */
   /*    - INSERT $S07BMC HERE                                    */
   /* MIGRINSTALL:                                                */
   /*    - INSERT $G08BMC HERE                                    */
   /*-------------------------------------------------------------*/
   WHEN (DSNX) DO
     SET ASUDOPTD = &STR()
     SELECT (&ACCESS)
       WHEN (DIRECT) DO
       /*-------------------------------------------------*/
       /* MAINTINSTALL:                                   */
       /*    - DELETE 4 SET STATEMENTS                    */
       /*    - INSERT $M12BMC HERE FOR DSNX               */
       /*-------------------------------------------------*/
         SET ALUDOPT = &STR()
         SET ASUDOPT = &STR()
         SET ACTDOPT = &STR()
         SET ACMDOPT = &STR()
       END
       WHEN (INDIRECT) DO
       /*-------------------------------------------------*/
       /* MAINTINSTALL:                                   */
       /*    - DELETE 4 SET STATEMENTS                    */
       /*    - INSERT $M12BMC HERE FOR DSNX               */
       /* C-I-INSTALL:                                    */
       /*    - DELETE GOTO CIERR STATEMEMT                */
       /*    - INSERT $Z08BMC HERE FOR DSNX               */
       /*-------------------------------------------------*/
         GOTO CIERR
       END
       OTHERWISE GOTO ACCSERR
     END
   END
   OTHERWISE DO
     IF &PGM ^= DDTNINIT THEN GOTO SSIDERR
   END
 END
 /*----------------------------------------------------------------*/
 /* LIBDEF LOAD LIBRARIES                                          */
 /*----------------------------------------------------------------*/
 IF &LOAD1^=&STR() OR &LOAD2^=&STR() OR ^=&STR() THEN DO
    ISPEXEC LIBDEF ISPLLIB DATASET +
    ID( &LOAD1   +
        &LOAD2   +
        &LOAD3   +
        &DB2LOAD1 +
        &DB2LOAD2 ) COND
 END
 ELSE DO
    SET ZEDSMSG = &STR(LOADLIB REQUIRED)
    SET ZEDLMSG = &STR(AT LEAST ONE LOAD LIBRARY IS REQUIRED TO +
                     EXECUTE THE BMC DB2 PRODUCTS)
    GOTO SEVERITY2
 END
 /*----------------------------------------------------------------*/
 /* LIBDEF ALL OTHER NECESSARY LIBRARIES                           */
 /*----------------------------------------------------------------*/
 IF &PLIB1^=&STR() OR &PLIB2^=&STR() OR &PLIB3^=&STR() THEN DO
    ISPEXEC LIBDEF ISPPLIB DATASET +
      ID( &PLIB1 +
          &PLIB2 +
          &PLIB3 ) COND
 END
 IF &MLIB1^=&STR() OR &MLIB2^=&STR() OR &MLIB3^=&STR() THEN DO
    ISPEXEC LIBDEF ISPMLIB DATASET +
      ID( &MLIB1 +
          &MLIB2 +
          &MLIB3 ) COND
 END
 IF &SLIB1^=&STR() OR &SLIB2^=&STR() OR &SLIB3^=&STR() THEN DO
    ISPEXEC LIBDEF ISPSLIB DATASET +
      ID( &SLIB1 +
          &SLIB2 +
          &SLIB3 ) COND
 END
 IF &TLIB1^=&STR() OR &TLIB2^=&STR() OR &TLIB3^=&STR() THEN DO
    ISPEXEC LIBDEF ISPTLIB DATASET +
      ID( &TLIB1 +
          &TLIB2 +
          &TLIB3 ) COND
 END
 /*----------------------------------------------------------------*/
 /* ALTLIB CLIST LIBRARY                                           */
 /*----------------------------------------------------------------*/
 IF &ALTCLIST = Y AND &TSOEVER NL &STR(2010) THEN DO
    IF &CLST1^=&STR() OR &CLST2^=&STR() OR &CLST3^=&STR() THEN +
       ALTLIB ACT APPLICATION(CLIST) +
         DSNAME(&CLST1 +
                &CLST2 +
                &CLST3 ) COND
 END
 /*----------------------------------------------------------------*/
 /* SET THE PARMS FOR EACH PRODUCT AND CALLED LOADLIB IF NEEDED    */
 /*----------------------------------------------------------------*/
 /* NOTE:  IF THE BMC PRODUCTS FOR DB2 WERE INSTALLED USING        */
 /*        DIFFERENT HIGH LEVEL QUALIFIERS (HLQ) AND ALL THE       */
 /*        PRODUCTS LOAD MODULES WERE NOT COPIED TO A SINGLE       */
 /*        APF LIBRARY, YOU NEED TO RESOLVE THE "HLQ" VARIABLES    */
 /*        TO THE DIFFERENT HIGH LEVEL QUALIFIERS USED FOR EACH    */
 /*        PRODUCT.                                                */
 /*                                                                */
 /*        CHANGE "HLQ1" TO EITHER "HLQ2" OR "HLQ3" DEPENDING ON   */
 /*        THE HIGH LEVEL QUALIFIER SET IN THE PREVIOUS SECTION    */
 /*        "SET DEFAULTS HERE".                                    */
 /*                                                                */
 /*        FOR EXAMPLE, IF CATALOG MANAGER WAS INSTALLED IN THE    */
 /*        SET OF LIBRARIES WHOSE HIGH LEVEL QUALIFIER IS IN       */
 /*        "&HLQ2", THEN IN THE "WHEN(ACTEMAIN)" SECTION BELOW,    */
 /*        CHANGE THE SET STATEMENT FOR "CALLOAD1"                 */
 /*        FROM: CALLOAD1 = &HLQ1..&LOADLQ                         */
 /*        TO:   CALLOAD1 = &HLQ2..&LOADLQ                         */
 /*----------------------------------------------------------------*/
 SELECT (&PGM)
    WHEN(ALTFRONT) DO   /* ALTER                                   */
         SET PARM    = &STR(S=&SSID,O=&ALUDOPT,D=&ASUDOPTD)
         IF &CALLOAD1   = &STR() THEN +
            SET CALLOAD1 = &HLQ1..&LOADLQ
    END
    WHEN(ACTEMAIN) DO   /* CATALOG MANAGER                         */
         SET PARM = &STR(S=&SSID,O=&ACTDOPT,D=&ASUDOPTD,+
                            A=&ACMDOPT)
         IF &CALLOAD1   = &STR() THEN +
            SET CALLOAD1 = &HLQ1..&LOADLQ
    END
    WHEN(ASUFMAIN) DO   /* DASD MANAGER                            */
         SET PARM    = &STR(&ASUDOPT)
         IF &CALLOAD1   = &STR() THEN +
            SET CALLOAD1 = &HLQ1..&LOADLQ
    END
    WHEN(ACMFRONT) DO   /* CHANGE MANAGER                          */
         SET PARM    = &STR(S=&SSID,O=&ACMDOPT,D=&ASUDOPTD)
         IF &CALLOAD1   = &STR() THEN +
            SET CALLOAD1 = &HLQ1..&LOADLQ
    END
    WHEN(DOM)      DO   /* ACTIVITY MONITOR                        */
         SET PARM    = &STR()
    END
    WHEN(DDTNINIT) DO   /* OPERTUNE                                */
         SET PARM    = &STR()
         IF &CALLOAD1   = &STR() THEN +
            SET CALLOAD1 = &HLQ1..&LOADLQ
    END
    OTHERWISE DO
         SET ZEDSMSG = &STR(INVALID PGM NAME)
         SET ZEDLMSG = &STR(AN INVALID PROGRAM NAME WAS PASSED TO THE  +
                       CLIST BY PANEL BMCDB2PR)
         GOTO SEVERITY1
    END
 END
 /*----------------------------------------------------------------*/
 /* INVOKE THE SELECTED BMC ADMINISTRATIVE PRODUCT FOR DB2         */
 /*                                                                */
 /* NOTE: ACTIVITY MONITOR AND OPERTUNE MUST BE SELECT             */
 /*----------------------------------------------------------------*/
 SELECT (&PGM)
    WHEN(DOM) DO
       ISPEXEC SELECT PGM(DOM) NEWAPPL(BMCM) PASSLIB
    END
    WHEN(DDTNINIT) DO
       ALLOC F(DDTLOAD) DA('&CALLOAD1') SHR REUSE
       ALLOC F(DDTPROFS) DA('&HLQ4..PROFILE') SHR REUSE
       ALLOC F(DDTTRACE) SYSOUT REUSE
       ISPEXEC LIBDEF ISPLLIB LIBRARY ID(DDTLOAD)
       ISPEXEC SELECT PGM(DDTNINIT) NEWAPPL(BMCT) PASSLIB
       FREE F(DDTLOAD DDTPROFS DDTTRACE)
    END
    OTHERWISE DO
       CALL '&CALLOAD1(&PGM)' '&PARM'
       IF &LASTCC ^= 0 THEN GOTO CALLERR
    END
 END
 /*----------------------------------------------------------------*/
 /* UN-LIBDEF ALL ISPF LIBRARIES AFTER WE ARE THROUGH              */
 /*----------------------------------------------------------------*/
 ISPEXEC LIBDEF ISPLLIB DATASET
 ISPEXEC LIBDEF ISPPLIB DATASET
 ISPEXEC LIBDEF ISPMLIB DATASET
 ISPEXEC LIBDEF ISPSLIB DATASET
 ISPEXEC LIBDEF ISPTLIB DATASET
 /*----------------------------------------------------------------*/
 /* ALTLIB RESET CLIST LIBRARY                                     */
 /*----------------------------------------------------------------*/
 IF &ALTCLIST = Y AND &TSOEVER NL &STR(2010) THEN DO
    IF &CLST1^=&STR() OR &CLST2^=&STR() OR &CLST3^=&STR() THEN +
       ALTLIB RES
 END
 EXIT CODE(0)
SSIDERR: +
 SET ZEDSMSG = ("SSID" INVALID)
 SET ZEDLMSG = (BMCDB2 CANNOT FIND SSID. VERIFY PRODUCT INSTALLED +
                     ON "&SSID")
 GOTO SEVERITY2
CIERR: +
 SET ZEDSMSG = ("C-I" ERROR)
 SET ZEDLMSG = (CATALOG INDIRECTION NOT INSTALLED FOR THIS PRODUCT)
 GOTO SEVERITY2
ACCSERR: +
 SET ZEDSMSG = ("CTLG ACCESS" INVALID)
 SET ZEDLMSG = (BMCDB2PR PASSED "&ACCESS" AS A CATALOG ACCESS +
                      AND IT MUST BE DIRECT OR INDIRECT)
 GOTO SEVERITY2
CALLERR: +
 SET ZEDSMSG = (CLIST ERROR)
 SET ZEDLMSG = (THE BMCDB2 CLIST ENCOUNTER AN ERROR. PLEASE TRY +
                      AGAIN USING DEBUG PARAMETER)
 GOTO SEVERITY2
SEVERITY1: +
 ISPEXEC LIBDEF ISPLLIB DATASET
 ISPEXEC LIBDEF ISPPLIB DATASET
 ISPEXEC LIBDEF ISPMLIB DATASET
 ISPEXEC LIBDEF ISPSLIB DATASET
 ISPEXEC LIBDEF ISPTLIB DATASET
SEVERITY2: +
 ISPEXEC SETMSG MSG(ISRZ001)
 EXIT CODE(8)
