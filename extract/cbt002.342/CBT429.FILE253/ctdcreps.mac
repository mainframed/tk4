PROC 0 DEBUG DATEFMT(USA) +
         STEPLIB(SYS1.IOA.V410.LOAD) +
         LANG() +
         REPLIB(SYSS.CTDO.V310.REPORTS) +
         CTDCAL(SYSS.IOA.V410.CAL) +
         REP() +
         CAT(*) +
         FORCE(NO) +
         ODAT() +
         PGMID(CTDRRQ)
CONTROL MAIN NOLIST NOCONLIST NOSYMLIST NOMSG
IF &DEBUG=DEBUG THEN CONTROL MAIN LIST CONLIST SYMLIST MSG
IF .&ODAT = . THEN DO
SET YY=&SUBSTR(7:8,&SYSDATE)
SET MM=&SUBSTR(1:2,&SYSDATE)
SET DD=&SUBSTR(4:5,&SYSDATE)
GOTO ODATOK
                   END
IF &DATEFMT=JPN +
    THEN DO
            SET &YY=&SUBSTR(1:2,&ODAT)
            SET &DD=&SUBSTR(5:6,&ODAT)
            SET &MM=&SUBSTR(3:4,&ODAT)
         END
    ELSE  +
        IF &DATEFMT=USA +
            THEN DO
                    SET &YY=&SUBSTR(5:6,&ODAT)
                    SET &DD=&SUBSTR(3:4,&ODAT)
                    SET &MM=&SUBSTR(1:2,&ODAT)
                 END
            ELSE DO
                    SET &YY=&SUBSTR(5:6,&ODAT)
                    SET &DD=&SUBSTR(1:2,&ODAT)
                    SET &MM=&SUBSTR(3:4,&ODAT)
                 END
ODATOK:+
SET &NOALC=&STR()
SET CTDSLIB=&REPLIB
SET CTDSMIS=&REP
SET CTDSCAT=&STR(&CAT)
SET FORCE=&FORCE
IF &DATEFMT=JPN THEN +
  %CTDUPAMF CTDSLIB('&CTDSLIB') +
     CTDCAL('&CTDCAL') +
     CTDSMIS(&CTDSMIS)+
     CTDSCAT(&CTDSCAT) +
     STEPLIB('&STEPLIB') +
     LANG(&LANG) +
     PGMID(&PGMID) +
     FORCE(&FORCE) +
     &DEBUG DATE(&YY&MM&DD) &NOALC
   ELSE    +
IF &DATEFMT=USA THEN +
  %CTDUPAMF CTDSLIB('&CTDSLIB') +
     CTDCAL('&CTDCAL') +
     CTDSMIS(&CTDSMIS)+
     CTDSCAT(&CTDSCAT) +
     STEPLIB('&STEPLIB') +
     LANG(&LANG) +
     PGMID(&PGMID) +
     FORCE(&FORCE) +
     &DEBUG DATE(&MM&DD&YY) &NOALC
   ELSE    +
  %CTDUPAMF CTDSLIB('&CTDSLIB') +
     CTDCAL('&CTDCAL') +
     CTDSMIS(&CTDSMIS)+
     CTDSCAT(&CTDSCAT) +
     STEPLIB('&STEPLIB') +
     LANG(&LANG) +
     PGMID(&PGMID) +
     FORCE(&FORCE) +
     &DEBUG DATE(&DD&MM&YY) &NOALC
SET &NOALC=NOALC
END
