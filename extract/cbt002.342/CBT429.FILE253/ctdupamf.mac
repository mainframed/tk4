PROC 0 DEBUG  DATE() +
       NOALC   +
       PGMID() +
       CTDSLIB() +
       STEPLIB(SYS1.IOA.V410.LOAD) +
       LANG() +
       DBPREFD(SYSS.CTDO) +
       DBPREFA(SYSS.IOA) +
       ILPREFD(SYSM.CTDI) +
       DBVERD(V310) +
       DBVERA(V410) +
       ILVERD(V310) +
       CTDCAL(SYSS.IOA.V410.CAL) +
       CTDSMIS()  +
       CTDSCAT()  +
       FORCE()
CONTROL MAIN NOLIST NOCONLIST NOSYMLIST NOMSG
IF &DEBUG=DEBUG THEN CONTROL MAIN LIST CONLIST SYMLIST MSG
LSTDS: LISTDSI DACAL FILE PREALLOC
SET  OLDDACAL = &SYSDSNAME
FREE DD(DACAL)
IF &NOALC=NOALC THEN GOTO NOALLOC
FREE DD(DAOUT,SYSPRINT,PRTDBG,DAAMF,DALOG,DAGENUSR)
ALLOC DD(DAGENUSR) +
     DA('&ILPREFD..&ILVERD..PARM') SH
ALLOC DD(DAAMF) +
     DA('&DBPREFD..&DBVERD..AMF') SH
ALLOC DD(DALOG) +
     DA('&DBPREFA..&DBVERA..LOG') SH
ALLOC DD(DAOUT) DA(*)
ALLOC DD(SYSPRINT) DA(*)
ALLOC DD(PRTDBG) SYSOUT(X) HOLD
IF &DEBUG=DEBUG THEN GOTO DEBUGYS
GOTO NOALLOC
DEBUGYS:+
FREE DD(PRTDBG)
ALLOC DD(PRTDBG) DA(*)
NOALLOC:+
ALLOC DD(DACAL) +
     DA('&CTDCAL') SH
IF &FORCE=YES THEN SET FORCE=FORCE
              ELSE SET FORCE=
TSOEXEC CALL '&STEPLIB&LANG(&PGMID)' +
 '&DATE &CTDSLIB &CTDSMIS &CTDSCAT &FORCE'
IF '&OLDDACAL' = '' THEN GOTO NODEALL
IF '&OLDDACAL' = '&CTMCAL' THEN GOTO NODEALL
FREE DD(DACAL)
ALLOC DD(DACAL) DA('&OLDDACAL') SH
NODEALL: END
