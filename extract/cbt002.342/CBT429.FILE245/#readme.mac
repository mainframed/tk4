
  GENERAL NOTES ON THIS LIBRARY
  =============================

  PREPARED - 29/04/93

  BY       - RICHARD HAYDOCK
             SYSTEMS PROGRAMMER
             NORWICH UNION INSURANCE

             EMAIL - GBNUHCCF ON IBM MAIL EXCHANGE
             PHONE - 0603 687709

  FOLLOWING A PRESENTATION ON 'TSO AND PERSONAL USERIDS AT NORWICH
  UNION' GIVEN AT THE UK LARGE SYSTEMS GUIDE ON 24/03/93 (BRITISH GAS,
  SOUTHAMPTON) I PUT THIS COLLECTION OF BITS AND PIECES TOGETHER FOR
  THE GUIDE GOODIES TAPE

  AT NORWICH UNION, A 'PROJECT' IS EFFECTIVELY THE SAME AS A RACF GROUP
  MANY OF OUR TSO USERS BELONG TO MORE THAN ONE 'PROJECT' SO IN THE PAST
  THEY HAD A NUMBER OF TSO USERIDS, BUT NOW THEY HAVE ONE USERID WHICH
  IS CONNECTED TO A NUMBER OF RACF GROUPS FOR TSO PURPOSES

  RACF GROUPS USED FOR TSO AT NU HAVE NAMES WHICH BEGIN 'NU' AND ARE
  5 CHARACTERS IN LENGTH

  THE BITS AND PIECES ARE AS FOLLOWS:

  JCL USED TO CREATE SYSTEM LIBRARIES
  -----------------------------------

  TSOLOAD1- IS USED TO CREATE A SET OF LARGE SYSTEM LIBRARIES FOR USE
            BY ALL TSO USERS ON OUR PRODUCTION SYSTEMS (IBM1 AND IBM2)

  TSOLOAD3- SIMILAR TO TSOLOAD1, BUILDS LIBRARIES FOR IBM3 (OUR MAIN
            TESTING SYSTEM)

  TSOLOAD6- SIMILAR TO TSOLOAD1, BUILDS LIBRARIES FOR IBM6 (OUR SYSTEMS
            PROGRAMMER TEST SYSTEM)

  FOR EACH ENVIRONMENT, WE MAINTAIN TWO SETS OF LIBRARIES - AN 'A' SET
  AND A 'B' SET. AT A GIVEN TIME, ONLY ONE SET IS ALLOCATED TO A LARGE
  NUMBER OF USERS, SO THE OTHER SET CAN BE REBUILT WITHOUT CAUSING
  CONTENTION. ONCE A NEW SET OF LIBRARIES HAS BEEN BUILT AND TESTED, IT
  CAN BE 'ROLLED IN' BY CHANGING THE SYSTEM LEVEL TSO PARAMETERS.

  A FEW DAYS AFTER A SUCCESSFUL 'ROLL-IN' THE INACTIVE SET OF LIBRARIES
  IS RE-BUILT TO MIRROR THE SET JUST ROLLED IN. THIS MEANS WE HAVE TWO
  IDENTICAL SETS WHICH BACK EACH OTHER UP UNTIL WE NEXT NEED TO MAKE
  CHANGES.

  THIS SYSTEM USES SEVERAL HUNDRED CYLINDERS OF EXTRA DASD, BUT GIVES A
  FLEXIBLE AND RESILIENT ENVIRONMENT AND ELIMINATES THE NEED FOR LONG
  CONCATENATIONS OF DATASETS.

  TO MINIMISE THE EXTRA DASD USAGE, WE ONLY COPY THE MOST COMMONLY USED
  ISPF DIALOG ELEMENTS INTO THE LARGE SYSTEM LIBRARIES. GROUPS USING
  LESS COMMONLY USED FACILITIES (SUCH AS RACF DIALOGS) CAN EITHER USE
  FRONT-END DRIVERS TO MAKE NECESSARY ALLOCATIONS AND INVOKE THE
  FACILITY, OR ARRANGE FOR EXTRA ALLOCATIONS TO BE MADE WHEN THEY LOG ON

  LOGON PROCEDURES, 'STARTUP' REXX AND TSO PARAMETERS
  ---------------------------------------------------

  TSODFLT - IS A SIMPLE LOGON PROCEDURE ALLOWING BASIC ISPF ACCESS

  TSOTS   - IS A LOGON PROCEDURE USED BY 'TERMINAL SUPERVISORS' - A
            LARGE GROUP OF TSO USERS WHO DO NOT NEED THE FULL RANGE
            OF POSSIBILITIES OFFERED BY 'TSOPROC'

  TSOPARM - MEMBER OF SYS1.PROCLIB REFERENCED BY 'TSOTS' TO DETERMINE
            WHETHER 'A' OR 'B' SYSTEM LIBRARIES SHOULD BE ALLOCATED

  TSOPROC - IS THE NU 'STANDARD' LOGON PROCEDURE. IT ALLOCATES ONLY
            SYS1.ISRCLIB IN WHICH WE KEEP:

  TSOTESTA- IS SIMILAR TO TSOPROC BUT USED FOR LOGGING ON WITH A NEW
            SET OF 'A' SYSTEM LIBRARIES WHEN THE 'B' LIBRARIES ARE IN
            PRODUCTION. BY USING TSOTESTA, WE CAN GET EARLY WARNING OF
            DIALOG ERRORS WITHOUT EXPOSING ALL OUR USERS TO THEM

            WE ALSO HAVE A PROCEDURE CALLED TSOTESTB FOR TESTING NEW
            'B' LIBRARIES

  STARTUP - A REXX EXEC WHICH ALLOCATES THE USER'S ISPF PROFILES AND
            PROCESSES 'TSO PARAMETER' DATASETS IN ORDER TO DETERMINE
            WHICH DATASETS SHOULD BE ALLOCATED TO THE USER'S TSO/ISPF
            SESSION, AND THEN ALLOCATES THEM. OTHER PROCESSING MAY ALSO
            BE DONE DEPENDING ON THE PARAMETERS ENCOUNTERED.

  PARMSEX - A LIST OF EXAMPLE PARAMETERS SHOWING THE SYNTAX RECOGNISED
            BY 'STARTUP'

  PARMSUSR- MY OWN 'PERSONAL' TSO PARAMETERS FOR USE ON OUR TEST SYSTEM
            (CALLED IBM3). THEY ARE STORED IN THE ISPF PROFILE I USE ON
            IBM3

  PARMSGRP- TSO PARAMETERS FOR USE BY ALL MEMBERS OF THE GROUP (NUSSS)
            TO WHICH I AM CONNECTED FOR TSO PURPOSES

  PARMSSYS- TSO PARAMETERS FOR USE BY ALL USERS OF TSO ON IBM3

  ROG*    - ALL MEMBERS PREFIXED 'ROG' ARE USED TO SET UP ISPF READ
            ONLY VARIABLES FOR ACCOUNT CODE, SYSTEM ID AND RACF CURRENT
            CONNECT GROUP. THE STARTUP REXX INVOKES 'ROGS'

  ISPF DIALOG FOR ADMINISTRATION OF TSO PARAMETERS
  ------------------------------------------------

  ONLY SYSTEMS PROGRAMMERS CAN MODIFY SYSTEM LEVEL PARAMETERS

  TRUSTED INDIVIDUALS WITHIN GROUPS CAN MODIFY THOSE PARAMETERS WHICH
  BELONG TO THEIR GROUP(S) SO THEY HAVE SOME CONTROL OVER WHAT WILL BE
  ALLOCATED TO THEIR GROUP MEMBERS AFTER LOGGING ON.

  INDIVIDUAL USERS CAN (IF THEY WISH) SET UP PERSONAL PARAMETERS IN
  ORDER TO HAVE PERSONALISED ISPF ENVIRONMENTS.

  USERS CAN DISPLAY/MODIFY PARAMETERS AT USER, GROUP OR SYSTEM LEVEL
  IN ISOLATION, OR OBTAIN A 'MERGED' LIST WHICH LOOKS A LITTLE LIKE
  THE RESULT OF ISSUING A 'TSO LISTALC' COMMAND AFTER LOGGING ON.

  NORWICH UNION HAS ITS OWN STANDARD VERSION OF THE 'ISR@PRIM' PANEL
  WHICH WE INSIST ON USERS USING. IT HAS 3 SPECIAL OPTIONS:

  'S' - SYSTEM PROVIDED, NU-SPECIFIC FACILITIES
  'P' - PROJECT FUNCTIONS. THESE FUNCTIONS ARE ENTIRELY UNDER THE
        CONTROL OF THE PROJECT (GROUP OF USERS) SO THERE ARE DIFFERENT
        SETS OF PROJECT FUNCTIONS FOR DIFFERENT RACF GROUPS.
  'U' - USER FUNCTIONS. THESE ARE AVAILABLE FOR INDIVIDUALS FAMILIAR
        WITH ISPF WHO WISH TO SET UP DIALOGS OF THEIR OWN.

  THE ELEMENTS OF THE TSO PARAMETER ADMIN DIALOG ARE:

  TSOA000 - REXX TO DRIVE THE DIALOG (THIS IS PACKAGED AS MEMBER
            TSOA000X HERE, AS ITS NAME IS THE SAME AS ONE OF THE PANELS)

  TSOA000-TSOA006 - PANELS USED BY THIS DIALOG

  TSOA01  - MESSAGES (1)
  TSOA02  - MESSAGES (2)

  TTSOA000-TTSOA003 - HELP PANELS FOR TSOA000-TSOA003

  ISPF DIALOG USED BY USERS CONVERTING TO USE PERSONAL USERIDS FOR TSO
  --------------------------------------------------------------------

  THIS DIALOG BEGINS WITH PANEL SPU (HELP PANEL TSPU).
  MESSAGES ARE IN MEMBER SPUM01
  THERE ARE 4 OPTIONS:

  1 - DISPLAY RACF GROUPS YOU ARE CONNECTED TO, SELECT NEW DEFAULT IF
      DESIRED

  2 - DATASET RENAMING UTILITY (USEFUL FOR USERS WITH LARGE NUMBERS OF
      PERSONAL DATASETS). FOR VSAM DATASETS, DO NOT TRY TO CHANGE THE
      HIGH LEVEL QUALIFIER. THIS UTILITY USES IDCAMS 'ALTER NEWNAME'
      COMMANDS TO RENAME VSAM CLUSTER COMPONENTS.

  3 - DISPLAY/CHANGE ISPF ACCOUNT CODE VARIABLE
      (THE NU-DEFINED ISPF VARIABLE CALLED 'Z#ACCT' IS USED BY THIS
      UTILITY. THE IBM-DEFINED 'ZACCTNUM' VARIABLE IS UNCHANGEABLE)

  4 - ISPF PROFILE CONVERTER. USEFUL FOR USERS WHOSE OLD IDS HAD A HIGH
      LEVEL OF ISPF CUSTOMISATION.

  THE CALL SEQUENCES ARE AS FOLLOWS:

  1 - REXX XNUCHGRP, PANEL NUCHGRP (HELP PANEL - TNUCHGRP)

  2 - REXX XNUDSREN, PANEL NUDSREN (HELP PANEL - TNUDSREN)
      SKEL NUDSREN   INVOKES REXX XNUDSRN1 IN BATCH MODE

      (NOTE - SKEL NUDSREN IS PACKAGED AS SNUDSREN DUE TO NAME CLASH)

  3 - REXX XNUCHACC, PANEL RESETACC (HELP PANEL - TNUCHACC)

  4 - REXX XNUCVPRF, PANEL NUCVPRF (HELP PANEL - TNUCVPRF)
      SKEL NUCVPRF   INVOKES REXX XNUCVPR1 IN BATCH MODE

      (NOTE - SKEL NUCVPRF IS PACKAGED AS SNUCVPRF DUE TO NAME CLASH)

      AFTER USING OPTION 4, USERS ARE INVITED TO RUN THE REXX XNURNPRF
      FROM OUTSIDE ISPF. THIS BACKS UP THE ISPF PROFILE THEY WERE USING
      AND ACTIVATES TO THE ONE JUST CREATED FOR THEM

  OTHER REXX UTILITIES
  --------------------

  CHECKGRP - USED TO CHECK WHETHER OR NOT A USER IS CONNECTED TO A
             SPECIFIED RACF GROUP. THIS IS OFTEN USED AS A CONTROL
             MECHANISM TO DECIDE WHETHER OR NOT IT IS APPROPRIATE FOR
             A GIVEN USER TO USE A CERTAIN APPLICATION.

  XNUCA1A  - USED TO INVOKE THE CA-ONE ISPF DIALOG. CA-ONE IS A TAPE
             MANAGEMENT SYSTEM USED BY A FEW OF OUR GROUPS, SO THOSE
             THAT NEED IT CAN INVOKE IT USING 'XNUCA1A' WITHOUT NEEDING
             TO ALLOCATE ANY OTHER LIBRARIES.

  XNUCA1B  - CALLED BY XNUCA1A TO COMPLETE THE INVOCATION OF CA-ONE

  XNUTSM53 - USED TO INVOKE TSO/MON 5.3
             THIS INVOCATION IS SIMPLER THAN THAT OF CA-ONE SINCE
             NO ISPF 'NEWAPPL' IS INVOLVED

  ASSEMBLER CODE
  --------------

  ISP*     - USED TO MAKE ISPF USER EXIT 16 WORK. APART FROM CODING UP
             ISPF EXIT 16 ITSELF, THE INSTALLATION ALSO HAS TO CODE A
             MODIFIED 'ISPDFLTS' MODULE TO INDICATE TO ISPF THAT USER
             EXITS ARE BEING TAKEN, AND 'ISPXDT' (EXIT DEFINITION TABLE)
             TO IDENTIFY WHICH EXITS ARE IN USE, WHAT THE CSECT NAMES
             ARE ETC. SEE ISPF 'INSTALLATION & CUSTOMISATION' FOR MORE
             DETAILS.

  IEFUTL   - NU VERSION OF THE SMF USER TIME LIMIT EXIT. SHOWS HOW RACF
             IS USED TO CONTROL WHICH USERS ARE EXEMPT FROM TIMEOUT
             CONTROL AND CPU TIME LIMIT CONTROL. THIS VERSION OF IEFUTL
             NO LONGER REQUIRES ANY MODIFICATION BY US.

  NUIGACCT - TSO COMMAND USED TO SET UP ISPF VARIABLES FOR ACCOUNT CODE
             SYSTEM NAME AND CURRENT RACF CONNECT GROUP

             DSMMACS AND NUTETE ARE NEEDED TO ASSEMBLE NUIGACCT - IT
             HAS TO RUN IN AN ISPF ENVIRONMENT

  FINDGRP  - TSO COMMAND USED TO SET UP TSO VARIABLE 'GRPID' AND OTHERS
             (SEE SOURCE). USEFUL IN CLISTS OR REXXS TO FIND A USER'S
             CURRENT CONNECT GROUP WHEN PERSONAL USERIDS ARE IN USE.

  FINDSYS  - TSO COMMAND USED TO SET UP TSO VARIABLE 'SYSID'

  THE FINDGRP AND FINDSYS COMMANDS ARE BOTH USED BY THE 'STARTUP' REXX

