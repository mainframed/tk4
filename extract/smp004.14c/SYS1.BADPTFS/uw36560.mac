++ PTF (UW36560)        /*
//UW36560  JOB 5752-36560,SC1T3,MSGLEVEL=(1,1),CLASS=A     */  .
++ VER (Z038)
   FMID(ETI1106)
   PRE  (UY49086)
   SUP  (UW35631,AW25564,AW24894)
 /*
   PROBLEM DESCRIPTION(S):
     OW25564 -
       ADD FIELDS TO IKJTSB FOR TSOE

   COMPONENT:  5752-SC1T3-ETI1106
   APARS FIXED: OW25564
   SPECIAL CONDITIONS:
    NONE:
   COMMENTS:
     CROSS REFERENCE-MODULE/MACRO NAMES TO APARS
      IKJTSB    OW25564

     CROSS REFERENCE-APARS TO MODULE/MACRO NAMES
      OW25564   IKJTSB

     THE FOLLOWING MODULES AND/OR MACROS ARE AFFECTED BY THIS PTF:

     MACROS
      IKJTSB

     LISTEND
 */.
++ MAC      (IKJTSB  ) DISTLIB(ATSOMAC ) SYSLIB(MACLIB).
*/*MACMEAN TSB MEANS TERMINAL STATUS BLOCK                           */
*/*MACCOMP Y-2 SC1T3/SJE85                                           */
*/*MACSTAT Y-2 72347/029010                                          */
*        %GOTO TSBL2;
*/*
         MACRO
         IKJTSB &LIST=NO,&EXT=NO                               ZA16607
TSB      DSECT
***********************************************************************
*
*
*        THE TSB WILL CONTAIN INFORMATION PERTAINING TO A TERMINAL
*        USER'S STATUS.  IT IS OBTAINED DURING TIOC INITIALIZATION
*        AND WILL RESIDE IN THE COMMON AREA.  TSO.VTAM TSB'S   @ZA16607
*        ARE OBTAINED DYNAMICALLY AS NEEDED                    @ZA16607
*
*        UPDATING OF FIELDS IN THIS CONTROL BLOCK MUST BE
*        SYNCHRONIZED BY HOLDING THE CMS LOCK, EXCEPT FOR
*        THE FOLLOWING FIELDS WHICH MUST BE UPDATED USING
*        COMPARE AND SWAP:
*
*              TSBSTAX
*              TSBATTNC
*              TSBTPOST
*
*        METHOD OF ACCESS                                      @ZA16607
*         BAL- IF EXT=YES IS SPECFIED, A DSECT IS PRODUCED FOR @ZA16607
*              TSB EXTENTION (TSBX).  USING ON TSBX GIVES      @ZA16607
*              ADDRESSABILITY FOR ALL TSBX SYMBOLS.            @ZA16607
*         PL/S-SPECIFY %TSBEXT='YES' BEFORE INCLUDING IKJTSB   @ZA16607
*              IF THE TSB EXTENTION (TSBX) IS TO BE MAPPED.    @ZA16607
*              TSBX IS BASED ON TSBEXTNT.                      @ZA16607
*         **NOTE** USE OF EXT=YES FOR BAL OR %TSBEXT=YES FOR   @ZA25904
*                  PL/S IS VALID ONLY FOR SYSTEMS WITH         @ZA25904
*                  TSO/VTAM. USE OF EITHER PARAMETER ON        @ZA25904
*                  SYSTEMS WITHOUT TSO/VTAM WILL RESULT IN     @ZA25904
*                  ASSEMBLER OR COMPILER ERRORS.               @ZA25904
*                                                              @ZA25904
*        CHANGE ACTIVITY
*         AUG 1976 - SU13 TSO/VTAM                             @ZA16607
*         AUG 1977 - SU35 TSO/VTAM LEVEL 3.0 +FEATURES       - @G35SKSR
*        SEPT 1977 - TIOC/VTIOC SPLIT                        - @ZA25904
* C217250-217400,576500-578000                                 @OZ49608
* C217250,576500                                               @OZ46377
* $A=OZ56745    ETI1106  81.07.20  592303:                         @N1A
* A238000,812000 C748800-750000                                    @N1A
* A232000                                                      @OZ59270
* C745200,746000                                               @OZ59270
* A232000    C744800                                           @OZ90546
* NOCHANGE SHIPPED WITH JCLIN                                  @OY20024
* $  =OW24894 ETI1106 012397 043319: ADD TSO USE FIELDS        @OW24894
* $  =OW25564 ETI1106 022797 043319: ADD TSO USE FIELDS        @OW25564
*
***********************************************************************
         AIF   ('&LIST' EQ 'YES').L10
*
*        SPECIFY LIST=YES ON THE MACRO CALL TO OBTAIN A LISTING.
*
         PUSH  PRINT
         PRINT OFF
.L10     ANOP
         DS    0D .                     MUST BEGIN ON DOUBLEWORD
TSBASCBA DS    0A .                     POINTER TO ASCB
*
TSBSTAT  DS    X .                      TERMINAL STATUS BYTE
*                       BIT DEFINITIONS
TSBINUSE EQU   X'80' .                  TSB IN USE
TSBLWAIT EQU   X'40' .                  KEYBOARD LOCKED DUE TO A LACK
*                                       OF INPUT BUFFERS
TSBDSPLY EQU   X'20' .                  TSB REPRESENTS A DISPLAY SCREEN
TSBNOBUF EQU   X'10' .                  INDICATES TPUT FOUND NO BUFFERS
TSBITOFF EQU   X'08' .                  PROHIBIT NON-SUPERVISORY INTER-
*                                       TERMINAL MSGS TO USERS TERMINAL
TSBDISC  EQU   X'04' .                  TSB HAS BEEN THRU LOGOFF
TSB3270  EQU   X'02' .                  TSB REPRESENTS A 3270 TERMINAL
TSBATNLD EQU   X'01' .                  ATTN FOR INPUT LINE DELETE
*
TSBASCB  DS    AL3 .                    POINTER TO ASCB
*
TSBFLG1  DS    X .                      FIRST FLAG BYTE
*                       BIT DEFINITIONS
TSBANSR  EQU   X'80' .                  ATTN SIMULATION REQUESTED
TSBOFLSH EQU   X'40' .                  OUTPUT TRAILER Q IS TO BE
*                                       FLUSHED
TSBOWIP  EQU   X'20' .                  A TPUT IS IN PROGRESS
TSBWOWIP EQU   X'10' .                  WAITING IN OWAIT IN PROGRESS
TSBIFLSH EQU   X'08' .                  INPUT QUEUE FLUSH IN PROGRESS
TSBTJOW  EQU   X'04' .                  TJID TPUT ENCOUNTERED OWIP
TSBTJIP  EQU   X'02' .                  A TJID TPUT IS IN PROGRESS
TSBTJBF  EQU   X'01' .                  TJID TPUT FOUND NO TS BUFFERS
*
TSBWTCB  DS    AL3 .                    ADDR OF TCB OF TASK WAITING ON
*                                       TSBECB
TSBLNSZ  DS    X .                      PHYSICAL LINE SIZE OF TERMINAL
TSBOTBFP DS    AL3 .                    PTR TO TRAILER BUFFER(S) AFTER
*                                       HEADER BUFFER FOR MSG HAS BEEN
*                                       REMOVED
TSBNOBF  DS    X .                      NO. OF BUFFERS ON OUTPUT QUEUE
TSBOBFP  DS    AL3 .                    PTR TO OUTPUT BUFFER QUEUE
*
TSBFLG2  DS    X .                      SECOND FLAG BYTE
*                       BIT DEFINITIONS
TSBBIPI  EQU   X'80' .                  PARTIAL LINE PROMPTING COMPLETE
TSBAUTON EQU   X'40' .                  AUTO PROMPTING REQUESTED
TSBBRKIN EQU   X'20' .                  BREAKIN HAS OCCURED
TSBAULST EQU   X'10' .                  AUTO LINE NUMBERING STARTED
TSBAUTOC EQU   X'08' .                  AUTO CHARACTER PROMPT STARTED
TSBSTAUT EQU   X'04' .                  PROMPT USER WITH NEXT LINE NO.
TSBSATN1 EQU   X'02' .                  BITS 6 AND 7 ARE USED TO IND
TSBSATN2 EQU   X'01' .                  THE NO. OF CHARS (1-4) IN THE
*                                       CHAR STRING FOR SIMULATED ATTN
*
TSBITBFP DS    AL3 .                    PTR TO INPUT TRAILER BUFFERS
*                                       RESULTING FROM TGET WITH
*                                       INSUFFICIENT BUFFER SIZE
TSBNIBF  DS    X .                      NO. OF BUFFERS ON INPUT QUEUE
TSBIBFP  DS    AL3 .                    PTR TO INPUT BUFFER QUEUE
*
TSBFLG3  DS    X .                      THIRD FLAG BYTE
*                       BIT DEFINITIONS
TSBATTN  EQU   X'80' .                  ATTENTION HAS BEEN IGNORED
TSBTJMSG EQU   X'40' .                  TSOUTPUT PROCESSING TJID MSG
TSBSPIT  EQU   X'20' .                  STOP PROMPTING IF TCLEARQ OR
*                                       STBREAK
TSBNBKSP EQU   X'10' .                  NEXT CHAR IN USER'S BFFR IS A
*                                       BACKSPACE CHAR
TSBAWOIP EQU   X'08' .                  AN ASID TPUT IS WAITING
*                                       FOR A NORMAL TPUT TO COMPLETE
TSBTPUT  EQU   X'04' .                  TCAM PROCESSING OF A
*                                       TPUT IS NOT YET COMPLETE
*                                       (CORRESPONDS TO QCBTPUT)
TSBNOBRK EQU   X'02' .                  USE OF BREAK FEATURE
*                                       NOT CURRENTLY ALLOWED
*                                       FOR THIS TERMINAL
TSBNFLOP EQU   X'01' .                  FLASHBACK BIT          @ZA02244
TSBFLG5  DS    X .                      FIFTH FLAG BYTE        @ZA16607
*                      BIT DEFINITIONS                         @ZA16607
TSBATMP  EQU   X'80' .                  TERM. CONTROL ROUTINE ACTIVE
*                                       FOR THIS TERMINAL      @ZA24648
TSBSPF   EQU   X'40'                    SPF ACTIVE FOR THIS TERMINAL
TSBLOGON EQU   X'20'                    LOGON INITALIZATION    @OZ46377
TSBPARM  EQU   X'10'                    EXTENDED PARM          @OZ46377
TSBQRY   EQU   X'08'                    CURRENT TERMINAL       @OZ49608
*                                       SUPPORTS DEVICE QUERY  @OZ49608
TSBNEDIT EQU   X'04'                    NOEDIT MODE IN EFFECT  @OZ49608
TSBKEYS  EQU   X'02' .                  PASS ATTN. AND CLEAR KEYS
*                                       TO COMMAND PROCESSOR   @ZA24648
TSBVTAM  EQU   X'01' .                  THIS IS A VTAM TSB     @ZA16607
*                                                              @ZA16607
TSBTERMC DS    0CL2 .                   TERMINAL CHARACTERISTICS
TSBTERM1 DS    X .                      1ST FLAG BYTE
TSBCIHBN EQU   X'80' .                  TIME-OUT INHIBITED
TSBCBRK  EQU   X'40' .                  BREAK FEATURE
TSBCATTN EQU   X'20' .                  ATTENTION FEATURE
TSBC5041 EQU   X'10' .                  LINE IS 5041
TSBC2741 EQU   X'08' .                  TERMINAL IS 2741
TSBSIMND EQU   X'04' .                  SIMMATTN REMEMBER BIT  @OZ90546
TSBTSTR  EQU   X'02' .                  TCAM TRACE ACTIVE      @OZ59270
TSBTGET  EQU   X'01' .                  TCAM TGET NOT COMPLETE @OZ59270
*
TSBTERM2 DS    X .                      2ND FLAG BYTE
TSBCTWX  EQU   X'20' .                  TERMINAL IS TWX
*        EQU   X'10' .                  RESERVED                   @N1A
TSBALTCF EQU   B'00001100' .            ALTERNATE CODE FLAGS       @N1A
*                                       TWO BIT FIELD REPRESENTING @N1A
*                                       THE FOLLOWING BIT VALUES   @N1A
*                                       ASCII-7 00,ASCII-8 01,     @N1A
*                                       RESERVED 10, RESERVED 11   @N1A
TSBASCI7 EQU   B'11110011' .            THE NEGATIVE TO BE USED    @N1A
*                                       TO INDICATE THAT ASCII-7   @N1A
*                                       IS BEING USED............  @N1A
*                                       ...........ASCII-7 EQU 00  @N1A
TSBASCI8 EQU   B'00000100' .            ASCII-8 ALTERNATE CODE     @N1A
*                                       CURRENTLY BEING USED       @N1A
*        EQU   B'00001000' .            RESERVED                   @N1A
*        EQU   B'00001100' .            RESERVED                   @N1A
TSBALTCD EQU   X'02' .                  THE RESOURCE IS USING AN   @N1A
*                                       ALTERNATE CODE             @N1A
TSBC1050 EQU   X'01' .                  TERMINAL IS 1050
*
TSBECB   DS    F .                      ECB FOR INTER-TERMINAL COM-
*                                       MUNICATION (TPUT WITH TJID)
TSBWTJID DS    H .                      TJID OF TASK WAITING ON TSBECB
TSBSTCC  DS    0H .                     SPECIAL USER CHAR FIELD
TSBLNDCC DS    CL1 .                    LINE DELETE CHARACTER
TSBCHDCC DS    CL1 .                    CHARACTER DELETE CHARACTER
TSBATNLC DS    CL2 .                    NO. OF SUCCESSIVE OUTPUT LINES
*                                       BETWEEN ATTENTION SIMULATION
TSBATNTC DS    CL2 .                    NUMBER OF CONTINUOUS 1-SECOND
*                                       TIME INTERVALS
TSBLNNO  DS    CL1 .                    NO. OF LINES ON A DISPLAY
*                                       SCREEN
*
TSBFLG4  DS    X .                      FLAG BYTE
*                      BIT DEFINITIONS
TSBOCAB  EQU   X'80' .                  OUT-OF-CORE ABEND
TSBIWAIT EQU   X'40' .                  INPUT WAIT IN PROGRESS
TSBOWAIT EQU   X'20' .                  OUTPUT WAIT IN PROGRESS
TSBHUNG  EQU   X'10' .                  TERMINAL HAS HUNG UP
TSBHOLD  EQU   X'08' .                  TPUT HOLD IN PROGRESS
TSBCANC  EQU   X'04' .                  SESSION CANCELLED
TSBGETBF EQU   X'02' .                  TJID TPUT MAY GET AN EXTRA
*                                       ALLOWANCE OF OUTPUT BUFFERS
TSBHLDL  EQU   X'01' .                  DON'T DISCONNECT LINE
*                                       AFTER LOGOFF
TSBASRCE DS    CL2 .                    TCAM TERMINAL INDEX.
*                                       EQUIVALENT TO PRFSRCE IN
*                                       TCAM INPUT BUFFERS.
TSBATNCC DS    CL4 .                    CHARACTER STRING USED FOR
*                                       ATTENTION SIMULATION
TSBAUTOS DS    F .                      STARTING AND CURRENT SEQ NO.
*                                       FOR AUTO LINE NUMBERING
TSBAUTOI DS    F .                      INCREMENT VALUE FOR AUTO LINE
*                                       NUMBERING
TSBERSDS DS    F .                      CHARS USED TO ERASE SCREEN
*
TSBCTCB  DS    F .                      TCB ADDRESS OF TASK CURRENTLY
*                                       DOING A TPUT
*              -- FOLLOWING 16 BYTES ARE DOUBLY DEFINED --     @OW24894
*                     TSO/VTAM FIELD DEFINITION:               @OW24894
TSBRECAP DS    0CL8                     TCAS APPL LU NAME      @OW24894
*                                       USED FOR RECONNECT IN  @OW24894
*                                       SYSPLEX ENVIRONMENT    @OW24894
*                     TCAM FIELD DEFINITIONS:
TSBRCB   DS    0XL8 .                   TCAM RESOURCE CTL BLK
TSBRQCB  DS    A .                      RCB QCB POINTER
TSBLINKA DS    0A .                     RCB LINK WORD
TSBPRI   DS    X .                      TPOSTING PRIORITY
TSBLINKB DS    AL3 .                    RCB LINKING FIELD
*
*                     TSO/VTAM FIELD DEFINITION:               @OW24894
TSBALUNM DS    0CL8                     VTAM APPL LU NAME      @OW24894
TSBTPOST DS    0D .                     TPOSTING COMMUNICATIONS AREA
*                                       UPDATED ONLY WITH CS/CDS
TSBTPFLG DS    X .                      TPOSTING FLAGS
*                     BIT DEFINITIONS
*        BITS  3 - 7                    RESERVED
TSBPOSTO EQU   X'80' .                  TPOST OF TSB OUTSTANDING
TSBTPQCB EQU   X'40' .                  TPOST TERM. DEST. QCB
TSBTPAYI EQU   X'20' .                  TPOST TSI TO TSINPUT
TSBNEWID EQU   X'10' .                  UPDATE QCB TJID WITH
*                                       NEW ASCBASID
*
TSBSBASV DS    CL1  .                   NO. OF SBA CHAR. IN    @ZA11104
*                                       FOLLOWING BUFFER       @ZA11104
TSBFLAGM DS    X .                      QCBFLAG SUBSTITUTION MASK.
*                                       INDICATES BIT POSITIONS TO
*                                       CHANGE IN QCBFLAG.
TSBFLAGV DS    X .                      QCBFLAG SUBSTITUTION VALUE.
*                                       INDICATES BIT VALUES TO
*                                       SUBSTITUTE FOR CHANGING
*                                       BIT POSITIONS IN QCBFLAG.
TSBF2M   DS    X .                      QCBTSOF2 SUBSTITUTION MASK
TSBF2V   DS    X .                      QCBTSOF2 SUBSTITUTION VALUE
TSBF1M   DS    X .                      QCBTSOF1 SUBSTITUTION MASK
TSBF1V   DS    X .                      QCBTSOF1 SUBSTITUTION VALUE
*
TSBATTNC DS    X .                      NO. OF UNPROCESSED ATTN'S
TSBSTAX  DS    X .                      NO. OF UNSCHEDULED STAX EXITS
TSBLINE  DS    CL2 .                    LINE ADDRESS OR 3705
*                                       RESOURCE I.D. OF THIS
*                                       TERMINAL.
TSBLECB  DS    0A .                     TIOC LOGOFF WAITS ON THIS ECB
*                                       WHILE TIOC FINISHES TCAM
*                                       PROCESSING FOR A
*                                       TERMINATING MEMORY.
TSBMINL  DS    F .                      NO. OF MINUTES LEFT
*                                       BEFORE A DISCONNECTED
*                                       USER WILL BE LOGGED OFF.
TSBPSWD  DS    CL8 .                    LOGON PASSWORD
TSBEXTNT DS    F .                      ADDRESS OF TSB EXTENTION
*                                                              @ZA16607
TSBPRMR  DS    AL1 .                    NDS PRIM(DEFAULT) ROWS @G35SKSR
TSBPRMC  DS    AL1 .                    NDS PRIM(DEFAULT) COLS @G35SKSR
TSBALTR  DS    AL1 .                    NDS ALTERNATE ROWS     @G35SKSR
TSBALTC  DS    AL1 .                    NDS ALTERNATE COLS     @G35SKSR
TSBTRMID DS    D .                      TERMINAL SYMBOLIC NAME @G32TKKM
TSBSF1   DS    D .                      SECURITY FIELD 1       @G32TKKM
TSBEND   DS    0D .                     MARKS THE END OF THE TSB
*
*        *************************************************************
*    0   *   TSBSTAT    *                  TSBASCB                   *
*        *************************************************************
*    4   *   TSBFLG1    *                  TSBWTCB                   *
*        *************************************************************
*    8   *   TSBLNSZ    *                  TSBOTBFP                  *
*        *************************************************************
*   12   *   TSBNOBF    *                  TSBOBFP                   *
*        *************************************************************
*   16   *   TSBFLG2    *                  TSBITBFP                  *
*        *************************************************************
*   20   *   TSBNIBF    *                  TSBIBFP                   *
*        *************************************************************
*   24   *   TSBFLG3    *   TSBFLG5    *           TSBTERMC          *
*        *************************************************************
*   28   *                         TSBECB                            *
*        *************************************************************
*   32   *           TSBWTJID          *           TSBSTCC           *
*        *************************************************************
*   36   *           TSBATNLC          *           TSBATNTC          *
*        *************************************************************
*   40   *   TSBLNNO    *   TSBFLG4    *           TSBASRCE          *
*        *************************************************************
*   44   *                         TSBATNCC                          *
*        *************************************************************
*   48   *                         TSBAUTOS                          *
*        *************************************************************
*   52   *                         TSBAUTOI                          *
*        *************************************************************
*   56   *                         TSBERSDS                          *
*        *************************************************************
*   60   *                         TSBCTCB                           *
*        *************************************************************
*   64   *                         TSBRQCB                           *
*        *************************************************************
*   68   *   TSBPRI     *                  TSBLINK                   *
*        *************************************************************
*   72   *   TSBTPFLG   *  RESERVED    *   TSBFLAGM   *   TSBFLAGV   *
*        *************************************************************
*   76   *   TSBF2M     *   TSBF2V     *   TSBF1M     *   TSBF1V     *
*        *************************************************************
*   80   *   TSBATTNC   *   TSBSTAX    *           TSBLINE           *
*        *************************************************************
*   84   *                       TSBLECB/MINL                        *
*        *************************************************************
*        *                                                           *
*   88   *                         TSBPSWD                           *
*        *                                                           *
*        *************************************************************
*   96   *                         TSBEXTNT                          *
*        *************************************************************
*  100   * TSBPRMR      * TSBPRMC     * TSBALTR      * TSBALTC       *
*        *************************************************************
*        *                                                           *
*  104   *                         TSBTRMID                          *
*        *                                                           *
*        *************************************************************
*        *                                                           *
*  112   *                          TSBSF1                           *
*        *                                                           *
*        *************************************************************
*
         AIF   ('&EXT' EQ 'NO').TSBXA1                         @ZA16607
         IKTTSBX                                               @ZA34273
.TSBXA1  ANOP                                                  @ZA25904
         SPACE 3
         AIF   ('&LIST' EQ 'YES').L20
         POP   PRINT
.L20     ANOP
         MEND      ,   */
*        %TSBL2: ;
*DECLARE
*  1 TSB      BASED(TSBPTR),
*
*   2 TSBASCBA    PTR(31) BDY(DWORD),    /* . POINTER TO ASCB
*                                                                    */
*    3 TSBSTAT     CHAR(1),              /* . TERMINAL STATUS BYTE
*                                           BIT DEFINITIONS          */
*     4 TSBINUSE BIT(1),                 /* . TSB IN USE             */
*     4 TSBLWAIT BIT(1),                 /* . KEYBOARD LOCKED DUE TO
*                                           A LACK  OF INPUT BUFFERS */
*     4 TSBDSPLY BIT(1),                 /* . TSB REPRESENTS A
*                                           DISPLAY SCREEN           */
*     4 TSBNOBUF BIT(1),                 /* . INDICATES TPUT FOUND
*                                           NO BUFFERS               */
*     4 TSBITOFF BIT(1),                 /* . PROHIBIT
*                                           NON-SUPERVISORY INTER-
*                                           TERMINAL MSGS TO USERS
*                                           TERMINAL                 */
*     4 TSBDISC  BIT(1),                 /* . TSB HAS BEEN THRU
*                                           LOGOFF                   */
*     4 TSB3270  BIT(1),                 /* . TSB REPRESENTS A 3270
*                                           TERMINAL                 */
*     4 TSBATNLD BIT(1),                 /* . ATTN FOR INPUT LINE
*                                           DELETE
*                                                                    */
*    3 TSBASCB    PTR(24) BDY(WORD,2),   /* . POINTER TO ASCB
*                                                                    */
*   2 TSBFLG1     CHAR(1),               /* . FIRST FLAG BYTE  BIT
*                                           DEFINITIONS              */
*    3 TSBANSR  BIT(1),                  /* . ATTN SIMULATION
*                                           REQUESTED                */
*    3 TSBOFLSH BIT(1),                  /* . OUTPUT TRAILER Q IS TO
*                                           BE  FLUSHED              */
*    3 TSBOWIP  BIT(1),                  /* . A TPUT IS IN PROGRESS  */
*    3 TSBWOWIP BIT(1),                  /* . WAITING IN OWAIT IN
*                                           PROGRESS                 */
*    3 TSBIFLSH BIT(1),                  /* . INPUT QUEUE FLUSH IN
*                                           PROGRESS                 */
*    3 TSBTJOW  BIT(1),                  /* . TJID TPUT ENCOUNTERED
*                                           OWIP                     */
*    3 TSBTJIP  BIT(1),                  /* . A TJID TPUT IS IN
*                                           PROGRESS                 */
*    3 TSBTJBF  BIT(1),                  /* . TJID TPUT FOUND NO TS
*                                           BUFFERS
*                                                                    */
*   2 TSBWTCB     PTR(24)  BDY(WORD,2),  /* . ADDR OF TCB OF TASK
*                                           WAITING ON  TSBECB       */
*   2 TSBLNSZ     CHAR(1),               /* . PHYSICAL LINE SIZE OF
*                                           TERMINAL                 */
*   2 TSBOTBFP    PTR(24)  BDY(WORD,2),  /* . PTR TO TRAILER
*                                           BUFFER(S) AFTER  HEADER
*                                           BUFFER FOR MSG HAS BEEN
*                                           REMOVED                  */
*   2 TSBNOBF     CHAR(1),               /* . NO. OF BUFFERS ON
*                                           OUTPUT QUEUE             */
*   2 TSBOBFP     PTR(24)  BDY(WORD,2),  /* . PTR TO OUTPUT BUFFER
*                                           QUEUE
*                                                                    */
*   2 TSBFLG2     CHAR(1),               /* . SECOND FLAG BYTE  BIT
*                                           DEFINITIONS              */
*    3 TSBBIPI  BIT(1),                  /* . PARTIAL LINE PROMPTING
*                                           COMPLETE                 */
*    3 TSBAUTON BIT(1),                  /* . AUTO PROMPTING
*                                           REQUESTED                */
*    3 TSBBRKIN BIT(1),                  /* . BREAKIN HAS OCCURED    */
*    3 TSBAULST BIT(1),                  /* . AUTO LINE NUMBERING
*                                           STARTED                  */
*    3 TSBAUTOC BIT(1),                  /* . AUTO CHARACTER PROMPT
*                                           STARTED                  */
*    3 TSBSTAUT BIT(1),                  /* . PROMPT USER WITH NEXT
*                                           LINE NO.                 */
*    3 TSBSATN1 BIT(1),                  /* . BITS 6 AND 7 ARE USED
*                                           TO IND                   */
*    3 TSBSATN2 BIT(1),                  /* . THE NO. OF CHARS (1-4)
*                                           IN THE  CHAR STRING FOR
*                                           SIMULATED ATTN
*                                                                    */
*   2 TSBITBFP    PTR(24)  BDY(WORD,2),  /* . PTR TO INPUT TRAILER
*                                           BUFFERS  RESULTING FROM
*                                           TGET WITH  INSUFFICIENT
*                                           BUFFER SIZE              */
*   2 TSBNIBF     CHAR(1),               /* . NO. OF BUFFERS ON
*                                           INPUT QUEUE              */
*   2 TSBIBFP     PTR(24)  BDY(WORD,2),  /* . PTR TO INPUT BUFFER
*                                           QUEUE
*                                                                    */
*   2 TSBFLG3     CHAR(1),               /* . THIRD FLAG BYTE        */
*    3 TSBATTN  BIT(1),                  /* . ATTENTION HAS BEEN
*                                           IGNORED                  */
*    3 TSBTJMSG BIT(1),                  /* . TSOUTPUT PROCESSING
*                                           TJID MSG                 */
*    3 TSBSPIT  BIT(1),                  /* . STOP PROMPTING IF
*                                           TCLEARQ OR  STBREAK      */
*    3 TSBNBKSP BIT(1),                  /* . NEXT CHAR IN USER'S
*                                           BFFR IS A  BACKSPACE
*                                           CHAR                     */
*    3 TSBAWOIP BIT(1),                  /* . AN ASID TPUT IS
*                                           WAITING   FOR A NORMAL
*                                           TPUT TO COMPLETE         */
*    3 TSBTPUT  BIT(1),                  /* . TCAM PROCESSING OF A
*                                           TPUT IS NOT YET COMPLETE
*                                           (CORRESPONDS TO QCBTPUT) */
*    3 TSBNOBRK BIT(1),                  /* . USE OF BREAK FEATURE
*                                           NOT CURRENTLY ALLOWED
*                                           FOR THIS TERMINAL        */
*    3 TSBNFLOP BIT(1),                  /* FLASHBACK OF PASSWORD    */
*   2 TSBFLG5     CHAR(1),               /* . FIFTH FLAG BYTE.
*                                                            @ZA16607*/
*    3 TSBATMP       BIT(1),             /* . TERM. CONTROL ROUTINE
*                                           ACTIVE FOR THIS TERMINAL
*                                                            @ZA24648*/
*    3 TSBSPF        BIT(1),             /* . SPF ACTIVE FOR THIS
*                                           TERMINAL         @A29425Z*/
*    3 TSBLOGON      BIT(1),            /* LOGON INIT.       @OZ46377*/
*    3 TSBPARM       BIT(1),            /* EXTENDED PARM     @OZ46377*/
*    3 TSBQRY        BIT(1),            /* CURRENT TERMINAL SUPPORTS
*                                           DEVICE QUERY     @OZ49608*/
*    3 TSBNEDIT      BIT(1),            /* NOEDIT MODE IS IN EFFECT
*                                                            @OZ49608*/
*    3 TSBKEYS       BIT(1),             /* . PASS ATTN. AND CLEAR KEYS
*                                           TO COMMAND PROCESSOR
*                                                            @ZA24648*/
*    3 TSBVTAM       BIT(1),             /* . THIS IS A VTAM TSB
*                                                            @ZA16607*/
*   2 TSBTERMC    CHAR(2),               /* . TERMINAL
*                                           CHARACTERISTICS          */
*    3 TSBTERM1    CHAR(1),              /* . 1ST FLAG BYTE          */
*     4 TSBCIHBN BIT(1),                 /* . TIME-OUT INHIBITED     */
*     4 TSBCBRK  BIT(1),                 /* . BREAK FEATURE          */
*     4 TSBCATTN BIT(1),                 /* . ATTENTION FEATURE      */
*     4 TSBC5041 BIT(1),                 /* . LINE IS 5041           */
*     4 TSBC2741 BIT(1),                 /* . TERMINAL IS 2741
*                                                                    */
*     4 TSBSIMND BIT(1),                 /* SIMMULATED ATTENTION
*                                        REMEMBER BIT (TCAM) @OZ90546*/
*     4 TSBTSTR  BIT(1),                 /* TCAM TRACE ACTIVE@OZ59270*/
*     4 TSBTGET  BIT(1),                 /* TCAM TGET ACTIVE @OZ59270*/
*    3 TSBTERM2    CHAR(1),              /* . 2ND FLAG BYTE          */
*     4 *        BIT(1),                 /* RESERVED                 */
*     4 *        BIT(1),                 /* RESERVED                 */
*     4 TSBCTWX  BIT(1),                 /* . TERMINAL IS TWX        */
*     4 *        BIT(1),                 /* RESERVED                 */
*     4 TSBALTCF      BIT(2),            /* ALTERNATE CODE FLAGS @N1C*/
*     4 TSBALTCD BIT(1),                 /* USING ALTERNATE CODE @N1C*/
*     4 TSBC1050 BIT(1),                 /* . TERMINAL IS 1050
*                                                                    */
*   2 TSBECB      FIXED(31),             /* . ECB FOR INTER-TERMINAL
*                                           COM-  MUNICATION (TPUT
*                                           WITH TJID)               */
*   2 TSBWTJID    FIXED(15),             /* . TJID OF TASK WAITING
*                                           ON TSBECB                */
*   2 TSBSTCC     FIXED(15),             /* . SPECIAL USER CHAR
*                                           FIELD                    */
*    3 TSBLNDCC    CHAR(1),              /* . LINE DELETE CHARACTER  */
*    3 TSBCHDCC    CHAR(1),              /* . CHARACTER DELETE
*                                           CHARACTER                */
*   2 TSBATNLC    CHAR(2),               /* . NO. OF SUCCESSIVE
*                                           OUTPUT LINES  BETWEEN
*                                           ATTENTION SIMULATION     */
*   2 TSBATNTC    CHAR(2),               /* . NUMBER OF CONTINUOUS
*                                           1-SECOND  TIME INTERVALS */
*   2 TSBLNNO     CHAR(1),               /* . NO. OF LINES ON A
*                                           DISPLAY  SCREEN
*                                                                    */
*   2 TSBFLG4     CHAR(1),               /* . FLAG BYTE  BIT
*                                           DEFINITIONS              */
*    3 TSBOCAB  BIT(1),                  /* . OUT-OF-CORE ABEND      */
*    3 TSBIWAIT BIT(1),                  /* . INPUT WAIT IN PROGRESS */
*    3 TSBOWAIT BIT(1),                  /* . OUTPUT WAIT IN
*                                           PROGRESS                 */
*    3 TSBHUNG  BIT(1),                  /* . TERMINAL HAS HUNG UP   */
*    3 TSBHOLD  BIT(1),                  /* . TPUT HOLD IN PROGRESS  */
*    3 TSBCANC  BIT(1),                  /* . SESSION CANCELLED      */
*    3 TSBGETBF BIT(1),                  /* . TJID TPUT MAY GET AN
*                                           EXTRA  ALLOWANCE OF
*                                           OUTPUT BUFFERS           */
*    3 TSBHLDL  BIT(1),                  /* . DON'T DISCONNECT LINE
*                                           AFTER LOGOFF             */
*   2 TSBASRCE    CHAR(2),               /* . TCAM TERMINAL INDEX.
*                                           EQUIVALENT TO PRFSRCE IN
*                                           TCAM INPUT BUFFERS.      */
*   2 TSBATNCC    CHAR(4),               /* . CHARACTER STRING USED
*                                           FOR  ATTENTION
*                                           SIMULATION               */
*   2 TSBAUTOS    FIXED(31),             /* . STARTING AND CURRENT
*                                           SEQ NO.  FOR AUTO LINE
*                                           NUMBERING                */
*   2 TSBAUTOI    FIXED(31),             /* . INCREMENT VALUE FOR
*                                           AUTO LINE  NUMBERING     */
*   2 TSBERSDS    FIXED(31),             /* . CHARS USED TO ERASE
*                                           SCREEN
*                                                                    */
*   2 TSBCTCB     FIXED(31),             /* . TCB ADDRESS OF TASK
*                                           CURRENTLY  DOING A TPUT  */
*              /* FOLLOWING 16 BYTES ARE DOUBLY DEFINED --   @OW25564
*                     TSO/VTAM FIELD DEFINITION:             @OW25564*/
*   2  TSBRECAP CHAR(8) BDY(WORD),       /*TCAS APPL LU NAME @OW25564
*                                       USED FOR RECONNECT   @OW25564
*                                       SYSPLEX ENVIRONMENT  @OW25564*/
*    3 TSBRCB      CHAR(8),              /* . TCAM RESOURCE CTL BLK  */
*     4 TSBRQCB     PTR(31),             /* . RCB QCB POINTER        */
*     4 TSBLINKA    PTR(31),             /* . RCB LINK WORD          */
*      5 TSBPRI      CHAR(1),            /* . TPOSTING PRIORITY      */
*      5 TSBLINKB    PTR(24) BDY(WORD,2), /* . RCB LINKING FIELD
*                                                                    */
*                  /* TSO/VTAM FIELD DEFINITION:             @OW25564*/
*   2 TSBALUNM CHAR(8) BDY(WORD),        /*VTAM APPL LU NAME @OW25564*/
*    3 TSBTPOST    CHAR(8),              /* . TPOSTING
*                                           COMMUNICATIONS AREA
*                                           UPDATED ONLY WITH CS/CDS */
*     4 TSBTPFLG    CHAR(1),             /* . TPOSTING FLAGS  BIT
*                                           DEFINITIONS  BITS 3 - 7
*                                           RESERVED                 */
*      5 TSBPOSTO BIT(1),                /* . TPOST OF TSB
*                                           OUTSTANDING              */
*      5 TSBTPQCB BIT(1),                /* . TPOST TERM. DEST. QCB  */
*      5 TSBTPAYI BIT(1),                /* . TPOST TSI TO TSINPUT   */
*      5 TSBNEWID BIT(1),                /* . UPDATE QCB TJID WITH
*                                           NEW ASCBASID
*                                                                    */
*      5 *        BIT(1),                /* RESERVED                 */
*      5 *        BIT(1),                /* RESERVED                 */
*      5 *        BIT(1),                /* RESERVED                 */
*      5 *        BIT(1),                /* RESERVED                 */
*     4 *           CHAR(1),             /* . RESERVED               */
*     4 TSBFLAGM    CHAR(1),             /* . QCBFLAG SUBSTITUTION
*                                           MASK.  INDICATES BIT
*                                           POSITIONS TO  CHANGE IN
*                                           QCBFLAG.                 */
*     4 TSBFLAGV    CHAR(1),             /* . QCBFLAG SUBSTITUTION
*                                           VALUE.  INDICATES BIT
*                                           VALUES TO  SUBSTITUTE
*                                           FOR CHANGING  BIT
*                                           POSITIONS IN QCBFLAG.    */
*     4 TSBF2M      CHAR(1),             /* . QCBTSOF2 SUBSTITUTION
*                                           MASK                     */
*     4 TSBF2V      CHAR(1),             /* . QCBTSOF2 SUBSTITUTION
*                                           VALUE                    */
*     4 TSBF1M      CHAR(1),             /* . QCBTSOF1 SUBSTITUTION
*                                           MASK                     */
*     4 TSBF1V      CHAR(1),             /* . QCBTSOF1 SUBSTITUTION
*                                           VALUE
*                                                                    */
*   2 TSBATTNC    CHAR(1),               /* . NO. OF UNPROCESSED
*                                           ATTN'S                   */
*   2 TSBSTAX     CHAR(1),               /* . NO. OF UNSCHEDULED
*                                           STAX EXITS               */
*   2 TSBLINE     CHAR(2),               /* . LINE ADDRESS OR 3705
*                                           RESOURCE I.D. OF THIS
*                                           TERMINAL.                */
*   2 TSBMINL     FIXED(31),             /* . NO. OF MINUTES LEFT
*                                           BEFORE A DISCONNECTED
*                                           USER WILL BE LOGGED OFF. */
*    3 TSBLECB     PTR(31),              /* . TIOC LOGOFF WAITS ON
*                                           THIS ECB  WHILE TIOC
*                                           FINISHES TCAM
*                                           PROCESSING FOR A
*                                           TERMINATING MEMORY.      */
*   2 TSBPSWD     CHAR(8),               /* . LOGON PASSWORD @ZA16607*/
*   2 TSBEXTNT    PTR(31),               /* . ADDRESS OF TSB EXTENTION
*                                                            @ZA16607*/
*   2 TSBPRMR     FIXED(8),              /* . NDS PRIM(DEFAULT) ROWS
*                                                            @G35SKSR*/
*   2 TSBPRMC     FIXED(8),              /* . NDS PRIM(DEFAULT) COLS
*                                                            @G35SKSR*/
*   2 TSBALTR     FIXED(8),              /* . NDS ALTERNATE ROWS
*                                                            @G35SKSR*/
*   2 TSBALTC     FIXED(8),              /* . NDS ALTERNATE COLS
*                                                            @G35SKSR*/
*   2 TSBTRMID    CHAR(8) BDY(DWORD),    /* . TERMINAL SYMBOLIC NAME
*                                                            @G32TKKM*/
*   2 TSBSF1      CHAR(8) BDY(DWORD),    /* . SECURITY FIELD 1
*                                                            @G32TKKM*/
*   2 TSBEND      CHAR(0) BDY(DWORD);    /* . TSB FORCED TO DOUBLE WORD
*                                             BOUNDARY       @ZA16607*/
*  /* CONSTANTS FOR TSBALTCF                                     @N1A*/
* DCL TSBASCI7 BIT(2) CONSTANT('00'B);/* ASCII 7 CURRENTLY BEING USED
*                                                                @N1A*/
* DCL TSBASCI8 BIT(2) CONSTANT('01'B);/* ASCII 8 CURRENTLY BEING USED
*                                                                @N1A*/
*%IF TSBEXT ^= 'YES' %THEN       /*                          @ZA16607*/
*   %GOTO TSBXA2;                /*                          @ZA16607*/
*                                /*                          @ZA16607*/
*                                /*                          @ZA16607*/
*                                /*                          @ZA16607*/
*%INCLUDE SYSLIB (IKTTSBX);      /*                          @ZA25904*/
*%TSBXA2:  ;                       /*                        @ZA16607*/
