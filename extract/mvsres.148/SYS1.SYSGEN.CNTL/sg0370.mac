//SG0370   JOB (SMP4),
//             'Fix PTFS',
//             CLASS=A,
//             TIME=1439,
//             REGION=8000K,
//             MSGCLASS=A,
//             MSGLEVEL=(1,1),
//             NOTIFY=HERC01
//********************************************************************
//*
//* Name: SYS1.SYSGEN.CNTL(SG0370)
//*
//* Desc: Fix PTFS before APPLY/ACCEPT
//*
//********************************************************************
//UY12602 EXEC PGM=IDCAMS
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 DELETE SYS1.IMAGELIB(FCB26)
 DELETE SYS1.IMAGELIB(FCB28)
 SET LASTCC=0
 SET MAXCC=0
//UY41573 EXEC SMPACC
//SMPCNTL  DD  *
 UCLIN CDS.
  DEL MOD(IKJEHDS1).
  DEL LMOD(IKJEHDS1).
 ENDUCL.
 RESETRC.
 UCLIN ACDS.
  DEL MOD(IKJEHDS1).
 ENDUCL.
 RESETRC.
 UCLIN CDS.
  DEL LMOD (ICBVVI00).
  DEL MOD  (ICB2MSG).
  DEL MOD  (ICBMSG05).
  DEL MOD  (ICBMSG56).
  DEL MOD  (ICBVCR00).
  DEL MOD  (ICBVTP00).
  DEL MOD  (ICBVEX00).
  DEL MOD  (ICBVTM00).
  DEL MOD  (ICBVPR00).
  DEL MOD  (ICBVMT00).
  DEL MOD  (ICBVDM00).
  DEL MOD  (ICBVSP00).
  DEL MOD  (ICBVUT00).
  DEL MOD  (ICBVUT01).
  DEL MOD  (ICBVUT03).
  DEL MOD  (ICBVMS00).
  DEL MOD  (ICBVIN00).
  DEL MOD  (ICBVIO00).
  DEL MOD  (ICBVJL00).
  DEL MOD  (ICBVOP00).
  DEL MOD  (ICBVMG00).
  DEL MOD  (ICBVRR00).
  DEL MOD  (ICBVUP00).
  DEL MOD  (ICBVSL00).
  DEL MOD  (ICBVDR00).
  DEL MOD  (ICBVDR01).
 ENDUCL.
 RESETRC.
 UCLIN CDS.
  DEL MOD(IGE0125F).
  DEL LMOD(IGE0125F).
 ENDUCL.
 RESETRC.
 UCLIN ACDS.
  DEL MOD(IGE0125F).
 ENDUCL.
 RESETRC.
//CLEANUP EXEC PGM=IDCAMS
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 DELETE SYS1.NEWPTFS NONVSAM
 SET LASTCC=0
 SET MAXCC=0
//SAVEPTF EXEC PGM=IEBCOPY
//SYSPRINT DD  SYSOUT=A
//SMPPTS   DD  DISP=SHR,DSN=SYS1.SMPPTS
//BADPTFS  DD  DISP=SHR,DSN=SYS1.BADPTFS
//SYSIN    DD  *
 COPY INDD=SMPPTS,OUTDD=BADPTFS
 SELECT MEMBER=UZ56759
 SELECT MEMBER=UZ61346
 SELECT MEMBER=UZ39100
 SELECT MEMBER=UZ65177
 SELECT MEMBER=UZ69948
 SELECT MEMBER=UZ84429
//GENER1A  EXEC PGM=IEBGENER
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.BADPTFS(UZ61346)
//SYSUT2   DD  DISP=(NEW,CATLG),
//             UNIT=3350,VOL=SER=SMP004,
//             DSN=SYS1.NEWPTFS,
//             SPACE=(CYL,(2,2,20)),
//             DCB=SYS1.SMPPTS
//SYSIN    DD  *
 GENERATE MAXNAME=3,MAXGPS=2
 MEMBER NAME=UZ61346A
GROUP1 RECORD IDENT=(7,'EDM1102',9)
 MEMBER NAME=UZ61346B
GROUP2 RECORD IDENT=(8,'   PRE  ',1)
 MEMBER NAME=UZ61346C
//*
//GENER2A  EXEC PGM=IEBGENER
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.BADPTFS(UZ56759)
//SYSUT2   DD  DISP=SHR,DSN=SYS1.NEWPTFS
//SYSIN    DD  *
 GENERATE MAXNAME=3,MAXGPS=2
 MEMBER NAME=UZ56759A
GROUP1 RECORD IDENT=(7,'EDM1102',9)
 MEMBER NAME=UZ56759B
GROUP2 RECORD IDENT=(8,'   PRE  ',1)
 MEMBER NAME=UZ56759C
//GENER3A  EXEC PGM=IEBGENER
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.BADPTFS(UZ39100)
//SYSUT2   DD  DISP=SHR,DSN=SYS1.NEWPTFS
//SYSIN    DD  *
 GENERATE MAXNAME=3,MAXGPS=2
 MEMBER NAME=UZ39100A
GROUP1 RECORD IDENT=(7,'AZ74904',10)
 MEMBER NAME=UZ39100B
GROUP2 RECORD IDENT=(7,'AZ33622',10)
 MEMBER NAME=UZ39100C
//GENER4A  EXEC PGM=IEBGENER
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.BADPTFS(UZ65177)
//SYSUT2   DD  DISP=SHR,DSN=SYS1.NEWPTFS
//SYSIN    DD  *
 GENERATE MAXNAME=3,MAXGPS=2
 MEMBER NAME=UZ65177A
GROUP1 RECORD IDENT=(7,'UZ90081',10)
 MEMBER NAME=UZ65177B
GROUP2 RECORD IDENT=(7,'UZ29730',10)
 MEMBER NAME=UZ65177C
//GENER5A  EXEC PGM=IEBGENER
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.BADPTFS(UZ69948)
//SYSUT2   DD  DISP=SHR,DSN=SYS1.NEWPTFS
//SYSIN    DD  *
 GENERATE MAXNAME=3,MAXGPS=2
 MEMBER NAME=UZ69948A
GROUP1 RECORD IDENT=(7,'EDS1102',9)
 MEMBER NAME=UZ69948B
GROUP2 RECORD IDENT=(7,'UZ23290',10)
 MEMBER NAME=UZ69948C
//GENER6A  EXEC PGM=IEBGENER
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.BADPTFS(UZ84429)
//SYSUT2   DD  DISP=SHR,DSN=SYS1.NEWPTFS
//SYSIN    DD  *
 GENERATE MAXNAME=3,MAXGPS=2
 MEMBER NAME=UZ84429A
GROUP1 RECORD IDENT=(7,'AZ87936',10)
 MEMBER NAME=UZ84429B
GROUP2 RECORD IDENT=(7,'AZ42300',10)
 MEMBER NAME=UZ84429C
//*
//UPDT1   EXEC PGM=IEBUPDTE,PARM=NEW
//SYSPRINT DD  SYSOUT=*
//SYSUT2   DD  DISP=SHR,DSN=SYS1.NEWPTFS
//SYSIN    DD  *
.@ ADD NAME=UZ61346B
   PRE  (UZ90059,UZ55916,UZ37211,UZ90002)
.@ ADD NAME=UZ56759B
   PRE  (UZ56250,UZ23267,UZ28405)
.@ ADD NAME=UZ39100B
         AZ33622,M023200)                                  .
.@ ADD NAME=UZ65177B
   SUP  (UZ29730,AZ71929,AZ44226,AZ44022,M023404)          .
.@ ADD NAME=UZ69948B
   SUP  (UZ23290,AZ75914,AZ36647,AZ34962,M023302,M024305)  .
.@ ADD NAME=UZ84429B
         AZ42300,AZ42177,AZ41488,AZ41353,AZ38886,
         M023405,M024408)                                  .
//*
//GENER1B EXEC PGM=IEBGENER
//SYSIN    DD  DUMMY
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ61346A)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ61346B)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ61346C)
//SYSUT2   DD  DISP=(NEW,PASS),UNIT=VIO,
//             DSN=&&PTFIN,
//             SPACE=(CYL,(1,1)),
//             DCB=(LRECL=80,RECFM=FB,BLKSIZE=7200)
//GENER2B EXEC PGM=IEBGENER
//SYSIN    DD  DUMMY
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ56759A)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ56759B)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ56759C)
//SYSUT2   DD  DISP=(MOD,PASS),DSN=&&PTFIN
//GENER3B EXEC PGM=IEBGENER
//SYSIN    DD  DUMMY
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ39100A)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ39100B)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ39100C)
//SYSUT2   DD  DISP=(MOD,PASS),DSN=&&PTFIN
//GENER4B EXEC PGM=IEBGENER
//SYSIN    DD  DUMMY
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ65177A)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ65177B)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ65177C)
//SYSUT2   DD  DISP=(MOD,PASS),DSN=&&PTFIN
//GENER5B EXEC PGM=IEBGENER
//SYSIN    DD  DUMMY
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ69948A)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ69948B)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ69948C)
//SYSUT2   DD  DISP=(MOD,PASS),DSN=&&PTFIN
//GENER6B EXEC PGM=IEBGENER
//SYSIN    DD  DUMMY
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ84429A)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ84429B)
//         DD  DISP=SHR,DSN=SYS1.NEWPTFS(UZ84429C)
//SYSUT2   DD  DISP=(MOD,PASS),DSN=&&PTFIN
//UMODS   EXEC PGM=IEBGENER
//SYSIN    DD  DUMMY
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  *
++USERMOD(M026200) /* EDM1102 - ZAP IGC018.IEC0SCR1 */.
++VER(Z038) FMID(EDM1102) PRE(UZ39100).
++ZAP(IGC018) DISTLIB(AOSD0).
 NAME IEC0SCR1
 EXPAND IEC0SCR1(32)
 IDRDATA M026200
VER 00F8 BFA1,1009                   ICM R10,1,STARKL
VER 00FC 4770,F106             BACK1 BZ  PAST
VER 027E 0000                            PATCH AREA
VER 0280 0000,0000,0000,0000
VER 0288 0000,0000,0000,0000
VER 0290 0000,0000,0000,0000
VER 0298 0000,0000,0000                  6 BYTES NOT USED
REP 00F8 47F0,F27E                   B   PATCH1
REP 027E 9110,9009                   TM  DVCFLAGS,DVCMODU
REP 0282 47E0,F290                   BNO PATCH2
REP 0286 58B0,9018                   L   R11,DVCUFIX1
REP 028A 58B0,B000                   L   R11,0(,R11)
REP 028E 07FB                        BR  R11
REP 0290 BFA1,1009            PATCH2 ICM R10,1,STARKL
REP 0294 47F0,F0FC                   B   BACK1
++USERMOD(M026404) /* FDS1122 - UPDATE IODEVICE */.
++VER(Z038) FMID(FDS1122) PRE(UZ65177).
++MACUPD(IODEVICE).
.@ CHANGE NAME=IODEVICE
               &CUNUMBR=,&TIMEOUT=,                              MVS38J+
++USERMOD(M026302) /* EDS1102 - UPDATE UNITNAME */.
++VER(Z038) FMID(EDS1102) PRE(UZ69948).
++MACUPD(UNITNAME).
.@ CHANGE NAME=UNITNAME
.*               ASMF ONLY ALLOWS 2 CONTINUATIONS                MVS38J
         AIF    ('&NAME' EQ '3380').VIOGNRC  3380, VIO=YES       MVS38J
         AIF    ('&NAME' EQ '3390').VIOGNRC  3390, VIO=YES       MVS38J
.VIOGNRC ANOP                                                    MVS38J
++USERMOD(M026305) /* EDS1102 - UPDATE UNITNAME */.
++VER(Z038) FMID(EDS1102) PRE(UZ69948 M026302).
++MACUPD(UNITNAME).
.@ CHANGE NAME=UNITNAME
         AIF    ('&NAME' EQ '3375').VIOGNRC  3375, VIO=YES       MVS38J
++USERMOD(M026405) /* FDS1122 - UPDATE GENERATE */.
++VER(Z038) FMID(FDS1122) PRE(UZ84429).
++MACUPD(GENERATE).
.@ CHANGE NAME=GENERATE
         AIF ('&RESVOL(2)' EQ '3380').CKRVOL4                    MVS38J
         AIF ('&RESVOL(2)' EQ '3390').CKRVOL4                    MVS38J
.P59     AIF   ('&SGDSUNC(12)' NE '3350').P3380                  MVS38J
.P3380   AIF   ('&SGDSUNC(12)' NE '3380').P3390                  MVS38J
&B       SETA  32760              3380 LPALIB BLKSIZE            MVS38J
         AGO   .P6                                               MVS38J
.P3390   AIF   ('&SGDSUNC(12)' NE '3390').PERR                   MVS38J
&B       SETA  32760              3390 LPALIB BLKSIZE            MVS38J
         AGO   .P6                                               MVS38J
.L59     AIF   ('&SGDSUNC(6)' NE '3350').L3380                   MVS38J
.L3380   AIF   ('&SGDSUNC(6)' NE '3380').L3390                   MVS38J
&B       SETA  32760              3380 LINKLIB BLKSIZE           MVS38J
         AGO   .L6                                               MVS38J
.L3390   AIF   ('&SGDSUNC(6)' NE '3390').LERR                    MVS38J
&B       SETA  32760              3390 LINKLIB BLKSIZE           MVS38J
         AGO   .L6                                               MVS38J
.SD59    AIF   ('&SGDSUNC(&I)' NE '3350').SD3380                 MVS38J
.SD3380  AIF   ('&SGDSUNC(&I)' NE '3380').SD3390                 MVS38J
&B       SETA  32760              3380 SVCLIB BLKSIZE            MVS38J
         AGO   .SD6                                              MVS38J
.SD3390  AIF   ('&SGDSUNC(&I)' NE '3390').SERR                   MVS38J
&B       SETA  32760              3390 SVCLIB BLKSIZE            MVS38J
         AGO   .SD6                                              MVS38J
.D59     AIF   ('&SGDSUNC(&I)' NE '3350').D3380                  MVS38J
.D3380   AIF   ('&SGDSUNC(&I)' NE '3380').D3390                  MVS38J
&B       SETA  32760              3380 NUCLEUS BLKSIZE           MVS38J
         AGO   .D6                                               MVS38J
.D3390   AIF   ('&SGDSUNC(&I)' NE '3390').DERR                   MVS38J
&B       SETA  32760              3390 NUCLEUS BLKSIZE           MVS38J
         AGO   .D6                                               MVS38J
.MD59    AIF   ('&SGDSUNC(&I)' NE '3350').MD3380                 MVS38J
.MD3380  AIF   ('&SGDSUNC(&I)' NE '3380').MD3390                 MVS38J
&B       SETA  32760              3380 LOADLIB BLKSIZE           MVS38J
         AGO   .MP6                                              MVS38J
.MD3390  AIF   ('&SGDSUNC(&I)' NE '3390').MERR                   MVS38J
&B       SETA  32760              3390 LOADLIB BLKSIZE           MVS38J
         AGO   .MP6                                              MVS38J
.MP59    AIF   ('&SGDSUNC(&I)' NE '3350').MP3380                 MVS38J
.MP3380  AIF   ('&SGDSUNC(&I)' NE '3380').MP3390                 MVS38J
&B       SETA  23440              3380 LRECL=80 BLKSIZE          MVS38J
         AGO   .MP6                                              MVS38J
.MP3390  AIF   ('&SGDSUNC(&I)' NE '3390').MERR                   MVS38J
&B       SETA  27920              3390 LRECL=80 BLKSIZE          MVS38J
         AGO   .MP6                                              MVS38J
++USERMOD(M026408) /* FDS1122 - UPDATE GENERATE */.
++VER(Z038) FMID(FDS1122) PRE(UZ84429 M026405).
++MACUPD(GENERATE).
.@ CHANGE NAME=GENERATE
         AIF ('&RESVOL(2)' EQ '3375').CKRVOL4                    MVS38J
.P5      AIF   ('&SGDSUNC(12)' NE '3340').P3375                  MVS38J
.P3375   AIF   ('&SGDSUNC(12)' NE '3375').P59                    MVS38J
&B       SETA  32760              3375 LPALIB BLKSIZE            MVS38J
         AGO   .P6                                               MVS38J
.L5      AIF   ('&SGDSUNC(6)' NE '3340').L3375                   MVS38J
.L3375   AIF   ('&SGDSUNC(6)' NE '3375').L59                     MVS38J
&B       SETA  32760              3375 LINKLIB BLKSIZE           MVS38J
         AGO   .L6                                               MVS38J
.SD5     AIF   ('&SGDSUNC(&I)' NE '3340').SD3375                 MVS38J
.SD3375  AIF   ('&SGDSUNC(&I)' NE '3375').SD59                   MVS38J
&B       SETA  32760              3375 SVCLIB BLKSIZE            MVS38J
         AGO   .SD6                                              MVS38J
         AIF   ('&SGDSUNC(&I)' NE '3340').D3375                  MVS38J
.D3375   AIF   ('&SGDSUNC(&I)' NE '3375').D59                    MVS38J
&B       SETA  32760              3375 NUCLEUS BLKSIZE           MVS38J
         AGO   .D6                                               MVS38J
.MD5     AIF   ('&SGDSUNC(&I)' NE '3340').MD3375                 MVS38J
.MD3375  AIF   ('&SGDSUNC(&I)' NE '3375').MD59                   MVS38J
&B       SETA  32760              3375 LOADLIB BLKSIZE           MVS38J
         AGO   .MP6                                              MVS38J
.MP5     AIF   ('&SGDSUNC(&I)' NE '3340').MP3375               @Z30RSTA
.MP3375  AIF   ('&SGDSUNC(&I)' NE '3375').MP59                   MVS38J
&B       SETA  17600              3375 LRECL=80 BLKSIZE          MVS38J
         AGO   .MP6                                              MVS38J
//SYSUT2   DD  DISP=(MOD,PASS),DSN=&&PTFIN
//RECEIVE EXEC SMPREC
//SMPPTFIN DD  DISP=(OLD,DELETE),DSN=&&PTFIN
//SMPCNTL  DD  *
 REJECT SELECT (
                M026200
                M026404
                M026302
                M026305
                M026405
                M026408
                UZ39100
                UZ56759
                UZ61346
                UZ65177
                UZ69948
                UZ84429
               )
 .
 RESETRC.
 RECEIVE.
