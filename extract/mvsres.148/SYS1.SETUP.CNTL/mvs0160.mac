//MVS0160 JOB  (SETUP),
//             'Setup EREP proc',
//             CLASS=A,
//             MSGCLASS=A,
//             MSGLEVEL=(1,1)
//*********************************************************************
//*
//* Name: SYS1.SETUP.CNTL(MVS0160)
//*
//* Desc: Setup procedures for EREP processing
//*
//*********************************************************************
//*
//ALIAS   EXEC PGM=IDCAMS
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 DEFINE ALIAS ( NAME(EREP) RELATE(SYS1.UCAT.MVS))
//CLEANUP EXEC PGM=IDCAMS
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 DELETE EREP.HISTORY.DATA.*    NONVSAM PURGE
 DELETE EREP.HISTORY.DATA      NONVSAM PURGE
 DELETE EREP.HISTORY.DATA      NONVSAM NOSCRATCH
 DELETE EREP.HISTORY.DATA      GDG PURGE
 SET LASTCC=0
 SET MAXCC=0
//CLEANUP2 EXEC PGM=IEFBR14
//MVSCAT   DD  DISP=(MOD,DELETE),DSN=EREP.HISTORY.DATA,
//             SPACE=(TRK,(0)),
//             UNIT=3390,VOL=SER=MVSCAT,
//             DCB=(RECFM=VB,BLKSIZE=4000)
//MODEL   EXEC PGM=IEFBR14
//MVSCAT   DD  DISP=(NEW,KEEP),DSN=EREP.HISTORY.DATA,
//             SPACE=(TRK,(0)),
//             UNIT=3390,VOL=SER=MVSCAT,
//             DCB=(RECFM=VB,BLKSIZE=4000)
//DEFGDG  EXEC PGM=IDCAMS
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD  *
 DEFINE GDG ( NAME(EREP.HISTORY.DATA) -
              LIMIT(45) -
              SCRATCH -
              NOEMPTY -
            )
//UPDAT1 EXEC PGM=IEBUPDTE,PARM=NEW
//SYSPRINT DD  SYSOUT=*
//SYSUT2   DD  DISP=SHR,DSN=SYS2.PROCLIB
//SYSIN    DD  DATA,DLM='><'
.@ ADD NAME=DUMPEREP
//DUMPEREP PROC
//HISTORY EXEC PGM=IFCEREP1,PARM=CARD
//ACCDEV   DD  DSN=EREP.HISTORY.DATA(+1),
//             DISP=(NEW,CATLG),
//             DCB=(RECFM=VB,BLKSIZE=4000),
//             UNIT=3390,VOL=SER=MVSCAT,
//             SPACE=(TRK,(30,10),RLSE)
//SERLOG   DD  DISP=SHR,DSN=SYS1.LOGREC
//DIRECTWK DD  UNIT=SYSDA,SPACE=(CYL,15,,CONTIG)
//TOURIST  DD  SYSOUT=*,DCB=BLKSIZE=133
//EREPPT   DD  SYSOUT=*,DCB=BLKSIZE=133
//SYSABEND DD  SYSOUT=*
//SYSIN    DD  DISP=SHR,DSN=SYS2.SYSINLIB(EREP0000)
.@ ADD NAME=EREPORT
//EREPORT PROC REPORT=EREP0010
//REPORT  EXEC PGM=IFCEREP1,PARM=CARD
//ACCIN    DD  DISP=SHR,DSN=EREP.HISTORY.DATA(0)
//DIRECTWK DD  UNIT=SYSDA,SPACE=(CYL,15,,CONTIG)
//TOURIST  DD  SYSOUT=*,DCB=BLKSIZE=133
//EREPPT   DD  SYSOUT=*,DCB=BLKSIZE=133
//SYSABEND DD  SYSOUT=*
//SYSIN    DD  DISP=SHR,DSN=SYS2.SYSINLIB(&REPORT)
><
//UPDAT2 EXEC PGM=IEBUPDTE,PARM=NEW
//SYSPRINT DD  SYSOUT=*
//SYSUT2   DD  DISP=SHR,DSN=SYS2.SYSINLIB
//SYSIN    DD  DATA,DLM='><'
.@ ADD NAME=EREP0000
PRINT=NO
ACC=Y
ZERO=Y
ENDPARM
.@ ADD NAME=EREP0010
SYSUM
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0020
EVENT
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0030
THRESHOLD=(001,015)
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0040
PRINT=PS
TYPE=M
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0050
PRINT=PS
TYPE=C
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0060
PRINT=SU
TYPE=O
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0070
PRINT=SU
TYPE=T
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0080
PRINT=SU
TYPE=D
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0090
PRINT=SU
TYPE=H
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0100
PRINT=PS
TYPE=S
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0110
PRINT=PS
TYPE=IE
HIST
ACC=N
ENDPARM
.@ ADD NAME=EREP0120
TRENDS
HIST
ACC=N
ENDPARM
><
//UPDAT3 EXEC PGM=IEBUPDTE,PARM=NEW
//SYSPRINT DD  SYSOUT=*
//SYSUT2   DD  DISP=SHR,DSN=SYS2.JCLLIB
//SYSIN    DD  DATA,DLM='><'
.@ ADD NAME=EREP0000
//EREP0000 JOB (EREP),
//             'Dump SYS1.LOGREC',
//             CLASS=A,
//             MSGCLASS=A,
//             MSGLEVEL=(0,0),
//             REGION=1024K
//*********************************************************************
//*
//* Name: SYS2.JCLLIB(EREP0000)
//*
//* Desc: Dump SYS1.LOGREC to new generation data set
//*
//*********************************************************************
//DUMPIT EXEC EREPDUMP
.@ ADD NAME=EREP0010
//EREP0000 JOB (EREP),
//             'Various Reports',
//             CLASS=A,
//             MSGCLASS=A,
//             MSGLEVEL=(0,0),
//             REGION=1024K
//*********************************************************************
//*
//* Name: SYS2.JCLLIB(EREP0010)
//*
//* Desc: Create various reports from EREP History Data
//*
//*********************************************************************
//DUMPIT EXEC EREPDUMP
//IPL      EXEC EREPORT,REPORT=EREP0110   IPL report
//SYSUM    EXEC EREPORT,REPORT=EREP0010   Summary report
//SOFTWARE EXEC EREPORT,REPORT=EREP0100   Software events
//DDR      EXEC EREPORT,REPORT=EREP0080   Dynamic Device Reconfig
//MDR      EXEC EREPORT,REPORT=EREP0070   Miscellaneous Data Records
//EVENTS   EXEC EREPORT,REPORT=EREP0020   Event detail report
//THRESHLD EXEC EREPORT,REPORT=EREP0030   Temporary Error reports
//MCH      EXEC EREPORT,REPORT=EREP0040   Machine Check reports
//CHCH     EXEC EREPORT,REPORT=EREP0050   Channel Check reports
//OBR      EXEC EREPORT,REPORT=EREP0060   Outbord data Unit Check
//MIH      EXEC EREPORT,REPORT=EREP0090   Missing Interrupt Handler
//TRENDS   EXEC EREPORT,REPORT=EREP0120   Trends
//ACCIN     DD  DISP=SHR,DSN=EREP.HISTORY.DATA
