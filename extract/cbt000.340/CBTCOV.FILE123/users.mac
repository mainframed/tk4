//USERS    JOB (CFDSM000208,1080),CLASS=D,MSGCLASS=A,
//         NOTIFY=$$$$$$,TIME=9
//LU       EXEC PGM=RACFLU,PARM='NR'
//STEPLIB  DD DSN=SYS1.SECADM,DISP=SHR
//SYSPRINT DD SYSOUT=A
//OUTFILE  DD DSN=SECADM.PROFILES(USER),DISP=SHR
//USERS    EXEC SAS,SOUT=X,POUT=M
//SAS.PRFIN DD DSN=SECADM.PROFILES(USER),DISP=SHR
//SAS.SYSIN DD *
DATA USERS;
  INFILE PRFIN;
  INPUT @1 USERID $6. @9 NAME $20. @29 OWNER $8. @37 DEFDATE PD3.0
  @40 USERATTR PIB. @41 USERAUDT PIB. @42 RACX1 PIB. @43 RACX2 PIB.
  @44 RACX3 PIB. @45 RACX4 PIB. @46 MS $4.
  @50 UNIT $4. @54 DATELC PD3.0 @57 TIMELC  IB4. @61 GROUP $8.
  @69 DEFAULT $1. @70 GRPAUTH PIB. @71 EXPDT $10. @1 PREFIX $1.;
  IF PREFIX='U' THEN DELETE;
  IF USERID='IBMUSE' THEN DELETE;
  IF RACX2='1.......'B THEN BATCH='A';
                        ELSE BATCH='N';
  IF RACX2='.1......'B THEN TSO='A';
                        ELSE TSO='N';
  IF RACX2='..1.....'B THEN IMSA='A';
                        ELSE IMSA='N';
  IF RACX2='...1....'B THEN IMST='A';
                        ELSE IMST='N';
 IF DATELC=0 THEN LAST_ON=.;
             ELSE LAST_ON=DATEJUL(DATELC);
 CREATED=DATEJUL(DEFDATE);
 FORMAT CREATED LAST_ON DATE.;
DATA USERS1;
 SET USERS;
 IF DEFAULT^='D' THEN DELETE;
PROC SORT; BY USERID;
PROC PRINT N UNIFORM; BY PREFIX; PAGEBY PREFIX;
  ID NAME;
  VAR USERID UNIT MS GROUP OWNER BATCH TSO IMSA IMST LAST_ON CREATED;
  TITLE APS COMPUTER USERS BY PREFIX;
PROC SORT; BY NAME;
PROC PRINT N UNIFORM;
  ID NAME;
  VAR USERID UNIT MS GROUP OWNER BATCH TSO IMSA IMST LAST_ON CREATED;
  TITLE APS COMPUTER USERS BY NAME;
PROC SORT DATA=USERS; BY PREFIX GROUP NAME;
PROC PRINT N UNIFORM DATA=USERS; BY PREFIX GROUP; PAGEBY PREFIX;
  ID NAME;
  VAR USERID UNIT MS OWNER BATCH TSO IMSA IMST LAST_ON CREATED;
  TITLE APS COMPUTER USERS BY PREFIX AND GROUP;
PROC SORT DATA=USERS; BY GROUP NAME;
PROC PRINT N UNIFORM DATA=USERS; BY GROUP; PAGEBY GROUP;
  ID NAME;
  VAR USERID UNIT MS OWNER BATCH TSO IMSA IMST LAST_ON CREATED;
  TITLE APS COMPUTER GROUPS;
PROC SORT DATA=USERS; BY OWNER GROUP NAME;
PROC PRINT N UNIFORM DATA=USERS; BY OWNER GROUP; PAGEBY OWNER;
  ID NAME;
  VAR USERID UNIT MS BATCH TSO IMSA IMST LAST_ON CREATED;
  TITLE APS COMPUTER OWNERS AND THEIR USERS;
PROC SORT DATA=USERS1; BY UNIT MS USERID;
PROC PRINT N UNIFORM DATA=USERS1; BY UNIT MS; PAGEBY UNIT;
  ID NAME;
  VAR USERID GROUP OWNER BATCH TSO IMSA IMST LAST_ON CREATED;
  TITLE APS COMPUTER USERS BY UNIT NUMBER;
DATA NOUSE;
 SET USERS1;
 IF LAST_ON < TODAY()-90;
PROC SORT; BY LAST_ON NAME;
PROC PRINT N UNIFORM;
  ID NAME;
  VAR USERID UNIT MS GROUP OWNER BATCH TSO IMSA IMST LAST_ON CREATED;
  TITLE APS COMPUTER USERS INACTIVE FOR AT LEAST 90 DAYS;
PROC FREQ DATA=USERS1; TABLES TSO*IMSA*BATCH / LIST;
  TITLE DISTRIBUTION OF USERS AUTHORIZED TO APS SUBSYSTEMS;
/*
