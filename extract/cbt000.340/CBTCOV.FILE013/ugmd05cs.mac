CLOPS    TITLE 'CLOPS  --  OPENS AND CLOSES A DATA SET'
*-- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --*
*                                                                     *
* COPYRIGHT: COPYRIGHT BY GESELLSCHAFT FUER MATHEMATIK UND            *
*                                      DATENVERARBEITUNG MBH BONN,    *
*                         - RECHENZENTREN -                           *
*                         SCHLOSS BIRLINGHOVEN                        *
*                         5205 ST. AUGUSTIN 1                         *
*                                                                     *
*            FURTHER COPIES OF THIS PROGRAM MAY BE OBTAINED           *
*            BY WRITING TO THE ABOVE ADDRESS.                         *
*                                                                     *
*                                                                     *
*                                                                     *
*        C L O P S                                                    *
*                                                                     *
*                                                                     *
* <CLASS>:  UTILITY                                                   *
*                                                                     *
*                                                                     *
* <FUNCTION/OPERATION>:  CLOPS OPENS A DATA SET FOR OUTPUT WITH       *
*        DISP=MOD AND CLOSES IT AGAIN. THIS CAUSES THE DSCB TO BE     *
*        WRITTEN BACK INCLUDING MODIFICATIONS SPECIFIED IN THE        *
*        DD STATEMENT - E.G. EXPIRATION DATE.                         *
*                                                                     *
*                                                                     *
* <ENTRY POINTS>:  CLOPS                                              *
*                                                                     *
*                                                                     *
* <INPUT>:  NONE                                                      *
*                                                                     *
*                                                                     *
* <OUTPUT>:  NONE                                                     *
*                                                                     *
*                                                                     *
* <DD-STATEMENTS/DATA SETS>:  CLOPS - SPECIFIES THE DATA SET TO BE    *
*                                     OPENED AND CLOSED               *
*                                                                     *
*                                                                     *
* <NORMAL EXIT>:  RETURN VIA REGISTER 14                              *
*                                                                     *
*                                                                     *
* <ERROR EXIT>:  RETURN VIA REGISTER 14                               *
*                                                                     *
*                                                                     *
* <RETURN CODES>:  0 - SUCCESSFUL COMPLETION                          *
*                  4 - DD STATEMENT MISSING                           *
*                                                                     *
*                                                                     *
* <EXTERNAL ROUTINES>:  NONE                                          *
*                                                                     *
*                                                                     *
* <TABLES/WORK AREAS>:  JFCB                                          *
*                                                                     *
*                                                                     *
* <ATTRIBUTES>:  REUSABLE                                             *
*                                                                     *
*                                                                     *
* <RESTRICTIONS>:  NONE                                               *
*                                                                     *
*                                                                     *
* <AUTHORIZATION REQUIRED>:  NONE                                     *
*                                                                     *
*                                                                     *
* <RELATED PROGRAMS>:  IEFBR14 - USED TO ALLOCATE AND DELETE DATA SETS*
*                                                                     *
*                                                                     *
* <STORAGE>:                                                          *
*        PROGRAM:  400 BYTES                                          *
*        DYNAMIC:  --                                                 *
*        BUFFER :  --                                                 *
*                                                                     *
*                                                                     *
* <LOAD MODULE CREATION>:                                             *
*      SOURCE LANGUAGE      :  VS ASSEMBLER                           *
*      COMPILE LIBRARIES    :  SYS1.MACLIB                            *
*      COMPILE PARAMETERS   :  --                                     *
*      LINK-EDIT LIBRARIES  :  --                                     *
*      LINK-EDIT PARAMETERS :  REUS                                   *
*      LINK-EDIT INPUT      :  --                                     *
*      DESTINATION LIBRARIES:  RZ.LINKLIB                             *
*                                                                     *
*      GENERATING DECK      :  RZ.JCL(CLOPS)                          *
*                                                                     *
*                                                                     *
* <STATUS>:                                                           *
*          CHANGE LEVEL - 0.0               11MAY76                   *
*                                                                     *
*                                                                     *
* <NOTES>:  PROCEDURE :  NONE                                         *
*           SAMPLE JOB:  NONE                                         *
*                                                                     *
*           EXAMPLE:     //CLOPS   EXEC  PGM=CLOPS                    *
*                        //STEPLIB   DD  DSN=RZ.LINKLIB,DISP=SHR      *
*                        //CLOPS     DD  .....ANYTHING.....           *
*                                                                     *
*           CAUTION:     LABEL=EXPDT=00000 IS INTERPRETED AS 'NOT     *
*                        SPECIFIED'. USE LABEL=EXPDT=00001 INSTEAD.   *
*                                                                     *
*                                                                     *
* <AUTHOR>:  V. BLASIUS, GMD-RZ.BN                                    *
*                                                                     *
*-- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --*
         TITLE 'MACRO DEFINITIONS FOR THIS PROGRAM'
         MACRO
&LABEL   BMCLA   &REG,&PAR
.*             COPYRIGHT GMD-I6 1970,1973
.*                                                        16MAR70-GEIST
.*  LOAD REGISTER &REG WITH &PAR                          12JUN72-PAHL
.*
.*  &REG    : ABS.EXPR<16   REGISTER TO BE LOADED.
.*  &PAR    : RX-ADDR×(REG)×<RX-ADDR>   ADDR/VALUE TO BE LOADED INTO
.*            REGISTER.
.*
         LCLC  &C1,&C2
         AIF   ('&PAR' EQ '').NAMEIT
         AIF   ('&PAR'(1,1) EQ '(').LR
         AIF   ('&PAR'(1,1) EQ '<').L
.*  &PAR = RX-ADDR
         AIF   ('&PAR' EQ '0').LA0
&LABEL   LA    &REG,&PAR
         MEXIT
.LA0     ANOP
&LABEL   SR    &REG,&REG
         MEXIT
.*  &PAR = (REG)
.LR      AIF   ('&PAR(1)' EQ '&REG(1)').NAMEIT
&LABEL   LR    &REG,&PAR(1)
         MEXIT
.*  &PAR = <RX-ADDR>
.L       AIF   (K'&PAR GT 10).LTWO
&C1      SETC  '&PAR'(2,K'&PAR-2)
         AGO   .LOAD
.LTWO    ANOP
&C1      SETC  '&PAR'(2,8)
&C2      SETC  '&PAR'(10,K'&PAR-10)
.LOAD    ANOP
&LABEL   L     &REG,&C1&C2
         MEXIT
.NAMEIT  AIF   ('&LABEL' EQ '').MEND
&LABEL   DC    0H'0'
.MEND    MEND
         SPACE 5
         MACRO
&LABEL   PROLOG  &BASE=10,&ID=,&DSA=,&SSA=,&COPYR=YES,                 *
               &EP=*,&NAME=,&LEN=             OLDIES FOR COMPATIBILITY
.*             COPYRIGHT GMD RZ.BN   1975
.*                                                         00JAN69-
.*  STANDARD PROGRAM INITIATION                            19JUL73-PAHL
.*
.*  &BASE   : REG212×(REG212,...,REG212)   BASE REGISTER(S) FOR PROGRAM
.*            ARE SET WITH 4K-DIFFERENCE BEGINNING AT FIRST BYTE OF
.*            MACRO EXPANSION.
.*  &ID     : CHAR.STR×'CHAR.STR'       ENTRY POINT IDENTIFICATION
.*            DEFAULT: &LABEL, IF OMITTED, &SYSECT.
.*  &DSA    : DSANAM×(DSANAM,LEN)×(,LEN)×*   REQUESTS THAT A DYNAMIC
.*            SAVE/WORK AREA BE OBTAINED.
.*   DSANAM : SYMBOL   NAMING THE DSECT DESCRIBING THE SAVE/WORK AREA
.*            IF NOT OMITTED, A 'USING DSANAM,13' IS ALSO GENERATED.
.*      LEN : ABS.EXPR   GIVES THE LENGTH OF THE DYNAMIC SAVE/WORK AREA
.*            IF IT IS OMITTED BUT DSANAM IS SPECIFIED, THE STANDARD
.*            LENGTH SYMBOL 'DSANAM.#' IS ASSUMED.
.*        * : ONLY THE MINIMUM SAVE AREA OF 72 BYTES IS TO BE OBTAINED.
.*  &SSA    : *×A-SYMBOL×(GPR0-14)×<RX-ADDR>  INDICATES THAT A STATIC
.*            SAVE AREA IS TO BE USED.  IF "*" IS SPECIFIED, A MINIMUM
.*            (72B) SAVE AREA IS GENERATED INLINE, THE OTHER NOTATIONS
.*            SPECIFY THE ADDRESS OF THE SAVE AREA TO BE USED.
.*  &DSA AND &SSA ARE EXCLUSIVE.  IF BOTH OMITTED, DSA=* IS ASSUMED.
.*  THE SAVE AREA IS CHAINED TO THE ACTIVE SAVE AREA CHAIN, THE END
.*  OF WHICH MUST BE ADDRESSED BY (R13) AT POINT OF MACRO CALL.
.*
.*  &COPYR  : YES×NO   GENERATE A GMD RZ COPYRIGHT NOTICE APPENDED TO
.*            THE EP ID?
.*--OLD KEYWORDS STILL SUPPORTED JUST FOR COMPATIBILITY--
.*  &EP     : ALTERNATE ENTRY POINT NAME, AFFECTS BASE REGISTER USING
.*            STATEMENTS ONLY.
.*  &NAME   : FORMER NAME OF ID KEYWORD.
.*  &LEN    : EQ. TO &DSA(2).
.*
         LCLA  &NA,&NB
         LCLC  &C
         AIF   ('&NAME' NE '').ONAME   ***OLD***
.GO1     AIF   ('&LEN' NE '').OLEN     ***OLD***
         DS    0H
.GO2     AIF   ('&BASE' EQ '').YBASE
         USING &EP,&BASE(1)            PROGRAM BASE
.USE2    AIF   (&NA+1 GE N'&BASE).USE15
&NA      SETA  &NA+1
         USING &EP+&NA*4096,&BASE(&NA+1)
         AGO   .USE2
.USE15   USING &EP,15
&LABEL   B     BMC&SYSNDX
         DC    AL1(BMC&SYSNDX.A-*-1)   ID LENGTH
         AIF   ('&ID' NE '').ID
&C       SETC  '&LABEL'                 IF NO EXTRA ID, USE LABEL
         AIF   ('&C' NE '').DID
&C       SETC  '&SYSECT'               IF NO LABEL EITHER, USE CSECT NM
         AIF   ('&C' NE '').DID
&C       SETC  '?'                     NO CSECT NAME EITHER.
         MNOTE 4,'****** PROLOG: NO ENTRY ID'
.DID     DC    C'&C'
         AGO   .COPYR
.ID      AIF   ('&ID'(1,1) EQ '''').IDQ
         AIF   ('&ID'(K'&ID,1) EQ '''').IDC
         DC    C'&ID'
         AGO   .COPYR
.IDC     DC    &ID
         AGO   .COPYR
.IDQ     DC    C&ID
.COPYR   AIF   ('&COPYR' NE 'YES').COPYR1
         DC    C' COPYRIGHT GMD RZ.BN &SYSDATE'
         AGO   .IDEND
.COPYR1  AIF   ('&COPYR' EQ '' OR '&COPYR' EQ 'NO').IDEND
         BMCERMAC PROLOG,123,COPYR,&COPYR,NO
.IDEND   ANOP
BMC&SYSNDX.A EQU *
         AIF   ('&SSA' NE '').SSA
.*
.*  DYNAMIC SAVE AREA SET-UP
.*
.DSA     DC    V($5GCORE)
         AIF   ('&DSA(2)' NE '').DSA2
&C       SETC  '72'                    MINIMUM/DEFAULT LENGTH
         AIF   ('&DSA(1)' EQ '' OR '&DSA(1)' EQ '*').DSA72
&C       SETC  '&DSA(1)'(1,7)'#'       STANDARD LENGTH SYMBOL
.DSA72   DC    A(&C)                   LENGTH OF SAVE/WORK AREA
         AGO   .DSA3
.DSA2    DC    A(&DSA(2))              SAVE/WORK AREA LENGTH
.DSA3    ANOP
BMC&SYSNDX STM 14,12,12(13)
         LM    14,15,*-12
         BALR  10,14                   CALL PROLOGUE MODULE
         AGO   .BASE
.*
.*  STATIC SAVE AREA SET-UP
.*
.SSA     AIF   ('&DSA' NE '').YSA
         AIF   ('&SSA' NE '*').SSAL
         DC    18F'0'                  STATIC SAVE AREA
BMC&SYSNDX STM 14,12,12(13)            SAVE CALLER'S REGISTERS
         LA    14,*-19*4               -> STATIC SAVE AREA
         AGO   .SACHAIN
.SSAL    AIF   ('&SSA'(1,1)  NE '<' AND '&SSA'(1,1) NE '(').SSAADDR
BMC&SYSNDX STM 14,12,12(13)            SAVE CALLER'S  REGISTERS
         BMCLA 14,&SSA                 -> STATIC SAVE AREA
         AGO   .SACHAIN
.SSAADDR DC    A(&SSA)
BMC&SYSNDX STM 14,12,12(13)            SAVE CALLER'S REGISTERS
         L     14,*-8                  -> STATIC SAVE AREA
.SACHAIN MVC   8(4,14),8(13)           LSA(NEW) = LSA(OLD)
         ST    13,4(,14)               HSA(NEW) = OLD
         ST    14,8(,13)               LSA(OLD) = NEW
         LR    13,14                   -> NEW SAVE AREA
.*
.*  BASE REGISTER(S)
.*
.BASE    AIF   ('&BASE(1)' EQ '15').BASE1
         DROP  15                      DROP TEMPORARY BASE
         LR    &BASE(1),15             LOAD FIRST BASE REGISTER
.BASE1   AIF   (N'&BASE LT 2).DSAUSE
         LA    &BASE(N'&BASE),2048
.BASE2   LA    &BASE(&NB+2),2048(&BASE(N'&BASE),&BASE(&NB+1))
&NB      SETA  &NB+1
         AIF   (&NB+1 LT N'&BASE).BASE2
         AGO   .DSAUSE
.DSAUSE  AIF   ('&DSA(1)' EQ '' OR '&DSA(1)' EQ '*').END
         USING &DSA(1),13
         MEXIT
.*
.YSA     BMCERMAC PROLOG,34,DSA/SSA,SSA  EXCLUSIVE OPERANDS, SSA IGNORD
         AGO   .DSA
.YBASE   BMCERMAC PROLOG,110,BASE
         MEXIT
.*
.*  *** OLD VERSIONS COMPATIBILITY ***
.*
.ONAME   AIF   ('&ID' NE '').YNAME
&LABEL   PROLOG BASE=&BASE,ID=&NAME,DSA=&DSA,SSA=&SSA,COPYR=&COPYR,EP=&-
               EP,LEN=&LEN
         MEXIT
.YNAME   BMCERMAC PROLOG,40,NAME
         AGO   .GO1
.OLEN    AIF   ('&SSA' NE '' OR '&DSA(2)' NE '').YLEN
&LABEL   PROLOG BASE=&BASE,ID=&ID,DSA=(&DSA(1),&LEN),SSA=&SSA,COPYR=&CO-
               PYR,EP=&EP
         MEXIT
.YLEN    BMCERMAC PROLOG,40,LEN
         AGO   .GO2
.END     MEND
         SPACE 5
         MACRO
&LABEL   EPILOG  &SA=D,&RC=0,&DROP=,&LTORG=YES
.*             COPYRIGHT GMD-I6 1970,1973
.*                                                         13MAR70-PAHL
.*  PROGRAM EPILOGUE: UNCHAIN SA (+RELEASE IF DYNAMIC) AND RETURN
.*                                                         19JUL73-PAHL
.*  &SA     : 'D'×'S'   TYPE OF SAVE AREA: DYNAMIC×STATIC
.*            CORRESPONDS TO &DSA RESP. &SSA PARAMETER OF MACRO PROLOG
.*  &RC     : (15)×(REG)×ABS.EXPR<4096   RETURN CODE
.*  &DROP   : REG×LIST OF REGS   BASE REGISTER(S) TO BE DROPPED
.*  &LTORG  : 'YES'×'NO'   GENERATE (NO) 'LTORG'
.*
         LCLA  &N
         AIF   ('&SA' EQ '').YSA0
         AIF   ('&SA'(1,1) EQ 'S').STATIC
         AIF   ('&SA'(1,1) NE 'D').YSA1
.*  GENERATE PROPER CNOP FOR ALIGNMENT OF V-CON
.DYNAMIC AIF   ('&RC' EQ '0' OR '&RC(1)' NE '&RC' AND '&RC' NE '(15)').-
               CNOP2
         CNOP  0,4
         AGO   .RCLOAD
.CNOP2   CNOP  2,4
.*  FETCH RC AND CALL EPILOGUE MODULE TO DO THE WORK FOR SA=DYNAMIC
.RCLOAD  ANOP
&LABEL   BMCLA 15,&RC
         BALR  14,0
         DC    X'58E0E006'             L  14,6(,14)
         BR    14
         DC    V($5FCORE)
         AGO   .DROP
.*  STATIC SAVE AREA
.STATIC  ANOP
&LABEL   BMCLA 15,&RC
         L     14,4(,13)               -> HIGH SAVE AREA
         MVC   8(4,14),8(13)           RESTORE OLD LSA POINTER
         LR    13,14
         L     14,12(,13)
         LM    0,12,20(13)
         BR    14
.*   DROP BASE REGISTERS AS SPECIFIED
.DROP    AIF   ('&DROP' EQ 'NO').LTORG                            (OLD)
.DROP1   AIF   (&N GE N'&DROP).LTORG
&N       SETA  &N+1
         DROP  &DROP(&N)
         AGO   .DROP1
.*   REQUEST LITERAL POOL IF SPECIFIED
.LTORG   AIF   ('&LTORG' EQ '' OR '&LTORG' EQ 'NO').MEND
         AIF   ('&LTORG' NE 'YES').YLTORG
         LTORG
         MEXIT
.YSA0    BMCERMAC EPILOG,113,SA,,D
         AGO   .DYNAMIC
.YSA1    BMCERMAC EPILOG,23,SA,&SA,D
         AGO   .DYNAMIC
.YLTORG  BMCERMAC EPILOG,123,LTORG,&LTORG,NO
.MEND    MEND
         SPACE 5
*
*        %GOTO JFCBL1;          /*
         MACRO
         IEFJFCBN &LIST=NO   ,   */
*%JFCBL1 : ;
*
*/* **************************************************************** */
*/*                                                                  */
*/*                    JOB FILE CONTROL BLOCK                        */
*/*                                                                  */
*/*  OS/VS2 RELEASE 3, OS/VS1 RELEASE 4, 10/31/74, LEVEL=9           */
*/*                                                                  */
*/*  METHOD OF ACCESS                                                */
*/*      BAL  - A DSECT CARD SHOULD PRECEDE MACRO CALL.  USING ON    */
*/*             INFMJFCB GIVES ADDRESSABILITY FOR ALL SYMBOLS.       */
*/*      PL/S - DCL JFCBPTR PTR                                      */
*/*                                                                  */
*/*  F.E.'S                                                          */
*/*      MICROFICHE LISTING - IEFJFCBN                               */
*/*                                                                  */
*/*  DEVELOPERS                                                      */
*/*      BAL LISTING  - SPECIFY LIST=YES ON MACRO CALL.              */
*/*      PL/S LISTING - SPECIFY %IHALIST='YES' BEFORE INCLUDE.       */
*/*                                                                  */
*/*      FOR INTEGRATION A LISTING SHOULD NOT BE REQUESTED.          */
*/* **************************************************************** */
*%GOTO JFCBL2;  /*
         PUSH  PRINT
         AIF   ('&LIST' EQ 'YES').JFCB1
         PRINT OFF
.JFCB1   ANOP
         SPACE 1
         DS    0F
INFMJFCB EQU   *
JFCBQNAM DS    0CL8 -    PROCESS QUEUE NAME SPECIFIED BY THE QNAME
*                        KEYWORD  (TCAM)
JFCBDSNM DS    CL44 -    DATA SET NAME
JFCIPLTX DS    0CL7 -    MODULE NAME OF NETWORK CONTROL PROGRAM (TCAM)
*                                                                ICB391
JFCBELNM DS    CL8 -     ELEMENT NAME OR RELATIVE GENERATION NUMBER.
*                        TYPE OF AREA (INDEX, PRIME OR OVERFLOW) FOR
*                        AN INDEXED SEQUENTIAL DATA SET ONLY.
JFCBTSDM DS    B -       JOB MANAGEMENT/DATA MANAGEMENT INTERFACE
JFCCAT   EQU   X'80' -   DATA SET IS CATALOGED
JFCVSL   EQU   X'40' -   VOLUME SERIAL LIST HAS BEEN CHANGED
JFCSDS   EQU   X'20' -   DATA SET IS A SYSIN OR SYSOUT DATA SET
JFCTTR   EQU   X'10' -   A JOB STEP IS TO BE RESTARTED.  USE JFCBOTTR
*                        INSTEAD OF DS1LSTAR FIELD TO REPOSITION DATA
*                        SET IF AUTOMATIC STEP RESTART OCCURS.  (THIS
*                        JOB HAD ABEND PROCESSING FOR A DATA SET OPENED
*                        FOR MOD.)
JFCNWRIT EQU   X'08' -   DO NOT WRITE BACK THE JFCB DURING OPEN
*                        PROCESSING
JFCNDSCB EQU   X'04' -   DO NOT MERGE DSCB OR LABEL FIELDS INTO THIS
*                        JFCB
JFCNDCB  EQU   X'02' -   DO NOT MERGE DCB FIELDS INTO THIS JFCB
JFCPAT   EQU   X'01' -   THE PATTERNING DSCB IS COMPLETE
JFCBDSCB DS    CL3 -     TTR ADDRESS OF THE FORMAT 1 DSCB FOR DATA SET
*                        PART ON THE FIRST VOLUME OF THE DATA SET
*                                                                ICB398
JFCFCBID DS    0CL4 -    FORMS CONTROL BUFFER IMAGE IDENTIFICATION FOR
*                        THE 3211 PRINTER OR DATA PROTECTION IMAGE
*                        IDENTIFICATION FOR THE 3525 CARD PUNCH WITH
*                        THE READ AND PRINT FEATURES OR FORMAT RECORD
*                        ID                                      MDC007
JFCBFRID DS    0CL4 -    LAST 4 CHARACTERS OF A PDS MEMBER TO BE USED
*                        IN THE INTERPRETATION OF DOCUMENTS READ BY
*                        3886 DEVICE FOR THIS STEP               MDC024
JFCAMCRO DS    BL2 -     VSAM CHECKPOINT/RESTART OPTION INDICATORS
*                                                                ICB438
JFCAMSTR DS    H -       NUMBER OF STRINGS                       ICB438
JFCBADBF DS    H -       NUMBER OF DATA BUFFERS                  ICB438
JFCNLREC DS    H -       LOGICAL RECORD LENGTH FOR VSAM          ICB438
JFCVINDX DS    H -       MASS STORAGE SYSTEM COMMUNICATOR (MSSC) VOLUME
*                        SELECTION INDEX  (MDC308)             @Y30LP9A
JFCBLTYP DS    B -       LABEL TYPE
JFCRSV38 EQU   X'80',,C'X' RESERVED
JFCBAL   EQU   X'40' -   AMERICAN NATIONAL STANDARD TAPE LABELS (AL OR
*                        IF BIT 4 IS ALSO ON, AUL)
JFCBLTM  EQU   X'20' -   UNLABELLED TAPE CREATED BY DOS MAY HAVE
*                        LEADING TAPE MARK.  OPEN/CLOSE/EOV AND RESTART
*                        MUST SPACE OVER A TAPE MARK IF ONE EXISTS.
*                                                                ICB398
JFCBLP   EQU   X'10' -   BYPASS LABEL PROCESSING
JFCSUL   EQU   X'0A' -   USER LABEL
JFCNSL   EQU   X'04' -   NONSTANDARD LABEL
JFCSL    EQU   X'02' -   STANDARD LABEL
JFCNL    EQU   X'01' -   NO LABEL
JFCBOTTR DS    0CL3 -    DASD MOD DATA SET - IF AUTOMATIC STEP RESTART
*                        WAS REQUESTED, TTR OF THE END-OF-DATA
*                        INDICATOR EXISTING WHEN THE DATA SET WAS FIRST
*                        OPENED DURING THE ORIGINAL EXECUTION OF THE
*                        CURRENT STEP
JFCBUFOF DS    FL1 -     TAPE DATA SET - THIS FIELD CONTAINS THE BUFFER
*                        OFFSET (DCB SUBPARAMETER VALUE)
JFCBFOFL EQU   X'80' -   IF 1, THE OFFSET EQUALS FOUR AND THE BUFFER
*                        OFFSET FIELD OF EACH BLOCK (D-FORMAT RECORDS)
*                        CONTAINS THE BLOCK LENGTH (SPECIFIED BY
*                        BUFOFF=L).
*                        IF 0, THE OFFSET IS AS SPECIFIED IN THE
*                        REMAINING SEVEN BITS AND THE BUFFER OFFSET
*                        FIELD OF EACH BLOCK DOES NOT CONTAIN THE
*                        BLOCK LENGTH.
JFCFUNC  DS    0B -      FUNCTION INDICATORS FOR THE 3525 CARD PUNCH
*                        (SPECIFIED BY THE FUNC PARAMETER)       ICB392
JFCFNCBI EQU   X'80' -   I - INTERPRET (PUNCH AND PRINT TWO LINES)
*                                                                ICB392
JFCFNCBR EQU   X'40' -   R - READ                                ICB392
JFCFNCBP EQU   X'20' -   P - PUNCH                               ICB392
JFCFNCBW EQU   X'10' -   W - PRINT                               ICB392
JFCFNCBD EQU   X'08' -   D - DATA PROTECTION                     ICB392
JFCFNCBX EQU   X'04' -   X - THIS DATA SET IS TO BE PRINTED.  THIS MAY
*                        BE CODED WITH PW OR RPW TO DISTINGUISH THE
*                        DATA SET TO BE PRINTED FROM THE DATA SET TO
*                        BE PUNCHED.                             ICB392
JFCFNCBT EQU   X'02' -   T - TWO-LINE PRINT SUPPORT REQUEST.  THE
*                        SECOND PRINT LINE IS LOCATED ON CARD LINE
*                        THREE.                                  ICB392
JFCRSV31 EQU   X'01',,C'X' RESERVED
JFCBFLSQ DS    H -       FOR MAGNETIC TAPE DEVICES, FILE SEQUENCE
*                        NUMBER
JFCBVLSQ DS    H -       VOLUME SEQUENCE NUMBER
JFCBMASK DS    0CL8 -    DATA MANAGEMENT MASK
JFCBOPS1 DS    BL5 -     OPEN ROUTINE INTERNAL SWITCHES
JFCBFLG1 DS    B -       FLAG BYTE
JFCSTAND EQU   X'80' -   VOLUME LABEL PROCESSING STANDARD
JFCSLCRE EQU   X'40' -   CREATION OF A STANDARD LABEL IS NECESSARY
JFCSLDES EQU   X'20' -   DESTRUCTION OF A STANDARD LABEL IS NECESSARY
JFCDUAL  EQU   X'10' -   DUAL-DENSITY CHECK DETECTED
JFCOPEN  EQU   X'0F' -   OPEN ROUTINE INTERNAL SWITCHES
JFCBPWBP EQU   X'01' -   PASSWORD BYPASS INDICATOR               MDC010
JFCBFLG2 DS    B -       FLAG BYTE OF OPEN SWITCHES
JFCINOP  EQU   X'80' -   TREAT THE INOUT OPTION OF OPEN AS INPUT
JFCOUTOP EQU   X'40' -   TREAT THE OUTIN OPTION OF OPEN AS OUTPUT
JFCDEFER EQU   X'20' -   SET ONLY IN A JFCB RECORDED IN A DATA SET
*                        DESCRIPTOR RECORD (DSDR) BY THE CHECKPOINT
*                        ROUTINE.  INDICATES THAT THE DATA SET RELATED
*                        TO THE JFCB IS BEING PROCESSED SEQUENTIALLY,
*                        AT THE CHECKPOINT, ON A VOLUME OTHER THAN THE
*                        VOLUME ON WHICH PROCESSING BEGAN IN THE
*                        CURRENT STEP.  WHEN RESTART OCCURS, THIS BIT
*                        CAUSES DEFERRED VOLUME MOUNTING.
JFCNRPS  EQU   X'20' -   USE BY OPEN ROUTINES - SET TO INDICATE THAT
*                        THIS DATA SET RESIDES ON A NON-RPS DEVICE.
*                        RESET TO ZERO WHEN OPEN PROCESSING IS
*                        COMPLETED.                              ICB495
JFCMODNW EQU   X'10' -   DISPOSITION OF THIS DATA SET HAS BEEN CHANGED
*                        FROM MOD TO NEW.  DISPOSITION (IN JFCBIND2)
*                        WILL BE RESTORED TO MOD AFTER OPEN.
JFCSDRPS EQU   X'08' -   USE SEARCH DIRECT FOR ROTATIONAL POSITION
*                        SENSING (RPS) DEVICES                   ICB398
JFCTRACE EQU   X'04' -   GTF TRACE IS TO OCCUR DURING OPEN/CLOSE/EOV
*                        AND DYNAMIC ALLOCATION PROCESSING OF DCB
*                                                                ICB392
JFCBBUFF EQU   X'02' -   INDICATOR TO OPEN THAT A NON-ZERO VALUE IN
*                        JFCBOTTR IS NOT TO PREVENT THE NORMAL STORING
*                        BY OPEN OF A TTR IN JFCBOTTR.  BEFORE OPEN -
*                        JFCBUFOF (OFFSET 67) CONTAINS A BUFFER OFFSET
*                        OR INVALID INFORMATION RESULTING FROM A
*                        JFCB-TO-JFCB MERGE.  AFTER OPEN - OPEN MAY
*                        HAVE STORED A TTR IN JFCBOTTR (OFFSET 67), IN
*                        WHICH CASE OPEN WILL HAVE SET THIS BIT TO
*                        ZERO.
JFCRCTLG EQU   X'01' -   OPEN HAS UPDATED THE TTR.  SCHEDULER STEP
*                        TERMINATION ROUTINE IS TO RECATALOG THIS DATA
*                        SET AND PLACE IN THE CATALOG ENTRY THE DSCB
*                        TTR CONTAINED IN JFCBDSCB IF THIS DATA SET IS
*                        CATALOGED.                              ICB398
JFCBOPS2 DS    B -       OPEN ROUTINE INTERNAL SWITCHES
JFCBCRDT DS    CL3 -     DATA SET CREATION DATE (YDD, Y=YEAR AND
*                        DD=DAY)
JFCBXPDT DS    CL3 -     DATA SET EXPIRATION DATE (YDD)
JFCBIND1 DS    B -       INDICATOR BYTE 1
JFCRLSE  EQU   X'C0' -   RELEASE EXTERNAL STORAGE
JFCLOC   EQU   X'30' -   DATA SET HAS BEEN LOCATED
JFCADDED EQU   X'0C' -   NEW VOLUME HAS BEEN ADDED TO THE DATA SET
JFCGDG   EQU   X'02' -   DATA SET IS A MEMBER OF A GENERATION DATA
*                        GROUP
JFCPDS   EQU   X'01' -   DATA SET IS A MEMBER OF A PARTITIONED DATA SET
         SPACE 1
********************************************************************
*
*    THE FOLLOWING FOUR BIT SETTINGS ARE FROM AN OLD MAPPING MACRO
*      THESE  FOUR WILL BE REMOVED IN A FUTURE RELEASE. USE THE
*      FOREGOING SYMBOLS FOR JFCBIND1
*
********************************************************************
JFCBRLSE EQU   X'40' -   BITS 0 & 1 - EXTERNAL STORAGE RELEASE
*                        INDICATOR
JFCBLOCT EQU   X'10' -   BITS 2 & 3 - DATA SET HAS BEEN LOCATED
JFCBNEWV EQU   X'04' -   BITS 4 & 5 - NEW VOLUME ADDED TO DATA SET
JFCBPMEM EQU   X'01' -   BITS 6 & 7 - DATA SET IS A MEMBER OF A
*                        PDS OR GDG
********************************************************************
         SPACE 1
JFCBIND2 DS    B -       INDICATOR BYTE 2
JFCDISP  EQU   X'C0' -   BIT PATTERN FOR NEW, MOD, OLD
JFCNEW   EQU   X'C0' -   NEW DATA SET
JFCMOD   EQU   X'80' -   MOD DATA SET
JFCOLD   EQU   X'40' -   OLD DATA SET
JFCBRWPW EQU   X'30' -   PASSWORD IS REQUIRED TO WRITE BUT NOT TO READ
*                        (DATA SET SECURITY)
JFCSECUR EQU   X'10' -   PASSWORD IS REQUIRED TO READ OR TO WRITE
*                        (DATA SET SECURITY)
JFCSHARE EQU   X'08' -   SHARED DATA SET
JFCENT   EQU   X'04' -   DELETE THIS JFCB BEFORE ALLOCATION FOR A
*                        RESTARTED GENERATION DATA GROUP
JFCREQ   EQU   X'02' -   STORAGE VOLUME REQUESTED
JFCTEMP  EQU   X'01' -   TEMPORARY DATA SET
         SPACE 1
********************************************************************
*
*   THE FOLLOWING THREE BIT SETTINGS ARE FROM AN OLD MAPPING MACRO
*      THESE THREE WILL BE REMOVED IN A FUTURE RELEASE. USE THE
*      FOREGOING SYMBOLS FOR JFCBIND2
*
********************************************************************
JFCBSTAT EQU   X'40' -   BITS 0 & 1 - DATA SET STATUS (NEW,
*                        OLD OR MOD)
JFCBSCTY EQU   X'10' -   BIT 3 DATA SET SECURITY INDICATOR
JFCBGDGA EQU   X'04' -   BITS 4 & 5 - THIS JFCB IS A MEMBER OF A
*                        GDG-ALL REQUEST
********************************************************************
         SPACE 1
JFCAMPTR DS    0A -      POINTER TO AMPBLK FOR ADDITIONAL VSAM
*                        PARAMETERS                              ICB438
JFCBUFNO DS    0XL1 -    NUMBER OF BUFFERS REQUIRED FOR THIS DATA SET
*                        (ACCESS METHODS OTHER THAN TCAM AND QTAM)
JFCBUFIN DS    0XL1 -    BITS 0-3 CONTAIN THE NUMBER OF BUFFERS
*                        ASSIGNED INITIALLY FOR RECEIVING OPERATIONS
*                        FOR EACH LINE IN A LINE GROUP  (TCAM)
JFCBFOUT DS    0XL1 -    BITS 4-7 CONTAIN THE NUMBER OF BUFFERS
*                        ASSIGNED INITIALLY FOR SENDING OPERATIONS FOR
*                        EACH LINE IN A LINE GROUP  (TCAM)
JFCBUFRQ DS    XL1 -     NUMBER OF BUFFERS REQUIRED FOR EACH LINE
*                        (QTAM)
JFCBGNCP DS    0FL1 -    FOR GAM, THIS FIELD IS USED FOR THE NUMBER OF
*                        IOB'S CONSTRUCTED BY THE OPEN ROUTINE.
*                        MAXIMUM NUMBER IS 99.                   MDC025
JFCBHIAR DS    0BL1 -    BUFFER POOL LOCATION IN MAIN STORAGE
*                        (HIERARCHY)
JFCBFALN DS    0BL1 -    BUFFER ALIGNMENT
JFCBFTEK DS    B -       BUFFERING TECHNIQUE
JFCHIER  EQU   X'84' -   BITS 0 AND 5 DESCRIBE MAIN STORAGE HIERARCHY.
*                        BOTH BITS OFF, HIERARCHY 0.
*                        BIT 0 OFF AND BIT 5 ON, HIERARCHY 1.
JFCSIM   EQU   X'40' -   S - SIMPLE BUFFERING
JFCBBFTA EQU   X'60' -   A - FOR QSAM LOCATE MODE PROCESSING OF SPANNED
*                        RECORDS, AUTOMATIC RECORD AREA CONSTRUCTION
*                        DURING LOGICAL RECORD INTERFACE PROCESSING.
*                        OPEN IS TO CONSTRUCT A RECORD AREA IF IT
*                        AUTOMATICALLY CONSTRUCTS BUFFERS.
JFCBBFTR EQU   X'20' -   R - FOR BSAM CREATE BDAM PROCESSING OR BDAM
*                        PROCESSING OF UNBLOCKED SPANNED RECORDS,
*                        SOFTWARE TRACK OVERFLOW.  OPEN FORMS A SEGMENT
*                        WORK AREA POOL AND STORES THE ADDRESS OF THE
*                        SEGMENT WORK AREA CONTROL BLOCK IN THE DCBEOBW
*                        FIELD OF THE DATA CONTROL BLOCK.  WRITE USES
*                        A SEGMENT WORK AREA TO WRITE A RECORD AS ONE
*                        OR MORE SEGMENTS.
*                        FOR BSAM INPUT PROCESSING OF UNBLOCKED SPANNED
*                        RECORDS WITH KEYS, RECORD OFFSET PROCESSING.
*                        READ READS ONE RECORD SEGMENT INTO THE RECORD
*                        AREA.  THE FIRST SEGMENT OF A RECORD IS
*                        PRECEDED IN THE RECORD AREA BY THE KEY.
*                        SUBSEQUENT SEGMENTS ARE AT AN OFFSET EQUAL TO
*                        THE KEY LENGTH.
JFCEXC   EQU   X'10' -   E - EXCHANGE BUFFERING
JFCDYN   EQU   X'08' -   DYNAMIC BUFFERING
JFCHIER1 EQU   X'04' -   HIERARCHY 1 MAIN STORAGE
JFCDWORD EQU   X'02' -   D - DOUBLE WORD BOUNDARY
JFCFWORD EQU   X'01' -   F - FULL WORD NOT A DOUBLE WORD BOUNDARY
JFCBUFL  DS    H -       BUFFER LENGTH
JFCEROPT DS    B -       ERROR OPTION.  DISPOSITION OF PERMANENT ERRORS
*                        IF USER RETURNS FROM A SYNCHRONOUS ERROR
*                        EXIT.  (QSAM)
JFCACC   EQU   X'80' -   ACCEPT
JFCSKP   EQU   X'40' -   SKIP
JFCABN   EQU   X'20' -   ABNORMAL END OF TASK
JFCTOPT  EQU   X'10' -   ON-LINE TERMINAL TEST (BTAM)            ICB349
JFCRSV02 EQU   X'08',,C'X' RESERVED
JFCRSV03 EQU   X'04',,C'X' RESERVED
JFCRSV04 EQU   X'02',,C'X' RESERVED
JFCRSV05 EQU   X'01',,C'X' RESERVED
JFCTRTCH DS    0CL1 -    TAPE RECORDING TECHNIQUE FOR 7-TRACK TAPE
JFCEVEN  EQU   X'23' -   E - EVEN PARITY
JFCTRAN  EQU   X'3B' -   T - EOD/EBCDIC TRANSLATION
JFCCONV  EQU   X'13' -   C - DATA CONVERSION
JFCTREV  EQU   X'2B' -   ET - EVEN PARITY AND TRANSLATION
JFCKEYLE DS    0XL1 -    DIRECT ACCESS KEY LENGTH
JFCCODE  DS    0BL1 -    CONVERSION CODE (PAPER TAPE)
JFCNOCON EQU   X'80' -   N - NO CONVERSION
JFCBCD   EQU   X'40' -   I - IBM BCD
JFCFRI   EQU   X'20' -   F - FRIDEN
JFCBUR   EQU   X'10' -   B - BURROUGHS
JFCNCR   EQU   X'08' -   C - NATIONAL CASH REGISTER
JFCASCII EQU   X'04' -   A - ASCII (8-TRACK)
JFCTTY   EQU   X'02' -   T - TELETYPE
JFCRSV32 EQU   X'01',,C'X' RESERVED
JFCMODE  DS    0BL1 -    MODE OF OPERATION (CARD READER, CARD PUNCH)
*                                                                ICB394
JFCSTACK DS    0BL1 -    STACKER SELECTION (CARD READER, CARD PUNCH)
JFCBIN   EQU   X'80' -   C - COLUMN BINARY MODE
JFCEBCD  EQU   X'40' -   E - EBCDIC MODE
JFCMODEO EQU   X'20' -   0 - OPTICAL MARK READ MODE (3505 ONLY)  ICB394
JFCMODER EQU   X'10' -   R - READ COLUMN ELIMINATE MODE (3505 AND 3525
*                        WITH READ FEATURE)                      ICB394
JFCRSV06 EQU   X'08',,C'X' RESERVED
JFCRSV07 EQU   X'04',,C'X' RESERVED
JFCTWO   EQU   X'02' -   2 - STACKER TWO
JFCONE   EQU   X'01' -   1 - STACKER ONE
JFCPRTSP DS    B -       NORMAL PRINTER SPACING
JFCSPTHR EQU   X'19' -   3 - SPACE THREE LINES
JFCSPTWO EQU   X'11' -   2 - SPACE TWO LINES
JFCSPONE EQU   X'09' -   1 - SPACE ONE LINE
JFCSPNO  EQU   X'01' -   0 - NO SPACING
JFCDEN   DS    B -       TAPE DENSITY - 2400/3400 SERIES MAGNETIC TAPE
*                        UNITS
JFC200   EQU   X'03' -   7-TRACK 200 BPI
JFC556   EQU   X'43' -   7-TRACK 556 BPI
JFC800   EQU   X'83' -   7-TRACK AND 9-TRACK 800 BPI
JFC1600  EQU   X'C3' -   9-TRACK 1600 BPI
JFC6250  EQU   X'D3' -   9-TRACK 6250 BPI                        ICB474
JFCBABFS DS    0FL3 -    TOTAL BUFFER SIZE FOR ALL VSAM BUFFERS  ICB438
JFCLIMCT DS    0CL3 -    SEARCH LIMIT (BDAM)
         DS    CL1 -     RESERVED
JFCTRKBL DS    CL2 -     DATA SET OPENED FOR MOD - IF AUTOMATIC STEP
*                        RESTART WAS REQUESTED, TRACK BALANCE EXISTING
*                        WHEN THE DATA SET WAS FIRST OPENED DURING THE
*                        ORIGINAL EXECUTION OF THE CURRENT STEP
JFCDSORG DS    0BL2 -    DATA SET ORGANIZATION BEING USED
JFCDSRG1 DS    B -       BYTE 1 OF JFCDSORG
JFCORGIS EQU   X'80' -   INDEXED SEQUENTIAL
JFCORGPS EQU   X'40' -   PHYSICAL SEQUENTIAL
JFCORGDA EQU   X'20' -   DIRECT
JFCORGCX EQU   X'10' -   BTAM OR QTAM LINE GROUP                 MDC011
JFCORGCQ EQU   X'08' -   QTAM DIRECT ACCESS MESSAGE QUEUE        MDC012
JFCORGMQ EQU   X'04' -   QTAM PROBLEM PROGRAM MESSAGE QUEUE      MDC013
JFCORGPO EQU   X'02' -   PARTITIONED
JFCORGU  EQU   X'01' -   UNMOVABLE - THE DATA CONTAINS LOCATION
*                        DEPENDENT INFORMATION
JFCDSRG2 DS    B -       BYTE 2 OF JFCDSORG
JFCORGGS EQU   X'80' -   GRAPHICS
JFCORGTX EQU   X'40' -   TCAM LINE GROUP                         MDC014
JFCORGTQ EQU   X'20' -   TCAM MESSAGE QUEUE                      MDC015
JFCRSV13 EQU   X'10',,C'X' RESERVED, BINARY ZERO
JFCORGAM EQU   X'08' -   VSAM                                    ICB438
JFCORGTR EQU   X'04' -   TCAM 3705                               MDC016
JFCRSV15 EQU   X'02',,C'X' RESERVED, BINARY ZERO
JFCRSV16 EQU   X'01',,C'X' RESERVED, BINARY ZERO
JFCRECFM DS    B -       RECORD FORMAT
JFCFMREC EQU   X'C0' -   HIGH-ORDER TWO BITS OF JFCRECFM TO BE TESTED
*                        FOR RECORD FORMAT
JFCUND   EQU   X'C0' -   U - UNDEFINED
JFCFIX   EQU   X'80' -   F - FIXED
JFCVAR   EQU   X'40' -   V - VARIABLE
JFCRCFM  EQU   X'E0' -   RECORD FORMAT (USASI/USASCII)
JFCVARD  EQU   X'20' -   D - VARIABLE (FORMAT D FOR USASI/USASCII)
JFCRFO   EQU   X'20' -   T - TRACK OVERFLOW
JFCRFB   EQU   X'10' -   B - BLOCKED - MAY NOT OCCUR WITH UNDEFINED
JFCRFS   EQU   X'08' -   S - FOR FIXED LENGTH RECORD FORMAT, STANDARD
*                        BLOCKS.  NO TRUNCATED BLOCKS OR UNFILLED
*                        TRACKS ARE EMBEDDED IN THE DATA SET.
*                        FOR VARIABLE LENGTH RECORD FORMAT, SPANNED
*                        RECORDS.
JFCCHAR  EQU   X'06' -   CONTROL CHARACTER
JFCASA   EQU   X'04' -   A - AMERICAN NATIONAL STANDARD (ASA) CONTROL
*                        CHARACTER
JFCMAC   EQU   X'02' -   M - MACHINE CODE CONTROL CHARACTER
JFCNOCC  EQU   X'00' -   NO CONTROL CHARACTER
JFCOPTCD DS    B -       OPTION CODES
         SPACE 1
*              QSAM - BSAM - BPAM
JFCWVCSP EQU   X'80' -   W - WRITE VALIDITY CHECK
JFCALLOW EQU   X'40' -   U - ALLOW A DATA CHECK CAUSED BY AN INVALID
*                        CHARACTER (1403 PRINTER WITH UCS FEATURE)
JFCPCIBT EQU   X'20' -   C - CHAINED SCHEDULING USING THE PROGRAM
*                        CONTROLLED INTERRUPTION
JFCBCKPT EQU   X'10' -   BYPASS EMBEDDED DOS CHECKPOINT RECORDS ON TAPE
*                                                                ICB398
JFCRSV18 EQU   X'08',,C'X' RESERVED
JFCREDUC EQU   X'04' -   Z - USE REDUCED ERROR RECOVERY PROCEDURE
*                        (MAGNETIC TAPE)   (EXCP ALSO)
JFCSRCHD EQU   X'04' -   USE SEARCH DIRECT (SD), INSTEAD OF SEARCH
*                        PREVIOUS, ON ROTATIONAL POSITION SENSING (RPS)
*                        DEVICE.  (DIRECT ACCESS)
JFCRSV21 EQU   X'02',,C'X' RESERVED
JFCRSV23 EQU   X'01',,C'X' RESERVED
         SPACE 1
*              BISAM - QISAM
JFCWVCIS EQU   X'80' -   W - WRITE VALIDITY CHECK
JFCRSV17 EQU   X'40',,C'X' RESERVED
JFCMAST  EQU   X'20' -   M - MASTER INDEXES
JFCIND   EQU   X'10' -   I - INDEPENDENT OVERFLOW AREA
JFCCYL   EQU   X'08' -   Y - CYLINDER OVERFLOW AREA
JFCRSV19 EQU   X'04',,C'X' RESERVED
JFCDEL   EQU   X'02' -   L - DELETE OPTION
JFCREORG EQU   X'01' -   R - REORGANIZATION CRITERIA
         SPACE 1
*              BDAM
JFCWVCBD EQU   X'80' -   W - WRITE VALIDITY CHECK
JFCOVER  EQU   X'40' -   TRACK OVERFLOW
JFCEXT   EQU   X'20' -   E - EXTENDED SEARCH
JFCFEED  EQU   X'10' -   F - FEEDBACK
JFCACT   EQU   X'08' -   A - ACTUAL ADDRESSING
JFCRSV20 EQU   X'04',,C'X' RESERVED
JFCRSV22 EQU   X'02',,C'X' RESERVED
JFCREL   EQU   X'01' -   R - RELATIVE BLOCK ADDRESSING
         SPACE 1
*              USASI/USASCII
JFCOPTQ  EQU   X'08' -   EBCDIC TO ASCII OR ASCII TO EBCDIC
*                        TRANSLATION REQUIRED
         SPACE 1
*              TCAM
JFCSDNAM EQU   X'80' -   SOURCE OR DESTINATION NAME PRECEDES MESSAGE
*                        (AFTER CONTROL BYTE)
JFCWUMSG EQU   X'40' -   WORK UNIT IS A MESSAGE (DEFAULT WORK UNIT IS
*                        A RECORD)
JFCCBWU  EQU   X'20' -   CONTROL BYTE PRECEDES WORK UNIT
JFCBLKSI DS    0H -      MAXIMUM BLOCK SIZE
JFCBUFSI DS    0H -      MAXIMUM BUFFER SIZE
JFCBAXBF DS    H -       NUMBER OF INDEX BUFFERS (VSAM)          ICB438
JFCAMSYN DS    0CL8 -    MODULE NAME FOR SYNAD ROUTINE FOR VSAM  ICB438
JFCLRECL DS    H -       LOGICAL RECORD LENGTH
JFCNCP   DS    0FL1 -    NUMBER OF CHANNEL PROGRAMS.  NUMBER OF READ OR
*                        WRITE REQUESTS WHICH MAY BE ISSUED PRIOR TO A
*                        CHECK.  NUMBER OF IOB'S GENERATED.
*                        (MAXIMUM NUMBER IS 99.)
*                        NOTE - GAM USES JFCBFTEK FOR THIS INFORMATION
*                        AND DOES NOT USE THIS FIELD AT ALL.
JFCBUFMX DS    FL1 -     THE MAXIMUM NUMBER OF BUFFERS TO BE USED FOR
*                        DATA TRANSFER FOR EACH LINE IN THIS LINE
*                        GROUP  (TCAM)
JFCBFSEQ DS    0FL1 -    TAPE POSITIONING INFORMATION FOR CHECKPOINT
*                        RESTART.  THIS FIELD IS USED TO PASS A
*                        PHYSICAL FILE SEQUENCE COUNT FROM CHECKPOINT
*                        TO RESTART.  THE COUNT TELLS THE PHYSICAL
*                        POSITION OF THE TAPE VOLUME THAT WAS BEING
*                        PROCESSED WHEN THE CHECKPOINT WAS TAKEN.
*                                                               SA60703
JFCNTM   DS    0FL1 -    THE NUMBER OF TRACKS THAT DETERMINE THE
*                        DEVELOPMENT OF A MASTER INDEX.  MAXIMUM
*                        NUMBER IS 99.  (ISAM)
JFCPCI   DS    B -       PROGRAM-CONTROLLED INTERRUPTION (PCI) FLAG
*                        BYTE  (TCAM)
JFCPCIX1 EQU   X'80' -   PCI=(X,) RECEIVE OPERATIONS             ICB473
JFCPCIX2 EQU   X'40' -   PCI=(,X) SEND OPERATIONS
*                        X INDICATES THAT AFTER THE FIRST BUFFER IS
*                        FILLED (ON RECEIVE OPERATIONS) OR EMPTIED (ON
*                        SEND OPERATIONS), A PCI OCCURS DURING THE
*                        FILLING OR EMPTYING OF THE NEXT BUFFER.  THE
*                        FIRST BUFFER REMAINS ALLOCATED AND ANOTHER
*                        IS ALLOCATED.                           ICB473
JFCPCIA1 EQU   X'20' -   PCI=(A,) RECEIVE OPERATIONS
JFCPCIA2 EQU   X'10' -   PCI=(,A) SEND OPERATIONS
*                        A INDICATES THAT AFTER THE FIRST BUFFER IS
*                        FILLED (ON RECEIVE OPERATIONS) OR EMPTIED (ON
*                        SEND OPERATIONS), A PCI OCCURS DURING THE
*                        FILLING OR EMPTYING OF THE NEXT BUFFER.  THE
*                        FIRST BUFFER IS DEALLOCATED.  A BUFFER IS
*                        ALLOCATED IN PLACE OF THE DEALLOCATED BUFFER.
JFCPCIN1 EQU   X'08' -   PCI=(N,) RECEIVE OPERATIONS
JFCPCIN2 EQU   X'04' -   PCI=(,N) SEND OPERATIONS
*                        N INDICATES THAT NO PCI'S ARE TAKEN DURING
*                        FILLING (ON RECEIVE OPERATIONS) OR EMPTYING
*                        (ON SEND OPERATIONS) OF BUFFERS.  BUFFERS
*                        ARE DEALLOCATED AT THE END OF TRANSMISSION.
JFCPCIR1 EQU   X'02' -   PCI=(R,) RECEIVE OPERATIONS
JFCPCIR2 EQU   X'01' -   PCI=(,R) SEND OPERATIONS
*                        R INDICATES THAT AFTER THE FIRST BUFFER IS
*                        FILLED (ON RECEIVE OPERATIONS) OR EMPTIED (ON
*                        SEND OPERATIONS), A PCI OCCURS DURING THE
*                        FILLING OR EMPTYING OF EACH SUCCEEDING BUFFER.
*                        THE COMPLETED BUFFER IS DEALLOCATED, BUT NO
*                        NEW BUFFER IS ALLOCATED TO TAKE ITS PLACE.
         SPACE 2
*******************************************************************
*
*              NORMAL 108 SEGMENT
*
JFCRESRV DS    0BL4 -    FIRST BYTE CONTAINS NUMBER OF BYTES FOR TIME
*                        OF DAY.  SECOND BYTE CONTAINS NUMBER OF BYTES
*                        FOR DATE.  THIRD BYTE CONTAINS NUMBER OF
*                        BYTES FOR OUT SEQ.  FOURTH BYTE CONTAINS
*                        NUMBER OF BYTES IN.  (TCAM)
JFCRKP   DS    H -       THE RELATIVE POSITION OF THE FIRST BYTE OF THE
*                        KEY WITHIN EACH LOGICAL RECORD.  MAXIMUM VALUE
*                        IS LOGICAL RECORD LENGTH MINUS KEY LENGTH.
JFCCYLOF DS    XL1 -     THE NUMBER OF TRACKS TO BE RESERVED ON EACH
*                        CYLINDER TO HOLD RECORDS THAT OVERFLOW FROM
*                        OTHER TRACKS ON THAT CYLINDER.  MAXIMUM VALUE
*                        IS 99.
JFCDBUFN DS    CL1 -     RESERVED
JFCINTVL DS    XL1 -     INTENTIONAL DELAY, IN SECONDS, BETWEEN
*                        PASSES THROUGH A POLLING LIST (QTAM)
*              END OF NORMAL 108 SEGMENT
*******************************************************************
         SPACE 2
*******************************************************************
*
*              108 PRINTER SEGMENT
*
*        NOTE  THIS SEGMENT REPLACES THE NORMAL 108 SEGMENT IF
*              THE DD STATEMENT USES THE UCS PARAMETER.
*
         ORG   JFCRESRV
JFCUCSID DS    CL4 -     NAME OF THE UCS IMAGE TO BE LOADED
JFCUCSOP DS    B -       OPERATION OF THE UCS IMAGE TO BE LOADED
JFCRSV24 EQU   X'80',,C'X' RESERVED
JFCFOLD  EQU   X'40' -   UCS IMAGE IS TO BE LOADED IN THE FOLD MODE
JFCRSV25 EQU   X'20',,C'X' RESERVED
JFCVER   EQU   X'10' -   UCS IMAGE IS TO BE VERIFIED
JFCFCBAL EQU   X'08' -   FORMS ARE TO BE ALIGNED
JFCFCBVR EQU   X'04' -   FORMS CONTROL BUFFER (FCB) IMAGE IS TO BE
*                        VERIFIED
JFCRSV26 EQU   X'02',,C'X' RESERVED
JFCRSV27 EQU   X'01',,C'X' RESERVED
*              END OF 108 PRINTER SEGMENT
*******************************************************************
         SPACE 2
JFCOUTLI DS    0FL3 -    SMF - SYSOUT LIMIT.  BINARY REPRESENTATION OF
*                        THE OUTLIM= PARAMETER ON THE SYSOUT DD
*                        STATEMENT.  THE MAXIMUM NUMBER OF LOGICAL
*                        RECORDS SPECIFIED FOR THIS OUTPUT DATA SET.
*                                                                MDC017
JFCTHRSH DS    0FL1 -    RECORDS TO BE USED
JFCCPRI  DS    B -       PRIORITY BETWEEN SEND AND RECEIVE OPERATIONS
*                        (TCAM)
JFCRSV53 EQU   X'80',,C'X' RESERVED                              MDC020
JFCRSV54 EQU   X'40',,C'X' RESERVED                              MDC019
JFCRSV55 EQU   X'20',,C'X' RESERVED                              MDC018
JFCRSV33 EQU   X'10',,C'X' RESERVED
JFCRSV34 EQU   X'08',,C'X' RESERVED
JFCRECV  EQU   X'04' -   RECEIVE PRIORITY                        MDC018
JFCEQUAL EQU   X'02' -   EQUAL PRIORITY                          MDC019
JFCSEND  EQU   X'01' -   SEND PRIORITY                           MDC020
JFCSOWA  DS    H -       LENGTH, IN BYTES, OF THE USER-PROVIDED WORK
*                        AREA (QTAM)
JFCBNTCS DS    XL1 -     NUMBER OF OVERFLOW TRACKS
JFCBNVOL DS    XL1 -     NUMBER OF VOLUME SERIAL NUMBERS
JFCBVOLS DS    0CL30 -   THE FIRST FIVE VOLUME SERIAL NUMBERS  @Y30LP9A
         DS    CL22 -    FIRST 22 BYTES OF JFCBVOLS            @Y30LP9A
JFCMSVGP DS    CL8 -     MASS STORAGE VOLUME GROUP FROM WHICH TO
*                        SELECT A VOLUME  (MDC306)             @Y30LP9A
JFCBEXTL DS    XL1 -     LENGTH OF BLOCK OF EXTRA VOLUME SERIAL NUMBERS
*                        (BEYOND FIVE)
JFCBEXAD DS    CL3 -     RELATIVE TRACK ADDRESS (TTR) OF FIRST JFCB
*                        EXTENSION BLOCK FOR VOLUME SERIAL NUMBERS
JFCBPQTY DS    0CL3 -    PRIMARY QUANTITY OF DIRECT ACCESS STORAGE
*                        REQUIRED
JFCRUNIT DS    CL3 -     UNIT TYPE (EBCDIC) OF A DEVICE AT A REMOTE
*                        TERMINAL.  THE FIRST TWO CHARACTERS ARE RD
*                        (READER), PR (PRINTER) OR PU (PUNCH).  THE
*                        THIRD CHARACTER IS A NUMBER FROM 1 TO 9 ICB387
JFCBCTRI DS    B -       SPACE PARAMETERS
JFCBSPAC EQU   X'C0' -   BIT PATTERN FOR SPACE REQUESTS
JFCBABS  EQU   X'00' -   ABSTR REQUEST
JFCBAVR  EQU   X'40' -   AVERAGE BLOCK LENGTH REQUEST
JFCBTRK  EQU   X'80' -   TRK REQUEST
JFCBCYL  EQU   X'C0' -   CYL REQUEST
JFCBMSGP EQU   X'20' -   REQUEST IS FOR A MASS STORAGE VOLUME GROUP
*                        (MSVGP) VOLUME  (MDC307)              @Y30LP9A
JFCRSV29 EQU   X'10',,C'X' RESERVED
JFCONTIG EQU   X'08' -   CONTIG REQUEST
JFCMIXG  EQU   X'04' -   MXIG REQUEST
JFCALX   EQU   X'02' -   ALX REQUEST
JFCROUND EQU   X'01' -   ROUND REQUEST
JFCBSQTY DS    0CL3 -    SECONDARY QUANTITY OF DIRECT ACCESS STORAGE
*                        REQUIRED
JFCRQID  DS    H -       QUEUE IDENTIFICATION (QID) USED BY ACCESS
*                        METHOD TO DETERMINE THE REMOTE TERMINAL
*                        LOCATION FOR THIS JOB.                  ICB387
         DS    X -       LAST BYTE OF JFCBSQTY  (MDC304)       @XM05457
JFCFLGS1 DS    B -       FLAG BYTE (ICB488)                     SA53458
JFCBDLET EQU   X'80' -   IF ONE, DELETE THE DATA SET USED WHEN
*                        EXTENDING THE JOB QUEUE OR SPOOL DATA SETS
*                        (OS/VS1)  (MDC305)                    @XM05457
JFCTOPEN EQU   X'40' -   TAPE DATA SET HAS BEEN OPENED           MDC026
JFCRSV41 EQU   X'20',,C'X' - RESERVED
JFCRSV42 EQU   X'10',,C'X' - RESERVED
JFCBCEOV EQU   X'08' -   IF ONE, CHKPT=EOV SPECIFIED FOR THIS DATA SET
*                        (MDC312)                              @Z30JP9A
JFCVRDS  EQU   X'04' -   VIO DATA SET                            MDC006
JFCRSV45 EQU   X'02',,C'X' - RESERVED
JFCBUAFF EQU   X'01' -   UNIT AFFINITY SPECIFIED FOR THIS DATA SET
*                        (ICB488)                               SA53458
JFCBDQTY DS    CL3 -     QUANTITY OF DIRECT ACCESS STORAGE REQUIRED FOR
*                        A DIRECTORY OR AN EMBEDDED INDEX AREA
JFCBSPNM DS    AL3 -     MAIN STORAGE ADDRESS OF THE JFCB WITH WHICH
*                        CYLINDERS ARE SPLIT
JFCBABST DS    H -       RELATIVE ADDRESS OF FIRST TRACK TO BE
*                        ALLOCATED
JFCBSBNM DS    AL3 -     MAIN STORAGE ADDRESS OF THE JFCB FROM WHICH
*                        SPACE IS TO BE SUBALLOCATED
JFCBDRLH DS    CL3 -     AVERAGE DATA BLOCK LENGTH
JFCBVLCT DS    XL1 -     VOLUME COUNT
JFCBSPTN DS    XL1 -     NUMBER OF TRACKS PER CYLINDER TO BE USED BY
*                        THIS DATA SET WHEN SPLIT CYLINDER IS INDICATED
JFCBLGTH EQU   176 -     LENGTH OF JFCB
JFCBEND  EQU   *
         POP   PRINT
         MEND
         TITLE 'DSECT DEFINITIONS FOR THIS PROGRAM'
         PRINT NOGEN
JFCB     DSECT
         IEFJFCBN                  JFCB DESCRIPTION
         TITLE 'EQU DEFINITIONS FOR THIS PROGRAM'
CLOPS    CSECT
         SPACE 3
R0       EQU   0                   PARAMETER AND WORK REGISTER
R1       EQU   1                   PARAMETER AND WORK REGISTER
R2       EQU   2                   NOT USED
R3       EQU   3                   NOT USED
R4       EQU   4                   NOT USED
R5       EQU   5                   NOT USED
R6       EQU   6                   NOT USED
R7       EQU   7                   NOT USED
R8       EQU   8                   NOT USED
R9       EQU   9                   NOT USED
R10      EQU   10                  BASE REGISTER FOR PROGRAM
R11      EQU   11                  NOT USED
R12      EQU   12                  NOT USED
R13      EQU   13                  BASE REGISTER FOR SAVE AREA
R14      EQU   14                  LINK AND WORK REGISTER
R15      EQU   15                  LINK AND WORK REGISTER
         TITLE '--  OPENS AND CLOSES A DATA SET'
         PROLOG ID='CLOPS-0.0-11MAY76-BLASIUS',SSA=*
         RDJFCB DCB                READ JOB FILE CONTROL BLOCK
         LTR   R15,R15             OK ?
         BNZ   EPILOG              NO, DD STATEMENT MISSING, RC=4
         LA    R1,JFCBBUF
         USING JFCB,R1             SYMBOLIC ADDRESSABILITY FOR JFCB
         NI    JFCBIND2,X'FF'-JFCDISP   CLEAR DISPOSITION FIELD
         OI    JFCBIND2,JFCMOD     SET DISPOSITION TO MOD
         DROP  R1
         OPEN  (DCB,OUTPUT),TYPE=J
         CLOSE DCB
         SR    R15,R15             NORMAL RETURN CODE = 0
EPILOG   EPILOG RC=(15),SA=S       RETURN TO CALLER
         SPACE 5
*-- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --*
*        CONSTANTS AND AREAS                                          *
*-- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --*
         SPACE 3
DCB      DCB   DDNAME=CLOPS,DSORG=PS,MACRF=W,EXLST=EXLST
         SPACE 3
EXLST    DS    0A
         DC    X'87',AL3(JFCBBUF)  EXIT LIST
         SPACE 3
JFCBBUF  DS    XL176               AREA FOR JFCB
         SPACE 3
         END CLOPS
