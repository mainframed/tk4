1              EDV - HANDBUCH                02.76
-              V M P                           Z   35   1
-
-
-    'VMP' (VTOC MODIFICATION PROGRAM) DIENT ZUM BEREINIGEN
     VON VSAM-PLATTEN SOWIE ZUM UMBENENNEN VON DATEIEN, DIE
     PERMANENT EROEFFNET SIND UND DESHALB NICHT MIT 'IEHPROGM'
     RENAMED WERDEN KOENNEN (Z.B. SYS1.PROCLIB).
     'VMP' ERZEUGT EINEN JOB-STROM AUS 'IEHPROGM'- UND
     SUPERZAP-STEPS.
-    BEREINIGUNG VON VSAM-PLATTEN
0    HIERMIT IST DAS ENTFERNEN VON VSAM-DATASPACES GEMEINT,
     DIE ZWAR PHYSISCH NOCH VORHANDEN SIND, ABER NICHT MEHR
     IN EINEM KATALOG STEHEN.
     'VMP' UNTERSTUETZT
     1)  AUTOMATISCHES ENTFERNEN SAEMTLICHER VSAM-DATASPACES
         VON EINEM VOLUME. IN DIESEM FALL WIRD AUCH DAS VSAM-
         OWNERSHIP-BIT IM FORMAT4-DSCB ENTFERNT.
     2)  DAS SCRATCHEN BESTIMMTER VSAM-DATASPACES.
         FUER DIESE ANWENDUNG MUSS DER BENUTZER DEN INTERNEN
         DSNAME DES DATASPACE DEM PROGRAMM ZUR VERFUEGUNG
         STELLEN.
0    DIE VSAM-SCRATCH-FUNKTION IST NUR FUER IM SYSTEM NICHT
     VORKOMMENDE VOLUME-SERIAL-NR. MOEGLICH. DIE ZU BEREINI-
     GENDEN VOLUMES MUESSEN VORHER MIT 'IEHDASDR' AUF DIE
     VON 'VMP' UNTERSTUETZTEN VOL-SER-NR. UMBENANNT WERDEN.
     DADURCH SOLL EIN UNBEABSICHTIGTES ZERSTOEREN VON AKTIVEN
     VSAM-DATASETS VERHINDERT WERDEN.
0    DIE IN 'VMP' ENTHALTENE VOLUME-TABELLE KANN MIT DER
     'ADD'-FUNKTION TEMPORAER UM VOLUME-ENTRIES ERWEITERT
     WERDEN. 'ADD' VERLANGT EIN KENNWORT.
0    DIE SCRATCH-FUNKTION BENUTZT 'AMASPZAP' UND
     'IEHPROGM'.
     'AMASPZAP' LOESCHT DAS VSAM-OWNERSHIP-BIT IM FORMAT4-
     DSCB (BEI SCRATCH OHNE DSN) SOWIE DIE DATA PROTECTION
     BITS IN DEN ENTSPRECHENDEN FORMAT1-DSCB'S, WAEHREND
     'IEHPROGM' DAS SCRATCHEN DURCHFUEHRT.
-    UMBENENNEN VON PERMANENT EROEFFNETEN DATEIEN (NONVSAM)
-    DIESE FUNKTION WIRD MIT HILFE VON 'AMASPZAP' DURCHGE-
     FUEHRT. IST DER NEUE DATEI-NAME 'SYSCTLG', WIRD ZUSAETZLICH
     DIE FUER OS-KATALOGE ERFORDERLICHE VTOC-KORREKTUR VOR-
     GENOMMEN.
1               EDV - HANDBUCH                02.76
-               V M P                           Z   35   2
-
-
-    VOR GENERIERUNG DES RENAME-ZAPS PRUEFT 'VMP', OB DER
     NEUE DATEI-NAME AUF DEM VOLUME BEREITS VORHANDEN IST.
     DA DAS RENAME SELBST ERST DURCH DEN ERZEUGTEN JOB
     VORGENOMMEN WIRD (ALSO VERZOEGERT), IST ES NICHT MOEGLICH,
     INNERHALB EINES 'VMP'-JOBS EINEN AUSTAUSCH VON DATEI-NAMEN
     VORZUNEHMEN, Z.B.
         1. RENAME   ALTER DSN = 'DSNALT'
                     NEUER DSN = 'DSNURALT'
0        2. RENAME   ALTER DSN = 'DSNNEU'
                     NEUER DSN = 'DSNALT'
     DIESE RENAME-FUNKTIONEN KOENNEN NUR IN ZWEI GETRENNTEN
     'VMP'-JOBS VORGENOMMEN WERDEN. BEVOR DER ZWEITE JOB
     ANLAEUFT, MUSS DER ZAP-STEP ERFOLGREICH ABGESCHLOSSEN SEIN.
-
-    ES KOENNEN BELIEBIG VIELE FUNKTIONEN IN EINEM STEP
     VERARBEITET WERDEN (SOFERN SIE SICH NICHT GEGENSEITIG
     AUSSCHLIESSEN). DIE ANZAHL DER ANGESPROCHENEN VOLUMES
     IST JEDOCH AUF 16 BEGRENZT.
0    DER ERZEUGTE JOBSTROM BESTEHT AUS EINEM ODER MEHREREN
     SUPERZAP-STEPS (JE VOLUME EIN STEP) UND - FALLS
     ERFORDERLICH - EINEM 'IEHPROGM'-STEP.
-    DIE FUER 'VMP' BENOETIGTEN PARAMETER KOENNEN SOWOHL
     UEBER DAS PARM-FELD ALS AUCH UEBER STEUERKARTEN EIN-
     GEGEBEN WERDEN. DIE ANGABEN IM PARM-FELD WERDEN ZUERST
     VERARBEITET.
0    PARAMETER IN STEUERKARTEN MUESSEN IN SP. 1 BEGINNEN UND
     DUERFEN NICHT SP. 71 UEBERSCHREITEN. FORTSETZUNGSKARTEN
     SIND MOEGLICH. DEM LETZTEN PARAMETER EINER KARTE MUESSEN
     DANN EIN KOMMA UND MINDESTENS EIN BLANK FOLGEN. DIE
     FORTSETZUNG IN DER NAECHSTEN KARTE MUSS WIEDER AB SP.1
     BEGINNEN. DER LETZTE PARAMETER EINER FUNKTION MUSS
     DURCH EIN BLANK ABGESCHLOSSEN SEIN.
     WIRD DAS PARM-FELD BENUTZT, MUSS DIESES ALLE ERFORDERLICHEN
     PARAMETER EINER FUNKTION ENTHALTEN.
1               EDV - HANDBUCH                02.76
-               V M P                           Z   35   3
-
-
-    EINE 'VMP'-FUNKTION ERFORDERT MAXIMAL 4 POSITIONS-
     PARAMETER:
0    PARAMETER 1      ART DER FUNKTION
     PARAMETER 2      VOLUME SERIAL NR., DEVICE TYPE
     PARAMETER 3 U. 4 HAENGEN VON DER ART DER FUNKTION AB.
0    DIE PARAMETER MUESSEN DURCH KOMMATA VONEINANDER GETRENNT
     WERDEN.
-    'VMP'-FUNKTIONEN UND PARAMETER
-    1)  SCRATCHEN SAEMTLICHER VSAM-DATA-SPACES EINES VOLUMES
         (INCL. LOESCHEN DES VSAM-OWNERSHIP-BITS)
         PARAMETER 1:   'SCR'
         PARAMETER 2:   VVVVVV ODER VVVVVV/DDDDDD
                        VVVVVV = VOLUME-SERIAL-NR., 6-STELLIG
                        DDDDDD = DEVICE-TYPE (Z.B. 2314, 3330-1)
         PARAMETER 3 UND 4 ENTFALLEN
0    2)  SCRATCHEN EINES BESTIMMTEN VSAM-DATASPACE
         PARAMETER 1:   'SCR'
         PARAMETER 2:   VVVVVV ODER VVVVVV/DDDDDD
                        VVVVVV = VOLUME-SERIAL-NR., 6-STELLIG
                        DDDDDD = DEVICE-TYPE (Z.B. 2314, 3330-1)
         PARAMETER 3:   VOLLSTAENDIGER INTERNER DSNAME DES
                        ZU LOESCHENDEN VSAM-DATASPACE
         PARAMETER 4 ENTFAELLT
0    3)  TEMPORAERES ZULASSEN VON WEITEREN VOLUME-SERIAL-NR.
         FUER FUNKTION SCRATCH (NUR WIRKSAM BIS STEP-ENDE)
         PARAMETER 1:   'ADD'
         PARAMETER 2:   VVVVVV = 6-STELLIGE VOLUME-SERIAL-NR.
         PARAMETER 3:   KENNWORT
0    4)  UMBENENNEN VON PERMANENT EROEFFNETEN DATEIEN (NONVSAM)
         PARAMETER 1:   'REN'
         PARAMETER 2:   VVVVVV ODER VVVVVV/DDDDDD
                        VVVVVV = 6-STELLIGE VOLUME-SERIAL-NR
                        DDDDDD = DEVICE-TYPE (Z.B. 2314, 3330-1)
         PARAMETER 3:   ALTER DATEI-NAME
         PARAMETER 4:   NEUER DATEI-NAME
1               EDV - HANDBUCH                02.76
-               V M P                           Z   35   4
-
-
-    BESONDERE HINWEISE FUER PARAMETER 2
0    FUER DIE SCRATCH-FUNKTION SIND NUR FOLGENDE NICHT IM SYSTEM
     VORKOMMENDE VOLUME-SERIAL-NR. ZUGELASSEN:
                 RESI00
                 SPOOLA
                 RSTORE
0    DER DEVICE-TYPE, VON DER VOL-SER-NR DURCH EINEN SCHRAEGSTRICH
     GETRENNT, KANN BIS ZU 6 STELLEN LANG SEIN. WIRD KEIN
     DEVICE-TYPE ANGEGEBEN, WIRD 3330-1 ANGENOMMEN.
-    JCL - STATEMENTS
-    EXEC-KARTE     PGM=VMP
                    PGM=VMP,PARM='PARAMETER'
0    DD-KARTEN
        SYSUT1      BESCHREIBT EINE TEMPORAERE ARBEITSDATEI, IN
                    DER DIE SUPERZAP-STEPS GESAMMELT WERDEN.
                    SPACE-PARAMETER: (TRK,(1,1))
                    DCB-ANGABEN SIND NICHT NOTWENDIG.
        SYSUT2      BESCHREIBT EINE TEMPORAERE ARBEITSDATEI,
                    IN DER DIE 'IEHPROGM'-CONTROL-STATEMENTS
                    GESAMMELT WERDEN.
                    SPACE-PARAMETER: (TRK,(1,1))
                    DCB-ANGABEN SIND NICHT NOTWENDIG.
        JCLIN       BESCHREIBT EINE DATEI, UEBER DIE EIN
                    SPEZIELLES JOB-STATEMENT FUER DEN
                    GENERIERTEN JOB-STROM EINGEGEBEN WERDEN
                    KANN. WIRD DIESE DATEI AUF 'DUMMY'
                    GESTZT, WIRD VOM PROGRAMM FOLGENDES
                    JOB-STATEMENT GENERIERT:
0                   //T02040VC JOB (12,S,51147,97811,0000),'N',
                    //             CLASS=M,MSGCLASS=C
0       JCLOUT      BESCHREIBT DIE DATEI, UEBER DIE DER
                    GENERIERTE JOB-STROM AUSGEGEBEN WIRD.
                    DIE AUSGABE MUSS DEM INTERNAL READER
                    UEBERGEBEN WERDEN.
                    STELLT 'VMP' EINE FEHLER-BEDINGUNG FEST,
                    WIRD KEIN JOB-STROM AUSGEGEBEN.
        IN          EINGABE-DATEI FUER STEUERKARTEN ODER 'DUMMY'
        MSG         NACHRICHTEN-DATEI
1               EDV - HANDBUCH                02.76
-               V M P                           Z   35   5
-
-
-    'VMP'-BEISPIELE
-    1) //STEP EXEC VMP,PARM='SCR,RESI00'
        //SYSUT1 DD UNIT=SYSDA,SPACE=(TRK,(1,1))
        //SYSUT2 DD UNIT=SYSDA,SPACE=(TRK,(1,1))
        //JCLIN  DD DATA,DLM='()'
        //SCRJOB JOB (ACCOUNTING),'NAME',
        //           CLASS=M
        ()
        //JCLOUT DD SYSOUT=(*,INTRDR)
        //MSG    DD SYSOUT=*
        //IN     DD *
        SCR,SPOOLA,
        Z9999992.VSAMDSPC.T1234567.T89ABCDE
        REN,RESI02/3330,SYS1.PROCLIB,SYS1.PROCLIB.SYSRES
0       PARM-FELD:
        ENTFERNEN ALLER VSAM-DATASPACES VOM VOLUME 'RESI00',
        INCL. LOESCHEN D. VSAM-OWNERSHIP-BITS.
        IN-DD-KARTE:
        . SCRATCHEN EINES BESTIMMTEN VSAM-DATASPACE
        . RENAME SYS1.PROCLIB IN SYS1.PROCLIB.SYSRES. DAS
          VOLUME 'RESI02' IST EINE 3330-PLATTE,MODELL 1.
        JCLIN-DD-KARTE:
        SPEZIELLE JOB-KARTE FUER DEN GENERIERTEN JOB-STROM.
-    2) //STEP EXEC PGM=VMP
        //SYSUT1 DD UNIT=SYSDA,SPACE=(TRK,(1,1))
        //SYSUT2 DD UNIT=SYSDA,SPACE=(TRK,(1,1))
        //JCLIN  DD DUMMY
        //JCLOUT DD SYSOUT=(*,INTRDR)
        //MSG    DD SYSOUT=*
        //IN     DD *
        REN,SHARED,SYSCTLG.NEW,SYSCTLG
0       ALLE STEUERANWEISUNGEN KOMMEN UEBER 'IN'
0       RENAME EINES NEUEN OS-KATALOGS AUF 'SYSCTLG'
        MIT VTOC-KORREKTUR.
1               EDV - HANDBUCH                02.76
-               V M P                           Z   35   6
-
-
-    FEHLER-NACHRICHTEN
-    PARAMETER ERROR
            ES WURDE EIN UNGUELTIGER PARAMETER EINGEGEBEN.
0    VOLUME SSSSSS NOT MOUNTED
            DAS VOLUME SSSSSS WAR ZUM ZEITPUNKT DES VMP-LAUFS
            NICHT VERFUEGBAR.
0    INCORRECT FORM ID
            IM VTOC WURDE EIN DSCB MIT FALSCHEM IDENTFIER
            GEFUNDEN.
0    PERMANENT I/O-ERROR ON VOL SSSSSS
            NICHT KORRIGIERBARER I/O-FEHLER IM VTOC.
0    INVALID WORK AREA POINTER
            LOGISCHER PROGRAMM-FEHLER IN VMP
0    DSNAME NOT FOUND. DSN= DSNAME
            1) RENAME: ALTER DSNAME NICHT GEFUNDEN
            2) SCRATCH DSN: DSNAME NICHT GEFUNDEN.
0    NEW NAME ALREADY PRESENT. DSN= DSNAME
            RENAME: NEUER NAME BEREITS VORHANDEN.
0    WRONG VOL OR MORE THAN 16 VOL'S
            1) ADD: KEIN PLATZ IN VOLTAB, UM VOL-ENTRY
                    AUFZUNEHMEN.
            2) SCRATCH: VOL-SER NICHT ERLAUBT
            3) MEHR ALS 16 VOLUMES IN EINEM 'VMP'-STEP
0    CONVERSION ERROR IN ZAP ROUT.
            FEHLER IN ZAP-ROUTINE
0    INVALID OPERATION. OP=
            FALSCHE OPERATION (UNGLEICH REN,SCR,ADD)
1               V M P
-
-     MODIFIKATIONEN DER VOLUME-TABELLE UND DER KENNWORT-TABELLE
0     LABEL DER VOLUME-TABELLE : VOLTAB
      ENTRY-LAENGE : 6 BYTES = 6-STELLIGE VOLUME SERIAL NO.
0     LABEL DER KENNWORT-TABELLE : TUA
      ENTRY-LAENGE : 14 BYTES = 14-STELLIGES KENNWORT
-
-     RUECKFRAGEN AN :  HERMANN NOACK
                        C/O IDUNA VERSICHERUNGEN
                            ABT. 97811
                        NEUE RABENSTRASSE 15-19
                        2000 HAMBURG 36
                        TEL. 040/44184-3173
