PROGRAMM-NR.:            YZ011A00

KURZBESCHREIBUNG:        UNIVERSAL-AUSZUGSPROGRAMM

ERSTELLER:               DAVER, ABT.SSW   VW WERK  WOLFSBURG

SPRACHE:                 ASSEMBLER

ZWECK:                   AUSSUCHEN VON DATENSAETZEN AUS EINEM
                         DATENBESTAND ANHAND VON MERKMALEN, DIE
                         ALS STEUERKARTEN IN DAS PROGRAMM EINGEHEN.
                         TRENNEN BZW. ANDRUCKEN VON DATENBESTAENDEN,
                         REORGANISATION VON UND INFORMATION UEBER
                         ISAM-DATEIEN


ALLGEMEINE BESCHREIBUNG

DAS PROGRAMM PRUEFT JEDEN SATZ DER EINGABEDATEI (SYSUT1) AUF BE-
DINGUNGEN, DIE MIT STEUERKARTEN (SYSIN) EINGEGEBEN WERDEN. SAETZE,
DIE DIE BEDINGUNGEN ERFUELLEN, KOENNEN ALS DATEI AUSGEGEBEN WERDEN
(SYSUT2).

GLEICHZEITIG KOENNEN ALLE SAETZE, DIE DIE BEDINGUNGEN NICHT ERFUELLEN,
ALS EINE 2. DATEI AUSGEGEBEN WERDEN (SYSUT3). PARALLEL ZU DIESEN BEI-
DEN AUSGABEN IST EINE LIST-AUSGABE (SYSPRINT) EINES DER BEIDEN DATEN-
BESTAENDE IN CHARAKTER-, HEXADEZIMAL- ODER DUMP-FORMAT MOEGLICH.

DIE AUSWAHLKRITERIEN WERDEN DURCH SEARCH-STATEMENTS DER STEUERKARTEN
GESTELLT. EIN SEARCH-STATEMENT ENTHAELT EINEN ODER MEHRERE FIELD-
PARAMETER. JEDER FIELD-PARAMETER STELLT EINE EINZELBEDINGUNG DAR. DIE
FIELD-PARAMETER EINES SEARCH-STATEMENTS SIND DURCH LOGISCH 'UND' VER-
BUNDENE BEDINGUNGEN. BEI MEHREREN SEARCH-STATEMENTS SIND DIE GESAMT-
BEDINGUNGEN JEDES SEARCH-STATEMENTS DURCH LOGISCH 'ODER' VERKNUEPFT.
SIND 2 ODER MEHRERE FIELD-PARAMETER EINES STATEMENTS IN KLAMMERN EIN-
GESCHLOSSEN, SO SIND DIESE PARAMETER DURCH DIE LOGISCHE ODER-FUNKTION
VERKNUEPFT.

DAS PROGRAMM ERMOEGLICHT AUSSERDEM AUFBAU, SICHERUNG UND REORGANI-
SATION VON INDEXSEQUENTIELLEN DATENBESTAENDEN.

INNERHALB EINES RECORD-MODES (F,V) KANN DAS PROGRAMM DATENBESTAENDE
UMBLOCKEN ODER UMFORMEN (Z.B.: RECFM=VB NACH VBS ODER UMGEKEHRT).
ES IST IN EINER TSO-FOREGROUND-REGION EINSATZFAEHIG.

DURCH UNTERSCHIEDLICHE LRECL-ANGABEN BEI EINGABE (SYSUT1) UND
AUSGABE (SYSUT2/SYSUT3) SIND SATZVERKUERZUNGEN BZW. SATZVERLAEN-
GERUNGEN MOEGLICH. HIERFUER GELTEN FOLGENDE REGELN

BEI SATZVERKUERZUNGEN WIRD DER EINGABESATZ ENTSPRECHEND DER AUS-
GABESATZLAENGE ABGESCHNITTEN, D.H. DER AUSGABESATZ ENTHAELT NUR
BYTE 1 BIS NNN ( = LRECL AUSGABE ) DES EINGABESATZES

BEI SATZVERLAENGERUNGEN ENTHAELT DER AUSGABESATZ LINKSBUENDIG
DEN EINGABESATZ, NACH RECHTS WIRD MIT BLANKS AUFGEFUELLT



PROGRAMM-CONTROL-STATEMENT

DAS PROGRAMM YZ011A00 KENNT FOLGENDE CONTROL-STATEMENTS:

1.      ALLGEMEINE CONTROL-STATEMENTS

1.1.    PRINT-STATEMENT

1.2.    STARTAFT-STATEMENT

1.3.    STOPAFT-STATEMENT

1.4.    SKIP-STATEMENT

1.5.    TITLE-STATEMENT

1.6.    LINECNT-STATEMENT

1.7.    ONLINE-STATEMENT   )
                           ) FUER TSO-FOREGROUND
1.8.    CANCEL-STATEMENT   )

1.9.    INFO-STATEMENT     )
                           ) FUER IS-DATEIEN
1.10.   MAXOFL-STATEMENT   )


2.      FUNKTIONS-CONTROL-STATEMENTS

2.1.    SEARCH-STATEMENT


DIE UNTER 1. AUFGEFUEHRTEN STATEMENTS MUESSEN ZWINGEND VOR DEN UNTER
2. GENANNTEN FUNKTIONSSTATEMENTS LIEGEN.


1.1.    PRINT-STATEMENT

        WIRD EINE ANLISTUNG AUF SYSPRINT GEWUENSCHT, MUSS DAS PRINT-
        STATEMENT ANGEGEBEN WERDEN. ES SCHLIESST EINE GLEICHZEITIGE
        BENUTZUNG VON SYSUT2 ODER SYSUT3 NICHT AUS. SATZAUSWAHL UND
        DRUCKFORMAT WERDEN MIT HILFE DES PRINT-PARAMETERS ANGEGEBEN.

        FORMAT:

                PRINT=XX
                               ODER
                PRINT=XXC
                               ODER
                PRINT=RNEXX
                               ODER
                PRINT=RNEXXC

        MIT DER PARAMETERFORM XX KOENNEN ALLE SAETZE, DIE DIE SUCH-
        KRITERIEN ERFUELLEN, ANGELISTET WERDEN (ENTSPRICHT EINER AN-
        LISTUNG DES SYSUT2). DIE PARAMETERFORM RNEXX LISTET ALLE
        SAETZE AN, DIE DIE SUCHKRITERIEN NICHT ERFUELLEN
        (ANALOG SYSUT3).

        GUELTIGE SCHLUESSEL FUER XX SIND CH, XE UND CX.

        CH ENTSPRICHT EINER ANLISTUNG IM CHARACTERFORMAT
        XE ENTSPRICHT EINER ANLISTUNG IM HEXADEZIMALFORMAT.
        CX ENTSPRICHT EINER ANLISTUNG IM DUMPFORMAT.

        DAS C HINTER DEM SCHLUESSEL KANN ANGEGEBEN WERDEN, WENN FUER
        JEDEN SATZ DIE LAUFENDE SATZNUMMER ANGESCHRIEBEN WERDEN SOLL.

1.2.    STARTAFT-STATEMENT

        DIESES STATEMENT BEWIRKT DAS UEBERLESEN VON DEN 1 BIS N
        SAETZEN DER EINGABEDATEI (SYSUT1). ENTFAELLT DIESES STATEMENT,
        SO WERDEN KEINE SAETZE UEBERLESEN.

        FORMAT:

            STARTAFT=NNN                     MAX. 7 STELLEN.

1.3.    STOPAFT-STATEMENT

        DIE ANGABE DES STOPAFT-STATEMENTS BEWIRKT, DASS DAS PROGRAMM
        NACH ERREICHEN DER ANGEGEBENEN ZAHL DER AUSGABESAETZE
        ABSCHLIESST.

        FORMAT:

            STOPAFT=NNN                     MAX. 7 STELLEN.

        WERDEN MEHRERE DATEIEN VERLANGT, SO WIRD DAS PROGRAMM ABGE-
        BROCHEN, WENN AUF EINER DER DATEIEN (SYSUT2, SYSUT3 ODER
        SYSPRINT) DIE ANGEGEBENE ZAHL VON SAETZEN ERREICHT IST.

1.4.    SKIP-STATEMENT

        DIESES STATEMENT BEWIRKT, DASS NUR JEDER N-SATZ, DER DIE
        SUCHKRITERIEN ERFUELLT, AUSGEGEBEN WIRD.

        FORMAT:

            SKIP=NNN                     MAX. 7 STELLEN.

        DAS SKIP-STATEMENT IST NUR FUER SYSUT2- UND PRINT-DATEIEN
        GUELTIG.

1.5.    TITLE-STATEMENT

        DIESES STATEMENT BEWIRKT, DASS DIE UEBERSCHRIFT DURCH EINEN
        VOM BENUTZER FREI WAEHLBAREN TEXT ERGAENZT WIRD.

        FORMAT:

            TITLE='TEXT'

        BEMERKUNG:

        DIE KONSTANTE MUSS IN EINER KARTE ENDEN, D.H. ES STEHEN MAX.
        63 STELLEN FUER DIE KONSTANTE ZUR VERFUEGUNG. DER TEXT DSN=...
        IN DER KOPFZEILE WIRD DURCH DEN TEXT DES TITLE-STATEMENTS
        UEBERLAGERT.

1.6.    LINECNT-STATEMENT

        DIESES STATEMENT BEWIRKT, DASS NICHT 66 ZEILEN PRO BLATT
        GEDRUCKT WERDEN, SONDERN DIE VOM BENUTZER ANGEGEBENE ZEI-
        LENANZAHL.

        FORMAT:

            LINECNT=NNN                     MAX. 7 STELLEN,
                                            MIN.-WERT = 30

1.7.    ONLINE-STATEMENT

        DAS ONLINE-STATEMENT BEWIRKT EINE DIALOGFAEHIGE STEUERKARTEN-
        EINGABE FUER DIE TSO-FOREGROUND-VERARBEITUNG UND IST ALS
        ERSTES STATEMENT DER PROGRAMMKONTROLL-STATEMENTS EINZUGEBEN.
        DIE STEUERKARTE DARF  N U R  DAS ONLINE-STATEMENT ENTHALTEN.

        FORMAT:

            ONLINE ALS ERSTES EINGABE-STATEMENT ODER
            ALS PARMEINTRAGUNG IN DER FORM

            PARM=ONLINE

        EINE VERGROESSERUNG DER TABELLE GEM. 2.1.2 IST DABEI NICHT
        MOEGLICH.

        DIE ONLINE-FUNKTION ERMOEGLICHT EIN INTERAKTIVES KORRIGIEREN
        VON FORMAL-FEHLERN, DIE DAS PROGRAMM KENNZEICHNET.

1.8.    CANCEL-STATEMENT ERMOEGLICHT DEN ABBRUCH DER TSO-FOREGROUND-
        VERARBEITUNG.

        FORMAT:

            CANCEL

        DAS STATEMENT DARF AN BELIEBIGER STELLE NACH PROGRAMM-CONTROL-
        STATEMENTS EINGEGEBEN WERDEN.

1.9.    INFO-STATEMENT

        DAS INFO-STATEMENT BEWIRKT DAS HERAUSDRUCKEN DER REORGANI-
        SATIONS-KRITERIEN EINER IS-DATEI.

        FORMAT:

            INFO

1.10.   MAXOFL-STATEMENT

        DAS MAXOFL-STATEMENT BEWIRKT DAS SETZEN DES CONDITION-CODE 20,
        WENN DIE ANZAHL DER IM UEBERLAUFBEREICH EINER IS-DATEI (CYLOFL
        ODER/UND INDEPENDANT OFL) GESPEICHERTEN SAETZE DEN VOM BE-
        NUTZER DEFINIERTEN MAXIMALWERT UEBERSTEIGT.

        FORMAT:

            MAXOFL=NNN                     MAX. 7 STELLEN.

2.1.    SEARCH-STATEMENT

        DIE SEARCH-EINTRAGUNG ENTHAELT IN FORM DER FIELD-PARAMETER
        DIE SUCHARGUMENTE.

        FORMAT:

            SEARCH FIELD=(....)

                                                    ODER

            SEARCH FIELD=(....),FIELD=(....),....

        FOLGEKARTEN ZUR AUFNAHME DER FIELD-PARAMETER SIND ZULAESSIG.
        ALLE ANGABEN KOENNEN IN DEN STEUERKARTEN VON SPALTE 1 BIS
        71 ANGEGEBEN WERDEN.

2.1.1.  FIELD-PARAMETER

        JEDES SEARCH-STATEMENT MUSS MINDESTENS 1 FIELD-PARAMETER
        HABEN.

        FORMAT:

            FIELD=(L,P,OP,VERGLEICHSBEGRIFF)

        L = LAENGE DES FELDES IM EINGABEDATENBESTAND, MIT DEM
            VERGLICHEN WERDEN SOLL.

        P = ANFANGSSTELLE DES FELDES DES EINGABEDATENBESTANDES,
            MIT DEM VERGLICHEN WERDEN SOLL.

        OP = OPERATION-CODE

             DIESER CODE GIBT AN, MIT WELCHER BEDINGUNG DER VERGLEICH
             ZWISCHEN DEM FELD DES EINGABEDATENBESTANDES UND DEM
             SUCHARGUMENT DURCHGEFUEHRT WERDEN SOLL.

        EQ = FELD EQUAL LITERAL
        GT = FELD GREATER THAN LITERAL
        LT = FELD LESS THAN LITERAL
        NE = FELD NOT EQUAL LITERAL
        GE = FELD GREATER EQUAL LITERAL
        LE = FELD LESS EQUAL LITERAL

        VERGLEICHSBEGRIFF = LITERAL-TYP 'VERGLEICHSWERT'

        LITERAL-TYP         BESCHREIBUNG

             C              CHARAKTER FORMAT, ANZAHL STELLEN ZWISCHEN
                            '....' MUSS GLEICH 'L' SEIN.

             X              HEXADEZIMAL FORMAT, ANZAHL STELLEN
                            ZWISCHEN '....' MUSS 2X 'L' SEIN.

             P              GEPACKTES FORMAT, ANZAHL STELLEN ZWISCHEN
                            '....' DARF NICHT GROESSER ALS (2X'L')-1
                            SEIN. FUEHRENDE NULLEN WERDEN VOM PRO-
                            GRAMM EINGEFUEGT. EIN MINUSWERT KANN MIT
                            HILFE EINER ZONENLOCHUNG ANGEGEBEN
                            WERDEN. ZU BEACHTEN IST, DASS BEI DER WAHL
                            DES P-FORMATS EIN ARITHMETISCHER VERGLEICH
                            GEMACHT WIRD (CP), SO DASS EIN PROGRAMM-
                            INTERRUPT (0C7) ERFOLGEN WIRD, WENN DIE
                            DATEN AUF SYSUT1 NICHT EINEM GEPACKTEN
                            DEZIMALEN WERT ENTSPRECHEN.

2.1.2.  JEDE FIELD-EINTRAGUNG BRAUCHT IN EINER INTERNEN TABELLE
        5 BYTES + LAENGE DES LITERALS. ALS DEFAULT-WERT SIND 1500
        BYTES VORGESEHEN. DAS ENTSPRICHT CA. 150 FIELD-EINTRAGUNGEN.
        GEGEBENENFALLS KANN DIESE TABELLE MIT HILFE DER PARM-EIN-
        TRAGUNG VERGROESSERT WERDEN,

        Z.B. EXEC PGM=YZ011A00,PARM='NUMERISCHES LITERAL'

        DER WERT DES LITERALS ENTSPRICHT DER TABELLENGROESSE IN BYTES.

ANWENDUNGS-TECHNIK

STATEMENT                ANWENDUNG

//               JOB     ...

                                             ONLINE
//               EXEC    PGM=YZ011A00,PARM='         '
                                             NNNNN

//STEPLIB        DD      ANGABE ZUR PROGRAMMBIBLIOTHEK


//SYSPRINT       DD      DRUCKAUSGABE, ANLISTUNG DER STEUERDATEI
                         (SYSIN) FALLS SYSTERM FEHLT, GEGEBENENFALLS
                         ANLISTUNG DER AUSWAHL-DATEIEN.

//SYSTERM        DD      DRUCKAUSGABE, ANLISTUNG DER STEUERDATEI
                         (SYSIN), GGF. FEHLERMELDUNGEN UND DER
                         EIN-/AUSGABEZAEHLER

//SYSUT1         DD      EINGABE-DATEI. HANDELT ES SICH UM EINE IS-
                         DATEI, MUSS DCB=DSORG=IS ANGEGEBEN WERDEN.
                         CONCATIKATION VON UNLIKE DATA-SETS IST ZU-
                         LAESSIG.

//SYSUT2         DD      DIESES STATEMENT DEFINIERT DEN 1. AUSGABE-
                         DATENBESTAND. DURCH ANGABE DER DCB-SUB-
                         PARAMETER LRECL, BLKSIZE UND/ODER RECFM
                         KOENNEN DIESE WERTE GEGENUEBER DER EINGABE
                         GEAENDERT WERDEN. IST DIE LRECL DER AUSGABE-
                         DATEI KLEINER ALS DIE EINGABEDATEI WIRD DER
                         SATZ GEKUERZT. IST DIE AUSGABE-LRECL GROESSER
                         ALS DIE EINGABE, WIRD DER AUSGABE-SATZ MIT
                         BLANKS VERLAENGERT.

                         SOLL SYSUT2 EINE IS-DATEI WERDEN, MUSS DIE
                         DD KARTE FOLGENDE DCB-SUBPARAMETER HABEN:
                         DSORG=IS,RKP=...,KEYLEN=...,OPTCD=...

                         DIESE DATEI BEINHALTET ALLE SAETZE, DIE DIE
                         SUCHKRITERIEN ERFUELLEN.

//SYSUT3         DD      AUFBAU WIE SYSUT2. DIESES FILE ENTHAELT NUR
                         DIE SAETZE, DIE DIE SUCHKRITERIEN NICHT
                         ERFUELLEN.

//SYSIN          DD      DIESES STATEMENT DEFINIERT DEN KONTROLL-
                         DATENBESTAND, DER NORMALERWEISE IM INPUT-
                         STREAM EINGELESEN WIRD.

BENUTZERHINWEISE

WERDEN DIE DD-STATEMENTS SYSIN, SYSUT2, SYSUT3 BZW. SYSTERM BEI DEN
GEWAEHLTEN PROGRAMM-FUNKTIONEN NICHT BENOETIGT, KOENNEN SIE WEG-
GELASSEN WERDEN.

ALLE STEUERKARTEN KOENNEN INFORMATIONEN VON BYTE 1-71 ENTHALTEN UND
WERDEN UEBER SYSPRINT BZW. SYSTERM ANGELISTET.
EINE FEHLERHAFTE KARTE WIRD ENTSPRECHEND GEKENNZEICHNET UND DAS
PROGRAMM BRICHT MIT EINEM USER-CODE 2222 AB. (BATCH) BZW. DER BENUTZER
HAT AB FEHLERPOSITION MIT KORREKTER EINGABE FORTZUFAHREN (ONLINE).

EINE SATZZAEHLUNG WIRD FUER SYSUT1, SYSUT2 UND SYSUT3 VORGENOMMEN.
IST EINE DD-KARTE FUER SYSUT2 VORHANDEN UND DIE ENTSPRECHENDE
SATZAUSWAHL IST NULL, WIRD EIN COND-CODE VON 4 WEITERGEGEBEN.
ENTSPRECHEND WIRD FUER SYSUT3 EIN COND-CODE VON 8 WEITERGEGEBEN.
SIND BEIDE DD-KARTEN VORHANDEN UND BEIDE ZAEHLER = 0, WIRD EIN COND-
CODE = 12 WEITERGEGEBEN. IN VERBINDUNG MIT MAXOFL IST EIN COND-CODE
VON 20 (MAXOFL), 24 (MAXOFL + SYSUT2 = 0), 28 (MAXOFL + SYSUT3 = 0)
MOEGLICH.

SIND KEINE SEARCH-ANWEISUNGEN VORHANDEN, WIRD SO VERFAHREN, ALS
ERFUELLTE JEDER EINGABE-SATZ DIE SUCH-KRITERIEN.

BEISPIEL:

//JOBNAME        JOB     .....

//STEP1          EXEC    PGM=YZ011A00
//STEPLIB        DD      DSN=SERVLIB,DISP=SHR
//SYSPRINT       DD      SYSOUT=*
//SYSTERM        DD      SYSOUT=*
//SYSUT1         DD      DSN=SIN.IN058A,MONBW,UNIT=TEST,...
//                       DISP=(OLD,KEEP)
//SYSUT2         DD      DSN=TDM.DM001A.BAUS,UNIT=TEST,DISP=(,PASS)...
//SYSIN          DD      *

PRINT=CH,STOPAFT=1000,SKIP=5
SEARCH FIELD=(2,19,EQ,C'ST'),FIELD=(2,79,NE,C'IE')
SEARCH FIELD=(2,79,NE,C'LI'),(FIELD=(1,23,NE,C'R'),
       FIELD=(1,23,NE,C'V'))
/*
//

ERKLAERUNG:

AUS EINEM EINGABE-DATENBESTAND (SYSUT1) WERDEN 1000 SAETZE AUSGE-
WAEHLT, AUF SYSUT2 AUSGEGEBEN UND ANGELISTET. DABEI WIRD NUR JEDER
5. SATZ, DER DIE SUCHKRITERIEN ERFUELLT, AUSGEGEBEN.

DIE 5 FIELD-PARAMETER SEIEN DER REIHENFOLGE ENTSPRECHEND MIT F1,
F2,F3,F4,F5; SIE SIND WIE FOLGT LOGISCH VERKNUEPFT
     (F1 UND F2) ODER (F3 UND (F4 ODER F5))



     IMPLEMENTIERUNGS  HINWEIS

MEMBER UVWW010O HAT ALLE NOTWENDIGE MODULES FUER DIESER
PROGRAMM. AUFBAU DER NAME KARTE

  NAME YZ011A00(R)

SOUCRE DECKS FUER DIESER PROGRAMM SIND UNTER UVWW01AS UND UVWW01BS
VORHANDEN
