ALLGEMEINE BESCHREIBUNG
-----------------------

DAS UTILITY ZUM DUPLIZIEREN VON IMS-DATENBANKEN LAEUFT IN ZWEI STEPS
AB. BEIDE, UNLOAD UND RELOAD, LAUFEN ALS IMS BATCHS. DIE AUSWAHL DER
ZU DUPLIZIERENDEN SAETZE ERFOLGT MITTELS AUSWAHLKARTEN UEBER DEN
ROOTSEGMENTSCHLUESSEL ODER DIE SATZNUMMER INNERHALB DER DATEI.
WIRD EIN ROOTSEGMENT AUSGEWAEHLT, SO WERDEN ALLE SENSITIVEN
ABHAENGIGEN EBENFALLS AUF DIE AUSGABEDATEI UEBERNOMMEN. ES KANN ABER
EINE BENUTZERROUTINE ANGEGEBEN WERDEN, DIE BEI JEDEM EINZELNEN SEG-
MENT ENTSCHEIDET, OB ES DUPLIZIERT WIRD.

AUSWAHL DER ZU DUPLIZIERENDEN SAETZE
------------------------------------
JEDE AUSWAHLANWEISUNG BESTEHT AUS EINER FORMATKARTE UND EINER AUSWAHL-
DATENKARTE. MIT DER FORMATKARTE KOENNEN AUS DEN SCHLUESSELWORTEN
        KEY = SCHLUESSEL
        SNR = SATZNUMMER
        ANZ = ANZAHL
        INK = INKREMENT
FOLGENDE SUCHANWEISUNGEN FORMULIERT WERDEN:

   BEIM SUCHEN NACH SATZNUMMER
          SNR
          SNR , SNR
          SNR , SNR , INK

   BEIM SUCHEN NACH SCHLUESSEL
          KEY
          KEY , KEY
          KEY , ANZ
          KEY , ANZ , INK

IN DER DARAUFFOLGENDEN AUSWAHLDATENKARTE SIND DANN IN DER
ENTSPRECHENDEN REIHENFOLGE DIE AUSWAHLWERTE ANZUGEBEN.

BEISPIEL:
  A.
      SNR,SNR
      10,20            DUPLIZIERE VON SATZNUMMER 10 BIS 20
  B.
      KEY              DUPLIZIERE DEN SATZ MIT DEM
      12345            ROOTSEGMENTSCHLUESSEL 12345
  C.
      KEY,KEY,INK      DUPLIZIERE ZWISCHEN SCHLUESSEL 12000 UND
      12000,12999,5    12999 JEDEN 5-TEN SATZ
  D.
      KEY,ANZ
      15000,020        DUPLIZIERE 20 SAETZE AB SCHLUESSEL 15000


REGELN FUER FORMAT- UND AUSWAHLDATENKARTEN
------------------------------------------
DIE ANWEISUNGEN DUERFEN NUR IN DEN SPALTEN 1-71 GELOCHT WERDEN.
REICHT EINE KARTE FUER DIE AUSWAHLDATEN NICHT AUS, SO MUSS IN SPALTE
72 EIN ZEICHEN GELOCHT WERDEN. DIE SPALTEN 73-80 SIND FREI BENUTZBAR.
DIE SCHLUESSELWORTE DER FORMATKARTE SIND DURCH KOMMA ZU TRENNEN.
DAZWISCHENLIEGENDE BLANKS WERDEN IGNORIERT. SATZNUMMER, ANZAHL UND
INKREMENT DUERFEN EINSCHL. FUEHRENDER NULLEN JEWEILS 8 STELLEN NICHT
UEBERSCHREITEN.
ENTHAELT DIE AUSWAHLDATENKARTE EINEN SCHLUESSEL, SO MUSS DIESER
ZWINGEND IN SPALTE 1 BEGINNEN. FOLGT IHM EIN WEITERER SCHLUESSEL, SO
SIND DIE BEIDEN DURCH EIN KOMMA ZU TRENNEN. EINZIGE AUSNAHME SIND
GENAU 71-STELLIGE SCHLUESSEL. DER NAECHSTE DATENPARAMETER BEGINNT
SOFORT IN SPALTE 1 DER FOLGEKARTE.


SPEZIELLE STEUERANWEISUNGEN
---------------------------
A. AUSWAHL DER DATEI
   ENTHAELT DER ZUM LESEN BENUTZTE PSB MEHRERE PCBS, SO KANN MIT
   EINER KARTE
   DBD = DBDNAME
   DIE GEWUENSCHTE DATEI AUSGEWAEHLT WERDEN. DEFAULT IST DER
   ERSTE DB-PCB.

B. ZUSAETZLICHES PRUEFMODUL
   DIE ANWEISUNG
   MOD = ENTRYNAME
   BEWIRKT, DASS EIN UNTERPROGRAMM GELADEN WIRD, DAS VOR DEM DUPLI-
   ZIEREN JEDES EINZELNEN SEGMENTS DIE KONTROLLE ERHAELT. ES KANN
   VERAENDERUNGEN IM SEGMENT VORNEHMEN ODER DAS DUPLIZIEREN UNTER-
   DRUECKEN. SEGMENTVERLAENGERUNG IST NICHT MOEGLICH.
   PARAMETER SIND:
     1. SEGMENTNAME              8 STELLIG
        SEGMENT                  N STELLIG
     2. SCHALTERBYTE             1 STELLIG
              BEDEUTUNG:     BLANK = DUPLIZIEREN (GRUNDWERT)
                              '1'  = SEGMENT NICHT DUPLIZIEREN

   DIE STEUERANWEISUNGEN KOENNEN BELIEBIG HAEUFIG UND AN
   BELIEBIGER STELLE IM EINGABEKARTENSTROM AUFTRETEN.


HINWEISE ZUR PERFORMANCE
------------------------
IMS KENNT NUR DIREKTEN ZUGRIFF UEBER SCHLUESSEL. AUSWAHL UEBER DIE
SATZNUMMER BEDEUTET DAHER SEQUENTIELLES LESEN UND ZAEHLEN.
BEI HDAM ERFORDERT EIN SUCHEN NACH SCHLUESSEL VON...BIS EIN
SEQUENTIELLES DURCHSUCHEN DER DATEI. WERDEN N FORMATE KEY,KEY BENUTZT,
SO MUSS DIE DATEI N-MAL GELESEN WERDEN. IN SOLCHEN FAELLEN
WIRD EMPFOHLEN, VOM UTILITY ALLE SAETZE ANZUFORDERN UND UEBER
EIN UNTERPROGRAMM ZU ENTSCHEIDEN, WAS DUPLIZIERT WIRD.
DAS FORMAT KEY,KEY,INK WIRD BEI HDAM UNSINNIG UND DESHALB
ZURUECKGEWIESEN.
BEI WECHSEL VON SNR AUF KEY ODER BEI ANGABE VON MEHREREN KEY-KARTEN
IST AUF AUFSTEIGENDE SCHLUESSEL SELBST ZU ACHTEN.


ZURUECKLADEN DER DATEI
----------------------
DAS RELOAD-PROGRAMM STELLT DIE AUSGEWAEHLTEN SEGMENTE MIT DER
IMS-FUNKTION ISRT AUF DIE AUSGABEDATEI. DIE PROCOPT IM PCB ENT-
SCHEIDET ALSO, OB EINE NEUE DATEI ERSTELLT ODER EINE BESTEHENDE
AUFGEFUELLT WIRD. IM PSB WIRD EIN PCB GESUCHT, DER DEN GLEICHEN
DBD-NAMEN ENTHAELT WIE DER ZUM LESEN BENUTZTE. LIEGT DER NEUEN DATEI
EIN ANDERER DBD ZUGRUNDE, SO KANN DIESER NAME IN EINER STEUERKARTE
   DBD = DBDNAME
DEFINIERT WERDEN.


ERFORDERLICHE JCL
-----------------

A.  UNLOAD
    //UNLOAD   EXEC DLIBATCH,PARM='DLI,IMSDUPUN,.......'
    //SYSPRINT DD SYSOUT=A
    //SYSIN    DD ...      STEUERANWEISUNGEN
    //SYSUT1   DD ...      AUSGABEDATEI DER AUSGEWAEHLTEN SEGMENTE
                           (KEINE RECFM, LRECL ODER BLKSIZE ANGABEN)
    //IMSDATABASE          DD-KARTE(N) DER IMS-DATENBANK

B.  RELOAD
    //RELOAD   EXEC DLIBATCH,PARM='DLI,IMSDUPRE,.......'
    //SYSPRINT DD SYSOUT=A
    //SYSIN    DD ...      NUR WENN STEUERANWEISUNG ERFORDERLICH
    //SYSUT1   DD ...      AUSGABE AUS UNLOAD-STEP
    //IMSDATABASE          DD-KARTE(N) DER IMS-DATENBANK
