1                EDV-HANDBUCH                03.76
-                READVTOC                    Z   43   01
-
-
-   READVTOC UEBERGIBT PRO AUFRUF EINEN FORMAT 1 DATA SET CONTROL BLOCK.
    ES MUSS IN EINER DER IN DER LINKLISTE DER SYS1.PARMLIB(LNKLST00)
    STEHENDEN BIBLIOTHEKEN VORHANDEN SEIN.
0   READVTOC KANN SOWOHL AUS PL/1 ALS AUCH VON ASSEMBLER-PROGRAMMEN
    AUFGERUFEN WERDEN. DER AUFRUF GESCHIEHT WIE FOLGT:
0   AUS ASSEMBLER:    LOAD EP=(READVTOC)
                      CALL READVTOC,(PA1,PA2,PA3,PA4),VL
                      B    8+4(15)  RETURN CODE ABFRAGEN
                      .
                      .
               PA1    DC   A(P1)
               PA2    DC   A(P2)
               PA3    DC   A(P3)
               PA4    DC   A(P4)
               P1     DC   CL6' '  VOLUME SERIAL NUMMER
               P2     DC   CL5'VTOC'  VTOC START / PLATTENADR. CCHHR
               P3     DC   CL140  DATA SET CONTROL BLOCK
               P4     DC   CL5' '  ENTHAELT 'ABSTR' WENN DIREKTES LESEN
0   UND AUS PL/1:
               DCL READVTOC ENTRY EXTERNAL ;
               DCL P1 CHAR (6) ;
               DCL P2 CHAR (5) INIT ('VTOC') ;
               DCL P3 CHAR (140) STATIC INIT (' ') ;
               DCL P4 CHAR (5) INIT (' ') ;
               .
               .
               FETCH READVTOC ;
               CALL READVTOC (P1,P2,P3,P4) ;
               .    /* P2 ABFRAGEN */
0   DIE RETURN-CODES IN REGISTER 15 SOWIE DIE IM PARAMETER 2 FUER PL/1
    ZURUECKGEGEBENE ZEICHENKETTE HABEN FOLGENDE BEDEUTUNG:
0     PARM1   REG15   ERKLAERUNG
      (CCHHR)     0   DSCB GEFUNDEN UND UEBERGEBEN
      END         4   VTOC ZU ENDE
      MOUNT       8   PLATTE WAR NICHT GEMOUNTED
      FORM       12   FALSCHER FORMAT IDENTIFIER
      IOERR      16   E/A - FEHLER
      OUTEX      20   PLATTENADRESSE AUSSERHALB VTOC
      POINT      24   FALSCHER WORKAREA POINTER
1                EDV-HANDBUCH                03.76
-                READVTOC                    Z   43   02
-
-
-    DER PARAMETER 1 MUSS BEIM ERSTEN AUFRUF VON READVTOC DIE VOLUME
     SERIAL NUMMER DER ZU DURCHSUCHENDEN PLATTE ENTHALTEN UND DARF
     NICHT MEHR VERAENDERT WERDEN, BIS EINE NEUE PLATTE VERARBEITET
     WERDEN SOLL (SIEHE AUCH PARAMETER 2) .
0    DER PARAMETER 2 MUSS BEIM ERSTEN AUFRUF FUER EINE PLATTE DIE
     ZEICHENKETTE 'VTOC ' ENTHALTEN UND DARF DANACH NICHT MEHR VERAEN-
     DERT WERDEN (READVTOC SPEICHERT HIER DIE PLATTENADRESSE DES ZULETZT
     GELESENEN DSCB).
0    IM PARAMETER 3 WIRD DER 140 - STELLIGE DSCB UEBERGEBEN.
0    DER PARAMETER 4 MUSS MIT BLANK INITIALISIERT WERDEN UND AUCH SO
     BLEIBEN, ES SEI DENN, MAN WILL AUSSER FORMAT 1 AUCH NOCH ANDERE
     DSCB'S LESEN. DANN MUSS WIE FOLGT VERFAHREN WERDEN:
0    DER PARAMETER 2 IST ZU SICHERN UND AN SEINE STELLE DIE ECHTE
     PLATTENADRESSE (CCHHR) DES ZU LESENDEN DSCB ZU STELLEN; GLEICHZEITI

     MUSS DER PARAMETER 4 DIE ZEICHENKETTE 'ABSTR' ENTHALTEN.
     NACH DEM FOLGENDEN AUFRUF VON READVTOC WIRD DER SO ADRESSIERTE
     DSCB UEBERGEBEN. SOLLEN DANN WEITERE FORMAT 1 DSCB'S GELESEN WERDEN

     SO IST DER ZWISCHENGESPEICHERTE PARAMETER 2 ZURUECKZUSTELLEN UND
     DER PARAMETER 4 AUF BLANK ZU LOESCHEN, BEVOR READVTOC WIEDER
     AUFGERUFEN WIRD.
0    DD - KARTEN SIND FUER DEN AUFRUF VON READVTOC NICHT ERFORDERLICH.
0    ES KOENNEN ALLE DASD-DEVICE-TYPES VERARBEITET WERDEN.
-    MODIFIKATIONEN DUERFEN NUR UNTER BERUECKSICHTIGUNG DER FUER
     BLDL RESIDENTE BIBLIOTHEKEN GELTENDEN REGELN VORGENOMMEN WERDEN.
