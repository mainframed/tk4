//Z239044N JOB    (,,,,RRR),MSGLEVEL=1,
//  TIME=3,CLASS=B,MSGCLASS=A
//*
//*****************************************************************
//*
//*  PROCEDURE ASTTEST
//*
//ASTTEST  PROC  GUIDE='Z228068.GAP.DATA',
//  COBLIB=COBLIB,
//  UNT=DISK,
//  CL=A
//*
//*  T E S T J O B   AUTOMATISCHE ABSTIMMUNG
//*  ===========================================
//*
//*   GUIDE = DSNAME DER GUIDE-BIBLIOTHEK
//*   LIB   = DSNAME EINER PDS-DATEI, IN DIE DIE LOADMODULE ABSTROOT
//*           USW. EINGEFUEGT WERDEN
//*   IND   = INDEX, UNTER DEM AST SUM- UND ASTLOG-DATEI ERSTELLT WERDEN
//*   CL    = SYSOUT-CLASS
//*   V     = VOLUME, AUF DEM ASTLOG UND ASTSUM ERSTELLT WIRD
//*           Z.B V=DA620
//*   UNT   = UNITNAME FUER PLATTE
//*   COBLIB = DSNAME DER SYS1.COBOLSUBROUTINES
//CRLOG     EXEC  PGM=IEFBR14,REGION=50K
//*
//*  ASTLOG UND 'LIB' PREALLOCATION UND KATALOGISIEREN
//*  ---------------------------------------
//*
//ASTLOG    DD    DSN=&IND..ASTLOG,DISP=(,CATLG),
//   UNIT=&UNT,VOL=SER=&V,
//   SPACE=(TRK,(1,1)),LABEL=EXPDT=99365,
//   DCB=(RECFM=FB,BLKSIZE=48,LRECL=48)
//LIB  DD  DSN=&LIB,DISP=(,CATLG),
//   UNIT=&UNT,VOL=SER=&V,
//  SPACE=(TRK,(2,2,6)),
//  LABEL=EXPDT=99365,
//  DCB=SYS1.LINKLIB
//DUPLKED   EXEC  PGM=IEBGENER,REGION=70K
//*
//* SYSLIN FUER LINKAGE-EDITOR UMBLOCKEN
//*  ---------------------------------------
//*
//SYSPRINT  DD    SYSOUT=&CL
//SYSUT1    DD    DSN=&GUIDE.(UBAS211O),DISP=SHR
//          DD    DSN=&GUIDE.(UBAS212O),DISP=SHR
//          DD    DSN=&GUIDE.(UBAS213O),DISP=SHR
//          DD    DSN=&GUIDE.(UBAS214O),DISP=SHR
//          DD    DSN=&GUIDE.(UBAS215O),DISP=SHR
//SYSUT2    DD    DSN=&&ZWI,DISP=(,PASS),
//   UNIT=&UNT,SPACE=(TRK,(5,2)),
//   DCB=(RECFM=FB,BLKSIZE=3200,LRECL=80)
//SYSIN  DD  DUMMY
//LINK EXEC PGM=IEWL,PARM='MAP,LIST,LET,SIZE=(110K,24K),REUS',
// RD=R,
// REGION=120K
//*
//* LORDMODUL ERSTELLEN VON RZASTBL, ABSTROOT, RZ200, RZ201, RZ202
//* IN 'LIB' STELLEN
//*  ---------------------------------------
//*
//SYSLIN DD DDNAME=SYSIN
//SYSLMOD  DD  DISP=SHR,DSNAME=&LIB
//SYSLIB    DD    DSN=SYS1.&COBLIB,DISP=SHR
//SYSUT1 DD UNIT=(&UNT,SEP=(SYSLIN,SYSLMOD)),SPACE=(CYL,(1,1)),
// DSN=&UT1
//SYSPRINT DD SYSOUT=&CL,DCB=BLKSIZE=605
//SYSIN     DD    DSN=&&ZWI,DISP=(OLD,DELETE)
//CRSUM     EXEC  PGM=RZ200,REGION=70K
//*
//*  ASTSUM INITIALISIEREN
//*  ---------------------------------------
//*
//STEPLIB   DD    DSN=&LIB,DISP=SHR
//ASTPRINT  DD    SYSOUT=&CL,DCB=(RECFM=FB,BLKSIZE=1200,LRECL=120)
//ASTSUM    DD    DSN=&IND..ASTSUM,DISP=(,CATLG),
//   UNIT=&UNT,VOL=SER=&V,
//   SPACE=(CYL,(1)),
//   LABEL=EXPDT=99365,
//   DCB=(RECFM=FB,BLKSIZE=170,LRECL=170,DSORG=IS,
//             OPTCD=Y,CYLOFL=2,KEYLEN=10,RKP=2)
//INSUM     EXEC  PGM=RZ201,REGION=70K
//*
//*  WEITERE SUMMEN IN ASTSUM EINFUEGEN
//*  ---------------------------------------
//*
//STEPLIB   DD    DSN=&LIB,DISP=SHR
//ASTPRINT  DD    SYSOUT=&CL,DCB=(RECFM=FB,BLKSIZE=1200,LRECL=120)
//ASTSUM    DD    DSN=&IND..ASTSUM,DISP=SHR
//ASTLOG   DD    DSN=&IND..ASTLOG,DISP=SHR
//ASM  EXEC  PGM=IEUASM,REGION=150K,RD=R,
//  PARM=DECK
//*
//* TEST AUTOMATISCHE ABSTIMMUNG
//*  ---------------------------------------
//*
//SYSLIB  DD  DSN=SYS1.MACLIB,DISP=SHR
//SYSUT1 DD UNIT=&UNT,SPACE=(CYL,(3,2)),DSN=&&UT1
//SYSUT2 DD UNIT=&UNT,SPACE=(CYL,(3,2)),DSN=&&UT2
//SYSUT3 DD UNIT=(&UNT,SEP=(SYSUT2,SYSUT1,SYSLIB)),
//   SPACE=(CYL,(3,2)),DSN=&&UT3
//SYSPUNCH  DD  DSN=&&LOADSET,DISP=(MOD,PASS),
//  UNIT=&UNT,SPACE=(CYL,(1,1)),
// DCB=BLKSIZE=3040
//SYSPRINT DD SYSOUT=&CL,
// DCB=(RECFM=FBSM,BLKSIZE=3146)
//SYSGO    DD DSN=NULLFILE,DCB=BLKSIZE=3040
//LKED EXEC PGM=IEWL,PARM='MAP,LIST,LET,SIZE=(110K,24K)',REGION=120K,
//   COND=(4,LT,ASM),RD=R
//SYSLIN DD DSN=&&LOADSET,DISP=(OLD,DELETE)
//   DD DDNAME=SYSIN
//SYSLMOD DD UNIT=(&UNT,SEP=(SYSLIN)),SPACE=(CYL,(1,1,1)),
// DISP=(,PASS),DSN=&&GOSET(ASM)
//SYSLIB    DD    DSN=&LIB,DISP=SHR
//SYSUT1 DD UNIT=(&UNT,SEP=(SYSLIN,SYSLMOD)),SPACE=(CYL,(3,2)),
//   DSN=&&UT1
//SYSPRINT DD SYSOUT=&CL,DCB=BLKSIZE=605
//GO EXEC PGM=*.LKED.SYSLMOD,COND=((4,LT,ASM),(4,LT,LKED)),RD=R,
//  REGION=70K
//STEPLIB   DD    DSN=&LIB,DISP=SHR
//SYSUDUMP DD SYSOUT=&CL
//ASTBLATT  DD    SYSOUT=&CL
//ASTSUM    DD    DSN=&IND..ASTSUM,DISP=SHR
//ASTLOG    DD    DSN=&IND..ASTLOG,DISP=SHR
//KARTEN    DD    DSN=&LIB,DISP=SHR
//      PEND
//*
//*  ENDE PROCEDURE ASTTEST
//*
//*****************************************************************
//*
//TEST  EXEC  ASTTEST,IND='OX.A6613.I044',
//  LIB='OX.A6613.I044.GAPLIB',
//  UNT=3330V,V=VV0704
//CRSUM.ASTKOR  DD  *
ADDRZ10001 30
ADDRZ10001 31
//INSUM.ASTKOR  DD  *
ADDRZ00501 40    JUENGSTE PER.          259093588
ADDRZ00501 41    JUENGSTE PER.             799000
REPRZ00501 40 1- PERIODE-1              271051231               0000
REPRZ00501 40 2- PERIODE-2              284792642               0000
REPRZ00501 41 1- PERIODE-1                 894000               0000
REPRZ00501 41 2- PERIODE-2                 952000               0000
//ASM.SYSIN  DD  *
TEST     CSECT
         STM   14,12,12(13)   SAVE REGS
         LR    12,15          LOAD BASE REG
         USING *-6,12
         LA    1,SAVE         GET  SA ADR
         ST    1,8(0,13)      SA DONN CHAIN
         ST    13,4(0,1)      SA UP CHAIN
         LR    13,1           LOAD SA REG
         L     1,4(0,13)      GET HIGH SA
         LM    0,1,20(1)      RESTORE REGS 0 AND 1
         CALL  COBAST,(RCODE,BZEIT,TAB1,TAB2,TAB3),VL
         L     13,4(0,13)     GET HIGH SA ADR
         LM    14,12,12(13)   RESTORE REGS
         LA    15,0           LOAD CODE
         BR    14
*
RCODE    DC    H'0'
BZEIT    DC    CL15'4.QUARTAL 1974'
TAB1     DC    PL8'628705881,814937461,628705881'
TAB2     DC    PL3'103,89,192,2645,2453,2453'
TAB3     DC    PL2'9'
SAVE     DC    18F'0'
         END
//GO.ASTPARM  DD  *
RZ10001 K RZ 100 01        ABSTIMMZAHLEN BEISPIEL
RZ10001 *0** E I N G A B E
RZ10001 *    -------------
RZ10001 F KARTEN
RZ10001 S 01 ANZAHL KA1                    02010HERR ANTON    * FOD/AV
RZ10001 S 02 ANZAHL KA2                    02020              RZ K 010
RZ10001 S 03 KARTENANZAHL GESAMT           02030              RZ10001 01
RZ10001 S                                                    +RZ10001 02
RZ10001 F BESTAND
RZ10001 S 10 WERT                          01023MONAT         RZ00501 40
RZ10001 S                                       MONAT-1      +RZ00501 40
RZ10001 S                                       MONAT-2      +RZ00501 40
RZ10001 S 11 SATZANZAHL                    02040MONAT         RZ00501 41
RZ10001 S                                       MONAT-1      +RZ00501 41
RZ10001 S                                       MONAT-2      +RZ00501 41
RZ10001 S 12 WERT AUSGEFILTERT             01033
RZ10001 S 13 SATZANZAHL AUSGEFILTERT       02050              RZ10001 11
RZ10001 S                                                    -RZ10001 03
RZ10001 *0** A U S G A B E
RZ10001 *    -------------
RZ10001 F BESTF
RZ10001 S 30 WERT AUSGEFILTER              01013              RZ10001 12
RZ10001 S 31 SATZANZAHL AUSGEFILTERT       02060              RZ10001 13
RZ10001 F LISTE
RZ10001 S 40 RZ L 102  SEITENANZAHL        03010
