//VABDUMP JOB MSGLEVEL=(1,1)
//L1     EXEC  PGM=HEWL,REGION=192K,PARM='LIST,RENT,XREF,NCAL'
//* EXPAND CSECT IEAVAD03 OF MODULE IGC0005A
//SYSPRINT DD  SYSOUT=A
//SYSUT1 DD    UNIT=SYSDA,SPACE=(CYL,(2,1))
//SYSLIB DD    DSN=SYS1.LPALIB,DISP=SHR
//SYSLMOD DD   DSN=SYS1.LPALIB,DISP=SHR
//SYSLIN DD    *
 INCLUDE SYSLIB(IGC0005A)
 EXPAND IEAVAD03(88)
 ORDER IEAVAD00(P)
 ORDER IEAVAD03(P)
 ORDER IEAVAD01(P)
 ORDER IEAVAD0B
 ORDER IEAVAD02(P)
 ORDER IEAVAD05
 ORDER IEAVAD06(P)
 ORDER IEAVAD07
 ORDER IEAVAD08
 ORDER IEAVAD11(P)
 ORDER IEAVAD31
 ORDER IEAVAD51
 ORDER IEAVAD71
 ORDER IEAVAD0A
 ORDER IEAVAD0C(P)
 ORDER IEAVAD0D
 ENTRY IEAVAD00
 NAME IGC0005A(R)
//ZAP    EXEC PGM=AMASPZAP,REGION=128K
//* ZAP LINKAGE TO VABDUMP-ROUTINE (VALID FOR SVS 1.7H)
//SYSPRINT DD  SYSOUT=A
//SYSLIB DD    DSN=SYS1.LPALIB,DISP=SHR
//SYSIN  DD    *
*
* CONNECTION VABDUMP-ROUTINE TO SVC 51 (IGC0005A) VIA LINK-SVC
*   IN CSECT IEAVAD03 AT LABEL 'DEBOUT' (DEB FORMATTING & DISPLAY)
*   STATEMENTS 'SRCOUNT=0' AND 'SRCOUNT=SRCOUNT+1' ARE ZAPPED
*      BY A BRANCH TO PATCH (DISPL. 4F2) .
*   BRANCHES TO LABEL 'DEBLOOP' AT DISPL. 542 AND 5B4 ARE
*      ZAPPED TO PROCEED TO PATCH+X'1C'.
* UPON ENTRY TO VABDUMP-ROUTINE R1 CONTAINS ADDRESS OF CSECT
* IEAVAD11, R2 POINTS TO ABDUMP-WORKAREA
*
*      SYMBOLIC CONTENTS OF PATCH-AREA:
* PATCH  LA    R0,EPNAME
*        ST    R0,LINKPARM   A(EPNAME)
*        LA    R0,0
*        ST    R0,LINKPARM+4 A(DCB)
*        L     R1,AVAD11     ADDRESS OF PUT-ROUTINE
*        LA    R15,LINKPARM
*        SVC   6
* DEBOUT SR    R4,R4         SRCOUNT=0
* DEBLOOP LA   R4,1(R4)      SRCOUNT=SRCOUNT+1
*        B     DISABLE       GO TO MODESET-MACRO FOLLOWING
*                            ORIGINAL DEBLOOP-STATEMENT
* EPNAME DC    CL8'YVABDUMP'
* LINKPARM DC 2F'0'
*
 NAME IGC0005A IEAVAD03
 VER 04F2 1F44,4140,4001
 VER 0542 4780,B4D4
 VER 05B4 47F0,B4D4
 VER 0CE0 0000,0000,0000,0000,0000,0000,0000,0000
 REP 04F2 47F0,BCC0,0700     GO TO PATCH + X'0'
 REP 0542 4780,BCDC          GO TO PATCH + X'1C'
 REP 05B4 47F0,BCDC          GO TO PATCH + X'1C'
 REP 0CE0 4100,BCE4,5000,BCEC,4100,0000,5000,BCF0
 REP 0CF0 5810,B950,41F0,BCEC,0A06,1F44,4140,4001,47F0,B4D8
 REP 0D04 E8E5,C1C2,C4E4,D4D7
 IDRDATA INSERT LINK VABDUMP
//L2     EXEC  PGM=HEWL,REGION=192K,PARM='LIST,RENT,XREF,NCAL'
//* LINK VABDUMP
//SYSPRINT DD  SYSOUT=A
//SYSUT1 DD    UNIT=SYSDA,SPACE=(CYL,(2,1))
//SYSLIB DD    DSN=SYS1.LPALIB,DISP=SHR
//SYSLMOD DD   DSN=SYS1.LPALIB,DISP=SHR
//SYSLIN DD    *
*** INSERT VABDUMP-OBJECT-DECK HERE   ***
 ENTRY YVABDUMP
 NAME YVABDUMP(R)
//
