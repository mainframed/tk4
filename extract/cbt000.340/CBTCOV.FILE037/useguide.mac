














                        TIME SHARING SUBSYSTEM OPTION USER'S GUIDE














                                         Release 4.3  August, 1986











                                                       Marc Schare
                                Bell Communications Research, Inc.
                                    3 Corporate Place, Room 2C-211
                                              Piscataway, NJ 08854
                                          Telephone:  201-981-2796
















                              - ii -



 TABLE OF CONTENTS
 _____ __ ________

 INTRODUCTION   . . . . . . . . . . . . . . . . . . . . . . . .  1

 CURRENT VERSION  . . . . . . . . . . . . . . . . . . . . . . .  2

 PLANNING FOR TSSO INSTALLATION   . . . . . . . . . . . . . . .  3
 TSSO Software Prerequisites  . . . . . . . . . . . . . . . . .  3
 TSSO Subsystem Console   . . . . . . . . . . . . . . . . . . .  4
 TSSO Security Issues   . . . . . . . . . . . . . . . . . . . .  4
 Conclusion   . . . . . . . . . . . . . . . . . . . . . . . . .  5

 INSTALLATION   . . . . . . . . . . . . . . . . . . . . . . . .  6

 TSSO PARAMETERS  . . . . . . . . . . . . . . . . . . . . . . .  9
 MAXCMDS Parameter  . . . . . . . . . . . . . . . . . . . . . .  9
 MAXWTO Parameter   . . . . . . . . . . . . . . . . . . . . . .  9
 NONSWAP Parameter  . . . . . . . . . . . . . . . . . . . . . .  9
 NUMCONS Parameter  . . . . . . . . . . . . . . . . . . . . . . 10
 PROMPT Parameter   . . . . . . . . . . . . . . . . . . . . . . 10
 RACFID Parameter   . . . . . . . . . . . . . . . . . . . . . . 10
 SECLEVEL Parameter   . . . . . . . . . . . . . . . . . . . . . 11
 SECSYS Parameter   . . . . . . . . . . . . . . . . . . . . . . 12
 SUBSYS Parameter   . . . . . . . . . . . . . . . . . . . . . . 12
 System Recognition Character (SRC) Parameter   . . . . . . . . 12
 TABLE Parameter  . . . . . . . . . . . . . . . . . . . . . . . 12
 TIMEOUT Parameter  . . . . . . . . . . . . . . . . . . . . . . 13
 * (Comments) Parameter   . . . . . . . . . . . . . . . . . . . 13
 END Parameter  . . . . . . . . . . . . . . . . . . . . . . . . 13

 TSSO START COMMAND OPTIONS   . . . . . . . . . . . . . . . . . 14

 THE TSSO OPERATOR PRODUCTIVITY FACILITY  . . . . . . . . . . . 16
 Overview   . . . . . . . . . . . . . . . . . . . . . . . . . . 16
 TSO Commands Under TSSO  . . . . . . . . . . . . . . . . . . . 16
 TSSO Control Commands  . . . . . . . . . . . . . . . . . . . . 16
 TSO Commands Distributed with TSSO   . . . . . . . . . . . . . 16
   The OSCMD Command  . . . . . . . . . . . . . . . . . . . . . 17
     Authority Checking with OSCMD  . . . . . . . . . . . . . . 18
   The OSWTO and OSWTOH Commands  . . . . . . . . . . . . . . . 18
   The OSASK Command  . . . . . . . . . . . . . . . . . . . . . 18
   The OSPAUSE Command  . . . . . . . . . . . . . . . . . . . . 19
   The OSWAIT Command   . . . . . . . . . . . . . . . . . . . . 19
 Using the WRITE Statement in TSSO CLISTs   . . . . . . . . . . 28
   *COM Keyword   . . . . . . . . . . . . . . . . . . . . . . . 28
   *HI Keyword  . . . . . . . . . . . . . . . . . . . . . . . . 29
 Guidelines and Suggestions for Writing CLISTs  . . . . . . . . 30

 TSSO AUTOMATED OPERATIONS FACILITY   . . . . . . . . . . . . . 33
 Introduction   . . . . . . . . . . . . . . . . . . . . . . . . 33






                              - iii -


 Creating the AOF Table   . . . . . . . . . . . . . . . . . . . 34
 TABENTRY Operands  . . . . . . . . . . . . . . . . . . . . . . 34
   The Entry-id Operand   . . . . . . . . . . . . . . . . . . . 34
   The MSG Operand  . . . . . . . . . . . . . . . . . . . . . . 34
   The ACTION Operand   . . . . . . . . . . . . . . . . . . . . 35
   The TEXT Operand   . . . . . . . . . . . . . . . . . . . . . 37
   The TEST Operand   . . . . . . . . . . . . . . . . . . . . . 38
     Notes on the TEST Operand  . . . . . . . . . . . . . . . . 39
   The MATCHLIM Operand   . . . . . . . . . . . . . . . . . . . 40
   The ECHO Operand   . . . . . . . . . . . . . . . . . . . . . 40
 Assembling and Link-Editing the Table  . . . . . . . . . . . . 40
 Storing the Module   . . . . . . . . . . . . . . . . . . . . . 41

 TSSO NETWORK COMMUNICATION CONTROL FACILITY INTERFACE  . . . . 42
 Notes on the NCCF Interface  . . . . . . . . . . . . . . . . . 42

 RECOVERY PROCEDURES  . . . . . . . . . . . . . . . . . . . . . 43

 APPENDIX A. TSSO COMMAND REFERENCE   . . . . . . . . . . . . . 44

 APPENDIX B. TSSO CONTROL COMMANDS  . . . . . . . . . . . . . . 65
 General Commands   . . . . . . . . . . . . . . . . . . . . . . 65
 Restricted Commands  . . . . . . . . . . . . . . . . . . . . . 67

 APPENDIX C. TSSO PROCESSING MODULES  . . . . . . . . . . . . . 68

 APPENDIX D. SAMPLE AOF TABLE   . . . . . . . . . . . . . . . . 72

 APPENDIX E. TSSO/AOF TEXT PROCESSING ALGORITHM   . . . . . . . 76
 Definition of Terms  . . . . . . . . . . . . . . . . . . . . . 76
 Algorithm  . . . . . . . . . . . . . . . . . . . . . . . . . . 76

 APPENDIX F. TSSO SAMPLE PARAMETER DECK   . . . . . . . . . . . 78
























                              - iv -



 LIST OF ILLUSTRATIONS
 ____ __ _____________

 Figure  1. Behavior of CMDRESP in Various Environments   . . . 19
 Figure  2. Sample CLIST for OSWAIT.  . . . . . . . . . . . . . 21
 Figure  3. CLIST EXJOBS  . . . . . . . . . . . . . . . . . . . 22
 Figure  4. CLIST EXCKSPL   . . . . . . . . . . . . . . . . . . 24
 Figure  5. CLIST EXSTVTAM  . . . . . . . . . . . . . . . . . . 26
 Figure  6. CLIST EXASK   . . . . . . . . . . . . . . . . . . . 27
 Figure  7. CLIST with an Operator Help Procedure   . . . . . . 31
 Figure  8. CLIST Using Symbolic Substitution   . . . . . . . . 32














































                               - 1 -



 INTRODUCTION
 ____________

 The Time Sharing Subsystem Option (TSSO) is a package designed to
 increase operator productivity by automating tasks which need not
 be  performed  manually. TSSO performs its function through three
 integrated components. The Operator Productivity  Facility  (OPF)
 extends  the power of TSO to the MVS operator's console.  The Au-
 tomated Operations  Facility  (AOF)  enhances  an  installation's
 ability  to  control system events based on console message traf-
 fic.  An interface to the Network Communication Control  Facility
 (NCCF)  allows  the  network  operator  to  use TSSO as a command
 processor, issuing and receiving subsystem commands at  the  NCCF
 terminal.    TSSO also enhances end-user productivity by allowing
 end-user access to the MVS command subsystem.  This document  de-
 scribes the installation of TSSO, TSSO parameters, and the use of
 the three components.








































                               - 2 -



 CURRENT VERSION
 _______ _______

 This document describes the function of TSSO Version 4, Release 3
 (TSSO 4.3).  All features described here will continue to work on
 subsequent  versions  of the Time Sharing Subsystem Option unless
 specified in a future version of this document.  A description of
 the new features of TSSO Version  4.3  can  be  found  in  member
 RELGUIDE in the TSSO.VERS43.ASM data set.
















































                               - 3 -



 PLANNING FOR TSSO INSTALLATION
 ________ ___ ____ ____________

 Because  TSSO  has  grown  in function and complexity, a planning
 section is now necessary to describe pre-requisite  program  pro-
 ducts,  MVS I/O generation requirements, and security system con-
 ditioning.    This  section  should  be  reviewed  PRIOR  to  the
 installation of TSSO.

 TSSO  4.3  was  developed  for Bellcore internal use as part of a
 study on automating the operation of an MVS computer center.  Be-
 cause  the  kernal  of  TSSO was originally developed external to
 Bellcore, permission was granted to make this new version of TSSO
 available as public domain, unsupported software. As a public do-
 main software package,  TSSO  receives  no  formal  support  from
 Bellcore  or  anyone else.  Therefore, installations that want to
 use TSSO must be prepared to support it locally as a  worst  case
 possibility.  Questions, comments or enhancement requests are al-
 ways welcome on an informal, non-committal basis.

 TSSO SOFTWARE PREREQUISITES
 ____ ________ _____________

 The software listed below is the minimum version of  the  program
 product  required  to  run  TSSO.  In general, that version, or a
 later release, is sufficient. Also listed is the version  of  the
 product  run  at Bell Communications Research (i.e., the environ-
 ment on which TSSO 4.3 was developed).

 1.   MVS/SP 1.3.3 OR MVS/XA 2.1.1 is required for  the  OCCF  en-
      ______ _____ __ ______ _____
     hancements to the subsystem interface that allow TSSO/AOF and
     the  OS  family  of  commands to function. TSSO 4.3 has never
     been run on earlier  MVS  releases.    Bellcore  runs  MVS/XA
     2.1.3, and TSSO has also been tested on MVS/SP 1.3.4.

 2.    TSO/E  RELEASE  2 is required by the OS family of commands.
       _____  _______  _
     These commands use CLIST variables for input and output,  and
     require  the  CLIST enhancements of TSO/E Release 2 to accom-
     plish this. TSO/E is not required if these commands will  not
     be  used.  Bellcore runs TSO/E Release 2.1, and TSSO has also
     been tested with TSO/E Release 2.

 3.  RACF 1.6 is required for the  TSSO/RACF  security  interface.
     ____ ___
     TSSO  has  never  been  run  on  previous  releases  of RACF.
     Bellcore runs RACF 1.7, and TSSO 4.3 has been tested only  in
     that environment.

 4.  ACF2 4.1 is the release on which TSSO/ACF2 interface is being
     ____ ___
     developed.









                               - 4 -


 TSSO SUBSYSTEM CONSOLE
 ____ _________ _______

 The  OSCMD facility allows a TSO CLIST to issue an operating sys-
 tem command and retrieve the response. This facility  requires  a
 subsystem console for every simultaneous caller of OSCMD.  In ad-
 dition,  an  installation may want to dedicate one subsystem con-
 sole  for  the  TSSO  address  space.(1)  To  create  a subsystem
 console, include the following card after the "CONSOLE" macros in
 the MVS STAGE1 generation deck.

   CONSOLE    TYPE=JES

 Because TSSO 4.3 can use as many subsystem consoles as are genned
 in, it is a good idea to include many  (10-20)  of  these  cards.
 (Bellcore  has  10  subsystem  consoles  genned in.)   JES3 shops
 should note that JES3 and TSSO both require  subsystem  consoles,
 and you specify them accordingly.  AN MVS IOGEN MUST BE PERFORMED
 TO  GENERATE  THE  SUBSYSTEM CONSOLE. INSTALLATIONS FAMILIAR WITH
 THE "MINIGEN" APPROACH MAY USE THIS AS AN ALTERNATIVE.

 TSSO SECURITY ISSUES
 ____ ________ ______

 An optional feature of TSSO 4.3 is the ability to secure your MVS
 consoles.  Console security requires MVS  operators  to  identify
 themselves  before  issuing commands; thus, MVS installations al-
 ways know which operators issue  which  commands.  The  following
 steps  should be taken prior to initializing TSSO with a security
 level other than "minimal".

 1.  Provide a RACF user ID for each operator who will be  issuing
     MVS commands on the system. This includes the master console,
     I/O console(s) and user consoles.

 2.  Add  a  corresponding user ID to the User Attributes Data Set
     (UADS), and set the USERDATA bits to X'C0' for operators  who
     will  be  invoking the privileged TSSO commands (e.g., REPLY,
     OSCMD etc.).  Note that the USERDATA bits  also  control  au-
     thority  for  regular  TSO users, and, if the Program Control
     Facility (PCF) is installed, the  OSCMD  and  REPLY  commands
     must  be  modified  so that PCF and TSSO don't conflict.  See
     "Authority Checking with OSCMD" on page 18 for information on
     the OSCMDATH user exit.

 3.  Pick a security level. SECLEVEL=MEDIAL is a good initial  se-
     lection,  as operators can get used to the concept of logging


 ----------------

 1   For more information on this option, see "NUMCONS  Parameter"
     on page 10.






                               - 5 -


     on and logging off of an MVS console. Later, security can  be
     strengthened with SECLEVEL=MAXIMAL.

 4.  Select  a  TIMEOUT parameter. This parameter is the number of
     minutes before which an MVS console will  "timeout"  and  re-
     quire a new LOGON command.

 5.  As  with the rest of TSSO, operator training is CRUCIAL for a
                                                     _______
     successful implementation.  Operators  must  become  familiar
     with the concepts of security.

 6.  ACF2  will  eventually be supported under TSSO.  For the cur-
     rent status of this effort, call Marc Schare.

 CONCLUSION
 __________

 The remainder of this guide should be read IN ITS ENTIRETY before
 installing TSSO.  Many of the phone calls I've received  on  TSSO
 were  answered  in the TSSO USER'S GUIDE.  Good luck in your TSSO
                        ____ ______ _____
 installation !


                                              Marc Schare
                                              Bell Communication Researc
                                              6 Corporate Place, Room 2C
                                              Piscataway, NJ 08854
                                              201-981-2796






























                               - 6 -



 INSTALLATION
 ____________

 TSSO is distributed in a single partitioned data set, which  con-
 tains all source modules, procedures and documentation.  Although
 the  data  set may be called by any name, this document assumes a
 name of TSSO.VERS43.ASM.

 1.  Download the TSSO.VERS43.ASM data set to DASD.  About 3  cyl-
     inders  of 3380 space is required.  If you received your copy
     of the TSSO subsystem from the CBT tape, simply copy it to  a
     data  set  with this name.   If you received a tape, then the
     TSSO subsystem is in IEBCOPY format on the first file.    The
     tape  will  be non-labeled, so use the LABEL=(1,NL) parameter
     when downloading TSSO.

 2.  Create two data sets for the TSSO modules with the character-
     istics RECFM=U, LRECL=0, BLKSIZE=13030, DSORG=PO.

     a.  TSSO.VERS43.LOAD will be an intermediate data set for as-
         sembling TSSO modules.

     b.  SYS1.TSSOLOAD will contain the TSSO production modules.

     One cylinder of 3380 DASD  space  should  be  sufficient  for
     these data sets.

     Many users have found it useful to allocate a third data set:

     c.  SYS1.TSSOPROC will contain TSSO CLISTs.  Allocate it with
         characteristics    LRECL=255,   BLKSIZE=3140,   RECFM=VB,
         DSORG=PO.   Space requirements depend on  the  number  of
         CLISTs you anticipate creating.

 3.  Assemble  the  TSSO source modules using the procedure ASMALL
     in TSSO.VERS43.ASM.  You will need to EDIT the procedure  and
     add the appropriate installation job cards and local account-
     ing information.

     If you will be running the TSSO subsystem on MVS/370, or both
     MVS/370  and MVS/XA, the SYSLIB DD statement must be pointing
     to the SYS1.MACLIB and SYS1.AMODGEN data sets for MVS/370. If
     you will be running the subsystem exclusively on MVS/XA,  the
     SYSLIB   DD  statement  may  point  to  the  XA  versions  of
     SYS1.MACLIB and SYS1.AMODGEN.

     NOTE: If you do not have TSO/E Release 2 installed,  the  as-
     semblies for OSCMD, OSWAIT, and OSASK will fail.

 4.  Copy  the  load  modules  from TSSO.VERS43.LOAD into the pro-
     duction library SYS1.TSSOLOAD.  The library  TSSO.VERS43.LOAD






                               - 7 -


     should  remain  on  the  system as an intermediate library to
     contain assembled TSSO load modules and  assembled  Automated
     Operations Facility tables.

 5.  If OSCMD, OSWAIT, OSPAUSE, OSWTO, and OSWTOH will be accessed
     by  TSO  users,  copy  the  modules  from  SYS1.TSSOLOAD to a
     publicly-accessible TSO command library (e;g;, SYS1,CMDLIB).

 6.  Update the SYS1.PARMLIB data set with one or more TSSO param-
     eter decks.  The default member is TSSOPARM; however,  alter-
     nate members may be selected when TSSO is started.  Note that
     the  TSSO parameter decks MUST be located in SYS1.PARMLIB, as
                               ____
     TSSO will dynamically allocate this data  set.    Review  the
     section  "TSSO  PARAMETERS" on page 9for further information.
     A sample TSSO parameter deck may be found in member  SAMPPARM
     in  "Appendix F. TSSO Sample Parameter Deck" on page 78 or in
     the TSSO.VERS43.ASM data set.

 7.  Identify TSSO to MVS as a subsystem.  In the subsystem  names
     table,  member IEFSSNxx in SYS1.PARMLIB, make an entry of the
                          __
     form

       TSSO,TSSOINIT

     NOTE THAT THIS ENTRY HAS CHANGED FROM RELEASE 4.2.

 8.  Include SYS1.TSSOLOAD in the IEAAPFxx member of SYS1.PARMLIB.
                                        __
     This allows the TSSO subsystem to run APF authorized.

 9.  Include a TSSO start-up procedure in  the  SYS1.PROCLIB  data
     set.    Note  that, because TSSO may be started by the master
     scheduler, this procedure must be in SYS1.PROCLIB, not  in  a
     PROCLIB  defined  to  JES2.   A sample procedure for starting
     TSSO is in member TSSOPROC in the TSSO.VERS43.ASM data set.

 10. Give the TSO commands supplied with TSSO  APF  authorization.
     Update   the  installation  CSECT  IKJEFTE2  in  load  module
     IKJEFT02 to include the following commands:   ALTAOF,  CACHE,
     CPCMD, REPLY, OSCMD, OSWTO, OSWTOH, OSWAIT, and OSASK.  Under
     TSO/E Release 2.1, this CSECT is in the load module IKJTABLS.
     If  this  release  of  TSO/E is installed, a separate copy of
     IKJTABLS may be used by TSSO if included in the SYS1.TSSOLOAD
     data set.

 11. Create the TSSO Automated Operations Facility table(s).   In-
     structions  for  preparing  the table are found later in this
     document.

 12. Copy the ASMTAB CLIST from the TSSO.VERS43.ASM  data  set  to
     SYS1.TSSOPROC.







                               - 8 -


 13. If you will be running TSSO with RACF support and MINIMAL se-
     curity,  add a RACF ID for TSSO.  Also add a RACF ID for TSSO
     to SYS1.UADS.  This will allow TSSO to assume the TSO  attri-
     butes  (e.g.  ACCOUNT, SUBMIT or MOUNT) that the installation
     desires.  If you will be running with MEDIAL or MAXIMAL secu-
     rity, you may wish to add additional RACF  or  ACF2  and  TSO
     user IDs for each operator who will be logging on.

 14. IPL MVS to refresh the subsystem name table.

 15. If  the  OSCMD facility will be used, you must have generated
     subsystem consoles as specified in "TSSO  Subsystem  Console"
     on  page  4.    TSSO will warn you if the number of subsystem
     consoles requested is not available at start time.

 16. Install the NCCF Interface (optional).   The following  steps
     are required:

     a.  Copy  the  NCFOSCMD module into a library concatenated to
         the STEPLIB DD statement in the procedure used  to  start
         NCCF.

     b.  Make the following entry in member DSICMD of the data set
         defined by the DSIPARM DD statement in the procedure used
         to start NCCF:

           OSCMD CMDMDL MOD=NCFOSCMD,TYPE=R,RES=N    TSSO 4.3






























                               - 9 -



 TSSO PARAMETERS
 ____ __________

 TSSO parameters provide an installation with a flexible mechanism
 for  altering  TSSO processing.  Parameters are stored as members
 in SYS1.PARMLIB.  The default member is TSSOPARM, and it  is  re-
 commended that a TSSOPARM be created for daily processing.

 Parameters  can  be  entered in any order, and if two entries are
 specified for the same parameter, the last  entry  takes  preced-
 ence.

 MAXCMDS PARAMETER
 _______ _________

 MAXCMDS  defines  the  maximum number of concurrent commands that
 TSSO will hold for processing.   TSSO processes commands  in  the
 order  in  which they are entered, on a first in-first out basis.
 Any commands that are entered while TSSO  is  processing  another
 command  are queued for execution.  The MAXCMDS parameter defines
 the size of that queue.  Too small a number  is  undesirable  be-
 cause  it  is advantageous to be able to enter many TSSO commands
 at a time.  Too large a number is also undesirable because it be-
 comes difficult to detect when a TSSO command may be  looping  or
 awaiting terminal input.  The syntax is

   MAXCMDS=nn
           __

 where  nn  defines  the  maximum number of simultaneous TSSO com-
        __
 mands.  Note that TSSO requires 256 bytes for each command in the
 common service area (CSA).  The default value is 15  simultaneous
 commands.

 MAXWTO PARAMETER
 ______ _________

 MAXWTO defines the maximum number of WTOs TSSO will issue for any
 given  TSO command.  The parameter is designed to prevent console
 flooding with TSO commands that produce  many  lines  of  output.
 The syntax is

   MAXWTO=nnn
          ___

 where  nnn  is the maximum number of WTOs TSSO will allow for any
        ___
 one command.  TSSO will issue a message when this  limit  is  ex-
 ceeded.  Default is 250.

 NONSWAP PARAMETER
 _______ _________

 NONSWAP  defines  whether TSSO will run non-swappable.  If "Y" is
 entered, TSSO will issue the appropriate SYSEVENT to MVS  to  de-
 clare  itself non-swappable.   Any other entry will cause TSSO to
 be swapped out whenever it has no work.   This can  cause  SEVERE
                                                            ______






                              - 10 -


 performance  degradation  when  using the subsystem.  The default
 value is "Y".  The syntax is

   NONSWAP=[Y/N]

 where "Y" will mark the TSSO address space non-swappable.

 NUMCONS PARAMETER
 _______ _________

 NUMCONS defines the number of subsystem consoles for the  instal-
 lation.    Optionally, you may dedicate one subsystem console for
 the TSSO address space.  The syntax is

   NUMCONS=nn [DEDICATE]
           __

 where nn is the number of consoles.   If DEDICATE  is  specified,
       __
 one  console  will be dedicated for the TSSO address space.  Note
 that at least nn subsystem consoles must have been  generated  in
               __
 the MVS IOGEN prior to starting TSSO.

 PROMPT PARAMETER
 ______ _________

 PROMPT  defines  whether or not the operator will be prompted for
 additional TSSO parameters at start-up time.  The syntax is

   PROMPT=[Y/N]

 If PROMPT=Y is specified, TSSO will enter prompt mode after proc-
 essing all the parameters in PARMLIB and allow the  MVS  operator
 to  enter or override parameters (except security-related parame-
 ters).  For example, if you want a different AOF table used  each
 day,  you would want to be prompted so that you can enter the TA-
 BLE parameter.

 NOTE: Prompt mode may also be specified at start-up  time.    See
 the next section for more information.

 RACFID PARAMETER
 ______ _________

 RACFID defines a default RACF ID for the TSSO subsystem, allowing
 TSSO  to  access  data  sets  with the authority of that RACF ID.
 This implies that RACF commands can be entered from the MVS  con-
 sole  through  the  use of TSSO.  If the installation has not in-
 stalled the RACF program product, this parameter must be omitted.
 The syntax is

   RACFID=RACF-id
          _______

 where RACF-id is the RACF identifier that TSSO will assume.  This
       _______
 parameter has no default. If it is not specified, TSSO will  exe-
 cute with the default RACF authority.






                              - 11 -


 RACFID   is   dependent   on   the   SECLEVEL   parameter.     If
 SECLEVEL=MINIMAL, then the RACFID authority level applies to  any
 TSO  command issued through TSSO.  If SECLEVEL=MEDIAL or MAXIMAL,
 then the RACFID authority level applies to CONSOLE 0 and any  TSO
 command issued from a subsystem console through OSCMD.  Note that
 TSSO  requires  that  subsystem consoles issuing commands have at
 least "SYSTEM" authority.

 CAUTION:   TSSO does not require a password to acquire this  RACF
            authority,  and  care must be taken to ensure that use
            of this parameter does not violate installation  secu-
            rity standards.

 A  recent small programming enhancement (SPE) to the JES2 subsys-
 tem has enhanced TSSO's ability to control production batch  jobs
 that  may  use RACF-protected data sets.  JES2 will now propagate
 the RACF ID and group from the current  address  space  for  jobs
 submitted  through the internal reader.  TSSO can submit jobs us-
 ing the TSO SUBMIT command, and those jobs can  acquire  the  au-
 thority of the TSSO address space.

 SECLEVEL PARAMETER
 ________ _________

 SECLEVEL  defines  the  security  level of the installation.  The
 syntax is

   SECLEVEL=[MINIMAL/MEDIAL/MAXIMAL]

      MINIMAL        Default for RACF and TOP SECRET.  The  RACFID
                     parameter is used to determine TSSO's author-
                     ity  level.  Therefore, all TSO commands will
                     execute with TSSO's authority, regardless  of
                     the console's authority level.

      MEDIAL         This  level  requires all consoles using TSSO
                     to  log  on(2) using the appropriate security
                     system (RACF, TOP SECRET, or ACF2).  All data
                     set access checking  for  TSSO  commands  and
                     CLISTs is based on the console's logon ID au-
                     thority.    Note  that  this does not include
                     TSSO control commands, which follow a differ-
                     ent authorization mechanism.

      MAXIMAL        This level is extremely  restrictive.    Once
                     TSSO is initialized, all consoles must log on
                     using  the  appropriate security system.  ANY

 ----------------

 2   Using the #.LOGON command, which will assign each  console  a
     separate RACFID parameter.






                              - 12 -


                     CONSOLE THAT DOES NOT LOG ON IS LOCKED OUT OF
                     ALL MVS COMMANDS.

 SECSYS PARAMETER
 ______ _________

 SECSYS defines the security system used by the installation.  The
 syntax is

   SECSYS=[RACF/ACF2/TOPS]

 The default is RACF.

 SUBSYS PARAMETER
 ______ _________

 SUBSYS defines subsystem interface exits and  the  routines  that
 will handle the exit functions.  The syntax is

   SUBSYS nn=module-name
          __ ___________

 where nn is the subsystem interface function code and module-name
       __                                              ___________
 is  the  name  of the routine that will handle the function.  You
 may specify as many SUBSYS parameters as desired.    However,  if
 there  are multiple entries with the same function code, only the
 last appearance of the code will be honored.

 By default, TSSO includes two SUBSYS entries,  one  for  function
 code  9  which intercepts WTO messages (the AOF facility) and one
 for function code 10 which intercepts operator commands (the  OPF
 facility).   Therefore, be careful that you do not enter a SUBSYS
 parameter with code 9 or 10; otherwise, your entries  will  over-
 ride the defaults and disable the AOF and OPF facilities.

 SYSTEM RECOGNITION CHARACTER (SRC) PARAMETER
 ______ ___________ _________ _____ _________

 SRC  defines  the  character that TSSO will use to recognize TSSO
 operator commands.  For example, if this character is  "#",  TSSO
 will  intercept and process all operator commands starting with a
 "#".  The syntax is

   SRC=char
       ____

 where char is the character that TSSO  will  use.    The  default
       ____
 character is a "#".

 TABLE PARAMETER
 _____ _________

 TABLE  defines the name of the TSSO Automated Operations Facility
 (AOF) table.  The AOF table contains information used  to  inter-
 cept  and  responding to operating system messages.  (Information
 describing how to create this table is specified  later  in  this
 document.)  There is no default.  If this parameter is not speci-






                              - 13 -


 fied,  the  AOF is deactivated.   Note that this table can be re-
 loaded (and AOF activated) at any time with  the  ".RELOAD"  TSSO
 operator command described later.  The syntax is

   TABLE=table-name
         __________

 where table-name is the load module name that contains a TSSO AOF
       __________
 table.

 TIMEOUT PARAMETER
 _______ _________

 TIMEOUT defines the interval after which TSSO will log off an in-
 active console.  The syntax is

   TIMEOUT=nn
           __

 where nn is the maximum number of minutes of inactivity.
       __

 * (COMMENTS) PARAMETER
 _ __________ _________

 The "*" parameter allows an installation to place comments in the
 TSSO initialization deck.  The line will be ignored by TSSO.  The
 syntax is

   * any-text
     ________

 where  any-text  is any descriptive comments the installation may
        ________
 want to include in the initialization deck.

 END PARAMETER
 ___ _________

 END marks the end of TSSO parameter input. The syntax is

   END

 with no operands.  If prompt mode was enabled,  the  MVS  console
 operator  will  be  prompted for additional TSSO parameters after
 the END parameter is processed.



















                              - 14 -



 TSSO START COMMAND OPTIONS
 ____ _____ _______ _______

 Start procedures under release 4.3  have  changed  significantly.
 By default, TSSO will use the primary subsystem (JES2 or JES3(4))
 for  services  required  by commands such as PRINTOFF and SUBMIT.
 Note that, except for emergencies, YOU CAN NO LONGER  START  TSSO
 IF IT IS ALREADY UP.

 The TSSO start command has the following syntax:

   S TSSO[,PARM='[*][parm-member][PROMPT]'][,SUB=MSTR]
                     ___________

 PARM='*'          Allows you to specify TSSO parameters(3)  with-
                   out entering them previously into SYS1.PARMLIB.
                   This can be useful in emergency situations; for
                   example,  if you need to enter a parameter on a
                   one-time basis, or if you  are  locked  out  of
                   SYS1.PARMLIB  and need to enter a different pa-
                   rameter.

 PARM='parm-member' Directs TSSO to use an alternate TSSO  parame-
                   ter  deck  in SYS1.PARMLIB for parameters.  De-
                   fault is TSSOPARM.

 PARM='PROMPT'     Directs TSSO to prompt the MVS console operator
                   for the name of a member in SYS1.PARMLIB to  be
                   used  for  parameters.    After  processing the
                   named member, TSSO will  also  prompt  the  MVS
                   console  operator  for  additional  parameters,
                   even if the parameter deck specifies PROMPT=N.

 SUB=MSTR          Initializes TSSO without the primary subsystem.
                   This should be used only if JES won't come up.

 If an emergency restart is necessary, the start command  has  the
 form

   S TSSO,PARM='/[options]'
                  _______

 where  options are any of the PARM options listed above.  The "/"
        _______
 MUST be specified as the first operand.  When a force restart oc-
 curs, the inactive TSSO address space may  be  cancelled.    Note
 that  the  inactive  TSSO  does not relinquish its subsystem con-



 ----------------

 3   Except  the security-related parameters SECSYS, SECLEVEL, and
     RACFID.






                              - 15 -


 soles, and, therefore, it is not advisable to  force  start  TSSO
 unless absolutely necessary.












































 ----------------

 4   Although  TSSO has not been tested extensively using the JES3
     product, the interfaces should be the same because TSSO  uses
     standard subsystem interface calls.






                              - 16 -



 THE TSSO OPERATOR PRODUCTIVITY FACILITY
 ___ ____ ________ ____________ ________


 OVERVIEW
 ________

 The  TSSO Operator Productivity Facility (OPF) is a powerful tool
 which, in conjunction with the Automated Operations Facility, can
 automate many procedures that currently must  be  done  manually.
 OPF extends the power of TSO to the MVS operator's console by al-
 lowing  TSO  commands  and CLISTS to be executed from an MVS con-
 sole, with the response going back to the invoking console.  This
 includes all TSO functions which use  standard  interfaces  (with
 the  exceptions  noted below) and control functions unique to the
 TSSO environment that alter TSSO options and display TSSO  infor-
 mation.

 OPF also allows TSO users to issue MVS commands and get responses
 returned  to  the  terminal or to CLIST variables.  TSO users are
 usually restricted to INFO console authority.    (See  "Authority
 Checking with OSCMD" on page 18.)

 TSO COMMANDS UNDER TSSO
 ___ ________ _____ ____

 Most TSO commands may be run under control of the TSSO subsystem.
 The requirements for such commands are as follows:

 1.  The command must use standard TSO interfaces (namely, GETLINE
     and  PUTLINE) to perform I/O.  The command should not require
     input of any kind other than normal TSO command parameters.

 2.  THE COMMAND SHOULD NOT ATTEMPT TO USE FULL SCREEN PROCESSING.
     A command that issues  the  STFSMODE  FULLSCRN=YES  macro  in
     ACF/VTAM environments can hang the TSSO subsystem, forcing it
     to be cancelled.

 3.  The  command  should be TESTED UNDER BATCH TSO before running
                             ______ _____ _____ ___
     it under TSSO, since TSO assumes that TSSO-initiated commands
     are running in BACKGROUND mode.
                    __________

 TSSO CONTROL COMMANDS
 ____ _______ ________

 TSSO supports a number of commands that are not directed  to  the
 TMP  for execution.  These commands are handled directly by TSSO,
 and are used to alter or query TSSO processing options.  See "Ap-
 pendix B. TSSO Control Commands" on page 65 for more information.

 TSO COMMANDS DISTRIBUTED WITH TSSO
 ___ ________ ___________ ____ ____

 A number of TSO commands that are designed to run with  the  TSSO
 subsystem  are distributed with the base code.  TSO commands used






                              - 17 -


 primarily from CLISTs include the "OS family" and the REPLY  com-
 mand.  These are designed to provide services such as communicat-
 ing  with  the  MVS  operator  and  issuing  messages  to the MVS
 console, communicating with the MVS command subsystem, and commu-
 nicating with programs that have issued WTORs.   Applications  of
 these  commands  are described below.  Figure 1 on page 19 summa-
 rizes the behavior of OSCMD with the CMDRESP variable in  differ-
 ent  environments.   Figure 3 on page 22 through Figure 6 on page
 27 illustrate the OS family in some useful CLISTs, which  can  be
 found in data set TSSO.VERS43.ASM.

 Other  commands are provided as auxiliary TSO command processors.
 These include the  CACHE  command  for  controlling  3880-21  and
 3880-23  cache  devices,  the LINKLIST command for displaying the
 system LNKLST concatenation, and the VOLSER and  VALLOC  commands
 for displaying UCB information for DASD devices.  Also, the CPCMD
 command  allows  an MVS console operator running in a virtual ma-
 chine under VM/SP, VM/SP HPO or the VM/XA systems facility to is-
 sue CP commands and get the response back to the console invoking
 the command.

 A complete description of TSO commands may be found in  "Appendix
 A. TSSO Command Reference" on page 44.

 THE OSCMD COMMAND
 ___ _____ _______

 OSCMD  allows  you  to  issue any MVS command (JES2, VTAM, etc.).
 OSCMD is most useful when issued from a CLIST, where the response
 is returned to CLIST variables.  The CLIST can be designed to ma-
 nipulate these variables to produce  readable  responses  to  the
 user.  For example, the JES command $DN queries the status of all
 jobs  on  the  system.   The output from $DN could be filtered so
 that the information will be printed only for certain  job  names
 (Figure 3 on page 22).

 The syntax of OSCMD is

   OSCMD mvs-cmd
         _______

 where  mvs-cmd  is  any MVS command.   Through the CLIST variable
        _______
 CMDRESP, OSCMD can determine the destination  of  a  command  re-
 sponse based on its origin.

 +---------------------+--------------------------+
 ×  If OSCMD was issued×frthen the response will b× returned to:
 +---------------------+--------------------------+
 ×                     ×                          ×
 ×  a TSO address space×  a TSO terminal          ×
 ×                     ×                          ×
 ×  a TSSO-initiated CL×STthe MVS console         ×
 ×                     ×                          ×






                              - 18 -


 ×  a TSO-initiated CLI×T CLIST variables         ×
 ×                     ×                          ×
 +---------------------+--------------------------+

 Input  and  output  variables  are described in "Appendix A. TSSO
 Command Reference" on page 44.

 AUTHORITY CHECKING WITH OSCMD

 Because OSCMD allows a TSO user to issue any MVS command,  strict
 security  must be enforced to prevent unauthorized users from is-
 suing  dangerous  system  commands.      When   issued   from   a
 TSSO-initiated  CLIST, OSCMD checks the authority of the invoking
 console and only permits commands of that level.  When issued  by
 a  TSO  user,  the OSCMDATH user exit checks the installation au-
 thority of the user's  ID.    By  default,  all  TSO  users  have
 INFO-only  authority as defined in the MVS system operations man-
 ual.  Other authority levels (system, I/O, master) can be defined
 through the OSCMDATH user exit.  This exit allows  the  installa-
 tion  to  code a routine to determine the MVS command group level
 for a TSO user.  Full authority can be granted on a per-user  ba-
 sis.(5)

 THE OSWTO AND OSWTOH COMMANDS
 ___ _____ ___ ______ ________

 OSWTO and OSWTOH allow you to write messages to the operator con-
 sole.   OSWTOH highlights the message.  These commands can be is-
 sued only from a TSSO-initiated CLIST,  since  the  SEND  command
 allows you to send messages to the operator under TSO.

 The syntax of the commands is

   OSWTO message
         _______
   OSWTOH message
          _______

 where  message  is  the  text of the message issued.  Figure 3 on
        _______
 page 22 through Figure 5 on page 26 illustrate these commands.

 THE OSASK COMMAND
 ___ _____ _______

 OSASK allows you to ask the operator a question  and  get  a  re-
 sponse.    If  it is issued from a TSO command line, the response
 goes to the user's terminal.  However, like OSCMD, OSASK is  most
 useful  when  issued from a CLIST, where the response is returned
 to CLIST variables which can then be manipulated.   So that  TSSO

 ----------------

 5   "Authorized users" are those with X'C0' in the PSCBATR2 field
     of the User Attributes Data Set.  This can be set through the
     USERDATA operand of the CHANGE subcommand of ACCOUNT.






                              - 19 -


 +---------------------------------------------------------------+
 ×                                                               ×
 × ENVIRONMENT  LEGAL VALUES FOR CMDRESP         AUTHORITY CHECKI×G
 ×                                                               ×
 × TSSO CLIST   ø CLIST                          Based on invokin×
 ×              ø NOWHERE                        console         ×
 ×              ø If not defined, value is assumed               ×
 ×                to be CLIST or NOWHERE, depending              ×
 ×                on how MAXCMDOUT is defined                    ×
 ×                                                               ×
 × TSO CLIST    ø TERM                           Based on OSCMDAT×
 ×              ø CLIST                          user exit       ×
 ×              ø NOWHERE                                        ×
 ×              øIf not defined, OSCMD assumes                   ×
 ×                NOWHERE                                        ×
 ×                                                               ×
 × TSO terminal ø TERM                           Based on OSCMDAT×
 ×                                               user exit       ×
 ×                                                               ×
 × Figure 1.  Behavior of CMDRESP in Various Environments        ×
 +---------------------------------------------------------------+

 is  not  delayed too long for an operator reply, the maximum wait
 time  is  60  seconds,  after  which  the  default  response   is
 "NOREPLY".

 The syntax of OSASK is

   OSASK question
         ________

 Input  and  output  variables  are described in "Appendix A. TSSO
 Command Reference" on page 44.  Figure 6 on page  27  illustrates
 OSASK with an interactive help procedure.

 THE OSPAUSE COMMAND
 ___ _______ _______

 OSPAUSE  is  used to delay CLIST execution for a specified number
 of seconds.  This is useful if the CLIST any time the CLIST  must
 wait  for  an  event.   Figure 5 on page 26 shows an example of a
 CLIST that initiates a started task and must wait for it to  ini-
 tialize.

 THE OSWAIT COMMAND
 ___ ______ _______

 OSWAIT  directs TSSO to wait for a particular system message or a
 timeout limit to occur before proceeding.  These messages are de-
 fined in the AOF table.  OSWAIT is intended to be issued  from  a
 CLIST.

 OSWAIT  provides many automation opportunities that were (in pre-
 vious versions of TSSO) too cumbersome to develop.   OSWAIT  does






                              - 20 -


 not  need  to run from the TSSO address space.  In theory, an in-
 stallation may have many OSWAIT events  outstanding  at  any  one
 time  in  different  TSO or batch address spaces.  For example, a
 simple job scheduler can be coded as a CLIST using the OSWAIT and
 OSCMD facilities.  The CLIST can then be run under control  of  a
 batch TMP in a separate address space.

 The syntax of OSWAIT is

   OSWAIT ENTRY(entry-id) TIMEOUT(nnnnn)
                ________          _____

 where entry-id is the 1- to 8-character identifier of the AOF ta-
       ________
 ble entry; and nnnnn is the number of second to wait before time-
                _____
 out,  maximum  86400  seconds.   For example, Figure 2 on page 21
 shows a CLIST that will start a job, wait for  the  job  to  com-
 plete, and purge the job.

 See  "Appendix A. TSSO Command Reference" on page 44 for more in-
 formation on OSWAIT.






































                              - 21 -


 +---------------------------------------------------------------+
 ×                                                               ×
 ×   PROC 0                                                      ×
 ×   /**********************************************************/×
 ×   /*  This clist will start a job, wait for its completion, */×
 ×   /*  and purge the job.                                    */×
 ×   /**********************************************************/×
 ×                                                               ×
 ×   OSCMD S MYJOB                                               ×
 ×   OSWAIT ENTRY(MYJOBEND)    TIMEOUT(60)                       ×
 ×   OSWTO MYJOB HAS ENDED ...                                   ×
 ×   OSCMD $P'MYJOB'                                             ×
 ×   EXIT                                                        ×
 ×                                                               ×
 ×                                                               ×
 ×                                                               ×
 × The CLIST above used the AOF table entry                      ×
 ×                                                               ×
 ×      MYJOBEND TABENTRY MSG=IEF404I,ACTION=POST,TEST=((W,2,5,'M×JOB','
 ×                                                               ×
 ×                                                               ×
 × Figure 2.  Sample CLIST for OSWAIT.                           ×
 +---------------------------------------------------------------+


































                              - 22 -


 +---------------------------------------------------------------+
 ×    PROC 1 JNAME                                               ×
 ×   /***********************************************************×*/
 ×   /* THIS CLIST WILL DISPLAY ALL JOBS THAT START WITH A GIVEN ×*/
 ×   /* CHARACTER STRING. THE STRING IS PASSED TO THE CLIST AS A ×*/
 ×   /* PARAMETER. THE CLIST WILL ISSUE A OSCMD $DN, AND SCAN THE×*/
 ×   /* OUTPUT FOR JOBS THAT START WITH THE GIVEN STRING.        ×*/
 ×   /***********************************************************×*/
 ×                                                               ×
 ×   SET MAXCMDOUT = 200                                         ×
 ×   /***********************************************************×*/
 ×   /* WE WISH TO TRAP AS MANY LINES OF OUTPUT AS JES WOULD CARE×*/
 ×   /* TO PROVIDE, THEREFORE, SET MAXCMDOUT TO THE MAX - 200    ×*/
 ×   /***********************************************************×*/
 ×                                                               ×
 ×   SET CMDWAIT = 1                                             ×
 ×   /***********************************************************×*/
 ×   /* THE JES COMMAND SHOULD ONLY TAKE 1 SECOND OR LESS, SO    ×*/
 ×   /* SET THE CMDWAIT VARIABLE TO 1.                           ×*/
 ×   /***********************************************************×*/
 ×                                                               ×
 ×   OSCMD $DN                                                   ×
 ×   /***********************************************************×*/
 ×   /* ISSUE THE $DN JES COMMAND. THIS WILL POPULATE CLIST VARS ×*/
 ×   /* WITH THE OUTPUT FROM THIS COMMAND.                       ×*/
 ×   /***********************************************************×*/
 ×                                                               ×
 ×   /***********************************************************×*/
 ×   /* SINCE THE OSCMD COMMAND ALWAYS RETURNS AN ECHO OF THE    ×*/
 ×   /* COMMAND AS THE FIRST LINE, START WITH THE SECOND LINE.   ×*/
 ×   /***********************************************************×*/
 ×   SET I = 2                                                   ×
 ×   SET COUNT = 0                                               ×
 ×                                                               ×
 ×                                                               ×
 × Figure 3.  CLIST EXJOBS:  (Continued on next page)            ×
 +---------------------------------------------------------------+




















                              - 23 -


 +---------------------------------------------------------------+
 × /*************************************************************×
 × /* WE NEED TO LOOP BETWEEN THE SECOND LINE, AND THE "LAST"   *×
 × /* LINE, CONVENIENTLY STORED IN &CMDOUT VARIABLE.            *×
 × /*************************************************************×
 × DO WHILE (&I <= &CMDOUT - 1)                                  ×
 × /*************************************************************×
 × /* NOTE THAT THE $DN RESPONSE INCLUDES THE SPOOL UTILIZATION *×
 × /* AS THE LAST LINE. WE WILL IGNORE IT.                      *×
 × /*************************************************************×
 ×                                                               ×
 × SET LJNAME = &LENGTH(&JNAME)                                  ×
 ×                                                               ×
 × /*************************************************************×
 × /* THE JOBNAME IS RETURNED IN THE SECOND WORD OF EACH LINE.  *×
 × /*************************************************************×
 × SET JESJOB = &&CMDOUT&I.W2                                    ×
 ×                                                               ×
 × IF &SUBSTR(1:&LJNAME,&JESJOB) = &JNAME THEN +                 ×
 × DO                                                            ×
 × /*************************************************************×
 × /* WE HAVE FOUND A JOBNAME THAT STARTS WITH THE JOB. WE WILL *×
 × /* DISPLAY THE ENTIRE LINE.                                  *×
 × /*************************************************************×
 ×          SET OUT = &STR(&&CMDOUT&I)                           ×
 ×          WRITE &STR(&OUT)                                     ×
 ×          SET COUNT = &COUNT + 1                               ×
 × END                                                           ×
 ×                                                               ×
 × SET I = &I + 1                                                ×
 × END                                                           ×
 ×                                                               ×
 × WRITE &COUNT JOBS FOUND.                                      ×
 × EXIT CODE(0)                                                  ×
 ×                                                               ×
 ×                                                               ×
 × Figure 3, cont'd.  CLIST EXJOBS                               ×
 +---------------------------------------------------------------+



















                              - 24 -


 +---------------------------------------------------------------+
 ×                                                               ×
 ×   PROC 0                                                      ×
 ×   /***********************************************************×
 ×   /* THIS CLIST WILL ISSUE A JES2 COMMAND TO DISPLAY TO      *×
 ×   /* SPOOL UTILIZATION. IF THE SPOOL UTILIZATION IS          *×
 ×   /* ABOVE 80%, THE CLIST WILL ISSUE A HILIGHTED MESSAGE     *×
 ×   /* TO THE OPERATOR. OTHERWISE, IT WILL ISSUE AN ORDINARY   *×
 ×   /* MESSAGE INDICATING HOW BUSY THE SPOOL IS. IT UTILIZES   *×
 ×   /* THE COMMAND TRAPPING FACILITIES IN TSSO 4.3             *×
 ×   /*                                                         *×
 ×   /***********************************************************×
 ×                                                               ×
 ×   /***********************************************************×*/
 ×   /* THE FIRST STEP IS THE SETTING OF MAXCMDOUT. SINCE THE    ×*/
 ×   /* EXPECTED COMMAND RESPONSE IS 3 LINES, WE SET MAXCMDOUT = ×*/
 ×   /***********************************************************×*/
 ×   SET MAXCMDOUT = 3                                           ×
 ×                                                               ×
 ×   /***********************************************************×*/
 ×   /* NEXT, WE DECIDE HOW LONG THE CLIST SHOULD WAIT FOR THE   ×*/
 ×   /* COMMAND. 1 SECOND IS PLENTY FOR THIS JES COMMAND.        ×*/
 ×   /***********************************************************×*/
 ×   SET CMDWAIT = 1                                             ×
 ×                                                               ×
 ×   /***********************************************************×*/
 ×   /* NOW THAT THE TWO INPUT VARIABLES ARE SET UP, WE WILL     ×*/
 ×   /* ISSUE THE OSCMD COMMAND. THE RESPONSE WILL BE PLACED IN  ×*/
 ×   /* CLIST VARIABLES.                                         ×*/
 ×   /***********************************************************×*/
 ×            OSCMD $DSPOOL                                      ×
 ×                                                               ×
 ×   /***********************************************************×*/
 ×   /* THE EXPECTED COMMAND RESPONSE LOOKS LIKE THIS.           ×*/
 ×   /* $DSPOOL                                                  ×*/
 ×   /* $HASP646 XX PERCENT SPOOL UTILIZATION.                   ×*/
 ×   /*                                                          ×*/
 ×   /* NOTE THAT LINE1 IS ALWAYS AN ECHO OF THE ORIGINAL COMMAND×*/
 ×   /***********************************************************×*/
 ×                                                               ×
 ×                                                               ×
 × Figure 4.  CLIST EXCKSPL:  (Continued on next page)           ×
 +---------------------------------------------------------------+














                              - 25 -


 +---------------------------------------------------------------+
 ×                                                               ×
 × /*************************************************************×
 × /* IF WE DO NOT GET BACK AT LEAST 2 LINES OF RESPONSE, THEN  *×
 × /* AN ERROR HAS OCCURRED. WRITE A MESSAGE TO THE OPERATOR    *×
 × /* AND TERMINATE.                                            *×
 × /*************************************************************×
 ×          IF &CMDOUT < 2 THEN +                                ×
 ×          DO                                                   ×
 ×            OSWTOH PROBLEM WITH THE CHKSPL COMMAND - CONTACT SU×PORT
 ×            EXIT CODE(12)                                      ×
 ×          END                                                  ×
 ×                                                               ×
 × /*************************************************************×
 × /* ASSUMING EVERYTHING WENT OK WITH THE COMMAND, THE RESPONSE*×
 × /* IS RETURNED IN THE SECOND WORD OF THE SECOND LINE OF THE  *×
 × /* MESSAGE. TSSO HAS ALREADY PARSED THE MESSAGE. WE PICK UP  *×
 × /* THE UTILIZATION.                                          *×
 × /*                                                           *×
 × /*************************************************************×
 ×          SET UTIL = &CMDOUT2W2                                ×
 ×                                                               ×
 ×                                                               ×
 × /*************************************************************×
 × /* NOW, WE LOOK AT THE SPOOL UTILIZATION, AND DETERMINE IF   *×
 × /* IT IS GREATER THE 80%. IF SO, SEND A HILIGHTED MESSAGE.   *×
 × /*                                                           *×
 × /*************************************************************×
 ×          IF &UTIL > 80 THEN +                                 ×
 ×          DO                                                   ×
 ×             OSWTOH SPOOL UTILIZATION IS &UTIL - CONTACT JES2 S×PPORT
 ×          END                                                  ×
 ×          ELSE +                                               ×
 ×          DO                                                   ×
 ×             OSWTO  SPOOL UTILIZATION IS &UTIL PERCENT.        ×
 ×          END                                                  ×
 ×                                                               ×
 ×                                                               ×
 × Figure 4, cont'd.  CLIST EXCKSPL                              ×
 +---------------------------------------------------------------+

















                              - 26 -


 +---------------------------------------------------------------+
 ×                                                               ×
 ×             PROC 0                                            ×
 ×   /***********************************************************×*/
 ×   /* THIS CLIST WILL START THE ADDRESS SPACES RELATING TO     ×*/
 ×   /* VTAM. THESE INCLUDE NCCF, VPS AND OMEGAMON. THIS CLIST   ×*/
 ×   /* IS NORMALLY KICKED OFF AT IPL TIME BY AN AOF TABLE ENTRY ×*/
 ×   /* SUCH AS THE FOLLOWING                                    ×*/
 ×   /*                                                          ×*/
 ×   /*        TABENTRY MSG=IST020I,ACTION=OSCMD,TEXT=#STRTVTAM  ×*/
 ×   /*                                                          ×*/
 ×   /* THE IST020I MESSAGE IS FOR VTAM INITIALIZATION COMPLETED.×*/
 ×   /*                                                          ×*/
 ×   /*                                                          ×*/
 ×   /***********************************************************×*/
 ×   /***********************************************************×*/
 ×   /* NOTE THAT WE ARE NOT INTERESTED IN GETTING THE RESPONSE  ×*/
 ×   /* BACK TO ANY OF THESE MVS COMMANDS. THEREFORE, WE DO NOT  ×*/
 ×   /* SET THE MAXCMDOUT OR CMDWAIT VARIABLES.                  ×*/
 ×   /***********************************************************×*/
 ×             OSCMD $SLOGON1       /* START JES/VTAM CONNECT */ ×
 ×                                                               ×
 ×             OSCMD START TSO      /* START TSO              */ ×
 ×                                                               ×
 ×             OSCMD START NCCF     /* START NCCF             */ ×
 ×                                                               ×
 ×             OSCMD S OMVTAM,PREFIX='OMEGA.V652',APPL=OMR4      ×
 ×                                                               ×
 ×                                                               ×
 ×             OSCMD START GDDMPRT           /* START ADMPRT ADDR×SS SPC
 ×                                                               ×
 ×             OSCMD START VPS               /* AND START VPS AS ×ELL
 ×             OSPAUSE 5                     /* DELAY 5 SECONDS  ×
 ×             OSCMD VARY NET,ACT,ID=VPS     /* AND VARY IN TO VT×M
 ×             WRITE                                             ×
 ×             OSWTOH IPL0004I NETWORKING ADDRESS SPACES HAVE BEE×
 ×             OSWTOH IPL0004I (CONT) STARTED.                   ×
 ×                                                               ×
 ×                                                               ×
 ×                                                               ×
 × Figure 5.  CLIST EXSTVTAM                                     ×
 +---------------------------------------------------------------+















                              - 27 -


 +---------------------------------------------------------------+
 ×                                                               ×
 ×          PROC 0                                               ×
 ×          /****************************************************×
 ×          /* THIS CLIST WILL PROVIDE AN EXAMPLE OF THE OSASK  *×
 ×          /* FACILITY OF TSSO.                                *×
 ×          /****************************************************×
 ×                                                               ×
 ×          /* FIRST, FIND OUT IF THE OPERATOR IS READY TO PROCEE× */
 ×          /* SET A TIME LIMIT OF 30 SECONDS...                 × */
 ×          SET REPLYWAIT = 30                                   ×
 ×                                                               ×
 ×          STARTAGN: +                                          ×
 ×          OSASK ARE YOU READY TO PROCEED                       ×
 ×                                                               ×
 ×          IF &REPLY = NOREPLY THEN GOTO TIMEDOUT               ×
 ×          IF &REPLY = NO THEN GOTO ENDPROG                     ×
 ×          IF &REPLY = YES THEN GOTO CONFUSED                   ×
 ×                                                               ×
 ×          OSASK GREAT ! WHAT TASK(S) ARE YOU TRYING TO PERFORM ×
 ×                                                               ×
 ×          /* UP TO 6 ITEMS MAY BE ENTERED ON THE RESPONSE LINE.×THE */
 ×          /* OSASK COMMAND PARSES THE OPERATOR RESPONSE INTO CL×ST  */
 ×          /* VARIABLES. WE WILL LOOP THROUGH, SUPPLYING THE OPE×ATOR*/
 ×          /* WITH THE NEEDED ANSWERS.                          ×    */
 ×                                                               ×
 ×          IF &REPLY = NOREPLY THEN GOTO TIMEDOUT               ×
 ×          SET COUNT = &REPLYW                                  ×
 ×                                                               ×
 ×          SET I = 1                                            ×
 ×          DO WHILE (&I <= &COUNT)                              ×
 ×                                                               ×
 ×            SET VAR = &&REPLYW&I       /* GET THE I'TH WORD */ ×
 ×                                                               ×
 ×            IF &VAR = IPL THEN LIST 'SYS1.HELPOPER(IPL)'       ×
 ×            ELSE IF &VAR = SHUTDOWN THEN LIST 'SYS1.HELPOPER(SH×TDOWN)
 ×            ELSE IF &VAR = STARTNET THEN LIST 'SYS1.HELPOPER(ST×RTNET)
 ×            /* MANY OTHER ENTRIES MAY BE PLACED HERE ...    */ ×
 ×                                                               ×
 × Figure 6.  CLIST EXASK:  (Continued on next page)             ×
 +---------------------------------------------------------------+
















                              - 28 -


 +---------------------------------------------------------------+
 ×                                                               ×
 ×          ELSE OSWTO   THERE IS NOT HELP FOR "&VAR"            ×
 ×                                                               ×
 ×          SET I = &I + 1                                       ×
 ×        END                                                    ×
 ×        GOTO  ENDPROG                                          ×
 ×                                                               ×
 ×        CONFUSED: +                                            ×
 ×          OSWTOH ANSWER YES OR NO...                           ×
 ×          GOTO STARTAGN                                        ×
 ×                                                               ×
 ×        TIMEDOUT: +                                            ×
 ×          OSWTO HELP FACILITY TIMING OUT  -  REINVOKE  WHEN  YO×
 ×AVE MORE                                                       ×
 ×          OSWTO TIME.                                          ×
 ×          GOTO  ENDPROG                                        ×
 ×                                                               ×
 ×        ENDPROG: +                                             ×
 ×          OSWTO GOODBYE.                                       ×
 ×          EXIT                                                 ×
 ×                                                               ×
 × Figure 6, cont'd.  CLIST EXASK                                ×
 +---------------------------------------------------------------+

 USING THE WRITE STATEMENT IN TSSO CLISTS
 _____ ___ _____ _________ __ ____ ______

 In  previous  releases of TSSO, operator commands and highlighted
 messages could only be issued using the WRITE statement with  the
 *COM and *HI keywords.  These facilities still work under release
 4.3,  and  CLISTs  written with them can be used unaltered.  How-
 ever, note that the difference between these facilities  and  the
 commands OSCMD, OSWTO, OSWTOH, and OSPAUSE is that TSSO processes
 *COM  and  *HI  directives AFTER the CLIST has completed, whereas
                            _____
 the TSSO commands will be executed IMMEDIATELY.  Care must there-
                                    ___________
 fore be taken in designing CLISTs with *COM and *HI, because  any
 TSO  commands  in  the CLIST are executed before any MVS commands
 are issued by TSSO.

 The  *COM  and  *HI  facilities  are   available   only   through
 TSSO-initiated CLISTs.

 *COM KEYWORD
 ____ _______

 The *COM keyword used in the WRITE statements also enables you to
 issue  MVS commands.   When an output line in the SYSTSPRT output
 stream (the output from the TSO command or CLIST) begins with the
 keyword "*COM", TSSO will execute the remainder of that statement
 as an MVS operator command.  The syntax of  this  extended  WRITE
 statement is







                              - 29 -


   WRITE *COMnnn oscmd
             ___ _____

      where

      nnn     is  a  delay factor directing TSSO to delay nnn sec-
      ___                                                 ___
              onds after processing the command.   This is  useful
              when  operating  system commands have a time depend-
              ency on each other.

      oscmd   is an MVS operator command to be executed.  The com-
      _____
              mand could be an MVS command, JES command,  or  even
              another TSSO command.  Note that THE COMMAND WILL BE
                                               ___ _______ ____ __
              EXECUTED WITH THE AUTHORITY OF THE CONSOLE THAT ORI-
              ________ ____ ___ _________ __ ___ _______ ____ ____
              GINALLY INVOKED THE TSSO COMMAND.
              _______ _______ ___ ____ ________

 *HI KEYWORD
 ___ _______

 The  *HI  keyword allows you to write highlighted messages on the
 MVS console.  The syntax is

   WRITE *HI message
             _______

 where message is the message to be highlighted on  the  MVS  con-
       _______
 sole.

































                              - 30 -



 GUIDELINES AND SUGGESTIONS FOR WRITING CLISTS
 __________ ___ ___________ ___ _______ ______

 1.  CLISTs  can  be used to write operator HELP procedures to the
     MVS console.  This is demonstrated in Figure 7 on page 31.

 2.  The REPLY command is useful in CLISTS to automate operational
     procedures with products that  communicate  to  the  operator
     through  the  WTOR interface (e.g., NCCF and IMS).  For exam-
     ple, if numerous NCCF commands are to be executed, these  can
     be executed in a TSSO CLIST using the REPLY command with mes-
     sage  ID DSI802A. See the description of the REPLY command in
     "Appendix A. TSSO Command Reference" on page 44.

 3.  Comments may be placed at the end of MVS commands because MVS
     treats them as MVS command comments.   However,  JES2  treats
     CLIST  comments  as data and tries to use them in forming the
     command.  Therefore, do not place CLIST comments on JES2 com-
     mands; place them on the lines following the  command.    For
     example,  the  following  CLIST  is  invalid because it would
     produce an invalid JES2 command.

 -----------------------------------------------------------------

       PROC 0
       OSCMD $TEXIT6,ENABLE        /* ENABLE THE EXIT */
       EXIT

 -----------------------------------------------------------------

     This situation is remedied in MVS/SP JES2 Release  1.3.6  and
     MVS/XA JES2 Release 2.1.5.

 4.  Symbolic  substitution can be used in TSSO CLISTS as shown in
     Figure 8 on page 32.

 5.  Since operations personnel will be using OPF, the recommenda-
     tion is to allow them to write their own CLISTS.

 6.  TSSO CLISTS are invoked in the same fashion as TSSO commands.
     The normal TSO search sequence is followed.  The  recommenda-
     tion  is to allocate a SYS1.TSSOPROC data set and allocate it
     to DDNAME SYSPROC in the TSSO bringup deck. The SYSPROC  data
     set  may  also be dynamically allocated through the TSO ALLO-
     CATE command. Lastly, the TSO EXEC command may be used to ex-
     ecute TSSO CLISTS.

 7.  Use OSWTOH and WRITE *HI with caution. Do not highlight  mes-
     sages unless their importance warrants it, because your oper-
     ations  staff  will learn to ignore highlighted messages, and
     this can be harmful to your overall system operations.






                              - 31 -


 +---------------------------------------------------------------+
 ×                                                               ×
 ×   PROC 0                                                      ×
 ×   /********************************************************/  ×
 ×   /* This CLIST will provide HELP information to the      */  ×
 ×   /* operator on the current status of the NJE LINES      */  ×
 ×   /* between JES2 systems                                 */  ×
 ×   /********************************************************/  ×
 ×   WRITE NJE LINK BETWEEN A and B is line 12                   ×
 ×   WRITE NJE LINK BETWEEN A and C is line 16                   ×
 ×   WRITE NJE LINK BETWEEN B and C is line 20                   ×
 ×   WRITE NJE LINK BETWEEN C and A is line 19                   ×
 ×   WRITE NJE LINK BETWEEN C and B is line 24                   ×
 ×   WRITE NJE LINK BETWEEN B and A is line 13                   ×
 ×   WRITE                                                       ×
 ×   WRITE This list is current as of January 3, 1985. For more  ×
 ×   WRITE assistance, contact Alan Grossman at extension 5555.  ×
 ×   EXIT CODE(0)                                                ×
 ×                                                               ×
 ×                                                               ×
 × Figure 7.  CLIST with an Operator Help Procedure              ×
 +---------------------------------------------------------------+



 +---------------------------------------------------------------+
 ×                                                               ×
 ×   PROC 2 UNIT VOLSER USE()                                    ×
 ×   /*****************************************/                 ×
 ×   /* This CLIST will mount MVS volumes     */                 ×
 ×   /* using a command in operator friendly  */                 ×
 ×   /* syntax. Note the optional USE         */                 ×
 ×   /* parameter.                            */                 ×
 ×   /*****************************************/                 ×
 ×   WRITE *COM3 VARY &UNIT,ONLINE                               ×
 ×   IF &USE = THEN +                                            ×
 ×   DO                                                          ×
 ×           WRITE *COM MOUNT &UNIT,VOL=(SL,&VOLSER)             ×
 ×   END                                                         ×
 ×   ELSE +                                                      ×
 ×   DO                                                          ×
 ×           WRITE *COM MOUNT &UNIT,VOL=(SL,&VOLSER),USE=&USE    ×
 ×   END                                                         ×
 ×   WRITE *HI MNT001I VOLUME &VOLSER NOW MOUNTED ON &UNIT       ×
 ×   WRITE *COM D U,,,&UNIT,1                                    ×
 ×   EXIT                                                        ×
 ×                                                               ×
 ×                                                               ×
 × Figure 8.  CLIST Using Symbolic Substitution                  ×
 +---------------------------------------------------------------+







                              - 32 -



 TSSO AUTOMATED OPERATIONS FACILITY
 ____ _________ __________ ________


 INTRODUCTION
 ____________

 A high percentage of MVS commands are issued in response to  sys-
 tem  or subsystem messages, and these responses are predetermined
 by the contents of the messages.  The TSSO  Automated  Operations
 Facility  (AOF) frees the MVS console operator from routine tasks
 by automating responses to system messages.    AOF  is  a  table-
 driven  monitor  that  intercepts messages and carries out one of
 four actions:  suppresses, highlights, or lowlights the  message;
 or  issues  an  MVS, JES2 or subsystem command.  Because AOF does
 not require the services of the TSSO address space, any number of
 messages can be processed simultaneously.

 There are three steps required to install this facility; briefly:

 1.  Create the AOF table.

 2.  Assemble and link-edit the table into load module format.

 3.  Store the module in SYS1.TSSOLOAD.

 These steps are described in detail below.

 Note that the table can be updated at any time.   Also,  you  may
 create  multiple  tables,  although  only  one can be active at a
 time.  Multiple tables may be useful so that  different  sets  of
 commands  can be used at different times (e.g., first, second and
 third shifts).  You can change the active table in three ways:

 1.  By changing the TABLE= parameter in the parameter  deck;  the
     new table will be available the next time TSSO is brought up.

 2.  By  dynamically  reloading the table with the "#.RELOAD" com-
     mand; the new table will be available immediately.

 3.  By resetting the MATCHLIM parameter of any entry in  the  ac-
     tive  AOF  table  with  the  ALTAOF command; the new MATCHLIM
     value will be effective immediately.















                              - 33 -



 CREATING THE AOF TABLE
 ________ ___ ___ _____

 There are three macros required to create the table:  TABSTART to
 start the table, TABENTRY to specify  actions  on  messages,  and
 TABEND to end the table.

 TABSTART  is  always  the  first  macro and can be specified only
 once.  It takes the form

   loadname TABSTART ID=table-id
   ________             ________

 where loadname is the name of this TSSO table and table-id is  an
       ________                                    ________
 eye-catching name to identify the table in a dump.  table-id will
                                                     ________
 also be displayed on the DISPAOF and .Q T commands.  The loadname
                                                          ________
 label is used as the CSECT name and must be used as the load mod-
                                     ____
 ule name.

 TABEND is always the last macro, signifying the end of the table.
 TABEND  must be present; otherwise, unpredictable things may hap-
 pen, none of them pleasant.

 TABENTRY  macros  are  entered  between  TABSTART   and   TABEND.
 TABENTRY  macros  generate  entries in the AOF table and take the
 form

   entry-id TABENTRY MSG=msg-id,ACTION=action[,TEXT='operator-cmd']
   ________              ______        ______        ____________
                                             [,TEXT=(condition)]
                                                     _________
                                             [,MATCHLIM=n]
                                                        _
                                             [,ECHO=[YES/NO/LOG]]

 A sample AOF table, demonstrating most  of  the  capabilities  of
 TSSO/AOF  and  all  forms  of  the  TABENTRY  macro,  is  in  the
 TSSO.VERS43.ASM data set in member AOFIVP.

 TABENTRY OPERANDS
 ________ ________

 THE ENTRY-ID OPERAND
 ___ ________ _______

 Entry-id is a 1- to 8-character identifier for each AOF table en-
 ________
 try.  The ID allows you to identify entries by name  rather  than
 position  in  the  table  to  the  commands  OSWAIT, DISPAOF, and
 ALTAOF.

 THE MSG OPERAND
 ___ ___ _______

 MSG identifies an MVS, JES2, or subsystem message as  defined  in
 MVS/XA  SYSTEM  MESSAGES  (GC28-1376  and  -1377)  or its MVS/370
 ______  ______  ________
 equivalent.  msg-id is the first seven or eight characters of the
              ______
 console message.  msg-id may also be an asterisk (*), which  will
                   ______







                              - 34 -


 match on all console messages.  MSG=* is useful with the TEST op-
 erand described later.

 THE ACTION OPERAND
 ___ ______ _______

 The  following actions may be taken in response to the identified
 message:

 1.  SUPPRESS (I.E., DO NOT PRINT) THE  MESSAGE  AT  THE  CONSOLE.
     ________ ______ __ ___ ______ ___  _______  __  ___  ________
     The macro takes the form

       entry-id TABENTRY MSG=msg-id,ACTION=SUPPRESS
       ________              ______

 2.  HIGHLIGHT  THE  MESSAGE  AT THE CONSOLE.   This is useful for
     _________  ___  _______  __ ___ ________
     highlighting important messages.  The macro takes the form

       entry-id TABENTRY MSG=msg-id,ACTION=HILIGHT
       ________              ______

 3.  LOWLIGHT THE MESSAGE AT THE CONSOLE.  This reverses  the  in-
     ________ ___ _______ __ ___ ________
     tensity  of  MVS messages that are automatically highlighted.
     The macro takes the form

       entry-id TABENTRY MSG=msg-id,ACTION=LOWLIGHT
       ________              ______

 4.  REPLY TO A WRITE TO OPERATOR WITH REPLY (WTOR) MESSAGE.   The
     _____ __ _ _____ __ ________ ____ _____ ______ _______
     macro takes the form

       entry-id TABENTRY MSG=msg-id,ACTION=REPLY,TEXT='reply-text'
       ________              ______                   ____________

     where reply-text is the text of the reply; TSSO will automat-
           __________
     ically format the reply message as R msg-no,reply-text.  Note
                                          __________________
     that msg-id must be a WTOR message.
          ______

 5.  ISSUE  AN  OPERATOR  COMMAND IN RESPONSE TO A MESSAGE AND EX-
     _____  __  ________  _______ __ ________ __ _ _______ ___ ___
     TRACT PART OF THE MESSAGE TO USE IN THE COMMAND.   The  macro
     _____ ____ __ ___ _______ __ ___ __ ___ _______
     takes the form

       entry-id TABENTRY MSG=msg-id,ACTION=OSCMD,TEXT='operator-cmd'
       ________              ______                   ______________

     operator-cmd  can  be an MVS command, JES2 command, TSSO com-
     ____________
     mand, or TSSO CLIST.   Rules for coding  TEXT  are  described
     later.

 6.  PRINT  AN OPERATOR COMMAND AT THE CONSOLE RATHER THAT EXECUTE
     _____  __ ________ _______ __ ___ _______ ______ ____ _______
     IT. This allows you to test an operator command that  results
     ___
     from  a  TABENTRY  before executing it.   The macro takes the
     form

       entry-id TABENTRY MSG=msg-id,ACTION=OSCMDT,TEXT='operator-cmd'
       ________              ______                    ______________

     The rules are the same as for OSCMD above.






                              - 35 -


 7.  POST A "WAITING TASK" THAT A MESSAGE OCCURRED.
     ____ _ ________ _____ ____ _ _______ _________

       entry-id TABENTRY MSG=msg-id,ACTION=POST
       ________              ______

     Posting supports the OSWAIT command (see "The OSWAIT Command"
     on page 19).



















































                              - 36 -


 8.  CARRY OUT THE SPECIFIED ACTION IF AND  ONLY  IF  THE  MESSAGE
     _____ ___ ___ _________ ______ __ ___  ____  __  ___  _______
     MEETS  CERTAIN  CONDITIONS, such as matching a particular job
     _____  _______  ___________
     name.  To do this, include the TEST operand in your  TABENTRY
     macro as follows:

       entry-id TABENTRY MSG=msg-id,ACTION=actionTEST=(condition)
       ________              ______        ______      _________
                         [TEXT='operator-cmd']
                                ____________

     where condition tests portions of the message by substring or
           _________
     word.  Rules for coding the TEST operand are described later.

     NOTE:       TEXT can only be used if ACTION=OSCMD, OSCMDT, or
     REPLY.

 There is no limit on the number of TABENTRY macros  that  may  be
 specified  in  a given AOF table. Note that TSSO will process ALL
                                                               ___
 of the entries in the TSSO/AOF table for every WTO or  WTOR  mes-
 sage.   This implies that multiple ACTION= operands may be speci-
 fied for the same msg-id, by specifying multiple TABENTRY macros.
                   ______
 TSSO does not stop processing one ACTION= directive, but  contin-
 ues until the end of the table.

 THE TEXT OPERAND
 ___ ____ _______

 The  OSCMD action allows you to specify an operator command to be
 performed in response to a particular message.   Optionally,  you
 may  select one or more portions of the message to include in the
 command.  entry-id This is useful for extracting a data set name,
           ________
 job name, or other variable information from a message and embed-
 ding it in the command  to  be  executed.    The  two  formatting
 options  in the TEXT parameter allow you to extract this informa-
 tion by substring or by word.

 To select information by substring, use the format

   \Snnn,yy\
     ______

 where nnn is the starting character position and yy is the number
       ___                                        __
 of characters to select.  For example, suppose you want to record
 the text of /*MESSAGE cards whenever they are encountered in  the
 job stream.  JES2 issues a $HASP104 message, and you want to cap-
 ture  characters  1  through  72 of the card.  Thus, the TABENTRY
 would look like this:

   entry-id TABENTRY MSG=$HASP104,ACTION=OSCMD,TEXT='#RECMSG MSG(''\S001
   ________

 Note that nnn must be left-padded with zeroes.
           ___

 To select information by word, use the format

   \Wabcdnn
     ______






                              - 37 -


 where a, b, c, and d define the word separator characters, and nn
       __ __ __     _                                           __
 identifies the word's position.  A word can be a  maximum  of  16
 characters.  For example, given the message

   IEF176I WTR 1A4 WAITING FOR WORK ...

 you might want to purge the writer 1A4 with the command

   PURGE 1A4

 To  do this, you want to extract the third word from the message,
 which identifies the external writer name.   Thus,  the  TABENTRY
 macro would look like this:

   entry-id TABENTRY MSG=IEF176I,ACTION=OSCMD,TEXT='PURGE \W    03\'
   ________

 Note that if you do not need to define four separator characters,
 you must pad the field with blanks.  Also, nn must be left-padded
                                            __
 with a zero.

 Multiple "S" and "W" options can be used in one TEXT operand.  If
 AOF  detects an error in the TEXT parameter as a result of a S or
 W option, a message is issued and processing is terminated.

 THE TEST OPERAND
 ___ ____ _______

 The TEST operand allows you to respond selectively to messages by
 "testing" the text.  For example, when payroll jobs complete, you
 may want to highlight the message, whereas  you  want  to  ignore
 other  job  completion messages.   The TEST operand allows you to
 match on message text by substring or word.

 To match by substring, use the format

   (S,nnn,yy,'literal-string')
      _______________________

 where you want to find the character string literal-string start-
                                             ______________
 ing in character position nnn for a length of yy characters.  For
                           ___                 __
 example, (S,32,07,'PAYROLL') would look for PAYROLL in  character
 positions 32 through 38.

 To match by word order, use the format

   (W,nn,yy,'literal-string','abcd')
      _____________________________

 where  you  want  to  find the character string literal-string as
                                                 ______________
 word number nn with a word length of yy characters; and a, b,  c,
             __                       __                 __ __  __
 and  d  define  the  word  separator  characters.    For example,
      _
 (W,03,07,'PAYROLL',', ') would look for PAYROLL as the third word
 with seven characters separated by blanks or commas.







                              - 38 -


 Thus, the whole TABENTRY macro for our example could be either

   entry-id TABENTRY MSG=$HASP395,ACTION=HILITE,TEST=((S,32,07,'PAYROLL'
   ________

 or

   entry-id TABENTRY MSG=$HASP395,ACTION=HILITE,TEST=((W,03,07,'PAYROLL'
   ________

 It is possible to test on all WTO or WTOR messages by  specifying
 MSG=*.   For example, if you want to highlight all JES end-of-day
 messages, you would test for a first word of $HASP and  a  second
 word (i.e., job name) of ENDOFDAY.  The TABENTRY macro would look
 like this:

   entry-id TABENTRY MSG=*,ACTION=HILIGHT,TEST=((W,1,5,'$HASP',' '),
   ________
                     (W,2,7,'ENDOFDAY'))

 NOTES ON THE TEST OPERAND

 1.    EACH  TEST  CONDITION, AS WELL AS THE ENTIRE TEST PARAMETER
     LIST, MUST BE ENCLOSED IN PARENTHESES.

 2.  There are multiple way to do the same test, as shown  in  the
     examples  above.  However, it is generally easier to match on
     words rather than substrings.

 3.  "Logical and" and "logical or" test conditions  can  be  con-
     structed with the TEST operand.

     a.  To  construct a "logical and", specify all the conditions
         to be met in one TEST operand:

           TEST=((condition1),(condition2),(condition3))
                  ____________________________________

     b.  To construct a "logical or",  specify  multiple  TABENTRY
         macros  with  the same MSG, ACTION, and TEXT operands but
         with different TEST operands:

           TABENTRY MSG=msg-id,ACTION=action,TEST=((condition1))
                        ______        ______

           TABENTRY MSG=msg-id,ACTION=action,TEST=((condition2))
                        ______        ______

           TABENTRY MSG=msg-id,ACTION=action,TEST=((condition3))
                        ______        ______

 4.  When using the TEST operand, TABENTRY  macros  can  be  quite
     lengthy.   To continue a macro on the next line, enter an "X"
     in column 72.   Since the TABENTRY  macro  follows  the  con-
     ventions  for  the IBM assembler language, the next line in a
     continuation must start in column 16. Note that blank charac-
     ters are not permitted, except if they are  inside  quotation
     marks.






                              - 39 -


 5.  The first word in the message is usually the message ID.  The
     first  column  position is the first character in the message
     ID.

 THE MATCHLIM OPERAND
 ___ ________ _______

 MATCHLIM specifies the  maximum  number  of  times  a  particular
 action can be executed.  When the MATCHLIM value is exceeded, the
 AOF  table entry is ignored.  Note that the MATCHLIM value may be
 reset with the ALTOF command.

 For example, if VTAM crashes, you may want TSSO to  issue  a  re-
 start  command  immediately but you also want to limit the number
 of restarts in the event VTAM has a serious problem that  is  not
 solved by a restart.  The following entry will restart VTAM up to
 three times after it goes inactive.

   entry-id TABENTRY MSG=1ST002I,ACTION=OSCMD,TEXT='START NETWORK',
   ________
                      ECHO=YES,MATCHLIM=3

 THE ECHO OPERAND
 ___ ____ _______

 Specifying  ECHO=YES  will  echo the command or reply of the TEXT
 operand to the console before the action is executed.  Specifying
 ECHO=LOG will echo the command or reply in the system log.   This
 provides  a  level  of  TSSO  accountability.    The  default  is
 ECHO=YES.

 ASSEMBLING AND LINK-EDITING THE TABLE
 __________ ___ ____________ ___ _____

 Release 4.3 provides a sample  CLIST  for  assembling  and  link-
 editing the TSSO AOF table.  The CLIST makes the job of placing a
 new  AOF  table in production less cumbersome.  You will probably
 need to modify ASMTAB for your installation.  Its syntax is

   ASMTAB table-name [RELOAD]
          __________

 The CLIST can assemble a moderately sized  table,  link-edit  the
 result,  and copy the resulting load module into SYS1.TSSOLOAD in
 about  10  seconds.    The  RELOAD  parameter  will   issue   the
 TSSO #.RELOAD command upon successful assembly and link-edit.

 Alternately,  you can submit a batch job similar to the sample in
 the TSSO.VERS43.ASM data set, member ASMTABLE.  You may tailor  a
 copy of this data set to your specifications as follows:

 1.  Include the appropriate installation-dependent information on
     the JOB card.

 2.  Change the SYSIN DD card to point to your AOF table.







                              - 40 -


 3.  Change  the load library name in the LKED.SYSLMOD step to one
     of your choice (e.g., TSSO.VERS43.LOAD).

 4.  Change the NAME statement in the linkage editor control cards
     to match the label on the TABSTART macro in your AOF table.

 Note that the Assembler parameters RENT and NOALIGN MUST be pres-
                                                     ____
 ent.

 A return code of 0 indicates that the assembly was successful.

 WARNING:       UNDER NO CIRCUMSTANCES ATTEMPT TO LOAD A TABLE  IF
              EITHER   THE  ASSEMBLY  OR  LINK  RETURN  CODES  ARE
              NON-ZERO.

 STORING THE MODULE
 _______ ___ ______

 When the table assembly is successful, copy the load module  from
 TSSO.VERS43.LOAD   (or   the   appropriate  data  set)  into  the
 SYS1.TSSOLOAD data set.  To activate the new AOF table,  use  the
 procedures as described previously in this document.




































                              - 41 -



 TSSO NETWORK COMMUNICATION CONTROL FACILITY INTERFACE
 ____ _______ _____________ _______ ________ _________

 The  Network Communication Control Facility (NCCF) is an IBM pro-
 gram  product  that  provides  network  control  in  ACF/VTAM  or
 ACF/TCAM  environments.  Through the addition of an OSCMD command
 processor, NCCF allows a network operator to issue MVS, JES2,  or
 subsystem  commands  and to retrieve responses at the NCCF termi-
 nal.  The NCCF version of OSCMD is a completely  separate  entity
 from  the  TSO  version.   The command installs directly into the
 NCCF load library, or a concatenated data set, and is defined  to
 NCCF in the DSICMD member of the NCCF parameter data set.

 NOTES ON THE NCCF INTERFACE
 _____ __ ___ ____ _________

 o   The  NCCF  and  TSO  versions of OSCMD share the same pool of
     subsystem consoles.  When defining the NUMCONS parameter (see
     "NUMCONS Parameter" on page 10) it is important  to  consider
     the number of simultaneous NCCF users that will be using TSSO
     facilities.

 o   Although OSCMD runs with APF authority, NCCF does not require
                                                  ____ ___
     APF  authorization  with this facility.   TSSO grants APF au-
     thorization to the NCCF version of OSCMD  through  MVS  cross
     memory  services.  The operator command #.Q XMEM monitors the
     cross memory service environment.  A debug option displays  a
     message  when  the  NCCF version of OSCMD has called the TSSO
     cross memory services routine.

 o   TSSO assumes that all NCCF users are authorized to issue  MVS
     master  console commands.  The NCFOSATH user exit is provided
     for coding a routine to alter  the  default.    The  exit  is
     passed the NCCF user identifier.

 o   The  TSSO/NCCF  OSCMD  facility fully supports the NCCF ROUTE
     command.  This allows remote operators to route MVS, JES2, or
     subsystem commands to remote systems and to retrieve the  re-
     sponses.   This facility makes it possible for an operator to
     control (or at least monitor) many MVS hosts  from  one  NCCF
     console.

















                              - 42 -



 RECOVERY PROCEDURES
 ________ __________

 TSSO  operates  as a proper subsystem under MVS. Because of this,
 it can run without support of a Job Entry Subsystem  or  communi-
 cations  subsystem.   Therefore, TSSO will initialize even if JES
 or VTAM will not.  Through the use of several command processors,
 TSSO provides facilities for repairing critical MVS files or load
 modules in the event a subsystem does not initialize.

 The EF command allows the MVS console  operator  to  perform  TSO
 edit  commands  on the file allocated to DDNAME "EDITFILE".  This
 DDNAME could have been pre-allocated through  the  ALLOCATE  com-
 mand.  The syntax of the EF command is

   EF (;cmd1;cmd2;cmd3...;cmdn)
        ______________________

 where cmd1 ...cmdn are TSO EDIT commands.
       ____ _______

 The PDS command(6) allows you to rename, delete or otherwise  ma-
 nipulate  members of a partitioned data set.  The PDS command of-
 fers a wide range of facilities and can be used to recover from a
 variety of subsystem problems.  You are encouraged  to  obtain  a
 copy  of  the PDS command (Version 7.3) from the Connecticut Bank
 and Trust (CBT) mods tape.

 Lastly, you can also use the standard TSO facilities, such as the
 ALLOCATE command, to correct JCL or other  initialization  errors
 in  major subsystems.   The full range of TSO commands are avail-
 able to assist in problem resolution.

















 ----------------

 6   A  public  domain TSO facility rewritten by Bruce Leland from
     Cambridge Systems.






                              - 43 -



 APPENDIX A. TSSO COMMAND REFERENCE
 ________ __ ____ _______ _________

 This appendix describes the TSO command processors that are  dis-
 tributed  with  TSSO.    Unless  otherwise  noted,  these command
 processors can be issued by TSO users as well as the TSSO subsys-
 tem.   The commands are documented  one-to-a-page  for  easy  in-
 sertion into existing operator procedure books.

















































 ALTAOF                  TSSO User's Guide                  ALTAOF



 NAME:  ALTAOF
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      ALTOAF dynamically resets the MATCHLIM value for a given AOF
      table  entry.    Note that resetting the MATCHLIM value to 0
      effectively deletes the entry.

 SYNTAX
 ______

   ALTAOF ENTRY(entry-id) MATCHLIM(matchlim-value)
               __________          ______________
                              or
                             MLIM(matchlim-value)
                                  ______________

 PARAMETERS
 __________

      entry-id         A 1- to 8-character ID for a TSSO/AOF table
      ________
                       entry for which the MATCHLIM value will  be
                       changed.

      matchlim-value   New MATCHLIM value.
      ______________

 EXAMPLES
 ________

      EXAMPLE 1.   Reset  the  MATCHLIM value to 4 for the labeled
                   "VTAMUP" entry in the active AOF table.

                     ALTAOF ENTRY(VTAMUP) MATCHLIM(4)

      EXAMPLE 2.   Delete the labeled "OFFLINE" entry in  the  ac-
                   tive AOF table.

                     ALTAOF ENTRY(OFFLINE) MATCHLIM(0)





















 CACHE                   TSSO User's Guide                   CACHE



 NAME:  CACHE
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      The   CACHE  command  controls  the  operation  of  3880-11,
      3880-21, 3880-13 or 3880-23 cache devices from the MVS  con-
      sole.    As distributed by IBM, software support for control
      of these devices is contained in the IDCAMS  program  avail-
      able  with  MVS;  the MVS console operator cannot control or
      even query the device.   The CACHE command  will  format  an
      IDCAMS  command,  attach IDCAMS, and write the results using
      the PUTLINE interface.  When issued under  TSSO,  these  re-
      sults are then displayed on the MVS console.

 SYNTAX
 ______

        CACHE cache-device [action] [SUBSYS] [LEGEND]
              ____________  ______

 PARAMETERS
 __________

      cache-device   A 3-digit UCB address or a 6-character volume
      ____________
                     serial.

      action         Action to be performed by the CACHE command:
      ______

                     ON       Format  the  appropriate IDCAMS com-
                              mand (SETCACHE) to  turn  the  cache
                              unit on.

                     OFF      Format  the  appropriate IDCAMS com-
                              mand (SETCACHE) to  turn  the  cache
                              unit off.

                     LIST     Format  a  LISTDATA  command to list
                              cache statistics (e.g., READ hit ra-
                              tio).

                     STATUS   (default) Provide  information  con-
                              cerning  the  current  status of the
                              cache device.

      SUBSYS         Provide information about the entire 3350  or
                     3380 string.

      LEGEND         Provide  a  verbose Description of the format
                     of the IDCAMS output.  (This is probably  in-
                     appropriate for display at the console.)







 CACHE                   TSSO User's Guide                   CACHE



 ISSUING OTHER IDCAMS COMMANDS WITH CACHE

      There  are  some  commands that you may want to issue to the
      cache controller through IDCAMS that are  not  supported  by
      this command.  For these occasions, an alternate form of the
      CACHE command is provided.

             CACHE * CMD('idcams-cmd')
                          __________

      where  idcams-cmd  is  any command accepted by IDCAMS.  This
             __________
      can be a cache command, such as BINDDATA, or a command  that
      has nothing to do with cache devices, such as LISTC.

      NOTE:  To  issue  these  commands under a TSO session, first
             execute the CLIST ALOCCACHE in TSSO.VERS43.ASM to al-
             locate the needed data sets.

 EXAMPLES
 ________

      EXAMPLE 1.  Turn on the cache device for the volume  at  UCB
                  263.

                    CACHE 263 ON

      EXAMPLE 2.  Turn off volume JESSPL to the cache device.

                    CACHE JESSPL OFF

      EXAMPLE 3.  Turn volume PGMPRO on to the cache device.

                    CACHE PGMPRO ON

      EXAMPLE 4.  Print  status  information  for the cache device
                  covering volume PGMPRO.

                    CACHE PGMPRO

      EXAMPLE 5.  Print status information for all volumes covered
                  by the cache device covering volume PGMPRO.

                    CACHE PGMPRO SUBSYS

      EXAMPLE 6.  Print statistics for the  cache  device  at  UCB
                  265.

                    CACHE 265 LIST

      EXAMPLE 7.  Issue  the  IDCAMS  LISTC command and return the
                  reply to the invoking console.







 CACHE                   TSSO User's Guide                   CACHE



                    CACHE * CMD('LISTC')























































 CPCMD                   TSSO User's Guide                   CPCMD



 NAME:  CPCMD
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      The CPCMD command allows the MVS operator of a  virtual  ma-
      chine  to  issue  CP commands on a VM/SP, VM/SP HPO or VM/XA
      system.   Any CP command of  the  appropriate  CP  privilege
      class  is allowed.   The response of the command is returned
      to the invoking console.  Note that this command  will  also
      function under TSO and return the response to the CP command
      to the invoking TSO user.

 SYNTAX
 ______

        CPCMD cp-cmd
              ______

 PARAMETERS
 __________

      cp-cmd    Any VM CP command.
      ______

 EXAMPLES
 ________

      EXAMPLE 1.  Issue  the CP QUERY NAMES command and return the
                  response to the invoking console.

                    CPCMD QUERY NAMES

      EXAMPLE 2.  Direct VM to attach the device  at  3F0  to  the
                  virtual  machine configuration at virtual device
                  3F0.

                    CPCMD ATTACH 3F0 * 3F0

                  Note that the device must also be varied on-line
                  by the MVS operator.   The MVS  virtual  machine
                  would  need command privilege class "B" to issue
                  this command.

















 DISPAOF                 TSSO User's Guide                 DISPAOF



 NAME:  DISPAOF
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      The DISPAOF command displays the contents of TSSO/AOF tables
      which control the operation of the TSSO Automated Operations
      Facility.  The DISPAOF command can query either  the  active
      TSSO/AOF table or a table that has been assembled and is re-
      siding  on  DASD.   By default, DISPAOF will display all en-
      tries in  the  running  TSSO/AOF  table.    The  information
      displayed  includes  the  TSSO/AOF table name, ID parameter,
      date and time assembled, and TSSO version number.  For  each
      message displayed, the table entry ID, MSG ID, ACTION direc-
      tive  and  ACTION  TEXT will be displayed.   TEST conditions
      will not be displayed unless the TEST  parameter  is  speci-
      fied.    Optionally,  the display can be limited to selected
      message IDs.

      Information about alternate TSSO/AOF tables can be displayed
      by using the table-name parameter.   Alternate  tables  must
                   __________
      previously  have  been  assembled and placed (in load module
      form) into the SYS1.TSSOLOAD dataset.

 SYNTAX
 ______

        DISPAOF [ENTRY(entry-id)] [MSG(msg-id)] [TABLE(table-name)] [TES
                       ________                        __________

 PARAMETERS
 __________

      ENTRY(entry-id)     A 1- to 8-character ID of  a  AOF  table
                          entry.    Note that DISPAOF will display
                          ALL entries that start  with  the  entry
                          identifier;  an  exact  match is not re-
                          quired (see examples).

      MSG(msg-id)         A 1- to 8-character  message  identifier
                          specified in the TSSO/AOF TABENTRY macro
                          MSG  parameter.   Note that DISPAOF will
                          display ALL entries that start with  the
                          message  identifier;  an  exact match is
                          not required (see examples).

      TABLE(table-name)   An alternate TSSO AOF table name.    The
                          table  must  previously have been assem-
                          bled and available to TSSO.

      TEST                For each message, display any TEST  con-
                          ditions that exist.






 DISPAOF                 TSSO User's Guide                 DISPAOF



 EXAMPLES
 ________

      EXAMPLE 1.  Display the running TSSO/AOF table with all mes-
                  sage IDs, action directives, and action text.

                    DISPAOF

      EXAMPLE 2.  Display  all entries in the running TSSO/AOF ta-
                  ble with a message ID of $HASP395.

                    DISPAOF MSG($HASP395)

      EXAMPLE 3.  Display all entries and all test  conditions  in
                  the running AOF table for message ID $HASP350.

                    DISPAOF MSG($HASP350) TEST

      EXAMPLE 4.  Display  all entries and all test conditions for
                  message IKT021D in load module AOFNEW.

                    DISPAOF MSG(IKT021D) TABLE(AOFNEW) TEST

      EXAMPLE 5.  Display all entries  in  the  active  AOF  table
                  starting with "VTAMUP".

                    DISPAOF ENTRY(VTAMUP)

      EXAMPLE 6.  Display  all  entries  in  the  active AOF table
                  with a message ID starting with "$HASP".

                    DISPAOF MSG($HASP)

























 LINKLIST                TSSO User's Guide                LINKLIST



 NAME:  LINKLIST
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      The LINKLIST command displays the list of the data  sets  in
      the  current MVS LNKLST concatenation.  This command is only
      valid in an MVS/XA environment, because the  information  is
      not available in MVS/370.

 SYNTAX
 ______

        LINKLIST










































 OSASK                   TSSO User's Guide                   OSASK



 NAME:  OSASK
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      OSASK  allows  you  to ask the operator a question and get a
      response.  If it is issued from a TSO command line, the  re-
      sponse  goes to the user's terminal.  If it is issued from a
      CLIST, the response goes to CLIST variables (see below).

 SYNTAX
 ______

        OSASK question
              ________

 PARAMETERS
 __________

      question    Question to be sent to the operator's console.
      ________

 CLIST VARIABLES
 _____ _________


      INPUT VARIABLES             DEFINITION
      _____ _________             __________

      REPLYWAIT         The number of seconds you are  willing  to
                        wait  for  a  reply to the question.  This
                        can be a value from 1 to  60;  default  is
                        60.


      OUTPUT VARIABLES            DEFINITION
      ______ _________            __________

      REPLY             Text of the reply to the question.

      REPLYW            The  number of words in the operator's re-
                        ply.

      REPLYWn           The nth word of the reply.
                            _

 EXAMPLES
 ________

      EXAMPLE 1.  Ask the operator a question.

                    OSASK WHAT TIME IS SHUTDOWN?

      EXAMPLE 2.  Ask the operator to specify type  of  start  for
                  production system.

                    OSASK BCR001I SPECIFY START FOR PRODUCTION SYSTEM (W







 OSCMD                   TSSO User s Guide                   OSCMD



 NAME:  OSCMD
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      OSCMD  allows  you  to  issue  any  MVS command (JES2, VTAM,
      etc.).  If it is issued from a TSO  command  line,  the  re-
      sponse  is returned to the terminal.  If it is issued from a
      CLIST, the response can optionally go to the CLIST variables
      (see below).   Note  that,  when  OSCMD  is  issued  from  a
      TSSO-initiated  CLIST, OSCMD checks the authority of the in-
      voking console and only  permits  commands  of  that  level.
      When issued by a TSO user, OSCMD checks the installation au-
      thority  of  the user's ID.   By default, all TSO users have
      INFO-only authority; full authority can be granted on a per-
      user basis.  The installation can control access through the
      OSCMDATH user exit.

 SYNTAX
 ______

        OSCMD mvs-cmd
              _______

 PARAMETERS
 __________

      os-cmd      Any MVS command.
      ______

 CLIST VARIABLES
 _____ _________


      INPUT VARIABLES                    DEFINITION
      _____ _________                    __________

      CMDRESP=dest             Destination of OSCMD response:

                               CLIST   - return response to CLIST variab
                               TERM    - return response to TSO user's t
                               NOWHERE - discard the response

      CMDWAIT=nn               Maximum number of seconds  you  are
                               willing  to wait for the command to
                               finish.  nn is a value  from  1  to
                                        __
                               60;  default is 1 for nonCLIST exe-
                               cution.   If the CMDWAIT  value  is
                               exceeded,  the  only  response  re-
                               turned will be an echo of the  ori-
                               ginal  OSCMD.    If TSSO can detect
                               the  end  of  a  command   response
                               (e.g.,   responses  using  MLWTOs),
                               then OSCMD will not  need  to  wait
                               the full value of CMDWAIT.






 OSCMD                   TSSO User s Guide                   OSCMD



      MAXCMDOUT=nnn            Maximum number of lines of response
                               you want returned from the command.
                               nnn  is  a value from 1 to 200; de-
                               ___
                               fault  is  200  for  nonCLIST  exe-
                               cution.



















































 OSCMD                   TSSO User s Guide                   OSCMD



      OUTPUT VARIABLES              DEFINITION
      ______ _________              __________

      CMDOUT              The  number of lines returned in the re-
                          sponse.

      CMDOUTm             The mth line returned in  the  response.
                              _
                          m is a value from 1 to 200.
                          _
                          NOTE:   CMDOUT1 is always an echo of the
                          original command.

      CMDOUTmW            The number of words in the mth  line  of
                                                     _
                          the response.

      CMDOUTmWn           The  mth  line,  the nth word in the re-
                               _               _
                          sponse line.  n is a value from 1 to 20.
                                        _

 EXAMPLES
 ________

      See Figure 3 on page 22 through Figure 5 on page 26.





































 OSPAUSE                 TSSO User's Guide                 OSPAUSE



 NAME:  OSPAUSE
 _____

 DESCRIPTION
 ___________

      OSPAUSE delays processing of a  command  for  the  specified
      number  of seconds.  This is useful if the CLIST initiates a
      started task and must wait for it to initialize.

 SYNTAX
 ______

        OSPAUSE seconds
                _______

 PARAMETERS
 __________

      seconds   The number of seconds that the CLIST should be de-
      _______
                layed.

 EXAMPLES
 ________

      EXAMPLE 1.  Delay the CLIST 10 seconds.

                    OSPAUSE 10


































 OSWAIT                  TSSO User's Guide                  OSWAIT



 NAME:  OSWAIT
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      OSWAIT directs TSSO to wait for a particular system  message
      or  a  timeout limit to occur before proceeding.  These mes-
      sages are defined in the AOF table.  OSWAIT is  intended  to
      be issued from a CLIST.

      If  the  message  appears,  OSWAIT  gives a return code of 0
      (RC=0).  If OSWAIT was issued from a terminal,  the  message
      prints  at the terminal.  Otherwise, the CLIST variables are
      populated (see below).  If the message does  not  appear  by
      the timeout limit, OSWAIT gives a return code of 8 (RC=8).

 SYNTAX
 ______

        OSWAIT ENTRY(entry-id) TIMEOUT(nnnnn)
                     ________          _____

 PARAMETERS
 __________

      entry-id  The  1- to 8-character identifier of the AOF table
      ________
                entry.

      nnnnn     The number of second to wait before timeout, maxi-
      _____
                mum 86400 seconds.

 CLIST VARIABLES
 _____ _________


      OUTPUT VARIABLES              DESCRIPTION
      ______ _________              ___________

      WTO                 Text of the message

      WTOW                Number of words in the message

      WTOWn               Nth word of the message

 EXAMPLES
 ________

      EXAMPLE 1.  Wait 2 minutes for message IST020I to appear.

                    OSWAIT ENTRY(IST020I) TIME(120)











 OSWTO and OSWTOH        TSSO User's Guide        OSWTO and OSWTOH



 NAME:  OSWTO and OSWTOH
 _____

 AVAILABLE UNDER TSO:  No
 _________ _____ ____

 DESCRIPTION
 ___________

      OSWTO and OSWTOH allow you to write messages to  the  opera-
      tor's  console.   OSWTOH highlights the message.  These com-
      mands can be issued only from a TSSO-initiated CLIST.

 SYNTAX
 ______

        OSWTO message
              _______

        OSWTOH message
               _______

 PARAMETERS
 __________

      message     The text of the message to be sent to the opera-
      _______
                  tor.

 EXAMPLES
 ________

      EXAMPLE 1.  Notify the operator of an IPL in progress.

                    OSWTO BCR101I AUTOMATED IPL IN PROGRESS

      EXAMPLE 2.  Send a highlighted message to the operator.

                    OSWTOH BCR102I SYSTEM SHUTDOWN COMPLETE


























 REPLY                   TSSO User s Guide                   REPLY



 NAME:  REPLY
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      The REPLY command is used to reply to MVS WTOR messages  af-
      ter the WTOR has appeared on the MVS console.(7) You do  not
      need  to  know  the MVS reply number to respond to the WTOR.
      The REPLY command can, therefore, be used to automate opera-
      tional procedures with products that communicate to the  op-
      erator through the WTOR interface (e.g., NCCF, IMS, GDDM).

 SYNTAX
 ______

        REPLY MSG(msg-id) TEXT(reply-text)
                  ______       __________

 PARAMETERS
 __________

      MSG(msg-id)       The  message  you  are  replying to (e.g.,
                        DSI802A)

      TEXT(reply-text)  The text of the reply you wish to give  in
                        response to the WTOR.

 NOTES ON USING REPLY WITH IMS/VS
 _____ __ _____ _____ ____ ______

      There are some installations that run multiple copies of the
      IMS/VS  program  product.    All of the subsystems issue the
      same message ID as a WTOR.  For these installations, an  al-
      ternate form of the REPLY command is available to direct re-
      plies to the correct IMS subsystem:

             REPLY IMS(ims-id) TEXT(reply-text)
                       ______       __________

      where  ims-id  is the name of the IMS subsystem to which you
             ______
      wish to direct the response, and reply-text  is  as  defined
                                       __________
      above.  In this way IMS procedures can be automated.

 EXAMPLES
 ________

      EXAMPLE 1.  Shut down the NCCF program product.


 ----------------

 7   Contrast  this  to  the  ACTION=REPLY  directive in TSSO/AOF,
     which replies to messages the  instant  they  are  generated.
     Thus,  TSSO/AOF  and  the  REPLY command combine to give full
     coverage on automating responses to MVS WTORs.






 REPLY                   TSSO User s Guide                   REPLY



                    REPLY MSG(DSI802A) TEXT('CLOSE IMMED')























































 REPLY                   TSSO User s Guide                   REPLY



      EXAMPLE 2.  Reply to message USRWT01.

                    REPLY MSG(USRWTO1) TEXT('DISPLAY FIELDS')

      EXAMPLE 3.  Issue the IMS command DISPLAY ACTIVE on IMS sub-
                  system ZFF.

                    REPLY IMS(ZFF) TEXT('/DIS A')

      EXAMPLE 4.  Issue  the IMS command NRESTART on IMS subsystem
                  PRO.

                    REPLY IMS(PRO) TEXT('NRE CHECKPOINT 0 FMT ALL')











































 SPMON                   TSSO User's Guide                   SPMON



 NAME:  SPMON
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      The SPMON command displays system  information  to  the  MVS
      console operator.  By default SPMON will display the follow-
      ing  information:   percentage of CPU busy, average Unrefer-
      enced Interval Count (UIC), average paging rate,  number  of
      TSO  users,  number  of started tasks, number of batch jobs,
      and number of inactive initiators.  In addition, if  Parame-
                    ________
      ters  are  specified to SPMON, the following job-related in-
      formation is printed:  JOBNAME, number of service  units  in
      current  transaction, swap-in/swap-out status, and number of
      active frames in real storage.

 SYNTAX
 ______

        SPMON  [job-parm [type-parm]]
                ________  _________

 PARAMETERS
 __________

      job-parm    A 1- to 8-character string for matching  on  job
      ________
                  name,  or  "ALL"  to  display information on all
                  jobs.

      type-parm   This directs SPMON to  print  information  about
      _________
                  selected  types  of jobs.   Legal values are JOB
                  (all batch jobs), STC (all started  tasks),  TSO
                  (all TSO users), or ALL (all batch jobs, started
                  tasks, and TSO users).  Default is ALL.

 EXAMPLES
 ________

      EXAMPLE 1.  Display the general system information only.

                    SPMON

      EXAMPLE 2.  Display  general  system  information as well as
                  information on all jobs, TSO  users  or  started
                  tasks that start with "BCR".

                    SPMON BCR

      EXAMPLE 3.  Display  general system information and informa-
                  tion about all TSO users whose  user  IDs  begin
                  with "PY".

                    SPMON PY TSO






 VALLOC and VOLSER       TSSO User's Guide       VALLOC and VOLSER



 NAME:  VALLOC and VOLSER
 _____

 AVAILABLE UNDER TSO:  Yes
 _________ _____ ____

 DESCRIPTION
 ___________

      The  VALLOC  and  VOLSER commands display UCB and ALLOCATION
      information.  By default, the commands will display informa-
      tion for the MVS SYSRES (IPL) device.  If a volume serial is
      specified, the command will  locate  the  device  using  the
      standard MVS UCBSCAN service and display the UCB address and
      the  UCB itself.(8) The command will also inform the MVS op-
      erator if the volume is not found.

 SYNTAX
 ______

        VALLOC [volser]
                ______

        VOLSER [volser]
                ______

 PARAMETERS
 __________

      volser    A  6-character DASD volume identifier.
      ______

 EXAMPLES
 ________

      EXAMPLE 1.  Display the UCB address and allocation  informa-
                  tion for volume PPBFX2.

                    VALLOC PPBFX2

      EXAMPLE 2.  Display UCB information for the MVS SYSRES (IPL)
                  pack.

                    VOLSER

      EXAMPLE 3.  Display the UCB address for volume SYSRES.

                    VOLSER SYSRES

 ----------------

 8   The commands use the TSSO "*COM" interface to issue appropri-
     ate MVS commands.  to display UNIT or ALLOCATION information.
     The  VOLSER command issues the "D U,,,ucb-address,1" MVS sys-
                                           ___________
     tem  command,   while   the   VALLOC   command   issues   the
     "D U,,ALLOC,ucb-address,1" MVS command.  Note that, when this
                 ___________
     command is issued under regular TSO, the MVS commands are not
     generated and the invoker of the command will see the format-
     ted command including the *COM keyword.







 APPENDIX B. TSSO CONTROL COMMANDS
 ________ __ ____ _______ ________

 TSSO  control  commands  are used to direct TSSO processing.  All
 such commands start with the TSSO  System  Recognition  Character
 (SRC).  The Examples below assume that "#" is the TSSO SRC.

 Note  that  TSSO control commands may be treated exactly as other
 TSO commands when used in a TSSO CLIST.  For example, a CLIST may
 process directives and then issue a .RELOAD command to reload the
 TSSO/AOF table.  It is also possible for a CLIST  to  consist  of
 nothing  but TSSO commands. For example, a CLIST could be written
 to query all the TSSO Parameters.

 GENERAL COMMANDS
 _______ ________

 #.LOGOFF                    Logs off the console.

 #.LOGON USER-ID PASSWORD    Logs on the invoking console to TSSO.


 Various Parameters of the TSSO subsystem can be queried using the
 #.Q family of commands.

 #.Q LOGON                   Displays the console ID and the  user
                             ID of all consoles logged on to TSSO.

 #.Q MAXCMD                  Returns  the value of the MAXCMDS pa-
                             rameter specified at TSSO startup.

 #.Q MAXWTO                  Returns the value of the  MAXWTO  pa-
                             rameter specified at TSSO startup.

 #.Q RACF                    Returns  the  name  of  the TSSO RACF
                             user identifier.

 #.Q SCON                    Displays the status of subsystem con-
                             soles.

 #.Q SWAP                    Indicates if  TSSO  is  running  non-
                             swappable.

 #.Q T                       Returns  the name of the TSSO AOF ta-
                             ble.    Additional  information  dis-
                             played  includes  the value specified
                             on the ID parameter of  the  TABSTART
                                    __
                             macro  and  the date and time the AOF
                             table was assembled.

 #.Q TIMEOUT                 Displays the TIMEOUT value.

 #.Q VERS                    Displays the TSSO Version  identifier
                             (TSSO  4.3)  and  the  date and times
                             that the TSSO, TSSOWTO, and the  sub-






                             system  interface  intercept  modules
                             were last assembled.

 #.Q XMEM                    Displays status of TSSO cross  memory
                             services environment.
























































 RESTRICTED COMMANDS
 __________ ________

 The following commands are restricted to consoles with MVS system
 authority.

 #.ABEND               Abnormally   terminates  the  TSSO  address
                       space. This is a TSSO debugging  aid  which
                       should not be used in normal operation.

 #.J                   Requests  a  job identification number from
                       the primary subsystem.  This is required if
                       TSSO will be using the primary  subsystem's
                       services.    These services include submit-
                       ting jobs (with the TSO SUBMIT command) and
                       using the PRINTOFF command.   Note that  if
                       TSSO  was  started using the "SUB=JES2" pa-
                       rameter, this command will have no effect.

 #.M                   Manipulates the  TSSO  debugging  facility.
                       This  command  should  not  be  used  under
                       normal circumstances.

 #.P                   Terminates the Time Sharing  Subsystem  Op-
                       tion.  TSSO can be restarted through the "S
                       TSSO" command as described on page 13.

 #.RELOAD TABLE-NAME   Loads  a TSSO Automated Operations Facility
                       table identified by table-name and performs
                                           __________
                       a "#.Q T" (see previous page).   If  table-
                                                            ______
                       name='NONE',  then  the AOF is deactivated.
                       ____
                       If an error occurs while processing the ta-
                       ble, AOF is deactivated.   The most  common
                       errors  include  table-name not being found
                                        __________
                       and table-name not being a valid  TSSO  AOF
                           __________
                       table.

























 APPENDIX C. TSSO PROCESSING MODULES
 ________ __ ____ __________ _______

 $ENDOFDA       Sample  IEFBR14  job:  AOF can trap the END OF JOB
                message

 $PAYROLL       Same as above.

 ALOCCACH       Sample CLIST to allocate files needed to  run  the
                cache command from a TSO user ID.

 ALTAOF         ALTAOF  command:   Change MATCHLIM dynamically for
                TSSO/AOF

 AOFIVP         Sample AOF table that shows all forms of  TABENTRY
                macro.

 ASMALL         PROC to assemble all TSSO processing modules.

 ASMONE         PROC to assemble one TSSO processing module.

 ASMTABLE       PROC to assemble an AOF table.

 ASMTSSO        PROC to assemble all TSSO subsystem modules.  This
                is  need  if  the TSSOCVT or TSSODATD macro is al-
                tered.

 CACHE          CACHE command:   Controls  a  3880  CACHE  control
                unit.

 COPYPROC       PROC  to  copy  the  sample  TSSO  START PROC into
                SYS1.PROCLIB.

 CPCMD          CPCMD command:  Issue a CP command if running  un-
                der VM.

 DISPAOF        DISPAOF  command:   Displays an active or inactive
                AOF table.

 EF             EF command:   Allows a file  to  be  edited  under
                TSSO.

 EQUATES        Standard R0-R15 equate macro.

 EXASK          Sample CLIST using the OSASK command.

 EXCHKSPL       Sample  CLIST using OSCMD command and manipulation
                of the response.

 EXJOBS         Another example using OSCMD.

 EXSTVTAM       An example of OSCMD without response retrieval.

 FORMAT         Macro to format numbers from assembler programs.






 GENTAPE        PROC to generate the TSSO distribution tape.

 GETCVT         Macro to find the TSSO CVT (SSCTSUSE field in TSSO
                SSCT).

 ISXA           Macro  to  determine  if  you  are  running  under
                MVS/XA.

 JCECVT         Subroutine for decimal/hex conversions.

 LINKLIST       LINKLIST command:  Displays the MVS LNKLST concat-
                enation.

 MENTER         Macro for beginning subroutine linkage.

 MLEAVE         Macro for closing subroutine linkage.

 MULT           Bill  Godfrey's MULT command:  Allows you to enter
                multiple commands on a line.   Great for  commands
                that have subcommands.

 OSASK          OSASK command:  Ask the operator a question.

 OSCMD          OSCMD command:  Issue an MVS command and get a re-
                sponse.

 OSCMDICB       OSCMD  Interface Control Block:  for communication
                between OSCMD and TSSOSS09.

 OSPAUSE        OSPAUSE command:  Delay the execution of a CLIST.

 OSWTO          OSWTO command:  Issue a message to the operator.

 RELGDE41       TSSO 4.1 release guide.

 RELGDE42       TSSO 4.3 release guide.

 REPLY          REPLY command:  Issue a REPLY command  by  message
                ID.

 REPLYLOA       REPLYLOA module:  Performs X-MEM functions for RE-
                PLY command.

 RUNASM         PROC for assembling TSSO commands.

 SAMPPARM       Sample Parameters for SYS1.PARMLIB(TSSOPARM).

 SETMODE        Macro for changing mode (24 bit - 31 bit).

 SETPARSE       Macro for setting up IKJPARS control blocks.

 SPMON          SPMON command for performance monitoring.

 SSID           SSID macro for obtaining SMF system ID.






 TABEND         TABEND macro for defining end of AOF table.

 TABENTRY       TABENTRY macro for defining AOF table entries.

 TABSTART       TABSTART macro for defining start of AOF table en-
                tries.

 TLINE          TLINE macro for doing TPUT of character string.

 TSSLRACF       TSSLRACF  subroutine for doing RACINITS in #.LOGON
                command.

 TSSO           TSSO mainline processing module.

 TSSOCCMD       TSSOCCMD subroutine for handling TSSO control com-
                mands.

 TSSOCMND       TSSOCMND  macro  for  defining  control  block  to
                interface   between  TSSO  and  TSSOSS10  (CMDRING
                DSECT).

 TSSOCVT        Mapping macro for TSSO's CVT.

 TSSODATD       Mapping macro for TSSO's private data area.

 TSSODOCM       TSSODOCM subroutine for handling TSO commands  un-
                der TSSO.

 TSSOESTA       TSSOESTA subroutine for handling TSSO errors.

 TSSOGSSC       Interface for subsystem allocatable consoles.

 TSSOINI1       TSSO initialization, part 1.

 TSSOINI2       TSSO initialization, part 2.

 TSSOINI3       TSSO initialization, part 3.

 TSSOPARS       Subroutine for parsing just about anything.

 TSSOPROC       A sample proc for starting TSSO (S TSSO).

 TSSOSECR       Macro to map the TSSO security control block.

 TSSOSS09       TSSO WTO intercept routine (subsys code 9).

 TSSOSS10       TSSO Command intercept routine (subsys code 10).

 TSSOTERM       Module for handling TSSO termination.

 TSSOWTO        Module  for copying SYSTSPRT file to console after
                commands.

 UNDERTSO       Macro to determine if you are running under TSO.






 USEGDESC       The TSSO USER'S GUIDE, complete with  SCRIPT  con-
                    ____ ______ _____
                trol words.

 USEGDE41       The user's guide for TSSO 4.1.

 USEGUIDE       The user's guide for TSSO 4.3 (current version).

 VALLOC         Command for displaying MVS allocation information.

 VOLSER         Command for displaying MVS UCB information.



















































 APPENDIX D. SAMPLE AOF TABLE
 ________ __ ______ ___ _____

 This  is  the  sample  AOF  table distributed with TSSO in member
 AOFIVP of the TSSO.VERS43.ASM data set.


 ***********************************************************************
 * THIS IS A SAMPLE AUTOMATED OPERATIONS FACILITY TABLE. IT IS USED AS *
 * PART OF THE TSSO INSTALLATION VERIFICATION PROCEDURE. IT CONSISTS   *
 * OF A SUBSET OF ALL POSSIBLE ENTRIES IN A TSSO/AOF TABLE.            *
 *                                                                     *
 * THIS AOF TABLE CAN BE USED IN CONJUNCTION WITH THE AOF/IVP,         *
 * DISTRIBUTED WITH TSSO.                                              *
 *                                                                     *
 *                                                                     *
 ***********************************************************************
 AOFIVP   TABSTART ID=IVPTABLE
 ***********************************************************************
 * FIRST, A COUPLE OF REPLIES TO STANDARD ANNOYING MVS   MESSAGES.     *
 ***********************************************************************
 *
 ***********************************************************************
 * REPLY '' TO VTAM INITIALIZATION MESSAGE
 ***********************************************************************
          TABENTRY MSG=IST051A,ACTION=REPLY,TEXT=' '
          TABENTRY MSG=IST051A,ACTION=REPLY,TEXT=' '
 *
 ***********************************************************************
 * REPLY 'SIC' TO TCAS TERMINATION MESSAGE
 ***********************************************************************
          TABENTRY MSG=IKT010D,ACTION=REPLY,TEXT='SIC'
 *
 ***********************************************************************
 * REPLY 'U' TO TCAS TERMINATION MESSAGE
 * AND ECHO THE REPLY OUT TO THE MVS CONSOLE. ALSO, ENSURE THAT WE ONLY
 * MAKE THE REPLY ONE TIME THROUGH THE MATCHLIM FACILITY.
 ***********************************************************************
 *
          TABENTRY MSG=IKT012D,ACTION=REPLY,TEXT='U',ECHO=YES,
                MATCHLIM=1



















 ***********************************************************************
 * REPLY 'POST' TO IMS BRINGUP ON UCB MESSAGE
 ***********************************************************************
 *
          TABENTRY MSG=IEC804A,ACTION=REPLY,TEXT='POST'
 *
 ***********************************************************************
 * THE NEXT ENTRY POINTS OUT THE HILIGHTING FEATURE. IEE704I IS THE    *
 * MESSAGE ID FOR   REPLY XX IS NOT OUTSTANDING.                       *
 ***********************************************************************
          TABENTRY MSG=IEE704I,ACTION=HILIGHT
 *
 ***********************************************************************
 * THE NEXT ENTRY DEMONSTRATES A POSSIBLE USE FOR THE OSCMD FEATURE.   *
 * IEE043I IS THE MESSAGE YOU GET WHEN A SYSTEM LOG DATASET IS QUEUE   *
 * TO A GIVEN OUTPUT CLASS. THE #LOGWTRR4 PROGRAM (OR CLIST) CAN BE    *
 * USED TO PROCESS THE LOG DATASET. THE XWTR PROC    CAN ALSO BE USED. *
 * YOU CAN CAUSE THIS TO OCCUR BY ISSUING THE "W Z" COMMAND.           *
 * PERFORM THIS ACTION AT MOST 7 TIMES, AND, EACH TIME, ECHO THE       *
 * GENERATED COMMAND OUT TO THE MVS CONSOLE.
 ***********************************************************************
          TABENTRY MSG=IEE043I,ACTION=OSCMD,MATCHLIM=7,ECHO=YES,
                TEXT='#LOGWTRR4'
 *
 ***********************************************************************
 * WHEN THE LOGWTR PROGRAM TERMINATES, MESSAGE IEF176I IS ISSUED,      *
 * INDICATING THE LOGWTR IS LOOKING FOR WORK. HAVE TSSO PURGE IT OUT.  *
 * NOTE HOW IT USES THE DDD FROM THE MESSAGE TO FIGURE OUT WHAT TO     *
 * PURGE. NOTE THAT THIS WILL WORK FOR ANY EXTERNAL WRITER.            *
 * THIS IS AN EXAMPLE OF "WORD" FORMATTING IN THE TEXT= PARM.          *
 * NOTE THAT THE COMMAND GENERATED IS ECHOED TO THE MVS CONSOLE
 ***********************************************************************
          TABENTRY MSG=IEF176I,ACTION=OSCMD,ECHO=YES,
                TEXT='P \W    03\'
 *
 ***********************************************************************
 * THE NEXT EXAMPLE SHOWS POSITIONAL FORMATTING IN THE COMMAND TEXT.   *
 * THE $HASP104 MESSAGE IS ISSUED WHENEVER A //*MESSAGE CARD IS        *
 * ENCOUNTERED IN THE JOB STREAM. THE #RECMSG CLIST MEARLY RECORDS IN  *
 * A DATASET (USING CLIST OPENFILE/PUTFILE/CLOSFILE TECHNIQUES) THE    *
 * TEXT OF THE MESSAGE.                                                *
 ***********************************************************************
          TABENTRY MSG=$HASP104,ACTION=OSCMD,
                TEXT='#RECMSG JOB(''\P001,72\'')'
 *
 ***********************************************************************
 * ANOTHER EXAMPLE OF THE USE OF THE HILIGHTING FEATURE. HILIGHT THE   *
 * MESSAGE INDICATING THAT VTAM IS UP.                                 *
 ***********************************************************************
          TABENTRY MSG=IST020I,ACTION=HILIGHT
 *
 ***********************************************************************
 * IN ADDITION TO  HILIGHTING THE VTAM INITIALIZATION MESSAGE, ISSUE   *
 * THE #VTAMR4 CLIST. THIS CLIST IS A OPERATOR CLIST THAT ISSUES       *






 * MVS START COMMANDS FOR VTAM DEPENDANT PROGRAM PRODUCT, LIKE NCCF    *
 * AND TSO.                                                            *
 *                                                                     *
 ***********************************************************************
          TABENTRY MSG=IST020I,ACTION=OSCMD,TEXT='#VTAMR4'
 *
 ***********************************************************************
 * DSI802A IS THE NCCF MESSAGE SAYING THAT YOU CAN ISSUE A VALID NCCF  *
 * OPERATOR COMMAND. YOU DO NOT NEED TO KNOW THE MESSAGE NUMBER FOR    *
 * THIS COMMAND, BECAUSE YOU CAN REPLY TO IT USING THE REPLY COMMAND   *
 * SO WE LOWLIGHT THE MESSAGE, AND ALLOW IT TO ROLL OFF THE SCREEN.    *
 * THIS IS AN EXAMPLE OF THE LOWLIGHTING FEATURE.
 ***********************************************************************
          TABENTRY MSG=DSI802A,ACTION=LOWLIGHT
 *
 ***********************************************************************
 * THIS IS AN EXAMPLE OF A SUPPRESS CONDITION. $HASP309 IS A MESSAGE   *
 * THAT JES2 ISSUES EVERY TIME AN INITIATOR GOES INACTIVE. THIS MESSAGE*
 * IS NOW SUPPRESSED.                                                  *
 ***********************************************************************
          TABENTRY MSG=$HASP309,ACTION=SUPPRESS
 ***********************************************************************
 * WE WILL NOW DISPLAY SOME OF THE POWER OF THE TEST CONDITIONS. THE   *
 * FOLLOWING DEMONSTRATIONS ALL TRAP THE $HASP395 JOB ENDED MESSAGE,   *
 * HOWEVER, THE ACTION= PARAMETER IS EXECUTED ONLY IF ALL CONDITIONS   *
 * FOR THE TESTS ARE MET. FOR EXAMPLE, OUR FIRST CASE WILL ONLY        *
 * HILIGHT THE MESSAGE IF THE JOB THAT HAS ENDED IS NAMED "PAYROLL".   *
 * THIS TEST CASE SPECIFIES THAT (1) WORDS ARE BEING TESTED, (2), THAT
 * IT IS THE SECONDWORD WE ARE INTERESTED IN, (3), WE ARE INTERESTED IN
 * THE FIRST SEVEN CHARACTERS OF THAT WORD, (4), WE WISH TO MATCH THE
 * STRING 'PAYROLL', AND      (5), WE WILL USE FOUR BLANKS AS THE
 * SEPARATOR CHARACTERS WHEN DEFINING A WORD.
 * NOTE THAT THE DOUBLE PARENTHESIS ARE REQUIRED.
 ***********************************************************************
          TABENTRY  MSG=$HASP395,ACTION=HILIGHT,
                TEST=((W,2,7,'PAYROLL','    '))
 *
 ***********************************************************************
 * THE NEXT ENTRY IS AN EXAMPLE OF A TEST CONDITION BASED ON SUBSTRING,*
 * OR COLUMNS. THE MESSAGE WILL THE JES2 $HAS648 MESSAGE, WHICH IS     *
 * THE RESPONSE TO A $DU,STA. THIS ENTRY WILL SUPPRESS ALL LINES FROM  *
 * THE JES2 RESPONSE THAT ARE SNA LINES (COLS 20 THROUGH 22 = 'SNA'    *
 *                                                                     *
 ***********************************************************************
          TABENTRY  MSG=$HASP628,ACTION=SUPPRESS,
                TEST=((S,20,3,'SNA'))
 *
 ***********************************************************************
 * THE NEXT ENTRY IS AN EXAMPLE OF A LOGICAL AND CONDITION BETWEEN TEST*
 * CASES. BOTH CRITERIA MUST BE SATISFIED FOR THE TESTS TO PASS.       *
 * THE TEST CASE WILL AN MVS/JES2 JOB AWAITING EXECUTION IN A CERTAIN  *
 * JOB CLASS. THIS ENTRY WILL TAKE A $DN COMMAND, AND ISSUE AN OSCMD   *
 * TO RAISE THE PRIORITY OF JOBS AWAITING EXECUTION IN CLASS 9 TO "15" *
 * (YES, I REALIZE THIS DOESNT MAKE MUCH SENSE, BUT ITS GOOD FOR DEMO  *






 * PURPOSES).
 * NOTE THAT THE THIRD WORD IS CHECKED FOR "AWAITING" AND THE FOURTH   *
 * WORD IS CHECK FOR EXECUTION, AND THE FIFTH WORD IS THE JOB CLASS.   *
 * ALSO NOTE HOW THE SECOND WORD OF THE MESSAGE (THE JOB NAME) IS USED *
 * IN FORMING THE TEXT= OPERAND. OSCMDT WILL BE USED SO THE COMMAND    *
 * DOESNT ACTUALLY GET ISSUED.
 * NOTE ALSO THAT YOU DONT NEED TO SPECIFY FOUR BLANKS- ONE IS         *
 * SUFFICIENT WHEN GENERATING TEST CASES.
 ***********************************************************************
          TABENTRY MSG=$HASP608,ACTION=OSCMDT,
                TEXT='$T''\W    02\'',P=15',
                TEST=((W,3,8,'AWAITING','  '),(W,4,9,'EXECUTION','    ')
                ,(W,5,1,'9',' '))
 *
 ***********************************************************************
 * THE LAST CASE IS A GENERIC MESSAGE. THIS MESSAGE IS MATCHED BY      *
 * EVERY SINGLE WTO OR WTOR THAT COME ACROSS, EXCEPT IT MUST STILL     *
 * PASS THE TEST CONDITIONS. THIS EXAMPLE I WILL GIVE HILIGHTS ALL JES *
 * MESSAGES CONCERNING JOB ENDOFDAY.THESE MESSAGES ALL START WITH      *
 * $HASP (WORD 1) AND CONTAIN THE JOBNAME IN WORD 2.                   *
 *                                                                     *
 ***********************************************************************
          TABENTRY MSG=*,ACTION=HILIGHT,
                TEST=((W,1,5,'$HASP',' '),(W,2,7,'ENDOFDAY',' '))
 ***********************************************************************
 * THIS TABEND MACRO DEFINES THE END OF THE AUTOMATED OPERATIONS       *
 * FACILITY TABLE.                                                     *
 *                                                                     *
 * DO NOT LEAVE THE TABEND MACRO OUT OF THIS ASSEMBLY.                 *
 *                                                                     *
 ***********************************************************************
          TABEND





























 APPENDIX E. TSSO/AOF TEXT PROCESSING ALGORITHM
 ________ __ ________ ____ __________ _________

 This section describes the algorithm used in forming the MVS  op-
 erator commands issued as a result of processing the ACTION=OSCMD
 directive under the TSSO Automated Operations Facility.

 DEFINITION OF TERMS
 __________ __ _____

      action-text  is  the parameter specified in the TEXT operand
                   of the TABENTRY macro.

      WTOTEXT      is the text of the  console  message  that  was
                   matched  by  the  MSG parameter. Therefore, the
                   first 8 bytes of WTOTEXT must have  matched  an
                   entry in the AOF table, as specified by the MSG
                   parameter.

      cmd-buffer   is  the buffer that will be passed to MVS to be
                   executed as an operator command.

 ALGORITHM
 _________

 1.  Examine the MATCHLIM value for an entry.  If MATCHLIM=999999,
     then ignore.  If MATCHLIM=0, then do not process  the  entry;
     otherwise, decrement MATCHLIM by 1.

 2.  Copy  characters from action-text to cmd-buffer until no more
                           ___________    __________
     characters are found, or a "\" is located. The "\" is a  sig-
     nificance  indicator that indicates to AOF that characters or
     words from WTOTEXT are to be copied.  When a significance in-
     dicator is detected, go to step 2. When  no  more  characters
     remain in action-text, pass the command to MVS for processing
               ___________
     and terminate.

 3.  The character after the significance indicator determines the
     type  of  formatting to be performed. Two characters are per-
     missible. The "S" directive  indicates  substring  formatting
     and the "W" directive indicates word formatting. If the char-
     acter  is  a "S", go to step 3; if the character is a "W", go
     to step 4.

 4.  To use substring formatting, the syntax, including the  lead-
     ing "\S" must be

       \Snnn,yy\
         ______

     where  nnn  are  numeric characters that specify the starting
            ___
     position in WTOTEXT, and the yy indicates the number of char-
                                  __
     acters starting from position nnn to copy  into  the  command
                                   ___
     buffer.    Thus,  it  is  possible  to include all or part of
     WTOTEXT in the operator command to be issued.   For  example,
     if







       \S032,08\

     was coded, then character positions 32-39 of WTOTEXT would be
     copied  to cmd-buffer. The syntax for the substring parameter
                __________
     is very rigid.   Leading zeroes must be  specified,  and  the
     final  "\"  must be present.   Processing continues at step 1
     with the character following the final "\"

 5.  A word is defined as a string of characters separated by sep-
     arator characters. The maximum size of a word is 16 bytes. To
     use the word formatting option, code

       \Wabcdnn\
         ______

     where a, b, c and d specify separator characters to  be  used
           __ __ _     _
     in  the definition of a word, and nn is a numeric value indi-
                                       __
     cating which word to use. The selected word is then copied to
     cmd-buffer.  For example, if
     __________

       \W=,   03\

     were coded, it would be interpreted as word  formatting  with
     the next four characters  "=", ",", " ", and " " used as word
     separator  characters.    In  this example, the third word is
     copied from WTOTEXT into cmd-buffer. The Syntax  of  the  "W"
                              __________
     directive  if  very strict. If you do not need four separator
     characters, you must code blanks (as in the example). The nu-
     meric specification must have two digits (including a leading
     zero if required) and the terminating "\" is required.  Proc-
     essing  continues at step 1, with the character following the
     last "\".  Note that a word is  at  most,  16  characters  in
     length, and is copied to cmd-buffer without leading or trail-
                              __________
     ing blanks.

 Note   that   the   formatting  options  are  available  only  if
 ACTION=OSCMD or ACTION=OSCMDT is specified.

























 APPENDIX F. TSSO SAMPLE PARAMETER DECK
 ________ __ ____ ______ _________ ____

 The parameter deck  shown  below  is  in  file  SAMPPARM  in  the
 TSSO.VERS43.ASM data set.


 ***********************************************************************
 * THIS IS A TYPICAL TSSO PARAMETER DECK FOR A TYPICAL SYSTEM. THE     *
 * DOCUMENTATION IS   IN "TSSO SYSTEM PROGRAMMERS GUIDE- RELEASE 4.3   *
 * THESE VALUES SHOULD WORK AS DEFAULTS.                               *
 ***********************************************************************
 NONSWAP=Y
 ************************************************************
 * TSSO WILL BE RUNNING NON-SWAPABLE                        *
 ************************************************************
 *
 TABLE=AOFR4
 ************************************************************
 * THE TABLE NAME FOR TSSO AOF WILL BE AOFR4                *
 ************************************************************
 *
 RACFID=TSSO
 ************************************************************
 * TSSO WILL ASSUME A RACF USERID OF "TSSO" ON STARTUP      *
 ************************************************************
 *
 SRC=#
 ************************************************************
 * THE COMMAND RECOGNITION CHARACTER IS A POUND SIGN ('#')  *
 ************************************************************
 *
 MAXCMDS=15
 ************************************************************
 * TSSO WILL HANDLE AT MOST 15 SIMULTANEOUS COMMANDS        *
 ************************************************************
 *
 MAXWTO=250
 ************************************************************
 * TSSO WILL ISSUE AT MOST 250 WTOS FOR ANY ONE COMMAND     *
 ************************************************************
 *


















 PROMPT=NO
 ************************************************************
 * DO NOT PROMPT THE MVS OPERATOR FOR ADDITIONAL TSSO       *
 * Parameters                                               *
 ************************************************************
 *
 SECSYS=RACF
 ***********************************************************************
 * THE SECURITY SYSTEM IN USE WILL BE THE RESOURCE ACCESS CONTROL      *
 * FACILITY.                                                           *
 ***********************************************************************
 *
 SECLEVEL=MINIMAL
 ***********************************************************************
 * WE WILL BE USING THE "MINIMAL" LEVEL OF SECURITY.                   *
 ***********************************************************************
 *
 SUBSYS 9 = TSSOSS09
 ***********************************************************************
 * THE "TSSOSS09" ROUTINE, SUPPLIED WITH TSSO, WILL BE PROCESSING      *
 * THE WTO AND WTOR MESSAGES WHEN AOF IS ACTIVE. ANY OTHER SELECTION   *
 * MAY CAUSE TSSO TO FAIL.                                             *
 ***********************************************************************
 *
 SUBSYS 10 = TSSOSS10
 ***********************************************************************
 * THE "TSSOSS10" ROUTINE, SUPPLIED WITH TSSO, WILL BE PROCESSING      *
 * THE MVS AND SUBSYSTEM COMMANDS. ANY OTHER SELECTION MAY MAKE TSSO   *
 * FAIL.                                                               *
 ***********************************************************************
 *
 TIMEOUT = 30
 ***********************************************************************
 * IF THE SECLEVEL PARAMETER IS EVER SET TO "MAX", CONSOLES WILL TIME  *
 * OUT AFTER THIRTY MINUTES OF INACTIVITY.                             *
 ***********************************************************************
 *
 NUMCONS=10 DEDICATE
 ***********************************************************************
 * TSSO WILL US A POOL OF 10 SUBSYSTEM CONSOLES FOR THE TSO AND NCCF   *
 * VERSIONS OF OSCMD. ONE CONSOLE WILL BE DEDICATED TO THE TSSO        *
 * ADDRESS SPACE.                                                      *
 ***********************************************************************
 END













