         MACRO
&NAME    LATCH &A,&B,&VL,&TYPE=
         CNOP  0,4
&NAME    DS    0H
         AIF   ('&TYPE' EQ 'LINK').BA02
         AIF   (K'&B NE 0).BA01
         ST    R1,L1&SYSNDX+4      SAVE ADDRESS OF PARAMETER LIST
         B     *+12                BRANCH AROUND CONSTANTS
L1&SYSNDX DS    A                  ENTRY POINT ADDRESS
         DS    A                   PARAMETER LIST ADDRESS
L2&SYSNDX BC   0,L3&SYSNDX         BRANCH ROUND LOAD AFTER 1ST TIME
         LOAD  EP=&A
         ST    R0,L1&SYSNDX        SAVE ENTRY POINT ADDRESS
         OI    L2&SYSNDX+1,X'F0'   CAUSE BRANCH ROUND LOAD
L3&SYSNDX LM   R0,R1,L1&SYSNDX     LOAD ENTRY POINT & PARM LIST ADDR.
         LR    R15,R0         LOAD ENTRY POINT OF MODULE
         CALL  (15)
         MEXIT
.BA01    ANOP
L4&SYSNDX BC   0,L5&SYSNDX         BRANCH ROUND LOAD AFTER 1ST TIME
         LOAD  EP=&A
         ST    R0,L6&SYSNDX        SAVE ENTRY POINT ADDRESS
         OI    L4&SYSNDX+1,X'F0'   CAUSE BRANCH AROUND LOAD
         CNOP  0,4
         B     *+8                 BRANCH AROUND ENTRY POINT ADDRESS
L6&SYSNDX DS   A                   ENTRY POINT ADDRESS
L5&SYSNDX L    R0,L6&SYSNDX        LOAD ENTRY POINT ADDRESS
         LR    R15,R0         LOAD ENTRY POINT OF MODULE
         CALL  (15),&B,&VL
         MEXIT
.BA02    ANOP
         LINK  EP=&A,PARAM=&B
         MEND
