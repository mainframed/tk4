*        GENERAL DESCRIPTION
*        THE ZZSNAP SUBROUTINE WILL GIVE EACH TIME IT IS CALLED A DUMP
*        OF THE CONTENTS OF MAIN STORAGE ASSIGNED TO THAT JOB STEP.
*        CALLING PROCEDURE
*                   CALL 'ZZSNAP'
*        NOTES
*        THE SUBROUTINE OUTPUTS THE DUMPED DATA TO A SYSOUT DATA SET
*        DEFINED BY THE DDNAME SNAPDUMP. THEREFORE THE PROGRAMMER MUST
*        INCLUDE THE FOLLOWING DD CARD IF ZZSNAP IS IN THE PROGRAM.
*        //SNAPDUMP DD SYSOUT=A
*        IF THE SNAPDUMP DATA SET IS NOT OPENED SUCCESSFULLY THE ZZSNAP
*        SUBROUTINE ABENDS WITH A USER CODE 66 AND A DUMP.
         TITLE 'ZZSNAP A ROUTINE TO PROVIDE SNAP DUMPS'
ZZSNAP   CSECT
         IN    12
A01      BC    0,B01
         OI    A01+1,X'F0'
         OPEN  (SNAPDCB,OUTPUT)
         TM    SNAPDCB+48,X'10'    TEST SUCCESSFUL OPEN
         BO    B01
         ABEND 66,DUMP
B01      EQU   *
         SNAP  DCB=SNAPDCB,PDATA=ALL,SDATA=CB
         OUT   0
SNAPDCB  DCB   DSORG=PS,RECFM=VBA,MACRF=W,BLKSIZE=882,LRECL=125,       X
               DDNAME=SNAPDUMP
         LTORG
         END
