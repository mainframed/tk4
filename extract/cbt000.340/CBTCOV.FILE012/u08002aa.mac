GENERALISED FILE COMPARISON PROGRAM              27.4.1971
1.    A GENERALISED FILE COMPARISON PROGRAM 'SYCOMPAR',IS NOW AVAILABLE
      ON SYS1.LINKLIB. THIS PROGRAM COMPARES DATA ON TWO FILES ACCORDING
      TO RULTS ENTERED ON PROGRAM CONTROL CARDS,AND REPORTS NOT-EQUAL
      AND OTHER ERROR CONDITIONS. AFTER 10 ERRORS HAVE BEEN DETECTED,
      THE PROGRAM TERMINATES. FILES BEING COMPARED MUST BE OF SIMILAR
      FORMAT.
2.    UP TO NINE TYPES OF RECORD MAY BE DEFINED TO SYCOMPAR FOR THE FILE
      BEING COMPARED; UP TO 100 FIELDS MAY BE DEFINED ON EACH TYPE OF
      RECORD. EACH FIELD MAY BE TREATED IN ANY ONE OF THESE WAYS:-
           (A) NO COMPARISON
           (B) CHARACTER-TYPE COMPARISON.(APPLICABLE FOR
               CHARACTER AND BINARY FIELDS)
           (C) PACKED DECIMAL COMPARISON
           (D) COMPARISON BY A USER-WRITTEN MODULE (UP TO
               3 USER COMPARISON MODULES,WRITTEN IN COBOL
               OR ASSEMBLER, AND NAMED USERX, USERY, USERZ,
               MAY BE USED).
      IN ADDITION, SELECTION OF WHICH RECORDS SHALL BE COMPARED MAY BE
      ACCOMPLISHED BY A USER-WRITTEN MODULE (WRITTEN IN COBOL OR ASSAMBL
      AND NAMES USERS). USERS HAS THE OPTION TO SELECT COMPARISON
      ACCORDING TO ANY OF 1-9 FORMATS.
3.    SYCOMPAR CAN HANDLE THREE TYPES OF FILES :-
           (A) SINGLE-FORMAT FILES. ALL RECORDS ON THE
               FILE ARE OF THE SAME TYPE. THE FILE IS OF
               FIXED FORMAT (RECFM=F OR FB)
           (B) VARIABLE-FORMAT FILES. RECFM=V OR VB; TYPES
               OF RECORD ARE DESCRIBED TO SYCOMPAR BY
               SPECIFYING THEIR RECORD LENGTH. ALL POSSIBLE
               TYPES OF RECORD MUST BE DESCRIBED
           (C) IDENTIFER-FORMAT FILES. TYPES OF RECORD
               ARE DESCRIBED TO SYCOMPAR BY THE VALUE IN A
               1-8 CHARACTER FIELD. FILES CAN BE OF FIXED
               OR VARIABLE FORM.  IT IS POSSIBLE TO USE A
               DEFAULT FORMAT FOR RECORDS NOT OTHERWISE
               DESCRIBED.
      SYCOMPAR CAN COMPARE FILES ON ANY EXTERNAL STORAGE DEVICE
      (INCLUDING CARDS)AND IN EITHER FIXED OR VARIABLE FORMAT. SPANNED
      AND UN-DEFINED FILES FILES ARE NOT SUPPORTED.
4.    THE JOB CONTROL REQUIRED TO RUN SYCOMPAR WITHOUT USER-WRITTEN
      MODULES IS :-
            //S1   EXEC      PGM= SYCOMPAR
           //SYSUDUMP DD SYSOUT = (G,,1)
           //PRINT   DD SYSOUT = (G,,1)
           //PRINTER  DD SYSOUT = (G,,1)
           //COMP1   DD FIRST FILE FOR COMPARISON
                        DCB MUST SHOW RECFM, LRECL & BLKSIZE,
                        EXCEPT THAT FOR A CARD FILE DCB=
                        BLKSIZE=80 IS ADEQUATE
           //COMP2   DD SECOND FILE FOR COMPARISON
                        DCB MUST SHOW RECFM, LRECL & BLKSIZE,
                        EXCEPT THAT FOR A CARD FILE DCB=
                        BLKSIZE=80 IS ADEQUATE
           //SYSIN   DD *
                     PROGRAM CONTROL CARDS
            /*
5.    WHEN USER-WRITTEN ,ODULES ARE INCORPORATION INTO SYCOMPAR, THIS IS
      DONE BY A LINK EDIT RUN. THE PROGRAM'S ENTRY POINT IS NAMED
      SYCOMPAR.
6.    THREE TYPES OF PROGRAM CONTROL CARD USED WITH SYCOMPAR - FILE
      DESCRIPTION, USER EXITS AND RECORD FORMAT CARDS. ONLY ONE FILE
      DESCRIPTION CARD IS ALLOWED,BUT IT MUST ALWAYS BE PRESENT. ONE
      USER EXITS CARD IS ALLOWED, AND IS USED ONLY WHEN USER EXIT MODULE
      WILL BE INCORPORATED INTO THE PROGRAM. ANY NUMBER OF RECORD FORMAT
      CARDS ARE ALLOWED,SUBJECT TO THE RULES DESCRIBED IN PARAGRAPH 9,
      BUT AT LEAST ONE MUST BE PRESENT.  CONTROL CARDS MUST BE ENTERED
      IN THE CORRECT ORDER-FILE DESCRIPTION CARD, USER EXITS CARD,IF
      PRESENT, THEN RECORD FORMAT CARDS IN THEIR CORRECT ORDER (SEE PARA
7.    FILE DESCRIPTION CARD
      CARD COLUMN 1
              RECFM=FV,BLKSIZE=NNNN,IDENT=(MMMM,PÖ,CYPES=Q
      OPERANDS CAN APPEAR IN ANY ORDER, AND IDENT AND CTYPES NEED NOT BE
      PRESENT.
               NNNN=A NUMBER, 1 TO 7294, INDICATING BLOCK SIZE. FOR
               CARIABLE FORMAT FILES THIS NUMBER IS INCLUSIVE OF BLOCK
               AND RECORD COUNTS.
               MMMM=STARTING POSITION OF THE IDENTIFIER FIELD, RELATIVE
               TO THE FIRST BYTE OF THE RECORD TAKEN AS 0. FOR VARIABLE
               FORMAT FILES THE RECORD COUNT SHOULD BE TAKEN AS PART OF
               THE RECORD.
               P = LENGTH IN BYTES (1-8) OF THE IDENTIFIER FIELD
               Q = NUMBER OF RECORD FORMATS (1-9)
               RECFM.  THIS OPERAND IS ALWAYS REQUIRED, TO SHOW WHETHER
               THE FILE IS OF FIXED OR VARIABLE FORMAT.
               BLKSIZE. BLOCK SIZE. ALWAYS REQUIRED
               IDENT. THIS OPERAND IS ENTERED ONLY FOR IDENTIFIER
               FORMAT FILES. IT DEFINES THE POSITION AND LENGTH OF
               THE IDENTIFIER FIELD. ON VARIABLE FILES, THE STARTING
               POSITION OF THE IDENTIFIER FIELD MUST BE LESS THAN THE
               LENGTH OF THE SHORTEST RECORD.
               CTYPES.  THIS OPERAND IS ENTERED FOR IDENTIFIER-FORMAT
               AND VARIABLE-FORMAT FILES.  IT INDICATES THE NUMBER OF
               TYPES OF RECORD THAT MAKE UP THE FILES.
8.    USER EXITS CARD
      CARD COLUMN 1
           USER  EXITS = A
                         (A,B,C-)
      (A,B,C-) IS UP TO 4 SUBPARAMETERS, APPEARING IN ANY ORDER
           S = USER SELECTION EXIT (USERS) IS USED
         X,Y,Z = USER COMPARISON EXIT(S) (USERX,USERY,USERZ) IS/
               ARE USED.
9.    RECORD FORMAT CARDS
      CARD COLUMN 1                    CARD COLUMN 16
       A 'BBBBBBBB'               CD,CCD,CCCD,CCCD,CCCCCD
      A=A LETTER, A TO I, TO INDICATE THE RECORD FORMAT BEING DESCRIBED.
      THIS ENTRY IS MANDATORY ON THE FIRST CARD OF ANY RECORD FORMAT: IF
      THERE IS ONLY ONE FORMAT IT IS CODED AS A. RECORD FORMATS ARE
      ENTERED IN ASCENDING ORDER OF (I) A-I (II) RECORD LENGTH(ONLY
      APPLIES FOR VARIABLE FORMAT FILES).
      BBBBBBBB = ONE TO EIGHT CHARACTERS, IN QUOTES, AS THE VALUE OF THE
      IDENTIFIER FIELD FOR THIS RECORD FORMAT.  IT IS ENTERED ONLY FOR
      IDENTIFIER-FORMAT FIELS. ON THE FINAL FORMAT, THIS MAY BE REPLACED
      BY DEFAULT (NO QUOTES). THIS FORMAT WILL THEN BE USED FOR ALL
      RECORDS NOT COVERED BY EARLIER FORMATS. THE FIRST QUOTE,OR D,
      MUST APPEAR IN COLUMN 3.
      CCC = A NUMBER INDICATING THE END POSITION OF EACH FIELD DEFINED
      FOR THIS RECORD FORMAT. THIS IS RELATIVE TO THE FIRST BYTE OF THE
      RECORD TAKEN AS 1. ON VARIABLE FILES THE RECORD COUNT IS TREATED
      AS PART OF THE RECORD.
      D = A SINGLE CHARACTER INDICATING THE TYPE OF COMPARISON TO BE
      MAKE ON THIS FIELD :-
           B   = CHARACTER-FORM COMPARISON
           N   = NO COMPARISON
           P   = PACKED DECIMAL COMPARISON
         X,Y,Z  = COMPARISON BY USER EXIT MODULE.
                  USERX,USERY OR USERZ.
      FIELD ARE ENTERED ON RECORD FORMAT CARDS IN ASCENDING ORDER OF
      THEIR END POSITIONS. THE ENTIRE RECORD MUST BE COVERED. NO FIELD
      MAY EXCEED 256 BYTES INLENGTH,AND NO PACKED DECIMAL FIELD MAY
      EXCEED 16 BYTES. CONTINUATION CARDS MAY BE USED FOR RECORD FORMAT
      CARDS, THUS :-
               A     12N,16P,28B,102N,103K,
                   321N
      NO MORE THAN 100 FIELDS ARE ALLOWED ON ANY RECORD FORMAT.
10.   A USER SELECTION MODULE MUST HAVE ANTRY NAME USERS, AND HANDLE A
      OARAMETER LIST COMPRISING :-
           (A) ADDRESS OF THE RECORD IN FILE COMP1
           (B) ADDRESS OF THE RECORD IN FILE COMP2
           (C) ADDRESS OF A SINGLE BYTE FIELD(K) USED TO
           RETURN INFORMATION TO SYCOMPAR.
               VALUE OF K ON RETURN         ACTIONS TAKEN BY SYCOMPAR
                  FROM USERS
                    BLANK                   SYCOMPAR CHOOSES THE FORMAT
                                            APPROPRIATE TO COMPARE THESE
                                            RECORDS, AND PERFORMS THE
                                            COMPARISON
                      1                     READS FILE COMP1 AND CALLS
                                            USERS AGAIN
                      2                     READS FILE COMP2 AND CALLS
                                            USERS AGAIN
                      3                     READS LOTH FILES AND CALLS
                                            USERS AGAIN
                     4                      TERMINATES PROCESSING
                     A-I                    CARRIES OUT COMPARISON FOR
                                            THESE RECORDS ACCORDING TO
                                            THE INSTRUCTIONS ENTERED FOR
                                            RECORD FORMAT A-I
11.   USER-COMPARISON MODULES MUST HAVE ENTRY NAME USERX,USERY,OR USERZ,
      AND HANDLE A PARAMETER LIST COMPRISING :-
           (A) ADDRESS OF THE FIELD TO BE TESTED ON COMP1 RECORD
           (B) ADDRESS OF THE FIELD TO BE TESTED ON COMP2 RECORD
           (C) ADDRESS OF A PROPERLY ALIGNED HALFWAY CONTAINING
               THE FIELD'S LENGTH IN BYTES
           (D) ADDRESS OF K
                   VALUE OF K ON RETURN
                   FROM USERX,Y OR Z
                   N           TEST FAILED
                   Y OR OTHER VALUE TEST SUCCESSFUL.
12.   WHEN A COMPARISON FAILS, BOTH RECORDS ARE PRINTED IN HEXADECIMAL
      FORMAT, TOGETHER WITH A MESSAGE. AFTER 10 COMPARISON FAILS, THE
      PROGRAM TERMINATES. MESSAGES ARE ALSO PUT OUT FOR : RECORD FOR
      WHICH A FORMAT CANNOT BE FOUND, FILES OF UNEQUAL LENGTH, FILES CAN
      NOT BE HANDLED BECAUSE OF INACCURATE DCE INFORMATION, AND CONTROL
      CARD ERRORS.
13.   FOR UNUSUAL COMPARISONS AND FOR MAINTENANCE CONTACT I R CORNALL.
