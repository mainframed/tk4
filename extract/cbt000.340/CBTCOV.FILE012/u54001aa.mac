*   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *
*
    THE INFORMATION PROVIDED ON THIS TAPE IS DOCUMENTATION ONLY. IF YOU
WOULD LIKE TO USE THIS PROGRAM, WE CAN SUPPLY YOU WITH THE LOAD MODULE(S
NECESSARY. WE ARE ALSO WILLING TO CONSIDER AMENDING, AT YOUR REQUEST, AN
MODULES SUPPLIED BY US, WITHIN REASON.  DUE TO CONDITIONS IMPOSED UPON U
HOWEVER, WE CANNOT SUPPLY SOURCE DECKS, NOR A GUARANTEE OF UNLIMITED
SUPPORT.
    IF YOU WOULD LIKE TO USE THIS PROGRAM, PLEASE CONTACT
EITHER        RICHARD SWAN         OR   JANET HOW
              SYSTEMS PROGRAMMING,
              SUN ALLIANCE & LONDON INSURANCE GROUP,
              SUN ALLIANCE HOUSE,
              NORTH STREET,
              HORSHAM, SUSSEX.     RH12 1BT.
 OR TELEPHONE  HORSHAM (0403) 64141  EXT. 214, 6163 OR 544
*
*   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *
                         DISKRDR                       MARCH 1972

     DISKRDR IS CALLED FROM THE CONSOLE, BY USING A 'D U=' COMMAND.
 IN ORDER TO MAKE THIS COMMAND ACCEPTABLE TO THE SYSTEM, TWO SUPERZAPS A
 REQUIRED. ONE OF THESE SUPERZAPS CHANGES AN UNUSED ENTRY IN THE DISPLAY
 MONITOR TABLE TO 'U='. THE SECOND CHANGES THE CORRESPONDING ENTRY IN TH
 BRANCH TABLE TO BRANCH TO THE DISPLAY UNITS ROUTINE.

     A FURTHER SUPERZAP TO IEESD562 CAUSES THIS MODULE TO GIVE CONTROL T
 IEEUNITS INSTEAD OF IEEUNIT1.  IEEUNITS DETERMINES IF THE COMMAND IS A
 'D U ' OR A 'D U=' COMMAND. IF 'D U ' IT TRANSFERS CONTROL TO IEEUNIT1;
 IF 'D U=' IT TRANSFERS CONTROL TO DISKRDR.

     DISKRDR CONSISTS OF SEVEN MODULES, IEEDRDR1 THROUGH 7. THE FUNCTION
 AND PURPOSE OF EACH ARE DESCRIBED BELOW.

IEEDRDR1.

     THIS MODULE GAINS CONTROL FROM IEEUNITS WHEN A 'D U=' COMMAND IS
 ENCOUNTERED. IT GETS STORAGE FROM SQS FOR A WORK AREA, INITIALISES IT T
 BLANKS OR ZEROES, VALIDITY CHECKS THE OPERATOR COMMAND AND GIVES CONTRO
 TO IEEDRDR2.

IEEDRDR2.

     THIS MODULE MAY RECEIVE CONTROL FROM ANY OF THE OTHER IEEDRDR MODUL
 ITS PURPOSE IS TO ANALYSE SWITCHES SET BY THE CALLING MODULE, TO
 DETERMINE WHICH MODULE IS TO RECEIVE CONTROL NEXT. WHEN THE JOB IS
 COMPLETED, IT DE-QUEUES ANY RESERVED I/O DEVICE, FREES THE STORAGE USED
 BY THE WORK AREA AND THE CSCB, AND RETURNS TO THE MASTER SCHEDULER.
 DE-QUEUING MAY ALSO BE PERFORMED BEFORE THE JOB IS TERMINATED, WHEN MOR
 THAN ONE DEVICE IS IN USE. EACH DEVICE IS DE-QUEUED WHEN IT IS FINISHED
 WITH, BEFORE RESERVING THE NEXT DEVICE.

IEEDRDR3.

     THIS MODULE SEARCHES FOR A UCB, DEPENDING ON THE OPERATOR COMMAND.
 WHEN IT FINDS ONE, IT SETS UP A UNIT STATUS MESSAGE. IF THE COMMAND IS
 'D U=ALL,DSNAME'  THE MESSAGE IS NOT YET PRINTED, AS THE DATASET HAS NO
 YET BEEN FOUND. OTHERWISE THE MESSAGE IS PRINTED. CONTROL IS THEN
 RETURNED TO IEEDRDR2.

IEEDRDR4.

     RECEIVES CONTROL FROM IEEDRD2, WHEN A UCB HAS BEEN FOUND, AND THE
 DEVICE IS ONLINE AND READY. THIS MODULE RESERVES THE DEVICE, SETS UP
 CONTROL BLOCKS IN THE WORK AREA IN PREPARATION FOR I/O, AND READS IN TH
 VOLUME LABEL. IT CHECKS THE VOLUME SERIAL NUMBER ON THE LABEL AGAINST
 THAT IN THE UCB. IT THEN RETURNS CONTROL TO IEEDRDR2.

IEEDRDR5.

     RECEIVES CONTROL FROM IEEDRDR2 WHEN A DATA SET IS TO BE SEARCHED FO
 THIS MODULE USES OBTAIN TO FIND THE DATA SET. IF FOUND, A
 'DATA SET FOUND' MESSAGE IS PRINTED, FOLLOWED BY A MESSAGE GIVING
 INFORMATION ON THE DATA SET, AS SPECIFIED IN THE DSCB. IF THE COMMAND W
 'D U=ALL,DSNAME' THE UNIT STATUS MESSAGE IS PRINTED OUT AT THIS TIME.
 CONTROL IS THEN RETURNED TO IEEDRDR2.

IEEDRDR6.

     RECEIVES CONTROL FROM IEEDRDR2. THIS MODULE READS IN THE FORMAT 4
 VTOC DSCB FOR THE VOLUME. IT STORES INFORMATION FROM THIS IN THE WORK
 AREA. IF A DATA SET HAS BEEN SEARCHED FOR BUT NOT FOUND, OR HAS BEEN
 FOUND BUT IS NOT A PDS, CONTROL IS RETURNED TO IEEDRDR2. OTHERWISE THIS
 MODULE PREPARES THE CONTROL BLOCKS FOR READING IN DIRECTORY BLOCKS. IF
 SEARCH FOR A MEMBER HAS NOT BEEN SPECIFIED, CONTROL IS THEN RETURNED TO
 IEEDRDR2. OTHERWISE THE MEMBER IS SEARCHED FOR. IF IT IS FOUND, A
 'MEMBER FOUND' MESSAGE IS PRINTED, FOLLOWED BY MESSAGES SHOWING THE
 ATTRIBUTES OF THE MEMBER. CONTROL IS THEN RETURNED TO IEEDRDR2.

IEEDRDR7.

     RECEIVES CONTROL FROM IEEDRDR2. THIS MODULE PRINTS FREE SPACE
 MESSAGES AS FOLLOWS. IF A PDS HAS BEEN FOUND, IT READS THE DIRECTORY
 BLOCKS, TOTALLING THE NUMBER OF UNUSED ONES, AND PRINTS A MESSAGE. THEN
 IT READS THE FORMAT 5 DSCB'S (FREE SPACE), AND TOTALS THE NUMBER OF FRE
 CYLINDERS AND TRACKS, AND PRINTS A MESSAGE FOR THIS. CONTROL IS THEN
 RETURNED TO IEEDRDR2.

FORMAT OF COMMAND.

     THE COMMAND IS TYPED INTO THE CONSOLE, IN THE SAME WAY AS OTHER
 DISPLAY COMMANDS. THE FORMAT IS AS FOLLOWS.

D U=(UNIT  )(,DSNAME)(,MEMBER)
    (VOLSER)
    (ALL   )

    OPERAND  OPERAND  OPERAND
       1        2        3

 WHERE OPERAND 1 MAY BE EITHER A UNIT ADDRESS E.G. D U=150
                     OR A VOLUME SERIAL NUMBER E.G. D U=DISK11
                     OR THE KEYWORD 'ALL' WHICH WILL PROCESS ALL MOUNTED
                         DIRECT-ACCESS UNITS
 OPERAND 2 IS OPTIONAL. IF SPECIFIED IT SHOULD BE PRECEDED BY A COMMA, A
 CAN BE UP TO 44 CHARACTERS IN LENGTH. DISKRDR WILL SEARCH THE DISK
 SPECIFIED FOR A DATASET OF THIS NAME AND PRINT A MESSAGE OF 'FOUND' OR
 'NOT FOUND' AS APPROPRIATE. IF IT IS FOUND. DATA FROM THE DSCB WILL BE
 PRINTED.

 OPERAND 3 IS OPTIONAL. OPERAND 2 MUST BE PRESENT IF OPERAND 3 IS SPECIF
 IF THE DSNAME SPECIFIED REFERS TO A PARTITIONED DATA SET (LIBRARY),
 OPERAND 3 WILL REFER TO A MEMBER TO BE FOUND IN THAT LIBRARY. THIS OPER
 MAY BE UP TO 8 CHARACTERS IN LENGTH. IF THE MEMBER IS FOUND, A 'MEMBER
 FOUND' MESSAGE, TOGETHER WITH THE ATTRIBUTES OF THE MEMBER, IS PRODUCED

EXAMPLES.
     A COMMAND OF
D U=DISK01,SYS1.PROCLIB,RDR
     WOULD SEARCH DISK01 FOR A DATASET CALLED SYS1.PROCLIB, AND IF IT WA
     FOUND,SEARCH THAT DATASET FOR A MEMBER CALLED RDR. IF THE DISK
     'DISK01' WERE MOUNTED ON A UNIT ADDRESS OF 152, A COMMAND OF
D U=152,SYS1.PROCLIB,RDR    WOULD ACHIEVE THE SAME RESULT.

     A COMMAND OF
D U=DISK01
     WOULD RETURN THE FREE SPACE AND AVAILABLE DSCB'S TO THE CONSOLE.

