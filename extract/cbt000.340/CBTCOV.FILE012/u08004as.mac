* THIS PROGRAM PRODUCED BY BRITISH STEEL CORPORATION CORBY
* REFER ANY PROBLEMS TO MALCOLM SISMEY TEL 053-66-2121 EXT 729
         TITLE 'SORCERER - P.J.CHISLETT 31/10/72'
*     SORCERER CALLS SYDELINK TO PRODUCE A FILE OF OBJECT MODULES.
*     THIS FILE IS COPIED TO A WORK FILE AN OBJECT MODULE AT A TIME.
*     EACH OBJECT MODULE IS INPUT INTO THE DISASSEMBLER PROGRAM.
*     AFTER DISASSEMBLY, CONTROL IS RETURNED TO SORCERER FOR THE
*     NEXT OBJECT MODULE TO BE COPIED.
         SPACE 5
SORCERER BEGIN
         LA    2,0                     INITIALIZE OBJ.MOD COUNT
         L    15,=V(DELINK0)
         BALR  14,15                   LINK TO SYDELINK
         SPACE 2
         OPEN  (OBJMODS)
         SPACE 4
NEXTOBJ  OPEN  (WORKDCB,(OUTPUT))
GETREC   GET   OBJMODS
         LR    0,1
         PUT   WORKDCB                 COPY OBJMOD RECORD TI WORKFULE
         CLC   0(4,1),=C'END'         END OF OBJ.ODULE/Q
         BNE   GETREC                  NO - COPY NEXT RECORD
         CLOSE (WORKDCB)
         SPACE 4
*    DISASSEMBLE OBJECT MODULE
         LINK  EP=IMM,ID=0
         LA    2,1(2)                  INCREMENT OBJ. MOD COUNT
         STH   2,*-6                   INSERT COUNT IN LINK ID.
         B     NEXTOBJ
         SPACE 5
EOJ      CLOSE (WORKDCB,,OBJMODS)
         L     13,4(13)
         RETURN (14,12),,RC=0
         EJECT
OBJMODS  DCB   DDNAME=SYSPUNCH,DSORG=PS,MACRF=(GL),EODAD=EOJ
         SPACE 5
WORKDCB  DCB   DDNAME=RDDD,DSORG=PS,MACRF=(PM),RECFM=F,LRECL=80,       X
               BLKSIZE=80
         END
