         TITLE 'ALLOC DDNAME AND VOLUME WITH NO DSN'
** MODULE PROLOG
*
*  FUNCTION:  TO ALLOCATE A DD WITH JUST A UNIT AND VOLUME
*             FOR USE BY TSO CLIST'S, PGM'S AND CP'S.
*
*  MACROS:    $PROLOG,$EPILOG,$VGET,VGETSUB,ALLOC,S99FAIL
*
*  ISPF VARIABLES USED:  QVOL = VOLUME SERIAL NUMBER
*                        QUNIT= UNIT TYPE
*                        QDDN = DDNAME TO BE ALLOCATED
*
*  THIS  IS AN ISPF PROGRAM AND MUST BE INVOKED AS SUCH
*
         EJECT
QALLOC   $PROLOG
         $VGET QVOL
         MVC   QVOL,0(R1)
         $VGET QDDN
         MVC   QDDN,0(R1)
         $VGET QUNIT
         MVC   QUNIT,0(R1)
         ALLOC DDN=DDN,UNIT=UNIT,VOL=VOL,DISP=SHR,ERROR=S99FAIL
         $EPILOG 0
         EJECT
S99FAIL  S99FAIL
         $EPILOG 16
         EJECT
         VGETSUB
         EJECT
*        DATA  AREAS
         SPACE
VOL      DC    A(QVOL),Y(6)
QVOL     DC    CL6' '
         SPACE
UNIT     DC    A(QUNIT),Y(8)
QUNIT    DC    CL8' '
         SPACE
DDN      DC    A(QDDN),Y(8)
QDDN     DC    CL8' '
         SPACE  2
         DYNSPACE
         EJECT
         IEFZB4D0
         EJECT
         IEFZB4D2
         END
