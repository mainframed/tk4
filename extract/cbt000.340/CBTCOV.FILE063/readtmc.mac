         MACRO
&NAME    READTMC &DCBNAME,&IOAREA,&EOD=
         GBLB  &READTMC
*        READTMC MACRO   UCC-ONE (TMS)      04-23-74    CHG-LVL 4.0
         AIF   ('&DCBNAME' EQ '').ERR01
         AIF   ('&DCBNAME'(1,1) EQ '(').ERR02
         AIF   (&READTMC).NOT1ST  B IF NOT 1ST GENERATION
$TMCEOD  EQU   33-1 .             RELATIVE ADDR OF DCBEODAD
&READTMC SETB  1                  INDICATE EQU GENERATED
.*
.NOT1ST  ANOP
         AIF   ('&IOAREA' EQ '').NOIO
&NAME    GET   &DCBNAME,&IOAREA . READ TMC RECORD
         AGO   .TESTEOD
.*
.NOIO    ANOP
&NAME    GET   &DCBNAME .         READ TMC RECORD
.*
.TESTEOD ANOP
         CLI   0(R1),X'FF' .      Q. EOD
         BNE   $NED&SYSNDX .         A. UNEQUAL - NO
         AIF   ('&EOD' EQ '').DCBEOD
         LA    R15,&EOD .        POINT TO EOD ADDR
         AGO   .TOEOD
.DCBEOD  ANOP
         L     R15,&DCBNAME+$TMCEOD .  POINT TO EOD ADDR
.TOEOD   ANOP
         BR    R15 .                   AND BRANCH TO EOD RTN
*
$NED&SYSNDX DS    0H
         MEXIT
.*
.ERR01   MNOTE 'DCB NAME MUST BE SPECIFIED'
         MEXIT
.ERR02   MNOTE 'REGISTER NOTATION OF DCB NAME IS NOT ALLOWED'
         MEXIT
         MEND
