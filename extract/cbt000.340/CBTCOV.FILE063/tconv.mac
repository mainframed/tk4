         MACRO
&LABEL   TCONV &BTIME,&CTIME,&REG
.*
.*       THIS MACRO WILL CONVERT AN SMF BINARY TIME STAMP TO A
.*       PRINTABLE CHARACTER FORMAT OF 'HH:MM:SS'.
.*
.*       &BTIME  THE SMF TIME (BL4)
.*       &CTIME  THE CHARACTER TIME (C MIN LENGTH 8)
.*       &REG    ANY UNUSED REGISTER (EXCEPT 0)
.*
&LABEL   DS    0H
         ANOP
         MVC   BL04&SYSNDX,&BTIME
         L     &REG,BL04&SYSNDX
         CVD   &REG,PL08&SYSNDX
         DP    PL08&SYSNDX,=PL4'360000'
         UNPK  CL08&SYSNDX,PL4A&SYSNDX
         OI    CL08&SYSNDX+7,C'0'
         MVC   &CTIME.(2),CL08&SYSNDX+6
         MVC   &CTIME.+2(1),=CL1':'
         MVC   PL4A&SYSNDX,=BL4'0'
         DP    PL08&SYSNDX,=PL4'6000'
         UNPK  CL08&SYSNDX,PL4A&SYSNDX
         OI    CL08&SYSNDX+7,C'0'
         MVC   &CTIME.+3(3),CL08&SYSNDX+6
         MVC   &CTIME.+5(1),=CL1':'
         MVC   PL4A&SYSNDX,=BL4'0'
         DP    PL08&SYSNDX,=PL4'100'
         UNPK  CL08&SYSNDX,PL4A&SYSNDX
         OI    CL08&SYSNDX+7,C'0'
         MVC   &CTIME.+6(2),CL08&SYSNDX+6
         B     TCON&SYSNDX
*
            DS 0D
BL04&SYSNDX DS BL4
            DS 0D
PL08&SYSNDX DS 0PL08
PL4A&SYSNDX DS PL4
PL4B&SYSNDX DS PL4
*
CL08&SYSNDX DS CL8
*
TCON&SYSNDX DS 0H
         MEND
