PROC 1 MODULE RENT TEST NOPRINT DEBUG X1() X2() X3() REV S1 S2 TARGET
IF &DEBUG EQ DEBUG THEN CONTROL LIST PROMPT CONLIST SYMLIST FLUSH MSG
   ELSE CONTROL NOMSG NOLIST FLUSH NOPROMPT
SET &L    = NOLOAD
SET &P    = &STR(&MODULE)
SET &Q    = &P
SET &R    = &STR()
SET &PREF = &STR(SYS1)
IF  &TARGET = TARGET THEN SET &PREF = &STR(SYSTC2)
IF  &S1=S1 AND &R EQ &STR() THEN SET &R = &STR('SSU.STRUMAC')
IF  &S2=S2 AND &R EQ &STR() THEN SET &R = &STR('SSU.STRUMAC2')
IF  &SUBSTR(1:1,&STR(&MODULE)) EQ &STR(( THEN                          -
    DO
     SET &P=&SUBSTR(2:&LENGTH(&STR(&MODULE))-1,&STR(&MODULE))
     SET &Q=&STR(((&Q)))
    END
IF  &LENGTH(&X1) ^= 0 THEN +
   DO
   IF &SUBSTR(1:1,&X1) ^= " THEN SET &X1 =                             -
'&SYSPREF..&SUBSTR(1:&LENGTH(&X1),&X1)'
     ELSE SET &X1 = '&SUBSTR(2:&LENGTH(&X1)-1,&X1)'
   END
IF  &LENGTH(&X2) ^= 0 THEN +
   DO
   IF &SUBSTR(1:1,&X2) ^= " THEN SET &X2 =                             -
'&SYSPREF..&SUBSTR(1:&LENGTH(&X2),&X2)'
     ELSE SET &X2 = '&SUBSTR(2:&LENGTH(&X2)-1,&X2)'
   END
IF  &LENGTH(&X3) ^= 0 THEN +
   DO
   IF &SUBSTR(1:1,&X3) ^= " THEN SET &X3 =                             -
'&SYSPREF..&SUBSTR(1:&LENGTH(&X3),&X3)'
     ELSE SET &X3 = '&SUBSTR(2:&LENGTH(&X3)-1,&X3)'
   END
ASK: WRITE DO YOU WISH AN OBJECT MODULE?
READ &ANS
IF &LENGTH(&ANS)     = 0 THEN GOTO ASK
IF &SUBSTR(1:1,&ANS) = N THEN GOTO NOLOAD
WRITE ENTER OBJECT MODULE MIDDLE INDEX LEVEL:
READ &ANS
SET &L = LOAD(&ANS)
NOLOAD: IF &DEBUG NE DEBUG THEN CONTROL NOMSG LIST
IF &NOPRINT = NOPRINT THEN GOTO LISTNOT
IF &SUBSTR(1:1,&MODULE) EQ ' THEN +
  DO
X:     WRITE ENTER PRINT DATA SET MIDDLE INDEX LEVEL:
       READ &ANS
       IF &LENGTH(&ANS) = 0 THEN GOTO X
    ELSE +
       SET &P = &ANS
  END
  IF &REV EQ REV THEN                                                  -
     DO
       ASMH &STR(&Q) LIST XREF(SHORT) PRINT(&P) RLD ESD LIB( &R        -
'&PREF..MACLIB' 'SYS1.AMODGEN'  'SSU.MACLIB' 'SSU.TSOMAC' &X1 &X2 &X3) -
&L &RENT &TEST   NOMACLIB
     END
  ELSE ASMH &STR(&Q) LIST XREF(SHORT) PRINT(&P) RLD ESD LIB( &R        -
'&PREF..MACLIB' 'SYS1.AMODGEN' 'SSU.MACLIB'  'SSU.TSOMAC' &X1 &X2 &X3) -
&L &RENT &TEST   NOMACLIB
EXIT QUIT
LISTNOT: IF &REV EQ REV THEN                                           -
            DO
            ASMH &STR(&Q) NOPRINT &L LIB( &R '&PREF..MACLIB'           -
'SYS1.AMODGEN'  'SSU.MACLIB' 'SSU.TSOMAC' &X1 &X2 &X3) &RENT &TEST     -
NOMACLIB
            END
          ELSE ASMH &STR(&Q) NOPRINT &L LIB( &R '&PREF..MACLIB'        -
'SYS1.AMODGEN' 'SSU.MACLIB'  'SSU.TSOMAC' &X1 &X2 &X3) &RENT &TEST     -
NOMACLIB
