         MACRO
         RAFKNBX  &TYPE=DSECT
*C603000-627000                                                 A45668
.*C660000                                                        A34598
         AIF   ('&TYPE' EQ 'CSECT').CSECT
         AIF   ('&TYPE' EQ 'DSECT').DSECT
         MNOTE 12,' INCORRECT TYPE FIELD ***'
         MEXIT
.CSECT   ANOP
IHKNBX   CSECT
         AGO   .CONT
.DSECT   ANOP
RAFKNBX  DSECT
.CONT    ANOP
***********************************************************************
***********************************************************************
*                           I H K N B X                               *
*                                                                     *
*      THIS CONTROL BLOCK IS GENERATED BY THE 'RAFKNBX' MACRO.        *
*                                                                     *
*                 RAFKNBX  TYPE=CSECT                                 *
*                       OR                                            *
*                 RAFKNBX  TYPE=DSECT                                 *
*                                                                     *
*      THIS CONTROL BLOCK PROVIDES CONSTANTS, CONTROL FIELDS,         *
*      WORK AREAS AND BUFFER DEFINITION MACROS THAT ARE REQUIRED      *
*      BY THE AFIO AND LIBRARY I/O.                                   *
***********************************************************************
***********************************************************************
***********************************************************************
*
         EJECT
         SPACE 3
***********************************************************************
*                                                                     *
*                     LIBIO FIELDS AND WORK AREAS                     *
*                                                                     *
***********************************************************************
         SPACE  5
BPCNTSAV DS    H .                     COUNT OF LOGICAL RECORDS/BLOCK
         READ  BPDECB,SF,MF=L
BPPTRFS  DC    A(0) .                   BPAM PARAMETER PTR
BPDCBPTR DC    V(BPDCB) .              BPAM DCB POINTER
BPJFCBAD DC    A(0) .                   STO FOR JFCB
SFBUFF1  DC    A(1) .                   BUFFER PTR STO ADDRESS
SFBUFF2  DC    A(1) .                   SECONDARY BUFFER (UNUSED)
BPQCTLFW DC    A(*+4),X'80',AL3(0)     BPAM QUEUE CONTROL
BPPARMFS DS    D
         SPACE
BPBLDLST DS    0H .                     BUILD LIST FOR BPAM
BPFF     DC    H'0' .                   NUMBER OF ENTRIES
BPLL     DC    H'0' .                   LENGTH OF EACH ENTRY
         DS    CL8
         DS    XL4
         DS    XL2
KFDI     EQU   28
BPFDI    EQU   *-2
         DS    CL28                     AREA FOR FDI
         EJECT
         SPACE 3
***********************************************************************
*                                                                     *
*                 AFIO WORK AREAS AND CONTROL FIELDS                  *
*                                                                     *
***********************************************************************
         SPACE
TRACKSFW DC    2A(0)              TRACK ALLOCATOR TABLE POINTERS
AREA1FW  DC    V(IHKIRP)               RESTRICTED WORKAREA
AREA2FW  DC    V(IHKEXF)               EXTENDED WORKAREA
AFQCTLFW DC    A(*+4),A(0)        ACTIVE FILE I/O QUEUE CONTROL
NXTTRK   DS    F                       ADDR OF TAT BELOW WJICH
*                                        ALL BITS ARE ZERO
F1WORK   DS    0F
F5WORK   DS    0CL20
UCBTYPE  DS    F
         DS    4F
TRTABLE  DS    0CL256
         DC    X'00'
         DC    X'08'
         DC    2X'07'
         DC    4X'06'
         DC    8X'05'
         DC    16X'04'
         DC    32X'03'
         DC    64X'02'
         DC    128X'01'
DEVCHAR DS     0CL10                   DEVICE CHARACTERISTICS
NUMHEADS DS    H                       # OF HEADS PER CYLINDER
UMAXAVAL DS    H                       MAMIMUM TRAC  LENGTH
UC1FW    DS    H                       BLOCK OVERHEAD - LAST BLOCK
UC12FW   DS    H                       BLOCK OVERHEAD - OTHERS
UC3FW    DS    H                       TOLERANCE FACTOR
ALTAB3   DS    0CL8
         DC    B'01111111',B'10111111',B'11011111',B'11101111'
         DC    B'11110111',B'11111011',B'11111101',B'11111110'
ACTIVEKN DC    CL8'ACTIVE'             ACTIVE AREA DDNAME
UC4FW    DC    H'512'             TOLERANCE CONSTANT TWO
MAXSEGFW EQU   200 .                   MAXIMUM NUMBER OF SEGMENTS
MXNMSGFW DC    YL1(MAXSEGFW) .         HIGHEST NUMBER SEGMENT
AFDEVTKN DC    XL1'00' .          "ACTIVE" DEVICE TYPE FROM UCB
D2314    EQU   X'08' .            UCB CODE FOR 2314 DISK
*
* GLOBAL AND PRIVATE ACTIVE FILE DEFINITIONS (NUMBER AND RECORD AND
*        BUFFER FORMATS TO BE USED).
*
MASTRKFW DC    F'0'               TRACK ADDRESS OF MASTER INDEX
ACTDEFKN DS    0CL8               MASTER INDEX PREFIX
GBLCNTKN DC    Y(8)                    NUMBER OF GLOBAL FILES
PRVCNTKN DC    Y(2)               MAXIMUM NUMBER PRIVATE FILES PER LINE
LINCNTFW DC    Y(0)               NUMBER OF LINES ATTACHED TO SYSTEM
MASLGHFW DC    Y(0)               LENGTH OF MASTER INDEX
MIDCYLFW DC    H'0' .             "MEAN" CYL. NO. * 4, ACCESS = 1
BUFTLGFW DC    Y(L'BUFTABFW)      LENGTH OF BUFFER FORMAT TABLES
LRCHANFW DC    Y(0) .             MAXIMUM LENGTH OF RECORD CHAIN
LTKCHNFW DC    Y(0) .             MAXIMUM LENGTH OF TRACK CHAIN
         EJECT
*
***********************************************************************
*
*   RECORD DEFINITIONS FOR RECORDS THAT MAY EXIST IN THE ACTIVE
*   AREA  - DEFINED BY RECDEF MACROS - THESE MACROS DESCRIBE KEY
*   LENGTH AND DATA LENGTH.
*
*
***********************************************************************
RECTABFW DS    0CL16              ORIGIN OF RECORD DISCRIPTION TABLES
AFRNFW   DS    0CL8               RECORD DEFINITION CONSTANTS
R1       RECDEF 8,80,X                  NORMAL LINE
R2       RECDEF 8,72,X                  UTILITY FILE REC DEF
*
***********************************************************************
*
*   BUFFER DEFINITIONS DESCRIBING BUFFER BLOCKSIZE,LOGICAL BUFFER
*   SIZE,KEY POSITION AND DATA POSITION FOR BUFFERS REQUIRED FOR
*   VARIOUS AFIO OPERATIONS - DESCRIBED BY BUFDEF MACROS.
*
*
***********************************************************************
BUFTABFW DS    0CL10              ORIGIN OF BUFFER DEFINITIONS
B1       BUFDEF  880,80,0,0
B2       BUFDEF  80,80,0,0
B3       BUFDEF  880,80,28,0
B4       BUFDEF  80,80,28,0
B5       BUFDEF  880,88,0,8
B6       BUFDEF  88,88,0,8
B7       BUFDEF  880,80,72,0
B8       BUFDEF  80,80,72,0
*
***********************************************************************
*
*   RECORD TYPE DEFINITIONS DEFINING THE RECORD DEFINITIONS USED
*   FOR EACH OF THE GLOBAL FILES AND THE ACTIVE AREA.
*
*
***********************************************************************
RECTYPFW DS    0C                 ORIGIN OF RECORD TYPE BY FILE
RG1      AFRECTYP R1
RG2      AFRECTYP R1
RG3      AFRECTYP  R1
RG4      AFRECTYP R1
RG5      AFRECTYP  R1
RG6      AFRECTYP R1
RG7      AFRECTYP R1
RG8      AFRECTYP R1
RP1      AFRECTYP R1
RP2      AFRECTYP R1
*
***********************************************************************
*
*BUFFER TYPE DEFINITIONS DEFINING THE BUFFER DEFINITIONS USED
*   FOR EACH OF THE AFIO OPERATIONS,MULTIPLE AND SINGLE, DEFINED
*   FOR EACH OF THE GLOBAL FILES AND THE ACTIVE AREA.
*
***********************************************************************
*
BUFTYPFW DS    0CL6               ORIGIN OF BUFFER INDEX BY MACRO/FILE
BG1      AFBUFTYP  B2,B2,B1,B2,B2,B1
BG2      AFBUFTYP  B2,B2,B1,B2,B2,B1
BG3      AFBUFTYP  B8,B8,B7,B8,B8,B7
BG4      AFBUFTYP  B2,B2,B1,B2,B2,B1
BG5      AFBUFTYP  B4,B4,B3,B4,B4,B3
BG6      AFBUFTYP  B6,B6,B5,B6,B6,B5
BG7      AFBUFTYP  B6,B6,B5,B6,B6,B5
BG8      AFBUFTYP  B6,B6,B5,B6,B6,B5
BP1      AFBUFTYP  B6,B6,B5,B6,B6,B5
BP2      AFBUFTYP  B6,B6,B5,B6,B6,B5
         DS    0F
ARCSGSVA DC    A(0) .                  ADDRESS OF SEG-LIST SAVE AREA
MXSGLNFW DC    0H'0',AL2(MAXSEGFW*16+16)   MAX LENGTH OF SEGMENT LIST
KBXNY    DS    0F .                     NEW YORK PATCH SPACE
MXLBUFKN DC    H'880' .
BPAMEOD  DC    X'FFFFFFFFFFFFFFFF' .   DIRECTORY EOD (BPAM)
LINCNTKN DC    H'100'                  COUNT OF LINES
         DS    0F
TIOTADR  DS    F                       TIOT ADDRESS
*                                      ORDER BYTE OF REGISTER
         EJECT
***********************************************************************
***********************************************************************
*                                                                     *
*                    AFIO GLOBAL FILE CONTROL AREAS                   *
***********************************************************************
GBFORGFW DS    0CL80                   ORIGIN OF GLOBAL FILE-CTL ENTRS
         DC    A(*+4),19F'0'           GLOBAL FILE 1
         DC    A(*+4),19F'0'           GLOBAL FILE 2
         DC    A(*+4),19F'0'           GLOBAL FILE 3
         DC    A(*+4),19F'0'           GLOBAL FILE 4
         DC    A(*+4),19F'0'           GLOBAL FILE 5
         DC    A(*+4),19F'0'           GLOBAL FILE 6
         DC    A(*+4),19F'0'           GLOBAL FILE 7
         DC    A(*+4),19F'0'           GLOBAL FILE 8
GBFCLGKN DC    Y(L'GBFORGFW) .    LENGTH OF EACH GBL FILE-CTL ENTRY
***********************************************************************
*                                                                     *
*                    QUEUE CONTROL ELEMENTS                           *
*                                                                     *
***********************************************************************
SYNQCTEL DC    A(*+4),A(0)             SYNTAX CHKR INTERFACE Q CTL
SUBQCTEL DC    A(*+4),A(0)             SUBMIT CP Q CTL ELEMENT
OSDSQCTL DC    A(*+4),A(0)             EOS CP Q CTL ELEMENT
RERQCTEL DC    A(*+4),A(0)             OUTPUT QUEUE CTL ELEMENT
PODCBCS  DCB   DSORG=PO,MACRF=(R,W)                              A34598
PSDCBCS  DCB  DSORG=PS,MACRF=(R,W),DEVD=DA,RECFM=F,NCP=1
         SPACE 2
***********************************************************************
*                                                                     *
*      CONSTANTS
***********************************************************************
F8KN     DC    0F'0',H'0'
H8KN     DC    H'8'
F5KN     DC    0F'0',H'0'
H5KN     DC    H'5'
F16KN    DC    0F'0',H'0'
H16KN    DC    H'16'
F256KN   DC    0F'0',H'0'
H256KN   DC    H'256'
KF2T24KN DC    0F'0',X'00FFFFFF'
H2KN     DC    H'2'
H4KN     DC    H'4'
H6KN     DC    H'6'
KH7KN    DC    H'7'
H12KN    DC    H'12'
H20KN    DC    H'20'
H24KN    DC    H'24'
KH32KN   DC    H'32'
H88KN    DC    H'88'
KH128KN  DC    H'128'
X3BIT0KN DC    0F'0',X'00FFFFF8'
H792KN   DC    H'792'
K8X40KN  DC    8X'40'
C7BLKN   EQU   K8X40KN                 7 BLANKS TO PRECEDE WR2 CHARACTR
K8XF0KN  DC    8X'F0'
CLASTKN  DC    C'LAST'
*      MODULE ENTRY POINTS
         SPACE
AFIOEP  DC  V(IHKAFI)
EXBASELK  DC  V(IHKEXC)
CCWSRTLK  DC  V(IHKGCW)
RERQCTL  DC    A(*+4),A(0)             SUBMIT QUE CONTROL ELEMENT
         MEND
