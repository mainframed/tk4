         MACRO
         TDISPD
.*A937600                                                        S22027
.*A937300                                                        S22026
IEDQDISP DSECT
         DS    27H
         SPACE 2
***  THIS ROUTINE DISPATCHES TAM SUBTASKS.  IF NO TAM SUBTASKS
*        ARE READY TO RUN, IT WILL PLACE THE TAM MESSAGE CONTROL
*        PROGRAM INTO A SYSTEM WAIT.
         SPACE 1
***  ENTRY TO THIS ROUTINE SHOULD HAVE THE FOLLOWING REGISTERS
*        INITIALIZED:
*
*        11       CONTAINS ADDRESS ASSIGNED TO IEDQEA
*        13       CONTAINS ADDRESS ASSIGNED TO AVTSAVE2
DSPDISP  DS    2H
         SPACE 2
***  THIS ROUTINE WILL QPOST ALL ITEMS IN A LIST.  THE LAST ENTRY
*        MUST HAVE ITS HI-ORDER BIT TURNED ON.
         SPACE 1
***  ENTRY TO THIS ROUTINE SHOULD HAVE THE FOLLOWING REGISTERS
*        INITIALIZED:
*
*         1       CONTAINS ADDRESS OF FIRST ENTRY IN A LIST OF
*                          ITEMS TO BE PLACED ON READY QUEUE BY
*                          PRIORITY
*        11       CONTAINS ADDRESS ASSIGNED TO IEDQEA
*        13       CONTAINS ADDRESS ASSIGNED TO AVTSAVE2
DSPLIST  DS    2H
         SPACE 2
***  THIS ROUTINE WILL QPOST ALL ITEMS IN A PASSED CHAIN OF ITEMS.
*        THE LAST ITEM IN THE CHAIN MUST HAVE A LINK FIELD
*        CONTAINING X'000000'.
         SPACE 1
***  ENTRY TO THIS ROUTINE SHOULD HAVE THE FOLLOWING REGISTERS
*        INITIALIZED:
*
*         1       CONTAINS ADDRESS OF FIRST ITEM IN A CHAIN OF
*                          ITEMS TO BE PLACED ON READY QUEUE BY
*                          PRIORITY
*        11       CONTAINS ADDRESS ASSIGNED TO IEDQEA
*        13       CONTAINS ADDRESS ASSIGNED TO AVTSAVE2
DSPCHAIN DS    2H
         SPACE 2
***  THIS ROUTINE WILL OBTAIN AN ELEMENT, IF AVAILABLE, FROM A
*        QCB AND PASS IT BACK TO THE SUBTASK.  IF NOT AVAILABLE,
*        IT WILL QUEUE THE STCB TO WAIT FOR AN ELEMENT.
         SPACE 1
***  ENTRY TO THIS ROUTINE SHOULD HAVE THE FOLLOWING REGISTERS
*        INITIALIZED:
*
*         3       CONTAINS ADDRESS OF QCB FROM WHICH ELEMENT IS
*                          DESIRED
*         7       CONTAINS ADDRESS OF QCB NOW CONTAINING THIS STCB
*        11       CONTAINS ADDRESS ASSIGNED TO IEDQEA
*        13       CONTAINS ADDRESS ASSIGNED TO AVTSAVE2
DSPWAIT  DS    2H
         SPACE 2
***  ENTRY AT THIS POINT WILL ACTIVATE THE STCB POINTED TO BY
*        RSTCB IMMEDIATELY.
         SPACE 1
***  ENTRY HERE SHOULD HAVE THE FOLLOWING REGISTERS INITIALIZED:
*
*         1       CONTAINS ADDRESS OF ELEMENT TO BE PASSED TO SUBTASK
*         3       CONTAINS ADDRESS OF STCB TO BE ACTIVATED
*         7       CONTAINS ADDRESS OF QCB CONTAINING STCB
*        11       CONTAINS ADDRESS ASSIGNED TO IEDQEA
*        13       CONTAINS ADDRESS ASSIGNED TO AVTSAVE2
DSPBYPAS DS    2H
DSPDLETE DS    2H
         SPACE 2
***  THIS ROUTINE WILL QPOST AN ELEMENT (PLACE IT ON READY QUEUE
*        BY PRIORITY).
         SPACE 1
***  ENTRY TO THIS ROUTINE SHOULD HAVE THE FOLLOWING REGISTERS
*        INITIALIZED:
*
*         1       CONTAINS ADDRESS OF ITEM TO BE PLACED ON READY
*                          QUEUE BY PRIORITY
*        11       CONTAINS ADDRESS ASSIGNED TO IEDQEA
*        13       CONTAINS ADDRESS ASSIGNED TO AVTSAVE2
DSPPOST  DS    2H
DSPPOSTR DS    2H
         SPACE 2
***  THIS ROUTINE WILL MOVE AN STCB FROM ONE QCB TO ANOTHER IF IT
*        IS NOT ALREADY THERE.
         SPACE 1
***  ENTRY TO THIS ROUTINE SHOULD HAVE THE FOLLOWING REGISTERS
*        INITIALIZED:
*
*         3       CONTAINS ADDRESS OF QCB FROM WHICH ELEMENT IS
*                          DESIRED
*         7       CONTAINS ADDRESS OF QCB NOW CONTAINING THE STCB
*        11       CONTAINS ADDRESS ASSIGNED TO IEDQEA
*        13       CONTAINS ADDRESS ASSIGNED TO AVTSAVE2
DSPTSTQ  DS    2H
DSPTSTQR DS    2H
DSPUNAV  DS    2H
DSPUNAVR DS    2H
         SPACE 2
***  THIS ROUTINE WILL INSERT AN ELEMENT INTO A CHAIN BY PRIORITY
         SPACE 1
***  ENTRY TO THIS ROUTINE SHOULD HAVE THE FOLLOWING REGISTERS
*        INITIALIZED:
*
*         1       CONTAINS ADDRESS OF ITEM TO BE PLACED IN CHAIN
*         7       CONTAINS ADDRESS OF CHAIN TO RECEIVE ITEM
*        11       CONTAINS ADDRESS ASSIGNED TO IEDQEA
*        13       CONTAINS ADDRESS ASSIGNED TO AVTSAVE2
DSPPRIO  DS    2H
DSPPRIOR DS    2H
         SPACE 2
***  THIS ROUTINE WILL INSERT AN ELEMENT AT THE TOP OF A CHAIN
         SPACE 1
***  ENTRY TO THIS ROUTINE SHOULD HAVE THE FOLLOWING REGISTERS
*        INITIALIZED:
*
*         1       CONTAINS ADDRESS OF ITEM TO BE PLACED IN CHAIN
*         7       CONTAINS ADDRESS OF CHAIN TO RECEIVE ITEM
*        11       CONTAINS ADDRESS ASSIGNED TO IEDQEA
*        13       CONTAINS ADDRESS ASSIGNED TO AVTSAVE2
DSPLIFO  DS    2H
DSPLIFOR DS    2H
         SPACE 2
***  STCBVTO VALUES
         SPACE 1
DSPCWAIT EQU   0
DSPCPOST EQU   2
DSPMCPL2 EQU   4
DSPMCPL4 EQU   6
DSPMCPL6 EQU   8
DSPMCPL8 EQU   10
DSPRCVSC EQU   12
DSPSNDSC EQU   14
DSPGETSC EQU   16
DSPPUTSC EQU   18
DSPGFFSC EQU   20
DSPLOGSC EQU   22
DSPDIASC EQU   24
DSPBUFSC EQU   26
DSPRETSC EQU   28
DSPLOCSC EQU   30
DSPCSCH  EQU   32 .                                              S22026
DSPCBSCH EQU   38 .                                              S22027
         MEND
