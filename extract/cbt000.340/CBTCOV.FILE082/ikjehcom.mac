         MACRO
         IKJEHCOM
*****************************************************************
*   THIS MACRO IS USED  FOR A COMMON WORK AREA  EXPANSION       *
*    THAT IS COMMON TO LISTALC LISTDS LISTCAT AND IKJEHMEM      *
*  THE WORKAREA IS NEEDED FOR THE OPTIONS HISTORY MEMBERS,SYSNAMES *
*    SPECIFIED IN EITHER OF THE COMMANDS  .AN UPDATE TO THE AREA *
*    MUST BE PUT INTO THIS MACRO SO THAT ALL COMMANDS AND IKJEHMEM *
*    HAVE THE SAME MAPPING OFFSETS                              *
*
*****************************************************************
OBTWAD   DSECT
MEMBUF   EQU   *                   KEY AND DATA BUF FOR DIRECTORY BLKS
MEMKEY   EQU   MEMBUF              KEY LOCATION IN BUFFER
MEMKEYL  EQU   8                   LENGTH OF THE KEY
MEMDATA  EQU   MEMKEY+MEMKEYL      LOCATION OF DIRECTORY BLK IN BUF
MEMDATAL EQU   256                 LENGTH OF A DIRECTORY BLOCK
MEMATBL  EQU   MEMDATA+MEMDATAL    LOCATION OF 5 ENTRY ALIAS
MEMATBLL EQU   208                 LENGTH OF INITIAL ALIAS NAME BLK
PBOB     EQU   MEMATBL+MEMATBLL    PTR TO BEGINNING OF BLOCKS
PSTNQ    EQU   PBOB+4              PTR TO START OF TRUE NAME QUEUE
PSANQ    EQU   PBOB+8              PTR TO START OF ALIAS NAME QUEUE
PCTB     EQU   PBOB+12             PTR TO CURRENT TRUE BLOCK
PCAB     EQU   PBOB+16             PTR TO CURRENT ALIAS BLOCK
PECTB    EQU   PBOB+20             PTR TO END OF CURRENT TRUE BLOCK
PECAB    EQU   PBOB+24             PTR TO END OF CURRENT ALIAS BLOCK
PCL      EQU   PBOB+28             PTR TO CALLIST  (ENTRY PARM LIST)
GETMSAV  EQU   PBOB+32             REG SAVE AREA FOR MEMGETM ROUTINE
GETMSAVL EQU   16                  LENGTH OF MEMGETM SAVE AREA
OBTDSNAM DS    CL44
*
*  ORG OVER THE JFCB READ IN AREA
*
         ORG   OBTWAD+176         ORG OVER JFCB AREA
         DS    0D
OBTWORKA DS    350X               OBTAIN WORK AREA
OBTDCBXL DS    0F                  DCB EXIT LIST STARTS HERE
OBTJFCBX DS    A             ADDRESS OF JFCB WKAREA
LABELID  EQU   OBTWORKA+44        OFFSET TO ID FIELD IN DSCB
LBLCHAIN EQU   OBTWORKA+135       OFFSET TO CCHHR CHAIN FIELD IN DSCB
LABLOFF1 EQU   OBTWORKA+34        OFFSET INTO UNKNOWN DSCB
LABLOFF2 EQU   OBTWORKA+65        UNKNOWN LABEL OFFSET
LABLOFF3 EQU   OBTWORKA+95        UNKNOWN LABEL OFFSET
LABLOFF4 EQU   OBTWORKA+125       UNKNOWN LABEL OFFSET
LABLOFF5 EQU   OBTWORKA+107       UNKNOWN LABEL OFFSET
         SPACE 3
         DS    0F
OBTMACS  EQU   *
RDJL     RDJFCB  (,(INPUT)),MF=L
*
OBTCLST  CAMLST SEARCH,OBTDSNAM,JFCBVOLS,OBTWORKA
OBTDSN   EQU   OBTCLST+4
OBTVOL   EQU   OBTCLST+8
OBTWKA   EQU   OBTCLST+12
*
OBTDCB   DCB   DSORG=PS,MACRF=R,RECFM=F,BLKSIZE=256,KEYLEN=8,          C
               LRECL=256,DDNAME=DUMMY
*
OPENL    OPEN  (,),MF=L            LIST FORM FOR OPEN MACRO
*
READL    READ  RDECB,SF,,,'S',,,MF=L    LIST FORM FOR READ MACRO
*
CLOSEL   CLOSE (,),MF=L            LIST FORM FOR CLOSE MACRO
*
         SPACE 2
CALLIST  DS    5F                  PARM LIST FOR MEM CALLIST LIST
*
POBTWAD  EQU   CALLIST             PTR TO OBTWAD
PGETML   EQU   CALLIST+4           PTR TO GETMAIN MACRO LIST FORM
POUTBUF  EQU   CALLIST+8           PTR TO OUTPUT BUFFER
PWRITE   EQU   CALLIST+12          PTR TO OUTPUT WRITER ROUTINE
PFREEML  EQU   CALLIST+16          PTR TO FREEMAIN MACRO LIST FORM
*
RETCODE  DS    F                  RETURN CODE SAVE AREA
SYNMSG   DS    CL1                BEGIN OF MSG
SYNMSG1  DS    CL60               SYNADINFO MSGLTH
SYNLEN   EQU   60            LENTGH OF ACTUAL TEXT
SYNOFF   EQU   68                 SYNINFO  MINUS ONE
ALIGN    DS    F                  ADDRESS OF CONVERSION AREA
*
OBTWAEND EQU   *
OBTWAL   EQU   OBTWAEND-OBTWAD     LENGTH OF THIS DSECT
         EJECT
*  RESET LOCATION COUNTER SO JFCB DISCRIPTION OVERLAYS JFCB AREA
         SPACE
         ORG   OBTDSNAM      OVLY JFCB WKAREA
         IEFJFCBN
         SPACE 3
*  RESET LOCATION COUNTER TO 44 BYTES BEFORE OBTAIN WORK AREA. THIS
*  TAKES ACCOUNT OF THE DSNAME FIELD AND ALLOWS THE OBTAIN DISCRIPTION
*  TO OVER LAY THE PROPER FIELDS OF THE DSCB.
         SPACE
         ORG   OBTWORKA-44        SEE ABOVE COMMENT
         IECSDSL1 (1)
         SPACE
*  THE FOLLOWING AREAS ARE USED BY THE HISTORY DATE CONVERT ROUTINE
*  AND OVERLAY THE PORTION OF THE OBTAIN WORK AREA NOT OCCUPIED BY
*  THE DSCB.
         SPACE
DSCBEND  EQU   *
         SPACE 2
         ORG   DSCBEND            SEE ABOVE COMMENT
HDTSV    DS    9F                  REG SAVE AREA DATE CONVERT ROUTINE.
HDTWK    DS    D                   DOUBLE WORD WORK AREA.
HD6      EQU   HDTWK+6            UNPACK FIELD FOR CVD
         EJECT
*****************************************************************
         MEND
