++ USERMOD (OBRCVT0) .
++ VER (Z038) FMID(JBB1126)   /*
****************************************************************** OBRZ
*                                                                  OBRZ
*        OBRZ : COMMUNICATION VECTOR TABLE EXTENSION               OBRZ
*                                                                  OBRZ
*        THIS CODE CONTAINS THE USER MODIFICATION TO EXTEND        OBRZ
*        THE CVT. THE MODIFICATIONS ARE FLAGGED OBRZ AT COL. 68    OBRZ
*                                                                  OBRZ
*        FOLLOWING MACROS WILL BE MODIFIED:                        OBRZ
*          SYS1.AMODGEN(IEAVBK)                                    OBRZ
*          SYS1.AMODGEN(CVT)                                       OBRZ
*                                                                  OBRZ
*        BEFORE RECEIVING THIS MODIFICATION YOU HAVE TO CHECK      OBRZ
*        THE IEBUPDTE CONTROL STATEMENTS AGAINst your existing     OBRZ
*        STAGE 2 OUTPUT.                                           OBRZ
*                                                                  OBRZ
****************************************************************** OBRZ
   */ .
++ MACUPD(CVT)
   /*
      REPLACE THE CVTUSER DEF WITH LENGTH AND ADDRESS OF THE OBRZ
      CVTEXTENSION.
   */ .
./ CHANGE NAME=CVT
*CVTUSER  DC    A(0) -        A WORD AVAILABLE TO THE USER         OBRZ
CVTUSER  DC    AL1(OBRLGT)   OBRZ LENGTH OF CVT EXTENSION          OBRZ
         DC    AL3(OBRCVT)   OBRZ ADDRESS OF CVT EXTENSION         OBRZ
./ ENDUP
++ MACUPD(IEAVBK)
   /*
      ADD THE OBRZ CVTEXTENSION NEAR LABEL IEACVT.
   */ .
./ CHANGE NAME=IEAVBK
OBRCVT   DS    0D                     FORCE ON DOUBLE WORD BDY     OBRZ
         DC    V(IPLDATE)             IPL DATE CHECK MODULE        OBRZ
         DC    24F'0'                 OBRZ CVT EXTENSION           OBRZ
OBRLGT   EQU   (*-OBRCVT)/4           LENGTH IN FULLWORDS          OBRZ
./ ENDUP
++ USERMOD (OBRIP00) .
++ VER (Z038) FMID (OBRIPF0)
   /*
      REQ (OBRCVT0,JBB1126).
      ZAP MODULE IEAVRTOD NEAR LABEL IEAVRCOM TO ACTIVATE IPLDATE
      DURING NIP.
   */ .
++ ZAP (IEAVRTOD) DISTLIB (AOSC5) .
 NAME IEAVRTOD IEAVRTOD
 VER  0D3A     47F0,9DAA        AT THE END OF IEAVRCOM
 REP  0D3A     47F0,A505        BRANCH TO PATCH AREA
 VER  153C     4040,4040        IN PATCH AREA
 REP  1540     58F0,0010        LOAD ADDRESS OF CVT
 REP  1544     58F0,F0CC        LOAD ADDRESS OF OBRZ EXTENSION
 REP  1548     58FF,0000        LOAD ADDRESS OF IPLDATE
 REP  154C     05EF             BRANCH TO IPLDATE
 REP  154E     47F0,9DAA        BRANCH BACK TO MAINLINE
 IDRDATA OBRIP00
++ FUNCTION (OBRIPF0).
++ VER (Z038)
   /*
      REQ (OBRCVT0,OBRIP00).
      THIS FUNCTION WILL LINK THE TWO OBRZ MODULES IPLDATE AND IPLDATED
      INTO THE NUCLEUS RESP. INTO THE LINKLIB.
   */ .
++ JCLIN .
//OBRIPL   JOB (OBR,90,P100,,2GRM),'SYS1 IPLDATE',
//         CLASS=S,MSGCLASS=S,MSGLEVEL=(0,0),NOTIFY=SS#F
//*MAIN SYSTEM=A,ORG=TR001
//***
//***
//*** DOC: LINK OF IPLDATED INTO SYS1.LINKLIB
//***      STEP S00 : LINK IPLDATED
//***
//***
//S00      EXEC PGM=IEWL,PARM='LIST,XREF,NCAL,LET,SIZE=(300K,64K)'
//SYSPRINT DD SYSOUT=*
//SYSUT1   DD UNIT=VIO,SPACE=(1024,(200,20))
//SYSLMOD  DD DISP=SHR,DSN=SYS1.LINKLIB
//LOADSYS4 DD DISP=SHR,DSN=SYS4.LIB38F.LOAD
//SYS4LOAD DD DISP=SHR,DSN=SYS4.LIB38F.LOAD
//SYS4OBJ  DD DISP=SHR,DSN=SYS4.LIB38F.OBJ
//SYSLIN   DD *
 INCLUDE LOADSYS4(IPLDATED)
 NAME IPLDATED(R)
/*
++ MOD (IPLDATE) DISTLIB(LOADSYS4) TXLIB(SYS4OBJ) LMOD(IEANUC01)
   /*
      LINK MODULE IPLDATE INTO THE NUCLEUS.
   */ .
++ MOD (IPLDATED) DISTLIB(LOADSYS4) TXLIB(SYS4OBJ)
   /*
      LINK MODULE IPLDATED INTO THE LINKLIB.
   */ .
