   COMPSYS: PROCEDURE OPTIONS(MAIN);
   DECLARE SYS1_JOBNAME CHARACTER (10) INITIAL (' '),
           SYS2_JOBNAME CHARACTER (10) INITIAL (' '),
           SYS1_STEPNAME CHARACTER (6) INITIAL (' '),
           SYS2_STEPNAME CHARACTER (6) INITIAL (' '),
           SYS1_CARD CHARACTER (80),
           SYS2_CARD CHARACTER (80),
           SYS1_JOB CHARACTER (10) DEFINED SYS1_CARD POS(1),
           SYS2_JOB CHARACTER (10) DEFINED SYS2_CARD POS(1),
           SYS1_STEP CHARACTER (6) DEFINED SYS1_CARD POS(1),
           SYS2_STEP CHARACTER (6) DEFINED SYS2_CARD POS(1),
           SYS1_EOF BIT (1) INITIAL ('0'B),
           SYS2_EOF BIT (1) INITIAL ('0'B);
     ON ENDFILE(SYSGEN1) BEGIN; SYS1_EOF='1'B; GO TO EOF_ROUT; END;
     ON ENDFILE(SYSGEN2) BEGIN; SYS2_EOF='1'B; GO TO EOF_ROUT; END;
   READ10:
     GET FILE(SYSGEN1) EDIT (SYS1_CARD) (COLUMN(1),A(80));
     SYS1_JOBNAME=SYS1_JOB; SYS1_STEPNAME='******';
   READ20:
     GET FILE(SYSGEN2) EDIT (SYS2_CARD) (COLUMN(1),A(80));
     SYS2_JOBNAME=SYS2_JOB; SYS2_STEPNAME='******';
   CHECK_JOBS:
     IF SYS1_JOBNAME^=SYS2_JOBNAME THEN
     DO; PUT FILE(SYSPRINT) EDIT ('ERROR - JOB CARDS DIFFERENT',
         'SYSGEN1 = ',SYS1_CARD,'SYSGEN2 = ',SYS2_CARD)
         ((3)(COLUMN(1),A(80)));
         GO TO END_OF_JOB; END;
   READ11:
     GET FILE(SYSGEN1) EDIT (SYS1_CARD) (COLUMN(1),A(80));
     IF SUBSTR(SYS1_CARD,1,08)='//SYSGEN' THEN
     DO; SYS1_JOBNAME=SYS1_JOB;
         SYS1_STEPNAME='******';
   READ21:
         GET FILE(SYSGEN2) EDIT (SYS2_CARD) (COLUMN(1),A(80));
         IF SUBSTR(SYS2_CARD,1,08)='//SYSGEN' THEN
         DO; SYS2_JOBNAME=SYS2_JOB;
             SYS2_STEPNAME='******';
             GO TO READ11; END;
         PUT FILE(SYSPRINT) EDIT ('ERROR - EXTRA CARDS IN SYSGEN2',
         'SYSGEN1 = ',SYS1_JOBNAME,SYS1_STEPNAME,
         'SYSGEN2 = ',SYS2_JOBNAME,SYS2_STEPNAME,'SYSGEN2 = ',
         SYS2_CARD) (COLUMN(1),A(40),(2)(A(10),A(12),A(8)),
         COLUMN(1),A(10),A(80));
         GO TO READ21; END;
     IF SUBSTR(SYS1_CARD,1,4)^='//SG' THEN
   READ22:
     DO; GET FILE(SYSGEN2) EDIT (SYS2_CARD) (COLUMN(1),A(80));
         IF SUBSTR(SYS2_CARD,1,4)^='//SG' THEN
                 DO; IF SUBSTR(SYS2_CARD,1,8)='//SYSGEN' THEN
                     DO; SYS2_JOBNAME=SYS2_JOB;
                         SYS2_STEPNAME='******';
   READ14:               PUT FILE(SYSPRINT) EDIT
                        ('ERROR - EXTRA CARDS IN SYSGEN1 - ',
                         'SYSGEN1 = ',SYS1_JOBNAME,SYS1_STEPNAME,
                         'SYSGEN2 = ',SYS2_JOBNAME,SYS2_STEPNAME,
                         'SYSGEN1 = ',SYS1_CARD)
                         (COLUMN(1),A(40),(2)(A(10),A(12),A(8)),
                         COLUMN(1),A(10),A(80));
                         GET FILE(SYSGEN1) EDIT (SYS1_CARD)
                         (COLUMN(1),A(80));
                         IF SUBSTR(SYS1_CARD,1,8)='//SYSGEN' THEN
                         DO; SYS1_JOBNAME=SYS1_JOB;
                             SYS1_STEPNAME='******';
                             GO TO CHECK_JOBS; END;
                         GO TO READ14; END;
             IF SYS1_CARD^=SYS2_CARD THEN
             DO; PUT FILE(SYSPRINT) EDIT ('ERROR - NO MATCH',
                 'SYSGEN1 = ',SYS1_JOBNAME,SYS1_STEPNAME,
                 'SYSGEN2 = ',SYS2_JOBNAME,SYS2_STEPNAME,
                 'SYSGEN1 = ',SYS1_CARD,'SYSGEN2 = ',SYS2_CARD)
                 (COLUMN(1),A(17),(2)(A(10),A(12),A(8)),
                 COLUMN(1),A(10),A(80),COLUMN(1),A(10),A(80));
                 GO TO READ11; END;
             GO TO READ11; END;
         SYS2_STEPNAME=SYS2_STEP;
   ERR1:
         PUT FILE(SYSPRINT) EDIT ('ERROR - EXTRA CARDS IN SYSGEN1 - ',
         'SYSGEN1 = ',SYS1_JOBNAME,SYS1_STEPNAME,
         'SYSGEN2 = ',SYS2_JOBNAME,SYS2_STEPNAME,
         'SYSGEN1 = ',SYS1_CARD)
         (COLUMN(1),A(40),(2)(A(10),A(12),A(8)),COLUMN(1),A(10),A(80));
   READ12:
         GET FILE(SYSGEN1) EDIT (SYS1_CARD) (COLUMN(1),A(80));
         IF SUBSTR(SYS1_CARD,1,4)='//SG' THEN
         DO; SYS1_STEPNAME=SYS1_STEP;
             GO TO CHECK_STEPS; END;
         IF SUBSTR(SYS1_CARD,1,8)^='//SYSGEN' THEN GO TO ERR1;
         SYS1_JOBNAME=SYS1_JOB; SYS1_STEPNAME='******';
   READ23:
         GET FILE(SYSGEN2) EDIT (SYS2_CARD) (COLUMN(1),A(80));
         IF SUBSTR(SYS2_CARD,1,8)='//SYSGEN' THEN
         DO; SYS2_JOBNAME=SYS2_JOB; SYS2_STEPNAME='******';
             GO TO READ11; END;
         PUT FILE(SYSPRINT) EDIT ('ERROR - EXTRA CARDS IN SYSGEN2 - ',
         'SYSGEN1 = ',SYS1_JOBNAME,SYS1_STEPNAME,
         'SYSGEN2 = ',SYS2_JOBNAME,SYS2_STEPNAME,
         'SYSGEN2 = ',SYS2_CARD)
         (COLUMN(1),A(40),(2)(A(10),A(12),A(8)),COLUMN(1),A(10),A(80));
         GO TO READ23; END;
     SYS1_STEPNAME=SYS1_STEP;
   READ24:
     GET FILE(SYSGEN2) EDIT (SYS2_CARD) (COLUMN(1),A(80));
     IF SUBSTR(SYS2_CARD,1,4)^='//SG' THEN
   ERR2:
     DO; PUT FILE(SYSPRINT) EDIT ('ERROR - EXTRA CARDS IN SYSGEN2 - ',
         'SYSGEN1 = ',SYS1_JOBNAME,SYS1_STEPNAME,
         'SYSGEN2 = ',SYS2_JOBNAME,SYS2_STEPNAME,
         'SYSGEN2 = ',SYS2_CARD)
         (COLUMN(1),A(40),(2)(A(10),A(12),A(8)),COLUMN(1),A(10),A(80));
         GET FILE(SYSGEN2) EDIT (SYS2_CARD) (COLUMN(1),A(80));
         IF SUBSTR(SYS2_CARD,1,4)='//SG' THEN
         DO; SYS2_STEPNAME=SYS2_STEP;
             GO TO CHECK_STEPS; END;
         IF SUBSTR(SYS2_CARD,1,8)^='//SYSGEN' THEN GO TO ERR2;
         SYS2_JOBNAME=SYS2_JOB; SYS2_STEPNAME='******';
   READ13:
         GET FILE(SYSGEN1) EDIT (SYS1_CARD) (COLUMN(1),A(80));
         IF SUBSTR(SYS1_CARD,1,8)='//SYSGEN' THEN
         DO; SYS1_JOBNAME=SYS1_JOB; SYS1_STEPNAME='******';
             GO TO CHECK_JOBS; END;
         PUT FILE(SYSPRINT) EDIT ('ERROR - EXTRA CARDS IN SYSGEN1 - ',
         'SYSGEN1 = ',SYS1_JOBNAME,SYS1_STEPNAME,
         'SYSGEN2 = ',SYS2_JOBNAME,SYS2_STEPNAME,
         'SYSGEN1 = ',SYS1_CARD)
         (COLUMN(1),A(40),(2)(A(10),A(12),A(8)),COLUMN(1),A(10),A(80));
         GO TO READ13; END;
     SYS2_STEPNAME=SYS2_STEP;
   CHECK_STEPS:
     IF SYS1_STEPNAME=SYS2_STEPNAME THEN GO TO READ11;
     PUT FILE(SYSPRINT) EDIT ('ERROR - STEPNAMES NO MATCH - ',
     'SYSGEN1 = ',SYS1_JOBNAME,SYS1_STEPNAME,
     'SYSGEN2 = ',SYS2_JOBNAME,SYS2_STEPNAME,
     'SYSGEN1 = ',SYS1_CARD,'SYSGEN2 = ',SYS2_CARD)
     (COLUMN(1),A(40),(2) (A(10),A(12),A(8)),(2)(COLUMN(1),A(10),
     A(80)));
     GO TO END_OF_JOB;
   EOF_ROUT:
     IF SYS1_EOF='1'B & SYS2_EOF='1'B THEN GO TO END_OF_JOB;
     IF SYS1_EOF='1'B THEN
     DO; PUT FILE(SYSPRINT) EDIT ('NO CARDS LEFT IN SYSGEN1 - ',
         'SYSGEN1 = ',SYS1_JOBNAME,SYS1_STEPNAME,
         'SYSGEN2 = ',SYS2_JOBNAME,SYS2_STEPNAME,
         'SYSGEN2 = ',SYS2_CARD)
         (COLUMN(1),A(40),(2)(A(10),A(12),A(8)),COLUMN(1),A(10),A(80));
         GET FILE(SYSGEN2) EDIT (SYS2_CARD) (COLUMN(1),A(80));
         GO TO EOF_ROUT; END;
     IF SYS2_EOF='1'B THEN
     DO; PUT FILE(SYSPRINT) EDIT ('NO CARDS LEFT IN SYSGEN2 - ',
         'SYSGEN1 = ',SYS1_JOBNAME,SYS1_STEPNAME,
         'SYSGEN2 = ',SYS2_JOBNAME,SYS2_STEPNAME,
         'SYSGEN1 = ',SYS1_CARD)
         (COLUMN(1),A(40),(2)(A(10),A(12),A(8)),COLUMN(1),A(10),A(80));
         GET FILE(SYSGEN1) EDIT (SYS1_CARD) (COLUMN(1),A(80));
         GO TO EOF_ROUT; END;
   END_OF_JOB:
     END COMPSYS;
