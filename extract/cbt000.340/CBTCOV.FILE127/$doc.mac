THIS MEMBER CONTAINS BASIC DOCUMENTATION FOR THE OTHER MEMBERS OF THE
PDS, AND A DISCLAIMER.
**************
* DISCLAIMER *
**************
*
THE PROGRAMS ON THIS TAPE ARE BEING CONTRIBUTED TO THE SHARE RACF
COMMITTEE TO HELP OTHER USERS OF IBM'S RACF PROGRAM PRODUCT. THEY MAY
BE FREELY DISTRIBUTED BY THE SHARE RACF COMMITTEE TO OTHER USERS OF
RACF, PROVIDED THAT THEY ARE NOT DISTRIBUTED FOR PROFIT, AND THAT THIS
DISCLAIMER IS ALSO DISTRIBUTED.

THE PROGRAMS SUPPLIED HEREIN WERE WRITTEN AT RAINIER NATIONAL BANK IN
SEATTLE, WASHINGTON. TO THE BEST OF OUR KNOWLEDGE THEY FUNCTION AS
INTENDED AND AS DOCUMENTED, WITHOUT CAUSING SYSTEM OR INTEGRITY
PROBLEMS. HOWEVER, THEY ARE NOT COVERED BY ANY WARRANTY, EITHER
EXPRESSED OR IMPLIED, AS TO RELIABITY OR FITNESS FOR USE AT ANY OTHER
INSTALLATION THAN RAINIER BANK.

IF YOU HAVE QUESTIONS OR SUGGESTIONS ABOUT THESE PROGRAMS,PLEASE
CONTACT
         WALT FARRELL
         RAINIER NATIONAL BANK - TEC SUPPORT
         PO BOX C34030
         SEATTLE, WA 98124
         (206) 433-7467

*****************
* DOCUMENTATION *
*****************

$DOC     - THE DOCUMENTATION YOU ARE READING NOW. IT SHOULD BE USED IN
           CONJUNCTION WITH THE SOURCE OF THE PROGRAMS.

$HINTS   - MISCELLANEOUS IDEAS ABOUT RACF THAT MAY NOT BE OBVIOUS, AND
           THAT WE HAVE FOUND VALUABLE.

FRONTEND - A MODULE THAT MAY BE LINK-EDITTED INTO AN EXISTING PROGRAM
           TO PERFORM A RACHECK WHEN THE PROGRAM IS EXECUTED TO
           SEE IF THE USER IS AUTHORIZED TO RUN THE PROGRAM. THE MODULE
           HAS BEEN RECENTLY RECODED TO REMOVE SOME LOCAL (AND STRANGE)
           MACROS, AND HAS NOT YET BEEN TESTED. HOWEVER, THE ORIGINAL
           VERSION WORKS VERY WELL. THE NEW VERSION WILL BE TESTED SOON
           AND FIXES SUPPLIED.

ICHEACTN - THIS IS AN INTERNAL RACF MACRO THAT IS USED BY SEVERAL
           PROGRAMS TO COMMUNICATE WITH THE RACF INVENTORY MANAGER
           DIRECTLY. THE MACRO SOURCE IS NOT PRESENT. IT MUST BE
           OBTAINED FROM THE OPTIONAL (SOURCE) TAPE FOR RACF.

ICHEIN   - ANOTHER MACRO LIKE ICHEACTN.

ICHEINTY - ANOTHER MACRO LIKE ICHEACTN.

ICHEOPT  - ANOTHER MACRO LIKE ICHEACTN.

ICHETEST - ANOTHER MACRO LIKE ICHEACTN.

ICHPLOGC - A MAPPING OF THE PARAMETER LIST TO ICHRAU00, WHICH IS THE
           RACF MODULE THAT LOGS VIOLATIONS VIA SMF. ICHRAU00 CAN BE
           CALLED BY AN AUTHORIZED MODULE, AND SEVERAL OF THE PROGRAMS
           SUPPLIED HERE USE ICHRAU00 TO LOG THEIR OWN INFORMATION TO
           SMF IN A FORMAT THAT OUR (AND IBM'S) RACF REPORT WRITER(S)
           CAN UNDERSTAND. AS THIS SOURCE FROM IBM BEARS NO COPYRIGHT,
           IT IS INCLUDED HERE.

ICHRDSNT - RAINIER BANKS ICHRDSNT (RACF DATA SET NAME TABLE). USE OF
           ICHRDSNT AVOIDS HAVING TO MODIFY MSTRJCL, AS WELL AS
           PROVIDING MORE FLEXIBILITY IN USING RACF. SEE $HINTS FOR
           MORE INFO.

ICHRDSNU - AN 'EMERGENCY' VERSION OF ICHRDSNT. SEE $HINTS.

ICHRIX01 - RACINIT PRE-PROCESSING EXIT THAT WORKS IN CONJUNCTION WITH
           OUR IEFUJV TO CHECK BATCH PASSWORDS AT JOB SUBMISSION TIME
           INSTEAD OF AT INITIATION.

IEFUJV   - AN SMF EXIT FOR JOB-CARD VALIDATION. WE WROTE IT (OR AT
           LEAST PUT RACF STUFF INTO IT) SO THAT THE USERID, PASSWORD,
           ETC. COULD BE VALIDATED WHEN THE JOB WAS SUBMITTED, NOT WHEN
           IT WAS INITIATED. THIS ALLOWS THE USER TO CHANGE HIS PASSWORD
           AFTER JOB SUBMISSION WITHOUT CAUSING A JCL ERROR WHEN THE
           JOB RUNS. ALSO REQUIRES THE RACINIT PRE-PROCESSING EXIT.

           POTENTIAL PROBLEMS (BUT NOT VERY MUCH SO):
             (1) DEPENDS ON THE JES2 JCT FOR THE JOB, WHOSE ADDRESS
                 CAN BE FOUND BY CHASING THE TCB CHAIN AND FINDING
                 SOME REGISTERS FROM HOSCNVT. MAY BE DIFFERENT WITH
                 JES2/NJE OR WITH MVS-SP2. WORKS WITH SP1 JUST FINE.
                 VERY INSENSITIVE TO PTF'S, AT LEAST SO FAR.

IEZCTGFL - A DSECT NEEDED TO USE CATALOG MANAGEMENT SVC 26, WHICH
           SOME PROGRAMS ON THIS TAPE NEED.

IEZCTGPL - ANOTHER SVC 26 DSECT.

IGC0023I - AN SVC (239) TO TURN APF AUTHORIZATION ON OR OFF. IT WILL
           NOT WORK UNDER TSO TEST. THE ISSUER MUST BE IN THE PLPA, OR
           THE USER WHO IS RUNNING THE ISSUING PROGRAM MUST BE
           AUTHORIZED TO THE RACF RESOURCE 'APPL SVC239'. HAS PROVEN
           USEFUL IN SEVERAL PROGRAMS HERE. IN PARTICULAR, SEE ISPRCFA.

IKJEFF10 - AN EXIT FOR THE TSO SUBMIT COMMAND. IT PERFORMS MANY
           FUNCTIONS, THE MOST IMPORTANT OF WHICH (FOR THIS TAPE) IS
           THE PLACING OF THE USERID AND PASSWORD ON THE JOB CARD FOR
           THE SUBMITTED JOB. IN OUR ENVIRONMENT, IT ALSO DETECTS THE
           SUBMISSION OF A 'PRODUCTION JOB' FROM OUR PRODUCTION JOB
           SCHEDULING SYSTEM, AND USES A 'FAKE' USERID/PASSWORD TO RUN
           THE JOB WITH OPERATIONS AUTHORITY.

           THIS MODULE IS BEST USED FOR IDEAS ABOUT HOW TO PUT THE
           USERID/PASSWORD/GROUP ON THE JOB CARD, HOW TO USE THE
           RACF INTERNAL MACROS TO DIRECTLY ACCESS THE RACF DATA SET,
           AND HOW TO USE ICHRAU00 TO LOG INFORMATION TO SMF.

IKJEFLD  - A LOGON PRE-PROMPT EXIT THAT OBTAINS SOME INFORMATION FROM
           THE RACF DATASET (E.G. PROGRAMMER NAME) AND CREATES THE
           JCL FOR THE LOGON. BASED ON AN EXIT FROM THE CBT TAPE, BUT
           WITH RACF FUNCTIONS ADDED.

ISP@PRIM - A PRIMARY OPTION MENU FOR THE NEW SPF (ISPF) THAT SHOWS A USE
           OF SYSTEM VARIABLE ZGROUP. ZGROUP CONTAINS THE NAME OF THE
           RACF GROUP THAT THE USER IS CURRENTLY LOGGED ON TO, ASSUMING
           THAT THE MODS IN PZ21001/PZ21002 HAVE BEEN APPLIED TO SPF.

ISPRCFA  - A FRONT-END FOR THE CFA MODULE IN THE NEW SPF. IT USES A
           COPY OF THE AUTHORIZED COMMAND TABLE FROM THE TMP TO
           ALLOW APF-AUTHORIZED COMMANDS TO BE RUN UNDER SPF. REQUIRES
           USE OF SVC 239 (SEE IGC0023I) AND REQUIRES THAT ISPSUBS
           BE IN THE PLPA.

           IBM STARTED TO IMPLEMENT A FACILITY IN SPF A LONG TIME AGO
           (IN A GALAXY QUITE CLOSE TO HERE), TO ALLOW THIS FUNCTION.
           THEY NEVER COMPLETED IT, AND THEY APPARENTLY FELT THAT THERE
           WAS A SECURITY/INTEGRITY HOLE IF SUCH A FUNCTION WERE
           ALLOWED. WE HAVEN'T BEEN ABLE TO FIND A HOLE IN THIS CODE,
           BUT CAN'T GUARANTEE THERE ISN'T ONE.

           TO USE ISPRCFA, RE-LINK ISPSUBS USING THE FOLLOWING
           LINKAGE EDITOR CONTROL CARDS:
             ENTRY ISPTSC
             CHANGE ISPCFA(ISPRCFA)
             INCLUDE AOS31(ISPTSC)
             INCLUDE YOURDD(ISPRCFA)
             INCLUDE AOST4(IKJEFTE2)
             INCLUDE SPFLOAD(ISPSUBS)
             NAME ISPSUBS(R)

PZ21001
PZ21001$
PZ21002
PZ21002$ - MODIFICATIONS TO THE NEW SPF (ISPF) TO ADD A NEW SYSTEM
           VARIABLE ZGROUP, WHICH WILL, WHEN REFERENCED IN A MENU OR
           PANEL, CONTAIN THE NAME OF THE RACF GROUP THAT THE USER IS
           CURRENTLY CONNECTED TO. PZ21001 AND PZ21002 ARE THE MODS
           IN A FORM THAT CAN BE INPUT TO THE GENZAPS (ASMTOZAP)
           PROGRAM. PZ21001$ AND PZ21002$ ARE THE OUTPUT FROM GENZAPS,
           READY TO BE INPUT TO SMP4. THE MOD ALSO PROVIDES SOME DUMMY
           VARIABLES, TO EASE ADDITION OF FUTURE SYSTEM VARIABLES. THE
           DUMMY VARIABLES WILL ALWAYS CONTAIN A NULL VALUE AT PRESENT.
           SEE MEMBER ISP@PRIM FOR A PRIMARY OPTION MENU THAT USES THE
           NEW VARIABLE ZGROUP. THIS MOD IS ESPECIALLY HANDY IF THE
           RGROUP TSO CP IS INSTALLED AND IF THE ISPRCFA MOD IS MADE.

RACFMENU - A SET OF SPF RACF MENUS TO DO NICE RACF FUNCTIONS FOR SPF
           USERS WHO DON'T KNOW THE RACF COMMANDS.

RACFPROC - A SET OF SPF FOREGROUND RACF PROCS TO BE USED WITH THE
           RACFMENU MEMBER. ALSO REQUIRES THAT YOUR SPF BE ABLE TO
           ISSUE AUTHORIZED COMMANDS (SEE ISPRCFA).

RACFVER  - A PROGRAM THAT READS THE RACF DATA SET VIA THE INTERNAL
           MACROS, AND FOR EACH DATASET ENTRY CHECKS THE VTOC TO
           ENSURE THAT THE DATASET EXISTS AND IS PROTECTED. ALSO HAS
           CODE FOR UCC-1 TAPE MANAGEMENT SYSTEM. WILL ACCEPT AN
           OPTIONAL LIST OF DASD VOLUMES (FROM DD DASDVOL) IN CARD
           FORMAT WITH A VOLSER IN COLS 1-6 AND AN OPTIONAL 'I' IN
           COL 8. IF AN ENTRY IN THE RACF DATASET LISTS A VOLSER THAT
           IS NOT ONLINE, AND IF THE 'I' WAS SPECIFIED ON THE CONTROL
           CARD FOR THAT VOLUME, THEN ONE ERROR MESSAGE WILL BE
           PRODUCED, AND FURTHER REFERENCES TO THAT VOLUME WILL BE
           IGNORED. IF THE 'I' WAS NOT SPECIFIED, THEN A MESSAGE WILL
           BE PRODUCED FOR EACH RACF-DEFINED DATASET ON THE VOLUME.

           THIS PROGRAM HAS GROWN IN A RATHER UNSTRUCTURED WAY, AND
           DOESN'T LOOK AS GOOD AS I WANTED IT TO. WHEN IT IS REWRITTEN
           SOMEDAY, THE FOLLOWING ENHANCEMENTS WILL BE MADE:
             (1) ADD THE OTHER HALF OF THE PROGRAM, WHICH WILL READ
                 ALL OF THE ONLINE VTOCS AND FOR EACH RACF-INDICATED
                 DATASET VERIFY THAT IT IS RACF-DEFINED.
             (2) WHEN AN INCONSISTENCY IS FOUND, OPTIONALLY FIX IT
                 INSTEAD OF JUST PRODUCING AN ERROR MESSAGE.

RGROUP   - A PROGRAM WHICH WILL RUN AS EITHER A TSO CP (FOREGROUND OR
           BACKGROUND) OR AS AN EXECUTED PROGRAM. IT HAS TWO PURPOSES.
             (1) IF INVOKED WITHOUT PARAMETERS IT WILL TELL YOU WHICH
                 RACF GROUP THE INVOKER IS CURRENTLY CONNECTED TO.
             (2) IF INVOKED WITH A GROUP NAME THAT THE INVOKER IS
                 AUTHORIZED TO USE, IT WILL CHANGE THE CURRENT CONNECT
                 GROUP TO THAT NAMED GROUP, USING A RACINIT 'CHANGE'
                 FUNCTION. THIS IS USEFUL FOR PEOPLE CONNECTED TO
                 MULTIPLE GROUPS WITH DIFFERENT AUTHORITIES, SO THEY
                 DON'T HAVE TO LOGOFF AND RE-LOGON SO OFTEN.
           THE PROGRAM MUST BE LINKED AND RUN AUTHORIZED (AC=1).

RNBACEE  - A CONTROL BLOCK THAT WE CHAIN FROM THE ACEE TO HOLD SOME
           INFORMATION THAT SOME OF OUR PROGRAMS AND EXITS REQUIRE.

RNBUINST - A MAPPING OF HOW WE USE THE DATA FIELD IN THE USER PROFILE.
           REQUIRED BY SOME OF THE PROGRAMS.

TMPFRONT - A PROGRAM THAT REPLACES IKJEFT01 IN THE EXEC STATEMENT OF
           OUR TSO LOGON PROCS. IT ALLOWS US TO RESTRICT TSO LOGONS
           BY CONTROLLING ACCESS TO A RACF RESOURCE 'APPL TSOXXXX'
           WHERE XXXX IS THE SMFID FROM THE SMCA. USEFUL FOR SYSTEM
           TEST PERIODS OR OTHER TIMES WHEN ONLY CERTAIN PEOPLE SHOULD
           BE ABLE TO LOG ON. IF THE RACHECK SUCCEEDS, IT LINKS TO
           IKJEFT01 TO CONTINUE THE LOGON.

UNPROTCT - A PROGRAM THAT READS A VTOC AND GENERATES AMASPZAP CONTROL
           CARDS TO RESET THE RACF AND PASSWORD INDICATORS FOR ANY
           PROTECTED DATA SETS. USED FOR DISASTER RECOVERY WHEN A FULL-
           PACK BACKUP TAPE IS TAKEN TO A SHOP WITHOUT RACF, OR TO A
           SHOP WITH RACF BUT WITHOUT THE PROPER DATASET PROFILES OR
           PASSWORD ENTRIES DEFINED. VAGUELY BASED ON A VTOC UPDATING
           PROGRAM FROM THE IPO TAPE.
