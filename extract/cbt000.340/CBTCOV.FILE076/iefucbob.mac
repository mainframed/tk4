*
*        %GOTO UCBBSL;                 /* BILINGUAL MAPPING
         MACRO
         IEFUCBOB
***********************************************************************
*
*              U N I T   C O N T R O L   B L O C K
*
***********************************************************************
*
*       STATUS
*
*             RELEASES 21.6,21.7,21.8, 10/12/73, LEVEL=6
*
*       FUNCTION
*
*         A UNIT CONTROL BLOCK
*           INCORPORATING A SYSTEM RESOURCE TABLE
*             RECORDS THE STATUS OF
*               A PHYSICAL INPUT OUTPUT DEVICE ADDRESS
*             IS CREATED AND INITIALIZED DURING SYSTEM GENERATION
*             RESIDES IN THE NUCLEUS BELOW 32 K
*             POINTS TO A DEVICE TYPE DEPENDENT EXTENSION
*               RESIDING HIGHER IN THE NUCLEUS
*             IS POINTED TO BY THE UCB LOOKUP TABLE INDEXED BY
*               A FUNCTION OF THE CHANNEL CONTROL UNIT DEVICE ADDRESS
*             MAY BE POINTED TO BY TASK INPUT OUTPUT TABLES
*               AND DATA EXTENT BLOCKS
*             CONTAINS INDICES INTO TABLES FOR
*               DEVICE STATISTICS ATTENTION LOGICAL CHANNEL
*             MAY POINT TO AND BE POINTED TO BY REQUEST QUEUE ELEMENTS
*
*       ENTRY
*
*             IEFUCBOB
*
*       INPUT
*
*             BAL: DSECT
*             BSL: DCL (UCBPTR, UCBDCPTR) PTR
*
*       OUTPUT
*
*             SYSGEN INDEPENDENT COMMON SECTION
*               INCLUDING UCBTYP WORD
*             DEVICE DEPENDENT SEGMENT (ONE OF THE FOLLOWING)
*               DIRECT ACCESS (EXCEPT DATACELL) AND MAGNETIC TAPE
*               DATACELL
*                 (INCLUDING TEN CELL DESCRIPTIONS SUBMAPPED BELOW)
*               UNIT RECORD WITH UNIVERSAL CHARACTER SET
*               GRAPHICS (EXCEPT M85 CRT CONSOLE)
*               TAPE CARTRIDGE READER AND OPTICAL READER
*             CELL DESCRIPTION FOR ONE OF THE TEN CELLS
*               IN THE DATACELL DEVICE SEGMENT ABOVE
*             UCB EXTENSION (ONE OF THE FOLLOWING)
*               DIRECT ACCESS
*               MAGNETIC TAPE
*               TAPE CARTRIDGE READER
*               OPTICAL READER
*               UNIVERSAL CHARACTER SET
*             M65 MULTIPROCESSING PREFIX
*               (CONTIGUOUSLY PRECEDING COMMON SECTION)
*
*       ATTRIBUTES
*
*             BILINGUAL
*
***********************************************************************
*
*       SYSGEN-INDEPENDENT
*       COMMON SECTION
*
         DS    0D -                    UNIT CONTROL BLOCK PROPER
*
UCBOB    EQU   * -                     UCBPTR -> UCBOB
*
***********************************************************************
*
UCBJBNR  DS    B -                     INTERNAL JOB ID
UCBKEY   EQU   X'F0' -                 JOB PROTECTION KEY
*                                        (SET FOR RETAIN OR PASS)
UCBTEPDC EQU   X'08' -                 DEVICE NOT ALLOCATABLE BECAUSE
*                                      OWNED BY OLTEP           SA59673
UCBDEM   EQU   X'02' -                 DEMOUNT AND RETAIN OR PASS
*                                        (SET DURING DEVICE ALLOC)
UCBMONT  EQU   X'01' -                 MOUNT AND RETAIN OR PASS
*                                        (SET DURING DEVICE ALLOC)
UCBFL5   DS    B -                     FLAGS
UCBTICBT EQU   X'20' -                 CHANNEL END AND/OR DEVICE END
*                                      OR MOUNT CONDITION PENDING.
*                                      USED ONLY WITH PTF.       ICB289
UCBVSDR  EQU   X'10' -                 DEVICE HAS VARIABLE LENGTH SDRS
UCBEXTSN EQU   X'08' -                 UCBNBRSN CONTAINS LENGTH AND
*                                        UCBSNADR ADDRESS OF SENSE INFO
UCBNALOC EQU   X'04' -                 DEVICE NOT ALLOCATABLE   SA59673
UCBALTCU EQU   X'02' -                 DEVICE HAS ALTERNATE CU ADDRESS
UCBALTPH EQU   X'01' -                 DEVICE HAS ALTERNATE PATH
UCBID    DS    C -                     UCB ID (FF)
UCBSTAT  DS    B -                     DEVICE STATUS
UCBONLI  EQU   X'80' -                 DEVICE ONLINE
UCBCHGS  EQU   X'40' -                 DEVICE TO BE VARIED OFFLINE
UCBRESV  EQU   X'20' -                 VOLUME RESERVED
UCBUNLD  EQU   X'10' -                 UNLOAD PENDING
UCBALOC  EQU   X'08' -                 DEVICE ALLOCATED
UCBPRES  EQU   X'04' -                 VOLUME PERMANENTLY RESIDENT
UCBSYSR  EQU   X'02' -                 EITHER SYSTEM RESIDENCE
*                                        OR PRIMARY CONSOLE
UCBDADI  EQU   X'01' -                 EITHER STANDARD TAPE LABELS
*                                        VERIFIED OR ALTERNATE CONSOLE
UCBCHA   DS    B -                     CHANNEL ADDRESS FLAGS
UCBHIO   EQU   X'80' -                 HALT I/O
UCBMOD   EQU   X'40' -                 STATUS MODIFIER
UCBDSNS  EQU   X'20' -                 DELAYED SENSE
UCBDHIO  EQU   X'10' -                 DELAYED HALT I/O
UCBCHANA EQU   X'0F' -                 CHANNEL ADDRESS
UCBUA    DS    FL1 -                   UNIT ADDRESS
UCBFL1   DS    B -                     FLAGS
UCBBUSYD EQU   X'80' -                 DEVICE BUSY
UCBNOTRD EQU   X'40' -                 DEVICE NOT READY
UCBUSING EQU   X'20' -                 CHANNEL PROGRAM EXECUTED
*                                        AND NOT YET POSTED COMPLETE
UCBINTER EQU   X'10' -                 DEVICE END ERROR
*                                        AFTER CHANNEL END
*                                        (IOB INTERCEPT)
UCBNOTRC EQU   X'08' -                 CONTROL UNIT BUSY
UCBSTS   EQU   X'06' -                 DEVICE STATUS
*/       01    UCBNTRAN                DIRECT ACCESS ARM SEEKING
*                                        (IOS STANDALONE CP EXECUTED)
*                                        OR TC RECEIVE STATUS
*                                        (INHIBIT HIO)
*/       11    UCBTRANS                DIRECT ACCESS DATA TRANSFER
*                                        (USER CP EXECUTING)
UCBERR   EQU   X'01' -                 ERROR ROUTINE USING DEVICE
*                                        EXCLUSIVELY
UCBDTI   DS    FL1 -                   DEVICE TABLE INDEX
UCBETI   DS    FL1 -                   ERROR TABLE INDEX
*                                        (ERROR ROUTINE SUFFIX)
UCBSTI   DS    FL1 -                   STATUS TABLE INDEX
*                                        (*10 = STATAB INDEX)
UCBLCI   DS    FL1 -                   LOGICAL CHANNEL WORD TABLE INDEX
*                                        (*8 = LCHTAB INDEX)
UCBATI   DS    FL1 -                   ATTENTION TABLE (ANTAB) INDEX
UCBWGT   DS    B -                     FLAGS AND CHANNEL MASK
UCBIN    EQU   X'80' -                 SYSIN
UCBOUT   EQU   X'40' -                 SYSOUT
UCBPUB   EQU   X'20' -                 ASSUME PUBLIC VOLUME
UCBREW   EQU   X'10' -                 REWIND COMMAND
UCBPATH  EQU   X'0F' -                 INOPERATIVE PATHS
UCBPATH0 EQU   X'08' -                 PRIMARY PATH INOPERATIVE
UCBPATH1 EQU   X'04' -                 OPTIONAL PATH 1 INOPERATIVE
UCBPATH2 EQU   X'02' -                 OPTIONAL PATH 2 INOPERATIVE
UCBPATH3 EQU   X'01' -                 OPTIONAL PATH 3 INOPERATIVE
UCBNAME  DS    CL3 -                   EBCDIC UNIT NAME
UCBTYP   DS    0CL4 -                  DEVICE DESCRIPTION
UCBTBYT1 DS    B -                     MODEL BITS
UCB1FEA0 EQU   X'80' -                 BIT 0
UCB1FEA1 EQU   X'40' -                 BIT 1
UCB1FEA2 EQU   X'20' -                 BIT 2
UCB1FEA3 EQU   X'10' -                 BIT 3
UCB1FEA4 EQU   X'08' -                 BIT 4
UCB1FEA5 EQU   X'04' -                 BIT 5
UCB1FEA6 EQU   X'02' -                 BIT 6
UCB1FEA7 EQU   X'01' -                 BIT 7
UCBTBYT2 DS    B -                     OPTION FLAGS
UCB2OPT0 EQU   X'80' -                 FLAG 0
UCB2OPT1 EQU   X'40' -                 FLAG 1
UCB2OPT2 EQU   X'20' -                 FLAG 2
UCB2OPT3 EQU   X'10' -                 FLAG 3
UCB2OPT4 EQU   X'08' -                 FLAG 4
UCB2OPT5 EQU   X'04' -                 FLAG 5
UCB2OPT6 EQU   X'02' -                 FLAG 6
UCBVLPWR EQU   X'02' -                 VOLUME REQUIRES ALTERNATE POWER
*                                      SOURCE DEVICE             S21167
UCB2OPT7 EQU   X'01' -                 FLAG 7
UCBDVPWR EQU   X'01' -                 DEVICE HAS ALTERNATE POWER
*                                      SOURCE                    S21167
UCBTBYT3 DS    B -                     CLASS BITS
UCB3TAPE EQU   X'80' -                 TAPE
UCB3COMM EQU   X'40' -                 COMMUNICATIONS
UCB3DACC EQU   X'20' -                 DIRECT ACCESS
UCB3DISP EQU   X'10' -                 DISPLAY
UCB3UREC EQU   X'08' -                 UNIT RECORD
UCB3CHAR EQU   X'04' -                 CHARACTER READER
UCBTBYT4 DS    C -                     DEVICE CODE
UCBLTS   DS    CL2 -                   LAST REQUEST ELEMENT
UCBSNS   DS    0CL2 -                  SENSE INFORMATION FOR DEVICES
*                                      WITHOUT EXTENDED SENSE    ICB425
UCBFL7   DS    B -                     FLAG BYTE FOR DEVICES WITH
*                                      EXTENDED SENSE            ICB425
UCBASDEP EQU   X'80' -                 INDICATES CANCEL KEY DEPRESSED
*                                      ON 3211                   ICB425
         DS    X -                     RESERVED BYTE FOR DEVICES WITH
*                                      EXTENDED SENSE            ICB425
*
SRTEJBNR EQU   UCBJBNR -               ALIAS
SRTEMNT  EQU   UCBMONT -               ALIAS
SRTESTAT EQU   UCBSTAT -               ALIAS
SRTEONLI EQU   UCBONLI -               ALIAS
SRTECHGS EQU   UCBCHGS -               ALIAS
SRTERESV EQU   UCBRESV -               ALIAS
SRTEUNLD EQU   UCBUNLD -               ALIAS
SRTEALOC EQU   UCBALOC -               ALIAS
SRTEPRES EQU   UCBPRES -               ALIAS
SRTESYSR EQU   UCBSYSR -               ALIAS
SRTEDADI EQU   UCBDADI -               ALIAS
UCBFL2   EQU   UCBFL1 -                ALIAS (UCBCHA WAS ONCE UCBFL1)
*
***********************************************************************
*
*        DEVICE-DEPENDENT UCB SEGMENTS
*
UCBDEV   EQU   *
*
***********************************************************************
*
*             DIRECT ACCESS (2300)
*             (EXCEPT DATA CELL)
*             AND MAGNETIC TAPE (2400)
*             UCB SEGMENT
*
         ORG   UCBDEV -                DEVICE-DEPENDENT SEGMENT
*
***********************************************************************
*
UCBSENSE DS    0CL4 -                  ADDITIONAL SENSE INFORMATION FOR
*                                      DEVICES WITH SIX SENSE BYTES
UCBSENSB DS    0A -                    SAME AS UCBSENSA BELOW
UCBSENSN DS    FL1 -                   NUMBER OF EXPANDED SENSE BYTES
UCBSENSA DS    AL3 -                   ADDRESS OF EXPANDED SENSE
*                                      INFORMATION
UCBVOLI  DS    CL6 -                   VOLUME SERIAL NUMBER
UCBSTAB  DS    B -                     VOLUME STATUS
UCBBSVL  EQU   X'80' -                 NOT SHARABLE (DIRECT ACCESS)
UCBDVSHR EQU   X'80' -                 WHEN ONE, DEVICE SHARABLE AMONG
*                                      SEVERAL CPU'S (3420 MAGNETIC
*                                      TAPE DEVICES ONLY)        ICB485
UCBBVSC  EQU   X'40' -                 RESERVED
UCBBALB  EQU   X'20' -                 MORE VOLUME LABEL PROCESSING
UCBPRSRS EQU   X'20' -                 THIS DEVICE WAS SPECIFIED IN
*                                      PRESRES BUT WAS NOT MOUNTED AT
*                                      IPL
UCBBPRV  EQU   X'10' -                 PRIVATE USE
UCBBPUB  EQU   X'08' -                 PUBLIC USE
UCBBSTR  EQU   X'04' -                 STORAGE USE (DA)
*                                        ANSI LABEL (MT)
UCBBJLB  EQU   X'02' -                 JOBLIB VOLUME (DA)
UCBBNUL  EQU   X'01' -                 MCS MOUNT/DEMOUNT MSGS ISSUED
*                                        (MESSAGE IDS IN UCBFSER) (MT)
*                                        CONTROL VOLUME (DA)
UCBDMCT  DS    B -                     VOLUME USE BYTE
UCBMOUNT EQU   X'80' -                 MOUNTED OR REQUEST ISSUED
*                                        (OFF MEANS MOUNT VERIFIED)
UCBDMC   EQU   X'7F' -                 NUMBER OF OPEN DCBS
UCBVTOC  DS    0CL4 -                  TTR0 OF VTOC (DA)
UCBFSCT  DS    H -                     DATASET SEQUENCE COUNT (MT)
UCBFSEQ  DS    H -                     DATASET SEQUENCE NUMBER (MT)
UCBFSER  DS    0CL8 -                  DATASET SERIAL NUMBER
*                                        (MT AFTER OPEN) OR
*                                        MESSAGE IDS  (MT BEFORE OPEN)
*                                        PLUS TWO RESERVED BYTES (MT)
UCBSQC   DS    FL1 -                   NUMBER OF RESERVE MACROS
*                                        (DA INCLUDING DATACELL)
UCBDVRES DS    FL1 -                   DEVICE RESERVATION (SHARED DASD)
*                                        (DA INCLUDING DATACELL)
*                                        SET TO UCBSQC AFTER GOOD SIO
UCBRQESV DS    H -                     ADDRESS OF RQE TO VERIFY
*                                        VOL SER NUMBER IN UCB
*                                        (SET FROM UCBLTS AFTER
*                                        UNSOLICITED DEVICE END)
*                                        (DA INCLUDING DATACELL)
UCBORSVA DS    0A -                    ADDRESS OF DEB FOR FIRST USER
*                                        ON QUEUE FOR DEVICE
*                                        (DA INCLUDING DATACELL)
UCBFL4   DS    B -                     FLAGS (DA INCLUDING DATACELL)
UCBDAV   EQU   X'F8' -                 VOLUME VERIFICATION FLAGS
UCBMNT   EQU   X'80' -                 VOL SER VERIFIER ISSUED MOUNT
UCBVVRTN EQU   X'40' -                 VOL SER VERIFIER IN CONTROL
UCBFT    EQU   X'20' -                 FIRST VERIFIER ENTRY FOR VOL
UCBTCC   EQU   X'10' -                 ALTERNATE TRACK PROCEDURE
*                                        HANDLING VOL LABEL
UCBVER   EQU   X'08' -                 VERIFIER VERIFIED VOL
UCBORCNT EQU   X'07' -                 NUMBER OF REQUESTS FOR DEVICE
*                                        FROM FIRST USER ON QUEUE
UCBORSVB DS    AL3 -                   ADDRESS OF DEB FOR FIRST USER
*                                        ON QUEUE FOR DEVICE
*                                        (DA INCLUDING DATACELL)
UCBSKA   DS    0CL8 -                  MBBCCHHR OF LAST SEEK
*                                        (DA INCLUDING DATACELL)
UCBXTN   DS    0A -                    ADDRESS OF UCB EXTENSION (MT)
UCBVOPT  DS    B -                     VOLUME STATISTIC FLAGS
UCBESV   EQU   X'80' -                 ESV RECORDS KEPT
UCBEVA   EQU   X'40' -                 EVA RECORDS MAY BE KEPT
UCBESVC  EQU   X'20' -                 ESV RECORDS SENT TO CONSOLE
*                                        AS OPPOSED TO SYS1.MAN
UCBERPC  EQU   X'10' -                 ERROR RECOVERY PROC IN CONTROL
UCBESVE  EQU   X'08' -                 ESV RECORD ISSUED FOR VOLUME
*                                        BECAUSE OF EOV
UCBASNDE EQU   X'01' -                 UNSOLICITED DEVICE END OCCURRED
*                                      ON 3420                   ICB277
UCBXTNB  DS    AL3 -                   ADDRESS OF UCB EXTENSION (MT)
*                                        (MAP BELOW)
         DS    CL4 -                   UCBSKA PADDING (NOT IN UCB)
*                                         NO LONGER EXISTS (MT)
UCBECBB  DS    0A -                    ECB ADDRESS (DA)
UCBUSER  DS    FL1 -                   NUMBER OF CURRENT USERS (DA)
UCBECBA  DS    AL3 -                   ECB ADDRESS (DA)
UCBEXT   DS    0A -                    ADDRESS OF UCB EXTENSION (DA)
*                                        (MAPPED BELOW)
UCBWKADB DS    A -                     ALIAS
*
SRTEVOLI EQU   UCBVOLI -               ALIAS
SRTESTAB EQU   UCBSTAB -               ALIAS
SRTEBSVL EQU   UCBBSVL -               ALIAS
SRTEBVSC EQU   UCBBVSC -               ALIAS
SRTEBALB EQU   UCBBALB -               ALIAS
SRTEBPRV EQU   UCBBPRV -               ALIAS
SRTEBPUB EQU   UCBBPUB -               ALIAS
SRTEBSTR EQU   UCBBSTR -               ALIAS
SRTEASCI EQU   UCBBSTR -               ALIAS
UCBASCI  EQU   SRTEASCI -              ALIAS
SRTEBVQS EQU   SRTEBSTR -              ALIAS
SRTEBJLB EQU   UCBBJLB -               ALIAS
SRTEBNUL EQU   UCBBNUL -               ALIAS
SRTEDMCT EQU   UCBDMCT -               ALIAS
SRTEFSCT EQU   UCBFSCT -               ALIAS
SRTEFSEQ EQU   UCBFSEQ -               ALIAS
SRTEUSER EQU   UCBUSER -               ALIAS
SRTEECBA EQU   UCBECBA -               ALIAS
*
***********************************************************************
*
*             DATA CELL (2321)
*             UCB SEGMENT
*
         ORG   UCBDEV -                DEVICE-DEPENDENT SEGMENT
*
***********************************************************************
*
UCBSEN   DS    CL4 -                   MORE SENSE INFORMATION
UCBERPA  DS    CL12 -                  ERROR RECOVERY WORK AREA A
UCBDASD  DS    CL16 -                  DATA CELL FIELDS MAPPED BY
*                                        UCBSQC (1 BYTE)
*                                        UCBDVRES (1 BYTE)
*                                        UCBRQESV (2 BYTES)
*                                        UCBFL4 (1 FLAG BYTE)
*                                        UCBORSVA/B (3 BYTES)
*                                        UCBSKA (8 BYTES)
*                                        UNDER DIRECT ACCESS ABOVE
UCBCELLS DS    0CL160 -                CELL DESCRIPTIONS (MAPPED BELOW)
UCBCELL0 DS    CL16 -                  CELL 0
UCBCELL1 DS    CL16 -                  CELL 1
UCBCELL2 DS    CL16 -                  CELL 2
UCBCELL3 DS    CL16 -                  CELL 3
UCBCELL4 DS    CL16 -                  CELL 4
UCBCELL5 DS    CL16 -                  CELL 5
UCBCELL6 DS    CL16 -                  CELL 6
UCBCELL7 DS    CL16 -                  CELL 7
UCBCELL8 DS    CL16 -                  CELL 8
UCBCELL9 DS    CL16 -                  CELL 9
UCBDC    DS    0A -                    ADDRESS OF DATACELL UCB EXT
*                                        (MAPPED BELOW)
UCBWKADA DS    A -                     ALIAS
*
***********************************************************************
*
*             UNIT RECORD WITH
*             UNIVERSAL CHARACTER SET (1403, 3211)
*             UCB SEGMENT
*
         ORG   UCBDEV -                DEVICE-DEPENDENT SEGMENT
*
***********************************************************************
*
UCBNBRSN DS    FL1 -                   LENGTH OF SENSE INFO (3211)
UCBSNADR DS    AL3 -                   ADDR OF SENSE INFO --
*                                        THAT OF UCBSNS (1403)
*                                        OR UCBSNSXT (3211)
UCBXTADR DS    A -                     ADDR OF UCS UCB EXTENSION
*
***********************************************************************
*
*             GRAPHICS EXCEPT
*             M85 CRT CONSOLE
*             UCB SEGMENT
*
         ORG   UCBDEV -                DEVICE-DEPENDENT SEGMENT
*
***********************************************************************
*
UCBSENS  DS    CL2 -                   MORE SENSE INFORMATION
UCBOPEN  DS    FL1 -                   NUMBER OF OPEN DCBS
UCBGCB   DS    C -                     GRAPHIC CONTROL BYTE
UCBTEB   DS    A -                     ADDRESS OF TASK ENTRY BLOCK
UCBSTART DS    A -                     RESTART ADDRESS
UCBBTA   DS    0A -                    ADDRESS OF BUFFER TABLE
UCBDI    DS    FL1 -                   DEVICES ON A CONTROL UNIT
*                                        TO WHICH BUFFER SECTIONS
*                                        ARE ASSIGNED
UCBBTB   DS    AL3 -                   ADDRESS OF BUFFER TABLE
*
***********************************************************************
*
*             TAPE CARTRIDGE READER (2495)
*             AND OPTICAL READER (1285, 1287, 1288)
*             UCB SEGMENT
*
         ORG   UCBDEV -                DEVICE-DEPENDENT SEGMENT
*
***********************************************************************
*
UCBCRWKA DS    A -                     ADDRESS OF UCB EXTENSION
*                                        FOR THIS DEVICE
*                                        (MAPPED BELOW)
*
***********************************************************************
*
*       CELL DESCRIPTION
*       FOR UCBCELL0/.../9
*       IN DATACELL (2321)
*
         ORG   UCBUSER
*
UCBDCLL  EQU   * -                     UCBDCPTR -> UCBDCLL
*
***********************************************************************
*
UCBDCELL DS    0CL16 -                 ONE OF TEN CELLS
*
UCBDBBNR DS    H -                     BIN NUMBER
UCBDSTAB DS    B -                     VOLUME STATUS BYTE B
*                                        (ANALOGOUS TO UCBSTAB)
UCBDBSVL EQU   X'80' -                 NOT SHARABLE
UCBDBPRS EQU   X'20' -                 THIS DEVICE WAS SPECIFIED IN
*                                      PRESRES BUT WAS NOT MOUNTED AT
*                                      IPL
UCBDBPRV EQU   X'10' -                 PRIVATE USE
UCBDBPUB EQU   X'08' -                 PUBLIC USE
UCBDBSTR EQU   X'04' -                 STORAGE USE
UCBDBJLB EQU   X'02' -                 JOBLIB VOLUME
UCBDBNUL EQU   X'01' -                 CONTROL VOLUME
UCBDSTAT DS    B -                     CELL/BIN STATUS
*                                        (ANALOGOUS TO UCBSTAT)
UCBDNORM EQU   X'80' -                 ONLINE WITH NORMAL CELL
*                                        (NOT OFFLINE OR BALLAST)
UCBDRESV EQU   X'20' -                 RESERVED CELL
UCBDUNLD EQU   X'10' -                 UNLOAD PENDING
UCBDALOC EQU   X'08' -                 BIN ALLOCATED
UCBDPRES EQU   X'04' -                 CELL PERMANENTLY RESIDENT
UCBDVOLI DS    CL6 -                   VOLUME SERIAL NUMBER
UCBDJBNR DS    FL1 -                   INTERNAL JOB NUMBER
UCBDDMCT DS    FL1 -                   NUMBER OF OPEN DCBS FOR THIS
*                                      CELL (BITS 1-7)
UCBDDMNT EQU   X'80' -                 IF 0, MOUNT VERIFICATION HAS
*                                      BEEN PERFORMED ---
*                                      IF 1, MOUNT REQUEST HAS BEEN
*                                      ISSUED
UCBDVTOC DS    CL3 -                   TTR OF VTOC
UCBDUSER DS    FL1 -                   CURRENT NUMBER OF DATASETS
*
DATACELL EQU   UCBDCELL -              ALIAS
DCELBBNR EQU   UCBDBBNR -              ALIAS
DCELSTAB EQU   UCBDSTAB -              ALIAS
DCELSTAT EQU   UCBDSTAT -              ALIAS
DCELVOLI EQU   UCBDVOLI -              ALIAS
DCELJBNR EQU   UCBDJBNR -              ALIAS
DCELDMCT EQU   UCBDDMCT -              ALIAS
DCELVTOC EQU   UCBDVTOC -              ALIAS
DCELUSER EQU   UCBDUSER -              ALIAS
*
***********************************************************************
*
*       UNIT CONTROL BLOCK EXTENSIONS
*
***********************************************************************
*
*             DIRECT ACCESS (2300)
*             UCB EXTENSION
*
UCBDA    DSECT ,                       UCBEXT -> UCBDA
*
***********************************************************************
*
         DS    CL104 -                 OFFSET
UCBERP   DS    CL40 -                  ERROR RECOVERY WORK AREA
UCBOVFLW DS    CL40 -                  TRACK OVERFLOW WORK AREA
*                                        (OPTIONAL)
*
***********************************************************************
*
*             MAGNETIC TAPE (2400)
*             UCB EXTENSION
*
UCBMT    DSECT ,                       UCBXTN -> UCBMT
*
***********************************************************************
*
UCBROR   DS    CL8 -                   READ OPPOSITE DIRECTION
*                                        RECOVERY CCW
         DS    CL2 -                   RESERVED                  ICB463
UCBTRT   DS    FL1 -                   TEMP READ ERROR THRESHOLD
*                                        (IF ZERO THEN EVA ABSENT)
UCBTWT   DS    FL1 -                   TEMP WRITE ERROR THRESHOLD
*                                        (IF ZERO THEN EVA ABSENT)
UCBTR    DS    FL1 -                   TEMP READ ERROR COUNT
UCBTW    DS    FL1 -                   TEMP WRITE ERROR COUNT
UCBSIO   DS    H -                     SIO COUNT
UCBPR    DS    FL1 -                   PERM READ ERROR COUNT
UCBPW    DS    FL1 -                   PERM WRITE ERROR COUNT
UCBNB    DS    FL1 -                   NOISE BLOCK COUNT
UCBMS    DS    CL1 -                   MODE SET OPERATION CODE FOR DATA
*                                      BLOCKS ON 3420            ICB277
UCBERG   DS    H -                     ERASE GAP COUNT
UCBCLN   DS    H -                     CLEANER ACTION COUNT
*
***********************************************************************
*
*             TAPE CARTRIDGE READER (2495)
*             UCB EXTENSION
*
UCBTCR   DSECT ,                       UCBCRWKA -> UCBTCR
*
***********************************************************************
*
UCBTCERP DS    0CL24 -                 ERROR RECOVERY CHANNEL PROGRAM
UCBRCCW1 DS    D -                     RETRY CCW 1
UCBRCCW2 DS    D -                     RETRY CCW 2
UCBRCCW3 DS    D -                     RETRY CCW 3
UCBCSWSA DS    CL8 -                   CSW SAVE AREA
*
***********************************************************************
*
*            OPTICAL READER (1285, 1287, 1288)
*            UCB EXTENSION
*
UCBOR    DSECT ,                       UCBCRWKA -> UCBOR
*
***********************************************************************
*
UCBCRDDC DS    FL1 -                   DATA CHECK ERROR COUNT
UCBCRILC DS    FL1 -                   INCORRECT LENGTH ERROR COUNT
UCBCRECC DS    FL1 -                   EQUIPMENT CHECK ERROR COUNT
         DS    CL5 -                   RESERVED
*
***********************************************************************
*
*              UNIT RECORD WITH
*              UNIVERSAL CHARACTER SET (1403, 3211)
*              UCB EXTENSION
*
UCBUCS   DSECT ,                       UCBXTADR -> UCBUCS
*
***********************************************************************
*
UCBUCSID DS    CL4 -                   ID OF UCS IMAGE IN BUFFER
UCBUCSOP DS    B -                     FORMAT OF UCS IMAGE IN BUFFER
*                                        (O FOR OPTION)
UCBUCSO1 EQU   X'80' -                 DEFAULT IMAGE
UCBUCSO2 EQU   X'40' -                 FOLD MODE
UCBUCSPE EQU   X'01' -                 IMAGE HAS PARITY ERROR (3211)
UCBFCBOP DS    B -                     RESERVED (1403) OR FLAGS (3211)
*                                        (O FOR OPTION)
UCBFCBO1 EQU   X'80' -                 FCB DEFAULT IMAGE
         DS    X -                     RESERVED
UCBERCNT DS    FL1 -                   COUNT OF ERRORS THAT HAVE
*                                      OCCURRED (3211)
UCBFCBID DS    CL4 -                   FCB IMAGE ID
UCBERADR DS    A -                     ADDR OF ERP LOGOUT AREA
*
***********************************************************************
*
*              3211 SENSE INFORMATION UCB EXTENSION
*
*        THIS EXTENSION IS POINTED TO BY THE UCBSNADR FIELD OF THE
*        UCB AND IS NOT CONTIGUOUS TO THE UCB.
*
UCBSNINF DSECT ,
*
***********************************************************************
*
UCBSNSXT DS    CL6 -                   SENSE INFORMATION
         DS    XL2 -                   RESERVED
*
***********************************************************************
*
*       MODEL 65 MULTIPROCESSING UCB PREFIX
*
UCBM65MP DSECT , -                     UCBPTR-4 IF MP65
*
***********************************************************************
*
UCBFL3   DS    B -                     M65MP FLAGS
UCBACU   EQU   X'80' -                 ALTERNATE CONTROL UNITS EXIST
UCBHIOB  EQU   X'20' -                 CPU B TO USE HIO
UCBHIOA  EQU   X'10' -                 CPU A TO USE HIO
UCBSIOB  EQU   X'08' -                 CPU B ISSUED LAST SIO
UCBNOB   EQU   X'02' -                 NO PATH TO CPU B
UCBNOA   EQU   X'01' -                 NO PATH TO CPU A
         DS    CL2 -                   RESERVED
UCBMPFLG DS    B -                     FLAGS
UCBRIC   EQU   X'20' -                 DURING NIP - DEVICE IS RESERVED
*                                      TO IPLED CPU
UCBRNIC  EQU   X'10' -                 DURING NIP - DEVICE IS RESERVED
*                                      TO NON-IPLED CPU
UCBNRO   EQU   X'04' -                 DURING NIP - DEVICE IS NOT
*                                      RESERVED BECAUSE OF OPERATOR'S
*                                      REQUEST
UCBPROC  EQU   X'02' -                 USED BY PROCESSING PROGRAMS
UCBIPL   EQU   X'01' -                 DEVICE OFFLINE AT IPL
*
***********************************************************************
*
*              U N I T   C O N T R O L   B L O C K
*
***********************************************************************
*
         MEND  , */
*%UCBBSL  :  ;
*/* **************************************************************** */
*/*                                                                  */
*/*            U N I T   C O N T R O L   B L O C K                   */
*/*                                                                  */
*/* **************************************************************** */
*/*                                                                  */
*/*     STATUS                                                       */
*/*                                                                  */
*/*           RELEASES 21.6,21.7,21.8, 10/12/73, LEVEL=6             */
*/*                                                                  */
*/*     FUNCTION                                                     */
*/*                                                                  */
*/*       A UNIT CONTROL BLOCK                                       */
*/*         INCORPORATING A SYSTEM RESOURCE TABLE                    */
*/*           RECORDS THE STATUS OF                                  */
*/*             A PHYSICAL INPUT OUTPUT DEVICE ADDRESS               */
*/*           IS CREATED AND INITIALIZED DURING SYSTEM GENERATION    */
*/*           RESIDES IN THE NUCLEUS BELOW 32 K                      */
*/*           POINTS TO A DEVICE TYPE DEPENDENT EXTENSION            */
*/*             RESIDING HIGHER IN THE NUCLEUS                       */
*/*           IS POINTED TO BY THE UCB LOOKUP TABLE INDEXED BY       */
*/*             A FUNCTION OF THE CHANNEL CONTROL UNIT DEVICE ADDRES */
*/*           MAY BE POINTED TO BY TASK INPUT OUTPUT TABLES          */
*/*             AND DATA EXTENT BLOCKS                               */
*/*           CONTAINS INDICES INTO TABLES FOR                       */
*/*             DEVICE STATISTICS ATTENTION LOGICAL CHANNEL          */
*/*           MAY POINT TO AND BE POINTED TO BY REQUEST QUEUE ELEMEN */
*/*                                                                  */
*/*     ENTRY                                                        */
*/*                                                                  */
*/*           IEFUCBOB                                               */
*/*                                                                  */
*/*     INPUT                                                        */
*/*                                                                  */
*/*           BAL: DSECT                                             */
*/*           BSL: DCL (UCBPTR, UCBDCPTR) PTR                        */
*/*                                                                  */
*/*     OUTPUT                                                       */
*/*                                                                  */
*/*           SYSGEN INDEPENDENT COMMON SECTION                      */
*/*             INCLUDING UCBTYP WORD                                */
*/*           DEVICE DEPENDENT SEGMENT (ONE OF THE FOLLOWING)        */
*/*             DIRECT ACCESS (EXCEPT DATACELL) AND MAGNETIC TAPE    */
*/*             DATACELL                                             */
*/*               (INCLUDING TEN CELL DESCRIPTIONS SUBMAPPED BELOW)  */
*/*             UNIT RECORD WITH UNIVERSAL CHARACTER SET             */
*/*             GRAPHICS (EXCEPT M85 CRT CONSOLE)                    */
*/*             TAPE CARTRIDGE READER AND OPTICAL READER             */
*/*           CELL DESCRIPTION FOR ONE OF THE TEN CELLS              */
*/*             IN THE DATACELL DEVICE SEGMENT ABOVE                 */
*/*           UCB EXTENSION (ONE OF THE FOLLOWING)                   */
*/*             DIRECT ACCESS                                        */
*/*             MAGNETIC TAPE                                        */
*/*             TAPE CARTRIDGE READER                                */
*/*             OPTICAL READER                                       */
*/*             UNIVERSAL CHARACTER SET                              */
*/*           M65 MULTIPROCESSING PREFIX                             */
*/*             (CONTIGUOUSLY PRECEDING COMMON SECTION)              */
*/*                                                                  */
*/*     ATTRIBUTES                                                   */
*/*                                                                  */
*/*           BILINGUAL                                              */
*/*                                                                  */
*/* **************************************************************** */
*/*                                                                  */
*/*     SYSGEN-INDEPENDENT                                           */
*/*     COMMON SECTION                                               */
*/*                                                                  */
*/*                                                                  */
*DECLARE
*  1 UCBOB    BASED(UCBPTR),
*                                        /* > UCBOB
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 UCBJBNR     CHAR(1),               /* INTERNAL JOB ID          */
*    3 UCBKEY   BIT(4),                  /* JOB PROTECTION KEY  (SET
*                                           FOR RETAIN OR PASS)      */
*    3 UCBTEPDC BIT(1),                  /* DEVICE NOT ALLOCATABLE
*                                           BECAUSE OWNED BY OLTEP
*                                                             SA59673*/
*    3 *        BIT(1),                  /* RESERVED                 */
*    3 UCBDEM   BIT(1),                  /* DEMOUNT AND RETAIN OR
*                                           PASS  (SET DURING DEVICE
*                                           ALLOC)                   */
*    3 UCBMONT  BIT(1),                  /* MOUNT AND RETAIN OR PASS
*                                           (SET DURING DEVICE
*                                           ALLOC)                   */
*   2 UCBFL5      CHAR(1),               /* FLAGS                    */
*    3 *        BIT(2),                  /* RESERVED                 */
*    3 UCBTICBT BIT(1),                  /* CHANNEL END AND/OR DEVICE
*                                           END OR MOUNT CONDITION
*                                           PENDING.  USED ONLY WITH
*                                           PTF.               ICB289*/
*    3 UCBVSDR  BIT(1),                  /* DEVICE HAS VARIABLE
*                                           LENGTH SDRS              */
*    3 UCBEXTSN BIT(1),                  /* UCBNBRSN CONTAINS LENGTH
*                                           AND  UCBSNADR ADDRESS OF
*                                           SENSE INFO               */
*    3 UCBNALOC BIT(1),                  /* DEVICE NOT ALLOCATABLE
*                                                             SA59673*/
*    3 UCBALTCU BIT(1),                  /* DEVICE HAS ALTERNATE CU
*                                           ADDRESS                  */
*    3 UCBALTPH BIT(1),                  /* DEVICE HAS ALTERNATE
*                                           PATH                     */
*   2 UCBID       CHAR(1),               /* UCB ID (FF)              */
*   2 UCBSTAT     CHAR(1),               /* DEVICE STATUS            */
*    3 UCBONLI  BIT(1),                  /* DEVICE ONLINE            */
*    3 UCBCHGS  BIT(1),                  /* DEVICE TO BE VARIED
*                                           OFFLINE                  */
*    3 UCBRESV  BIT(1),                  /* VOLUME RESERVED          */
*    3 UCBUNLD  BIT(1),                  /* UNLOAD PENDING           */
*    3 UCBALOC  BIT(1),                  /* DEVICE ALLOCATED         */
*    3 UCBPRES  BIT(1),                  /* VOLUME PERMANENTLY
*                                           RESIDENT                 */
*    3 UCBSYSR  BIT(1),                  /* EITHER SYSTEM RESIDENCE
*                                           OR PRIMARY CONSOLE       */
*    3 UCBDADI  BIT(1),                  /* EITHER STANDARD TAPE
*                                           LABELS  VERIFIED OR
*                                           ALTERNATE CONSOLE        */
*   2 UCBCHA      CHAR(1),               /* CHANNEL ADDRESS FLAGS    */
*    3 UCBHIO   BIT(1),                  /* HALT I/O                 */
*    3 UCBMOD   BIT(1),                  /* STATUS MODIFIER          */
*    3 UCBDSNS  BIT(1),                  /* DELAYED SENSE            */
*    3 UCBDHIO  BIT(1),                  /* DELAYED HALT I/O         */
*    3 UCBCHANA BIT(4),                  /* CHANNEL ADDRESS          */
*   2 UCBUA       PTR(8),                /* UNIT ADDRESS             */
*   2 UCBFL1      CHAR(1),               /* FLAGS                    */
*    3 UCBBUSYD BIT(1),                  /* DEVICE BUSY              */
*    3 UCBNOTRD BIT(1),                  /* DEVICE NOT READY         */
*    3 UCBUSING BIT(1),                  /* CHANNEL PROGRAM EXECUTED
*                                           AND NOT YET POSTED
*                                           COMPLETE                 */
*    3 UCBINTER BIT(1),                  /* DEVICE END ERROR  AFTER
*                                           CHANNEL END  (IOB
*                                           INTERCEPT)               */
*    3 UCBNOTRC BIT(1),                  /* CONTROL UNIT BUSY        */
*    3 UCBSTS   BIT(2),                  /* DEVICE STATUS            */
*%DCL UCBNTRAN CHAR;
*%UCBNTRAN='''01''B';                    /* DIRECT ACCESS ARM
*                                           SEEKING   (IOS
*                                           STANDALONE CP EXECUTED)
*                                           OR TC RECEIVE STATUS
*                                           (INHIBIT HIO)            */
*%DCL UCBTRANS CHAR;
*%UCBTRANS='''11''B';                    /* DIRECT ACCESS DATA
*                                           TRANSFER  (USER CP
*                                           EXECUTING)               */
*    3 UCBERR   BIT(1),                  /* ERROR ROUTINE USING
*                                           DEVICE  EXCLUSIVELY      */
*   2 UCBDTI      PTR(8),                /* DEVICE TABLE INDEX       */
*   2 UCBETI      PTR(8),                /* ERROR TABLE INDEX
*                                           (ERROR ROUTINE SUFFIX)   */
*   2 UCBSTI      PTR(8),                /* STATUS TABLE INDEX  (*10
*                                           = STATAB INDEX)          */
*   2 UCBLCI      PTR(8),                /* LOGICAL CHANNEL WORD
*                                           TABLE INDEX (*8 = LCHTAB
*                                           INDEX)                   */
*   2 UCBATI      PTR(8),                /* ATTENTION TABLE (ANTAB)
*                                           INDEX                    */
*   2 UCBWGT      CHAR(1),               /* FLAGS AND CHANNEL MASK   */
*    3 UCBIN    BIT(1),                  /* SYSIN                    */
*    3 UCBOUT   BIT(1),                  /* SYSOUT                   */
*    3 UCBPUB   BIT(1),                  /* ASSUME PUBLIC VOLUME     */
*    3 UCBREW   BIT(1),                  /* REWIND COMMAND           */
*    3 UCBPATH  BIT(4),                  /* INOPERATIVE PATHS        */
*     4 UCBPATH0 BIT(1),                 /* PRIMARY PATH INOPERATIVE */
*     4 UCBPATH1 BIT(1),                 /* OPTIONAL PATH 1
*                                           INOPERATIVE              */
*     4 UCBPATH2 BIT(1),                 /* OPTIONAL PATH 2
*                                           INOPERATIVE              */
*     4 UCBPATH3 BIT(1),                 /* OPTIONAL PATH 3
*                                           INOPERATIVE              */
*   2 UCBNAME     CHAR(3),               /* EBCDIC UNIT NAME         */
*   2 UCBTYP      CHAR(4),               /* DEVICE DESCRIPTION       */
*    3 UCBTBYT1    CHAR(1),              /* MODEL BITS               */
*     4 UCB1FEA0 BIT(1),                 /* BIT 0                    */
*     4 UCB1FEA1 BIT(1),                 /* BIT 1                    */
*     4 UCB1FEA2 BIT(1),                 /* BIT 2                    */
*     4 UCB1FEA3 BIT(1),                 /* BIT 3                    */
*     4 UCB1FEA4 BIT(1),                 /* BIT 4                    */
*     4 UCB1FEA5 BIT(1),                 /* BIT 5                    */
*     4 UCB1FEA6 BIT(1),                 /* BIT 6                    */
*     4 UCB1FEA7 BIT(1),                 /* BIT 7                    */
*    3 UCBTBYT2    CHAR(1),              /* OPTION FLAGS             */
*     4 UCB2OPT0 BIT(1),                 /* FLAG 0                   */
*     4 UCB2OPT1 BIT(1),                 /* FLAG 1                   */
*     4 UCB2OPT2 BIT(1),                 /* FLAG 2                   */
*     4 UCB2OPT3 BIT(1),                 /* FLAG 3                   */
*     4 UCB2OPT4 BIT(1),                 /* FLAG 4                   */
*     4 UCB2OPT5 BIT(1),                 /* FLAG 5                   */
*     4 UCB2OPT6 BIT(1),                 /* FLAG 6                   */
*      5 UCBVLPWR BIT(1),                /* VOLUME REQUIRES ALTERNATE
*                                           POWER SOURCE DEVICE
*                                                              S21167*/
*     4 UCB2OPT7 BIT(1),                 /* FLAG 7                   */
*      5 UCBDVPWR BIT(1),                /* DEVICE HAS ALTERNATE
*                                           POWER SOURCE       S21167*/
*    3 UCBTBYT3    CHAR(1),              /* CLASS BITS               */
*     4 UCB3TAPE BIT(1),                 /* TAPE                     */
*     4 UCB3COMM BIT(1),                 /* COMMUNICATIONS           */
*     4 UCB3DACC BIT(1),                 /* DIRECT ACCESS            */
*     4 UCB3DISP BIT(1),                 /* DISPLAY                  */
*     4 UCB3UREC BIT(1),                 /* UNIT RECORD              */
*     4 UCB3CHAR BIT(1),                 /* CHARACTER READER         */
*     4 *        BIT(1),                 /* RESERVED                 */
*     4 *        BIT(1),                 /* RESERVED                 */
*    3 UCBTBYT4    CHAR(1),              /* DEVICE CODE              */
*   2 UCBLTS      CHAR(2),               /* LAST REQUEST ELEMENT     */
*   2 UCBSNS      CHAR(2),               /* SENSE INFORMATION FOR
*                                           DEVICES WITHOUT EXTENDED
*                                           SENSE              ICB425*/
*    3 UCBFL7      BIT(8),               /* FLAG BYTE FOR DEVICES
*                                           WITH EXTENDED SENSE
*                                                              ICB425*/
*     4 UCBASDEP BIT(1),                 /* INDICATES CANCEL KEY
*                                           DEPRESSED ON 3211  ICB425*/
*     4 *        BIT(7),                 /* RESERVED           ICB425*/
*    3 *           CHAR(1),              /* RESERVED BYTE FOR DEVICES
*                                           WITH EXTENDED SENSE
*                                                              ICB425*/
*/*                                                                  */
*/* **************************************************************** */
*/*                                                                  */
*/*      DEVICE-DEPENDENT UCB SEGMENTS                               */
*/*                                                                  */
*   2 UCBDEV    BDY(BYTE);
*/*                                                                  */
*/* **************************************************************** */
*/*                                                                  */
*/*           DIRECT ACCESS (2300)                                   */
*/*           (EXCEPT DATA CELL)                                     */
*/*           AND MAGNETIC TAPE (2400)                               */
*/*           UCB SEGMENT                                            */
*/*                                                                  */
*DECLARE 1 UCBOBS01
*      BASED(ADDR(UCBDEV)),              /* DEVICE-DEPENDENT SEGMENT
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 UCBSENSE    CHAR(4) BDY(WORD),     /* ADDITIONAL SENSE
*                                           INFORMATION FOR DEVICES
*                                           WITH SIX SENSE BYTES     */
*    3 UCBSENSB    PTR(31),              /* SAME AS UCBSENSA BELOW   */
*     4 UCBSENSN    PTR(8),              /* NUMBER OF EXPANDED SENSE
*                                           BYTES                    */
*     4 UCBSENSA    PTR(24),             /* ADDRESS OF EXPANDED
*                                           SENSE INFORMATION        */
*   2 UCBVOLI     CHAR(6),               /* VOLUME SERIAL NUMBER     */
*   2 UCBSTAB     CHAR(1),               /* VOLUME STATUS            */
*    3 UCBBSVL  BIT(1),                  /* NOT SHARABLE (DIRECT
*                                           ACCESS)                  */
*     4 UCBDVSHR BIT(1),                 /* WHEN ONE, DEVICE SHARABLE
*                                           AMONG SEVERAL CPU'S (3420
*                                           MAGNETIC TAPE DEVICES
*                                           ONLY)              ICB485*/
*    3 UCBBVSC  BIT(1),                  /* RESERVED                 */
*    3 UCBPRSRS BIT(1),                  /* THIS DEVICE WAS SPECIFIED
*                                           IN PRESRES BUT WAS NOT
*                                           MOUNTED AT IPL           */
*     4 UCBBALB  BIT(1),                 /* MORE VOLUME LABEL
*                                           PROCESSING               */
*    3 UCBBPRV  BIT(1),                  /* PRIVATE USE              */
*    3 UCBBPUB  BIT(1),                  /* PUBLIC USE               */
*    3 UCBBSTR  BIT(1),                  /* STORAGE USE (DA)  ANSI
*                                           LABEL (MT)               */
*    3 UCBBJLB  BIT(1),                  /* JOBLIB VOLUME (DA)       */
*    3 UCBBNUL  BIT(1),                  /* MCS MOUNT/DEMOUNT MSGS
*                                           ISSUED  (MESSAGE IDS IN
*                                           UCBFSER) (MT)  CONTROL
*                                           VOLUME (DA)              */
*   2 UCBDMCT     CHAR(1),               /* VOLUME USE BYTE          */
*    3 UCBMOUNT BIT(1),                  /* MOUNTED OR REQUEST
*                                           ISSUED   (OFF MEANS
*                                           MOUNT VERIFIED)          */
*    3 UCBDMC   BIT(7),                  /* NUMBER OF OPEN DCBS      */
*   2 UCBVTOC     CHAR(4) BDY (WORD),    /* TTR0 OF VTOC (DA)        */
*    3 UCBFSCT     FIXED(15),            /* DATASET SEQUENCE COUNT
*                                           (MT)                     */
*    3 UCBFSEQ     FIXED(15),            /* DATASET SEQUENCE NUMBER
*                                           (MT)                     */
*   2 UCBFSER     CHAR(8) BDY (WORD),    /* DATASET SERIAL NUMBER
*                                           (MT AFTER OPEN) OR
*                                           MESSAGE IDS (MT BEFORE
*                                           OPEN)  PLUS TWO RESERVED
*                                           BYTES (MT)               */
*    3 UCBSQC      PTR(8),               /* NUMBER OF RESERVE MACROS
*                                           (DA INCLUDING DATACELL)  */
*    3 UCBDVRES    PTR(8),               /* DEVICE RESERVATION
*                                           (SHARED DASD) (DA
*                                           INCLUDING DATACELL)  SET
*                                           TO UCBSQC AFTER GOOD SIO */
*    3 UCBRQESV    FIXED(15),            /* ADDRESS OF RQE TO VERIFY
*                                           VOL SER NUMBER IN UCB
*                                           (SET FROM UCBLTS AFTER
*                                           UNSOLICITED DEVICE END)
*                                           (DA INCLUDING DATACELL)  */
*    3 UCBORSVA    PTR(31),              /* ADDRESS OF DEB FOR FIRST
*                                           USER  ON QUEUE FOR
*                                           DEVICE   (DA INCLUDING
*                                           DATACELL)                */
*     4 UCBFL4      CHAR(1),             /* FLAGS (DA INCLUDING
*                                           DATACELL)                */
*      5 UCBDAV   BIT(5),                /* VOLUME VERIFICATION
*                                           FLAGS                    */
*       6 UCBMNT   BIT(1),               /* VOL SER VERIFIER ISSUED
*                                           MOUNT                    */
*       6 UCBVVRTN BIT(1),               /* VOL SER VERIFIER IN
*                                           CONTROL                  */
*       6 UCBFT    BIT(1),               /* FIRST VERIFIER ENTRY FOR
*                                           VOL                      */
*       6 UCBTCC   BIT(1),               /* ALTERNATE TRACK
*                                           PROCEDURE   HANDLING VOL
*                                           LABEL                    */
*       6 UCBVER   BIT(1),               /* VERIFIER VERIFIED VOL    */
*      5 UCBORCNT BIT(3),                /* NUMBER OF REQUESTS FOR
*                                           DEVICE  FROM FIRST USER
*                                           ON QUEUE                 */
*     4 UCBORSVB    PTR(24)  BDY(BYTE),  /* ADDRESS OF DEB FOR FIRST
*                                           USER  ON QUEUE FOR
*                                           DEVICE   (DA INCLUDING
*                                           DATACELL)                */
*   2 UCBSKA      CHAR(8) BDY (WORD),    /* MBBCCHHR OF LAST SEEK
*                                           (DA INCLUDING DATACELL)  */
*    3 UCBXTN      PTR(31),              /* ADDRESS OF UCB EXTENSION
*                                           (MT)                     */
*     4 UCBVOPT     CHAR(1),             /* VOLUME STATISTIC FLAGS   */
*      5 UCBESV   BIT(1),                /* ESV RECORDS KEPT         */
*      5 UCBEVA   BIT(1),                /* EVA RECORDS MAY BE KEPT  */
*      5 UCBESVC  BIT(1),                /* ESV RECORDS SENT TO
*                                           CONSOLE  AS OPPOSED TO
*                                           SYS1.MAN                 */
*      5 UCBERPC  BIT(1),                /* ERROR RECOVERY PROC IN
*                                           CONTROL                  */
*      5 UCBESVE  BIT(1),                /* ESV RECORD ISSUED FOR
*                                           VOLUME  BECAUSE OF EOV   */
*      5 *        BIT(1),                /* RESERVED                 */
*      5 *        BIT(1),                /* RESERVED                 */
*      5 UCBASNDE BIT(1),                /* UNSOLICITED DEVICE END
*                                           OCCURRED ON 3420   ICB277*/
*     4 UCBXTNB     PTR(24)  BDY(BYTE),  /* ADDRESS OF UCB EXTENSION
*                                           (MT)  (MAP BELOW)        */
*    3 *           CHAR(4),              /* UCBSKA PADDING (NOT IN
*                                           UCB)  NO LONGER EXISTS
*                                           (MT)                     */
*   2 UCBECBB     PTR(31),               /* ECB ADDRESS (DA)         */
*    3 UCBUSER     PTR(8),               /* NUMBER OF CURRENT USERS
*                                           (DA)                     */
*    3 UCBECBA     PTR(24)  BDY(BYTE),   /* ECB ADDRESS (DA)         */
*   2 UCBEXT      PTR(31),               /* ADDRESS OF UCB EXTENSION
*                                           (DA)  (MAPPED BELOW)
*                                                                    */
*    3 UCBWKADB    PTR(31);              /* ALIAS                    */
*/*                                                                  */
*/* **************************************************************** */
*/*                                                                  */
*/*           DATA CELL (2321)                                       */
*/*           UCB SEGMENT                                            */
*/*                                                                  */
*DECLARE 1 UCBOBS02
*      BASED(ADDR(UCBDEV)),              /* DEVICE-DEPENDENT SEGMENT
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 UCBSEN      CHAR(4),               /* MORE SENSE INFORMATION   */
*   2 UCBERPA     CHAR(12),              /* ERROR RECOVERY WORK AREA
*                                           A                        */
*   2 UCBDASD     CHAR(16),              /* DATA CELL FIELDS MAPPED
*                                           BY  UCBSQC (1 BYTE)
*                                           UCBDVRES (1 BYTE)
*                                           UCBRQESV (2 BYTES)
*                                           UCBFL4 (1 FLAG BYTE)
*                                           UCBORSVA/B (3 BYTES)
*                                           UCBSKA (8 BYTES)  UNDER
*                                           DIRECT ACCESS ABOVE      */
*   2 UCBCELLS    CHAR(160),             /* CELL DESCRIPTIONS
*                                           (MAPPED BELOW)           */
*    3 UCBCELL0    CHAR(16),             /* CELL 0                   */
*    3 UCBCELL1    CHAR(16),             /* CELL 1                   */
*    3 UCBCELL2    CHAR(16),             /* CELL 2                   */
*    3 UCBCELL3    CHAR(16),             /* CELL 3                   */
*    3 UCBCELL4    CHAR(16),             /* CELL 4                   */
*    3 UCBCELL5    CHAR(16),             /* CELL 5                   */
*    3 UCBCELL6    CHAR(16),             /* CELL 6                   */
*    3 UCBCELL7    CHAR(16),             /* CELL 7                   */
*    3 UCBCELL8    CHAR(16),             /* CELL 8                   */
*    3 UCBCELL9    CHAR(16),             /* CELL 9                   */
*   2 UCBDC       PTR(31),               /* ADDRESS OF DATACELL UCB
*                                           EXT  (MAPPED BELOW)
*                                                                    */
*    3 UCBWKADA    PTR(31);              /* ALIAS                    */
*
*/* **************************************************************** */
*/*                                                                  */
*/*           UNIT RECORD WITH                                       */
*/*           UNIVERSAL CHARACTER SET (1403, 3211)                   */
*/*           UCB SEGMENT                                            */
*/*                                                                  */
*DECLARE 1 UCBOBS03
*      BASED(ADDR(UCBDEV)),              /* DEVICE-DEPENDENT SEGMENT
*                                                                    */
*/* **************************************************************** */
*
*   2 UCBNBRSN PTR(8),                   /* LENGTH OF SENSE INFO
*                                           (3211)                   */
*   2 UCBSNADR PTR(24),                  /* ADDR OF SENSE INFO --
*                                           THAT OF UCBSNS (1403)
*                                           OR UCBSNSXT (3211)       */
*   2 UCBXTADR PTR(31);                  /* ADDR OF UCS UCB
*                                           EXTENSION                */
*
*/* **************************************************************** */
*/*                                                                  */
*/*           GRAPHICS EXCEPT                                        */
*/*           M85 CRT CONSOLE                                        */
*/*           UCB SEGMENT                                            */
*/*                                                                  */
*DECLARE 1 UCBOBS04
*      BASED(ADDR(UCBDEV)),              /* DEVICE-DEPENDENT SEGMENT
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 UCBSENS     CHAR(2),               /* MORE SENSE INFORMATION   */
*   2 UCBOPEN     PTR(8),                /* NUMBER OF OPEN DCBS      */
*   2 UCBGCB      CHAR(1),               /* GRAPHIC CONTROL BYTE     */
*   2 UCBTEB      PTR(31),               /* ADDRESS OF TASK ENTRY
*                                           BLOCK                    */
*   2 UCBSTART    PTR(31),               /* RESTART ADDRESS          */
*   2 UCBBTA      PTR(31),               /* ADDRESS OF BUFFER TABLE  */
*    3 UCBDI       PTR(8),               /* DEVICES ON A CONTROL
*                                           UNIT   TO WHICH BUFFER
*                                           SECTIONS  ARE ASSIGNED   */
*    3 UCBBTB      PTR(24)  BDY(BYTE);   /* ADDRESS OF BUFFER TABLE
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*/*           TAPE CARTRIDGE READER (2495)                           */
*/*           AND OPTICAL READER (1285, 1287, 1288)                  */
*/*           UCB SEGMENT                                            */
*/*                                                                  */
*DECLARE 1 UCBOBS05
*      BASED(ADDR(UCBDEV)),              /* DEVICE-DEPENDENT SEGMENT
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 UCBCRWKA    PTR(31);               /* ADDRESS OF UCB EXTENSION
*                                           FOR THIS DEVICE  (MAPPED
*                                           BELOW)
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*/*     CELL DESCRIPTION                                             */
*/*     FOR UCBCELL0/.../9                                           */
*/*     IN DATACELL (2321)                                           */
*/*                                                                  */
*DECLARE 1 UCBOBS06
*      BASED(ADDR(UCBUSER));
*/*                                                                  */
*DECLARE
*  1 UCBDCLL  BASED(UCBDCPTR),
*                                        /* > UCBDCLL
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 UCBDCELL    CHAR(16) BDY (WORD),   /* ONE OF TEN CELLS
*                                                                    */
*    3 UCBDBBNR    FIXED(15),            /* BIN NUMBER               */
*    3 UCBDSTAB    CHAR(1),              /* VOLUME STATUS BYTE B
*                                           (ANALOGOUS TO UCBSTAB)   */
*     4 UCBDBSVL BIT(1),                 /* NOT SHARABLE             */
*     4 *        BIT(1),                 /* RESERVED                 */
*     4 UCBDBPRS BIT(1),                 /* THIS DEVICE WAS SPECIFIED
*                                           IN PRESRES BUT WAS NOT
*                                           MOUNTED AT IPL           */
*     4 UCBDBPRV BIT(1),                 /* PRIVATE USE              */
*     4 UCBDBPUB BIT(1),                 /* PUBLIC USE               */
*     4 UCBDBSTR BIT(1),                 /* STORAGE USE              */
*     4 UCBDBJLB BIT(1),                 /* JOBLIB VOLUME            */
*     4 UCBDBNUL BIT(1),                 /* CONTROL VOLUME           */
*    3 UCBDSTAT    CHAR(1),              /* CELL/BIN STATUS
*                                           (ANALOGOUS TO UCBSTAT)   */
*     4 UCBDNORM BIT(1),                 /* ONLINE WITH NORMAL CELL
*                                           (NOT OFFLINE OR BALLAST) */
*     4 *        BIT(1),                 /* RESERVED                 */
*     4 UCBDRESV BIT(1),                 /* RESERVED CELL            */
*     4 UCBDUNLD BIT(1),                 /* UNLOAD PENDING           */
*     4 UCBDALOC BIT(1),                 /* BIN ALLOCATED            */
*     4 UCBDPRES BIT(1),                 /* CELL PERMANENTLY
*                                           RESIDENT                 */
*     4 *        BIT(1),                 /* RESERVED                 */
*     4 *        BIT(1),                 /* RESERVED                 */
*    3 UCBDVOLI    CHAR(6),              /* VOLUME SERIAL NUMBER     */
*    3 UCBDJBNR    PTR(8),               /* INTERNAL JOB NUMBER      */
*    3 UCBDDMCT    PTR(8),               /* NUMBER OF OPEN DCBS FOR
*                                           THIS CELL (BITS 1-7)     */
*     4 UCBDDMNT BIT(1),                 /* IF 0, MOUNT VERIFICATION
*                                           HAS BEEN PERFORMED ---
*                                           IF 1, MOUNT REQUEST HAS
*                                           BEEN ISSUED              */
*     4 *        BIT(7),                 /* NUMBER OF OPEN DCBS      */
*    3 UCBDVTOC    CHAR(3),              /* TTR OF VTOC              */
*    3 UCBDUSER    PTR(8);               /* CURRENT NUMBER OF
*                                           DATASETS
*                                                                    */
*/*                                                                  */
*/* **************************************************************** */
*/*                                                                  */
*/*     UNIT CONTROL BLOCK EXTENSIONS                                */
*/*                                                                  */
*/* **************************************************************** */
*/*                                                                  */
*/*           DIRECT ACCESS (2300)                                   */
*/*           UCB EXTENSION                                          */
*/*                                                                  */
*DECLARE
*  1 UCBDA    BASED(UCBEXT),
*                                        /* > UCBDA
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 *           CHAR(104),             /* OFFSET                   */
*   2 UCBERP      CHAR(40),              /* ERROR RECOVERY WORK AREA */
*   2 UCBOVFLW    CHAR(40);              /* TRACK OVERFLOW WORK AREA
*                                           (OPTIONAL)               */
*/* **************************************************************** */
*/*                                                                  */
*/*           MAGNETIC TAPE (2400)                                   */
*/*           UCB EXTENSION                                          */
*/*                                                                  */
*DECLARE
*  1 UCBMT    BASED(UCBXTN),
*                                        /* > UCBMT
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 UCBROR      CHAR(8),               /* READ OPPOSITE DIRECTION
*                                           RECOVERY CCW             */
*   2 *           CHAR(2),               /* RESERVED           ICB463*/
*   2 UCBTRT      PTR(8),                /* TEMP READ ERROR
*                                           THRESHOLD   (IF ZERO
*                                           THEN EVA ABSENT)         */
*   2 UCBTWT      PTR(8),                /* TEMP WRITE ERROR
*                                           THRESHOLD  (IF ZERO THEN
*                                           EVA ABSENT)              */
*   2 UCBTR       PTR(8),                /* TEMP READ ERROR COUNT    */
*   2 UCBTW       PTR(8),                /* TEMP WRITE ERROR COUNT   */
*   2 UCBSIO      FIXED(15),             /* SIO COUNT                */
*   2 UCBPR       PTR(8),                /* PERM READ ERROR COUNT    */
*   2 UCBPW       PTR(8),                /* PERM WRITE ERROR COUNT   */
*   2 UCBNB       PTR(8),                /* NOISE BLOCK COUNT        */
*   2 UCBMS       CHAR(1),               /* MODE SET OPERATION CODE
*                                           FOR DATA BLOCKS ON
*                                           3420               ICB277*/
*   2 UCBERG      FIXED(15),             /* ERASE GAP COUNT          */
*   2 UCBCLN      FIXED(15);             /* CLEANER ACTION COUNT
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*/*           TAPE CARTRIDGE READER (2495)                           */
*/*           UCB EXTENSION                                          */
*/*                                                                  */
*DECLARE
*  1 UCBTCR   BASED(UCBCRWKA) BDY (DWORD),
*                                        /* > UCBTCR
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 UCBTCERP    CHAR(24) BDY (DWORD),  /* ERROR RECOVERY CHANNEL
*                                           PROGRAM                  */
*    3 UCBRCCW1    CHAR(8) BDY(DWORD),   /* RETRY CCW 1              */
*    3 UCBRCCW2    CHAR(8) BDY(DWORD),   /* RETRY CCW 2              */
*    3 UCBRCCW3    CHAR(8) BDY(DWORD),   /* RETRY CCW 3              */
*   2 UCBCSWSA    CHAR(8);               /* CSW SAVE AREA
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*/*          OPTICAL READER (1285, 1287, 1288)                       */
*/*          UCB EXTENSION                                           */
*/*                                                                  */
*DECLARE
*  1 UCBOR    BASED(UCBCRWKA),
*                                        /* > UCBOR
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 UCBCRDDC    PTR(8),                /* DATA CHECK ERROR COUNT   */
*   2 UCBCRILC    PTR(8),                /* INCORRECT LENGTH ERROR
*                                           COUNT                    */
*   2 UCBCRECC    PTR(8),                /* EQUIPMENT CHECK ERROR
*                                           COUNT                    */
*   2 *           CHAR(5);               /* RESERVED
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*/*            UNIT RECORD WITH                                      */
*/*            UNIVERSAL CHARACTER SET (1403, 3211)                  */
*/*            UCB EXTENSION                                         */
*/*                                                                  */
*DECLARE 1 UCBUCS
*      BASED(UCBXTADR),                  /* DEVICE DEPENDENT SEGMENT */
*
*/* **************************************************************** */
*
*   2 UCBUCSID CHAR(4),                  /* ID OF UCS IMAGE IN
*                                           BUFFER                   */
*   2 UCBUCSOP CHAR(1),                  /* FORMAT OF UCS IMAGE IN
*                                           BUFFER  (O FOR OPTION)   */
*    3 UCBUCSO1 BIT(1),                  /* DEFAULT IMAGE            */
*    3 UCBUCSO2 BIT(1),                  /* FOLD MODE                */
*    3 *        BIT(5),                  /* RESERVED                 */
*    3 UCBUCSPE BIT(1),                  /* IMAGE HAS PARITY ERROR
*                                           (3211)                   */
*   2 UCBFCBOP CHAR(1),                  /* RESERVED (1403) OR FLAGS
*                                           (3211)  (O FOR OPTION)   */
*    3 UCBFCBO1 BIT(1),                  /* FCB DEFAULT IMAGE        */
*    3 *        BIT(7),                  /* RESERVED                 */
*   2 *        CHAR(1),                  /* RESERVED                 */
*   2 UCBERCNT PTR(8),                   /* COUNT OF ERRORS THAT HAVE
*                                           OCCURRED (3211)          */
*   2 UCBFCBID CHAR(4),                  /* FCB IMAGE ID             */
*   2 UCBERADR PTR(31);                  /* ADDR OR ERP LOGOUT AREA  */
*
*/* **************************************************************** */
*/*                                                                  */
*/*            3211 SENSE INFORMATION UCB EXTENSION                  */
*/*                                                                  */
*/*      THIS EXTENSION IS POINTED TO BY THE UCBSNADR FIELD OF THE   */
*/*      UCB AND IS NOT CONTIGUOUS TO THE UCB.                       */
*/*                                                                  */
*DECLARE 1 UCBSNINF
*      BASED(UCBSNADR),
*
*/* **************************************************************** */
*
*   2 UCBSNSXT    CHAR(6),               /* SENSE INFORMATION        */
*   2 *           CHAR(2);               /* RESERVED                 */
*
*/* **************************************************************** */
*/*                                                                  */
*/*     MODEL 65 MULTIPROCESSING UCB PREFIX                          */
*/*                                                                  */
*DECLARE
*  1 UCBM65MP BASED(UCBPTR-4),
*                                        /* IF MP65
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*   2 UCBFL3      CHAR(1),               /* M65MP FLAGS              */
*    3 UCBACU   BIT(1),                  /* ALTERNATE CONTROL UNITS
*                                           EXIST                    */
*    3 *        BIT(1),                  /* RESERVED                 */
*    3 UCBHIOB  BIT(1),                  /* CPU B TO USE HIO         */
*    3 UCBHIOA  BIT(1),                  /* CPU A TO USE HIO         */
*    3 UCBSIOB  BIT(1),                  /* CPU B ISSUED LAST SIO    */
*    3 *        BIT(1),                  /* RESERVED                 */
*    3 UCBNOB   BIT(1),                  /* NO PATH TO CPU B         */
*    3 UCBNOA   BIT(1),                  /* NO PATH TO CPU A         */
*   2 *           CHAR(2),               /* RESERVED                 */
*   2 UCBMPFLG    CHAR(1),               /* FLAGS                    */
*    3 *        BIT(2),                  /* RESERVED                 */
*    3 UCBRIC   BIT(1),                  /* DURING NIP - DEVICE IS
*                                           RESERVED TO IPLED CPU    */
*    3 UCBRNIC  BIT(1),                  /* DURING NIP - DEVICE IS
*                                           RESERVED TO NON-IPLED CPU*/
*    3 *        BIT(1),                  /* RESERVED                 */
*    3 UCBNRO   BIT(1),                  /* DURING NIP - DEVICE IS
*                                           NOT RESERVED BECAUSE OF
*                                           OPERATOR'S REQUEST       */
*    3 UCBPROC  BIT(1),                  /* USED BY PROCESSING
*                                           PROGRAMS                 */
*    3 UCBIPL   BIT(1);                  /* DEVICE OFFLINE AT IPL
*                                                                    */
*/* **************************************************************** */
*/*                                                                  */
*/*            U N I T   C O N T R O L   B L O C K                   */
*/*                                                                  */
*/* **************************************************************** */
*
