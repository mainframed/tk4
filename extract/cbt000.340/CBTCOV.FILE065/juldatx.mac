JULDATX  TITLE 'SUBROUTINE WHICH OBTAINS JULIAN DATE'
*
*      THIS PROGRAM OBTAINS THE JULIAN DATE BY ISSUING THE TIME SVC.
* THE CALLING SEQUENCE FOR "JULDATX" IS AS FOLLOWS:
*           1. THE AREA INTO WHICH THE JULIAN DATE ("YYDDD") IS TO
*                  BE STORED IN 5-BYTE CHARACTER FORMAT
*
*      THE "JULDATX" SUBROUTINE IS REENTRANT AND REUSEABLE.
*
JULDATX  ENTER PARMREG=2,          SAVE REGISTERS AND INITIALIZE       X
               GETMAIN=(WORKLEN,0)
         REGISTER                  REGISTER EQUATES
         USING WORKAREA,R13        ADDRESS WORK AREA DSECT
         L     R2,0(R2)            LOAD ADDRESS OF PARAMETER
         TIME  DEC                 GET TIME AND DATE
         ST    R1,WORK             SAVE DATE IN WORK AREA
         UNPK  0(5,R2),WORK        CONVERT JULIAN DATE
         OI    4(R2),X'F0'            INTO CHARACTER FORMAT
         LA    R15,0               CLEAR RETURN CODE
         LEAVE RETCODE=(15),       RETURN TO CALLER                    X
               GETMAIN=(WORKLEN,0)
         EJECT
WORKAREA DSECT ,                   MAP OF GETMAINED WORK AREA
WORKSTRT EQU   *
         DS    18A                 REGISTER SAVE AREA
WORK     DS    F
WORKEND  EQU   *
WORKLEN  EQU   WORKEND-WORKSTRT    COMPUTE LENGTH OF WORK AREA
         END
