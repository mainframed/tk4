DATE     TITLE 'FORTRAN GREGORIAN DATE SUBROUTINE (MM/DD/YY)'
*
*      THIS PROGRAM OBTAINS THE GREGORIAN DATE ("MM/DD/YY"). IF IT
* IS OBTAINED SUCCESSFULLY, 0 IS RETURNED IN REGISTER 15. IF THE DATE
* IS NOT OBTAINED SUCCESSFULLY, 12 IS RETURNED IN REGISTER 15.
* THE CALLING SEQUENCE FOR "DATE" IS AS FOLLOWS
*           1. THE OUTPUT GREGORIAN DATE IN THE FORMAT "MM/DD/YY"
*
*      THE "DATE" SUBROUTINE IS REENTRANT AND REUSEABLE.
*
DATE     ENTER PARMREG=2,          SAVE REGISTERS AND INITIALIZE       X
               GETMAIN=(WORKSIZE,0)
         REGISTER                  REGISTER EQUATES
         USING WORKAREA,R13        ADDRESS WORKAREA DSECT
         MVC   CALLIST,CCALLST     MOVE PARAMETER LIST TO WORK AREA
         LOAD  EP=SDATEX           LOAD ROUTINE TO OBTAIN GREG DATE
         LR    R15,R0              SAVE "SDATEX" ENTRY POINT ADDRESS
         L     R2,0(,R2)           POINT TO PASSED PARAMETER
         CALL  (15),((R2)),        CALL "SDATEX"                       X
               MF=(E,CALLIST)
EXIT     DS    0H
         LEAVE RETCODE=(15),       RETURN TO CALLER                    X
               GETMAIN=(WORKSIZE,0)
         EJECT
CCALLST  CALL  ,(0),MF=L           GENERATE PARAMETER LIST FOR CALL
CALLEN   EQU   *-CCALLST           COMPUTE PARAMETER LIST LENGTH
         SPACE
WORKAREA DSECT ,                   MAP OF GETMAINED WORK AREA
WORKSTRT EQU   *
         DS    18A                 REGISTER SAVE AREA
CALLIST  DS    CL(CALLEN)          PARAMETER LIST FOR CALL MACRO
WORKEND  EQU   *
WORKSIZE EQU   WORKEND-WORKSTRT    COMPUTE SIZE OF WORKAREA
         END
