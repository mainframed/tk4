JOBNAME  TITLE 'SUBROUTINE WHICH OBTAINS CURRENT JOBNAME'
*
*      THIS PROGRAM RETRIEVES THE JOBNAME OF THE CURRENT JOB.
* THE CALLING SEQUENCE FOR "JOBNAME" IS AS FOLLOWS:
*          1. THE 8-BYTE FIELD INTO WHICH THE JOBNAME IS TO BE
*                 STORED
*
*      THE "JOBNAME" PROGRAM IS REENTRANT AND REUSEABLE.
*
JOBNAME  ENTER PARMREG=2,          SAVE REGISTERS AND INITIALIZE       X
               GETMAIN=(72,0)
         REGISTER                  REGISTER EQUATES
         USING CVT,R4              ADDRESS CVT DSECT
         USING ASCB,R5             ADDRESS ASCB DSECT
         L     R4,16               POINT TO THE CVT
         L     R5,CVTTCBP          POINT TO TCB/ASCB WORDS
         L     R5,12(,R5)          POINT TO THE CURRENT ASCB
         L     R6,ASCBJBNI         LOAD POINTER TO BATCH JOB JOBNAME
         LTR   R6,R6               IF THIS IS A BATCH JOB
         BNZ   MOVENAME               THEN GO MOVE IN THE JOBNAME
         L     R6,ASCBJBNS            ELSE LOAD POINTER TO STC/TSU
MOVENAME DS    0H
         L     R2,0(,R2)           POINT TO USERS PARAMETER FIELD
         MVC   0(8,R2),0(R6)       MOVE THE JOBNAME IN
         LEAVE RETCODE=0,          RETURN TO CALLER                    X
               GETMAIN=(72,0)
         EJECT
         IHAASCB
         EJECT
         CVT   DSECT=YES
         END
