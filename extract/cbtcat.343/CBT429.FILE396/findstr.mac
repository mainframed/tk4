/* REXX */
PARSE ARG PARMS
STRING = ''
DSN = ''
WCNT = WORDS(PARMS)
IF WCNT < 2 THEN DO
  SAY "ARGUMENTS TO BE PASSED ARE 'SEARCH-STRING' 'PDS-NAME'"
  EXIT 4
END
IF WCNT = 2 THEN DO
  STRING = WORD(PARMS,1)
  DSN    = WORD(PARMS,2)
END
ELSE DO CNT = 1 TO WCNT
  IF CNT = WCNT THEN DSN = WORD(PARMS,CNT)
  ELSE STRING = STRING××' '××WORD(PARMS,CNT)
END
"ALLOC FILE(NEWDD) DA("DSN") SHR REUSE"
ADDRESS ISPEXEC "VGET ("ZSSFLDS") ASIS"
IF ZSSFLDS = 'ZSSFLDS' THEN ZSSFLDS = 'SRCHFOR.LIST'
"ALLOC FILE(OUTDD) DA("ZSSFLDS") SHR REUSE"
IF RC <> 0 THEN DO
  "ALLOC FILE(OUTDD) DA("ZSSFLDS")" ,
        " UNIT(SYSALLDA) NEW CATALOG TRACKS SPACE(30,30)",
        " REUSE LRECL(133) RECFM(F B) BLKSIZE(3990)"
END
"ALLOC FILE(SYSIN) UNIT(SYSALLDA) NEW TRACKS SPACE(1,1) DELETE",
      " REUSE LRECL(80) RECFM(F B) BLKSIZE(3120)"
SAY "SEARCHING FOR '"STRING"' IN" DSN"."
QUEUE "SRCHFOR '"STRING"'"             /* SEARCH STRING */
"EXECIO 1 DISKW SYSIN  (FINIS"
ADDRESS ISPEXEC "SELECT PGM(ISRSUPC)" ,
      "PARM(SRCHCMP,ANYC)"
IF RC <> 0 THEN ADDRESS ISPEXEC ,
  "BROWSE DATASET("ZSSFLDS")"
ELSE SAY 'STRING' STRING 'WAS NOT FOUND IN' DSN
"FREE FILE(NEWDD,OUTDD,SYSIN)"
