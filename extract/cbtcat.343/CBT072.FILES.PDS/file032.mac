TABSET ON(5)
1



















                A P E M A N        M O N I T O R

        FROM HARWELL COMPUTER SCIENCE AND SYSTEM DIVISION

                HARWELL, OXFORDSHIRE,  ENGLAND

1                                                           PAGE 01
       APEMAN - 'A.E.R.E. PERFORMANCE EVALUATION MONITOR AND ANALYSER'

    1. INTRODUCTION.

    IN OUR ATTEMPTS TO CREATE A VERSION OF MVS THAT HAD A PERFORMANCE CO
    WITH THAT OF MVT, A NEED WAS FELT FOR A MONITOR( OR MONITORS) WHICH
    SAMPLE CHOSEN CONTROL FIELDS IN THE SYSTEM AND PRODUCE A NEATLY FORM
    REPORT WITH MINIMUM SYSTEM OVERHEAD. THE IBM SUPPLIED MONITOR MF/1 W
    FELT TO BE SUFFICIENT AS IT SUPPLIED ONLY GLOBAL SYSTEM VALUES WHERE
    INFORMATION ON INDIVIDUAL ADDRESS SPACES WAS ALSO NEEDED. SINCE WE D
    KNOW INITIALLY WHAT VALUES WE MIGHT NEED THE MONITOR HAD TO BE FLEXI
    DESIGN, TO ALLOW NEW AREAS OF INTEREST TO BE ADDED EASILY.

    IT WAS FELT THAT THIS AIM COULD BE BE SERVED BY HAVING A MAIN ROUTIN
    WHICH DIFFERENT MONITORING ROUTINES COULD BE PLUGGED AS AND WHEN THE
    MONITORING OF DIFFERENT FIELDS WAS REQUIRED. IN ORDER TO MINIMISE TH
    SYSTEM OVERHEAD AT RUNTIME, IT WAS DECIDED TO MAKE THE MONITORING
    ROUTINE SAMPLE AT FIXED INTERVALS AND TO WRITE THE DATA GATHERED BAC
    VIA THE MAIN ROUTINE INTO A SINGLE LOG. THIS DATA CAN THEN BE POST
    ANALYZED IN ANY FASHION REQUIRED, ALLOWING A POST-ANALYSIS ROUTINE
    ACCESS TO ANY VALUE REQUIRED.

    2.  RUNNING THE MONITOR.

    MONITOR ROUTINES REQUIRED ARE LOADED DYNAMICALLY BEFORE THE START OF
    MONITORING. THEY MUST HAVE NAMES OF THE FORM MONX WHERE X IS ALPHABE
    (A-Z). IF A ROUTINE IS REQUIRED THEN IT MAY BE SELECTED BY THE PRESE
    OF THE KEYWORD MONX IN THE PARM FIELD.

    THE INTERVAL AT WHICH THE MONITORS ARE ENTERED IS SELECTED BY THE VA
    GIVEN TO THE KEYWORD INTVAL= IN THE PARM FIELD. IF IT IS NOT CODED T
    INTVAL=15 IS ASSUMED. THE DEFAULT UNITS ARE SECONDS BUT MILLISECONDS
    BE SELECTED BY THE KEYWORD MILLI OR MINUTES BY THE KEYWORK MINS.

    THE TOTAL LENGTH OF TIME FOR WHICH THE MONITOR IS TO BE RUN MAY BE
    ALTERED BY ASSIGNING A VALUE TO MAXTIM= IN THE PARM FIELD. THE DEFAU
    IS MAXTIM=60. THE PARAMETER IS ALWAYS IN UNITS OF MINUTES

    A MONITOR MAY BE SELECTED TO BE ENTERED AT ANY INTEGRAL MULTIPLE OF
    THE BASIC INTERVAL BY CODING MONX=N IN THE PARM FIELD. THIS WILL CAU
    THE MONITOR TO BE ENTERED ONLY EVERY N BASIC INTERVALS.

    MONITORS MAY ALSO BE SELECTED USING FORTRAN STREAM 5. THE FORMAT FOR
    INPUT DATA IS.

                    COL 1    COL 4    COL 6     COL 9

                     MON        X        N  N  N  N

    N SHOULD BE RIGHT ADJUSTED IN THE 4 COLUMN FIELD (6-9) AND IS THE MU
    OF THE BASIC CALLING INTERVAL REQUIRED FOR MONX. THE DATA ON FORTRAN
   5 OVERRIDES ANY INPUT IN THE PARM FIELD.
    APPENDIX A CONTAINS THE JCL NECESSARY TO RUN THE MONITORS, AND AN EX
    OF INPUT PARAMETERS IN THE PARM FIELD AND VIA FORTRAN STREAM 5.
1                                                           PAGE 02
    3.  LINKAGE TO THE MONITORING ROUTINES.

    THE LINKAGE SUPPLIED TO EVERY MONITORING ROUTINE IS.

         CALL MONX  (INPUT, MONRT, TIME)

    INPUT CONTAINS THE ADDRESS OF A ROUTINE WHICH WILL READ IN CARDS FRO
          A SPECIFIED DDNAME. THE LINKAGE TO THIS ROUTINE IS.

          CALL INPUT (NAME, BUFFER, IFLAG)

          NAME - DDNAME

          BUFFER - 80 BYTE AREA INTO WHICH DATA SHOULD BE RETURNED

          IFLAG - RETURN CODE = 1 FOR EOF

    MONRT CONTAINS THE ADDRESS OF THE ROUTINE WHICH WRITES DATA TO THE L
          THE LINKAGE TO THIS ROUTINE IS.

          CALL MONRT (NAME, LENGTH, IDATA, IFLAG)

          THE FORMAT OF THE DATA RECORD WRITTEN TO THE LOG IS

                 NAME,      LENGTH,      IDATA

                1 WORD      1 WORD       LENGTH WORDS.

          IFLAG SHOULD BE SET TO ZERO BY EACH MONITOR CALLING THIS ROUTI
          IF IT IS GREATER THEN ZERO THEN AN END MARK IS PLACED IN THE C
          BUFFER AND THE BUFFERS ARE WRITTEN TO THE LOG.

    TIME IS A 4 BYTE AREA CONTAINING THE TIME OF DAY (TOD) IN THE FORMAT
         HHMMSSTH
         WHERE H IS HOURS, M IS MINUTES, S IS SECONDS, T IS TENTHS, AND
         HUNDREDS. THIS IS SUPPLIED SO THAT EACH MONITORING ROUTINE MAY
         THE TIME IT WAS CALLED.

    THIS LINKAGE CONVENTION MUST BE OBSERVED BY ALL MONITORING ROUTINES,
    ROUTINES AND MONRT MUST BE USED TO READ INPUT DATA AND WRITE DATA
    TO THE LOG.

    4.  AVAILABLE MONITORING ROUTINES.

    (A) MONA,MONZ.

    THESE MONITORS LOG THE TIME OF THEIR CALL, USING THE ROUTINE ZA01AS
    READS THE INTERNAL CLOCK, GIVING THE CURRENT READING IN SECONDS AS A
    FLOATING POINT NUMBER.

    THE RECORD FORMAT IS.

    MONA/MONZ - NAME OF MONITORING ROUTINE

        2     - LENGTH OF DATA (IN WORDS)

       TOD    - TIME OF DAY PASSED FROM THE MAIN ROUTINE

      TIME    - TIME RETURNED FROM ZA01AS

1                                                           PAGE 03
    (B)  MONP.

    THIS MONITOR LOGS THE PAGE FRAME TABLE ENTRIES (PFTE'S) CORRESPONDIN
    THE ASID'S REQUESTED.

    INPUT IS VIA THE INPUT STREAM MONP. THE FOLLOWING OPTIONS ARE AVAILA

          //MONP   DD   *

          JOBNAME  -  ALL PTFE'S CORRESPONDING TO THE ASID FOR THIS JOBN

          *PLPA    -  ALL PTFE'S FOR ASID = -1

          *VIO     -  ALL PTFE'S FOR VIO

          *NAME    -  LIST OF JOBNAMES FOR EACH ASID.

          *ALL     -  ALL PTFE'S FOR ALL JOBNAMES.

          /*

    UP TO TEN OPTIONS MAY BE CHOSEN VIA THIS INPUT STREAM.

    THERE ARE THREE FORMATS FOR THE RECORDS WRITTEN TO THE LOG.

      (I)  MONP,4,    TOD,0,JOBNAME - NO ASID FOR THIS JOBNAME

     (II)  MONP,7,    TOD,1,JOBNAME,ASID,VBN/FIX COUNT,FLAGS - PFTE FOR

    (III)  MONP,5,    TOD,2,JOBNAME,ASID - JOBNAME FOR ASID.

           NAME LENGTH   IDATA

1                                                           PAGE 03A
    (C)  MONS.

    THIS MONITOR PRODUCES A SNAPSHOT OF ALL ACTIVE ADDRESS SPACES. IT SA
    FIELDS IN THE ASCB AND OUCB AND TOTALS THE NUMBER OF PFTE'S OF VARIO
    TYPES BELONGING TO EACH ASID.

    THE FORMAT OF THE RECORD WRITTEN TO THE LOG LISTS.

             (4 BYTES)  MONS     - NAME OF MONITORING ROUTINE
             (4 BYTES)  23       - LENGTH OF DATA          (IN WORDS)
             (4 BYTES)  TOD      - TIME OF DAY PASSED FROM THE MAIN ROUT
             (8 BYTES)  JOBNAME  - JOBNAME FOR THIS ASID
             (4 BYTES)  ASID     - ADDRESS SPACE ID
             (8 BYTES)  ASCBEJST - ELAPSED JOB TIME
             (2 BYTES)  ASCBSEQN - NO. IN DISPATCHING QUEUE
             (2 BYTES)  ASCBDP   - DISPATCHING PRIORITY
             (4 BYTES)  ASCBJSTL - TOTAL JOB TIME
             (8 BYTES)  ASCBSRBT - SRB TIME
             (2 BYTES)  ASCBFLAG - FLAGS FROM ASCB
             (2 BYTES)  ASCBFMCT - FRAME COUNT
             (2 BYTES)  OUCBNPG  - PERFORMANCE GROUP
             (2 BYTES)  OUCBWMR  - WLM RECOMMENDATION VALUE
             (4 BYTES)  OUCBRMR  - RMA RECOMMENDATION VALUE
             (4 BYTES)  OUCBWMS  - INTERVAL SERVICE ACCUMULATOR
             (2 BYTES)  OUCBWSS  - SWAP-IN  SIZE
             (2 BYTES)  OUCBPSO  - SWAP-OUT SIZE
             (2 BYTES)  OUCBSWC  - TRANSACTION SWAP COUNT
             (2 BYTES)           - UNUSED
             (2 BYTES)  OUCBFLAG - TYPE OF JOB, AND WAIT
             (2 BYTES)  ASCBSWCT - NO. OF WAITS
             (2 BYTES)  ASCBVSC  - VIO SLOT COUNT
             (2 BYTES)  ASCBNVSC - NON-VAM SLOT COUNT
             (4 BYTES)  ALLOC    - ALLOCATED FRAME COUNT
             (4 BYTES)  LSQA     - LSQA FRAME COUNT
             (4 BYTES)  LOCAL    - LOCAL FRAME COUNT
             (4 BYTES)  FIXED    - FIXED FRAME COUNT
             (4 BYTES)  VIO      - VIO   FRAME COUNT

1                                                           PAGE 04
    5.  POST-ANALYSIS OF MONITOR OUTPUT.

    A NUMBER OF SUBROUTINES HAVE BEEN WRITTEN TO ANALYZE THE DATA WRITTE
    THE MONITORS OUTLINED IN SECTION 4. A ROUTINE MONRD HAS BEEN WRITTEN
    WHICH WILL PICK SUCCESSIVE RECORDS WRITTEN BY A PARTICULAR MONITOR O
    THE MONITOR OUTPUT DATA SET (SEE SECTION FOR THE FORMAT OF THE
    OUTPUT DATASET.) THE LINKAGE OF THIS ROUTINE IS.

                     CALL  MONRD (NAME, LENGTH, IDATA, IFLAG)

    WHERE

        NAME    - THE 4 BYTE NAME ASSOCIATED WITH THE TYPE OF OUTPUT REC
                  WANTED

        LENGTH  - THE MAXIMUM LENGTH OF DATA THAT WILL BE PASSED ACROSS
                  WORDS).

        IDATA   - THE USER'S AREA INTO WHICH THE DATA IS TO BE PUT.

        IFLAG   - FLAG-ON INPUT  = -1 INDICATES REWIND TO START OF THE D
                                 =  0 INDICATED GET NEXT RECORD
                      -ON OUTPUT =  0 NORMAL RETURN
                                 =  1 END OF DATA RETURN
                                 =  2 LENGTH SUPPLIED LESS THAN DATA LEN
                                       NO DATA RETURNED.

    THE FOLLOWING OPTIONS ARE AVAILABLE IN THE ANALYSIS ROUTINES.

        GRAPH - PRODUCES GRAPHICAL ANALYSIS OF THE PFTE MONITOR (MONP)

        LIST  - PRODUCES A FULL LIST OF THE PTFE'S

        ALL   - ANALYSIS FOR ALL MONITORS IS REQUIRED (NOT JUST ACTIVE M

        DUMP  - PRODUCES A HEX DUMP OF THE MONITOR DATA

        TRACE - PRODUCES A PRINTOUT OF THE FIRST 1000 RECORD READS FROM
                MONITOR DATA BY THE ANALYSIS ROUTINES

    THESE OPTIONS ARE CONTAINED IN A COMMON BLOCK.

        COMMON/OPTION/ISTRM, GRAPH, LIST, ALL, DUMP, TRACE, TITLE

    ISTRM IS AN INTEGER* 4 CONTAINING THE FORTRAN STREAM NUMBER OF THE M
    DATA.

    GRAPH, LIST, ALL, DUMP, TRACE ARE LOGICAL* 4 AND HAVE THE VALUE .TRU
    IF THE CORRESPONDING OPTION IS REQUIRED.

    TITLE IS A 20 BYTE AREA CONTAINING THE TITLE ASSOCIATED WITH THIS
    MONITOR DATASET.

    THE DEFAULT VALUES FOR THE OPTIONS GRAPH, LIST, ALL, DUMP, AND TRACE
    ARE ESTABLISHED BY THEIR PRESENCE IN THE PARM FIELD FOR THE
    ANALYSIS RUN.

    I.E. IF PARM='GRAPH,ALL,DUMP' THEN THE DEFAULTS WOULD BE.
1                                                           PAGE 05
                  GRAPH = TRUE

                  LIST  = FALSE

                  ALL   = TRUE

                  DUMP  = TRUE

                  TRACE = FALSE

    THE DATA TO BE PROCESSED AND ANY CHANGES TO THE DEFAULT OPTIONS ARE
    SELECTED BY INPUT DATA INTO FORTRAN STREAM 5. THE FORMAT FOR THE DAT

            COL 2   COL 4   COL 6   COL 8   COL 10   COL 12   COL 14
              3       N       Y               Y              MONITOR TES
    FORTRAN STREAM NUMBER
    NUMBER FOR THE
    DATA TO BE                                                     TITLE
    PROCESSED.      GRAPH   LIST     ALL     DUMP     TRACE

    IF THE COLUMN CORRESPONDING TO A PARTICULAR OPTION IS BLANK THEN THE
    DEFAULT FOR THAT OPTION IS REQUIRED (I.E. ALL= DEFAULT, TRACE=DEFALU
    IF THE COLUMN = Y (YES) THEN THAT OPTION IS REQUIRED (I.E. LIST IS
    REQUIRED, DUMP IS REQUIRED). IF THE COLUMN = N (NO) THEN THE OPTION
    NOT REQUIRED (I.E. GRAPH NOT REQUIRED.). APPENDIX B GIVES EXAMPLES O
    SELECTING THE OPTIONS REQUIRED.

    6.  ANALYSIS ROUTINES AVAILABLE

    (A)  MONA/MONZ.

    THE ANALYSIS OF THE DATA FROM THESE MONITORING ROUTINES GIVES THE
    DISTRIBUTION OF THE INTERVAL BETWEEN CALLS TO THE MONITOR. THE MEAN
    AND STANDARD DEVIATION ARE PRINTED AND IF THERE ARE SUFFICIENT POINT
    A HISTOGRAM OF THE INTERVAL AGAINST THE FRACTION OF THE CALLS IN
    THAT INTERVAL IS PLOTTED.

    (B)  MONP.

    IF THE LIST OPTION HAS BEEN SELECTED THEN A SORTED LIST OF PFTE'S
    BELONGING TO EACH ASID MONITORED, IS PRINTED FOR EACH TIME THE
    MONITOR WAS CALLED. LSQA AND AVAILABLE PAGES ARE FLAGGED AND THE NAM
    OF THE MODULE RESIDING IN THAT PAGE IS PRINTED IF THE PAGE IS IN THE
    PLPA. AT THE END OF EACH LIST TOTALS FOR THE DIFFERENT TYPES OF PAGE
    PRESENT ARE PRINTED, AND AVERAGES FOR THESE QUANTITIES ARE PRINTED A
    THE END OF THE DATA.

    IF THE LIST OPTION WAS NOT SELECTED THEN ONLY THE TOTALS AND AVERAGE
    ARE PRINTED.

    IF THE GRAPH OPTION HAS BEEN SELECTED THAN A PLOT OF THE PAGES PRESE
    FOR EACH ADDRESS SPACE IS MADE AGAINST THE TIME THEY WERE PRESENT. A
    THE END OF THE DATA A HISTOGRAM IS PRINTED GIVING THE PERCENTAGE OF
    TIME THAT THE MONITOR FOUND EACH PFTE PRESENT FOR THE ADDRESS SPACE.

    (C)  MONS.

    A PRINTOUT OF THE STATUS OF ALL THE ACTIVE ADDRESS SPACES AT THE TIM
    OF EACH MONITOR CALL IS MADE. THE FOLLOWING ITEMS ARE PRINTED
    FOR EACH ADDRESS SPACE.

1                                                           PAGE 06

    ASID                    - ADDRESS SPACE ID
    JOBNAME                 - JOBNAME OR USER ID
    TYPE                    - S = STARTED TASK, L = LOGON, M = MOUNT, B
    PERF GRP                - PERFORMANCE GROUP
    SWP-IN  SIZE            - WORKING SET SIZE AT LAST SWAP-IN
    SWP-OT  SIZE            - PAGES SWAPPED AT LAST SWAP OUT
    DISP PRTY               - DISPATCHING PRIORITY
    # IN DISP Q             - SEQUENCE NUMBER OF ASCB IN DISPATCHING QUE
    STEP TIME               - ELAPSED JOB STEP TIME (IN TENTHS OF A SECO
    D-STEP TIME             - CHANGE IN STEP TIME SINCE LAST SNAPSHOT (M
    SRB TIME                - ACCUMULATED SRB TIME  (IN TENTHS OF A SECO
    D-SRB TIME              - CHANGE IN SRB TIME SINCE LAST SNAPSHOT (MI
    # WAITS                 - NUMBER OF TIMES ASCB ENTERS SHORT WAIT
    D-WAITS                 - CHANGE IN # WAITS SINCE LAST SNAPSHOT
    ALLOC FRAME             - TOTAL # OF FRAMES ALLOCATED TO THAT ADRSPC
    LSQA  FRAME             - NUMBER OF LSQA FRAMES FOR THIS ADDRESS SPA
    LOCAL  FRAMES           - # OF FRAMES OF THE PRIVATE ADDRESS SPACE
    FIXED  FRAMES           - # OF LOCAL FRAMES THAT ARE FIXED
    VIO    FRAMES           - # OF RECLAIMABLE VIO PAGES
    VIO SLOTS               - ALLOCATED AUX SLOT COUNT FOR VIO
    N-VIO SLOTS             - ALLOCATED AUX SLOT COUNT FOR NON-VIO
    # OF SWAPTS             - TRANSACTION SWAP COUNT
    SERV SUM                - INTERVAL SERVICE ACCUMULATOR
    D-SERV SUM              - CHANGE IN SERVICE SUM SINCE LAST SNAPSHOT
    WLM RV                  - WLM RECOMMENDATION VALUE
    RESOURCE RV             - RMA RECOMMENDATION VALUE
    EVENT                   - L LONG WAIT
                              T TERMINAL WAIT
                              O OUTPUT TERMINAL WAIT
                              C COMPOSITE INPUT MESSAGE
                              E ENQ HOLD PROCESSED
                              Q QSCEST PROCESSED
                              P QSCECMP PROCESSED
                              M MSO DETECTED WAIT STATUS
    STATUS                  - IN  ADDRESS SPACE IN STORE
                              OUT ADDRESS SPACE OUT OF STORE
                              NS/R ADDRESS SPACE IS NON-SWAPPABLE OR V=R
    -                         INDICATES NOT APPLICABLE
    ******                    INDICATES OVERFLOW
1                                                           PAGE 07
    AT THE END OF THE SNAPSHOTS AT ANY ONE TIME THE FOLLOWING ARE PRINTE

    # IN               - NUMBER OF ADDRESS SPACES SWAPPED IN
    # OUT              - NUMBER OF ADDRESS SPACES SWAPPED OUT
    # NS/R             - NUMBER OF ADDRESS APCES NON-SWAPPABLE OR V=R
    D-STEP TIME        - TOTAL CHANGE IN STEP TIME SINCE LAST SNAPSHOT (
    D-SRB  TIME        - TOTAL CHANGE IN SRB  TIME SINCE LAST SNAPSHOT (
    D-WAIT             - TOTAL CHANGE IN # WAITS   SINCE LAST SNAPSHOT
    D-SER SUM          - TOTAL CHANGE IN SERVICE SUM SINCE LAST SNAPSHOT
    STEP TIME/SEC      - AVERAGE STEP TIME/SEC SINCE LAST SNAPSHOT
    SRB  TIME/SEC      - AVERABE SRB  TIME/SEC SINCE LAST SNAPSHOT
    # WAITS/SEC        - AVERAGE NUMBER OF WAITS/SEC SINCE LAST SNAPSHOT
    SER SUM/SEC        - AVERAGE SERVICE SUM/SEC SINCE LAST SNAPSHOT

    AT THE END OF THE SNAPSHOTS, AVERAGES ARE PRINTED OUT FOR

                        #   IN
                        #   OUT
                        #   NS/R
                        STEP TIME/SEC
                        SRB  TIME/SEC
    //         EXEC  PGM=NULL
    //A        DD    DSN=DATA.CCG.ANBMON,VOL=REF=CCG,DISP=(OLD,DELETE)
    //         EXEC  PGM=NULL
    //A        DD    DSN=DATA.CCG.ANBMON,VOL=REF=CCG,DISP=(,KEEP),),
    //         SPACE=(TRK,(10,1),RLSE),
    //         DCB=(BLKSIZE=4000,LRECL=4000,RECFM=FB)
    //         EXEC  PGM=MONITOR,REGION=144K,DPRTY=(14,14),
    //         PARM='MONA,MONZ=3,MONS=10,MAXTIM=1,MILLI'
    //STEPLIB  DD    DSN=LOAD.CCG.ANB.MON,DISP=SHR
    //FT06F001 DD    SYSOUT=A
    //FT01F001 DD    DSN=DATA.CCG.ANBMON,VOL=REF=CCG,DISP=OLD
    //FT05F001 DD    *
    MONP
    MONS      5
    /*
    //MONP     DD    *
    *PLPA       THIS IS AN IMPUT STREAM FOR MONITOR    MONP.
    /*
    //

    FORTRAN STREAM 1 POINTS TO THE DATASET TO CONTAIN THE MONITOR LOG.

    THIS JCL WOULD PRODUCE

            MONA AT 15 MILLISECOND INTERVALS

            MONP AT 15 MILLISECOND INTERVALS

            MONS AT 75 MILLISECOND INTERVALS (5 X 15 MSECS)

            MONZ AT 45 MILLISECOND INTERVALS (3 X 15 MSECS)

    FOR A MONITORING TIME OF 1 MINUTE

1                                                           PAGE 09
         APPENDIX   B                     JCL  FOR  ANALYSIS

         THE JCL NECESSARY TO ANAYLSE THE MONITOR OUTPUT IS AS FOLLOWS

         //ANBANSIS   JOB   (2417,HCCG,5,,,99),ANALYSIS
         //           EXEC   PGM=ANALYSIS,REGION=144K,PARM='GRAPH'
         //STEPLIB    DD     DSN=LOAD.CCG.ANB.ANALYSIS,DISP=SHR
         //SYSUDUMP   DD     SYSOUT=A
         //FT06F001   DD     SYSOUT=A
         /*GHOST
         //GRIDHEAD   DD     *
         *L=YES,*C="ANB    MONITOR     TEST 10/06/75"
         /*
         //FT03F001   DD     DSN=DATA.CCG.ANBTEST,VOL=REF=CCG,DISP=OLD
         //FT02F001   DD     DSN=DATA.CCG.ANBMON,VOL=REF=CCG,DISP=OLD
         //FT10F001   DD     DSN=HAR.LPACUTP,VOL=SER=319SYS,UNIT=3330,DI
         //FT11F001   DD     DSN=&&F11,UNIT=DISKA,DISP=NEW,SPACE=(TRK,(1
         //FT09F001   DD     *
         DATA FOR MLPA MAP.
         /*
         //FT05F001   DD     *
           3     Y     N  N    ANBTEST    10/06/75

           2  N  Y        Y    ANBMON      10/06/75

           2  4  6  8  9  10   14    =    COLUMN NUMBERS
         /*
         //

         THIS JCL WOULD PRODUCE ANALYSIS OF

         (I)   DATA.CCG.ANBTEST   WITH OPTIONS   GRAPH,LIST

         (II)  DATA.CCG.ANBMON    WITH OPTIONS   LIST,TRACE

         THE DEFAULT OPTIONS WOULD HAVE BEEN GRAPH ONLY.

         FORTRAN STREAM 10 POINTS TO A DATASET CONTAINING A MAP OF THE P

         THE GRIDHEAD INPUT STREAM IS USED BY THE GHOST PLOTTING ROUTINE

1                                                           PAGE 10

         APPENDIX  D               GHOST ROUTINES CALLED BY ANALYSER

              FILM   )
                     )                IN MAIN ANALYSIS ROUTINE
              GREND  )


              PSPACE )
                     )
             *CSPACE )
                     )
             *MAP    )
                     )
             *POSITN )
                     )
             *LINEFD )
                     )
             *SPACE  )
                     )
             *TYPECS )
                     )                     IN  DUMP00 IN ANALYSER
             *TYPENI )

                     )
              JOIN   )
                     )
              PLOTNC )
                     )
              TYPHEX )
                     )
              CTRMAC )
                     )
             *CTRORI )
                     )
              TYPENC )
                     )
             *FRAME  )
                     )


              HISTGM )
                     )
              AXES   )
                     )                    IN TIME, IN ANALYSER
              HLINFD )
                     )
              CRLNFD )
                     )
              TYPENF )
                     )


         SOME ROUTINES (MARKED WITH AN *) ARE IN BOTH TIME AND DUMPP0

1                                                           PAGE 11



         APPENDIX  E                 ASSEMBLING APEMAN

         THE ROUTINES REQUIRED BY THE DIFFERENT MONITORS ARE AS FOLOWS


         (A)    MONA         -       REQUIRED ROUTINES MONA,ZA01AS
                                     (ENTRY MONA)


         (B)    MONZ         -       REQUIRED ROUTINES MONZ,ZA01AS
                                     (ENTRY MONZ)


         (C)    MONP         -       REQUIRED ROUTINES MONP,PAGE
                                     (ENTRY MONP)


         (D)    MONS         -       REQUIRED ROUTINES MONS


         (E)    MONITOR      -       REQUIRED ROUTINES ITIME,STRTIM
                                     INPUT,MONTIM,MONRUN,MONLD,MAIN,
                                     MONRT,MRT,ZA01AS,ZA06AS,ZA09AS,
                                     ZR02AS,MONAD
                                     (ENTRY MAIN)


         (F)    ANALYSIS     -       REQUIRED ROUTINES DECVB,MAIN,HEXDMP
                                     SNAP,MAPLPA,DUMP00,TIME,MRD,MONRD,
                                     ZA06AS + GHOST ROUTINES MENTIONED
                                     IN APPENDIX D.
                                     (ENTRY MAIN)


1                                                           PAGE 12



 I COULD NOT FIND THE GHOST ROUTINES ANYWHERE IN THE SOURCE THAT WAS SEN
 SO I WROTE TO ENGLAND AND ASKED THEM WHERE WERE THEY. THE ANSWER IS AS
 FOLLOWS:

 WITH REGARD TO THE GHOST ROUTINES CONTAINED IN THE ANALYSER, WE
 SUGGEST THAT YOU DUMMY THEM OUT, OR REPLACE THEM BY CALLS TO YOUR
 OWN PLOTTING SYSTEMS.

 THE DATA FOR THE MLPA ON FT09F001 CONTAINS THE MODULE NAMES AND THEIR
 VIRTUAL BLOCK NUMBERS (VBN'S), SO THAT THESE NAMES MAY BE CORRELATED
 WITH THE PFTE'S FOR THE MLPA. THE FORMAT FOR THE INPUT ON FT09F001 IS.

         COL 1 TO COL 8     COL 10,11,12     COL 13,14,15

           MODULE NAME     VIRTUAL BLOCK     LENGTH (NUMBER
                          NUMBER (IN HEX)     OF 4K BLOCKS)

  E.G.     MODULE08 06C 001   - MODULE 08 STARTS AT LOCATION 06C000 AND
                                 IS 4 K LONG.

 THE DATA FOR LPA ON FT10F001 IS THE STANDARD OUTPUT FROM AMBLIST OF
 THE PLPA.

 ______________________________________________________________________

 SINCE WE DO NOT HAVE ANY PLOTTING ROUTINES WE JUST MADE IEFBR14'S FOR
 ALL THE GHOST ROUTINES AND IT WORKS FINE.
 THESE IEFBR14'S ARE ALSO ON THIS TAPE SOMEPLACE, ARE CALLED APEMAN3.

 BE SURE YOUR INSTALLATION HAS MORE THAT JUST THE DEFAULT NUMBER OF
 8 I/O STREAM NUMBERS FOR FORTAN.

 I WOULD SUGGEST THAT THE FIRST TIME YOU RUN THE MONITOR YOU RUN IT FOR
 A VERY SHORT PERIOD OF TIME (1 OR 2 MINUTES) AND THEN PROCESS THAT DATA
 IN ALL SORTS OF WAYS. THE OUTPUT IF VOLUMINOUS.
