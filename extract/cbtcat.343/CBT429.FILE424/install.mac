                             VETAPE
VETAPE IS A PROGRAM THAT GENERATES AND SUBMITS JOBS TO THE INTERNAL
READER TO COPY 3420 VOLUMES TO 3480 VOLUMES AND VICE VERSA.
IT REQUIRES UCC ONE TAPE MANAGEMENT SYSTEM TO RETRIEVE DATA ABOUT
THE VOLUMES YOU ARE MIGRATING.  RUNNING AS A STARTED TASK IT ISSUES
A REQUEST TO THE OPERATOR TO ENTER A VOLSER OF THE VOLUME TO BE
MIGRATED.  FROM THAT IT DETERMINES IF THE VOLUME IS ELGIBLE FOR
MIGRATION FROM THE FOLLOWING CRITERIA:
1. EXPIRATION DATE - IF TAPE DUE TO EXPIRE IN 30 DAYS OR LESS IT
                     WILL BE BYPASSED.
2. DENSITY         - MUST BE STANDARD 6250 BPI.
3. CREATING JOBNAME- VOLUMES CREATED BY JOBS USING CERTAIN UTILITIES
                     OR INTENDED FOR 3420 VOLUMES CAN BE BYPASSED.
4. MULTI-FILE TAPES- IF TAPE HAS MULTIPLE DATASETS IT WILL BE BYPASSED.
IF A VOLUME PASSES THESE CHECKS A TWO STEP JOB IS GENERATED AND
SUBMITTED TO THE INTERNAL READER. THE JOBNAME WILL BE IN THE FORMAT OF
JJJJJXX WHERE JJJJJ IS DETERMINED BY YOU AND XX IS THE LAST 2 DIGITS OF
THE ORIGINAL VOLSER.  IT WILL DETERMINE FROM THE TMS RECORD THE
FOLLOWING:
1. DATASET NAME
2. EXPIRATION DATE
3. DENSITY
4. CREATING JOB NAME
5. NUMBER OF VOLUMES AND SEQUENCE
6. MUTIPLE DATASET VOLUMES
IT WILL THEN DETERMINE IF THE DATASET IS CURRENTLY CATALOGED TO THE
SPECIFIED VOLUME USING THE LOCATE MACRO TO DETERMINE THE DISPOSITION
OF THE NEW VOLUMES. IF THE ORIGINAL WAS CATALOGED IT WILL BE UN-
CATALOGED AND THE NEW VOLUME WILL BE CATALOGED.  IF THE ORIGINAL
WAS NOT CATALOGED IT WILL REMAIN UNCATALOGED AND THE NEW VERSION
WILL BE CREATED UNCATALOGED.  IN THIS CASE IF THE  DATASET RESIDES ON
MULTIPLE VOLUMES THAT INFORMATION WILL BE SUPPLIED IN THE JCL.
THE EXPIRATION DATE OF THE ORIGINAL VOLUME WILL BE USED FOR THE NEW
VOLUME. IF THE FIRST STEP (IEBGENER) IS SUCCESFUL, THE SECOND STEP
WILL SET THE EXPIRATION DATE OF THE ORIGINAL TO EXPIRE IN 3 DAYS.
A RETURN CODE OF 8 OR HIGHER WILL CAUSE STEP1 TO ABEND WITH U0012.
BY RESETTING THE EXPIRATION DATE OF THE ORIGINAL VOLUME AFTER A
SUCCESFULL COPY THE MIGRATED VOLUMES CAN BE TAKEN OUT OF SERVICE
AS TMC SHOWS THEM TO BE EXPIRED.
AFTER THE JOB IS SUBMITTED VETAPE WILL PROMPT THE OPERATOR TO
ENTER ANOTHER VOLUME AND THE PROCESS WILL CONTINUE.  FOR EACH
VOLUME ENTERED A RECORD IS PUT TO THE SYSPRINT DATASET OF VETAPE
SHOWING THE DSN AND JOBNAME OF JOBS SUBMITTED FOR MIGRATION OR
THE REASON THE VOLUME WAS BYPASSED.
THINGS TO CONSIDER IN USING THIS METHOD TO MIGRATE YOUR TAPES ARE
AS FOLLOWS:
1. EVERY TIME A VOLUME IS ENTERED A JOB COULD BE GENERATED.
   IT IS VERY EASY TO ENTER A LARGE NUMBER OF VOLSERS AND CREATE
   A GREAT MANY JOBS TO RUN. ANY VOLSER COULD BE PART OF
   A LARGE MULTI-VOLUME DATASET WHICH COULD TAKE TIME TO RUN.
   ON MULTI-VOLUME DATASETS ALL VOLUMES WILL BE MIGRATED.
2. MULTI-VOLUME UNCATALOGED DATASETS COULD CAUSE DUPLICATES
   SINCE THE EXPIRATION DATE ISN'T CHANGED UNTIL THE JOB COMPLETES
   IT IS POSSIBLE FOR THE OPERATOR TO ENTER DIFFERENT VOLSERS FROM
   THE SAME DATASET AND CREATE MORE THAN ONE JOB TO COPY IT, THUS
   CAUSING DUPLICATES.
3. IF YOU HAVE A GREAT DEAL OF UNCATALOGED DATASETS ON 3420 REELS
   YOU WILL NOT KNOW THE NEW VOLSER THEY WERE MIGRATED TO
   WITHOUT THE LISTING FROM THE JOB GENERATED TO COPY IT. IT IS
   HANDY TO KEEP A TMC REPORT OF ALL 3420 VOLUMES BY VOLSER AND
   DSN PRIOR TO STARTING THE PROCESS SO THESE CAN BE TRACKED
   DOWN. IT CAN BE USED TO COMPARE TO THE CONTROL SHEET GENERATED
   BY VETAPE.
BEFORE ASSEMBLING VETAPE YOU MUST MAKE SOME MODIFICATIONS TO THE SOURCE
CODE TO MAKE IT CONFORM TO YOUR INSTALLATION STANDARDS.  VETAPE ALSO
PERFORMS EDITS TO PREVENT CERTAIN VOLUMES FROM BEING MIGRATED.  THESE
ALSO NEED TO BE CHANGED TO FIT YOUR INSTALLATION NEEDS.

1. LINE 27 CALCULATES THE DATE YOU WANT THE OLD 3420 VOLUME TO EXPIRE
   ITS CURRENTLY SET FOR 3 DAYS AFTER IT HAS BEEN MIGRATED.

2. LINE 30 CALCULATES THE DATE 30 DAYS FROM THE CURRENT DATE.  ANY
   VOLUMES THAT HAVE AN EXPIRATION DATE WITHIN THE RANGE OF CURRENT
   DATE AND CURRENT DATE PLUS THIRTY DAYS WILL NOT BE MIGRATED.

3. VETAPE WRITES MESSAGES TO THE CONSOLE OPERATOR.  ONE WILL REQUIRE
   RESPONSE, THE OTHERS ARE INFORMATIONAL. MAKE THE ROUTCODE FOR THESE
   MESSAGES VALID FOR YOUR INSTALLATION.

4. VETAPE CONTAINS A TABLE OF CREATING JOBNAMES IT USES TO BYPASS
   CERTAIN VOLUMES THAT SHOULD NOT BE MIGRATED. TAPES CREATED WITH
   DFDSS, DMS, OR FDR CANNOT BE COPIED WITH IEBGENER. YOU MAY ALSO
   HAVE VOLUMES THAT WERE SPECIFICALLY INTENDED FOR 3420 VOLUMES THAT
   SHOULD NOT BE MIGRATED.  A TABLE ENTRY MUST BE CODED WITH THE
   JOBNAMES OF THE JOBS THAT USE THESE UTILITIES OR CREATED TAPES
   YOU DO NOT WANT MIGRATED.  THE CJOB FIELD ON THE VOLUME TMC RECORD
   IS TESTED AGAINST THIS TABLE.  THIS IS A MUST.

5. VETAPE WILL MIGRATE TAPES FROM 3420 TO 3480 OR 3480 TO 3420.
   IT MUST BE ABLE TO DISTINGUISH THE TYPE FROM THE VOLSER. THE CODE
   AS IT IS NOW CHECKS THE SECOND POSITION OF THE VOLSER ENTERED FOR
   A VALUE OF '2'.  ANY VOLUME WITH A VOLSER OF 020000 OR HIGHER IS
   CONSIDERED TO BE A 3480 VOLUME.  THOSE WITH LOWER VOLSERS ARE
   CONSIDERED TO BE 3420 VOLUMES THIS MUST BE CHANGED TO MEET YOUR
   NEEDS. LINES 73, 83, 156, 191.

6. THE SECTION OF CODE TITLED SKELETON JCL MUST HAVE ALL '?' CHANGED
   TO MEET YOUR INSTALATION JCL STANDARDS. BE CAREFULL NOT TO CHANGE
   THE POSITION OF FIELDS IN THIS SECTION .  THE PROGRAM USES RELATIVE
   ADDRESSING TO PLACE DATA IN THESE AREAS.  IF THIS IS NOT POSSIBLE
   BE CERTAIN YOU MAKE THE APPROPRIATE CHANGES IN THE CODE TO
   ACCOMIDATE YOUR CHANGES. THE 'X'S ARE MOST OF THE FIELDS VETAPE
   IS PLACING VALUES AND SHOULD NOT REQUIRE CHANGING.

7. IN THE SKELETON JCL STEP1 EXEC CARD PGM=IEBGENER, 'IEBGENER'
   IS THE ALIAS GIVEN TO UTILDRIV (UTILITY FRONT-END).  IF YOU
   GIVE THE FRONT END ANY OTHER NAME CHANGE THIS TO THAT NAME.
   IF THIS IS THE CASE BE CERTAIN YOU HAVE CHANGED UTILDRIV TO
   LINK TO IEBGENER INSTEAD OF IEBGENEX AND THE ENTRY POINT NAME
   HAS BEEN CHANGED.

                           UTILDRIV
UTILDRIV IS JUST A FRONT END ON IEBGENER THAT WILL CAUSE AN ABEND
ON RETURN CODES GREATER THAN 8 FROM IEBGENER. THIS IS NEEDED TO PREVENT
THE TMC UPDATE STEP FROM RUNNING IF THE COPY WAS NOT SUCCESSFUL.
YOU MUST RENAME YOUR CURRENT IEBGENER TO IEBGENX AND ASSEMBLE AND LINK
UTILDRIV AS IEBGENER.   NO CHANGES TO THIS SOURCE ARE NECESSARY.
IF YOU CHOOSE NOT TO DO THIS, CHANGE THE EP NAME (SEE ITEM7 ABOVE)
AND CHANGE THE LINK MACRO TO INVOKE IEBGENER.

                           VETAPEJ
THIS IS THE STARTED TASK JCL. PLACE ON SYS1.PROCLIB WITH APPROPIATE
CHANGES. STEPLIB TO THE LOADLIB THAT CONTAINS YOUR VERSIONS OF VETAPE
AND UTILDRIV.
