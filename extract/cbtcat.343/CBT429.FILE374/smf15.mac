//C4SYSDMS JOB EDPCSBS1,'SASD',MSGCLASS=X,CLASS=1,NOTIFY=ED115DM
//*
//SAS     EXEC EDSAS609,OPTIONS=NODATE
//*ATLIB  DD DSN=C4H1.PROD.SMFDUMPW.HOLD,DISP=SHR
//*       DD DSN=C4H1.PROD.SMFDUMPW,DISP=SHR
//DATLIB  DD DSN=SYS1.MAN4,DISP=SHR
//SYSIN   DD *
TITLE 'SMF 1415';
  DATA  HDR (KEEP =
        SMF15JBN          SMF15RST        SMF15RSD
        SMF15UID          SMF15RIN        SMF15SDC
        SMF15NUC          SMF15SUC        SMF15SET
        SMF15OPE )
        TIOT (KEEP =
        SMFTIOE1          SMFTIOE2        SMFTIOE3
        SMFTIOE4          SMFTIOE5         SMFTIOE6
        SMFTIOE7 )
        JFCB (KEEP =
        JFCBDSNM              JFCBELNM
        JFCBTSDM              JFCBDSCB
        JFCFCBID              JFCBFRID
        JFCRBIDO              JFCAMCRO
        JFCAMSTR              JFCBADFO
        JFCNLREC              JFCBTDSI
        )
        DCBDEB (KEEP =
        SMFDCBOR         SMFDCBRF         SMFDCBMF
        SMFDCBFL         SMFDCBOP         SMF15RV2
        SMFDEBFL         SMFDEBOP         SMFDEBVL )
        ;
  RETAIN V;
  INFILE DATLIB JFCB=JF MISSOVER;
  IF _N_ = 1 THEN DO;
                  INPUT @;
                  IF INDEX(JF,'SYS1.MAN') ^=0 THEN V=4; ELSE V=0;
                  END;
  IF V=4 THEN
      INPUT    SMFXXLEN PIB2. SMFXXSEG PIB2. @ ;
  INPUT    SMFXXFLG PIB1. SMFXXRTY PIB1.
                       @;
  IF SMFXXRTY = 212 THEN DO;
                        *PUT '212 DETECTED - SKIPPING';
                         DELETE;
                         END;
  INPUT    TIMEOUT SMFSTAMP8.
      SMFXXSID $CHAR4. @;
  IF SMFXXRTY = 14
  OR SMFXXRTY = 15;
  INPUT SMF15JBN $CHAR8.  SMF15RST PIB4.  SMF15RSD PD4.
        SMF15UID $CHAR8.  SMF15RIN PIB2.  SMF15SDC PIB1.
        SMF15NUC PIB1.    SMF15SUC PIB1.  SMF15SET PIB1.
        SMF15OPE PIB4. @;
  OUTPUT HDR;
  INPUT SMFTIOE1 PIB1.    SMFTIOE2 PIB1.  SMFTIOE3 PIB1.
        SMFTIOE4 PIB1.    SMFTIOE5 $CHAR8. SMFTIOE6 PIB3.
        SMFTIOE7 PIB1.
        @ ;
  OUTPUT TIOT;
  INPUT JFCBDSNM $CHAR44.     JFCBELNM $CHAR8.
        JFCBTSDM PIB1.        JFCBDSCB $CHAR3.
        JFCFCBID $CHAR4.      JFCBFRID $CHAR4.
        JFCRBIDO $CHAR4.      JFCAMCRO PIB2.
        JFCAMSTR PIB2.        JFCBADFO PIB2.
        JFCNLREC PIB2.        JFCBTDSI PIB2.
        OTHER $98.
  @ ;
  OUTPUT JFCB;
  INPUT SMFDCBOR PIB2.   SMFDCBRF PIB1.   SMFDCBMF PIB2.
        SMFDCBFL PIB1.   SMFDCBOP PIB1.   SMF15RV2 PIB1.
        SMFDEBFL PIB1.   SMFDEBOP PIB1.   SMFDEBVL PIB2.
        @ ;
OUTPUT DCBDEB;
*I=INDEX(SMFJFCB1,'PSPB'); *IF I=0 THEN DELETE;
*F SMF14RIN = '..0.....' THEN DO;         *TAPE;
RETURN;
PROC PRINT DATA=HDR;
PROC PRINT DATA=TIOT;
PROC PRINT DATA=JFCB;
PROC PRINT DATA=DCBDEB;
