         MACRO
&N       #SLD  &R,&A
.*
.*
.*
.* LAST CHANGE DATE - OCTOBER 18, 1983
.*                  - MAILING ADDRESS CHANGE
.*
.* LAST CHANGE DATE - APRIL 21, 1981
.*                  - MACRO NAME CHANGED FROM SLD TO #SLD.
.*
.* LAST CHANGE DATE - FEBRUARY 2, 1977
.*                  - MAILING ADDRESS CHANGE.
.*
.* LAST CHANGE DATE - FEBRUARY 3, 1976
.*
.* THIS MACRO WAS WRITTEN BY DAVID B. COLE. ANY QUESTIONS CONCERNING IT
.* MAY BE ADDRESSED TO:
.*       RR#2 BOX 712
.*       AFTON, VA. 22920
.*
.*
.*
.*   THIS MACRO SIMULATES A HYPOTHETICAL "SUBTRACT LOGICAL DOUBLE"
.* MACHINE INSTRUCTION. ITS FUNCTION IS SIMILAR TO THE "SL" MACHINE
.* INSTRUCTION EXCEPT THAT IT OPERATES ON 64-BIT NUMBERS. WARNING, THE
.* RESULTING CONDITION CODE IS NOT AN ANALOGOUS EXTENSION FROM THE "SL"
.* INSTRUCTION.
.*
.* INNER MACROS USED - #TEST
.*
.*
.*
         GBLA  &#TESERR
         GBLC  &#TESRET(20)
         LCLA  &A1
         LCLC  &RODD
&RODD    SETC  '&R+1'
         #TEST REGS=&R
         AIF   (&#TESERR NE 0).REGUNKN
&A1      SETA  &#TESRET(1)+1
         AIF   (&A1 LE 15).GOTA1
&A1      SETA  0
.GOTA1   #TEST PFIX=
&RODD    SETC  '&#TESRET(1)&A1'
.REGUNKN ANOP
&N       SL    &RODD,4+&A LOW-ORDER DIFFERENCE; HI-ORDER AFFECTED?
         BC    3,SLD&SYSNDX NO, SKIP
         BCTR  &R,0 YES, ADJUST HI-ORDER
SLD&SYSNDX SL  &R,&A GET HI-ORDER DIFFERENCE
         MEND
