PFK0INIT TITLE ' INITALIZE A SET OF PFKEYS'
PFK0INIT PROC  LINKAGE=(OS,CSECT),BASE=12
         SPACE
         ISPF  LOAD
         SPACE
         MVC   VCOPYLEN,=F'4'
         VCOPY '(ZAPPLID)',VCOPYLEN,ZAPPLID,MOVE,MF=E
         SPACE
         CLC   ZAPPLID,=CL4'ISR'
         BNE   PROCESS
         VREPLACE '(UMSG1 LMSG1)',VREPLEN1,UMSG1
         SPACE
SETERROR DS    0H
         SETMSG MSG='DTSM001'
         SPACE
         LA    11,12
         B     EXITPGM
         SPACE
PROCESS  DS    0H
         TBSTATS 'ISRPROF',STATUS2='STATUS'
         SPACE
         MVC   VCOPYLEN,=F'1'
         VCOPY '(STATUS)',VCOPYLEN,STATUS,MOVE,MF=E
         SPACE
         CLI   STATUS,C'1'
         BNE   SETKEYS
         SPACE
         VREPLACE '(UMSG1 LMSG1)',VREPLEN2,UMSG2
         B     SETERROR
         SPACE
SETKEYS  DS    0H
         XR    11,11
         SPACE
         TBTOP TABLE
         SPACE
         TBSKIP TABLE
         SPACE
         VPUT  '(ZPF01 ZPF02 ZPF03 ZPF04 ZPF05 ZPF06 ZPF07 ZPF08 ZPF09 *
               ZPF10 ZPF11 ZPF12 ZPF12 ZPF12 ZPF13 ZPF14 ZPF15 ZPF16 ZP*
               F17 ZPF18 ZPF19 ZPF20 ZPF21 ZPF22 ZPF23 ZPF24)',PROFILE
         SPACE
EXITPGM  DS    0H
         ISPF  DELETE
         SPACE
         CORP  RC=(11)
         EJECT
TABLE    DC    CL8'ISRPROF'
LIBRARY  DC    CL8'ISPPROF'
UMSG1    DC    C'INVALID APPLICATION ID'
UMSG1LEN EQU   *-UMSG1
LMSG1    DC    C'THIS COMMAND MAY NOT BE ISSUED UNDER THE "ISR" APPLICA*
               TION'
LMSG1LEN EQU   *-LMSG1
UMSG2    DC    C' '
UMSG2LEN EQU   *-UMSG2
LMSG2    DC    C'YOUR ISPF SESSION WAS NOT STARTED WITH THE PDF UTILITY*
               - UNABLE TO SET PFKEYS'
LMSG2LEN EQU   *-LMSG2
VREPLEN1 DC    A(UMSG1LEN,LMSG1LEN)
VREPLEN2 DC    A(UMSG2LEN,LMSG2LEN)
         SPACE 3
VCOPYLEN DS    F
ZAPPLID  DS    CL4
STATUS   DS    CL1
         ISPF  PARMS
         SPACE
         FINAL ,
         END   PFK0INIT
