PROC 0
CONTROL NOMSG NOLIST NOCONLIST NOSYMLIST NOFLUSH PROMPT
/*CONTROL MSG LIST CONLIST SYMLIST FLUSH PROMPT
ISPEXEC LIBDEF ISPPLIB DATASET ID('USXXBCR.CBT.ALL')
ERROR RETURN
DELETE ('&SYSUID..TABLA') NONVSAM PURGE SCRATCH
FREE FI(DCBT)
FREE FI(TABLA)
ATTR DCBT LRECL(80) BLKSIZE(8000) RECFM(F B) DSORG(PO)
ALLOC FI(TABLA) SPACE(1,1) TRACKS NEW CATALOG USING(DCBT) +
      DA('&SYSUID..TABLA') DIR(10)
ISPEXEC LIBDEF ISPTLIB
ISPEXEC LIBDEF ISPTABL
ISPEXEC LIBDEF ISPTABL DATASET ID('&SYSUID..TABLA')
ISPEXEC LIBDEF ISPTLIB DATASET ID('&SYSUID..TABLA')
SET &C = &STR(0000000012)
FREE FI(DCB)
FREE FI(SALIDA)
ATTR DCB LRECL(80) BLKSIZE(8000) RECFM(F B)
ALLOC FI(SALIDA) SPACE(1,1) TRACKS NEW DELETE USING(DCB)
ISPEXEC DISPLAY PANEL(PRESTA)
DO WHILE &PFK ^= &STR(PF03) AND &PFK ^= &STR(PF15) AND ZTDSELS ^= 0 +
     AND &PFK ^= &STR(PF04) AND &PFK ^= &STR(PF16)
 ISPEXEC TBERASE TABPREST
 ISPEXEC TBCREATE TABPREST NAMES(LL) SHARE
 ISPEXEC TBCLOSE TABPREST
 CALL 'USXXBCR.CBT.LOADLIB(PRESTA4)' '&CAPITAL&TIEMPO&INTERES&C&FECH'
 OPENFILE SALIDA INPUT
 ISPEXEC TBOPEN TABPREST WRITE
 ISPEXEC TBTOP TABPREST
 GETFILE SALIDA
 SET &CUOTA = &SUBSTR(1:14,&SALIDA)
 GETFILE SALIDA
 DO WHILE &MAXCC ^= 400
    SET LL = &SUBSTR(1:75,&SALIDA)
    ISPEXEC TBADD TABPREST SAVE(LL) ORDER
    GETFILE SALIDA
 END
 CLOSFILE SALIDA
 ISPEXEC TBCLOSE TABPREST
 ISPEXEC TBOPEN TABPREST NOWRITE
 ISPEXEC TBDISPL TABPREST PANEL(PRESTA)
 ISPEXEC TBCLOSE TABPREST
 SET &MAXCC = 0
END
ISPEXEC LIBDEF ISPTLIB
ISPEXEC LIBDEF ISPTABL
ISPEXEC LIBDEF ISPPLIB
FREE FI(DCBT)
FREE FI(TABLA)
FREE FI(DCB)
FREE FI(SALIDA)
DELETE ('&SYSUID..TABLA') NONVSAM PURGE SCRATCH
