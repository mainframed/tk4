‹\INMR01



_




#BAS    
5   #EATM   
B1525   #GETC   
MAIN
#IATM   
5   #MKAT   
SEB1525   
M   
#ZBEG   
525   #ZEQU   

    
  #ZINT   
525   

V   
  #ZSUB   
©

ÿÿÿÿÿÿ

                      00010004&NAME    #AATM &PNAME
                      00020002.*****************************************
********************* 00020110.ÿ
                      * 00020210.* ZIL Version 1.3 (c) 1989 The Charles
aper Laboratory Inc.  * 00020310.*                     All rights reserv
                      * 00020410.*            ÿ
                        * 00020510.*************************************
************************* 00020610.*
                        * 00020710.* THIS MACRO GENERATES AN ÿ
                          * 00020810.*
                          * 00020910.* EXAMPLE:  #AATM 'FOO'
                          * 00021010.*
                            * 00022010.* NOTE: USE OF THIS MACRO REQUIRE
 ZILSINT.                   * 00023010.*       SEE "OPEN" FOR AN EXAMPLE
TO CODE THIS.               * 00024010.*
           ÿ
******************************* 00026010         LCLA  &I,&L,&N,&Z
                                00027010         LCLC  &KNAME
                          ÿ
RINT NAME INCLUDING PASSED QUOTES 00029010&N       SETA  K'&KNAME-2
ENGTH OF CHARACTERS INSIDE QUOTES 00030010&KNAME   SETC  '&KNAME'(2,&N)
RINT NAME WITH QUOTES REMOVED     0004001ÿ
 INDEX THROUGH PRINT NAME           00050010&L       SETA  0
 COMPUTED LENGTH OF PRINT NAME      00060010.LOOP    ANOP
                                    00070010         AIFÿ
                                      00080010         AIF   (&I EQ &N).
                                      00090010         AIF   ('&KNAME'(&
'''''').P2                            00100010         AIF   ('&KNAME'(ÿ
Q '&&').P2                              00110010.NOTQA   ANOP
                                        00120010&L       SETA  &L+1
                                        00130010&I       SETA  &I+1
      ÿ
                                          00150010.P2      ANOP
                                          00160010&L       SETA  &L+1
                     ÿ
                                            00180010         AGO   .LOOP
                                            00190010.LEND    ANOP
                                    +
4)*4))                            ÿ
           ALIGN SYMBOL TO FULLWORD             00220010         DC    Y
BOL)       SYMBOL TYPE INDICATOR                00230010         DC    X
           RESERVED AREA FOR ZILSINT USE        0ÿ
TRING)       PRINT NAME TYPE INDICATOR            00250010         DC
             PRINT NAME LENGTH                    00260010         AIF
0).NULL                                           00270010      ÿ
AME'                                                00280010         AIF
Q 4).NOFILL                                         00290010         DC
00'            FILL OUT TO FULLWORD BOUNDARY        00300010.NOFILL  ANO

ND                                                    00320010.NULL    A
                                                      00330010         D
'00'          K    NULL PRINT NAME                      00340010.MEND
                                                        00350010
                                                        00360010{

    00020401&NAME    #BAS  &R1,&A2
    00020501.***********************************************************
*** 00020601.ÿ
    * 00020701.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Labor
c.  * 00020801.*                     All rights reserved.
    * 00020901.*            ÿ
      * 00021001.*******************************************************
******* 00021101         GBLB  &ZILXA
        00021201         #ZSYS             ÿ
          00021301         AIF   (&ZILXA).BAS
          00021401&NAME    BAL   &R1,&A2
          00021501         AGO   .MEND                    ÿ
            00021601.BAS     ANOP
            00022001&NAME    BAS   &R1,&A2
            00023001.MEND    MEND
              00024001
                                        00010000&NAME    #BASR &R1,&R2
                                        00011001.***********************
*************************************** 00020001.ÿ
                                        * 00020101.* ZIL Version 1.3 (c)
e Charles Stark Draper Laboratory Inc.  * 00020201.*
hts reserved.                           * 00020301.*            ÿ
                                          * 00020401.*******************
******************************************* 00020501         GBLB  &ZILX
                                            00020701         #ZSYS

SR                                            00020901&NAME    BALR  &R1
                                              00021001         AGO   .ME
              ÿ
                                                00022001&NAME    BASR  &
                                                00023001.MEND    MEND
                             Ä                    00024001

0000&NAME    #EATM &VALUE
0000.*******************************************************************
0105.ÿ
020205.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Laboratory In
020305.*                     All rights reserved.
020405.*            ÿ
00020505.***************************************************************
00020605.*
00020705.* THIS MACRO GENERATES A Sÿ
* 00020805.*
* 00020905.*************************************************************
* 00021005&NAME    DS    0A                       O
    00022005         DC    YL1(##FLONUM),AL3(0),E'&VALUE'
    00023005         MEND
    00024005
                              00010000&NAME    #ERR  &SIGNAL=,&PREFIX=YE
                              00020002.*
                              00030000.ÿ
******************************* 00030109.*
                              * 00030209.* ZIL Version 1.3 (c) 1989 The
Stark Draper Laboratory Inc.  * 00030309.*            ÿ
rved.                           * 00030409.*
                                * 00030509.*****************************
********************************* 00030609.*                         ÿ
                                  * 00030709.* THIS MACRO GENERATES A CA
LERR TO WRITE MESSAGES TO THE     * 00030809.* STANDARD OUTPUT FILE.
                                  * 00030909.*
    ÿ
5, AND REQUIRES 13 TO POINT TO      * 00032009.* THE COMMON AREA.
                                    * 00033009.*
                   ÿ
RITY LEVEL OF THE MESSAGE:            * 00035009.*
                                      * 00036009.*   0 = INFORMATIONAL
                                  ÿ
                                        * 00038009.*   2 = ERROR
                                        * 00039009.*   3 = SEVERE
                                        * 0004000ÿ
                                          * 00050009.*   * = ALWAYS PRIN
LESS OF SEVERITY/MSGLEVEL                 * 00060009.*
                                          * 00070009.*    0 -   ÿ
AL: SUPPRESSED BY MSGLEVEL 1, 2 OR 3        * 00080009.*    1 -      WAR
    SUPPRESSED BY MSGLEVEL 2 OR 3           * 00090009.*    2 -      ERR
    SUPPRESSED BY MSGLEVEL 3                * 00100009.*    3 -      SEV

S:    NOT SUPPRESSED                          * 00120009.*    * -      U
ONAL: NOT SUPPRESSED                          * 00130009.*
              ÿ
4 ALSO CAUSE AN ERROR TO BE SIGNALLED.          * 00150009.*
                                                * 00160009.* THE REMAIND
E OPERANDS ARE POSITIONALS WHÿ
ESSAGE TO BE PRINTED.  THESE CAN BE:              * 00180009.*
                                                  * 00190009.* 'MESSAGE'
STANT STRING TO BE PRINTED AS IS.           +
 FIXNUM CONTENTS OF A REGISTER.           ÿ
HE OBJECT POINTED TO BY REGISTER #.                   * 00220009.* N(#11
HE OBJECT POINTED TO BY STACK LOCATION AT N OFF #11.  * 00230009.*
                                                      * 0ÿ
BE A REGISTER BETWEEN 2 AND 14.                         * 00250009.*
                                                        * 00260009.* EXA
                                                        * 00270009.*
                                                          * 00280009.*
R  2,'BAD ARGUMENT',4(#11)                                * 00290009.*
R  2,'THIS FUNCTION REQUIRES',#3,'ARGUMENTS'              * 00300009.*
R  2,'Iÿ
                                                            * 00320009.*
************************************************************* 00330009.*
                      ÿ
 LCLA  &N,&I,&J,&L                                              00350009
 LCLB  &SGNLERP,&NOPREFP,&SEVTSTP                               00360009
 LCLC  &SEV,&S,&X,&AROUND,&STR(100),&ÿ
   SETA  0                                                        003800
   SETA  N'&SYSLIST                                               003900
   SETA  1                                          ÿ
UND  SETC  'PAR&SYSNDX'                                             0041
     AIF   (&N LT 1).ERR1                                           0042
     SETC  '&SYSLIST(1)'                                           ÿ
       AIF   (K'&SEV GT 1).DEF2                                       00
       AIF   ('&SEV' EQ '0').SEV0                                     00
       AIF   ('&SEV' EQ '1').SEV1                                     00
  ÿ
         AIF   ('&SEV' EQ '3').SEV3
         AIF   ('&SEV' EQ '4').SEV4
         AIF   ('ÿ
09         AGO   .ERR2
09.SEV0    ANOP
09&S       SETC  '00'           ÿ
0009&SGNLERP SETB  0
0009&SEVTSTP SETB  1
0009         AGO   .GO                         ÿ
560009.SEV1    ANOP
570009&S       SETC  '01'
580009&SGNLERP SETB  0                                        
00590009ÿç
              00600009         AGO   .GO
              00610009.SEV2    ANOP
              00620009&ÿ
                00630009&SGNLERP SETB  1
                00640009&SEVTSTP SETB  1
                00650009         AGO  ÿ
                  00660009.SEV3    ANOP
                  00670009&S       SETC  '03'
                  00680009&SGNLERP SETB  1           ÿ
                    00690009&SEVTSTP SETB  1
                    00700009         AGO   .GO
                    00710009.SEV4    ANOP                           ÿ
                      00720009&S       SETC  '04'
                      00730009&SGNLERP SETB  1
                      00740009&SEVTSTP SETB  1
   ÿ
                        00760009.SEVA    ANOP
                        00770009&S       SETC  'FF'
                  ÿ
                          00790009&SEVTSTP SETB  0
                          00800009         AGO   .GO
                          0081000ÿ
                            00820009&S       SETC  '02'
                            00830009&SGNLERP SETB  1
                            00840009&SEVTSTP SETÿ
                              00850009&I       SETA  0
                              00851009         AGO   .GO
                              00852009.GO      ANOP            ÿ
                                00853009         AIF   ('&SIGNAL' EQ 'YE
ON                              00854009         AIF   ('&SIGNAL' EQ 'NO
FF                              00855009         AIF   ('&SIGNAL' NE '')
                                  00856009         AIF   (&SGNLERP).SETZ
                                  00857009         AGO   .SETZOFF
                                  00858009.SETZON  ANOP
             ÿ
                                    00860009         AGO   .CKPREF
                                    00870009.SETZOFF ANOP
                            +
                          ÿ
                                        00900009         AIF   ('&PREFIX
.PREFON                                 00910009         AIF   ('&PREFIX
S').PREFON                              0ÿ
NO').PREFOFF                              00930009         AGO   .ERR4
                                          00940009.PREFON  ANOP
                                          00950009&NOPREÿ
                                            00960009         AGO   .DOIT
                                            00970009.PREFOFF ANOP
                                            00980009&NOPREFP SETB  1   ÿ
                                              00981009.DOIT    ANOP
                                              00982009         AIF   (&S
R (NOT &SEVTSTP)).NOBYP                       00983009&NAME    CLI   ZLC
&S'   ÿ
            THEN DON'T DISPLAY MESSAGE          00984109         XR    #
            INDICATE CALL TO PRINT MESSAGE      00984209         AGO   .
                     ÿ
                                                  00984409&NAME    XR
              INDICATE CALL TO PRINT MESSAGE      00984509.AFTBYP  ANOP
                                    ÿ
LCERR           GET ADDRESS OF ZILERR               00984709         BAL
5               BRANCH TO ZILERR                    00984809         DC
SGNLERP.&NOPREFP.000000',X'&S'  FLAGS/SEVERITY     ÿ
                                                      00985009.* LOOP TH
MAINING POSITIONALS TO GENERATE ARGUMENTS             00986009.*
                                                      00987009.LOOÿ
                                                        00988009&I
I+1                                                     00989009
&I GT &N).FIN                                           00990009&X
&ÿ
 K'&X                                                     01010009
 (&L LT 3).NOTSTR                                         01020009
 ('&X'(1,1) EQ 'ÿ
   ('&X'(1,2) EQ 'X''').STRING                              01040009.NOT
   ('&X'(1,1) EQ '(').REG                                   01050009
   S(&X)               PARAMETEÿ
GO   .LOOP                                                    01070009.R
NOP                                                           01080009
C    S(0&X)              PARAMETER                             01090009

100009.STRING  ANOP
110009&J       SETA  &J+1
120009&ÿ
01130009&SL1(&J) SETC  '#P&SYSNDX.L&J'
01140009&SL2(&J) SETC  '#P&SYSNDX.E&J'
01150009         DC   ÿ
  01160009         AGO   .LOOP
  01170009.FIN     ANOP
  01180009         DC    Y(X'0FFF')  ÿ
    01190009.*
    01200009         AIF   (&J EQ 0).SLEND
    01210009         AIF   (&SGNLERP).NOAR1         ÿ
      01220009         B     &AROUND             BRANCH AROUND STRINGS
      01230009.NOAR1   ANOP
      01240009.*                                                   ÿ
        01250009.* LOOP THROUGH LITERAL STRINGS.
        01260009.*
        01270009&I       SETA  0
  ÿ
          01290009&I       SETA  &I+1
          01300009         AIF   (&I GT &J).SLEND
          0131000ÿ
            01320009         ORG   *+1                 ALIGN TO BE NOT O
RD BOUNDARY 01330009&SL1(&I) DC    YL1(##STRING),AL3(&SL2(&I)-*-3)
            01340009         AIFÿ
              01350009         DC    &STR(&I)
              01360009         AGO   .AFTDCC
              01370009.DCC     ANOP            ÿ
                01380009         DC    C&STR(&I)
                01390009.AFTDCC  ANOP
                01400009&SL2(&I) EQU   *                      ÿ
                  01410009         AGO   .SLOOP
                  01420009.SLEND   ANOP
                  01430009         AIF   (&SEVTSTP AND (NOT &SGNLERP)).U
                    01440009         AIF   (&J EQ 0).NOAR2
                    01450009         AIF   (&SGNLERP).NOAR2
                    01460009.USEAR   ANOP
            +
          ÿ
                        01490009         MEXIT
                        01500009.ERR1    MNOTE 12,'MISSING ARGS ON #ERR
                        0ÿ
                          01520009.ERR2    MNOTE 12,'INVALID SEVERITY AR
R MACRO - &SEV'           01530009         MEXIT
                          01540009.ERR3 ÿ
KEYWORD, MUST BE YES OR NO' 01550009         MEXIT
                            01560009.ERR4    MNOTE 12,'INVALID VALUE FOR
KEYWORD, MUST BE YES OR NO' 01570009         MEXIT     ì
                              01580009         MEND
                              01590009{
                                                          00010000&NAME
                                                          00020000.*****
********************************************************* 00020108.ÿ
                                                          * 00020208.* Z
on 1.3 (c) 1989 The Charles Stark Draper Laboratory Inc.  * 00020308.*
           All rights reserved.                           * 00020408.*
  ÿ
************************************************************* 00020608.*
                                                            * 00020708.*
CRO GENERATES CALÿ
                                                              * 00020908
THE NON-STANDARD INTERFACE.                                   * 00021008
                                ÿ
***************************************************************** 000230
   L     #2,ZLCGETC               GET ADDRESS OF ZILGETC          000240
   #BASR #14,#2                   CALL ZILGETC ` TO GET A CHARACTER 0002
     MEND                                                           0002

              00010000&NAME    #GETMAIN &R,&LV=,&LOC=
              00020000.*************************************************
************* 00020103.ÿ
              * 00020203.* ZIL Version 1.3 (c) 1989 The Charles Stark Dr
oratory Inc.  * 00020303.*                     All rights reserved.
              * 00020403.*            ÿ
                * 00020503.*********************************************
***************** 00020603         GBLB  &ZILXA
                  00020703         #ZSYS             ÿ
                    00020803         AIF   (N'&LV EQ 1).LV1
                    00020903         AIF   (N'&LV EQ 2).LV2
                    00021003         MNOTE 12,'Invalid #GETMAIN LV pÿ
&LV'                  00021103         MEXIT
                      00022003.LV1     ANOP
                      00023003         AIF   (&ZILXA).XA1
   ÿ
                        00025003         AGO   .MEND
                        00026003.XA1     ANOP
                  ÿ
                          00028003         AGO   .MEND
                          00029003.LV2     ANOP
                          0003000ÿ
                            00040003&NAME    GETMAIN &R,LV=(&LV(1),&LV(2
                            00050003         AGO   .MEND
                            00060003.XA2     ANOÿ
                              00070003&NAME    GETMAIN &R,LV=(&LV(1),&LV
=&LOC                         00080003         AGO   .MEND
                              00090003.MEND    MEND             
                                00100003
********************************************************  00010002*
                                                       *  00020002* ZIL
1.3 (c) 1989 The Charles Stark Draper Laboratory Inc.  *  00020102*ÿ
          All rights reserved.                           *  00020202*
                                                         *  00020302****
**********************************************************  00020402*
  ÿ
t is from copy member #GLOBALS, defining global SETB symbols. 00020602*
                                                              00020702
BLB  &ZILMVS,&ZILÿ
                                                                00020902
 copy member #GLOBALS.                                          00021002
                                Í                                 000220

            00010000&NAME    #IATM &VALUE
            00020000.***************************************************
*********** 00020105.ÿ
            * 00020205.* ZIL Version 1.3 (c) 1989 The Charles Stark Drap
atory Inc.  * 00020305.*                     All rights reserved.
            * 00020405.*            ÿ
              * 00020505.***********************************************
*************** 00020605.*
              * 00020705.* THIS MACRO GENERATES A Fÿ
                * 00020805.*
                * 00020905.*********************************************
***************** 00021005&NAME    DS    0A                       O
                    00022005         DC    YL1(##FIXNUM),AL3(0),F'&VALUE
                    00023005         MEND
                    00024005
                                              00010000&SYM     #IFIL &AR
                                              00020000.*****************
********************************************* 00020106.ÿ
                                              * 00020206.* ZIL Version 1
989 The Charles Stark Draper Laboratory Inc.  * 00020306.*
ll rights reserved.                           * 00020406.*            ÿ
                                                * 00020506.*************
************************************************* 00020606.*
                                                * 00020706.* THIS MACRO
 INPUÿ
                                                  * 00020906.***********
*************************************************** 00021006         LCL
                    ÿ
&ARGNO-1)                                             00023006         L
&OFF.(,#11)      GET FILE SPEC ARGUMENT               00024006         L
,ZLCFGETI        GET ADDRESS OF INPÿ
14,#15             CALL FILE LOCATOR (SETS #7)          00026006
LFILBLK,#7                                              00027006
                                                  º       00028006

    00010000&SYM     #MKAT &TYPE
    00020000.***********************************************************
*** 00020109.ÿ
    * 00020209.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Labor
c.  * 00020309.*                     All rights reserved.
    * 00020409.*            ÿ
      * 00020509.*******************************************************
******* 00020609.*
      * 00020709.* THIS MACRO BUILDS AN ATOÿ
        * 00020809.* REGISTER 2.  REGISTERS 1, 2, 14, AND 15 ARE USED WH
IS      * 00020909.* INVOKED TO BUILD THE ATOM.  THE RESULTING ATOM IS R
        * 00021009.* IN REGISTER 15.                      ÿ
          * 00022009.*
          * 00023009.* ON ENTRY, REG 2 MUST CONTAIN THE VALUE; REG 0 MUS
N THE     * 00024009.* CURRENT TOP-OF-STACK ADDRESS.
            * 00025009.*
            * 00026009.* VALID CALLS:
            * 00027009.*
        ÿ
              * 00029009.*
              * 00030009.*       #MKAT  FLOAT       REG 2 CONTAINS FLONU
              * 0004000ÿ
                * 00050009.*       #MKAT  ALPHA       REG 2 CONTAINS POI
PNAME STRING    * 00060009.*                          (HIGH-ORDER BYTE M
LEAN).          * 00070009.*          ÿ
INTERNED SYMBOL!  * 00080009.*
                  * 00090009.*******************************************
******************* 00100009         AIF   ('&TYPE' Eÿ
                      00110009         AIF   ('&TYPE' EQ 'FIXED').MKFIX
                      00120009         AIF   ('&TYPE' EQ 'FLOAT').MKFLO
                      00130009         MNOTE 12,'#MKAT TYPE MUST BE ÿ
AT OR ALPHA'            00140009         MEXIT
                        00150009.*
                        00160009.* OLD FIXNUM CODE, BEFORE FIXNUM TABLE
TEDÿ
                          00180009.*KFIX  ANOP
                          00190009.*YM     LA    #1,##FIXNUM
 TYPE             +
DRESS OF CONS ROÿ
T TYPE TO HIGH ORDER BYTE     00220009.*       AGO   .CONS
                              00230009.*
                              0ÿ
ISTS.                           00250009.* THIS ASSUMES THAT (1) THERE I
E OF CONSTANT FIXNUMS           00260009.* SITUATED PAST THE ATOM T, AND
RE ADDRESSABLE BY #8, AND       00270009.* (2)ÿ
24 BYTES LONG.                    00280009.*
                                  00290009.MKFIX  ANOP
                                  00300009&SYM     L     #15,ÿ
  GET ADDRESS OF CONS ROUTINE       00310009         L     #1,#SFT
  LOAD FIXNUM TYPE FROM FIXTBL      00320009         AGO   .CONS
                                    00330009.MKFLO   ANOP
                                      00340009&SYM     LA    #1,##FLONUM
    SET ATOM TYPE                     00350009         L     #15,ZLCCONS
    GET ADDRESS OF CONS ROUTINE       00360009         SLL   #1,24
    SHIFT Tÿ
                                        00380009.MKALF   ANOP
                                        00390009&SYM     LA    #1,##SYMB
      SET ATOM TYPE       ÿ
        GET ADDRESS OF CONS ROUTINE       00401009         SLL   #1,24
        SHIFT TYPE TO HIGH ORDER BYTE     00402009         OR    #1,#2
        SET PRINT NAME POINTER           ÿ
          SET PROPERTY LIST TO NIL          00404009.CONS    ANOP
                                            00405009.******* L     #15,Z
          (INTERLEAVED FOR PIPELINING)      00406009    ’      #BASR #14
            CALL CONS TO BUILD ATOM           00407009         MEND
                                              00408009{
	0         MACRO
00&SYM     #OFIL &ARGNO
00.*********************************************************************
06.ÿ
0206.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Laboratory Inc.
0306.*                     All rights reserved.
0406.*            ÿ
020506.*****************************************************************
020606.*
020706.* THIS MACRO SETS THE OUTPÿ
00020806.*
00020906.***************************************************************
00021006         LCLA  &OFF                     ÿ
  00022006&OFF     SETA  4*(&ARGNO-1)
  00023006         L     #1,&OFF.(,#11)      GET FILE SPEC ARGUMENT
  00024006         L     #15,ZLCFGETO        GET ADDRESS OF OUTÿ
R   00025006         #BASR #14,#15             CALL FILE LOCATOR (SETS #
    00026006         USING ZLFILBLK,#7
    00027006         MEND
      00028006
                                00010002&NAME    #RTBL
                                00020002.*******************************
******************************* 00020111.ÿ
                                * 00020211.* ZIL Version 1.3 (c) 1989 Th
s Stark Draper Laboratory Inc.  * 00020311.*                     All rig
rved.                           * 00020411.*            ÿ
                                  * 00020511.***************************
*********************************** 00020611.*
                                    00020711.* SUPPORT FOR "$$" LISP 1.ÿ
X REMOVED.                            00020811.*
                                      00020911.*************************
************************************* 00021011         AIF   ('&NAME' NE
      ÿ
ME REQUIRED'                            00023011         MEXIT
                                        00024011.OK      ANOP
                     ÿ
                                          00026011* THE READ TABLE
                                          00027011*
                                    ÿ
       READ TABLE                           00029011         ORG   &NAME
                                            00030011         DC    YL1(#
       LEFT PARENTHESIS                     0004001ÿ
                                              00050011         DC    YL1
P)       RIGHT PARENTHESIS                    00060011         ORG   &NA
                                              00070011         DC ÿ
NK)        BLANK                                00080011         ORG   &
'                                               00090011         DC    Y
IOD)       PERIOD                               00100011         ORG   &
'ÿ
ONT)         CENT SIGN                            00120011         ORG
';'                                               00130011         DC
EMI)         SEMÿ
+C'\' X'E0'                                         00150011         DC
#ESCAPE)       BACKSLASH                            00160011         ORG
+C'×' X'4F'                    ÿ
(##BAR)          VERTICAL BAR                         00180011         O
ME+C'"'                                               00190011         D
(##DQUOTE)       DOUBLE QUOTE MARK            +
NAME+C':'                                   ÿ
 YL1(##COLON)        PACKAGE DELIMITER                    00220011.*****
 &NAME+C'/'                                               00230011.*****
 YL1(##SLASH)        RATIONAL NUMBER MARKER               0z 0240011
   ,                   END OF TABLE                         00250011
D                                                           00260011{

        00010000&NAME    #SATM &TEXT
        00020000.*******************************************************
******* 00020104.ÿ
        * 00020204.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper L
y Inc.  * 00020304.*                     All rights reserved.
        * 00020404.*            ÿ
          * 00020504.***************************************************
*********** 00020604.*
          * 00020704.* THIS MACRO GENERATES AN ÿ
            * 00020804.*
            * 00020904.* EXAMPLE:  #SATM 'DON''T TREAD ON ME!'
            * 00021004.*                                      ÿ
              * 00022004.* NOTE: STRINGS ARE NOT AUTOMATICALLY ALIGNED B
ACRO.         * 00023004.*
              * 00024004.***********************************************
***************** 00025004         LCLA  &I,&L,&N,&Z
                  00026004         LCLC  &KTEXT
                  00027004&KTEXT   SETC  '&TEXT'             . STRING TE
DING QUOTES ÿ
CTERS INSIDE QUOTES 00029004&KTEXT   SETC  '&KTEXT'(2,&N)      . STRING
H QUOTES REMOVED    00030004&I       SETA  1                   . INDEX T
TRING TEXT          0004000ÿ
TH OF STRING TEXT     00050004.LOOP    ANOP
                      00060004         AIF   (&I GT &N).LEND
                      00070004         AIFÿ
                        00080004         AIF   ('&KTEXT'(&I,2) EQ ''''''
                        00090004         AIF   ('&KTEXT'(&I,2) EQ '&&').
                        00100004.NOTQA   ANOP            ÿ
                          00110004&L       SETA  &L+1
                          00120004&I       SETA  &I+1
                          00130004         AGO   .LOOP
                            00140004.P2      ANOP
                            00150004&L       SETA  &L+1
                            00160004&I       SETA  &I+2
       ÿ
                              00180004.LEND    ANOP
                              00190004&Z       SETA  4-(&L-((&L/4)*4))
                      +
G TEXT TYPE INDICATOÿ
ING TEXT LENGTH                   00220004         AIF   (&L EQ 0).NULL
                                  00230004         DC    C'&KTEXT'
                                  0ÿ
                                    00250004         DC    XL&Z'00'
ILL OUT TO FULLWORD BOUNDARY        00260004.NOFILL  ANOP
                                    00270004      ÿ
                                      00280004.NULL    ANOP
                                      00290004         DC    XL4'00'
 NULL STRING TEXT                     00300004.MEND    ANOP      ì
                                        00310004         MEND
                                        00320004{
     MACRO                                                          0001
E    #TPUT ,                                                        0002
                                                                    0003
********************************************************************* 00
                                                                    * 00
 ZIL Version 1.3 (c) 1989 The Charles Stark Draper Laboratory Inc.  * 00
            ÿ
.*                                                                    *
.**********************************************************************
.*                         ÿ
07.* THIS MACRO GENERATES A CALL TO TPUT TO WRITE TERMINAL MESSAGES.
07.*
07.* THIS USES REGISTERS 0, 1, 14, AND 15,ÿ
1007.* THE COMMON AREA.
2007.*
3007.* FROM 1 TO 4 OPERANDS MAY BE CODED:                ÿ
034007.*
035007.*   (1) THE SEVERITY LEVEL OF THE MESSAGE (0 THROUGH 4) - OPTIONA
036007.*   (2) THE ADDRESS OF THE MESSAGE TEXT - REQUIRED
00037007.*   (3) THE LENGTH OF THE MESSAGE TEXT - OPTIONAL
00038007.*   (4) "ASIS" - OPTIONAL
00039007.*
0004000ÿ
* 00050007.*  (IN WHICH CASE THE LENGTH MUST BE CODED AS WELL).
* 00060007.*  THE LENGTH MAY BE CODED AS (0), MEANING IT IS ALREADY IN R
* 00070007.*          ÿ
  * 00080007.*  IF THE SEVERITY LEVEL IS OMITTED, THE MESSAGE IS ALWAYS
  * 00090007.*  IF THE LENGTH IS OMITTED, IT IS DERIVED FROM THE MESSAGE
  * 00100007.*  WHICH MUST BE A CHARAÿ
    * 00110007.*
    * 00120007.*  SEVERITY LEVELS ARE SENSITIVE TO THE ZIL (MSGLEVEL) SE
    * 00130007.*                                    ÿ
      * 00140007.*    0 -      INFORMATIONAL: SUPPRESSED BY MSGLEVEL 1,
      * 00150007.*    1 -      WARNING:       SUPPRESSED BY MSGLEVEL 2 O
      * 00160007.*    2 -      ERROR:         SUPPRESSED BY MSGLEVEÿ
        * 00170007.*    3 -      SEVERE:        NOT SUPPRESSED
        * 00180007.*    4 -      DISASTROUS:    NOT SUPPRESSED
        * 00190007.*    * -      UNCONDITIONAL: NOT SUPPRESSED
  +
ÿ
            * 00220007.*
            * 00230007.*       #TPUT MSG1
            * 0ÿ
              * 00250007.*       #TPUT 2,MSG1,10
              * 00260007.*       #TPUT 2,MSG1,10,ASIS
              * 00270007.* MSGÿ
                * 00280007.*
                * 00290007.*********************************************
***************** 00300007.*                 ÿ
                    00310007         LCLC  &SEV,&MSG,&LEN,&LBL,&QUO,&ASI
                    00320007&LBL     SETC  'ZLCT&SYSNDX'
                    00330007&QUO     SETC  ''''             ÿ
                      00340007         AIF   (N'&SYSLIST EQ 1).SET1
                      00350007         AIF   (N'&SYSLIST EQ 2).SET2
                      00360007         AIF   (N'&SYSLIST EQ 3).SET3
                        00370007         AIF   (N'&SYSLIST EQ 4).SET4
                        00380007         MNOTE 12,'TOO MANY ARGUMENTS ON
ACRO'                   00390007         MEXIT
          ÿ
                          00410007&SEV     SETC  ''
                          00420007&MSG     SETC  '&SYSLIST(1)'
                         ÿ
                            00440007         AGO   .SET
                            00450007.SET2    ANOP
                            00460007&SEVÿ
                              00470007&MSG     SETC  '&SYSLIST(2)'
                              00480007&LEN     SETC  'L&QUO&MSG'
                              00490007         AGO   .Sÿ
                                00500007.SET3    ANOP
                                00510007&SEV     SETC  '&SYSLIST(1)'
                                00520007&MSG     SETC  '&SYSLIST(2)'  ÿ
                                  00530007&LEN     SETC  '&SYSLIST(3)'
                                  00540007         AGO   .SET
                                  00550007.SET4    ANOP
     ÿ
                                    00570007&MSG     SETC  '&SYSLIST(2)'
                                    00580007&LEN     SETC  '&SYSLIST(3)'
                                     00590007ÿç
LIST(4)'                                            00600007.SET     ANO
                                                    00610007         AIF
V' EQ '0' OR '&SEV' EQ '1' OR '&SEV' EQ '2' OR '&SEX00620007 ÿ
EQ '3' OR '&SEV' EQ '4' OR '&SEV' EQ '*' OR '&SEV' EQX00630007
).SEVOK                                               00640007         M
'INVALID #TPUT FIRST OPERAND - &SEV'                  00650007         M
                                                        00660007.SEVOK
                                                        00670007&NAME
H                                                       00680007
'&SEV' EQ 'ÿ
 ZLCMSLVL,&SEV          IF MSGLEVEL EXCEEDS SEVERITY CODE 00700007
 &LBL                   THEN DON'T DISPLAY MESSAGE        00710007.NOSEV
                          ÿ
   ('&MSG' EQ '(1)').NOMSG                                  00730007
   1,&MSG                 GET ADDRESS OF MESSAGE            00740007.NOM
P                                        ÿ
IF   ('&LEN' EQ '(0)').NOLEN                                  00760007
A    0,&LEN                 GET LENGTH OF MESSAGE             00770007.N
NOP                                                     ÿ
 AIF   ('&ASIS' EQ 'ASIS').ASIS                                 00790007
 AIF   ('&ASIS' EQ '').NOASIS                                   00800007
 MNOTE 12,'INVALID OPERAND 4 - "ASIS" IS THE ONLY VALID VALUE'  0081000ÿ
   MEXIT                                                          008200
   ANOP                                                           008300
   LCR   0,0                    INDICATE ASIS SPECIFIED           008400
S  ANOÿ
     L     15,ZLCTPUT             GET ADDRESS OF TPUT PROCESSOR     0086
     #BASR 14,15                  CALL ZILTPUT                      0087
     DS    0H        n                                                00
       MEND                                                           00

                00010000&SYMB    #ZBEG &NAME='NIL',&MAIN=YES,&TYPE=FUNCT
               X00020002               &GOTO=ZLBSTART,&PTRS=,
               X00030006 ÿ
,                X00040014               &ATOMS=NIL,&SUBRS=NIL,&LISTS=NI
                 X00050002               &MINARGS=1,&MAXARGS=0,&RESTARG=
                 X00060002              ÿ
                   X00060111               &AMODE=24,&RMODE=24
                    00061002.*******************************************
******************* 00061119.*                         ÿ
                    * 00061219.* ZIL Version 1.3 (c) 1989 The Charles St
er Laboratory Inc.  * 00061319.*                     All rights reserved
                    * 00061419.*                                      ÿ
                      * 00061519.***************************************
*********************** 00061619.*
                      * 00061719.* SUPPORT CODE FOR ALL COMPILED ZIL MAI
OGRAMÿ
R 14 CONTAINS THE       * 00061919.* RETURN ADDRESS ON ENTRY.  REGISTER
S TO BEGINNING OF CODE. * 00062019.*
                    ÿ
RS:                       * 00064019.*
                          * 00065019.* A TOPLEVEL PROGRAM HAS TYPE=PROGR
 MAIN PROCEDURE IS NAMED  * 0006601ÿ
                            * 00067019.*
                            * 00068019.* A FUNCTION (WHICH CAN BE BROUGH
 LINKEDIT)                  * 00069019.* HAS TYPE=ÿ
INITION HAS MAIN=YES.         * 00070019.*
                              * 00080019.* ANY FUNCTIONS INTERNAL TO THE
DE HAVE MAIN=NO.              * 00090019.*                       ÿ
                                * 00100019.*****************************
********************************* 00110019.*
                                * 00120019.* NOTE:  DEFAULT IS MINARGS=1
ÿ
WILL GET AN ERROR IF EXECUTED.    * 00140019.*
                                  * 00150019.***************************
***************ÿ
                                      00170019         GBLB  &MAINP,&PRO
HRU                                   00180019         GBLB  &ZILMVS,&ZI
LXA,&ZILVF,&ZILCMS,&ZILTSO,&ZI+
                            ÿ
IT,&LBIT                                  00210019         LCLC  &ATOMSS
,&LISTSS,&LISTSE                          00220019         LCLC  &BITS1,
                                          0ÿ
                                            00240019&ZILARH  SETC  'ZILB
                                            00250019&MAINP   SETB  0
                                            00260019&PROGPÿ
                                              00270019         AIF   ('&
1) NE 'P').NOTPROG                            00280019&PROGP   SETB  1
                                              00290019.NOTPROG ANOP
                                                00300019         AIF   (
1,1) NE 'Y').NOTMAIN                            00310019&MAINP   SETB  1
                                                00320019.NOTMAIN ANOP
        ÿ
                                                  00340019.* SET MODULE
ITS                                               00350019.*
                       ÿ
BRS' NE 'NIL')                                      00370019&PBIT    SET
GP)                                                 00380019&RBIT    SET
STARG' NE 'NIL')                      ÿ
LEXPR' NE 'NIL')                                      00400019&BITS1   S
BIT.&PBIT.000000'                                     00410019&BITS2   S
BIT.&LBIT.000000'                                    ÿ
                                                        00430019.* SET G
OF ARGS TO DEFAULTLY SAVE ON STACK PER #ZSAV MACRO      00431019.*
                                                        00432019&ZSVÿ
 &MAXARGS                                                 00433019
 (NOT &RBIT).NZSVINC                                      00433119&ZSVAR
 &MAXARGS+1                                               00433219.NZSVI
   ÿ
                                                            00433419.* G
MAPPING MACROS ONCE ONLY                                    00433519.*
                  ÿ
IF   (&ZILTHRU).ZILBYP                                        00433719&Z
ETB  1                                                        00433819
ZSYS ,                   DEFINE Tÿ
 #ZEQU ,                   DEFINE ALL EQUATES                   00434019
 #ZCOM ,                   MAP THE COMMON AREA                  00435019
 #ZSFT ,                   DEFINE SMALL FIXNUM T ABLE            004360

00437019.*
00438019.* ONLY IF MAINP AND PROGP
00439019.ÿ
  00440019ZILMAIN  CSECT
  00450019         AIF   (NOT &ZILXA).NOMODES
  00460019ZILMAIN  AMODEÿ
    00470019ZILMAIN  RMODE &RMODE
    00480019.NOMODES ANOP
    00490019         AGO   .L2         ÿ
      00500019.L1      ANOP
      00510019.*
      00520019.* ALL OTHER CASES                      ÿ
        00530019.*
        00540019         AIF   (NOT &MAINP).NOCS1
        00550019.*                                                   ÿ
          00560019.* ONLY IF MAINP
          00570019.*
          00580019&SYMB    CSECT
    ÿ
            00600019.NOCS1   ANOP
            00610019.*
            0062001ÿ
              00630019.*
              00640019&SYMB    DS    0D
              00650019.AFTCS1  ANOÿ
                00660019.L2      ANOP
                00670019.*
                00680019.* ALL TOGETHER NOW      ÿ
                  00690019.*
                  00700019         B     &ZILARH-*(,15)      BRANCH AROU
IFIER             00710019         DC    YL1(&ZILAR-*-1)        ÿ
                    00720019         DC    C&NAME
                    00730019         DC    C' &SYSDATE &SYSTIME '
                    00740019&ZILAR   EQU   *                   END OF ID

                      00760019.*
                      00770019.* ONLY IF MAINP AND PROGP
              +
            ÿ
D BY LOADER, INTERPRETER  00800019         DC    B'&BITS1'            SU
AM INDICATORS             00810019         DC    B'&BITS2'            RE
XPR INDICATORS            0ÿ
# OF ARGUMENTS FOR FUNCTION 00821019         DC    YL1(&MAXARGS)
# OF ARGUMENTS FOR FUNCTION 00822019&ZILARH  DS    0H                  S
CODE                        00823019      ÿ
GISTERS                       00824019         LR    12,15
SH BASE REGISTER              00825019         USING ZILMAIN,12
                              00826019         LA    1,ZLÿ
ENGTH OF SAVE AREA              00827019         ST    13,4(,1)
 SAVE AREAS                     00828019         ST    1,8(,13)
                                00829019         LR    13,1
                                  00830019         L     1,ZLBSTPTR
S EXECUTABLE CSECT CODE TO INIT.  00840019         LINK  SF=(E,ZLBINIT)
K TO INITIALIZATION MODULE        00850019         STM   14,12,12(13)
E REGS ÿ
ET REG 13 TO POINT TO COMMON AREA   00870019         USING ZLCOMMON,13
STABLISH ADDRESSABILITY TO COMMON   00880019         LR    1,11
OINT TO INITIAL STACK ÿ
 ADDRESS COMPILED CODE                00900019         BALR  14,15
 CALL COMPILED CODE                   00910019         L     2,ZLCRETCD
 LOAD RETURN CODE                    ÿ
   SET REG 13 TO POINT TO OUR AREA      00930019         ST    2,28(,13)
   STORE REG 2 (RET CODE) IN SAVE AREA  00940019         LM    14,12,12(
   RESTORE REGS IN OUR OWN SAVE AREA    00950019    ÿ
                                          00960019ZLBRET   DS    0H
                                          00970019         LINK  SF=(E,Z
     LINK TO TERMINATION MODULE           00980019         L     13ÿ
       RESTORE HIGHER SAVEAREA              00990019         ST    2,16(
       STORE RETURN CODE IN SAVE AREA       01000019         LM    14,12
       RESTORE REGISTERS WITH RETURN CODE   01010019         BR    14
  ÿ
                                              01030019ZLBSAVE  DS    18A
         TOP LEVEL SAVE AREA                  01040019ZLBSTPTR DC    A(&
         ADDRESS ÿ
ILINIT     LINK TO INITIALIZATION MODULE        01060019ZLBTERM  LINK  S
ILTERM     LINK TO TERMINATION MODULE           01070019         SPACE 1
                                                 01080019ÿç
 DROP  12                                                       01090019
 ANOP                                                           01100019
                                                                01110019
S IS FOR EVERYBODY                                                011200
                                                                  011300
   EJECT                                                          011400
   AIF  ÿ
                                                                    0116
NLY IF MAINP AND PROGP                                              0117
                       ÿ
YMB    CSECT                                                          01
OCS2   ANOP                                                           01
                                      ÿ
.* ALL TOGETHER AGAIN
.*
         SPACE 2                                     ÿ
19         USING &SYMB,15
19         USING ZLCOMMON,13
19         USING #SFTD,8                                            ÿ
0019         AIF   (NOT &MAINP OR NOT &PROGP).L4
0019.*
0019.* ONLY IF MAINP AND PROGP
001ÿ
310019         B     &GOTO               BRANCH AROUND ADDRESSES
320019.L4      ANOP
330019         AIFÿ
01340019.*
01350019.* ONLY IF NOT (MAINP AND PROGP)
01360019.*                       ÿ
  01370019         DS    0A                   FIELDS USED BY LOADER, INT
  01380019         DC    B'&BITS1'            SUBR/PROGRAM INDICATORS
  01390019         DC    B'&BITS2'            REÿ
    01400019         DC    YL1(&MINARGS)        MINIMUM # OF ARGUMENTS F
ION 01410019         DC    YL1(&MAXARGS)        MAXIMUM # OF ARGUMENTS F
ION 01420019.L5      ANOP                                      ÿ
      01430019         AIF   (&PROGP).L6
      01440019.*
      01450019.* ONLY IF NOT PROGP
        01460019.*
          01470019         AIF   (NOT &SBIT).NOSUBRS
          01480019         DC    A(&SUBRS.S,&SUBRS.E) ADDRESS OF EXTERNA
TINES     01490019.NOSUBRS ANOP
          0ÿ
            01510019         AIF   ('&ATOMS+&LISTS' EQ 'NIL+NIL' AND NOT
.LA         01520019         AIF   (NOT &MAINP AND '&PTRS' EQ 'NIL').LA
            01530019.*    ÿ
              01540019.* ONLY IF MAINP OR WE HAVE PTRS
              01550019.*
              01560019&ATOMSS  SETC  '0' ÿ
                01570019&ATOMSE  SETC  '0'
                01580019&LISTSS  SETC  '0'
                01590019&LISTSE  SETC  '0'              ÿ
                  01600019         AIF   ('&ATOMS' EQ 'NIL').NOATOMS
                  01610019&ATOMSS  SETC  '&ATOMS.S'
                  01620019&ATOMSE  SETC  '&ATOMS.E'                    ÿ
                    01630019.NOATOMS AIF   ('&LISTS' EQ 'NIL').NOLISTS
                    01640019&LISTSS  SETC  '&LISTS.S'
                    01650019&LISTSE  SETC  '&LISTS.E'
      ÿ
                      01670019         AIF   (NOT &MAINP OR NOT &PROGP).
                      01680019.*
                     ÿ
                        01700019.*
                        01710019&ATOMSS  SETC  'ZILATOMS'
                        01720019&ATOÿ
                          01730019&LISTSS  SETC  'ZILLISTS'
                          01740019&LISTSE  SETC  'ZILLISTE'
                          01750019.L6A     ANOP    ÿ
                            01760019.* THE FOLLOWING FIELDS MUST MATCH T
RATION IN MACRO #ZHDR.      01770019&PTRS    DS    0A
 USED BY INITIALIZATION     01780019         DC    A(&ATOMSS,&ATOMÿ
SES OF INLINE SYMBOLS         01790019         DC    A(&LISTSS,&LISTSE)
SES OF INLINE LISTS           01800019         AIF   (NOT &MAINP OR NOT
LA                            01810019.*
 ÿ
                                01830019.*
                                01840019         DC    A(ZILOPTS)
SS OF OPTIONS LI ST              01850019ÿç
)          ADDRESS OF ZIL MODULES TABLE         01860019ZILOPTS  DS    0
                                                01870019ZILPDSIZ DC    A
)          PUSH DOWN LIST SIZE                  01880019Zÿ
ZE)          SIZE OF CONS SPACE                   01890019ZILVSSIZ DC
ZE)          SIZE OF VECTOR/STRING SPACE          01900019ZILACSIZ DC
ZE)          SIZE OF ACTIVE CONS SPACE            01910019ZILOPTE  EQU
               END OF OPTIONS LIST                  01920019&GOTO    DS
               CODE STARTS HERE                     01930019         AGO
                                                    01940019.LA      ANO
       ÿ
AINP AND &PROGP).LEND                                 01960019.*
                                                      01970019.* FOR ALL
MAINP-AND-PROGP       ÿ
                                                        01990019&ZILARH
H                  START OF CODE                        02000019.LEND
                                     `                    02010019
                                                          02020019

    00010000         #ZCOM
    00020000.***********************************************************
*** 00020169.ÿ
    * 00020269.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Labor
c.  * 00020369.*                     All rights reserved.
    * 00020469.*            ÿ
      * 00020569.*******************************************************
******* 00020669         EJECT
        00020769***************************ÿ
********* 00020869*
        * 00020969* THIS MACRO MAPS THE COMMON AREA USED BY ALL ZIL ROUT
T IS    * 00021069* POINTED TO BY REGISTER 13 (NOTE THE SAÿ
AND HAS   * 00022069* POINTERS TO VARIOUS FIELDS INCLUDING GARBAGE COLLE
ELDS.     * 00023069*
          * 00024069****************************************************
************* 00025069.*
              00026069.*************************************************
************* 00027069.*
        ÿ
              * 00029069.*
              * 00030069.* 06/01/88 - Added ZLCVALS field for address of
.  See #ZSUB. * 0004006ÿ
interface.      * 00050069.* 12/01/89 - Added EBCDIC/ASCII collating fla
csyma.          * 00051070.*
                * 00060069.***********ÿ
******************* 00070069.*
                    00080069         SPACE
                    00090069ZLCOMMON DSECT ,         ÿ
PING                  00100069         SPACE 1
                      00110069ZLCSAVE  DS    9D                  OS SAVE
                      00120069ZLCSAVE2 DS    9D                  OS ÿ
                        00130069ZLCDBL   DS    D                   WA FO
LANEOUS CONVERSIONS     00140069ZLCWORK  EQU   ZLCDBL,4,C'F'       WA FO
LANEOUS CONVERSIONS     00150069ZLC24ADR DS    A                   ADDRE
-BIÿ
4-BIT STORAGE AREA        00170069ZLC31ADR DS    A                   ADD
31-BIT STORAGE AREA       00180069ZLC31SIZ DS    A                   LEN
1-BIT STORAGE AREA+
F CONS SPACE    ÿ
 OF COMMON AREA               00210069ZLCPDADR DS    A
 OF PUSH DOWN STACK           00220069ZLCCSSIZ DS    A
 CONS SPACE                   0ÿ
OF COMMON AREA                  00240069ZLCPDSIZ DS    A
OF PUSH DOWN STACK              00250069ZLCOSSIZ DS    A
TO RETURN TO SYSTEM             00260069ZLCNFRÿ
NT OF FREE LIST CELLS             00270069         SPACE
                                  00280069ZLCVSADR DS    A
RESS OF VECTOR/STRING SPACE       00290069ZLCVSLEN DS    A   ÿ
ENGTH OF VECTOR/STRING SPACE        00300069ZLCVSNXT DS    A
EXT AVAILABLE VECTOR/STRING SLOT    00310069ZLCVSOTH DS    A
DDRESS OF OTHER HALF OF VS SPACE    00320069         SPACE
                                      00330069ZLCPSSIZ DS    A
 SIZE OF PRINT STACK                  00340069ZLCPSADR DS    A
 ADDRESS OF PRINT STACK               00350069ZLCPSEND DS    A
 ADDRESS OFÿ
                                        00370069ZLCWA    DS    A
   ADDRESS OF ZIL WORK AREA             00380069ZLCWALEN DS    F
   LENGTH OF ZIL WORK AREAÿ
     ADDRESS OF ZILADMP WORK AREA         00400069ZLCDWALN DS    F
     LENGTH OF ZILADMP WORK AREA          00410069ZLCTWA   DS    A
     ADDRESS OF PRINC/REFORMAT WORK AREA ÿ
       LENGTH OF PRINC/REFORMAT WORK AREA   00430069         SPACE 1
                                            00440069ZLCIFBAD DS    A
       ADDRESS OF INPUT FILE BLOCK CHAIN    00450069ZLCOÿ
         ADDRESS OF OUTPUT FILE BLOCK CHAIN   00460069ZLCSTDIN DS    A
         ADDRESS OF FILE BLOCK FOR STD INPUT  00470069ZLCSTDOU DS    A
         ADDRESS OF FILE BLOCK FOR STD OUTPUT 00480069ZLCIFTRM DS    A ÿ
           ADDR OF TERMINAL INPUT FILE BLOCK    00490069ZLCOFTRM DS    A
           ADDR OF TERMINAL OUTPUT FILE BLOCK   00500069ZLCDRIBL DS    A
           ADDRESS OF DCB FOR DRIBBLE FILE      00510069         SPACE 1
      ÿ
             RETURN CODE TO PASS BACK TO SYSTEM   00530069ZLCHDADR DS
             ADDRESS OF MAIN PROGRAM HEADER       00540069ZLCOPADR DS
             ADDRESS ÿ
                                                    00560069ZLCGCFLG DS
               GARBAGE COLLECTION FLAGS             00570069ZLCGCDNE EQU
00000'          1 = GARBAGE COLLECTI ON WAS DONE     00580069ÿç
CINT EQU   B'01000000'          1 = ZILINIT CALLING CONS            0059
CBLD EQU   B'00100000'          1 = ZILABLD CALLING CONS            0060
CMSG EQU   B'00010000'          1 = SHOW GC MESSAGES                0061
       EQU   B'00001000'          RESERVED                            00
       EQU   B'00000100'          RESERVED                            00
       EQU   B'00000010'          RESERVED                            00
       EQU  ÿ
ZLCRMCHR DS    C                   CURRENT READER MACRO CHARACTER
ZLCFBLEN DS    H                   LENGTH OF A FILE BLOCK
         SPACE             ÿ
69ZLCRMCHN DS    A                   ADDRESS OF THE READER MACRO CHAIN
69ZLCRDTBL DS    A                   ADDRESS OF THE READ TABLE
69ZLCGSCNT DS    A                   GENSYÿ
0069ZLCGSPRE DS    A                   GENSYM PREFIX
0069ZLCGCEND DS    A                   END-OF-FREE-LIST POINTER
0069ZLCCONS  DS    A                   ADDRESS OF ROUTINEÿ
740069ZLCPDSO  DS    A                   ADDRESS OF STACK OVERFLOW ROUTI
750069ZLCCALPO L     2,*-*               CODE TO INVOKE STACK OVERFLOW R
760069         BR    2                    WHEN RECURSION LIMIT EXCEEDED
00770069ZLCCALPL EQU   *-ZLCCALPO          LENGTH OF ABOVE CODE
00780069ZLCLDFLG DS    X                   FLAGS USED BY LOADER and othe
00790070ZLCLDGAD EQU   B'10000000'          1 = GOT ADDRESS OF MODULE CO
0080006ÿ
D 00810069ZLCLDASC EQU   B'00100000'          1 = Use ASCII collating se
  00820070*        EQU   B'00010000'          RESERVED
  00830069*        EQUÿ
    00840069*        EQU   B'00000100'          RESERVED
    00850069*        EQU   B'00000010'          RESERVED
    00860069*        EQU   B'00000001ÿ
      00870069ZLCPFLGS DS    X                   FLAGS USED BY PRINTER
      00880070ZLCPSLSH EQU   B'10000000'          1 = SLASHIFY
      00890069ZLCPRINT EQU   B'01000000'          1 ÿ
CESS    00900069*        EQU   B'00100000'          RESERVED
        00910069*        EQU   B'00010000'          RESERVED
        00920069*        EQU   B'00001000'          RESERVED       ÿ
          00930069*        EQU   B'00000100'          RESERVED
          00940069*        EQU   B'00000010'          RESERVED
          00950069*        EQU   B'00000001'          RESERVED
  +
ÿ
GETI          00980069ZLCFGETO DS    A                   ADDRESS OF ROUT
GETO          00990069ZLCERR   DS    A                   ADDRESS OF ROUT
RR            0ÿ
LTHROW          01010069ZLCCATCH DS    A                   ADDRESS OF TH
T CATCH FRAME   01020069ZLCABEND DS    H                   USER ABEND CO
Y ZILERR        01030069ZLCERFÿ
 PROCESSING       01040069ZLCERSET EQU   B'10000000'          1 = USER A
E SET             01050069ZLCERTRC EQU   B'01000000'          1 = STACK
ACTIVE            01060069ZLCERDBG EQU   B'00ÿ
CTIVE               01070069ZLCERCFA EQU   B'00010000'          1 = COND
FILE ACCESS         01080069*        EQU   B'00001000'          RESERVED
                    01090069*        EQU   B'00000100'      ÿ
                      01100069*        EQU   B'00000010'          RESERV
                      01110069*        EQU   B'00000001'          RESERV
                      01120069ZLCPMASK DS    X                   PROGRAM
                        01130069ZLCFILNO DS    H                   USED
TO GENERATE FILE NAMES  01140069ZLCMSLVL DS    X                   MESSA
                        01150069ZLCDFLGS DS    X                   FLAGS
R ZILADMP ÿ
COPY DATA INTO WORKAREA   01170069ZLCDSLSH EQU   B'01000000'         1 =
Y                         01180069*        EQU   B'00100000'          RE
                         ÿ
                            01200069*        EQU   B'00001000'
                            01210069*        EQU   B'00000100'
                            01220069*   ÿ
ED                            01230069*        EQU   B'00000001'
ED                            01240069         SPACE 1
                              01250069ZLCRMNIL DS    2Aÿ
BJECT "RMNIL" USED BY (RMNIL)   01260069ZLCUNBND DS    2A
EPRESENTING UNBOUND VARIABLES   01270069ZLCRANDK DS    A
KEY FOR RANDOM FUNCTION         01280069         SPACE 1              ÿ
                                  01290069* ADDRESSES OF STANDARD VARIAB
                                  01300069         SPACE 1
                                  01310069ZLCT     DS    A
RESS ÿ
DDRESS OF THE ATOM NIL              01330069ZLCOBLST DS    A
DDRESS OF THE OBJECT LIST           01340069*
                                     01350069ÿç
G TWO FIELDS REPLACE THE OLD ZIL "ZLCALIST".        01360069*       THE
IS FOR VARIABLES DECLARED "SPECIAL" AND             01370069*       PROV
AMIC SCOPING.  THE F-ALIST IS FOR NONLOCAL          01380069*ÿ
RIABLES AND PROVIDES LEXICAL AND PSEUDOLEXICAL        01390069*       SC
INCE THEY ARE CAPTURED BY CLOSURES).                  01400069*
                                                      01410069ZLCSALST D
                   ADDRESS OF THE SPECIAL "ALIST"       01420069ZLCFALST
                   ADDRESS OF THE LEXICAL "ALIST"       01430069*
                                                        01440069* FIELDS
 (PROSPECTIÿ
                                                          01460069ZLCISA
 4A                  SAVEAREA FOR REGS 8-11 IF NEEDED     01470069
 ZLCISAVE                 ÿ
   A                                                        01490069ZLCI
   A                                                        01500069ZLCI
   A                                     ÿ
S    A                                                        01520069
RG   ,                                                        01530069
PACE 1                                                  ÿ
 DS    X                   FLAGS FOR USE BY INTERRUPT HANDLERS  01550069
 EQU   B'10000000'         1 = REGS 8-11 SAVED IN ZLCISAVE      01560069
 EQU   B'01000000'         1 = SYSTEM CODE RUNNING IN SAME RB   0157006ÿ
C  EQU   B'00100000'         1 = CANNOT BE SAFELY INTERRUPTED     015800
TN EQU   B'00010000'         1 = ATTENTION INTERRUPT IN PROGRESS  015900
ER EQU   B'00001000'         1 = INSTRUCTION OVERLAY IN PROGRESS  016000
   EQUÿ
     EQU   B'00000010'         RESERVED                             0162
     EQU   B'00000001'         RESERVED                             0163
FLGS DS    X         ÿ
CESTAE EQU   B'10000000'         1 = ESTAE ACTIVE FOR ABENDS          01
CESTAX EQU   B'01000000'         1 = STAX ACTIVE FOR ATTENTIONS       01
CETERM EQU   B'00100000'         1 =ÿ
*        EQU   B'00010000'         RESERVED
*        EQU   B'00001000'         RESERVED
*        EQU   B'00000100'         RESERVED        ÿ
69*        EQU   B'00000010'         RESERVED
69*        EQU   B'00000001'         RESERVED
69         SPACE 1                                                +
0069ZLCTPUT  DS    A     A(ZILTPUT)    ADDRESS OF TERMINAL OUTPUÿ
740069ZLCBIG   DS    A     A(ZILBIG)     ADDRESS OF BIGNUM SPACE ALLOCAT
750069ZLCINTN  DS    A     A(ZILINTN)    ADDRESS OF SYMBOL INTERNING ROU
760069ZLCABLD  DS    A     A(ZILABLD)    ADDRESS OF ATOM BUILDING ROUTIN

01780069ZLCVSS   DS    A     A(ZILVSS)     VECTOR/STRING SPACE ALLOCATOR
01790069ZLCGETC  DS    A     A(ZILGETC)    ADDRESS OF CHARACTER INPUT RO
01800069ZLCPRIÿ
  01810069ZLCTERP  DS    A     A(ZILTERP)    ADDRESS OF TERPRI ROUTINE
  01820069ZLCKERR  DS    A     A(ZILKERR)    ADDRESS OF KEYWORD ERROR HA
  01830069ZLCCVBF  DS    A   ÿ
TER 01840069*
    01850069* FIELDS USED BY FORTRAN INTERFACE
    01860069*                               ÿ
      01870069ZLCFINT  DS    A     A(ZILFINT)    ADDRESS OF FORTRAN INTE
UTINE 01880069ZLCFTCBA DS    A                   ADDRESS OF FTCB (FORTRA
LK)   01890069*                                            ÿ
        01900069* THE FOLLOWING FIELDS ARE USED BY ATTENTION HANDLING.
        01910069*
        01920069ZLCZILRB DS    A                   ADDRESS OF RB ZIL IS
G UNDER   01930069ZLCINSTA DS    A                   ADDRESS OF OVERLAID
TION      01940069ZLCINSTR DS    H                   SAVED INSTRUCTION A
ION       01950069*
         ÿ
 BRACKET    01970069ZLCRB    DS    X                   CHARACTER TO USE
T BRACKET   01980069ZLCECB   DS    A                   ECB USED WHEN ATT
UBTASKS     01990069*   ÿ
              02000069* FIELDS USED BY ZILINTN (SYMBOL INTERNING)
              02010069*
              02020069ZLCOBHSH DS    A ÿ
H ARRAY         02030069ZLCOBDIM DS    A                   TOTAL NUMBER
 IN OBHASH      02040069ZLCOBCNT DS    F                   NUMBER OF SLO
 IN OBHASH      02050069*                             ÿ
                  02060069ZLCTRMTR DS    A                   ADDRESS OF
 OUTPUT TRANS TBL 02070069ZLCSFTBL DS    A                   ADDRESS OF
XNUM TABLE        02080069ZLCSFTLO DS    F                   LOWEST Sÿ
UM VALUE            02090069ZLCSFTHI DS    F                   HIGHEST S
NUM VALUE           02100069*
                    02110069* FIELDS USED BY COMPILED CODE INTERFACES, E
                     02120069ÿç
                                    02130069ZLCSINT  DS    A
DDRESS OF ZILSINT SUBROUTINE        02140069ZLCSBND  DS    A
DDRESS OF ZILSBND SUBROUTINE        02150069Zÿ
 ADDRESS OF ZILFBND SUBROUTINE        02160069*
                                      02170069* FIELDS USED TO MAINTAIN
TER VECTOR" OF INLINE COMPILED CODE   02180069* OBJECT POINTÿ
IL COMPILED CODE HEADERS)               02190069*
                                        02200069ZLCICPA  DS    A
   ADDRESS OF MASTER VECTOR             02210069ZLCICPL  DS    A
     LENGTH OF MASTER VECTOR              02220069ZLCICPU  DS    A
     PORTION OF MASTER VECTOR IN USE      02230069*
                                          02240069* FIELDS USED BY GARBA
CTOR      ÿ
                                            02260069ZLCGCTIM DS    F
       TOTAL GC TIME SO FAR                 02270069ZLCGCBVA DS    A
       ADDRESS OF GC BIT ÿ
         LENGTH OF GC BIT VECTOR              02290069ZLCGCACP DS    A
         POINTER TO BOTTOM OF ACTIVE CONS SP  02300069ZLCGCACD DS    F
         NUMBER OF CELLS IN ACTIVE CONS ÿ
           NUMBER OF FREE CELLS IN ACTIVE CONS  02320069*
                                                02330069* AREA USED TO I
E NEW SYMBOLS                                   0234006ÿ
                                                  02350069ZLCNSYM  DS
             NEW SYMBOL TEMPLATE                  02360069         DS
             (FILLED IN BY ZILINIT)               02370069.*-------DS-ÿ
SYMLEN)--------(FILLED IN BY ZILINIT)               02380069.*
                                                    02390069.* TO AVOID
CIES ON #ZEQU, WE HARDCODE THE MAX LENGTH OF A      02400069.* SYMBOL AB
 ##SYÿ
                                                      02420069*
                                                      02430069* FIELDS U
ILSINT TO COMMUNICATÿ
                                                        02450069ZLCSIN1
                   START OF OBJECT POINTERS TO COLLECT  02460069ZLCSIN2
                   END OF OBJECT POÿ
                                                          02480069* FIEL
TO LOCATE ZIL MODULES                                     02490069*
                                                  +
   A                   ADDRESS OF ZIL MODULES TAÿ
S    A                   ADDRESS OF CURRENT ZIL PRINTER       02520069*
                                                              02530069*
SED BY DOUBLE PRECISION FLOATING POINT SUPPORT                0ÿ
                                                                02550069
 DS    A     A(ZILMDF)     ADDRESS OF DOUBLE-FLOAT CONSER       02560069
                                                                02570069
 fields...                                                        025800
                                                                  025900
S  DS    A     A(ZILVALS)    Address of multiple-values returner  026000
R  DS    A   ÿ
                                                                    0262
******************************************************************* 0263
                            ÿ
 END OF COMMON AREA FIELDS DEFINED SO FAR.  ADDITIONAL FIELDS MAY BE  02
 ADDED AT THE END FOR FUTURE REVISIONS.                               02
                                           ÿ
.**********************************************************************
*
* THE FOLLOWING EQUATE IS USED ONLY BY ZILINIT.  ALL OTHERÿ
69* MUST REFER TO THE CURRENT COMMON AREA LENGTH AS STORED IN ZLCCMSIZ.
69*
69ZLCCOMLN EQU   *-ZLCOMMON          LENGTH OF COMMON AREA
0069         EJECT
0069ZLFILBLK DSECT     ,               FILE BLOCK MAPPING
0069         SPACE
0069****ÿ
770069*
780069* A FILE BLOCK IS CONSTRUCTED AND STORAGE DYNAMICALLY OBTAINED FOR
790069* EACH FILE OPENEÿ
02800069* REQUEST.  FILE BLOCKS ARE ALWAYS ALLOCATED FOR THE STANDARD IN
02810069* AND OUTPUT, AS WELL AS THE TERMINAL IF APPLICABLE.
02820069*                             ÿ
* 02830069**************************************************************
* 02840069         SPACE
  02850069ZLFCHAIN DS    A(0)                CHAIN POÿ
    02860069ZLFPDDN  DS    CL8                 FILE NAME (8 CHARS)
    02870069ZLFATOM  DS    A                   FILE ATOM (POINTER)
    02880069ZLFTFPTR DS    A                   POINTER TO TRUE TERMI NA
LOCK  02890069ÿç
                    02900069ZLFDCB   DS    CL96                DATA CONT
K                   02910069ZLFCARD  DS    A                   ADDRESS O
T RECORD            02920069Zÿ
ENT CHARACTER         02930069*                                    GT 0
D CHARACTER EXISTS    02940069*                                    EQ 0
ICAL END OF FILE      02950069*             ÿ
GICAL END OF FILE       02960069ZLFEND   DS    A                   ADDRE
D OF CURRENT RECORD     02970069ZLFREC1  DS    A                   ADDRE
RST LOGICAL RECORD READ 02980069ZLFLRECL DS    H           ÿ
ORD LENGTH                02990069ZLFFLAG  DS    XL2                 TWO
F FLAG BITS               03000069ZLFFLAG1 EQU   ZLFFLAG+0           FLA
                          03010069ZLFINPUT EQU   B'10000000'          1
 IS AN INPUT FILE           03020069ZLFSYSIN EQU   B'01000000'
 IS THE STANDARD SYSIN FILE 03030069ZLFSYSPR EQU   B'00100000'
 IS THE STD SYSPRINT FILE   03040069ZLFSTART EQU   B'00010000'
 HAS BEENÿ
REAL CHAR FOUND ON READ       03060069ZLFTERM  EQU   B'00000100'
IS FILE ALLOCATED TO TERMINAL 03070069ZLFEOF   EQU   B'00000010'
D OF FILE ENCOUNTERED   ÿ
NEWLINE CONDITION ENCOUNTERED   03090069ZLFFLAG2 EQU   ZLFFLAG+1
FLAGS                           03100069ZLFOPEN  EQU   B'10000000'
FILE OPENED SUCCESSFULLY        0311006ÿ
= VARIABLE-LENGTH RECORD FORMAT   03120069ZLFNUM   EQU   B'00100000'
= FILE IS LINE NUMBERED           03130069ZLFTGT12 EQU   B'00010000'
= LAST TGET RETURN CODE WAS 12    03140069ZLFTABS  EQUÿ
1 = EXPAND TABS AND NEWLINES        03150069ZLFETIO  EQU   B'00000100'
1 = ECHO EVEN IF TERMINAL IN & OUT  03160069ZLFRECU  EQU   B'00000010'
1 = UNDEFINED-LENGTH RECORD FORMAT  03170069*        EQU   B'00000001ÿ
  RESERVED                            03180069         SPACE 1
                                      03190069ZLFLINE  DS    CL81
 I/O AREA                             03200069         DS    XL1
 RESÿ
   ECHO REFERENCE COUNT (OUTPUT ONLY)   03220069ZLFECHO  DS    A
   ADDRESS OF ECHO FILE (INPUT ONLY)    03230069*        New fields adde
88 to support UNTYIÿ
     Unread character of file             03250069ZLFLSTCH DS    XL1
     Last read character of file          03260069ZLFUNRST DS    XL1
     Status of unread character   +
       Status of last character ÿ
         Equates for above 2 fields           03290069ZLFSTINV EQU   0
          not valid                           03300069ZLFSTVLD EQU   1
          true character                      0ÿ
            newline                             03320069ZLFSTEOF EQU   3
            eof                                 03330069*
                                                03340069* THE ÿ
 IS USED ONLY BY ZILINIT.  ALL OTHER ROUTINES     03350069* MUST REFER T
RRENT FILE BLOCK LENGTH AS STORED IN ZLCFBLEN.    03360069*
                                                  03370069ZLFBLEN  EQU
ILBLK          LENGTH OF A FILE BLOCK               03380069         EJE
                                                    03390069         MEN
                                                    03400069{

00010000         #ZEQU
00020000.***************************************************************
00020119.ÿ
* 00020219.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Laborator
* 00020319.*                     All rights reserved.
* 00020419.*            ÿ
  * 00020519.***********************************************************
*** 00020719.*
  * 00020819.*                        Bÿ
    * 00020919.*
    * 00021019.*********************************************************
***** 00022019         EJECT                          ÿ
        00023019*
        00024019* GENERAL REGISTER EQUATES
        00025019*                                                    ÿ
          00026019#0       EQU   0                   STACK OVERFLOW CHEC
NERAL USE 00027019#1       EQU   1                   GENERAL USE
          00028019#2       EQU   2                   GENERAL USE
    ÿ
            00030019#4       EQU   4                   GENERAL USE
            00040019#5       EQU   5                   GENERAL USE
            0005001ÿ
              00060019#7       EQU   7                   USUALLY USED FO
OINTERS       00070019#8       EQU   8                   CONTAINS THE AT
              00080019#9       EQUÿ
EE CONS CELL    00090019#10      EQU   10                  CONTAINS THE
                00100019#11      EQU   11                  CURRENT PUSH
CK POINTER      00110019#12      EQU   12        ÿ
                  00120019#13      EQU   13                  POINTER TO
ON AREA           00130019#14      EQU   14                  OS RETURN R
                  00140019#15      EQU   15                  OS ÿ
                    00150019*
                    00160019* FLOATING-POINT REGISTER EQUATES
                    00170019*

TENDED                00190019#F2      EQU   2                   SHORT,
                      00200019#F4      EQU   4                   SHORT,
TENDED        +
            ÿ
                          00230019* VECTOR FACILITY REGISTER EQUATES
                          00240019*
                          0ÿ
SE                          00260019#V1      EQU   1                   G
SE                          00270019#V2      EQU   2                   G
SE                          00280019#V3   ÿ
 USE                          00290019#V4      EQU   4
 USE                          00300019#V5      EQU   5
 USE                          00310019#V6      EQU   6   ÿ
AL USE                          00320019#V7      EQU   7
AL USE                          00330019#V8      EQU   8
AL USE                          00340019#V9      EQU   9
ERAL USE                          00350019#V10     EQU   10
ERAL USE                          00360019#V11     EQU   11
ERAL USE                          00370019#V12     EQU   12
ERAL USÿ
ENERAL USE                          00390019#V14     EQU   14
ENERAL USE                          00400019#V15     EQU   15
ENERAL USE            ÿ
                                      00420019* VECTOR FACILITY COMPARE
S                                     00430019*
                                     ÿ
   SET BIT ON HIGH                      00450019#VL      EQU   4
   SET BIT ON LOW                       00460019#VE      EQU   8
   SET BIT ON EQUAL                     00470019#VNHÿ
     SET BIT ON NOT HIGH                  00480019#VNL     EQU  11
     SET BIT ON NOT LOW                   00490019#VNE     EQU   7
     SET BIT ON NOT EQUAL                 00500019*                ÿ
                                            00510019* EQUATES INSIDE OBJ
                                            00520019*
                                            00530019##CAR    EQU   0
  ÿ
         CDR CELL OF A CONS                   00550019##TYPE   EQU   0
         OBJECT TYPE INDICATORS               00560019##VECDAT EQU   4
         OFFSET Oÿ
                                                00580019* EQUATES INSIDE
                                                00590019*
                                                 00600019ÿç
HAT ##PVALUE MUST BE SAME AS ##CDR SO THAT (CDR NIL) WORKS!     00610019
, WE CAN'T COME UP WITH A HACK TO MAKE (CAR NIL) WORK.)         00620019
                                                                00630019
UE EQU   4                   OFFSET OF POINTER TO VALUE CELL      006400
E  EQU   8                   OFFSET OF POINTER TO PRINT NAME      006500
T  EQU   12                  OFFSET OF POINTER TO PROPERTY LIST   006600
C  EQU  ÿ
KG   EQU   20                  OFFSET OF POINTER TO PACKAGE CELL    0068
                                                                    0069
MLEN EQU   24          ÿ
                                                                      00
USED WHEN INTERNING SYMBOLS FROM COMPILED CODE                        00
EQUATES FOR FORWARDING AND HASHING INDÿ
*
         SPACE 1
##FWWD1  EQU   0                   LOCATION OF FIRST ÿ
19##FWWD2  EQU   4                   LOCATION OF SECOND WORD
19##FWBYTE EQU   3                   LOW-ORDER BYTE OF FIRST WORD
19##FWBIT  EQU   X'01'               1 = SYMBOL INTERNED AND FORWARDÿ
0019##FWHASH EQU   X'02'               1 = HASH CODE PRESENT
0019##FWGSYM EQU   X'04'               1 = DON'T INTERN THIS SYMBOL
1019*
201ÿ
803019*
804019##ATOM   EQU   B'10000000'         1 = ATOM, 0 = CONS
805019##FIXED  EQUÿ
00806019##FLOAT  EQU   B'00100000'         1 = FLOAT (IF ATOMIC)
00807019##CCO    EQU   B'00010000'         1 = COMPILED CODE OBJECT (IF
00808019##VSS    EQU   B'00001000ÿ
  00809019##VEC    EQU   B'00000100'         1 = VECTOR (IF ATOMIC AND I
  00810019##CLOS   EQU   B'00000010'         1 = CLOSURE (FUNARG OR COMP
) 00820019##USER   EQU   B'00000001'         1 =ÿ
CT) 00830019*
    00840019* COMBINATIONS
    00850019*                                                  ÿ
      00860019##INT    EQU   ##ATOM+##FIXED      ONES = INTEGER (FIXNUM
M)    00870019##NUMBER EQU   ##FIXED+##FLOAT     NOT ZEROES = NUMERIC
      00880019##FLONUM EQU   ##ATOM+##FLOAT      ONES = FLONUM (SINGLE O
LE)     00890019##CODE   EQU   ##ATOM+##CCO        ONES = COMPILED CODE
          00900019*
          00910019* EQUATES FOR TYPES, CHECKED VIA "CLI"
          00920019*
          0ÿ
            00940019##FIXNUM EQU   ##ATOM+##FIXED                FIXNUM
)           00950019##SFLOAT EQU   ##ATOM+##FLOAT                SINGLE-
HORT)       00960019##DFLOÿ
              00970019##FUNARG EQU   ##ATOM+##VSS+##VEC+##CLOS     FUNAR
AL CLOSURE)   00980019##SUBR   EQU   ##ATOM+##CCO                  SUBR
              00990019##CLOSUR EQU   ##ATÿ
                01000019##STRING EQU   ##ATOM+##VSS                  STR
                01010019##VECTOR EQU   ##ATOM+##VSS+##VEC            VEC
                01020019##BIGNUM EQU   ##ATOM+##VSS+##FIÿ
                  01030019##STRUCT EQU   ##ATOM+##VSS+##VEC+##USER     S
                  01040019*
                  01050019* EQUATES USED IN THE READ TABLE             ÿ
                    01060019*
                    01070019* (NOTE: A CHARACTER USED AS A READER MACRO
HIGH ORDER BIT      01080019*        SET ON IN THE READTABLE, BUT THE RE
S SYNTÿ
RESTORED TO ITS       01100019*        NORMAL SYNTAX IF DESIRED.)
                      01110019*
                     ÿ
TER                     01130019##BLANK  EQU   4                   WHITE
                        01140019##LEFTP  EQU   8                   LEFT
SIS                     01150019##RIÿ
THESIS                    01160019##SEMI   EQU   16                  COM
IMITER                    01170019##PERIOD EQU   20                  DOT
 MARKER                   01180019##CONT   EQU   24ÿ
ION MARKER                  01190019##ESCAPE EQU   28                  S
CAPE                        01200019##BAR    EQU   32                  D
CAPE                        01210019##DQUOTE EQU   36             ÿ
DELIMITER                     01220019##COLON  EQU   40
 DELIMITER                    01230019##SLASH  EQU   44
L NUMBER MARKER               01240019         MEND
                               01250019{
RO                                                          00010000&NAM
RR &MSG                                                     00020000.***
*********************************************************** 00020105.ÿ
                                                            * 00020205.*
sion 1.3 (c) 1989 The Charles Stark Draper Laboratory Inc.  * 00020305.*
             All rights reserved.                           * 00020405.*
    ÿ
*************************************************************** 00020605
                                                              * 00020705
MACRO GENERATES CALÿ
RACTER STRING MESSAGE SUITABLE FOR DISPLAY VIA A TPUT MACRO     * 000209
TRUCTION, WHOSE ASSEMBLER-DEFINED LENGTH IS VALID, E.G.         * 000210
                                  ÿ
       #ZERR ZIL0000                                              * 0002
     ...                                                          * 0002
IL0000 DC  C'ZIL0000 YOU FOULED UP.'             ÿ
                                                                    * 00
********************************************************************* 00
                                                                ÿ
.* NOTE: IN GENERAL, YOU SHOULD USE THE #ERR MACRO INSTEAD OF #ZERR.  *
.* #ERR ALLOWS YOU TO INCLUDE VARIABLE INFORMATION, INCLUDING LISP    *
.* OBJECTS, IN THE MESSAGE, AND ALSO DIRECTS IT TO STANDARD OUTPUT    *

05.*
05.*********************************************************************
05.*          ÿ
0005.* NOTE: AT SOME POINT IT WOULD BE DESIRABLE TO MODIFY THIS MACRO TO
0005.* INSURE THAT REGISTER 12 POINTED TO THE BEGINNING OF THE MODULE.
0005.* TO DO THIS, A GLOBAL Sÿ
110005.*
120005.* BUT WHO CARES?  #ERR IS MORE IMPORTANT THAN #ZERR ANYHOW.
130005.*                                    ÿ
00140005.***************************************************************
00150005&NAME    LA    #1,&MSG             GET ADDRESS OF MESSAGE
00160005         LA    #0,L'&MSG           GET LENGTH OF MEÿ
  00170005         L     #15,ZLCERR          GET ADDRESS OF ZLCERR ROUTI
  00180005         BR    #15                 GO TO ERROR PROCESSING ROUT
  00190005         MEND
    00200005
                              00010000         #ZHDR
                              00020000.*********************************
***************************** 00020108.ÿ
                              * 00020208.* ZIL Version 1.3 (c) 1989 The
Stark Draper Laboratory Inc.  * 00020308.*                     All right
ed.                           * 00020408.*            ÿ
                                * 00020508.*****************************
********************************* 00020608.*
                                * 00020708.* THIS MACRO MAPS THE MODUÿ
 GENERATED IN COMPILED ZIL TOP-   * 00020808.* LEVEL PROGRAMS.  THIS INF
 IS USED BY ZILINIT TO ALLOCATE   * 00020908.* STORAGE FOR ZIL PROCESSIN
 FIX UP AND INTERN THE OBJECTS    * 00021008.* DEFINED IN THE CODE.
    ÿ
                                    * 00023008.* KEEP THIS INFO COORDINA
 THE #ZBEG MACRO AT ALL TIMES!!!    * 00024008.*
                   ÿ
*************************************** 00026008ZLHEADER DSECT ,
   MAP FIRST BYTES OF PROCEDURE         00027008*
                                  ÿ
S PROCESSED BY ZILINIT                    00029008*
                                          00030008ZLHATOMA DS    A
     ADDRESS OF ATOMS LIST                0004000ÿ
       ADDRESS OF END OF ATOMS LIST         00050008ZLHLISTA DS    A
       ADDRESS OF LISTS                     00060008ZLHLISTE DS    A
       ADDRESS OF END OF LISTS              00070008ZLHOPTA  DS ÿ
         ADDRESS OF OPTIONS LIST              00080008ZLHMODS  DS    A
         ADDRESS OF ZILMODS                   00090008         SPACE
                                              00100008ZLHOPTS  DSECT ,

           DEFAULT SIZE OF PUSH DOWN LIST       00120008ZLHCSSIZ DS    A
           DEFAULT SIZE OF CONS SPACE           00130008ZLHVSSIZ DS    A
           DEFÿ
             DEFAULT SIZE OF ACTIVE CONS SPACE    00150008         SPACE
                                                  00160008         MEND
                             Æ                      00170008

010001         #ZIF
020001.*****************************************************************
020106.ÿ
00020206.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Laboratory
00020306.*                     All rights reserved.
00020406.*            ÿ
* 00020506.*************************************************************
* 00020606         SPACE 1
  00020706***************************ÿ
*** 00020806*
  * 00020906*   FORTRAN INTERFACE CONTROL BLOCK, ALLOCATED AND FREED BY
  * 00021006*                                       ÿ
    * 00022006**********************************************************
***** 00023006         SPACE 1
      00024006ZIF      DSECT ,                                     ÿ
        00025006         SPACE 1
        00026006ZIFSA    DS    9D                  SAVE AREA FOR USE BY
INTERF  00027006         DS    A                   RESERVED
  ÿ
          00029006ZIFDCB   DCB   DDNAME=ZILFLIB,MACRF=R,DSORG=PO  ZILFLI
          00030006ZIFDCBL  EQU   *-ZIFDCB
          0004000ÿ
            00050006         SPACE 1
            00060006ZIF@SQRT DS    A                   ADDRESS OF SUBROU
T           00070006ZIF@LOG  DS ÿ
OG            00080006ZIF@EXP  DS    A                   ADDRESS OF SUBR
XP            00090006ZIF@SIN  DS    A                   ADDRESS OF SUBR
IN            00100006ZIF@COS  DS    A         ÿ
 COS            00110006ZIF@TAN  DS    A                   ADDRESS OF SU
 TAN            00120006ZIF@ASIN DS    A                   ADDRESS OF SU
 ASIN           00130006ZIF@ACOS DS    A                   ADDÿ
NE ACOS           00140006ZIF@ATAN DS    A                   ADDRESS OF
NE ATAN           00150006         SPACE 1
                  00160006ZIF@DSQR DS    A                   ADDRESS OF
TINE DSQRT          00170006ZIF@DLOG DS    A                   ADDRESS O
TINE DLOG           00180006ZIF@DEXP DS    A                   ADDRESS O
TINE DEXP           00190006ZIF@DSIN DS    A                   ADDRESS O
TINE DSIN   +
OUTINE DCOÿ
BROUTINE DTAN           00220006ZIF@DASI DS    A                   ADDRE
BROUTINE DASIN          00230006ZIF@DACO DS    A                   ADDRE
BROUTINE DACOS          0ÿ
SUBROUTINE DATAN          00250006         SPACE 1
                          00260006ZIFLEN   EQU   *-ZIF               LEN
HIS CONTROL BLOCK         00270006      ‘    SPACE 1
                            00280006         MEND
                            00290006{
                                                        00010000&SYM
FUN                                                     00020000.*******
******************************************************* 00020107.ÿ
                                                        * 00020207.* ZIL
 1.3 (c) 1989 The Charles Stark Draper Laboratory Inc.  * 00020307.*
         All rights reserved.                           * 00020407.*
ÿ
*********************************************************** 00020607
C  &RFN                                                     00020707
   (K'&FUN GT 4ÿ
ETC  '&FUN'                                                   00021107
GO   .AFTLONG                                                 00021207.T
NOP                           ÿ
 SETC  '&FUN'(1,4)                                              00021407
 ANOP                                                           00021507
 ICM   #15,15,ZLCFTCBA     GET FORTRAN INTERFÿ
   BNZ   ZFG&SYSNDX          IF IT'S NOT THERE, THEN...           000217
   L     #15,ZLCFINT         GET ADDRESS OF ZILFINT               000218
   LA    #1,ZIF@&RFN-ZIF     INDICATE LOAD REQUEST          ÿ
     #BASR #14,#15             CALL ZILFINT TO RESOLVE FORTRAN SUBS 0002
SYSNDX DS  0H                                                       0002
     L     #15,ZIF@&RFN-ZIF(#15) GET ADDRESS OF FORTRAN SUBROUTINE  0002
       MEND                                                           00

                00010002         #ZINT
                00020000.***********************************************
*************** 00020109.ÿ
                * 00020209.* ZIL Version 1.3 (c) 1989 The Charles Stark
aboratory Inc.  * 00020309.*                     All rights reserved.
                * 00020409.*            ÿ
                  * 00020509.*******************************************
******************* 00020609.*
                  * 00020709.* THIS MACRO MAPS THE MODUÿ
COMPILED AND        * 00020809.* ASSEMBLED ZIL FUNCTIONS.  THIS IS USED
AD DURING FUNCTION  * 00020909.* LOADING, AND BY ZILXSUB WHEN CONTROL IS
INTERPRETIVELY TO   * 00021009.* COMPILED CODE.                       ÿ
                      * 00022009.*
                      * 00023009.* NOTE: THE POINTERS TO ATOMS AND LISTS
ATED AT THE END OF    * 00024009.*       THIS SECTION, BUT ARE NOT MAPPE
 THE ÿ
E LENGTH OF THE DATA    * 00026009.*       THAT IS MAPPED HERE, WHICH MA
 IN FUTURE REVISIONS.   * 00027009.*
                    ÿ
 MACRO AT ALL TIMES!!!    * 00029009.*
                          * 00030009.***********************************
*************************** 0004000ÿ
ST BYTES OF PROCEDURE         00050009*
                              00060009* POINTERS TO EXTERNAL ENTITIES PR
BY INTERPRETER & LOADER       00070009*           ÿ
                                00080009ZINFLAGS DS    0A
S USED BY INTERPRETER           00090009ZINFLAG1 DS    XL1
 USED BY INTERPRETER            00100009ZINGSUBR EQU   B'10000000ÿ
= SUBRS ARE PRESENT               00110009ZINGPROG EQU   B'01000000'
= THIS IS PROGRAM, NOT FUNCTION   00120009*        EQU   B'00100000'
SERVED                            00130009*        EQU   B'00010000'
ÿ
RESERVED                            00150009*        EQU   B'00000100'
RESERVED                            00160009*        EQU   B'00000010'
RESERVED       ÿ
  RESERVED                            00180009ZINFLAG2 DS    XL1
 FLAGS USED BY CODE EXECUTOR          00190009ZINGREST EQU   B'10000000'
  1 = A &REST ARG IS EXPECTED +
    1 = THIS IS A LEXPR     ÿ
      RESERVED                            00220009*        EQU   B'00010
      RESERVED                            00230009*        EQU   B'00001
      RESERVED                            0ÿ
        RESERVED                            00250009*        EQU   B'000
        RESERVED                            00260009*        EQU   B'000
        RESERVED                            00270009ZINMINÿ
         MINIMUM # OF ARGUMENTS FOR FUNCTION  00280009ZINMAXAR DS    YL1
         MAXIMUM # OF ARGUMENTS FOR FUNCTION  00290009ZINSUBRA DS    A
         ADDRESS OF SUBRS LIST                00300009ZINSUBRE DS    A
           ADDRESS OF END OF SUBRS LIST         00310009         SPACE
                                                00320009         MEND
                                                00330009{
©
0000         #ZMOD
0000.*******************************************************************
0104.ÿ
020204.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Laboratory In
020304.*                     All rights reserved.
020404.*            ÿ
00020504.***************************************************************
00020604.*
00020704.* This macro maps the headÿ
* 00020804.*
* 00020904.*************************************************************
* 00021004.*                                      ÿ
  * 00022004.* Change activity:
  * 00023004.*
  * 00024004.* 11/08/88 - Added support for enhanced ZIL reader. ÿ
    * 00025004.*
    * 00026004.*********************************************************
***** 00027004ZMOD     DSECT
ÿ
        00029004ZMODETB  DS    A                   Address of end of tab
        00030004*
        0004000ÿ
llow.     00050004*
          00060004Z@ZEVINI DS    A                   Pointer to address
IT        00070004Z@ZDPRIN DS ÿ
RINT        00080004Z@ZDREAD DS    A                   Pointer to addres
EAD         00090004         SPACE 1
            00100004         MEND             
              00110004
                                        00010000         #ZMODES
                                        00020000.***********************
*************************************** 00020104.ÿ
                                        * 00020204.* ZIL Version 1.3 (c)
e Charles Stark Draper Laboratory Inc.  * 00020304.*
hts reserved.                           * 00020404.*            ÿ
                                          * 00020504.*******************
******************************************* 00020604.*
                                          * 00020704.*

                                            * 00020904.*****************
********************************************* 00021004*
              ÿ
ES                                              00023004*
                                                00024004##MODEB0 EQU   0
           OFFSET OF FILE MODÿ
000'          RESERVED                            00026004*        EQU
000'          RESERVED                            00027004*        EQU
000'          RESERVED                      ÿ
10000'          RESERVED                            00029004*        EQU
01000'          RESERVED                            00030004*        EQU
00100'          RESERVED                            0004000ÿ
0000010'          RESERVED                            00050004*        E
0000001'          RESERVED                            00060004##MODEB1 E
                 OFFSET OF FILE MODE BYTE 1           00070004*        E
'10000000'          RESERVED                            00080004*
'01000000'          RESERVED                            00090004*
'00100000'          RESERVED                            00100004*
'00010000ÿ
 B'00001000'          RESERVED                            00120004*
 B'00000100'          RESERVED                            00130004*
 B'00000010'          REÿ
   B'00000001'          RESERVED                            00150004##MO
   2                   OFFSET OF FILE MODE BYTE 2           00160004*
   B'10000000'          RESERVED       ÿ
QU   B'01000000'          RESERVED                            00180004*
QU   B'00100000'          RESERVED                            00190004*
QU   B'00010000'          RESERVED                    +
 EQU   B'00001000'          RESERVED                ÿ
   EQU   B'00000100'          RESERVED                            002200
   EQU   B'00000010'          RESERVED                            002300
   EQU   B'00000001'          RESERVED                            0ÿ
DEB3 EQU   3                   OFFSET OF FILE MODE BYTE 3           0025
     EQU   B'10000000'          RESERVED                            0026
     EQU   B'01000000'          RESERVED                            0027
  ÿ
       EQU   B'00010000'          RESERVED                            00
       EQU   B'00001000'          RESERVED                            00
                 ÿ
##PROBE  EQU   B'00000100'         1 = PROBE
##APPEND EQU   B'00000010'         1 = APPEND
##OUTPUT EQU   B'00000001'      K    1 = OUTPUT, 0 = INPUT
04*
04         MEND
04{
                      00010000&SYM     #ZPDS &SIZE
                      00020000.*****************************************
********************* 00020105.ÿ
                      * 00020205.* ZIL Version 1.3 (c) 1989 The Charles
aper Laboratory Inc.  * 00020305.*                     All rights reserv
                      * 00020405.*            ÿ
                        * 00020505.*************************************
************************* 00020605.*
                        * 00020705.* THIS MACRO RESERVES STACÿ
                          * 00020805.*
                          * 00020905.* THE OPERAND IS THE NUMBER OF BYTE
ORDS) OF MAXIMUM          * 00021005.* PUSH DOWN STACK SPACE REQUIRED IN
UNCTION.                    * 00022005.* AT THE LEAST THIS WILL BE THE N
 ARGS PASSED TIMES 4 PLUS   * 00023005.* 12 (TO SAVE 3 REGISTERS ON ENTR
THE CODE MAY USE MORE,      * 00024005.* ESPECIALLY IF IT CALLS OTHER RO
           ÿ
                              * 00026005.* AN OPERAND SPECIFICATION OF (
 THAT A POINTER TO THE        * 00027005.* MAXIMUM STACK SLOT IS ALREADY
STER 0.  OTHERWISE THIS   ÿ
UE IN REGISTER 0.               * 00029005.*
                                * 00030005.* THE BRANCH VIA REG 13 CAUSE
R BRANCH TO THE TRUE INTERFACE  * 0004000ÿ
ILPDSO, WHICH WILL DISPLAY A      * 00050005.* "PUSH DOWN STACK OVERFLOW
E AND SIGNAL AN ERROR.            * 00060005.*
                                  * 00070005.***********ÿ
************************************* 00080005         AIF   ('&SIZE' EQ
SZINREG                               00090005         LA    #0,&SIZE.(,
 GET MAXIMUM STACK SIZE REQUIRED      00100005.SZINREG ANOP            ÿ
                                        00110005         CR    #0,#8
   IF END OF PUSH DOWN LIST EXCEEDED    00120005         BNLR  #13
   THEN INVOKE STACK OVERFLOW ROUTINE   00130005         MEND
      Î                                   00140005
     MACRO                                                          0001
     #ZRET                                                          0002
******************************************************************* 0002
                                                                    * 00
 ZIL Version 1.3 (c) 1989 The Charles Stark Draper Laboratory Inc.  * 00
                     All rights reserved.                           * 00
            ÿ
.**********************************************************************
.*                                                                    *
.* THIS MACRO LOADS REGISTEÿ
05.*
05.* NON-RECURSIVE FUNCTIONS MAY NOT NEED TO DO THIS (SEE CONS).
05.*                                      ÿ
2005.*******************************************************************
3005         GBLA  &ZSVOF1,&ZSVOF2
4005&SYM     LR    1,11                RESTORE STACK POINÿ
025005         LM    11,12,&ZSVOF1.(1)   RESTORE BASE REGISTER
026005         L     14,&ZSVOF2.(,1)     RESTORE RETURN REGISTER
027005         BR    14                  RETURN TO CALLER
00028005         MEND
00029005
                          00010000&SYM     #ZSAV &ARGS=
                          00020003.*************************************
************************* 00020105.ÿ
                          * 00020205.* ZIL Version 1.3 (c) 1989 The Char
k Draper Laboratory Inc.  * 00020305.*                     All rights re
                          * 00020405.*            ÿ
                            * 00020505.*********************************
***************************** 00020605.*
                            * 00020705.* THIS MACRO SAVES REGISTEÿ
CK.  SEE #ZRET.               * 00020805.* THE NUMBER OF ARGUMENTS MUST
FIED CORRECTLY.               * 00020905.*
                              * 00021005.* REGISTER 12 IS MADE TO BE THE
ÿ
 ARGUMENTS MAY BE LOADED FROM   * 00023005.* 0, 4, ETC. OFF REGISTER 11.
                                * 00024005.*
               ÿ
EED TO USE THIS (SEE CONS).       * 00026005.* IN THAT CASE REGISTER 15
ASE REGISTER AND THE CURRENT      * 00027005.* STACK POINTER IS REGISTER
                              ÿ
                                    * 00029005.*************************
************************************* 00030005.*
                                    * 0003010ÿ
 HLASM.                               * 00030206.*
                                      * 00030306.***********************
*************************************** 00032006         GBLÿ
,&ZSVARGS                                 00040005         LCLA  &ZARGS
                                          00050005         AIF   ('&ARGS
.NOARGS                                   00060005&ZARGS   SETA  &ARGS
                                            00070005         AIF   (&ZSV
&ZARGS).ARGSOK                              00080005         MNOTE 4,'#Z
 VALUE DOES NOT AGREE WITH #ZBEG ARG SPEC'  00090005         AGO   .ARGS
          ÿ
                                              00110005&ZARGS   SETA  &ZS
                                              00120005.ARGSOK  ANOP
                         ÿ
                                                00140005&ZSVOF2  SETA  &
                                                00150005&SYM     ST    1
2.(,1)     SAVE RETURN REGISTER         +
ZSVOF1.(1)   SAVE BASE AND STACK REGISÿ
               SET UP BASE REGISTER                 00180005         DRO
                                                    00181006         USI
CT,12                                               0z 0190005         L
1                SET UP STACK POINTER                 00200005         M
                                                      00220005{

  00010015         #ZSFT
  00020015.*************************************************************
* 00020122.ÿ
  * 00020222.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Laborat
  * 00020322.*                     All rights reserved.
  * 00020422.*            ÿ
    * 00020522.*********************************************************
***** 00020622.*
    * 00020722.* This macro defines the sÿ
rom   * 00020822.* register 8 (which doubles as the address of T).
      * 00020922.*
      * 00021022.* Specify "USING #SFTD,#8", or use the ÿ
        * 00022022.*
        * 00023022.*****************************************************
********* 00024022         SPACE 1                                     ÿ
            00025022*
            00026022* SMALL FIXNUM TABLE DSECT
            00027022*
      ÿ
 "T" register 00029022         SPACE 1
              00030022         DS    CL(##SYMLEN)        Reserved for th
 T            0004002ÿ
part of table)  00050022#SFT     DS    256D                The small fix
e               00060022#SFTEND  EQU   *                   End of the sm
um table        00070022         SPAÿ
                  00080022.*
                  00090022.* Some commonly used fixnum objects and value
uated here.       00100022.*                       ÿ
                    00110022#SFTM1   EQU   #SFT-1*8            Fixnum -1
                    00120022#SFT0    EQU   #SFT+0*8            Fixnum 0
                    00130022#SFT1    EQU   #SFT+1*8            Fixÿ
                      00131022#SFT255  EQU   #SFT+255*8          Fixnum
                      00132022         SPACE 1
                      00133022#SFTCR   EQU   #SFT+X'0D'*8        Fixnum
 ÿ
                        00135022#SFTSP   EQU   #SFT+X'40'*8        Fixnu
                        00136022         SPACE 1
                +
              ÿ
0                           00139022#SFW1    EQU   #SFT+1*8+4          F
1                           00140022#SFW2    EQU   #SFT+2*8+4          F
2                           0ÿ
d 3                           00160022#SFW4    EQU   #SFT+4*8+4
d 4                           00161022#SFW255  EQU   #SFT+255*8+4
d 255                         00162022      ÿ
                                00163022#SFWCR   EQU   #SFTCR+4
ord #\CR                        00164022#SFWNL   EQU   #SFTNL+4
ord #\NL                        00165022#SFWSP   EQU   #SFTÿ
lword #\SP                        00166022         SPACE 1
                                  00167022#SHWM1   EQU   #SFT-1*8+6
fword -1                          00168022#SHW0    EQU   #SFT+0*8+6
alfword 0                           00169022#SHW1    EQU   #SFT+1*8+6
alfword 1                           00170022#SHW255  EQU   #SFT+255*8+6
alfword 255                         00180022         EJECT
         ã                            00190022         MEND
                                      00200022{
   MACRO                                                          000100
   #ZSUB                                                          000200
***************************************************************** 000201
                                                                  * 0002
IL Version 1.3 (c) 1989 The Charles Stark Draper Laboratory Inc.  * 0002
                   All rights reserved.                           * 0002
          ÿ
********************************************************************* 00
                                                                    * 00
 THIS MACRO IS USED BY ZIÿ
.* EXTERNAL SUBROUTINES WHOSE ADDRESSES ARE STORED IN THE ZIL COMMON  *
.* AREA.  IF THE CALLING SOURCE PROGRAM IS ZILSUBS, THIS MACRO        *
.* GENERATES THE ACTUAL VCONS; ELSE IT Jÿ
15.*
15.*********************************************************************
15.*                                                   ÿ
5015.* Change activity:
6015.*
7015.* 06/01/88 - Added ZILVALS routine.                              ÿ
028015.*
029015.*****************************************************************
030015ZSASUBS  DS    0A
04001ÿ
00050015ZSACONS  DS    A                   CONS PLUS GARBAGE COLLECTOR
00060015ZSAFGETI DS    A                   INPUT FILE BLOCK ACCESSOR
00070015ZSAFGETO DS ÿ
  00080015ZSAPDSO  DS    A                   STACK OVERFLOW ERROR ROUTIN
  00090015ZSAERR   DS    A                   GENERAL ERROR ROUTINE
  00100015ZSATHROW DS    A         ÿ
    00110015ZSATPUT  DS    A                   TPUT ROUTINE
    00120015ZSABIG   DS    A                   BIGNUM ALLOCATION ROUTINE
    00130015ZSAINTN  DS    A                   SYMÿ
      00140015ZSAABLD  DS    A                   ATOM BUILDING ROUTINE
      00150015ZSAADMP  DS    A                   ATOM DUMPING ROUTINE
      00160015ZSAVSS   DS    A                   VECTOR/STRING SPÿ
        00170015ZSAGETC  DS    A                   CHARACTER INPUT ROUTI
        00180015ZSAPRIN  DS    A                   PRINT ROUTINE
        00190015ZSATERP  DS    A                   TERPRI ROUTINE
+
            00210015ZSAKERR  DS    A                   &KEY KEYWORD ERRO
NG ROUTINE  00220015ZSACVBF  DS    A                   BIGNUM-TO-FLOAT C
N ROUTINE   00230015ZSASINT  DS    A                   COMPILED OBJECT I
ING ROUTINE 0ÿ
G ROUTINE     00250015ZSAFBND  DS    A                   LEXICAL VARIABL
G ROUTINE     00260015ZSAMDF   DS    A                   DOUBLE FLOAT BU
OUTINE        00270015ZSAVALÿ
ing routine     00280015         MEXIT
                00290015.SUBS    ANOP
                00300015ZSACONS  DC    V(ZIÿ
OLLECTOR          00310015ZSAFGETI DC    V(ZILFGETI)         INPUT FILE
CESSOR            00320015ZSAFGETO DC    V(ZILFGETO)         OUTPUT FILE
CCESSOR           00330015ZSAPDSO  DC    V(ZILPDSO)       ÿ
ROR ROUTINE         00340015ZSAERR   DC    V(ZILERR)           GENERAL E
TINE                00350015ZSATHROW DC    V(ZILTHROW)         THROW ROU
                    00360015ZSATPUT  DC    V(ZILTPUT)          TPUT ROUT
                      00370015ZSABIG   DC    V(ZILBIG)           BIGNUM
ON ROUTINE            00380015ZSAINTN  DC    V(ZILINTN)          SYMBOL
NT ROUTINE            00390015ZSAABLD  DC    V(ZILABLD)          ATOM BU
OUTINE  ÿ
ROUTINE                 00410015ZSAVSS   DC    V(ZILVSS)           VECTO
 SPACE ALLOCATOR        00420015ZSAGETC  DC    V(ZILGETC)          CHARA
UT ROUTINE             ÿ
NE                        00440015ZSATERP  DC    V(ZILTERP)          TER
INE                       00450015ZSAFINT  DC    V(ZILFINT)          FOR
ERFACE ROUTINE            00460015ZSAKÿ
ORD ERROR HANDLING ROUTINE  00470015ZSACVBF  DC    V(ZILCVBF)          B
-FLOAT CONVERSION ROUTINE   00480015ZSASINT  DC    V(ZILSINT)          C
OBJECT INITIALIZING ROUTINE 00490015ZSASBND  DC    V(ÿ
 VARIABLE BINDING ROUTINE     00500015ZSAFBND  DC    V(ZILFBND)
 VARIABLE BINDING ROUTINE     00510015ZSAMDF   DC    V(ZILMDF)
FLOAT BUILDING ROUTINE        00520015ZSAVALS  DC    V(ZILVALS)     M
ple value returning routine     00521015         END
                                00522015         MEND
                                00523015{
RO                                                          00010000
YS                                                          00020000.***
*********************************************************** 00020108.ÿ
                                                            * 00020208.*
sion 1.3 (c) 1989 The Charles Stark Draper Laboratory Inc.  * 00020308.*
             All rights reserved.                           * 00020408.*
    ÿ
*************************************************************** 00020608
                                                              * 00020708
 macro establishes ÿ
sembling ZIL code.  It interrogates the value of the SYSPARM    * 000209
rameter and determines the operating system for which code is   * 000210
ing assembled.  Failure to provideÿ
will result in the failure of the assembly.                       * 0002
                                                                  * 0002
*************************************************ÿ
                                                                      00
       LCLC  &ZPARM                                                   00
       GBLB  &ZSYSMAC                                           ÿ
         GBLB  &ZILMVS,&ZIL370,&ZILXA,&ZILVF,&ZILCMS,&ZILTSO,&ZILVPS
         GBLC  &SYSSPLV              The MVS/XA "SPLEVEL" global
.*

08&ZSYSMAC SETB  1
08&SYSSPLV SETC  '1'                   Default SPLEVEL
08&ZPARM   SETÿ
0008.*
0008         AIF   ('&ZPARM' EQ '').DEFAULT
0008         AIF   ('&ZPARM' ÿ
110008         AIF   ('&ZPARM' EQ 'VF').VF
120008         AIF   ('&ZPARM' EQ '370').S370
130008         AIF   ('&ZPARM' EQ 'MVS').S37ÿ
00140008         AIF   ('&ZPARM' EQ 'XA').XA
00150008         AIF   ('&ZPARM' EQ 'VM').CMS
00160008         AIF   ('&ZPARM' EQ 'VMXA').VMXA           ÿ
  00170008         AIF   ('&ZPARM' EQ 'CMS').CMS
  00180008         AIF   ('&ZPARM' EQ 'VPS').VPS
  00190008         AGO   .BADPARM
    00200008.DEFAULT ANOP  ,                   No SYSPARM specified
      00210008         MNOTE 0,'No SYSPARM value specified, assuming MVS
 VF.' 00220008         AGO   .VF
      00230008.VF      ANOP  ,                   MVS/XA with vector faci
      0ÿ
        00250008&ZILTSO  SETB  1
        00260008&ZIL370  SETB  0
        00270008&ZILXAÿ
          00280008&ZILVF   SETB  1
          00290008&ZILCMS  SETB  0
          00300008&ZILVPS  SETB  0   ÿ
            00310008         AGO   .DONE
            00320008.S370    ANOP  ,                   MVS/370
            00330008&ZILMVS  SETB  1                ÿ
              00340008&ZILTSO  SETB  1
              00350008&ZIL370  SETB  1
              00360008&ZILXA   SETB  0                             ÿ
                00370008&ZILVF   SETB  0
                00380008&ZILCMS  SETB  0
                00390008&ZILVPS  SETB  0
  ÿ
                  00410008.XA      ANOP  ,                   MVS/XA, no
acility           00420008         MNOTE 0,'Warning, SYSPARM(XA) means n
 facility.'      ÿ
                    00440008&ZILTSO  SETB  1
                    00450008&ZIL370  SETB  0
                    00460008&ZILÿ
                      00470008&ZILVF   SETB  0
                      00480008&ZILCMS  SETB  0
                      00490008&ZILVPS  SETB  0 ÿ
                        00500008         AGO   .DONE
                        00510008.VMXA    ANOP  ,                   VM/XA
                        00520008&ZILMVS  SETB  0              ÿ
                          00530008&ZILTSO  SETB  0
                          00540008&ZIL370  SETB  0
                          00550008&ZILXA   SETB  1
                            00560008&ZILVF   SETB  0
                            00570008&ZILCMS  SETB  1
                            00580008&ZILVPS  SETB  0
                             00590008ÿç
                                            00600008.CMS     ANOP  ,
       VM/CMS                               00610008&ZILMVS  SETB  0
                                            00620008&ÿ
                                              00630008&ZIL370  SETB  1
                                              00640008&ZILXA   SETB  0
                                              00650008&ZILVF   SETB ÿ
                                                00660008&ZILCMS  SETB  1
                                                00670008&ZILVPS  SETB  0
                                                00680008         AGO   .
   ÿ
             VPS                                  00700008&ZILMVS  SETB
             MVS is simulated by VPS              00710008&ZILTSO  SETB
             but Tÿ
                                                    00730008&ZILXA   SET
                                                    00740008.*ILVF   SET
               VPS has the vectorÿ
                 but we're not going to use it now    00760008&ZILCMS  S
                                                      00770008&ZILVPS  S
                                                ÿ
DONE                                                    00790008.BADPARM
                                                        00800008
6,'Unknown SYSPARM value specified: &SYSPARM'           0081000ÿ
                                                          00820008.DONE
                                                          00830008
 (NOT &ZILXA).NOSPLVL                                     00840008&SYSSP
C  '2'                 SPLEVEL SET=2                        00850008.NOS
P                                                           00860008.MEN
D                                                           00870008
ÿç
      00010000         #ZUSING ,
      00020000.*********************************************************
***** 00020102.ÿ
      * 00020202.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Lab
Inc.  * 00020302.*                     All rights reserved.
      * 00020402.*            ÿ
        * 00020502.*****************************************************
********* 00020602         USING ZLCOMMON,#13
          00020702         USING #SFTD,#8    l
            00020802         MEND
            00020902
************************************  00010004*
                                   *  00020004* ZIL Version 1.3 (c) 1989
rles Stark Draper Laboratory Inc.  *  00020104*ÿ
 reserved.                           *  00020204*
                                     *  00020304************************
**************************************  00020404FIX2FLO  DS   ÿ
     FIXED TO FLOAT CONVERSION SUBROUTINE 00020504*
                                          00020604* COPIED FROM COPY MEM
2FLO"                                     00020704*
                                            00020804* SUBROUTINE TO CONV
D TO FLOAT.                                 00020904* ON ENTRY GR0 CONTA
VALUE OF THE INTEGER TO BE CONVERTED.       00021004* ON RETURN FPR0 CON
E CONVERTED ÿ
SS.  THIS ROUTINE MUST NOT ALTER GR15.        00022004*
                                              00023004         SPACE 3
                           ÿ
           GET FIXNUM VALUE                     00025004         LA    #
           PREPARE CHARACTERISTIC               00026004         BNM   F
           IF VALUE IS NEGATIVE, THEN...  ÿ
              USE ABSOLUTE VALUE                  00028004         LA
'             SET SIGN IN CHARACTERISTIC          00029004FX2FLNN  DS
                                                  0003000ÿ
               GET CHARACTERISTIC INTO POSITION     00040004         SDR
               MAKE A NORMALIZED ZERO               00050004         STM
,ZLCDBL+0      STORE CHARACTERISTIC AND MANTISSA    00060004         AD
LCDBL            ADD UNNORMALIZED FLONUM, NORMALIZING 00070004         B
                 RETURN                               00080004

00020100.*
00020200.* ZIL Version 1.3 (c) 1989 The Charles Stark Draper Laboratory
00020300.[ *                     All rights reserved.
* 00020400.*
* 00020500
