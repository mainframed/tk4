//ED115DM6 JOB C4SYS000,MSGCLASS=X,CLASS=J,REGION=4M,NOTIFY=C4SYSDM
//*
//*MAIN PROC=C4
// EXEC EDMXGSAS,OPTIONS='SOURCE'
//SMF    DD DISP=SHR,DSN=C4MS.OSTAR
//*MF    DD DISP=SHR,DSN=C4MS.OSTAR.SAMPLE
//SYSIN DD *
  DATA T26 (KEEP =
           SMFXXFLG          SMFNO             TIMEOUT
           SYSTEM            HSRSSI            HSRSTY
           HSRHVR            HSRJBN            HSRRST
      HU26ITIM           HU26SUPV
      HU26CHPT           HU26COMM
      HU26FILE           HU26APPL
      HU26REDO           HU26OPER
      HU26CONS           HU26TIMR
      TOTAL              CPUPERC
  )
  ;
  RETAIN N 0;
  INFILE SMF MISSOVER;
  N+1;
  *F N > 1000 THEN STOP;
  INPUT @1 SMFXXFLG PIB1.    SMFNO    PIB1.    TIMEOUT SMFSTAMP8.
           SYSTEM $CHAR4.    HSRSSI   $CHAR4.  HSRSTY  PIB2.
           HSRHVR PIB2.      HSRJBN   $CHAR8.  HSRRST  SMFSTAMP8.
@  ;
*;
IF HSRSTY = 26 THEN DO;
INPUT HU26ICHP PIB2.     HU26ITIM PIB4.
      HU26SEND PIB4.     HU26RECV PIB4.
      HU26LOGN PIB4.     HU26LOGF PIB4.
      HU26MAXU PIB4.     HU26MAXC PIB4.
      HU26POOL PIB4.     HU26GETB PIB4.
      HU26FREB PIB4.     HU26SNAP PIB4.
      HU26SENW PIB4.     HU26SUPV PIB4.
      HU26COMM PIB4.     HU26CHPT PIB4.
      HU26FILE PIB4.     HU26APPL PIB4.
      HU26INDT PIB4.     HU26PH0  PIB4.
      HU26PH1  PIB4.     HU26PH2  PIB4.
      HU26EXTN PIB4.     HU26OPER PIB4.
      HU26EXP  PIB4.     HU26IMP  PIB4.
      HU26RULE PIB4.     HU26GET  PIB4.
      HU26PUT  PIB4.     HU26GET4 PIB4.
      HU26FRE4 PIB4.     HU26CFLU PIB4.
      HU26QRTY PIB2.     HU26QFAL PIB2.
      HU26GETF PIB4.     HU26PUTF PIB4.
      HU26SYNC PIB4.     HU26TAMU PIB4.
      HU26LOCK PIB4.     HU26UNLK PIB4.
      HU26REPL PIB4.     HU26INS  PIB4.
      HU26DEL  PIB4.     HU26DEFL PIB4.
      HU26DEFB PIB4.     HU26RRUL PIB4.
      HU26READ PIB4.     HU26WRIT PIB4.
      HU26REDO PIB4.     HU26SMF  PIB4.
      HU26JRNL PIB4.     HU26EXCP PIB4.
      HU26REXC PIB4.     HU26SMFC PIB4.
      HU26SYNA PIB4.     HU26C01  PIB4.
      HU26C02  PIB4.     HU26DUPL PIB4.
      HU26E01  PIB4.     HU26E02  PIB4.
      HU26E03  PIB4.     HU26TIMR PIB4.
      HU26CTAB PIB4.     HU26DDLK PIB4.
      HU26BLDC PIB4.     HU26BLDI PIB4.
      HU26BLDS PIB4.     HU26IQER PIB4.
      HU26LINS PIB4.     HU26LDEL PIB4.
      HU26LREP PIB4.     HU26WTOS PIB4.
      HU26GTF  PIB4.     HU26GTFF PIB4.
      HU26GETX PIB4.     HU26FREX PIB4.
      HU26TCBT PIB4.     HU26SRBT PIB4.
      HU26IO   PIB4.     HU26SUPV PIB4.3
      HU26CHPT PIB4.3    HU26COMM PIB4.3
      HU26FILE PIB4.3    HU26APPL PIB4.3
      HU26REDO PIB4.3    HU26OPER PIB4.3
      HU26CONS PIB4.3    HU26TIMR PIB4.3
      @;
      IF HU26SUPV = . THEN HU26SUPV = 0;
      IF HU26CHPT = . THEN HU26CHPT = 0;
      IF HU26COMM = . THEN HU26COMM = 0;
      IF HU26FILE = . THEN HU26FILE = 0;
      IF HU26APPL = . THEN HU26APPL = 0;
      IF HU26REDO = . THEN HU26REDO = 0;
      IF HU26OPER = . THEN HU26OPER = 0;
      IF HU26CONS = . THEN HU26CONS = 0;
      IF HU26TIMR = . THEN HU26TIMR = 0;
      TOTAL =
                         HU26SUPV +
      HU26CHPT +         HU26COMM +
      HU26FILE +         HU26APPL +
      HU26REDO +         HU26OPER +
      HU26CONS +         HU26TIMR
      ;
      HU26ITIM = HU26ITIM / 100;
      CPUPERC =  100 * TOTAL / HU26ITIM;
      OUTPUT T26;
END; * IF TYPE 26;
RETURN;
PROC PRINT DATA=T26;
FORMAT TIMEOUT DATETIME. ;
FORMAT HSRRST  DATETIME. ;
FORMAT HU26SUPV
      HU26CHPT           HU26COMM
      HU26FILE           HU26APPL
      HU26REDO           HU26OPER
      HU26CONS           HU26TIMR
      TOTAL
      TIME. ;
FORMAT HSRHVR HEX4. ;
