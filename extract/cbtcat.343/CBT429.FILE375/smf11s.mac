//ED115DM1 JOB C4SYS000,MSGCLASS=X,CLASS=J,REGION=4M,NOTIFY=C4SYSDM
//*
//*MAIN PROC=C4
// EXEC EDMXGSAS,OPTIONS='SOURCE LINESIZE=120'
//*MF    DD DISP=SHR,DSN=C4MS.OSTAR
//SMF    DD DISP=SHR,DSN=C4MS.OSTAR.SAMPLE
//SYSIN DD *
  DATA T11 (KEEP =   HU11USED HU11FREE
                             HSRJBN
      HU11VOL            HU11PAGE
      HU11GET            HU11PUT
                         HU11DSN TOTAL HI
  )
  ;
  RETAIN N 0;
  INFILE SMF MISSOVER;
  N+1;
  *F N > 1000 THEN STOP;
  INPUT @1 SMFXXFLG PIB1.    SMFNO    PIB1.    TIMEOUT SMFSTAMP8.
           SYSTEM $CHAR4.    HSRSSI   $CHAR4.  HSRSTY  PIB2.
           HSRHVR PIB2.      HSRJBN   $CHAR8.  HSRRST  SMFSTAMP8.
@  ;
*;
IF HSRSTY = 11 THEN DO;
INPUT HU11VOL  $CHAR6.   HU11PAGE PIB4.
      HU11USED PIB4.     HU11FREE PIB4.
      HU11GET  PIB4.     HU11PUT  PIB4.
      HU11MAXC PIB4.     HU11ERR  PIB4.
      HU11DATG PIB4.     HU11DATP PIB4.
      HU11XG   PIB4.     HU11XP   PIB4.
      HU11OTHG PIB4.     HU11OTHP PIB4.
      HU11EXCP PIB4.     RES1     PIB2.
      HU11DLEN PIB1.
      @;
 INPUT HU11DSN $VARYING44. HU11DLEN  @;
 C4DATE = DATEPART(TIMEOUT);
 C4TIME = TIMEPART(TIMEOUT);
 C4TIME = INT((C4TIME+100) / 1800) * 1800;
 IF C4DATE = '07OCT98'D;
 IF DATEPART(HSRRST) = '06OCT98'D;
 TOTAL = HU11GET + HU11PUT ;
 HI = TOTAL / HU11USED ;
      OUTPUT T11;
END; * IF TYPE 11;
RETURN;
PROC SORT DATA=T11; BY HU11VOL;
PROC PRINT; BY HU11VOL; SUM TOTAL;
FORMAT C4DATE DATE.;
FORMAT C4TIME TIME.;
FORMAT TIMEOUT DATETIME. ;
FORMAT HSRRST  DATETIME. ;
PROC SORT DATA=T11; BY DESCENDING HI;
PROC PRINT;
FORMAT HI 4.2;
