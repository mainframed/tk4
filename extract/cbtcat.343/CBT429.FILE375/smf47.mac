//ED115DM7 JOB C4SYS000,MSGCLASS=X,CLASS=J,REGION=4M,NOTIFY=C4SYSDM
//*
//*MAIN PROC=C4
// EXEC EDMXGSAS,OPTIONS='SOURCE'
//SMF    DD DISP=SHR,DSN=C4MS.OSTAR
//*MF    DD DISP=SHR,DSN=C4MS.OSTAR.SAMPLE
//SYSIN DD *
  DATA T47 (KEEP =
           SMFXXFLG          SMFNO             TIMEOUT
           SYSTEM            HSRSSI            HSRSTY
           HSRHVR            HSRJBN            HSRRST
      HU47UID            HU47XOFF
      HU47XSLE           HU47XSNO
      HU47ON
      HU47DR             HU47IND2
      HU47MODE           HU47RIND
      HU47INTH           HU47INTV
      HU47QRY            HU47CMIT
      HU47RULE           HU47GET
      HU47PUT            HU47READ
      HU47SRB            HU47FCPU
      HU47MCPU           HU47QCPU
      HU47TCPU           HU47WRIT
      HU47UNU            HU47RESP
      HU47APL            HU47UNIQ
      HU47SSNH           HU47TERM
  )
  ;
  RETAIN N 0;
  INFILE SMF MISSOVER;
  N+1;
  *F N > 1000 THEN STOP;
  INPUT @1 SMFXXFLG PIB1.    SMFNO    PIB1.    TIMEOUT SMFSTAMP8.
           SYSTEM $CHAR4.    HSRSSI   $CHAR4.  HSRSTY  PIB2.
           HSRHVR PIB2.      HSRJBN   $CHAR8.  HSRRST  SMFSTAMP8.
@  ;
*;
IF HSRSTY = 47 THEN DO;
INPUT HU47UID  $CHAR8.   HU47XOFF PIB4.
      HU47XSLE PIB2.     HU47XSNO PIB2.
      HU47ON   SMFSTAMP8.
      HU47DR   PIB1.     HU47IND2 PIB1.
      HU47MODE PIB1.     HU47RIND PIB1.
      HU47INTH PIB2.     HU47INTV PIB4.2
      HU47QRY  PIB4.     HU47CMIT PIB4.
      HU47RULE PIB4.     HU47GET  PIB4.
      HU47PUT  PIB4.     HU47READ PIB4.
      HU47SRB  PIB4.3    HU47FCPU PIB4.3
      HU47MCPU PIB4.3    HU47QCPU PIB4.3
      HU47TCPU PIB4.3    HU47WRIT PIB4.
      HU47UNU  PIB4.     HU47RESP PIB4.3
      HU47APL  $CHAR8.   HU47UNIQ PIB4.
      HU47SSNH PIB4.     HU47TERM $CHAR8.
      @;
      OUTPUT T47;
END; * IF TYPE 47;
RETURN;
PROC SORT DATA=T47; BY DESCENDING HU47TCPU;
PROC PRINT DATA=T47;
FORMAT TIMEOUT DATETIME. ;
FORMAT HSRRST  DATETIME. ;
FORMAT HU47ON  DATETIME. ;
FORMAT HU47SRB HU47FCPU HU47MCPU HU47QCPU HU47TCPU HU47RESP TIME.;
FORMAT HU47INTV TIME.;
PROC CORR NOSIMPLE NOPROB ; VAR HU47RESP;
      WITH
      HU47DR             HU47IND2
      HU47MODE           HU47RIND
      HU47INTH           HU47INTV
      HU47QRY            HU47CMIT
      HU47RULE           HU47GET
      HU47PUT            HU47READ
      HU47SRB            HU47FCPU
      HU47MCPU           HU47QCPU
      HU47TCPU           HU47WRIT
      HU47UNU            HU47RESP
                         HU47UNIQ
      HU47SSNH
      ;
TITLE 'CORRELATION STATISTICS - RESPONSE';
PROC CORR NOSIMPLE NOPROB ; VAR HU47TCPU;
      WITH
      HU47DR             HU47IND2
      HU47MODE           HU47RIND
      HU47INTH           HU47INTV
      HU47QRY            HU47CMIT
      HU47RULE           HU47GET
      HU47PUT            HU47READ
      HU47SRB            HU47FCPU
      HU47MCPU           HU47QCPU
      HU47TCPU           HU47WRIT
      HU47UNU            HU47RESP
                         HU47UNIQ
      HU47SSNH
      ;
TITLE 'CORRELATION STATISTICS - TCPU    ';
