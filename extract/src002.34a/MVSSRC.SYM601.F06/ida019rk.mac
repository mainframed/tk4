         TITLE 'IDA019RK - PREFORMAT                                   *
                        '
IDA019RK CSECT ,                                                   0001
@MAINENT DS    0H                                                  0001
         USING *,@15                                               0001
         B     @PROLOG                                             0001
         DC    AL1(16)                                             0001
         DC    C'IDA019RK  78.172'                                 0001
         DROP  @15
@PROLOG  BALR  @11,0                                               0001
@PSTART  DS    0H                                                  0001
         USING @PSTART,@11                                         0001
         IDASVR14
*   IF AMBGSR=OFF&                  /* IF NOT GSR AND        @ZA10850*/
*       AMBLSR=OFF THEN             /* NOT LSR               @ZA10850*/
*                                                                  0105
         TM    AMBGSR(RAMB),B'01100000'                            0105
         BNZ   @RF00105                                            0105
*     /***************************************************************/
*     /*                                                             */
*     /* GET A WORK BUFFER                                           */
*     /*                                                             */
*     /***************************************************************/
*                                                                  0106
*I01:                                                              0106
*     DO;                           /* IDACALL(IDAGNFL)              */
I01      DS    0H                                                  0107
*       CALL IDAGNFL;               /* EXIT TO IDAGNFL               */
         L     @15,@CV00891                                        0107
         BALR  @14,@15                                             0107
*       GEN(BALR @11,0);            /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*       GEN(USING *,@11);           /* ESTABLISH ADDRESSING          */
         USING *,@11
*       GEN(L     @11,=A(@PSTART)); /* RELOAD BASE                   */
         L     @11,=A(@PSTART)
*       GEN(USING @PSTART,@11);     /* ESTABLISH ADDRESSING          */
         USING @PSTART,@11
*     END I01;                                                     0112
*   ELSE                            /* LSR OR GSR            @ZA10850*/
*     DO;                           /* SEE IF BUFC NEEDED    @ZA10850*/
         B     @RC00105                                            0113
@RF00105 DS    0H                                                  0114
*       IF AMBTYPE=AMBDATA THEN     /* DATA TYPE ?           @ZA10850*/
         TM    AMBTYPE(RAMB),B'01000000'                           0114
         BNZ   @RF00114                                            0114
*         DO;                       /* YES-CHECK FOR BUFC    @ZA10850*/
*           IF DIWBUFC=ZERO THEN    /* NO BUFFER THEN        @ZA10850*/
         L     @10,AMBIWA(,RAMB)                                   0116
         L     @10,DIWBUFC(,@10)                                   0116
         LTR   @10,@10                                             0116
         BNZ   @RF00116                                            0116
*I02:                                                              0117
*             DO;                   /* IDACALL(IDAGNFL)              */
I02      DS    0H                                                  0118
*               CALL IDAGNFL;       /* EXIT TO IDAGNFL               */
         L     @15,@CV00891                                        0118
         BALR  @14,@15                                             0118
*               GEN(BALR @11,0);    /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*               GEN(USING *,@11);   /* ESTABLISH ADDRESSING          */
         USING *,@11
*               GEN(L     @11,=A(@PSTART));/* RELOAD BASE            */
         L     @11,=A(@PSTART)
*               GEN(USING @PSTART,@11);/* ESTABLISH ADDRESSING       */
         USING @PSTART,@11
*             END I02;              /* GET BUFFER            @ZA10850*/
*           ELSE                    /* BUFC PRESENT          @ZA10850*/
*             RBUFC=DIWBUFC;        /* POINT TO BUFC         @ZA10850*/
         B     @RC00116                                            0124
@RF00116 L     @10,AMBIWA(,RAMB)                                   0124
         L     RBUFC,DIWBUFC(,@10)                                 0124
*         END;                      /* END DATA TYPE REQ     @ZA10850*/
*       ELSE                        /* INDEX REQ TYPE        @ZA10850*/
*         DO;                       /* CHECK FOR INDEX BUFC  @ZA10850*/
         B     @RC00114                                            0126
@RF00114 DS    0H                                                  0127
*           IF PLHIBUFC=ZERO THEN   /* NO BUFC PRESENT       @ZA10850*/
         L     @10,PLHIBUFC(,RPLH)                                 0127
         LTR   @10,@10                                             0127
         BNZ   @RF00127                                            0127
*I03:                                                              0128
*             DO;                   /* IDACALL(IDAGNFL)              */
I03      DS    0H                                                  0129
*               CALL IDAGNFL;       /* EXIT TO IDAGNFL               */
         L     @15,@CV00891                                        0129
         BALR  @14,@15                                             0129
*               GEN(BALR @11,0);    /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*               GEN(USING *,@11);   /* ESTABLISH ADDRESSING          */
         USING *,@11
*               GEN(L     @11,=A(@PSTART));/* RELOAD BASE            */
         L     @11,=A(@PSTART)
*               GEN(USING @PSTART,@11);/* ESTABLISH ADDRESSING       */
         USING @PSTART,@11
*             END I03;              /* GET BUFFER            @ZA10850*/
*           ELSE                    /* BUFC PRESENT          @ZA10850*/
*             RBUFC=PLHIBUFC;       /* POINT TO BUFC         @ZA10850*/
         B     @RC00127                                            0135
@RF00127 L     RBUFC,PLHIBUFC(,RPLH)                               0135
*         END;                      /* END INDEX REQ TYPE    @ZA10850*/
@RC00127 DS    0H                                                  0137
*     END;                          /* END LSR OR GSR        @ZA10850*/
@RC00114 DS    0H                                                  0138
*   IF RPLERREG^='00'X THEN         /* BUFFER ERROR.         @X04SVRQ*/
@RC00105 CLI   RPLERREG(RRPL),0                                    0138
         BNE   @RT00138                                            0138
*     GOTO PFEXIT;                  /* GO TO ERROR EXIT      @X04SVRQ*/
*   AMBLDTA->AMBIWA->DIWSAVE1=RPARM1;/* SAVE STARTING RBA.   @X04SVRQ*/
         L     @10,RPLDACB(,RRPL)                                  0140
         L     @10,ACBAMBL(,@10)                                   0140
         L     @10,AMBLDTA(,@10)                                   0140
         L     @10,AMBIWA(,@10)                                    0140
         ST    RPARM1,DIWSAVE1(,@10)                               0140
*   RFY                                                            0141
*    (RWORK1,                                                      0141
*     RWORK2,                                                      0141
*     RWORK3,                                                      0141
*     RWORK5) RSTD;                 /* GET REGS FOR MVCL             */
*   IF AMBGSR=OFF&AMBLSR=OFF THEN   /* NOT SHR RESOURCE      @X04SVRQ*/
         TM    AMBGSR(RAMB),B'01100000'                            0142
         BNZ   @RF00142                                            0142
*     DO;                           /* SETUP PREFOMAT BUFC'S @X04SVRQ*/
*       RWORK2=BUFCBAD;             /* POINT TO BUFFER               */
         L     RWORK2,BUFCBAD(,RBUFC)                              0144
*       RBUFC=BUFDRPFB;             /* POINT TO FIRST PF BUFC        */
         L     @10,AMBBUFC(,RAMB)                                  0145
         L     RBUFC,BUFDRPFB(,@10)                                0145
*       DO RWORK3=BUFDRPFN TO ONE BY-ONE;/* SET BUFCBAD IN PF BUFCS  */
         SLR   RWORK3,RWORK3                                       0146
         IC    RWORK3,BUFDRPFN(,@10)                               0146
         B     @DE00146                                            0146
@DL00146 DS    0H                                                  0147
*         BUFCBAD=RWORK2;           /* SET BUFCBAD                   */
         ST    RWORK2,BUFCBAD(,RBUFC)                              0147
*         RBUFC=BUFCNXT1;           /* GO TO NEXT BUFC               */
         L     RBUFC,BUFCNXT1(,RBUFC)                              0148
*         BUFCPLH=RPLH;             /* POINT BUFC TO PLH             */
         ST    RPLH,BUFCPLH(,RBUFC)                                0149
*       END;                        /* END OF PF BUFC SETUP          */
         BCTR  RWORK3,0                                            0150
@DE00146 LTR   RWORK3,RWORK3                                       0150
         BP    @DL00146                                            0150
*     END;                          /* END SETUP PRFMT BUFCS @X04SVRQ*/
*   ELSE                            /* SHR RESOURCE.         @X04SVRQ*/
*     DO;                           /* SETUP INSERT BUFC.    @X04SVRQ*/
         B     @RC00142                                            0152
@RF00142 DS    0H                                                  0153
*       BUFCFMT=ON;                 /* SET FORMAT WRITE.     @X04SVRQ*/
         OI    BUFCFMT(RBUFC),B'01000000'                          0153
*       CALL EDBSRCH;               /* LOCATE EDB & LPMB.    @X04SVRQ*/
         BAL   @14,EDBSRCH                                         0154
*       IF RPLERREG^='00'X THEN     /* ERROR.                @X04SVRQ*/
         CLI   RPLERREG(RRPL),0                                    0155
         BNE   @RT00155                                            0155
*         GOTO PFERRX;              /* GO TO ERROR EXIT.     @X04SVRQ*/
*       IF AMDCINV=LPMBLKSZ THEN    /* CI SIZE=BLOCKSIZE.    @X04SVRQ*/
         L     @10,AMBDSB(,RAMB)                                   0157
         L     @08,EDBLPMBA(,RWORK2)                               0157
         CLC   AMDCINV(4,@10),LPMBLKSZ(@08)                        0157
         BNE   @RF00157                                            0157
*         BUFCPFCP=ON;              /* SET CP COMPLETE.      @X04SVRQ*/
         OI    BUFCPFCP(RBUFC),B'00000010'                         0158
*       RWORK2=BUFCBAD;             /* POINT TO BUFFER.      @X04SVRQ*/
@RF00157 L     RWORK2,BUFCBAD(,RBUFC)                              0159
*     END;                          /* END SETUP INSERT BUFC @X04SVRQ*/
*   RWORK3=AMDCINV;                 /* GET SIZE OF CINV              */
@RC00142 L     @10,AMBDSB(,RAMB)                                   0161
         L     RWORK3,AMDCINV(,@10)                                0161
*   RWORK5=ZERO;                    /* CAUSE PROPAGATION OF 0        */
         SLR   RWORK5,RWORK5                                       0162
*   GEN(MVCL  RWORK2,RWORK4);       /* MAKE SEOF CINV                */
         MVCL  RWORK2,RWORK4
*   RFY                                                            0164
*     RWORK5 UNRSTD;                /* DROP WORK REGISTER            */
*                                                                  0164
*   /*****************************************************************/
*   /*                                                               */
*   /* DETERMINE THE NUMBER OF CONTROL INTERVALS TO WRITE            */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0165
*   RFY                                                            0165
*     R14 UNRSTD;                   /* RELEASE R14                   */
*   IF AMBTYPE=AMBDATA              /* SEE IF DATA                   */
*     THEN                          /* IF SO, PREFORMAT WILL         */
         TM    AMBTYPE(RAMB),B'01000000'                           0166
         BNZ   @RF00166                                            0166
*     DO;                           /* GO UNTIL END OF CA            */
*                                                                  0167
*       /*************************************************************/
*       /*                                                           */
*       /* ***** PREFORMAT DATA ***** DETERMINE THE NUMBER OF CONTROL*/
*       /* INTERVALS TO BE WRITTEN IN THIS CONTROL AREA. DETERMINE   */
*       /* HOW MANY BYTES OF DATA ARE WRITTEN BY EACH CALL TO I/O    */
*       /* MANAGER AND SET THE WRITE COUNT ACCORDINGLY               */
*       /*                                                           */
*       /*************************************************************/
*                                                                  0168
*       IF BUFCPFCP=ON              /* I/O MGR WILL CAUSE A          */
*         THEN                      /* TRACK TO BE WRITTEN,          */
         TM    BUFCPFCP(RBUFC),B'00000010'                         0168
         BNO   @RF00168                                            0168
*         DO;                       /* ADJUST NUMBER OF CALLS.       */
*           IF AMBGSR=OFF&AMBLSR=OFF THEN/* NOT SHR RESOURCE.      0170
*                                                            @X04SVRQ*/
         TM    AMBGSR(RAMB),B'01100000'                            0170
         BNZ   @RF00170                                            0170
*             DO;                   /* FIND BYTES/TRACK.     @X04SVRQ*/
*               CALL EDBSRCH;       /* LOCATE EDB & LPMB.    @X04SVRQ*/
         BAL   @14,EDBSRCH                                         0172
*               IF RPLERREG^='00'X THEN/* ERROR.             @X04SVRQ*/
         CLI   RPLERREG(RRPL),0                                    0173
         BNE   @RT00173                                            0173
*                 GOTO PFERRX;      /* GO TO ERROR EXIT.     @X04SVRQ*/
*             END;                  /* END FIND BYTES/TRACK. @X04SVRQ*/
*           RFY                                                    0176
*             RWORK4 RSTD;          /* GET WORK REGISTER             */
@RF00170 DS    0H                                                  0177
*           RWORK4=RPARM1X-(RPARM1X//DIWRKCT);/* PTR TO TRK START  0177
*                                                            @ZA10887
*                                                            @X04SVRQ*/
         L     @10,AMBIWA(,RAMB)                                   0177
         L     @15,DIWRKCT(,@10)                                   0177
         LR    @09,RPARM1X                                         0177
         SLR   RWORK4,RWORK4                                       0177
         DR    RWORK4,@15                                          0177
         LCR   RWORK4,RWORK4                                       0177
         ALR   RWORK4,RPARM1X                                      0177
*           RWORK3=AMDCIPCA*AMDCINV;/* GET CONTROL AREA SIZE         */
         L     @09,AMBDSB(,RAMB)                                   0178
         L     RWORK3,AMDCINV(,@09)                                0178
         MH    RWORK3,AMDCIPCA(,@09)                               0178
*           RWORK2=((RPARM1X+RWORK3)/RWORK3)*RWORK3;/* NEXT CA     0179
*                                      POINTER               @ZA10887*/
         LR    @14,RPARM1X                                         0179
         ALR   @14,RWORK3                                          0179
         LR    @15,@14                                             0179
         SLR   @14,@14                                             0179
         DR    @14,RWORK3                                          0179
         MR    @14,RWORK3                                          0179
         LR    RWORK2,@15                                          0179
*           RWORK1=(RWORK2-RWORK4)/DIWRKCT;/* GET NUMBER OF TRKS   0180
*                                                            @X04SVRQ*/
         LR    RWORK1,RWORK2                                       0180
         SLR   RWORK1,RWORK4                                       0180
         L     @09,AMBIWA(,RAMB)                                   0180
         L     @09,DIWRKCT(,@09)                                   0180
         LR    @15,RWORK1                                          0180
         SLR   @14,@14                                             0180
         DR    @14,@09                                             0180
         LR    RWORK1,@15                                          0180
*           DIWSAVE2=RWORK4;        /* SAVE START OF TRACK           */
         ST    RWORK4,DIWSAVE2(,@10)                               0181
*           RFY                                                    0182
*             RWORK4 UNRSTD;        /* DROP WORK REGISTER            */
*         END;                      /* END OF WRITE CNT RESET        */
*       ELSE                        /* EACH CALL IS ONE CINV         */
*         DO;                                                      0184
         B     @RC00168                                            0184
@RF00168 DS    0H                                                  0185
*           RWORK3=AMDCINV;         /* SET AMT OF DATA PER WRT       */
         L     @10,AMBDSB(,RAMB)                                   0185
         L     RWORK3,AMDCINV(,@10)                                0185
*           DIWSAVE2=RPARM1;        /* SAVE STARTING RBA             */
         L     @15,AMBIWA(,RAMB)                                   0186
         ST    RPARM1,DIWSAVE2(,@15)                               0186
*           RWORK1=AMDCIPCA-((RPARM1X/RWORK3)//AMDCIPCA);/* # OF CIS
*                                                            @ZA10887*/
         LH    @10,AMDCIPCA(,@10)                                  0187
         LR    @09,RPARM1X                                         0187
         SLR   @08,@08                                             0187
         DR    @08,RWORK3                                          0187
         SLR   @08,@08                                             0187
         DR    @08,@10                                             0187
         SLR   @10,@08                                             0187
         LR    RWORK1,@10                                          0187
*           RWORK2=RPARM1+RWORK1*RWORK3;/* POINT TO NEXT CNTL AREA   */
         LR    @09,RWORK3                                          0188
         MR    @08,RWORK1                                          0188
         ALR   @09,RPARM1                                          0188
         LR    RWORK2,@09                                          0188
*           DIWRKCT=RWORK3;         /* SAVE DATA WRITE AMT   @X04SVRQ*/
         ST    RWORK3,DIWRKCT(,@15)                                0189
*         END;                      /* END OF CINV WRITES            */
*       DIWSAVE4=RWORK1;            /* SAVE WRITE COUNT              */
@RC00168 L     @10,AMBIWA(,RAMB)                                   0191
         ST    RWORK1,DIWSAVE4(,@10)                               0191
*/*  IF AN END OF FILE IS DESIRED AND THE PREFORMAT STARTS AT THE    */
*/*  BEGINNING OF A CONTROL AREA, JUST WRITE A SEOF (NO FS). @ZA07543*/
*                                                                  0192
*       IF AMBSPEED=ON&             /* IF SPEED CREATE       @ZA07543*/
*           (PLHENDRQ=ON×           /* CLOSE IN CONTROL      @ZA07543*/
*           DIWEOKR=ON)&            /* (OR END KEY RNG),     @ZA07543*/
*           PLHARDB^=ZERO&          /* NOT EXTERNAL CALL,    @ZA07543*/
*           RPARM1^=ARDERBA&        /* NOT END OF EXTENT,    @ZA07543*/
*           ARDHKRBA^=ZERO&         /* NOT NULL KEY RNG,     @ZA07543*/
*           RPARM1^=ARDHKRBA&       /* NOT NULL KEY RNG,     @ZA07543*/
*           (RPARM1X/AMDCINV)//AMDCIPCA=ZERO THEN/* AND CA START,  0192
*                                                            @ZA07543
*                                                            @ZA10887*/
         TM    AMBSPEED(RAMB),B'00001000'                          0192
         BNO   @RF00192                                            0192
         TM    PLHENDRQ(RPLH),B'01000000'                          0192
         BO    @GL00005                                            0192
         TM    DIWEOKR(@10),B'00010000'                            0192
         BNO   @RF00192                                            0192
@GL00005 SLR   @10,@10                                             0192
         L     @15,PLHARDB(,RPLH)                                  0192
         CR    @15,@10                                             0192
         BE    @RF00192                                            0192
         CL    RPARM1,ARDERBA(,@15)                                0192
         BE    @RF00192                                            0192
         L     @15,ARDHKRBA(,@15)                                  0192
         CLR   @15,@10                                             0192
         BE    @RF00192                                            0192
         CLR   RPARM1,@15                                          0192
         BE    @RF00192                                            0192
         L     @15,AMBDSB(,RAMB)                                   0192
         LR    @09,RPARM1X                                         0192
         SLR   @08,@08                                             0192
         D     @08,AMDCINV(,@15)                                   0192
         SLR   @08,@08                                             0192
         LH    @00,AMDCIPCA(,@15)                                  0192
         DR    @08,@00                                             0192
         CLR   @08,@10                                             0192
         BNE   @RF00192                                            0192
*         DO;                       /* WRITE SEOF ONLY.      @ZA07543*/
*           DO;                     /* SET OUTPUT RBA                */
*             BUFCORBA=RPARM1;                                     0195
         ST    RPARM1,BUFCORBA(,RBUFC)                             0195
*             BUFCMW=ON;            /* SET MUST WRITE                */
         OI    BUFCMW(RBUFC),B'10000000'                           0196
*           END;                    /* SET OUTPUT RBA.       @ZA07543*/
*I05:                                                              0198
*           DO;                     /* IDACALL(IDAWRBFR)             */
I05      DS    0H                                                  0199
*             CALL IDAWRBFR;        /* EXIT TO IDAWRBFR              */
         L     @15,@CV00892                                        0199
         BALR  @14,@15                                             0199
*             GEN(BALR @11,0);      /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*             GEN(USING *,@11);     /* ESTABLISH ADDRESSING          */
         USING *,@11
*             GEN(L     @11,=A(@PSTART));/* RELOAD BASE              */
         L     @11,=A(@PSTART)
*             GEN(USING @PSTART,@11);/* ESTABLISH ADDRESSING         */
         USING @PSTART,@11
*           END I05;                /* WRITE SEOF.           @ZA07543*/
*           RPARM1=DIWSAVE1;        /* RESTORE FOR CALLER    @ZA07543*/
         L     @10,AMBIWA(,RAMB)                                   0205
         L     RPARM1,DIWSAVE1(,@10)                               0205
*           IF RPLERREG^='00'X THEN /* IF ERROR SET FLAG     @ZA07543*/
         CLI   RPLERREG(RRPL),0                                    0206
         BNE   @RT00206                                            0206
*             GO TO PFERRX;         /* TAKE ERROR EXIT       @ZA07543*/
*           GO TO PFEXIT2;          /* TAKE NORMAL EXIT      @ZA07543*/
         B     PFEXIT2                                             0208
*         END;                      /* END OF SEOF ONLY      @ZA07543*/
*       IF PLHARDB^=ZERO&           /* IF INTERNAL CALL &    @ZA07543*/
*           RWORK2^=ARDERBA&        /* IF NOT THE LAST CONTROL       */
*           AMBPSDS=OFF&            /* NOT TRK OVERFLOW      @Y021130*/
*           (AMBSPEED=OFF×          /* AREA IN THE EXTENT AND        */
*           PLHENDRQ=ON×            /* IF A SOFTWARE END-OF-         */
*           DIWEOKR=ON)             /* DATA IS TO BE WRITTEN         */
*         THEN                      /* ON THE CONTROL AREA,          */
@RF00192 L     @10,PLHARDB(,RPLH)                                  0210
         LTR   @10,@10                                             0210
         BZ    @RF00210                                            0210
         CL    RWORK2,ARDERBA(,@10)                                0210
         BE    @RF00210                                            0210
         TM    AMBPSDS(RAMB),B'10000000'                           0210
         BNZ   @RF00210                                            0210
         TM    AMBSPEED(RAMB),B'00001000'                          0210
         BZ    @RT00210                                            0210
         TM    PLHENDRQ(RPLH),B'01000000'                          0210
         BO    @RT00210                                            0210
         L     @10,AMBIWA(,RAMB)                                   0210
         TM    DIWEOKR(@10),B'00010000'                            0210
         BNO   @RF00210                                            0210
@RT00210 DS    0H                                                  0211
*         DO;                       /* ALLOW FOR END-OF-DATA.        */
*                                                                  0211
*           /*********************************************************/
*           /*                                                       */
*           /* SET UP TO WRITE SOFTWARE END-OF-DATA                  */
*           /*                                                       */
*           /*********************************************************/
*                                                                  0212
*           RPARM1=RWORK2;          /* GET RBA OF NEXT CA    @X04SVRQ*/
         LR    RPARM1,RWORK2                                       0212
*           RFY                                                    0213
*            (RWORK1,                                              0213
*             RWORK2) UNRSTD;       /* DROP WORK REGRS       @X04SVRQ*/
*           DO;                     /* SET OUTPUT RBA                */
*             BUFCORBA=RPARM1;                                     0215
         ST    RPARM1,BUFCORBA(,RBUFC)                             0215
*             BUFCMW=ON;            /* SET MUST WRITE                */
         OI    BUFCMW(RBUFC),B'10000000'                           0216
*           END;                    /* PREPARE FOR OUTPUT    @X04SVRQ*/
*                                                                  0217
*           /*********************************************************/
*           /*                                                       */
*           /* DO FORMAT WRITE FOR SOFTWARE END-OF-DATA CINV         */
*           /*                                                       */
*           /*********************************************************/
*                                                                  0218
*I07:                                                              0218
*           DO;                     /* IDACALL(IDAWRBFR)             */
I07      DS    0H                                                  0219
*             CALL IDAWRBFR;        /* EXIT TO IDAWRBFR              */
         L     @15,@CV00892                                        0219
         BALR  @14,@15                                             0219
*             GEN(BALR @11,0);      /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*             GEN(USING *,@11);     /* ESTABLISH ADDRESSING          */
         USING *,@11
*             GEN(L     @11,=A(@PSTART));/* RELOAD BASE              */
         L     @11,=A(@PSTART)
*             GEN(USING @PSTART,@11);/* ESTABLISH ADDRESSING         */
         USING @PSTART,@11
*           END I07;                /* WRITE OUT A SEOF              */
*           IF RPLERREG^='00'X THEN /* IF AN ERROR OCCURRED,         */
         CLI   RPLERREG(RRPL),0                                    0225
         BNE   @RT00225                                            0225
*             GO TO PFERRX;         /* EXIT FROM PREFORMAT.          */
*           RPARM1=DIWSAVE1;        /* RESTORE STARTING RBA          */
         L     @10,AMBIWA(,RAMB)                                   0227
         L     RPARM1,DIWSAVE1(,@10)                               0227
*         END;                      /* END, ALLOW FOR END OF DATA. 0228
*                                                            @OZ20921*/
*       IF AMDDST='1'B×             /* IF A KEYED DATA SET,          */
*           DIWFSPF=ON              /* OR FS FORCE           @X04SVMR*/
*         THEN                      /* WRITE FREE SPACE CINVS        */
@RF00210 L     @10,AMBDSB(,RAMB)                                   0229
         TM    AMDDST(@10),B'10000000'                             0229
         BO    @RT00229                                            0229
         L     @10,AMBIWA(,RAMB)                                   0229
         TM    DIWFSPF(@10),B'10000000'                            0229
         BNO   @RF00229                                            0229
@RT00229 DS    0H                                                  0230
*         DO;                       /* IN THE CONTROL AREA.          */
*           RFY                                                    0231
*            (RWORK3,                                              0231
*             RWORK4) RSTD;         /* GET WORK REGISTERS            */
*           RWORK3=AMDCINV-LENGTH(IDACIDF);/* GET FREE SPACE COUNT   */
         L     @10,AMBDSB(,RAMB)                                   0232
         L     RWORK3,AMDCINV(,@10)                                0232
         SL    RWORK3,@CF00067                                     0232
*           RWORK4=BUFCBAD+RWORK3;  /* POINT TO CIDF                 */
         LR    RWORK4,RWORK3                                       0233
         AL    RWORK4,BUFCBAD(,RBUFC)                              0233
*           RWORK4->CIDFLL=RWORK3;  /* MAKE FREE SPACE CINV          */
         STH   RWORK3,CIDFLL(,RWORK4)                              0234
*         END;                      /* END OF KEYED DATA SET         */
*       ELSE                        /* NOT KEYED DATA SET    @X04SVRQ*/
*         IF AMDRRDS=ON THEN        /* REL REC DATA SET      @X04SVRQ*/
         B     @RC00229                                            0236
@RF00229 L     @10,AMBDSB(,RAMB)                                   0236
         TM    AMDRRDS(@10),B'00000010'                            0236
         BNO   @RF00236                                            0236
*           DO;                     /* BUILD BFR WITH EMPTY RECS   0237
*                                                            @X04SVRQ*/
*             RWORK4=BUFCBAD+AMDCINV-LENGTH(IDACIDF);/* POINT TO   0238
*                                      CIDF.                 @X04SVRQ*/
         LA    @06,4                                               0238
         L     @05,AMDCINV(,@10)                                   0238
         L     RWORK4,BUFCBAD(,RBUFC)                              0238
         ALR   RWORK4,@05                                          0238
         SLR   RWORK4,@06                                          0238
*             RWORK3=AMDNSLOT*AMDLRECL;/* LENGTH OF RECORDS  @X04SVRQ*/
         L     @09,AMDNSLOT(,@10)                                  0239
         LR    @15,@09                                             0239
         M     @14,AMDLRECL(,@10)                                  0239
         LR    RWORK3,@15                                          0239
*             RWORK4->CIDFOSET=RWORK3;/* SET CIDF OFFSET     @X04SVRQ*/
         STH   RWORK3,CIDFOSET(,RWORK4)                            0240
*             RWORK3=RWORK3+AMDNSLOT*LENGTH(IDARDF)+LENGTH(IDACIDF);
         LR    @10,@09                                             0241
         MH    @10,@CH00097                                        0241
         ALR   @10,RWORK3                                          0241
         ALR   @10,@06                                             0241
         LR    RWORK3,@10                                          0241
*                                   /* TOTAL LENGTH OF RECORDS & RDFS
*                                      & CIDF.               @X04SVRQ*/
*             RWORK4->CIDFLL=AMDCINV-RWORK3;/* LENGTH OF FREE SPACE.
*                                                            @X04SVRQ*/
         SLR   @05,RWORK3                                          0242
         STH   @05,CIDFLL(,RWORK4)                                 0242
*             DO RWORK3=AMDNSLOT TO 1 BY-1;/* LOOP THROUGH ALL RDF'S.
*                                                            @X04SVRQ*/
         LR    RWORK3,@09                                          0243
         B     @DE00243                                            0243
@DL00243 DS    0H                                                  0244
*               RWORK4=RWORK4-LENGTH(IDARDF);/* BACKUP TO PREVIOUS 0244
*                                      RDF                   @X04SVRQ*/
         SL    RWORK4,@CF00097                                     0244
*               RWORK4->RDFEMPTY=ON;/* SET RDF EMPTY RECORD. @X04SVRQ*/
         OI    RDFEMPTY(RWORK4),B'00000100'                        0245
*               RWORK4->RDFLL=AMDLRECL;/* SET RDF RECORD LENGTH.   0246
*                                                            @X04SVRQ*/
         L     @10,AMBDSB(,RAMB)                                   0246
         MVC   RDFLL(2,RWORK4),AMDLRECL+2(@10)                     0246
*             END;                  /* END LOOP.             @X04SVRQ*/
         BCTR  RWORK3,0                                            0247
@DE00243 LTR   RWORK3,RWORK3                                       0247
         BP    @DL00243                                            0247
*           END;                    /* END OF REL REC        @X04SVRQ*/
*                                                                  0248
*       /*************************************************************/
*       /*                                                           */
*       /* IF FIRST PREFORMAT IN EXTENT, THERE IS NO OLD SOFTWARE EOD*/
*       /* TO SKIP OVER.                                             */
*       /*                                                           */
*       /*************************************************************/
*                                                                  0249
*       IF AMBSPEED=OFF&(RPARM1/AMDCINV)//AMDCIPCA=ZERO&AMBPSDS=OFF&
*                                   /* ENSURE NOT PAGE SP    @Y021130*/
*           PLHARDB^=ZERO&ARDPRFMT=OFF THEN/* NOT SPEED & BEGIN OF CA
*                                      BUT NOT 1ST PRFMT OF EXTENT &
*                                      PLHARDB NOT 0.        @ZA07543*/
@RF00236 DS    0H                                                  0249
@RC00229 TM    AMBSPEED(RAMB),B'00001000'                          0249
         BNZ   @RF00249                                            0249
         SLR   @10,@10                                             0249
         L     @09,AMBDSB(,RAMB)                                   0249
         L     @06,AMDCINV(,@09)                                   0249
         LR    @15,RPARM1                                          0249
         SLR   @14,@14                                             0249
         DR    @14,@06                                             0249
         LR    @14,@15                                             0249
         SRA   @14,31                                              0249
         LH    @09,AMDCIPCA(,@09)                                  0249
         DR    @14,@09                                             0249
         CR    @14,@10                                             0249
         BNE   @RF00249                                            0249
         TM    AMBPSDS(RAMB),B'10000000'                           0249
         BNZ   @RF00249                                            0249
         L     @09,PLHARDB(,RPLH)                                  0249
         CR    @09,@10                                             0249
         BE    @RF00249                                            0249
         TM    ARDPRFMT(@09),B'01000000'                           0249
         BNZ   @RF00249                                            0249
*         DO;                       /* SKIP OLD SEOF?        @OX13366*/
*           RWORK3=AMDCINV;         /* GET CISZ              @OX13366*/
         LR    RWORK3,@06                                          0251
*           IF RWORK3^=DIWRKCT&     /* IF NOT 1 CI PER TRK   @OX13366*/
*               BUFCPFCP=ON THEN    /* AND CP COMPLETE       @OX13366*/
         L     @10,AMBIWA(,RAMB)                                   0252
         CL    RWORK3,DIWRKCT(,@10)                                0252
         BE    @RF00252                                            0252
         TM    BUFCPFCP(RBUFC),B'00000010'                         0252
         BNO   @RF00252                                            0252
*             DO;                   /* THEN START IN MIDTRK  @OX13366*/
*               RPARM1=RPARM1+AMDCINV;/* BUMP PAST SEOF      @OX13366*/
         ALR   RPARM1,@06                                          0254
*             END;                  /* END MID-TRACK CODE    @OX13366*/
*           ELSE                                                   0256
*             DO;                   /* START ON NEXT TRACK   @OX13366*/
         B     @RC00252                                            0256
@RF00252 DS    0H                                                  0257
*               RPARM1=RPARM1+DIWRKCT;/* NEXT CI OR TRK      @OX13366*/
         L     @10,AMBIWA(,RAMB)                                   0257
         L     @09,DIWRKCT(,@10)                                   0257
         ALR   RPARM1,@09                                          0257
*               DIWSAVE2=DIWSAVE2+DIWRKCT;/* BUMP RBAS       @OX13366*/
         AL    @09,DIWSAVE2(,@10)                                  0258
         ST    @09,DIWSAVE2(,@10)                                  0258
*               DIWSAVE4=DIWSAVE4-ONE;/* ONE LESS WRITE      @OX13366*/
         L     @09,DIWSAVE4(,@10)                                  0259
         BCTR  @09,0                                               0259
         ST    @09,DIWSAVE4(,@10)                                  0259
*             END;                  /* END NEXT CI OR TRK    @OX13366*/
*         END;                      /* END, SEOF             @OX13366*/
@RC00252 DS    0H                                                  0262
*       RFY                                                        0262
*        (RWORK3,                                                  0262
*         RWORK4) UNRSTD;           /* DROP WORK REGISTERS           */
@RF00249 DS    0H                                                  0263
*       DO DIWSAVE4=DIWSAVE4 TO ONE BY-ONE;/* DO ALL WRITES          */
*                                                                  0263
         L     @10,AMBIWA(,RAMB)                                   0263
         L     @10,DIWSAVE4(,@10)                                  0263
         B     @DE00263                                            0263
@DL00263 DS    0H                                                  0264
*         /***********************************************************/
*         /*                                                         */
*         /* SET OUTPUT RBA AND MUST WRITE                           */
*         /*                                                         */
*         /***********************************************************/
*                                                                  0264
*         DO;                       /* SET OUTPUT RBA                */
*           BUFCORBA=RPARM1;                                       0265
         ST    RPARM1,BUFCORBA(,RBUFC)                             0265
*           BUFCMW=ON;              /* SET MUST WRITE                */
         OI    BUFCMW(RBUFC),B'10000000'                           0266
*         END;                                                     0267
*         RPARM1=DIWSAVE2+DIWRKCT;  /* NEXT RBA (CINV OR TRK)      0268
*                                                            @X04SVRQ*/
         L     @10,AMBIWA(,RAMB)                                   0268
         L     RPARM1,DIWSAVE2(,@10)                               0268
         AL    RPARM1,DIWRKCT(,@10)                                0268
*         DIWSAVE2=RPARM1;          /* SAVE CURRENT RBA              */
         ST    RPARM1,DIWSAVE2(,@10)                               0269
*         RBUFC=BUFCNXT1;           /* GO TO NEXT BUFC               */
         L     RBUFC,BUFCNXT1(,RBUFC)                              0270
*         IF AMBGSR=ON×AMBLSR=ON×RBUFC=BUFDRPFB THEN/* SHR RESOURCE
*                                      OR WRAP- AROUND HAS OCCURRED.
*                                                            @X04SVRQ*/
         TM    AMBGSR(RAMB),B'01100000'                            0271
         BNZ   @RT00271                                            0271
         L     @10,AMBBUFC(,RAMB)                                  0271
         C     RBUFC,BUFDRPFB(,@10)                                0271
         BNE   @RF00271                                            0271
@RT00271 DS    0H                                                  0272
*           DO;                     /* WRITE OUT BUFCS               */
*                                                                  0272
*             /*******************************************************/
*             /*                                                     */
*             /* WRITE OUT ALL PREFORMAT BUFCS                       */
*             /*                                                     */
*             /*******************************************************/
*                                                                  0273
*I09:                                                              0273
*             DO;                   /* IDACALL(IDAWRBFR)             */
I09      DS    0H                                                  0274
*               CALL IDAWRBFR;      /* EXIT TO IDAWRBFR              */
         L     @15,@CV00892                                        0274
         BALR  @14,@15                                             0274
*               GEN(BALR @11,0);    /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*               GEN(USING *,@11);   /* ESTABLISH ADDRESSING          */
         USING *,@11
*               GEN(L     @11,=A(@PSTART));/* RELOAD BASE            */
         L     @11,=A(@PSTART)
*               GEN(USING @PSTART,@11);/* ESTABLISH ADDRESSING       */
         USING @PSTART,@11
*             END I09;                                             0279
*             IF RPLERREG^='00'X THEN/* IF AN ERROR OCCURS,          */
         CLI   RPLERREG(RRPL),0                                    0280
         BNE   @RT00280                                            0280
*               GO TO PFERRX;       /* EXIT.                         */
*           END;                    /* END OF PURGE WRITE CODE       */
*         RPARM1=DIWSAVE2;          /* RESTORE CURRENT RBA           */
@RF00271 L     @10,AMBIWA(,RAMB)                                   0283
         L     RPARM1,DIWSAVE2(,@10)                               0283
*       END;                        /* END OF WRITE LOOP             */
         L     @05,AMBIWA(,RAMB)                                   0284
         SLR   @10,@10                                             0284
         BCTR  @10,0                                               0284
         AL    @10,DIWSAVE4(,@05)                                  0284
         L     @05,AMBIWA(,RAMB)                                   0284
         ST    @10,DIWSAVE4(,@05)                                  0284
@DE00263 LTR   @10,@10                                             0284
         BP    @DL00263                                            0284
*       IF AMBGSR=OFF&AMBLSR=OFF THEN/* NOT SHR RESOURCE.    @X04SVRQ*/
         TM    AMBGSR(RAMB),B'01100000'                            0285
         BNZ   @RF00285                                            0285
*         RBUFC=BUFDRPFB;           /* POINT TO FIRST BUFC           */
         L     @10,AMBBUFC(,RAMB)                                  0286
         L     RBUFC,BUFDRPFB(,@10)                                0286
*       IF BUFCMW=ON                /* ARE THERE STILL WRITES        */
*         THEN                      /* TO BE DONE? IF SO,            */
@RF00285 TM    BUFCMW(RBUFC),B'10000000'                           0287
         BNO   @RF00287                                            0287
*         DO;                       /* WRITE AGAIN                   */
*                                                                  0288
*           /*********************************************************/
*           /*                                                       */
*           /* WRITE OUT REMAINING PREFORMAT BUFCS                   */
*           /*                                                       */
*           /*********************************************************/
*                                                                  0289
*I10:                                                              0289
*           DO;                     /* IDACALL(IDAWRBFR)             */
I10      DS    0H                                                  0290
*             CALL IDAWRBFR;        /* EXIT TO IDAWRBFR              */
         L     @15,@CV00892                                        0290
         BALR  @14,@15                                             0290
*             GEN(BALR @11,0);      /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*             GEN(USING *,@11);     /* ESTABLISH ADDRESSING          */
         USING *,@11
*             GEN(L     @11,=A(@PSTART));/* RELOAD BASE              */
         L     @11,=A(@PSTART)
*             GEN(USING @PSTART,@11);/* ESTABLISH ADDRESSING         */
         USING @PSTART,@11
*           END I10;                                               0295
*           IF RPLERREG^='00'X THEN /* IF AN ERROR HAS               */
         CLI   RPLERREG(RRPL),0                                    0296
         BNE   @RT00296                                            0296
*             GO TO PFERRX;         /* OCCURRED, EXIT.               */
*           RPARM1=DIWSAVE2;        /* RESTORE CURRENT RBA           */
         L     @10,AMBIWA(,RAMB)                                   0298
         L     RPARM1,DIWSAVE2(,@10)                               0298
*         END;                      /* END OF FORCE WRITE CODE       */
*       IF AMBGSR=ON×AMBLSR=ON THEN /* SHR RESOURCE.         @X04SVRQ*/
@RF00287 TM    AMBGSR(RAMB),B'01100000'                            0300
         BZ    @RF00300                                            0300
*         DO;                       /*                       @X04SVRQ*/
*           BUFCFMT=OFF;            /* TURN OFF FORMAT WRT.  @X04SVRQ*/
*           BUFCPFCP=OFF;           /* TURN OFF CP COMPLETE. @X04SVRQ*/
         NI    BUFCFMT(RBUFC),B'10111101'                          0303
*         END;                      /*                       @X04SVRQ*/
*       IF AMDRRDS=ON THEN          /* REL REC DATA SET      @X04SVRQ*/
@RF00300 L     @10,AMBDSB(,RAMB)                                   0305
         TM    AMDRRDS(@10),B'00000010'                            0305
         BNO   @RF00305                                            0305
*         IF PLHARDB^=ZERO&         /* IF INTERNAL CALL AND  @ZA07543*/
*             AMBSPEED=OFF&(DIWSAV1X/AMDCINV)//AMDCIPCA=ZERO&ARDPRFMT=
*             OFF THEN              /* NOT SPEED & CA START BUT NOT
*                                      1ST PRFMT OF EXTENT   @ZA10887*/
         SLR   @05,@05                                             0306
         L     @15,PLHARDB(,RPLH)                                  0306
         CR    @15,@05                                             0306
         BE    @RF00306                                            0306
         TM    AMBSPEED(RAMB),B'00001000'                          0306
         BNZ   @RF00306                                            0306
         L     @14,AMBIWA(,RAMB)                                   0306
         L     @07,DIWSAV1X(,@14)                                  0306
         SLR   @06,@06                                             0306
         D     @06,AMDCINV(,@10)                                   0306
         SLR   @06,@06                                             0306
         LH    @10,AMDCIPCA(,@10)                                  0306
         DR    @06,@10                                             0306
         CLR   @06,@05                                             0306
         BNE   @RF00306                                            0306
         TM    ARDPRFMT(@15),B'01000000'                           0306
         BNZ   @RF00306                                            0306
*           DO;                     /* REWRITE OLD SEOF.     @X04SVRQ*/
*             IF AMBGSR=OFF&AMBLSR=OFF THEN/* NOT SHR RESOURCE.    0308
*                                                            @X04SVRQ*/
         TM    AMBGSR(RAMB),B'01100000'                            0308
         BNZ   @RF00308                                            0308
*               RBUFC=DIWBUFC;      /* POINT TO INSERT BUFC. @X04SVRQ*/
         L     RBUFC,DIWBUFC(,@14)                                 0309
*             RPARM1=DIWSAVE1;      /* POINT TO START RBA    @X04SVRQ*/
@RF00308 L     @10,AMBIWA(,RAMB)                                   0310
         L     RPARM1,DIWSAVE1(,@10)                               0310
*             DO;                   /* SET OUTPUT RBA                */
*               BUFCORBA=RPARM1;                                   0312
         ST    RPARM1,BUFCORBA(,RBUFC)                             0312
*               BUFCMW=ON;          /* SET MUST WRITE                */
         OI    BUFCMW(RBUFC),B'10000000'                           0313
*             END;                  /* PREPARE FOR OUTPUT.   @X04SVRQ*/
*I12:                                                              0315
*             DO;                   /* IDACALL(IDAWRBFR)             */
I12      DS    0H                                                  0316
*               CALL IDAWRBFR;      /* EXIT TO IDAWRBFR              */
         L     @15,@CV00892                                        0316
         BALR  @14,@15                                             0316
*               GEN(BALR @11,0);    /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*               GEN(USING *,@11);   /* ESTABLISH ADDRESSING          */
         USING *,@11
*               GEN(L     @11,=A(@PSTART));/* RELOAD BASE            */
         L     @11,=A(@PSTART)
*               GEN(USING @PSTART,@11);/* ESTABLISH ADDRESSING       */
         USING @PSTART,@11
*             END I12;              /* REWRITE OLD SEOF WITH CI OF 0321
*                                      EMPTY RECORDS.        @X04SVRQ*/
*             IF RPLERREG^='00'X THEN/* BUFFER WRITE ERROR.  @X04SVRQ*/
         CLI   RPLERREG(RRPL),0                                    0322
         BNE   @RT00322                                            0322
*               GOTO PFERRX;        /* GO TO ERROR EXIT.     @X04SVRQ*/
*           END;                    /* END OF SEOF REWRITE   @X04SVRQ*/
*       RBUFC=DIWBUFC;              /* POINT TO INSERT BUFC  @X04SVRQ*/
@RF00306 DS    0H                                                  0325
@RF00305 L     @10,AMBIWA(,RAMB)                                   0325
         L     RBUFC,DIWBUFC(,@10)                                 0325
*I13:                                                              0326
*       DO;                         /* IDACALL(IDAFREEB)             */
I13      DS    0H                                                  0327
*         CALL IDAFREEB;            /* EXIT TO IDAFREEB              */
         L     @15,@CV00894                                        0327
         BALR  @14,@15                                             0327
*         GEN(BALR @11,0);          /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*         GEN(USING *,@11);         /* ESTABLISH ADDRESSING          */
         USING *,@11
*         GEN(L     @11,=A(@PSTART));/* RELOAD BASE                  */
         L     @11,=A(@PSTART)
*         GEN(USING @PSTART,@11);   /* ESTABLISH ADDRESSING          */
         USING @PSTART,@11
*       END I13;                    /* FREE BUFFER.          @X04SVLP*/
*       RPARM1=DIWSAVE2;            /* RESTORE CURRENT RBA.  @X04SVRQ*/
         L     @10,AMBIWA(,RAMB)                                   0333
         L     RPARM1,DIWSAVE2(,@10)                               0333
*     END;                          /* END OF DATA PREFORMAT         */
*                                                                  0334
*   /*****************************************************************/
*   /*                                                               */
*   /* ***** INDEX PREFORMAT *****                                   */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0335
*   ELSE                                                           0335
*     DO;                                                          0335
         B     @RC00166                                            0335
@RF00166 DS    0H                                                  0336
*       DO;                         /* SET OUTPUT RBA                */
*         BUFCORBA=RPARM1;                                         0337
         ST    RPARM1,BUFCORBA(,RBUFC)                             0337
*         BUFCMW=ON;                /* SET MUST WRITE                */
         OI    BUFCMW(RBUFC),B'10000000'                           0338
*       END;                        /* PREPARE BFR FOR OUTPUT        */
*I15:                                                              0340
*       DO;                         /* IDACALL(IDAWRBFR)             */
I15      DS    0H                                                  0341
*         CALL IDAWRBFR;            /* EXIT TO IDAWRBFR              */
         L     @15,@CV00892                                        0341
         BALR  @14,@15                                             0341
*         GEN(BALR @11,0);          /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*         GEN(USING *,@11);         /* ESTABLISH ADDRESSING          */
         USING *,@11
*         GEN(L     @11,=A(@PSTART));/* RELOAD BASE                  */
         L     @11,=A(@PSTART)
*         GEN(USING @PSTART,@11);   /* ESTABLISH ADDRESSING          */
         USING @PSTART,@11
*       END I15;                    /* WRITE OUT INDEX PF            */
*       IF AMBGSR=ON×AMBLSR=ON THEN /* SHR RESOURCE.         @X04SVRQ*/
         TM    AMBGSR(RAMB),B'01100000'                            0347
         BZ    @RF00347                                            0347
*         DO;                       /*                       @X04SVRQ*/
*           BUFCFMT=OFF;            /* TURN OFF FORMAT WRITE @X04SVRQ*/
*           BUFCPFCP=OFF;           /* TURN OFF CP COMPLETE. @X04SVRQ*/
         NI    BUFCFMT(RBUFC),B'10111101'                          0350
*         END;                      /*                       @X04SVRQ*/
*I16:                                                              0352
*       DO;                         /* IDACALL(IDAFREEB)             */
@RF00347 DS    0H                                                  0352
I16      DS    0H                                                  0353
*         CALL IDAFREEB;            /* EXIT TO IDAFREEB              */
         L     @15,@CV00894                                        0353
         BALR  @14,@15                                             0353
*         GEN(BALR @11,0);          /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*         GEN(USING *,@11);         /* ESTABLISH ADDRESSING          */
         USING *,@11
*         GEN(L     @11,=A(@PSTART));/* RELOAD BASE                  */
         L     @11,=A(@PSTART)
*         GEN(USING @PSTART,@11);   /* ESTABLISH ADDRESSING          */
         USING @PSTART,@11
*       END I16;                    /* FREE INDEX BUFFER.    @X04SVRQ*/
*     END;                          /* END OF INDEX PREFORMAT        */
*   RFY                                                            0360
*     R14 RSTD;                     /* GET REGISTER                  */
@RC00166 DS    0H                                                  0361
*PFEXIT:                            /* PREPARE TO RETURN             */
*   GEN(IDARST14);                  /* RESTORE RETURN REGISTER       */
PFEXIT   IDARST14
*   RETURN;                         /* RETURN TO CALLER              */
@EL00001 DS    0H                                                  0362
@EF00001 DS    0H                                                  0362
@ER00001 BR    @14                                                 0362
*PFERRX:                                                           0363
*   AMBLDTA->AMBIWA->DIWPFERR=ON;   /* INDICATE PF ERROR             */
PFERRX   L     @15,RPLDACB(,RRPL)                                  0363
         L     @15,ACBAMBL(,@15)                                   0363
         L     @15,AMBLDTA(,@15)                                   0363
         L     @15,AMBIWA(,@15)                                    0363
         OI    DIWPFERR(@15),B'00100000'                           0363
*PFEXIT2:                           /* NORMAL EXIT           @ZA07543*/
*   IF AMBGSR=ON×AMBLSR=ON THEN     /* SHR RESOURCE.         @X04SVRQ*/
PFEXIT2  TM    AMBGSR(RAMB),B'01100000'                            0364
         BZ    @RF00364                                            0364
*     DO;                           /*                       @X04SVRQ*/
*       BUFCFMT=OFF;                /* TURN OFF FORMAT WRITE @X04SVRQ*/
*       BUFCPFCP=OFF;               /* TURN OFF CP COMPLETE. @X04SVRQ*/
         NI    BUFCFMT(RBUFC),B'10111101'                          0367
*     END;                          /*                       @X04SVRQ*/
*   IF AMBTYPE=AMBDATA              /* DATA PREFORMAT?               */
*     THEN                          /* FREE INSERT BUFC.             */
@RF00364 TM    AMBTYPE(RAMB),B'01000000'                           0369
         BNZ   @RF00369                                            0369
*     DO;                                                          0370
*       RBUFC=DIWBUFC;              /* POINT TO INSERT BUFC  @X04SVRQ*/
         L     @15,AMBIWA(,RAMB)                                   0371
         L     RBUFC,DIWBUFC(,@15)                                 0371
*I17:                                                              0372
*       DO;                         /* IDACALL(IDAFREEB)             */
I17      DS    0H                                                  0373
*         CALL IDAFREEB;            /* EXIT TO IDAFREEB              */
         L     @15,@CV00894                                        0373
         BALR  @14,@15                                             0373
*         GEN(BALR @11,0);          /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*         GEN(USING *,@11);         /* ESTABLISH ADDRESSING          */
         USING *,@11
*         GEN(L     @11,=A(@PSTART));/* RELOAD BASE                  */
         L     @11,=A(@PSTART)
*         GEN(USING @PSTART,@11);   /* ESTABLISH ADDRESSING          */
         USING @PSTART,@11
*       END I17;                    /* FREE BUFFER           @X04SVLP*/
*     END;                          /* END OF FREE INS BUFC.         */
*   GO TO PFEXIT;                   /* RETURN TO CALLER              */
         B     PFEXIT                                              0380
*                                                                  0381
*   /*****************************************************************/
*   /*                                                               */
*   /* EDB SEARCH --- SEARCH FOR EDB & LOCATE LPMB. SAVE NO. OF BYTES*/
*   /* PER TRACK.                                                    */
*   /*                                                               */
*   /*****************************************************************/
*                                                                  0381
*EDBSRCH:                           /*                       @X04SVRQ*/
*   PROC OPTIONS(NOSAVE,NOSAVEAREA);/*                       @X04SVRQ*/
EDBSRCH  DS    0H                                                  0382
*   RFY                                                            0382
*     R14 RSTD;                     /* RESTRICT RETURN REG.  @X04SVRQ*/
*   RFY                                                            0383
*    (RWORK2,                                                      0383
*     RWORK3) RSTD;                 /* GET WORK REGS.        @X04SVRQ*/
*   RWORK2=ADDR(IDAEDBHD)+LENGTH(IDAEDBHD);/* POINT TO 1ST EDB.    0384
*                                                            @X04SVRQ*/
         LA    RWORK2,8                                            0384
         AL    RWORK2,AMBEDB(,RAMB)                                0384
*   RWORK3=ONE;                     /* SET CTR TO ZERO.      @X04SVRQ*/
         LA    RWORK3,1                                            0385
*   DO WHILE(RPARM1>EDBHIRBA×RPARM1<EDBLORBA);/* SEARCH EDB'S FOR  0386
*                                      INPUT RBA.            @X04SVRQ*/
         B     @DE00386                                            0386
@DL00386 DS    0H                                                  0387
*     IF RWORK3<EDBNO THEN          /* NOT LAST EDB.         @X04SVRQ*/
         L     @15,AMBEDB(,RAMB)                                   0387
         SLR   @10,@10                                             0387
         IC    @10,EDBNO(,@15)                                     0387
         CR    RWORK3,@10                                          0387
         BNL   @RF00387                                            0387
*       DO;                         /*                       @X04SVRQ*/
*         RWORK3=RWORK3+ONE;        /* INCR EDB CTR.         @X04SVRQ*/
         AL    RWORK3,@CF00053                                     0389
*         RWORK2=RWORK2+LENGTH(IDAEDB);/* POINT TO NEXT EDB. @X04SVRQ*/
         AL    RWORK2,@CF00116                                     0390
*       END;                        /*                       @X04SVRQ*/
*     ELSE                          /* END OF EDB'S.         @X04SVRQ*/
*       DO;                         /* GET VOLUME MOUNTED.   @X04SVRQ*/
         B     @RC00387                                            0392
@RF00387 DS    0H                                                  0393
*         PLHEOVR=AMBEOVMR;         /* SET EOV REQ CODE.     @X04SVRQ*/
         MVI   PLHEOVR(RPLH),B'10000001'                           0393
*         PLHEOVPT=ADDR(AMBLDTA->AMBIWA->DIWSAVE1);/* POINT TO RBA TO
*                                      MOUNT.                @X04SVRQ*/
         L     @15,RPLDACB(,RRPL)                                  0394
         L     @15,ACBAMBL(,@15)                                   0394
         L     @15,AMBLDTA(,@15)                                   0394
         L     @15,AMBIWA(,@15)                                    0394
         LA    @15,DIWSAVE1(,@15)                                  0394
         ST    @15,PLHEOVPT(,RPLH)                                 0394
*         GEN(IDASVR14);            /* SAVE REGISTER 14.     @X04SVRQ*/
         IDASVR14
*I18:                                                              0396
*         DO;                       /* IDACALL(IDAEOVIF)             */
I18      DS    0H                                                  0397
*           CALL IDAEOVIF;          /* EXIT TO IDAEOVIF              */
         L     @15,@CV00893                                        0397
         BALR  @14,@15                                             0397
*           GEN(BALR @11,0);        /* LOAD ADDR OF REENTRY          */
         BALR @11,0
*           GEN(USING *,@11);       /* ESTABLISH ADDRESSING          */
         USING *,@11
*           GEN(L     @11,=A(@PSTART));/* RELOAD BASE                */
         L     @11,=A(@PSTART)
*           GEN(USING @PSTART,@11); /* ESTABLISH ADDRESSING          */
         USING @PSTART,@11
*         END I18;                  /* CALL EOV INTERFACE TO MOUNT 0402
*                                      VOLUME.               @X04SVRQ*/
*         GEN(IDARST14);            /* RESTORE REGISTER 14.  @X04SVRQ*/
         IDARST14
*         IF RPLERREG^='00'X THEN   /* EOV ERROR.            @X04SVRQ*/
         CLI   RPLERREG(RRPL),0                                    0404
         BNE   @RT00404                                            0404
*           RETURN;                 /* RETURN TO CALLER.     @X04SVRQ*/
*         RWORK3=ONE;               /* RESET EDB CTR TO RE-SEARCH  0406
*                                      EDB'S.                @X04SVRQ*/
         LA    RWORK3,1                                            0406
*         RWORK2=ADDR(IDAEDBHD)+LENGTH(IDAEDBHD);/* POINT TO 1ST EDB.
*                                                            @X04SVRQ*/
         LA    RWORK2,8                                            0407
         AL    RWORK2,AMBEDB(,RAMB)                                0407
*       END;                        /* END VOLUME MOUNT.     @X04SVRQ*/
*   END;                            /* END EDB SEARCH.       @X04SVRQ*/
@RC00387 DS    0H                                                  0409
@DE00386 CL    RPARM1,EDBHIRBA(,RWORK2)                            0409
         BH    @DL00386                                            0409
         CL    RPARM1,EDBLORBA(,RWORK2)                            0409
         BL    @DL00386                                            0409
*   AMBLDTA->AMBIWA->DIWRKCT=LPMBPTRK;/* SAVE AMOUNT WRITTEN @X04SVRQ*/
         L     @15,RPLDACB(,RRPL)                                  0410
         L     @15,ACBAMBL(,@15)                                   0410
         L     @15,AMBLDTA(,@15)                                   0410
         L     @15,AMBIWA(,@15)                                    0410
         L     @10,EDBLPMBA(,RWORK2)                               0410
         L     @10,LPMBPTRK(,@10)                                  0410
         ST    @10,DIWRKCT(,@15)                                   0410
*   RETURN;                         /* RETURN TO CALLER.     @X04SVRQ*/
@EL00002 DS    0H                                                  0411
@EF00002 DS    0H                                                  0411
@ER00002 BR    @14                                                 0411
*   RFY                                                            0412
*     R14 UNRSTD;                   /* FREE RETURN REG.      @X04SVRQ*/
*   RFY                                                            0413
*    (RWORK2,                                                      0413
*     RWORK3) UNRSTD;               /* FREE WORK REGS.       @X04SVRQ*/
*   END EDBSRCH;                    /* END PROC EDBSRCH.     @X04SVRQ*/
         B     @EL00002                                            0414
*   GEN(IDAPATCH);                  /* DEFINE A PATCH AREA           */
         IDAPATCH
*   END IDA019RK                    /* END OF PREFORMAT RTN          */
*                                                                  0416
*/* THE FOLLOWING INCLUDE STATEMENTS WERE FOUND IN THIS PROGRAM.     */
*/*%INCLUDE SYSLIB  (IDAREGS )                                       */
*/*%INCLUDE SYSLIB  (LCGPLSSW)                                       */
*/*%INCLUDE SYSLIB  (IDAAMB  )                                       */
*/*%INCLUDE SYSLIB  (IDADIWA )                                       */
*/*%INCLUDE SYSLIB  (IDAARDB )                                       */
*/*%INCLUDE SYSLIB  (IDAAMDSB)                                       */
*/*%INCLUDE SYSLIB  (IDAEDB  )                                       */
*/*%INCLUDE SYSLIB  (IDALPMB )                                       */
*/*%INCLUDE SYSLIB  (IDABUFC )                                       */
*/*%INCLUDE SYSLIB  (IDAPLH  )                                       */
*/*%INCLUDE SYSLIB  (IDAAMBL )                                       */
*/*%INCLUDE SYSLIB  (IFGACB  )                                       */
*/*%INCLUDE SYSLIB  (IFGRPL  )                                       */
*/*%INCLUDE SYSLIB  (IDACIDF )                                       */
*/*%INCLUDE SYSLIB  (IDARDF  )                                       */
*                                                                  0416
*       ;                                                          0416
         B     @EL00001                                            0416
@DATA    DS    0H
@DATD    DSECT
         DS    0F
IDA019RK CSECT
         DS    0F
@CF00053 DC    F'1'
@CF00097 DC    F'3'
@CH00097 EQU   @CF00097+2
@CF00067 DC    F'4'
@CF00116 DC    F'24'
@DATD    DSECT
         DS    0D
IDA019RK CSECT
         DS    0F
@SIZDATD DC    AL1(0)
         DC    AL3(@ENDDATD-@DATD)
@CV00891 DC    V(IDAGNFL)
@CV00892 DC    V(IDAWRBFR)
@CV00893 DC    V(IDAEOVIF)
@CV00894 DC    V(IDAFREEB)
         DS    0D
HWORD4   DC    H'4'
@DATD    DSECT
*                                                          /*@X04SVLC*/
RDFCTNUA EQU   X'40'                    COMPLEX RDF INDICATOR
RDFCTNUX EQU   X'FF'-RDFCTNUA           RESET COMPLEX MASK
RDFREPLA EQU   X'08'                    COUNT RDF INDICATOR
RDFREPLX EQU   X'FF'-RDFREPLA           RESET COUNT MASK
RDFEMPTI EQU   X'04'                    EMPTY RECORD       /*@X04SVLC*/
RDFLEN   EQU   3                        LENGTH OF RDF
RDFLLOFF EQU   1                        OFFSET WITHIN RDF TO LL
RDFSGLR  EQU   X'00'                   MASK FOR SINGLE RECORD RDF
RDFGRP   EQU   RDFCTNUA                 MASK FOR LL RDF OF A GROUP RDF
RDFCNT   EQU   RDFREPLA                 MASK FOR COUNT RDF
@DATD    DSECT
         ORG   *+1-(*-@DATD)/(*-@DATD) INSURE DSECT DATA
@ENDDATD EQU   *
IDA019RK CSECT
@00      EQU   00                      EQUATES FOR REGISTERS 0-15
@01      EQU   01
@02      EQU   02
@03      EQU   03
@04      EQU   04
@05      EQU   05
@06      EQU   06
@07      EQU   07
@08      EQU   08
@09      EQU   09
@10      EQU   10
@11      EQU   11
@12      EQU   12
@13      EQU   13
@14      EQU   14
@15      EQU   15
RRPL     EQU   @01
RPLH     EQU   @02
RAMB     EQU   @03
RBUFC    EQU   @04
RWORK1   EQU   @05
RWORK2   EQU   @06
RWORK3   EQU   @07
RWORK4   EQU   @08
RWORK5   EQU   @09
RPARM1   EQU   @12
R14      EQU   @14
RPARM1X  EQU   @12
RWORK0   EQU   @00
R1       EQU   @01
R10      EQU   @10
R11      EQU   @11
R13      EQU   @13
R15      EQU   @15
IDAAMB   EQU   0
AMBBUFC  EQU   IDAAMB+8
AMBDSB   EQU   IDAAMB+20
AMBEOVR  EQU   IDAAMB+24
AMBFLG0  EQU   AMBEOVR
AMBPSDS  EQU   AMBFLG0
AMBFLG1  EQU   IDAAMB+25
AMBTYPE  EQU   AMBFLG1
AMBSPEED EQU   AMBFLG1
AMBDSORG EQU   IDAAMB+26
AMBIOBAD EQU   IDAAMB+28
AMBINFL  EQU   IDAAMB+42
AMBDEBPT EQU   IDAAMB+44
AMBOFLGS EQU   IDAAMB+48
AMBFLG2  EQU   IDAAMB+49
AMBEDB   EQU   IDAAMB+52
AMBEOVPT EQU   IDAAMB+56
AMBIWA   EQU   IDAAMB+64
AMBCSWD1 EQU   IDAAMB+84
AMBAFLG  EQU   AMBCSWD1
AMBLSR   EQU   AMBAFLG
AMBGSR   EQU   AMBAFLG
IDADIWA  EQU   0
DIWFLG1  EQU   IDADIWA+4
DIWPFERR EQU   DIWFLG1
DIWEOKR  EQU   DIWFLG1
DIWFLG2  EQU   IDADIWA+5
DIWFSPF  EQU   DIWFLG2
DIWBUFC  EQU   IDADIWA+20
DIWSAVE  EQU   IDADIWA+28
DIWSAVE1 EQU   DIWSAVE
DIWSAVE2 EQU   DIWSAVE+4
DIWSAVE4 EQU   DIWSAVE+12
DIWRKCT  EQU   IDADIWA+48
IDAARDB  EQU   0
ARDTYPE  EQU   IDAARDB+1
ARDHKRBA EQU   IDAARDB+8
ARDERBA  EQU   IDAARDB+16
ARDPRF   EQU   IDAARDB+28
ARDPRFMT EQU   ARDPRF
IDAAMDSB EQU   0
AMDATTR  EQU   IDAAMDSB+1
AMDDST   EQU   AMDATTR
AMDRRDS  EQU   AMDATTR
AMDNEST  EQU   IDAAMDSB+4
AMDCIPCA EQU   IDAAMDSB+12
AMDCINV  EQU   IDAAMDSB+20
AMDLRECL EQU   IDAAMDSB+24
AMDHLRBA EQU   IDAAMDSB+28
AMDNSLOT EQU   AMDHLRBA
AMDSSRBA EQU   IDAAMDSB+32
AMDATTR3 EQU   IDAAMDSB+40
AMDSTAT  EQU   IDAAMDSB+48
IDAEDBHD EQU   0
EDBNO    EQU   IDAEDBHD+1
IDAEDB   EQU   0
EDBFLG1  EQU   IDAEDB+2
EDBLPMBA EQU   IDAEDB+4
EDBLORBA EQU   IDAEDB+12
EDBHIRBA EQU   IDAEDB+16
IDALPMB  EQU   0
LPMBFLGS EQU   IDALPMB+1
LPMBPTRK EQU   IDALPMB+8
LPMBLKSZ EQU   IDALPMB+12
IDABUFDR EQU   0
BUFDRPFB EQU   IDABUFDR+4
BUFDRPFN EQU   IDABUFDR+8
BUFDRCIX EQU   IDABUFDR+9
BUFDRFLG EQU   IDABUFDR+11
IDABUFC  EQU   0
BUFCAVL  EQU   IDABUFC
BUFCFLG1 EQU   IDABUFC+1
BUFCIOFL EQU   IDABUFC+2
BUFCMW   EQU   BUFCIOFL
BUFCFMT  EQU   BUFCIOFL
BUFCPFCP EQU   BUFCIOFL
BUFCFLG2 EQU   IDABUFC+3
BUFCPLH  EQU   IDABUFC+4
BUFCORBA EQU   IDABUFC+12
BUFCBAD  EQU   IDABUFC+20
BUFCNXT1 EQU   IDABUFC+24
BUFCINV  EQU   IDABUFC+28
IDAPLHDR EQU   0
IDAPLH   EQU   0
PLHFLG1  EQU   IDAPLH+2
PLHENDRQ EQU   PLHFLG1
PLHFLG2  EQU   IDAPLH+3
PLHEFLGS EQU   IDAPLH+4
PLHFLG3  EQU   IDAPLH+6
PLHAFLGS EQU   IDAPLH+7
PLHCRBA  EQU   IDAPLH+28
PLHJORBA EQU   PLHCRBA
PLHJCODE EQU   IDAPLH+40
PLHEOVR  EQU   IDAPLH+42
PLHARDB  EQU   IDAPLH+44
PLHDIOB  EQU   IDAPLH+76
PLHRETO  EQU   IDAPLH+116
PLHRET1  EQU   IDAPLH+120
PLHEOVPT EQU   IDAPLH+180
PLHIBUFC EQU   IDAPLH+188
PLHIXSPL EQU   IDAPLH+200
PLHSSRBA EQU   PLHIXSPL
PLHWAX   EQU   IDAPLH+232
PLHKEYPT EQU   IDAPLH+248
PLHEND   EQU   IDAPLH+280
IDAAMBL  EQU   0
AMBLEOV  EQU   IDAAMBL+12
AMBLEFLG EQU   AMBLEOV
AMBLDDNM EQU   IDAAMBL+16
AMBLIDF  EQU   AMBLDDNM
AMBLQ    EQU   AMBLIDF+7
AMBLVC   EQU   IDAAMBL+28
AMBLTYPE EQU   IDAAMBL+30
AMBLSHAR EQU   IDAAMBL+33
AMBLFLG1 EQU   IDAAMBL+35
AMBLFLG2 EQU   IDAAMBL+36
AMBLDTA  EQU   IDAAMBL+52
IFGACB   EQU   0
ACBCOMN  EQU   IFGACB
ACBLENG  EQU   ACBCOMN+2
ACBLENG2 EQU   ACBLENG
ACBAMBL  EQU   ACBCOMN+4
ACBJWA   EQU   ACBAMBL
ACBMACRF EQU   ACBCOMN+12
ACBMACR1 EQU   ACBMACRF
ACBADR   EQU   ACBMACR1
ACBCNV   EQU   ACBMACR1
ACBMACR2 EQU   ACBMACRF+1
ACBBUFPL EQU   ACBCOMN+20
ACBMACR3 EQU   ACBBUFPL
ACBRECFM EQU   ACBCOMN+24
ACBCCTYP EQU   ACBCOMN+25
ACBOPT   EQU   ACBCOMN+26
ACBDSORG EQU   ACBOPT
ACBCROPS EQU   ACBDSORG
ACBEXLST EQU   ACBCOMN+36
ACBDDNM  EQU   ACBCOMN+40
ACBAMETH EQU   ACBDDNM+3
ACBOFLGS EQU   ACBCOMN+48
ACBEXFG  EQU   ACBOFLGS
ACBIOSFG EQU   ACBOFLGS
ACBINFLG EQU   ACBCOMN+50
ACBUJFCB EQU   ACBCOMN+52
ACBBLKSZ EQU   ACBCOMN+60
IFGRPL   EQU   0
RPLCOMN  EQU   IFGRPL
RPLIDWD  EQU   RPLCOMN
RPLLEN   EQU   RPLIDWD+3
RPLECB   EQU   RPLCOMN+8
RPLFDBWD EQU   RPLCOMN+12
RPLFDBK  EQU   RPLFDBWD+1
RPLRTNCD EQU   RPLFDBK
RPLERREG EQU   RPLRTNCD
RPLCNDCD EQU   RPLFDBK+1
RPLCMPON EQU   RPLCNDCD
RPLFDB2  EQU   RPLCMPON
RPLERRCD EQU   RPLCNDCD+1
RPLFDB3  EQU   RPLERRCD
RPLKEYLE EQU   RPLCOMN+16
RPLDACB  EQU   RPLCOMN+24
RPLARG   EQU   RPLCOMN+36
RPLOPTCD EQU   RPLCOMN+40
RPLOPT1  EQU   RPLOPTCD
RPLECBSW EQU   RPLOPT1
RPLOPT2  EQU   RPLOPTCD+1
RPLADR   EQU   RPLOPT2
RPLOPT3  EQU   RPLOPTCD+2
RPLNXTRP EQU   RPLCOMN+44
RPLOPTC2 EQU   RPLCOMN+56
RPLOPT5  EQU   RPLOPTC2
RPLWRTYP EQU   RPLOPT5
RPLOPT6  EQU   RPLOPTC2+1
RPLUNTYP EQU   RPLOPT6
RPLOPT7  EQU   RPLOPTC2+2
RPLCNOPT EQU   RPLOPT7
RPLOPT8  EQU   RPLOPTC2+3
RPLRBAR  EQU   RPLCOMN+60
RPLAIXID EQU   RPLRBAR+2
RPLEXTDS EQU   RPLCOMN+68
RPLEXTD1 EQU   RPLEXTDS
IDACIDF  EQU   0
CIDFOSET EQU   IDACIDF
CIDFLL   EQU   IDACIDF+2
IDARDF   EQU   0
RDFRBYTE EQU   IDARDF
RDFSEG   EQU   RDFRBYTE
RDFEMPTY EQU   RDFRBYTE
RDFLL    EQU   IDARDF+1
IDADATA  EQU   0
IDAKEY   EQU   0
PLHKEY   EQU   0
PLHPDL   EQU   0
PLHPDLE  EQU   0
PLHRRN   EQU   0
PLHEXTEN EQU   PLHEND
PLHBMWRK EQU   PLHEXTEN+5
DIWSAV1X EQU   DIWSAVE1
BUFCRSC1 EQU   BUFCAVL
         AGO   .@UNREFD                START UNREFERENCED COMPONENTS
PLHBMSV5 EQU   PLHEXTEN+24
PLHBMSV4 EQU   PLHEXTEN+20
PLHBMSV3 EQU   PLHEXTEN+16
PLHBMSV2 EQU   PLHEXTEN+12
PLHBMSV1 EQU   PLHEXTEN+8
PLHRDCNT EQU   PLHEXTEN+6
PLHBMSOV EQU   PLHBMWRK
PLHBEUC  EQU   PLHBMWRK
PLHBMRDF EQU   PLHBMWRK
@NM00041 EQU   PLHEXTEN+4
PLHRESR1 EQU   PLHEXTEN
KEY      EQU   IDAKEY
AMDATA   EQU   IDADATA
RDFREPL  EQU   RDFRBYTE
RDF1ST   EQU   RDFSEG
RDFNOT1  EQU   RDFSEG
RDFCTNU  EQU   RDFRBYTE
RDFTYPE  EQU   RDFRBYTE
@NM00062 EQU   CIDFLL
CIDFBUSY EQU   CIDFLL
RPLERMSA EQU   RPLCOMN+72
RPLEMLEN EQU   RPLCOMN+70
RPLACTIV EQU   RPLCOMN+69
RPLBRANC EQU   RPLEXTD1
RPLNIB   EQU   RPLEXTD1
@NM00061 EQU   RPLEXTD1
RPLEXIT  EQU   RPLEXTD1
RPLNEXIT EQU   RPLEXTD1
RPLEXSCH EQU   RPLEXTD1
RPLDDDD  EQU   RPLRBAR+4
@NM00060 EQU   RPLRBAR+3
@NM00059 EQU   RPLAIXID
RPLAXPKP EQU   RPLAIXID
RPLAIXPC EQU   RPLRBAR
RPLRSV88 EQU   RPLOPT8
RPLUNCON EQU   RPLOPT8
RPLACTV  EQU   RPLOPT8
RPLSESS  EQU   RPLOPT8
RPLPEND  EQU   RPLOPT8
RPLODPRM EQU   RPLOPT8
RPLODACP EQU   RPLOPT8
RPLODACQ EQU   RPLOPT8
RPLRSV78 EQU   RPLOPT7
RPLRSV77 EQU   RPLOPT7
RPLRLSOP EQU   RPLOPT7
RPLTPOST EQU   RPLOPT7
RPLQOPT  EQU   RPLOPT7
RPLCNIMM EQU   RPLCNOPT
RPLCNANY EQU   RPLCNOPT
RPLCNALL EQU   RPLCNOPT
RPLRSV68 EQU   RPLOPT6
RPLRSV67 EQU   RPLOPT6
RPLLOCK  EQU   RPLOPT6
RPLNCOND EQU   RPLOPT6
RPLCOND  EQU   RPLOPT6
RPLEOT   EQU   RPLUNTYP
RPLEOM   EQU   RPLUNTYP
RPLEOB   EQU   RPLUNTYP
RPLWROPT EQU   RPLOPT5
RPLNODE  EQU   RPLOPT5
RPLERACE EQU   RPLWRTYP
RPLEAU   EQU   RPLWRTYP
RPLNERAS EQU   RPLWRTYP
RPLPSOPT EQU   RPLOPT5
RPLSSNIN EQU   RPLOPT5
RPLDLGIN EQU   RPLOPT5
RPLBUFL  EQU   RPLCOMN+52
RPLRLEN  EQU   RPLCOMN+48
RPLCHAIN EQU   RPLNXTRP
RPLOPT4  EQU   RPLOPTCD+3
RPLALIGN EQU   RPLOPT3
RPLFMT   EQU   RPLOPT3
RPLFLD   EQU   RPLOPT3
RPLVFY   EQU   RPLOPT3
RPLBLK   EQU   RPLOPT3
RPLSFORM EQU   RPLOPT3
RPLEODS  EQU   RPLOPT3
RPLNSP   EQU   RPLOPT2
RPLUPD   EQU   RPLOPT2
RPLWAITX EQU   RPLOPT2
RPLLRD   EQU   RPLOPT2
RPLBWD   EQU   RPLOPT2
RPLCNV   EQU   RPLOPT2
RPLADD   EQU   RPLADR
RPLKEY   EQU   RPLOPT2
RPLECBIN EQU   RPLECBSW
RPLGEN   EQU   RPLOPT1
RPLKGE   EQU   RPLOPT1
RPLASY   EQU   RPLOPT1
RPLSKP   EQU   RPLOPT1
RPLSEQ   EQU   RPLOPT1
RPLDIR   EQU   RPLOPT1
RPLLOC   EQU   RPLOPT1
RPLDAF   EQU   RPLARG+2
RPLSAF   EQU   RPLARG
RPLAREA  EQU   RPLCOMN+32
RPLTCBPT EQU   RPLCOMN+28
RPLCCHAR EQU   RPLCOMN+20
RPLSTRID EQU   RPLCOMN+18
RPLKEYL  EQU   RPLKEYLE
RPLRDSOH EQU   RPLFDB3
RPLRLG   EQU   RPLFDB3
RPLLGFRC EQU   RPLFDB3
RPLREOT  EQU   RPLFDB3
RPLREOM  EQU   RPLFDB3
RPLREOB  EQU   RPLFDB3
RPLSV32  EQU   RPLFDB3
RPLUINPT EQU   RPLFDB3
RPLSTSAV EQU   RPLFDB2
RPLCUERR EQU   RPLFDB2
RPLDLGFL EQU   RPLFDB2
RPLIOERR EQU   RPLFDB2
RPLDVUNS EQU   RPLFDB2
RPLATND  EQU   RPLFDB2
RPLRVID  EQU   RPLFDB2
RPLERLK  EQU   RPLFDB2
RPLSTAT  EQU   RPLFDBWD
RPLPOST  EQU   RPLECB
RPLWAIT  EQU   RPLECB
RPLPLHPT EQU   RPLCOMN+4
RPLLEN2  EQU   RPLLEN
RPLREQ   EQU   RPLIDWD+2
RPLSTYP  EQU   RPLIDWD+1
RPLID    EQU   RPLIDWD
ACBAPID  EQU   ACBCOMN+72
ACBCBMWA EQU   ACBCOMN+68
ACBUAPTR EQU   ACBCOMN+64
ACBLRECL EQU   ACBCOMN+62
ACBMSGLN EQU   ACBBLKSZ
ACBBUFSP EQU   ACBCOMN+56
@NM00058 EQU   ACBUJFCB+1
ACBOPTN  EQU   ACBUJFCB
ACBVVIC  EQU   ACBINFLG
ACBUCRA  EQU   ACBINFLG
ACBSCRA  EQU   ACBINFLG
ACBCAT   EQU   ACBINFLG
ACBIJRQE EQU   ACBINFLG
ACBJEPS  EQU   ACBINFLG
@NM00057 EQU   ACBINFLG
ACBERFLG EQU   ACBCOMN+49
ACBBUSY  EQU   ACBIOSFG
ACBLOCK  EQU   ACBEXFG
@NM00056 EQU   ACBOFLGS
ACBDSERR EQU   ACBOFLGS
ACBOPEN  EQU   ACBOFLGS
ACBEOV   EQU   ACBOFLGS
@NM00055 EQU   ACBOFLGS
ACBDEB   EQU   ACBDDNM+5
ACBERFL  EQU   ACBDDNM+4
ACBAM    EQU   ACBAMETH
ACBINFL  EQU   ACBDDNM+2
ACBTIOT  EQU   ACBDDNM
ACBUEL   EQU   ACBEXLST
ACBPASSW EQU   ACBCOMN+32
ACBMSGAR EQU   ACBCOMN+28
@NM00054 EQU   ACBDSORG+1
ACBDORGA EQU   ACBDSORG+1
@NM00053 EQU   ACBDSORG
ACBCRNRE EQU   ACBCROPS
ACBCRNCK EQU   ACBCROPS
ACBASA   EQU   ACBCCTYP
@NM00052 EQU   ACBCCTYP
ACBRECAF EQU   ACBRECFM
ACBJBUF  EQU   ACBBUFPL+2
ACBMACR4 EQU   ACBBUFPL+1
@NM00051 EQU   ACBMACR3
ACBNCFX  EQU   ACBMACR3
ACBSIS   EQU   ACBMACR3
ACBDFR   EQU   ACBMACR3
ACBICI   EQU   ACBMACR3
ACBGSR   EQU   ACBMACR3
ACBLSR   EQU   ACBMACR3
@NM00050 EQU   ACBMACR3
ACBBUFNI EQU   ACBCOMN+18
ACBBUFND EQU   ACBCOMN+16
ACBSTRNO EQU   ACBCOMN+15
ACBBSTNO EQU   ACBCOMN+14
ACBAIX   EQU   ACBMACR2
ACBDSN   EQU   ACBMACR2
ACBRST   EQU   ACBMACR2
ACBLOGON EQU   ACBMACR2
ACBSKP   EQU   ACBMACR2
@NM00049 EQU   ACBMACR2
ACBUBF   EQU   ACBMACR1
ACBOUT   EQU   ACBMACR1
ACBIN    EQU   ACBMACR1
ACBDIR   EQU   ACBMACR1
ACBSEQ   EQU   ACBMACR1
ACBBLK   EQU   ACBCNV
ACBADD   EQU   ACBADR
ACBKEY   EQU   ACBMACR1
ACBINRTN EQU   ACBCOMN+8
ACBIBCT  EQU   ACBJWA
ACBLEN2  EQU   ACBLENG2
ACBSTYP  EQU   ACBCOMN+1
ACBID    EQU   ACBCOMN
AMBLCMB  EQU   IDAAMBL+64
AMBLBIB  EQU   IDAAMBL+60
AMBLIX   EQU   IDAAMBL+56
AMBLMIDS EQU   IDAAMBL+42
AMBLNIDS EQU   IDAAMBL+41
@NM00048 EQU   IDAAMBL+40
AMBLNUM  EQU   IDAAMBL+38
AMBLNST  EQU   IDAAMBL+37
@NM00047 EQU   AMBLFLG2
AMBLSTAG EQU   AMBLFLG2
@NM00046 EQU   AMBLFLG2
AMBLDUMY EQU   AMBLFLG1
AMBLCAT  EQU   AMBLFLG1
AMBLUCRA EQU   AMBLFLG1
AMBLSCRA EQU   AMBLFLG1
AMBLVVIC EQU   AMBLFLG1
AMBLUPD  EQU   AMBLFLG1
AMBLCINV EQU   AMBLFLG1
AMBLFULL EQU   AMBLFLG1
AMBLLEN  EQU   IDAAMBL+34
@NM00045 EQU   AMBLSHAR
AMBLWRIT EQU   AMBLSHAR
AMBLCATO EQU   AMBLSHAR
AMBLPRIM EQU   AMBLSHAR
AMBLID   EQU   IDAAMBL+32
@NM00044 EQU   IDAAMBL+31
@NM00043 EQU   AMBLTYPE
AMBLFIX  EQU   AMBLTYPE
AMBLBASE EQU   AMBLTYPE
AMBLAIX  EQU   AMBLTYPE
AMBLUPGR EQU   AMBLTYPE
AMBLPATH EQU   AMBLTYPE
AMBLENO  EQU   AMBLVC+1
AMBLVRT  EQU   AMBLVC
AMBLXPT  EQU   IDAAMBL+24
AMBLDFR  EQU   AMBLQ
AMBLESDS EQU   AMBLQ
AMBLKSDS EQU   AMBLQ
AMBLUBF  EQU   AMBLQ
AMBLFSTP EQU   AMBLQ
AMBLLSR  EQU   AMBLQ
AMBLGSR  EQU   AMBLQ
AMBLDDC  EQU   AMBLQ
AMBLDCI  EQU   AMBLIDF+4
AMBLCACB EQU   AMBLIDF
@NM00042 EQU   AMBLEOV+2
AMBLCOMP EQU   AMBLEOV+1
AMBLESET EQU   AMBLEFLG
AMBLWAIT EQU   AMBLEFLG
AMBLACB  EQU   IDAAMBL+8
AMBLSCHN EQU   IDAAMBL+4
AMBLPCHN EQU   IDAAMBL
PLHERRET EQU   IDAPLH+276
PLHASCB  EQU   IDAPLH+272
PLHECB   EQU   IDAPLH+268
@NM00040 EQU   IDAPLH+265
PLHDRMSK EQU   IDAPLH+264
PLHR13   EQU   IDAPLH+260
PLHPARM1 EQU   IDAPLH+256
PLHDRRSC EQU   IDAPLH+252
PLHSLRBA EQU   IDAPLH+244
PLHSRCSG EQU   IDAPLH+242
PLHNOSEG EQU   IDAPLH+240
PLHLLOR  EQU   IDAPLH+236
PLHXPLH  EQU   PLHWAX
@NM00039 EQU   PLHIXSPL+8
PLHIXBFC EQU   PLHIXSPL+4
PLHHIREC EQU   PLHSSRBA
PLHISPLP EQU   IDAPLH+196
PLHRBUFC EQU   IDAPLH+192
PLHNRBA  EQU   IDAPLH+184
PLHDDDD  EQU   PLHEOVPT
PLHAR14  EQU   IDAPLH+176
@NM00038 EQU   IDAPLH+172
@NM00037 EQU   IDAPLH+168
PLHASAVE EQU   IDAPLH+164
PLHRETOS EQU   IDAPLH+118
PLHCHAIN EQU   IDAPLH+112
PLHAMB   EQU   IDAPLH+108
PLHSAVE6 EQU   IDAPLH+104
PLHSAVE5 EQU   IDAPLH+100
PLHSAVE4 EQU   IDAPLH+96
PLHSAVE3 EQU   IDAPLH+92
PLHSAVE2 EQU   IDAPLH+88
PLHSAVE1 EQU   IDAPLH+84
PLHARET  EQU   IDAPLH+80
PLHIIOB  EQU   PLHDIOB
PLHSRSID EQU   IDAPLH+74
PLHRDFC  EQU   IDAPLH+72
PLHRDFP  EQU   IDAPLH+68
PLHFSP   EQU   IDAPLH+64
PLHRECP  EQU   IDAPLH+60
PLHNBUFC EQU   IDAPLH+56
PLHDBUFC EQU   IDAPLH+52
PLHLRECL EQU   IDAPLH+48
@NM00036 EQU   IDAPLH+43
PLHRCODE EQU   IDAPLH+41
PLHUCODE EQU   PLHJCODE
PLHJNRBA EQU   IDAPLH+36
PLHJRNLL EQU   IDAPLH+32
PLHUPECB EQU   PLHJORBA
PLHDSIDA EQU   IDAPLH+24
PLHCRPL  EQU   IDAPLH+20
PLHMRPL  EQU   IDAPLH+16
PLHBFRNO EQU   IDAPLH+15
PLHFRCNT EQU   IDAPLH+14
PLHRMIN  EQU   IDAPLH+13
PLHDSTYP EQU   IDAPLH+12
PLHACB   EQU   IDAPLH+8
PLHRAE   EQU   PLHAFLGS
PLHRABWD EQU   PLHAFLGS
PLHIOSID EQU   PLHAFLGS
PLHDBDC  EQU   PLHAFLGS
PLHVAMB  EQU   PLHAFLGS
PLHIOSRQ EQU   PLHAFLGS
PLHDRLM  EQU   PLHAFLGS
PLHEOVDF EQU   PLHFLG3
PLHRVRS  EQU   PLHFLG3
PLHBWD   EQU   PLHFLG3
PLHSLVLD EQU   PLHFLG3
PLHRAHD  EQU   PLHFLG3
PLHSRBSG EQU   PLHFLG3
@NM00035 EQU   PLHEFLGS+1
PLHRSTRT EQU   PLHEFLGS+1
PLHDSCAN EQU   PLHEFLGS
PLHINVAL EQU   PLHEFLGS
PLHEODX  EQU   PLHEFLGS
PLHNOADV EQU   PLHEFLGS
PLHSRINV EQU   PLHEFLGS
PLHSKPER EQU   PLHEFLGS
PLH1ST   EQU   PLHEFLGS
PLHNOSPC EQU   PLHEFLGS
PLHIWAIT EQU   PLHFLG2
PLHSVADV EQU   PLHFLG2
PLHCIINS EQU   PLHFLG2
PLHKRE   EQU   PLHFLG2
PLHADDTE EQU   PLHFLG2
PLHKEYMD EQU   PLHFLG2
PLHSQINS EQU   PLHFLG2
PLHUPD   EQU   PLHFLG2
@NM00034 EQU   PLHFLG1
PLHDRPND EQU   PLHFLG1
PLHASYRQ EQU   PLHFLG1
PLHRDEXC EQU   PLHFLG1
PLHSSR   EQU   PLHFLG1
PLHASKBF EQU   PLHFLG1
PLHEOVW  EQU   PLHFLG1
PLHATV   EQU   IDAPLH+1
PLHAVL   EQU   IDAPLH
PLHIOSDQ EQU   IDAPLHDR+12
PLHDRCUR EQU   IDAPLHDR+10
PLHDRMAX EQU   IDAPLHDR+8
PLHDRREQ EQU   IDAPLHDR+4
PLHELTH  EQU   IDAPLHDR+2
PLHCNT   EQU   IDAPLHDR+1
PLHID    EQU   IDAPLHDR
BUFCEND  EQU   IDABUFC+64
BUFCUCDN EQU   IDABUFC+60
BUFCUCUP EQU   IDABUFC+56
BUFCMDBT EQU   IDABUFC+52
BUFCHAIN EQU   IDABUFC+48
BUFXORBA EQU   IDABUFC+44
BUFXIRBA EQU   IDABUFC+40
BUFCNXT2 EQU   IDABUFC+37
BUFCIDXL EQU   IDABUFC+36
BUFCDSPC EQU   IDABUFC+32
BUFCWLEN EQU   BUFCINV
BUFCCPA  EQU   IDABUFC+16
BUFCDDDD EQU   IDABUFC+8
BUFCAMB  EQU   BUFCPLH
@NM00033 EQU   BUFCFLG2
BUFCEOD  EQU   BUFCFLG2
BUFCBSYW EQU   BUFCFLG2
BUFCBSYR EQU   BUFCFLG2
BUFCNLAS EQU   BUFCFLG2
BUFCXDDR EQU   BUFCFLG2
BUFCFIX  EQU   BUFCIOFL
BUFCXEDB EQU   BUFCIOFL
BUFCWC   EQU   BUFCIOFL
BUFCREAL EQU   BUFCIOFL
BUFCRRD  EQU   BUFCIOFL
BUFCEPT  EQU   BUFCFLG1
BUFCEXC  EQU   BUFCFLG1
BUFCVAL  EQU   BUFCFLG1
BUFCER2  EQU   BUFCFLG1
BUFCER1  EQU   BUFCFLG1
BUFCINS  EQU   BUFCFLG1
BUFCSEG  EQU   BUFCFLG1
BUFCUPG  EQU   BUFCFLG1
BUFCUCNT EQU   BUFCAVL
@NM00032 EQU   IDABUFDR+16
BUFDBUFC EQU   IDABUFDR+12
@NM00031 EQU   BUFDRFLG
BUFDRAVL EQU   BUFDRFLG
BUFDRREL EQU   BUFDRFLG
BUFDRTSB EQU   IDABUFDR+10
BUFDRMAX EQU   BUFDRCIX
BUFDRLEN EQU   IDABUFDR+2
BUFDRNO  EQU   IDABUFDR+1
BUFDRID  EQU   IDABUFDR
LPMBSST  EQU   IDALPMB+28
LPMBEXT  EQU   IDALPMB+24
@NM00030 EQU   IDALPMB+22
LPMBLKTR EQU   IDALPMB+20
LPMTPC   EQU   IDALPMB+18
LPMTRKAU EQU   IDALPMB+16
LPMAUSZ  EQU   IDALPMB+4
LPMBLEN  EQU   IDALPMB+2
@NM00029 EQU   LPMBFLGS
LPMBSSTH EQU   LPMBFLGS
LPMBTOFL EQU   LPMBFLGS
LPMSS    EQU   LPMBFLGS
LPMREPL  EQU   LPMBFLGS
LPMBRPS  EQU   LPMBFLGS
LPMBID   EQU   IDALPMB
EDBTKBAL EQU   IDAEDB+20
EDBSTTRK EQU   IDAEDB+8
EDBM     EQU   IDAEDB+3
@NM00028 EQU   EDBFLG1
EDBPSDS  EQU   EDBFLG1
EDBTOFLW EQU   EDBFLG1
EDBLKR   EQU   EDBFLG1
@NM00027 EQU   IDAEDB
EDBLPMBC EQU   IDAEDBHD+4
EDBLEN   EQU   IDAEDBHD+2
EDBID    EQU   IDAEDBHD
AMDEXCP  EQU   AMDSTAT+44
AMDNCAS  EQU   AMDSTAT+40
AMDNCIS  EQU   AMDSTAT+36
AMDASPA  EQU   AMDSTAT+32
AMDRETR  EQU   AMDSTAT+28
AMDUPR   EQU   AMDSTAT+24
AMDIREC  EQU   AMDSTAT+20
AMDDELR  EQU   AMDSTAT+16
AMDNLR   EQU   AMDSTAT+12
AMDNEXT  EQU   AMDSTAT+10
AMDNIL   EQU   AMDSTAT+8
AMDSTSP  EQU   AMDSTAT
@NM00026 EQU   IDAAMDSB+41
@NM00025 EQU   AMDATTR3
AMDLM    EQU   AMDATTR3
AMDWAIT  EQU   AMDATTR3
AMDBIND  EQU   AMDATTR3
AMDFAULT EQU   AMDATTR3
AMDUNQ   EQU   AMDATTR3
AMDPARDB EQU   IDAAMDSB+36
AMDMAXRR EQU   AMDSSRBA
AMDFSCI  EQU   IDAAMDSB+16
AMDFSCA  EQU   IDAAMDSB+14
AMDPCTCI EQU   IDAAMDSB+11
AMDPCTCA EQU   IDAAMDSB+10
AMDKEYLN EQU   IDAAMDSB+8
AMDRKP   EQU   IDAAMDSB+6
AMDAXRKP EQU   AMDNEST
AMDLEN   EQU   IDAAMDSB+2
AMDSPAN  EQU   AMDATTR
AMDRANGE EQU   AMDATTR
AMDORDER EQU   AMDATTR
AMDREPL  EQU   AMDATTR
AMDSDT   EQU   AMDATTR
AMDWCK   EQU   AMDATTR
AMDSBID  EQU   IDAAMDSB
ARDKEYS  EQU   IDAARDB+29
@NM00024 EQU   ARDPRF
ARDPRSS  EQU   ARDPRF
ARDRELNO EQU   IDAARDB+26
ARDVOLSR EQU   IDAARDB+20
ARDHRBA  EQU   IDAARDB+12
ARDNPTR  EQU   IDAARDB+4
ARDLEN   EQU   IDAARDB+2
ARDUSED  EQU   ARDTYPE
ARDEOD   EQU   ARDTYPE
ARDUOVFL EQU   ARDTYPE
ARDSS    EQU   ARDTYPE
ARDHLI   EQU   ARDTYPE
ARDKR    EQU   ARDTYPE
ARDID    EQU   IDAARDB
@NM00023 EQU   IDADIWA+92
@NM00022 EQU   IDADIWA+88
@NM00021 EQU   IDADIWA+84
@NM00020 EQU   IDADIWA+80
@NM00019 EQU   IDADIWA+76
@NM00018 EQU   IDADIWA+72
@NM00017 EQU   IDADIWA+68
@NM00016 EQU   IDADIWA+64
@NM00015 EQU   IDADIWA+60
@NM00014 EQU   IDADIWA+56
DIWINRBA EQU   IDADIWA+52
DIWSAVE5 EQU   DIWSAVE+16
DIWSAVE3 EQU   DIWSAVE+8
DIWSPLTP EQU   IDADIWA+24
DIWPLH   EQU   IDADIWA+16
DIWHRBA  EQU   IDADIWA+12
DIWLRBA  EQU   IDADIWA+8
@NM00013 EQU   IDADIWA+6
DIW1ST   EQU   DIWFLG1
DIWNOT1  EQU   DIWFLG1
DIWSHIFT EQU   DIWFLG1
DIWGSPC  EQU   DIWFLG1
DIWCISPL EQU   DIWFLG1
DIWCAS   EQU   DIWFLG1
DIWLEN   EQU   IDADIWA+2
DIWATV   EQU   IDADIWA+1
DIWID    EQU   IDADIWA
AMBTRACE EQU   IDAAMB+120
AMBVIOT  EQU   IDAAMB+116
AMBSZCP  EQU   IDAAMB+114
AMBSZFW  EQU   IDAAMB+112
AMBSZWR  EQU   IDAAMB+110
AMBSZRD  EQU   IDAAMB+108
AMBEXEX  EQU   IDAAMB+100
AMBWSHD  EQU   IDAAMB+96
AMBCPA   EQU   IDAAMB+92
AMBBM2SH EQU   IDAAMB+88
AMBRDCNT EQU   AMBCSWD1+2
@NM00012 EQU   AMBCSWD1+1
@NM00011 EQU   AMBAFLG
AMBCFX   EQU   AMBAFLG
AMBSIS   EQU   AMBAFLG
AMBDFR   EQU   AMBAFLG
AMBICI   EQU   AMBAFLG
@NM00010 EQU   AMBAFLG
AMBUPLH  EQU   IDAAMB+80
AMBPAMBL EQU   IDAAMB+76
AMBPIXP  EQU   IDAAMB+72
@NM00009 EQU   IDAAMB+68
AMBWKA   EQU   IDAAMB+60
AMBAMBXN EQU   AMBEOVPT
AMBRPT   EQU   IDAAMB+50
AMBPUG   EQU   AMBFLG2
AMBBUSY  EQU   AMBOFLGS
AMBEXFG  EQU   AMBOFLGS
@NM00008 EQU   AMBOFLGS
AMBOPEN  EQU   AMBOFLGS
@NM00007 EQU   AMBOFLGS
AMBDEBAD EQU   AMBDEBPT+1
AMBIFLGS EQU   AMBDEBPT
AMBAMETH EQU   IDAAMB+43
AMBUPX   EQU   AMBINFL
AMBUCRA  EQU   AMBINFL
AMBSCRA  EQU   AMBINFL
AMBCAT   EQU   AMBINFL
@NM00006 EQU   AMBINFL
@NM00005 EQU   AMBINFL
AMBTIOT  EQU   IDAAMB+40
@NM00004 EQU   IDAAMB+38
AMBDDSN  EQU   IDAAMB+35
AMBCDSN  EQU   IDAAMB+32
AMBIOMB  EQU   AMBIOBAD
@NM00003 EQU   AMBDSORG+1
AMBDORGA EQU   AMBDSORG+1
@NM00002 EQU   AMBDSORG
AMBINBUF EQU   AMBFLG1
AMBJRN   EQU   AMBFLG1
AMBUBF   EQU   AMBFLG1
AMBPCAT  EQU   AMBFLG1
AMBMCAT  EQU   AMBFLG1
AMBCREAT EQU   AMBFLG1
@NM00001 EQU   AMBFLG0
AMBCACB  EQU   IDAAMB+16
AMBPH    EQU   IDAAMB+12
AMBLINK  EQU   IDAAMB+4
AMBLEN   EQU   IDAAMB+2
AMBRSC   EQU   IDAAMB+1
AMBID    EQU   IDAAMB
.@UNREFD ANOP                          END UNREFERENCED COMPONENTS
@RC00116 EQU   @RC00114
@RT00138 EQU   PFEXIT
@RT00155 EQU   PFERRX
@RT00173 EQU   PFERRX
@RT00206 EQU   PFERRX
@RT00225 EQU   PFERRX
@RT00280 EQU   PFERRX
@RT00296 EQU   PFERRX
@RT00322 EQU   PFERRX
@RF00369 EQU   PFEXIT
@RT00404 EQU   @EL00002
@ENDDATA EQU   *
         END   IDA019RK,(C'PLS2043',0701,78172)
