*        %GOTO PLSCKP;                  /*
         MACRO
         TCKPD &MERLIN
.* CHANGE ACTIVITY = AS FOLLOWS:
.*C008000                                                       SA51078
.*A303000,305000,637000                                         SA51078
.*C498000-516000,598000                                          S99240
.*A595000                                                        S99240
.*A463000                                                       SA67099
.*A451000                                                      @OX16402
.*C472000                                                      @OX16402
         SPACE
*        UPDATED  10/4/72                                       SA51078
         SPACE
*THIS IS A DSECT OF THE CHECKPOINT WORK AREA POINTED TO BY AVTCKGET
*THIS IS USED ONLY BY CHECKPOINT ROUTINES.
*THE LENGTH IS VARIABLE AND DEPENDS ON THE INTRO OPERANDS CKREQS
*AND CPRCDS.  THE SPACE IS OBTAINED BY IGG01941 VIA GETMAIN.
         SPACE
IEDQCKPD DSECT
CKPSAVE1 DS    18F .                    SAVE AREA FOR LOAD MODULE
         SPACE 3
CKPIOB   EQU   * .                      IOB FOR CKPT DISK I/O
CKPIOFL1 DS    C .
CKPIOFL2 DS    C .
CKPIOSN0 DS    C .
CKPIOSN1 DS    C .
CKPIOECB DS    0A .                     ADDRESS OF ECB         @Y17XAXF
CKPIOECC DS    XL1 .                    COMPLETION CODE FOR I/O
*                                                              @Y17XAXF
CKPIOCOM EQU   X'7F' .                  COMPLETED SUCCESSFULLY @Y17XAXF
         DS    AL3 .                    RESERVED               @Y17XAXF
CKPIOFL3 DS    C .                      I/O ERROR FLAGS
CKPIOCSW DS    CL7 .                    CSW
CKPIOSIO DS    C .                      START I/O CONDITION CODES
CKPIOCPA DS    AL3 .                    CHANNEL PROGRAM ADDRESS
         DS    C
CKPIODCB DS    AL3 .                    DCB ADDRESS
         DS    C .                      REPOSITION MODIFIER
CKPIORST DS    AL3 .                    RESTART ADDR
CKPIOBCI DS    H .                      BLOCK CNT INCREMENT
CKPIORC  DS    H .                      ERROR COUNT
CKPIOM   DS    C .                      SEEK ADDRESS
CKPIOBB  DS    CL2
CKPIOCC  DS    CL2
CKPIOHH  DS    CL2
CKPIOR   DS    C
         SPACE
CKPECB   DS    F .                      ECB POSTED BY IOS
CKPEXCP  DS    F .                      CURRENT RECORD BEING WRITTN
CKPCNVRT EQU   * .                      USED FOR CVD INSTRUCTION
CKPECBL  EQU   * .                      ECB LIST FOR WAIT
CKPEPLOC DS    D .                      EPLOC FOR LOAD MACRO
CKPIOQF  DS    F .                      DISK I/O QUEUE-FIRST RECORD
CKPIOQL  DS    F .                      I/O QUEUE-LAST RECORD
         SPACE 3
CKPNDRB  EQU   X'80' .                  INDICATES NO DISK RECORD       X
                                        BUILT FOR NEXT REQUEST ELEM
CKPLREB  DS    F .                      ADDRESS OF LAST REQUEST        X
                                        ELEMENT FOR WHICH RECORD       X
                                        WAS BUILT
         SPACE 3
CKPLDRB  DS    F .                      ADDRESS OF LAST DISK RECORD    X
                                        BUILT
         SPACE 3
*THIS AREA US USED BY CKECKPOINT SUBTASK FOR 3705 CHECKPOINT
         SPACE
         ORG   CKPEXCP
         DS    CL7 .                    RESERVED               @Y17XAXF
CKPENCDE DS    XL1 .                    ENTRY CODE             @Y17XAXF
CKPIOERR EQU   40 .                     3705 ECECKPOINT IO ERROR
*                                                              @Y17XAXF
CKPGETFL EQU   4 .                      GETMAIN FOR 3705 RESOURCE
*                                        RECORD FAILED         @Y17XAXF
CKPEODAT EQU   8 .                      END OF 3705 CHECKPOINT DATA SET
*                                        REACHED               @Y17XAXF
CKPNTTE  DS    A .                      ADDRESS OF TERMINAL ENTRY
*                                        PREFIX FOR THE 3705   @Y17XAXF
CKPNDEVF DS    F .                      ADDRESS OF DEVICE DEPENDENT
*                                        FIELDS FOR THE 3705   @Y17XAXF
CKPNSELT DS    0F .                     SELECTOR FIELDS        @Y17XAXF
CKPSLVAL DS    0CL3 .                   CURRENT SELECT VALUES USED IN
*                                        SELECT VALUE SHIFT    @Y17XAXF
CKPCUSEL DS    AL1 .                    CURRENT SELECT VALUE   @Y17XAXF
CKPSLNEW DS    CL3 .                    NEW SELECT VALUES TO BE SHIFTED
*                                                              @Y17XAXF
CKPNTRK  DS    H .                      ALTERNATE RECORD INDICATOR
*                                                              @Y17XAXF
CKPNRSID DS    H .                      RESOURCE TO BE CHECKPOINTED OR
*                                        RESTARTED             @Y17XAXF
CKPNOTFY EQU   X'0A' .                  SELECT VALUE FOR REQUEST FOR
*                                        NOTIFICATION          @Y17XAXF
         ORG
         SPACE
*THIS AREA IS USED ONLY AT CHECKPOINT OPEN TIME
         SPACE
         ORG   CKPEXCP
         SPACE
*COUNT FIELD FOR WRITE COUNT,KEY AND DATA
         SPACE 3
CKPCYLNO DS    XL2 .                    CYLINDER NUMBER
CKPHEDNO DS    XL2 .                    HEAD NUMBER
CKPRCDNO DS    X .                      RECORD NUMBER
CKPKEYLN DS    X .                      KEY LENGTH
CKPDATLN DS    XL2 .                    DATA LENGTH
CKPCTTRC DS    F .                      CURRENT ENTRY IN CKREQ-TTR     X
                                        TABLE (USED AT RESTART)
CKPDATIM DS    2F .                     DATE,TIME OF TOTAL CKPT        X
                                        USED TO COMPARE                X
                                        WITH INCIDENT CKPT'S
CKPIPERE DS    H .                      NUMBER OF INCIDENTS OR         X
                                        CKREQ IN ONE ENVIRONMENT       X
                                        RECORD SEGMENT
CKPCTTRA DS    F .                      ADDRESS OF TTR OF THE          X
                                        ENVIRONMENT RECORD BEING       X
                                        USED FOR RESTART
         ORG
         SPACE 3
CKPSECTR DS    0X .                     SECTOR ID FOR SET SECTOR CMD415
CKPCTTRB DS    F .                      BEGINNING OF CKREQ TTR TBL
CKPCPARM DS    2F .                     PARAMETERS FOR CONVERT RTN     X
                                        ADDRESS OF DEB AND ADDRESS     X
                                        FOR CONVERSION RESULT
         AIF   ('&MERLIN' NE '3330').SKP1                          0419
CKPPARM2 DS    F .                      PARAMETER FOR SECTOR CNVRT 0415X
                                        ROUTINE (UCB TYPE AND ADDR)0415
.SKP1    ANOP                                                      0419
CKPCRLEN DS    X .                      LENGTH OF CONTROL RECORD
CKPSWCH1 DS    X .                      SWITCH FOR COMPARING           X
                                        QCB TO SEE IF IT HAS BEEN      X
                                        CHECKPOINTED
CKPSET1  EQU   X'1' .                   USED TO INVERTQCB SWITCH
CKPSWCH2 DS    X .                      SWITCH FOR COMPARING WITH      X
                                        INVITATION LIST TO SEE IF      X
                                        IT HAS BEEN CHECKPOINTED
CKPSET2  EQU   X'04' .                  USED TO INVERT INVLIST SW
CKPERRCT DS    X .                      COUNT OF ERRORS ENCOUNTERD 1109X
                                        IGG01943,ENVIRONMENT RCDS  1109
         SPACE 3
*CHANNEL PROGRAM USED FOR CHECKPOINT DATA SET
         SPACE
         DS    0D .
CKPCCWS  EQU   * .                      CHANNEL PROGRAM
CKPSEEKC DS    D .                      SEEK CYLINDER
         AIF   ('&MERLIN' NE '3330').SKP2                          0419
CKPSETSC DS    D .                      SET SECTOR OR NO-OP        0415
.SKP2    ANOP                                                      0419
CKPSCHID DS    D .                      SEARCH ID
CKPTIC   DS    D .                      TIC
CKPRW    DS    0D .                     READ/WRITE             @Y17XAXF
CKPRWCMD DS    XL1 .                    COMMAND CODE           @Y17XAXF
CKPRWADD DS    AL3 .                    DATA ADDRESS           @Y17XAXF
CKPRWFLG DS    XL1 .                    FLAGS                  @Y17XAXF
         DS    XL1 .                    RESERVED               @Y17XAXF
CKPWRBC  DS    H .                      BYTE COUNT             @Y17XAXF
CKPCCWND EQU   * .                      END OF CHANNEL PROGRAM     0415
CKPREAD  EQU   6 .                      READ DATA CCW
CKPWRITE EQU   5 .                      WRITE DATA CCW
CKPWCKD  EQU   29 .                     WRITE COUNT KEY AND DATA
CKPSET   EQU   35 .                     SET SECTOR CCW             0415
CKPNOOP  EQU   3 .                      NO-OP CCW-USED FOR NON-    0415X
                                        MERLIN SUPPORT
         SPACE
         ORG   CKPTIC+5 .               THIS PART OF TIC COMMAND IS    X
                                        NOT USED BY OS
CKPTTRLT DS    XL3 .                    TTR OF LAST TOTAL SEG WRITN
         ORG
         SPACE 3
*GETMAIN PARAMETER LIST
         SPACE
         DS    0F
CKPGETML DS    XL10 .                   GETMAIN LIST
CKPWKALN DS    H .                      LENGTH OF CKPT WORK AREA
         SPACE 3
*MESSAGE BUFFER USED FOR WTO
         SPACE
         DS    0F
CKPMSG   EQU   *
CKPMSGLN DS    XL2 .                    LENGTH OF MSG BUFFER
         DS    XL2
CKPMSGTX DS    XL37 .                   TEXT OF MESSAGE
CKPMSGTP DS    XL20 .                   TYPE OF CHECKPOINT RECORD
CKPMSGGL DS    XL4 .                    GETMAIN LENGTH WHICH COULD     X
                                        NOT BE SATISFIED
CKPMSGL  EQU   *-CKPMSG
         ORG   CKPMSGTP+6
CKPMSGPN DS    XL8
         ORG
         SPACE 3
*THE MESSAGE BUFFER IS SOMETIMES USED FOR TEMPORARY STORAGE
         SPACE
         ORG   CKPMSGTX
CKPSAVE2 DS    15F
CKPTRMAD DS    F .                      ADDRESS OF TERM ENTRY-USED     *
                                        TO GET IT ON WORD BOUNDARY
         ORG   CKPMSGTP
CKPRCDSR DS    H .                      NO. RECDS(SEGMENTS)REQUIRED    X
                                        FOR ONE ENV. CHECKPOINT
CKPTRKLN DS    H .                      LENGTH OF DATA ON A TRACK  0415X
                                        PRECEDING THE CURRENT RECRD0415
CKPTRKSA DS    H .                      NO.AVAILABLE TRACKS (IN        X
                                        DATA SET)
         ORG
         SPACE 3
*CHECKPOINT CONTROL RECORD -WRITTEN EVERY TIME AN ENVIRONMENT
*RECORD IS WRITTEN
         SPACE
         DS    0F
CKPCNTLR EQU   * .                      BEGINNING OF CONTROL RCD
         SPACE 3
CKPFLAGS DS    X .                      CONTROL RECORD FLAGS
CKPNORML EQU   X'80' .                  INDICATES NORMAL CLOSEDOWN
CKPOPNEN EQU   X'40' .                  OPEN-ENVIRONMENT FLAG
CKPFSCN1 EQU   X'40' .                  FIFO SCAN 1 IN PROGRESS SA51078
CKPOPNIN EQU   X'20' .                  OPEN-INCIDENT FLAG
CKPFSCN2 EQU   X'20' .                  FIFO SCAN 2 IN PROGRESS SA51078
CKPOPNCR EQU   X'10' .                  OPEN CKREQ FLAG
CKPERR   EQU   X'08' .                  INDICATES NO ENVIORNMENT   0818X
                                        RECORDS ARE AVAIBLE-DISK ER0818
CKPSTAIN EQU   X'04' .                  VALUE OF STARTUP PARAMETER     X
                                        USED AT RESTART TO DETERMIN    X
                                        IF INV LISTS WERE CKPT
CKPOPTFN EQU   X'02' .                  OPTION FIELDS PRESENT FOR      X
                                        AT LEAST ONE SYNC PROCESS      X
                                        ENTRY
CKPOPCRD EQU   X'01' .                  INDICATES INCIDENT RECORDS 0803X
                                        PRESENT FOR OPERATOR CONTROL
CKPTTRCT DS    XL1 .                    INDEX FOR CURRENT ENV CKPT
CKPINCNT DS    X .                      TOTAL NUMBER OF INCIDENT       X
                                        RECORDS IN DATA SET
CKPINCNO DS    X .                      NO. OF INCIDENT RECORDS        X
                                        AVAILABLE FOR USE
CKPCRRNO DS    XL1 .                    NO. OF CKREQ RECORDS           X
                                        ON 1ST TRACK CONTAINING        *
                                        CKREQ RECORDS
CKPTTRCR DS    XL3 .                    TTR OF 1ST CKREQ RECORD
CKPINRNO DS    XL1 .                    NO. OF INCIDENT RECORDS        X
                                        RECORD ON 1ST TRACK            *
                                        CONTAINING INCIDENT RECORDS
CKPTTRIN DS    XL3 .                    TTR OF 1ST INCIDENT RECORD
CKPBPERR DS    H .                      BYTES PER ENVIRONMENT          X
                                        RECORD SEGMENT
CKPCKRQS DS    X .                      VALUE OF CKREQS FOR LAST       X
                                        STARTUP-USED AT RESTART        X
                                        INSTEAD OF VALUE IN AVT
CKPCPRCD DS    X .                      VALUE OF CPRCDS AT LAST        X
                                        STARTUP-USED AT RESTART        X
                                        INSTEAD OF VALUE IN AVT
         DS    0F .
CKPIPERT DS    X .                      NO. OF INCIDENT RCDS PER TR
CKPPRQNO EQU   * .                      MAXIMUM NUMBER OF PRIORITY     X
                                        LEVEL QUEUES USED BY A SYNC    X
                                        PROCESS ENTRY-USED BY 1942
CKPCPERT DS    X .                      NUMBER OF CKREQ RECORDS PER    X
                                        TRACK-DETERMINED BY 1942       X
                                        AFTER USING CKPPRQNO
CKPCKRLN DS    H .                      LENGTH OF CKREQ RECORD-        X
                                        DEPENDS ON OPTION FIELDS       X
                                        AND PRIORITY LEVEL QUEUES.
CKPRPERT DS    X .                      NO. OF ENVIRONMENT RECORD      X
                                        SEGMENTS PER TRACK
CKPTTRLI DS    XL3 .                    TTR OF LAST INCIDENT WRITTN
CKPINCLN DS    H .                      LENGTH OF INCIDENT RECORD
         AIF   ('&MERLIN' NE '3330').SKP3                          0419
CKPSECLT DS    H .                      DATA ON TRACK PRECEDING    0415X
                                        CURRENT ENV SEGMENT        0415
CKPSECLI DS    H .                      DATA ON TRACK PRECEDING    0415X
                                        CURRENT INCIDENT RECORD    0415
CKPSECCR DS    H .                      DATA ON TRACK PRECEDING    0415X
                                        1ST CKREQ RECORD
CKPSECIN DS    H .                      DATA ON TRACK PRECEDING    0415X
                                        1ST INCIDENT RECORD        0415
.SKP3    ANOP                                                      0419
CKPTTRT1 EQU   * .                      3 BYTE TTR FOR 1ST ENV         X
                                        ALL OTHER TTRS FOLLOW THIS
CKPSECT1 EQU   CKPTTRT1+3 .             DATA ON TRACK PRECEDING    0415X
                                        1ST SEG OF ENV RECORD      0415
         AIF   ('&MERLIN' NE '3330').SKP4                          0419
CKPTTRLN EQU   5 .                      LENGTH OF ENTRY FOR ENV RCD0415
         AGO   .TTRLN                                              0419
.SKP4    ANOP                                                      0419
CKPTTRLN EQU   3 .                      LENGTH OF ENTRY FOR ENV RCD0419
.TTRLN   ANOP                                                      0419
CKPCREND EQU   * .                      END OF CONTROL RECORD
         SPACE 3
*MAPPING FOR THE CONTROL RECORD FOR A 3705 CKECKPOINT DATA SET @Y17XAXF
         SPACE
         ORG   CKPCNTLR
         DS    H .                      RESERVED               @Y17XAXF
CKPTRSTA DS    XL1 .                    STATUS FLAGS           @Y17XAXF
CKPSWTCH DS    XL1 .                    SWITCHES               @Y17XAXF
CKPIPLTX DS    CL8 .                    IPL TEXT NAME          @Y17XAXF
CKPBLKSZ DS    H .                      BLOCK SIZE             @Y17XAXF
         DS    H .                      RESERVED               @Y17XAXF
CKPTRKCN DS    H .                      TRACK CONSTANT USED FOR
*                                        ALTERNATE TRACK ASSIGNMENT
*                                                              @Y17XAXF
         DS    H .                      RESERVED               @Y17XAXF
CKPBLKPT DS    AL1 .                    BLOCKS PER TRACK       @Y17XAXF
         DS    XL1 .                    RESERVED               @Y17XAXF
CKPDATTM DS    0CL8 .                   DATE AND TIME          @Y17XAXF
CKPDATE  DS    CL4 .                     DATE                  @Y17XAXF
CKPTIME  DS    CL4 .                     TIME                  @Y17XAXF
CKPBCKUP DS    CL8 .                    BACKUP NAME            @Y17XAXF
         ORG
         SPACE 3
*THE FOLLOWING EQUATE MAY BE VARIED IN ORDER TO CHANGE THE SIZE OF
*AN ENVIRONMENT RECORD SEGMENT. THE ONLY MODULE WHICH MUST BE
*REASSEMBLED IS IGG01949.
         SPACE
CKPENVL  EQU   300 .                    LENGTH OF ENVIRONMENT RCD      X
                                        SEGMENT
         SPACE 3
*EQUATED CONSTANTS USED BY THE CHECKPOINT MODULES
         SPACE
CKPPOST  EQU   X'40' .                  ECB POSTED
CKP101   EQU   256 .                    CONSTANT USED TO BUMP TRACK
CKP100   EQU   100
CKPCKRNO EQU   3 .                      NO. EXTRA CKREQ RCDS-DSK ERR
CKPCMDCH EQU   X'42' .                  INDICATE COMMAND CHAINING
CKPRETNL EQU   4 .                      RETURN OFFSET TO CHECKPOINT
*                                        EXECUTOR FOR NO ADDITIONAL
*                                        LOAD REQUESTS         @Y17XAXF
CKPCKREQ EQU   48 .                     OFFSET FOR CKREQ ROUTINE
CKPENV   EQU   56 .                     OFFSET FOR ENV ROUTINE
CKPIOQM  EQU   64 .                     OFFSET FOR I/O QUEUE MANAGR
CKPDIOR  EQU   72 .                     OFFSET FOR DISK I/O ROUTINE
CKPNOTIF EQU   80 .                     OFFSET FOR NOTIF RTN
CKPNOCOR EQU   88 .                     OFFSET FOR NO AVAIL CORE
CKPNOINC EQU   96 .                     OFFSET FOR INCIDENT OVERFLO
CKPCNCP  EQU   104 .                    OFFSET FOR 3705 CHECKPOINT
*                                         ROUTINE              @Y17XAXF
CKPRNCP  EQU   112 .                    OFFSET FOR 3705 RESTART ROUTINE
*                                                              @Y17XAXF
CKPCNCPW EQU   120 .                    OFFSET FOR 3705 CHECKPOINT
*                                        WRITE ROUTINE         @Y17XAXF
CKPOPLTL EQU   10 .                     LENGTH OF OPT LENGTH ENTRY
CKP1BYTE EQU   8 .                      USED TO SHIFT 1 BYTE       0415
CKP2BYTE EQU   16 .                     USED TO SHIFT 2 BYTES      0415
CKP3BYTE EQU   24 .                     USED TO SHIFT 3 BYTES      0415
CKPCVTPT EQU   16 .                     ADDRESS OF CVT POINTER     0415
CKPCNTTR EQU   28 .                     DISPLACEMENT OF TTR CONVERT0415X
                                        ROUTINE ADDR IN CVT        0415
CKPCNSEC EQU   232 .                    DISPLACEMENT OF SECTOR     0415X
                                        ROUTINE ADDR IN CVT        0415
CKPDELMT EQU   C'*' .                   DELIMITER PLACED IN ENV RCD0422X
                                        BETWEEN DATA FOR EACH TERM 0422
CKPQDELM EQU   X'6C'                    DELIMITER FOR QCB ON
*                                        ENVIRONMENT RECORD    @OX16402
CKPDELLN EQU   1 .                      LENGTH OF DELIMITER FIELD  0422
CKPLTRLN EQU   1 .                      LENGTH OF LCBTRACE FLD @Y17XAXF
         SPACE 3
*LENGTHS OF CHECKPOINTED FIELDS
         SPACE
CKPSEQCT EQU   6 .                      LENGTH OF SEQ NUMBERS AND      *
                                        COUNT OF MSGS ON QUEUE
CKPSEQLN EQU   4 .                      LENGTH OF SEQUENCE NO.FIELD
CKPSENSE EQU   1                        LENGTH OF SENSE FIELD   SA67099
CKPMCTLN EQU   2 .                      LENGTH OF COUNT FIELD
CKPTRMLN EQU   1 .                      LENGTH OF TRM STATUS FIELD
CKPQCBLN EQU   21 .                     LENGTH OF PRIORITY LEVEL       X
                                        QCB DISK POINTERS
CKPMQBLN EQU   6                        LENGTH OF MASTER QCB
*                                        FIELDS PLUS DELIMITER @OX16402
CKPQBKLN EQU   3 .                      LENGTH OF QBACK POINTER
CKPLCBLN EQU   2 .                      LENGTH OF LCB STAT INFO    0918
CKPDCBLN EQU   1 .                      LENGTH OF DCB FIELDS       0731
CKPEND   EQU   * .                      END OF CKP WORK AREA
CKPLNGTH EQU   CKPEND-IEDQCKPD .        LNGTH OF FIXED PORTION OF      *
                                        CKPT WORK AREA
         SPACE 3
*THE OPERATOR CONTROL INCIDENT CHECKPOINT RECORD CONTAINS THE DATA 0629
*DEFINED IN OPERATOR CONTROL DSECT-OPCCKELE.   THE FOLLOWING DATA IS
*INCLUDED IN THE 32 BYTES .
         SPACE
CKPOCODE EQU   0 .                      COMMAND OPERATION TYPE
CKPOCSWC EQU   1 .                      OPERATION SUB-TYPE
CKPOCFLG EQU   2                        FLAG BYTE
         SPACE 1
CKPOCREL EQU   3 .                      RELATIVE LINE NUMBER
CKPALL   EQU   X'00' .                  INDICATES 'ALL' - NO RLN
         SPACE 1
CKPOCLNO EQU   10                       HEX LINE NUMBER
CKPOCNAM EQU   20 .                     DDNAME FOR START/STOP CMD
CKPOCLST EQU   28                       ILIST ADDRESS
         SPACE 3
*FORMAT OF CKREQ-TTR TABLE    IT IS LOCATED AT THE END OF THE WORK
*AREA.  THE NUMBER OF ENTRIES DEPENDS ON THE VALUE OF CKREQS ON
*INTRO; A CONSTANT VALUE IS ADDED TO IT FOR DISK ERRORS.
         SPACE
         AIF   ('&MERLIN' NE '3330').SKP5                          0419
CKPCTTRL EQU   8 .                      LNGTH CKREQ TTR TABLE ENTRY0415
         AGO   .CTTRL                                              0419
.SKP5    ANOP                                                      0419
CKPCTTRL EQU   6 .                      LNGTH CKREQ TTR TABLE ENTRY0419
.CTTRL   ANOP                                                      0419
CKPCTFLG EQU   0 .                      OFFSET TO FLAG IN CKREQ-TTR
CKPCTACT EQU   X'80' .                  ENTRY IS ACTIVE
CKPCTDER EQU   X'40' .                  ENTRY HAS DISK ERROR
CKPCTTTR EQU   1 .                      OFFSET TO TTR IN CKREQ-TTR
CKPCTOFF EQU   4 .                      OFFSET TO TERM OFFSET
CKPCTSEC EQU   6 .                      DATA ON TRACK PRECEDING    0415X
                                        THIS CKREQ RECORD          0415
         EJECT
*DSECT FOR INCIDENT OR ENVIRONMENT CHECKPOINT DISK RECORD
         SPACE
IEDQCDRD DSECT
CDRDATE  DS    F .                      DATE OF CHECKPOINT
CDRTIME  DS    F .                      TIME WHEN RECORD WRITTEN
CDRKEY   DS    XL1 .                    KEY FIELD
CDRLCB   EQU   0 .                      KEY FOR LCB
CDRCHNGT EQU   4 .                      KEY FOR CHNGT
CDROPC   EQU   16 .                     KEY FOR OPERATOR CONTROL
CDRCKREQ EQU   24 .                     KEY FOR CKREQ
CDRTOTAL EQU   28 .                     KEY FOR TOTAL
CDRTOTLC EQU   32 .                     KEY FOR TOTAL-CONTINUED
CDRTTRLI DS    XL3                      TTR OF LAST INCIDENT,AT    0922X
                                        TIME OF THIS ENV CKPT
CDRDATA  EQU   * .                      BEGINNING OF DATA IN SEG
CDRTINFO EQU   CDRDATA-IEDQCDRD .       LENGTH OF TOTAL INFO-NON-      X
                                        DATA
         SPACE 3
*FORMAT OF INCIDENT RECORDS
         SPACE
         ORG   CDRTTRLI                                            0922
CDRSTAT  DS    XL1 .                    TERMINAL STATUS
CDROFFS  DS    H .                      OFFSET TO TERMNAME TABLE
CDRSEQIN DS    H .                      INPUT SEQUENCE NUMBER      1007
CDRSEQOU DS    H .                      OUTPUT SEQUENCE NUMBER     1007
         SPACE 3
CDROPTN  EQU   * .                      BEGINNING OF OPTIONS
         ORG   CDRDATA
CDROPCB  DS    F .                      BEGINNING OF OP CONTROL BLK
CDROPCBL EQU   36 .                     LENGTH OF OPERATOR CONTROL     X
                                        BLOCK
         SPACE 3
*CKREQ RECORD
         SPACE
         ORG   IEDQCDRD
CDRCKFLG DS    X .                      FLAG BITS
CDRCKRNC EQU   X'80' .                  CKREQ IS NOT COMPLETED
         DS    XL3 .                    USED FOR LINK -I/O QUEUE
CDRCKIN  DS    H .                      INPUT SEQUENCE NUMBER
CDRCKOUT DS    H .                      OUTPUT SEQUENCE NUMBER
*CDRKEY  EQU   *                        RECORD KEY
         DS    X .
         DS    X .                      USED ONLY FOR ALIGNMENT
CDRCKOFF DS    H .                      TERM OFFSET
CDRCKMSG DS    XL2 .                    QCB MSG COUNT
CDRCKQBC DS    XL3 .                    QBACK POINTER
CDRCKQCB DS    XL21 .                   QCB DISK POINTERS (THIS        X
                                        FIELD IS REPEATED FOR EACH     X
                                        PRIORITY LEVEL QCB)
CDRCKPQB DS    XL3 .                    PRILEVEL QBACK PTR      SA51078
CDRCKOPT EQU   * .                      OPTION FIELD
         EJECT
*DSECT FOR CHECKPOINT REQUEST ELEMENT(INCIDENT OR CKREQ).  THE
*ENVIRONMENT CHECKPOINT REQUEST ELEMENT IS DEFINED IN THE AVT.
         SPACE
IEDQCRED DSECT
CREKEY   DS    X .
CRELCB   EQU   X'00' .                  KEY FOR LCB FROM CHECKPT
CRECHNGT EQU   X'10' .                  KEY FOR TCHNG FROM APP PROG
CREREMVE EQU   X'20' .                  KEY FOR TIME DELAY QUEUE       X
                                        REMOVAL ELEMENT
CREOPC   EQU   X'40' .                  KEY FOR OPERATOR CONTRO
CRECKREQ EQU   X'60' .                  KEY FOR CKREQ FROM APP PROG
CRETOTAL EQU   X'70' .                  KEY FOR TOTAL-ALL SOURCES
CREINCOF EQU   X'80' .                  KEY FLAG-INCIDENT OVERFLOW
CRECNCP  EQU   X'D0' .                  KEY FOR 3705 CHECKPOINT
*                                                              @Y17XAXF
CRERNCP  EQU   X'E0' .                  KEY FOR 3705 RESTART   @Y17XAXF
CREQCBAD DS    XL3 .
CREPRI   DS    0XL1                     PRIORITY OF REQUEST ELEMENT
*                                        LINK OF REQUEST ELEMENT
*                                                              @Y17XAXF
CRELINK  DS    F .
CREECB   DS    F .                      ADDR OF ECB
CREDEB   EQU   * .                      DEB CHAIN FOR CKREQ
CREOFFS  DS    H .                      OFFSET OF TERMNAME ENTRY
         SPACE 3                                               @Y17XAXF
CKPAVT   DSECT                      CHECKPOINT AVT DSECT       @Y17XASA
CKPOPCON DS    CL2                  PRIMARY OP/CTL TERMINAL    @Y17XASA
CKPOPCIN DS    CL2                  PRIMARY OP/CTL TTCIN       @Y17XASA
CKPINTLV DS    CL2                  SYSTEM DELAY INTERVAL      @Y17XASA
CKPBIT1  DS    CL1                  AVTBIT1                    @Y17XASA
CKPBIT2  DS    CL1                  AVTBIT2                    @Y17XASA
CKPNADDR DS    CL4                  NON REUSE DISK NEXT ADDR   @Y17XASA
CKPRADDR DS    CL4                  REUSE DISK NEXT ADDR       @Y17XASA
CKPLODPT DS    CL4                  REUSE LOAD POINT FIELD     @Y17XASA
CKPSUBT  DS    CL1                  AVTSUBT SUBT= OPTION FIELD @Y17XASA
CKPIOTR  DS    CL1                  AVTIOTR IOTR= OPTION FIELD @Y17XASA
CKPAVTLN EQU   *-CKPAVT             LENGTH OF CKP AVT DSECT    @Y17XASA
         SPACE 3                                               @Y17XAXF
CKPNRES  DSECT                          FIELDS FOR NCP RESOURCE
*                                                              @Y17XACL
CKPSUBST DS    H                        SUBSTRUCT              @Y17XACL
CKPCOHRT DS    H                        COHORT                 @Y17XACL
CKPNFLG  DS    XL1                      FLAGS                  @Y17XACL
CKPREMB  EQU   X'80'                    REMEMBER               @Y17XACL
CKPRSACT EQU   X'40'                    RESOURCE ACTIVE        @Y17XACL
CKPEPMOD EQU   X'20'                    EP MODE                @Y17XACL
CKPLULOG EQU   X'10'                    ALLOW LOGON INDICATOR  @Y17XAXF
*        EQU   X'08'-X'01'              RESERVED               @Y17XACL
CKPTYPE  DS    XL1                      RESOURCE TYPE          @Y17XACL
CKPNRSZ  EQU   *-CKPNRES                LENGTH OF FIELDS CKPT'ED
*                                         FOR A 3705 RESOURCE  @Y17XACL
         MEND  */
*%PLSCKP : ;                            /*                   @Y17XAXF*/
*DCL 1 IEDQCKPD BDY(DWORD) BASED(RCKPT),
*      2 CKPSAVE1(18) PTR(31),          /*SAVE AREA FOR LOAD
*                                         MODULE             @Y17XACL*/
*      2 CKPIOB,                        /*IOB FOR CKPT DISK I/O
*                                                            @Y17XACL*/
*        3 CKPIOFL1 CHAR(1),            /*FLAG BYTE 1        @Y17XACL*/
*        3 CKPIOFL2 CHAR(1),            /*FLAG BYTE 2        @Y17XACL*/
*        3 CKPIOSN0 CHAR(1),            /*FIRST SENSE BYTE   @Y17XACL*/
*        3 CKPIOSN1 CHAR(1),            /*SECOND SENSE BYTE  @Y17XACL*/
*        3 CKPIOECB PTR(31),            /*ADDRESS OF ECB     @Y17XACL*/
*         4 CKPIOECC BIT(8),            /*COMPLETION CODE FOR I/O
*                                                            @Y17XAXF*/
*         4 *        PTR(24),           /*RESERVED           @Y17XAXF*/
*        3 CKPIOFL3 CHAR(1),            /*I/O ERROR FLAGS    @Y17XACL*/
*        3 CKPIOCSW CHAR(7),            /*CSW                @Y17XACL*/
*        3 CKPIOSIO CHAR(1),            /*START I/O CONDITION
*                                         CODES              @Y17XACL*/
*        3 CKPIOCPA PTR(24),            /*CHANNEL PROGRAM ADDRESS
*                                                            @Y17XACL*/
*        3 *        CHAR(1),            /*UNUSED             @Y17XACL*/
*        3 CKPIODCB PTR(24),            /*DCB ADDRESS        @Y17XACL*/
*        3 *        CHAR(1),            /*REPOSITION MODIFIER
*                                                            @Y17XACL*/
*        3 CKPIORST PTR(24),            /*RESTART ADDRESS    @Y17XACL*/
*        3 CKPIOBCI FIXED(15),          /*BLOCK CNT INCREMENT
*                                                            @Y17XACL*/
*        3 CKPIORC  FIXED(15),          /*ERROR COUNT        @Y17XACL*/
*        3 CKPIOSK  CHAR(8),            /*SEEK ADDRESS       @Y17XACL*/
*          4 CKPIOM   CHAR(1),          /*DEB EXTENT         @Y17XACL*/
*          4 CKPIOBB  CHAR(2),          /*BIN NUMBER         @Y17XACL*/
*          4 CKPIOCC  CHAR(2),          /*CYLINDER NUMBER    @Y17XACL*/
*          4 CKPIOHH  CHAR(2),          /*TRACK NUMBER       @Y17XACL*/
*          4 CKPIOR   CHAR(1),          /*RECORD NUMBER      @Y17XACL*/
*      2 CKPECB   PTR(31),              /*ECB POSTED BY IOS  @Y17XACL*/
*      2 CKPEXCP  PTR(31),              /*CURRENT RECORD BEING
*                                         WRITTEN            @Y17XACL*/
*      2 CKPECBL  CHAR(8),              /*ECB LIST FOR WAIT  @Y17XACL*/
*        3 CKPCNVRT CHAR(8),            /*USED FOR CVD CONVERSION
*                                                            @Y17XACL*/
*          4 CKPEPLOC CHAR(8),          /*EPLOC FOR LOAD MACRO
*                                                            @Y17XACL*/
*      2 CKPIOQF  PTR(31),              /*DISK I/O QUEUE - FIRST
*                                         RECORD             @Y17XACL*/
*      2 CKPIOQL  PTR(31),              /*DISK I/O QUEUE - LAST
*                                         RECORD             @Y17XACL*/
*        3 * BIT(8),                    /*STATUS BYTE        @Y17XACL*/
*          4 CKPNDRB  BIT(1),           /*INDICATES NO DISK RECORD
*                                         BUILT FOR NEXT REQUEST
*                                         ELEMENT            @Y17XACL*/
*      2 CKPLREB  PTR(31),              /*ADDR OF LAST REQUEST ELEMENT
*                                         FOR WHICH RECORD WAS
*                                         BUILT              @Y17XACL*/
*      2 CKPLDRB  PTR(31),              /*ADDR OF LAST DISK RECORD
*                                                            @Y17XACL*/
*      2 CKPCTTRB PTR(31),              /*BEGINNING OF CKREQ TTR
*                                         TABLE              @Y17XACL*/
*        3 CKPSECTR BIT(8),             /*SECTOR ID FOR SET SECTOR
*                                         COMMAND            @Y17XACL*/
*      2 CKPCPARM CHAR(8),              /*PARAMETERS FOR CONVERT
*                                         ROUTINE ADDRESS OF DEB AND
*                                         ADDRESS FOR CONVERSION
*                                         RESULT             @Y17XACL*/
*      2 CKPPARM2 PTR(31),              /*PARAMETER FOR SECTOR
*                                         CONVERSION ROUTINE (UCB TYPE
*                                         AND ADDRESS)       @Y17XACL*/
*      2 CKPCRLEN CHAR(1),              /*LENGTH OF CONTROL RECORD
*                                                            @Y17XACL*/
*      2 CKPSWCH1 CHAR(1),              /*SWITCH FOR COMPARING QCB TO
*                                         SEE IF IT HAS BEEN
*                                         CHECKPOINTED       @Y17XACL*/
*      2 CKPSWCH2 CHAR(1),              /*SWITCH FOR COMPARING WITH
*                                         INVITATION LIST TO SEE IF IT
*                                         HAS BEEN CHECKPOINTED
*                                                            @Y17XACL*/
*      2 CKPERRCT CHAR(1),              /*COUNT OF ERRORS ENCOUNTERED
*                                                            @Y17XACL*/
*      2 *        FIXED(31),            /*UNUSED             @Y17XACL*/
*      2 CKPCCWS,                       /*CHANNEL PROGRAM    @Y17XACL*/
*        3 CKPSEEKC CHAR(8),            /*SEEK CYLINDER      @Y17XACL*/
*        3 CKPSETSC CHAR(8),            /*SET SECTOR OR NOOP @Y17XACL*/
*        3 CKPSCHID CHAR(8),            /*SEARCH ID          @Y17XACL*/
*        3 CKPTIC   CHAR(8),            /*TIC                @Y17XACL*/
*        3 CKPRW,                       /*READ/WRITE         @Y17XACL*/
*         4 CKPRWCMD BIT(8),            /*COMMAND CODE       @Y17XAXF*/
*         4 CKPRWADD PTR(24),           /*DATA ADDRESS       @Y17XAXF*/
*         4 CKPRWFLG BIT(8),            /*FLAGS              @Y17XAXF*/
*         4 *        BIT(8),            /*RESERVED           @Y17XAXF*/
*         4 CKPRWBC  FIXED(15),         /*BYTE COUNT         @Y17XAXF*/
*      2 * BDY(WORD),                   /*GETMAIN PARAMETER
*                                         LIST               @Y17XACL*/
*        3 CKPGETML CHAR(10),           /*GETMAIN LIST       @Y17XACL*/
*        3 CKPWKALN FIXED(15),          /*LENGTH OF CKPT WORK AREA
*                                                            @Y17XACL*/
*      2 CKPMSG BDY(WORD),              /*MESSAGE BUFFER USED FOR WTO
*                                                            @Y17XACL*/
*        3 CKPMSGLN FIXED(15),          /*LENGTH OF MSG BUFFER
*                                                            @Y17XACL*/
*        3 *        FIXED(15),          /*                   @Y17XACL*/
*        3 CKPMSGTX CHAR(37),           /*TEXT OF MESSAGE    @Y17XACL*/
*        3 CKPMSGTP CHAR(20),           /*TYPE OF CKPT RECORD
*                                                            @Y17XACL*/
*        3 CKPMSGGL CHAR(4),            /*GETMAIN LENGTH WHICH COULD
*                                         NOT BE SATISFIED   @Y17XACL*/
*        3 *        CHAR(3),            /*UNUSED             @Y17XACL*/
*      2 CKPCNTLR BDY(WORD),            /*CHECKPOINT CONTROL RECORD -
*                                         WRITTEN EVERY TIME AN
*                                         ENVIRONMENT RECORD IS
*                                         WRITTEN            @Y17XACL*/
*        3 CKPFLAGS BIT(8),             /*CONTROL RECORD FLAGS
*                                                            @Y17XACL*/
*          4 CKPNORML BIT(1),           /*NORMAL CLOSEDOWN   @Y17XACL*/
*          4 CKPFSCN1 BIT(1),           /*FIFO SCAN 1 IN PROGRESS
*                                                            @Y17XACL*/
*          4 CKPFSCN2 BIT(1),           /*FIFO SCAN 2 IN PROGRESS
*                                                            @Y17XACL*/
*          4 *        BIT(1),           /*                   @Y17XACL*/
*          4 CKPERR   BIT(1),           /*INDICATES NO ENVIRONMENT
*                                         RECORDS ARE AVAILABLE
*                                                            @Y17XACL*/
*          4 CKPSTAIN BIT(1),           /*VALUE OF STARTUP PARAMETER
*                                         USED AT RESTART TO DETERMINE
*                                         IF INVITATION LISTS WERE
*                                         CHECKPOINTED       @Y17XACL*/
*          4 CKPOPTFN BIT(1),           /*OPTION FIELDS PRESENT FOR AT
*                                         LEAST ONE SYNC PROCESS ENTRY
*                                                            @Y17XACL*/
*          4 CKPOPCRD BIT(1),           /*INDICATES INCIDENT RECORDS
*                                         PRESENT FOR OPCTL  @Y17XACL*/
*        3 CKPTTRCT  CHAR(1),           /*INDEX FOR CURRENT ENVIRONMENT
*                                         CHECKPOINT         @Y17XACL*/
*        3 CKPINCNT  CHAR(1),           /*TOTAL NUMBER OF INCIDENT
*                                         RECORDS IN DATA    @Y17XACL*/
*        3 CKPINCNO  CHAR(1),           /*NUMBER OF INCIDENT RECORDS
*                                         AVAILABLE FOR USE  @Y17XACL*/
*        3 CKPCRRNO  CHAR(1),           /*NUMBER OF CKREQ RECORDS ON
*                                         FIRST TRACK CONTAINING CKREQ
*                                         RECORDS            @Y17XACL*/
*        3 CKPTTRCR  CHAR(3),           /*TTR OF FIRST CKREQ RECORD
*                                                            @Y17XACL*/
*        3 CKPINRNO  CHAR(1),           /*NUMBER OF INCIDENT RECORDS ON
*                                         FIRST TRACK CONTAINING
*                                         INCIDENT RECORDS   @Y17XACL*/
*        3 CKPTTRIN  CHAR(3),           /*TTR OF FIRST INCIDENT RECORD
*                                                            @Y17XACL*/
*        3 CKPBPERR  FIXED(15),         /*BYTES PER ENVIRONMENT RECORD
*                                         SEGMENT            @Y17XACL*/
*        3 CKPCKRQS  CHAR(1),           /*VALUE OF CKREQ FOR LAST
*                                         STARTUP - USED AT RESTART
*                                         INSTEAD OF VALUE IN AVT
*                                                            @Y17XACL*/
*        3 CKPCPRCD  CHAR(1),           /*VALUE OF CPRCDS AT LAST
*                                         STARTUP - USED AT RESTART
*                                         INSTEAD OF VALUE IN AVT
*                                                            @Y17XACL*/
*        3 CKPIPERT  CHAR(1),           /*NUMBER OF INCIDENT RECORDS
*                                         PER TRACK          @Y17XACL*/
*        3 CKPPRQNO  CHAR(1),           /*MAXIMUM NUMBER OF PRIORITY
*                                         LEVEL QUEUES USED BY A
*                                         SYNC PROCESS ENTRY - USED
*                                         BY IGG01942        @Y17XACL*/
*          4 CKPCPERT CHAR(1),          /*NUMBER OF CKREQ RECORDS PER
*                                         TRACK - DETERMINED BY
*                                         IGG01942           @Y17XACL*/
*        3 CKPCKRLN  FIXED(15),         /*LENGTH OF CKREQ RECORD -
*                                         DEPENDS ON OPTION FIELDS AND
*                                         PRIORITY LEVEL QUEUES
*                                                            @Y17XACL*/
*        3 CKPRPERT  CHAR(1),           /*NUMBER OF ENVIRONMENT RECORD
*                                         SEGMENTS PER TRACK @Y17XACL*/
*        3 CKPTTRLI  CHAR(3),           /*TTR OF LAST INCIDENT WRITTEN
*                                                            @Y17XACL*/
*        3 CKPINCLN  FIXED(15),         /*LENGTH OF INCIDENT RECORD
*                                                            @Y17XACL*/
*        3 CKPSECLT  FIXED(15),         /*DATA ON TRACK PRECEDING
*                                         CURRENT ENV SEGMENT
*                                                            @Y17XACL*/
*        3 CKPSECLI  FIXED(15),         /*DATA ON TRACK PRECEDING
*                                         CURRENT INCIDENT RECORDS
*                                                            @Y17XACL*/
*        3 CKPSECCR  FIXED(15),         /*DATA ON TRACK PRECEDING 1ST
*                                         CKREQ RECORD       @Y17XACL*/
*        3 CKPSECIN  FIXED(15),         /*DATA ON TRACK PRECEDING 1ST
*                                         INCIDENT RECORD    @Y17XACL*/
*        3 CKPTTRT1  CHAR(3),           /*TTR FOR FIRST ENVIRONMENT
*                                                            @Y17XACL*/
*        3 CKPSECT1  CHAR(2);           /*DATA ON TRACK PRECEEDING 1ST
*                                         SEG OF ENV RECORD  @Y17XACL*/
*DCL 1 CKPINIT DEFINED(CKPEXCP),        /*OPEN WORK AREA     @Y17XACL*/
*      2 CKPCYLNO CHAR(2),              /*CYLINDER NUMBER    @Y17XACL*/
*      2 CKPHEDNO CHAR(2),              /*HEAD NUMBER        @Y17XACL*/
*      2 CKPRCDNO CHAR(1),              /*RECORD NUMBER      @Y17XACL*/
*      2 CKPKEYLN CHAR(1),              /*KEY LENGTH         @Y17XACL*/
*      2 CKPDATLN CHAR(2),              /*DATA LENGTH        @Y17XACL*/
*      2 CKPCTTRC PTR(31),              /*CURRENT ENTRY IN CKREQ - TTR
*                                         TABLE (USED AT RESTART)
*                                                            @Y17XACL*/
*      2 CKPDATIM CHAR(8),              /*DATE, TIME, AND TOTAL CKPT
*                                         USED TO COMPARE WITH INCIDENT
*                                         CKPT'S             @Y17XACL*/
*      2 CKPIPERE FIXED(15),            /*NUMBER OF INCIDENTS OR CKREQ
*                                         IN ONE ENVIRONMENT RECORD
*                                         SEGMENT            @Y17XACL*/
*      2 *        FIXED(15),            /*                   @Y17XACL*/
*      2 CKPCTTRA PTR(31);              /*ADDRESS OF TTR OF THE
*                                         ENVIRONMENT RECORD BEING USED
*                                         FOR RESTART        @Y17XACL*/
*DCL CKPTTRLT PTR(24) DEFINED(CKPTIC) POS(6);/*OVERLAY UNUSED PORTION
*                                              OF TIC WITH TTR OF LAST
*                                              TOTAL SEGMENT WRITTEN
*                                                            @Y17XACL*/
*DCL CKPMSGPN CHAR(8) DEFINED(CKPMSGTP) POS(7);/*            @Y17XACL*/
*DCL 1 CKPTWA DEFINED(CKPMSGTX),        /*OVERLAY MESSAGE BUFFER WITH
*                                         WORK AREA          @Y17XACL*/
*      2 CKPSAVE2(15) PTR(31),          /*SAVE AREA          @Y17XACL*/
*      2 CKPTRMAD     PTR(31);          /*ADDRESS OF TRM ENTRY
*                                                            @Y17XACL*/
*DCL 1 CKPNCNTL DEF(CKPCNTLR),          /*MAPPING FOR THE CONTROL
*                                         RECORD FOR A 3705 CHECKPOINT
*                                         DATA SET           @Y17XAXF*/
*     2 *        FIXED(15),             /*RESERVED           @Y17XAXF*/
*     2 CKPTRSTA BIT(8),                /*STATUS FLAGS       @Y17XAXF*/
*     2 CKPSWTCH BIT(8),                /*SWITCHES           @Y17XAXF*/
*     2 CKPIPLTX CHAR(8),               /*IPL TEXT NAME      @Y17XAXF*/
*     2 CKPBLKSZ FIXED(15),             /*BLOCK SIZE         @Y17XAXF*/
*     2 *        FIXED(15),             /*RESERVED           @Y17XAXF*/
*      2 CKPTRKCN FIXED(15),            /*TRACK CONSTANT USED FOR
*                                         ALTERNATE TRACK ASSIGNMENT
*                                                            @Y17XAXF*/
*      2 *        FIXED(15),            /*RESERVED           @Y17XAXF*/
*      2 CKPBLKPT FIXED(8),             /*BLOCKS PER TRACK   @Y17XAXF*/
*      2 *        FIXED(8),             /*RESERVED           @Y17XAXF*/
*      2 CKPDATTM CHAR(8),              /*DATE AND TIME      @Y17XAXF*/
*       3 CKPDATE  CHAR(4),             /*DATE               @Y17XAXF*/
*       3 CKPTIME  CHAR(4),             /*TIME               @Y17XAXF*/
*      2 CKPBCKUP CHAR(8);              /*BACKUP NAME        @Y17XAXF*/
*                                       /*                   @Y17XAXF*/
*DCL 1 CKPNFLDS DEF(CKPEXCP),           /*DATA AREAS USED BY CHECKPOINT
*                                         SUBTASK FOR 3705 CKECKPOINT
*                                                            @Y17XAXF*/
*      2 *        CHAR(7),              /*RESERVED           @Y17XAXF*/
*      2 CKPENCDE FIXED(8),             /*ENTRY CODE         @Y17XAXF*/
*      2 CKPNTTE  PTR(31),              /*ADDRESS OF TERMINAL ENTRY
*                                         ENTRY PREFIX FOR THE 3705
*                                                            @Y17XAXF*/
*      2 CKPNDEVF PTR(31),              /*ADDRESS OF DEVICE DEPENDENT
*                                         FIELDS FOR THE 3705
*                                                            @Y17XAXF*/
*      2 CKPNSELT BIT(32),              /*SELECTOR FIELDS    @Y17XAXF*/
*       3 CKPCUSEL FIXED(8),            /*CURRENT SELECT VALUE
*                                                            @Y17XAXF*/
*       3 CKPSLNEW CHAR(3),             /*NEW SELECT VALUES TO BE
*                                         SHIFTED            @Y17XAXF*/
*      2 CKPNTRK FIXED(15),             /*ALTERNATE RECORD INDICATOR
*                                                            @Y17XAXF*/
*      2 CKPNRSID FIXED(15);            /*RESOURCE TO BE CHECKPOINTED
*                                         OR RESTARTED       @Y17XAXF*/
*        @SPACE (2);
* DCL CKPSLVAL CHAR(3) DEF(CKPNSELT);   /*CURRENT SELECT VALUES USED IN
*                                         SELECT VALUE SHIFT @Y17XAXF*/
* DCL CKPNOTFY BIT(8) CONSTANT('0A'X);  /*SELECT VALUE FOR REQUEST FOR
*                                         NOTIFICATION       @Y17XAXF*/
*                                       /*                   @Y17XAXF*/
*/*CKPENCDE VALUES                                           @Y17XAXF*/
* DCL CKPIOERR FIXED(8) CONSTANT(40);   /*3705 CHECKPOINT I/O ERROR
*                                                            @Y17XAXF*/
* DCL CKPGETFL FIXED(8) CONSTANT(4);    /*GETMAIN FOR 3705 RESOURCE
*                                         RECORD FAILED      @Y17XAXF*/
* DCL CKPEODAT FIXED(8) CONSTANT(8);    /*END OF 3705 CHECKPOINT DATA
*                                         SET REACHED        @Y17XAXF*/
*DCL 1 CKPOVER DEFINED(CKPMSGTP) POS(2),/*                   @Y17XACL*/
*      2 CKPRCDSR FIXED(15),            /*NUMBER RECORDS(SEGMENTS)
*                                         REQUIRED FOR ONE ENV CKPT.
*                                                            @Y17XACL*/
*      2 CKPTRKLN FIXED(15),            /*LENGTH OF DATA ON A TRACK
*                                         PRECEDING THE CURRENT
*                                         RECORD             @Y17XACL*/
*      2 CKPTRKSA FIXED(15);            /*NUMBER AVAILABLE TRACKS IN
*                                         DATA SET           @Y17XACL*/
*DCL 1 CKPOPNFL BIT(8) DEF(CKPFLAGS),   /*CONTROL RECORD FLAGS USED AT
*                                         OPEN TIME          @Y17XACL*/
*      2 *        BIT(1),               /*                   @Y17XACL*/
*      2 CKPOPNEN BIT(1),               /*OPEN-ENV FLAG      @Y17XACL*/
*      2 CKPOPNIN BIT(1),               /*OPEN-INCIDENT FLAG @Y17XACL*/
*      2 CKPOPNCR BIT(1),               /*OPEN-CKREQ FLAG    @Y17XACL*/
*      2 *        BIT(4);               /*                   @Y17XACL*/
*DCL 1 IEDQCDRD BASED(RCKPT),           /*OVERLAY FOR INCIDENT OR
*                                         ENVIRONMENT CKPT. DISK
*                                         RECORD             @Y17XACL*/
*      2 CDRDATE  PTR(31),              /*DATE OF CKPT       @Y17XACL*/
*      2 CDRTIME  PTR(31),              /*TIME WHEN RECORD WRITTEN
*                                                            @Y17XACL*/
*      2 CDRKEY   BIT(8),               /*KEY FIELD          @Y17XACL*/
*      2 CDRTTRLI PTR(24),              /*TTR OF LAST INCIDENT AT TIME
*                                         OF THIS ENV CKPT   @Y17XACL*/
*      2 CDRDATA  CHAR(*);              /*BEGINNING OF DATA IN
*                                         THE SEGMENT        @Y17XACL*/
*DCL 1 CDRINCFM DEFINED(CDRTTRLI) BDY(BYTE),/*FORMAT FOR INCIDENT
*                                         RECORDS            @Y17XACL*/
*      2 CDRSTAT  CHAR(1),              /*TERMINAL STATUS    @Y17XACL*/
*      2 CDROFFS  FIXED(15),            /*OFFSET TO TERMINAL NAME TABLE
*                                                            @Y17XACL*/
*      2 CDRSEQIN FIXED(15),            /*INPUT SEQ NUMBER   @Y17XACL*/
*      2 CDRSEQOU FIXED(15),            /*OUTPUT SEQ NUMBER  @Y17XACL*/
*      2 CDROPTN  CHAR(*);              /*BEGINNING OF OPTIONS
*                                                            @Y17XACL*/
*DCL CDROPCB PTR(31) DEF(CDRDATA);      /*BEGINNING OF OPCTL BLOCK
*                                                            @Y17XACL*/
*DCL 1 CDRCREQR DEFINED(IEDQCDRD),      /*CKREQ RECORD       @Y17XACL*/
*      2 CDRCKFLG BIT(8),               /*FLAG BITS          @Y17XACL*/
*        3 CDRCKRNC BIT(1),             /*CKREQ IS NOT COMPLETED
*                                                            @Y17XACL*/
*      2 *        PTR(24),              /*USED FOR LINK - I/O QUEUE
*                                                            @Y17XACL*/
*      2 CDRCKIN  FIXED(15),            /*INPUT SEQ NUMBER   @Y17XACL*/
*      2 CDRCKOUT FIXED(15),            /*OUTPUT SEQ NUMBER  @Y17XACL*/
*      2 *        CHAR(1),              /*RECORD KEY         @Y17XACL*/
*      2 *        CHAR(1),              /*                   @Y17XACL*/
*      2 CDRCKOFF FIXED(15),            /*TERM OFFSET        @Y17XACL*/
*      2 CDRCKMSG FIXED(15),            /*QCB MSG COUNT      @Y17XACL*/
*      2 CDRCKQBC PTR(24) BDY(WORD,3),  /*QBACK POINTER      @Y17XACL*/
*      2 CDRCKQCB CHAR(21),             /*QCB DISK POINTERS (THIS FIELD
*                                         IS REPEATED FOR EACH PRIORITY
*                                         LEVEL QCB)         @Y17XACL*/
*      2 CDRCKPQB PTR(24) BDY(WORD,3),  /*PRILEVEL QBACK PTR @Y17XACL*/
*      2 CDRCKOPT CHAR(*);              /*OPTION FIELD       @Y17XACL*/
*DCL 1 IEDQCRED BASED(RCKPT),           /*MAP FOR CKPT REQUEST ELEMENT
*                                         (INCIDENT OR CKREQ)
*                                                            @Y17XACL*/
*      2 CREKEY   CHAR(1),              /*REQUEST KEY        @Y17XACL*/
*      2 CREQCBAD PTR(24),              /*QCB ADDRESS        @Y17XACL*/
*      2 CRELINK  PTR(31),              /*                   @Y17XACL*/
*        3 CREPRI   BIT(8),             /* PRIORITY OF REQUEST ELEMENT
*                                          LINK OF REQUEST ELEMENT
*                                                            @Y17XAXF*/
*        3 *        PTR(24),            /* RESERVED          @Y17XAXF*/
*      2 CREECB   PTR(31),              /*ADDR OF ECB        @Y17XACL*/
*      2 CREOFFS  FIXED(15),            /*OFFSET OF TERMNAME ENTRY
*                                                            @Y17XACL*/
*        3 CREDEB CHAR(*);              /*DEB CHAIN FOR CKREQ
*                                                            @Y17XACL*/
*DCL 1 CKPREQTB BASED(RCKPT),           /*CKREQ-TTR TABLE ENTRY
*                                                            @Y17XACL*/
*      2 CKPCTFLG BIT(8),               /*FLAG BYTE          @Y17XACL*/
*        3 CKPCTACT BIT(1),             /*ENTRY IS ACTIVE    @Y17XACL*/
*        3 CKPCTDER BIT(1),             /*ENTRY HAS DISK ERR @Y17XACL*/
*      2 CKPCTTTR PTR(24),              /*TTR                @Y17XACL*/
*      2 CKPCTOFF FIXED(15),            /*TERM OFFSET        @Y17XACL*/
*      2 CKPCTSEC FIXED(15);            /*DATA ON TRACK PRECEDING
*                                         THIS CKREQ RECORD  @Y17XACL*/
*DCL 1 CKPNRES BASED(RCKPT),            /*FIELDS FOR NCP RESOURCE
*                                                            @Y17XACL*/
*       2 CKPSUBST FIXED(15),           /*SUBSTRUCT          @Y17XACL*/
*       2 CKPCOHRT FIXED(15),           /*COHORT             @Y17XACL*/
*       2 CKPNFLG  BIT(8),              /*FLAGS              @Y17XACL*/
*        3 CKPREMB  BIT(1),             /*REMEMBER           @Y17XACL*/
*        3 CKPRSACT BIT(1),             /*RESOURCE ACTIVE    @Y17XACL*/
*        3 CKPEPMOD BIT(1),             /*EP MODE            @Y17XACL*/
*        3 CKPLULOG BIT(1),             /*ALLOW LOGON IND    @Y17XAXF*/
*        3 *        BIT(4),             /*RESERVED           @Y17XACL*/
*       2 CKPTYPE  BIT(8);              /*RESOURCE TYPE      @Y17XACL*/
*%CKPNRSZ='LENGTH(CKPNRES)';            /*LENGTH OF FIELDS CKPT'ED
*                                         FOR A 3705 RESOURCE
*                                                            @Y17XACL*/
* DECLARE                               /*                   @Y17XAXF*/
* 1 CKPAVT   BASED(RCKPT),              /*CHECKPOINT AVT DSECT
*                                                            @Y17XASA*/
*  2 CKPOPCON CHAR(2),                  /*PRIMARY OP/CTL TERMINAL
*                                                            @Y17XASA*/
*  2 CKPOPCIN CHAR(2),                  /* PRIMARY OP/CTL TTCIN
*                                                            @Y17XASA*/
*  2 CKPINTLV CHAR(2),                  /* SYSTEM DELAY INTERVAL
*                                                            @Y17XASA*/
*  2 CKPBIT1  BIT(8),                   /* AVTBIT1           @Y17XASA*/
*  2 CKPBIT2  BIT(8),                   /* AVTBIT2           @Y17XASA*/
*  2 CKPNADDR CHAR(4),                  /* NON REUSE DISK NEXT ADDR
*                                                            @Y17XASA*/
*  2 CKPRADDR CHAR(4),                  /* REUSE DISK NEXT ADDR
*                                                            @Y17XASA*/
*  2 CKPLODPT CHAR(4),                  /* REUSE LOAD POINT FIELD
*                                                            @Y17XASA*/
*  2 CKPSUBT  CHAR(1),                  /* AVTSUBT SUBT= OPTION FIELD
*                                                            @Y17XASA*/
*  2 CKPIOTR  CHAR(1);                  /* AVTIOTR IOTR= OPTION FIELD
*                                                            @Y17XASA*/
*%CKPAVTLN='LENGTH(CKPAVT)';            /* LENGTH OF CKP AVT DSECT
*                                                            @Y17XASA*/
*@EJECT;
*   /*CONSTANTS                                              @Y17XACL*/
*DCL CKPIOCOM BIT(8) CONSTANT('7F'X);   /*I/O COMPELTED SUCCESSFULLY
*                                         (USED WITH CKPIOECC)
*                                                            @Y17XAXF*/
*DCL CKPSET1  BIT(8) CONSTANT('01'X);   /*USED TO INVERT QCB SWITCH AT
*                                         CKPSWCH1           @Y17XACL*/
*DCL CKPSET2  BIT(8) CONSTANT('04'X);   /*USED TO INVERT INVITATION
*                                         LIST SWITCH AT CKPSWCH2
*                                                            @Y17XACL*/
*DCL CKPREAD  BIT(8) CONSTANT('06'X);   /*READ DATA CMD      @Y17XACL*/
*DCL CKPWRITE BIT(8) CONSTANT('05'X);   /*WRITE DATA CMD     @Y17XACL*/
*DCL CKPWCKD  BIT(8) CONSTANT('1D'X);   /*WRITE COUNT, KEY, AND DATA
*                                                            @Y17XACL*/
*DCL CKPSET   BIT(8) CONSTANT('23'X);   /*SET SECTOR         @Y17XACL*/
*DCL CKPNOOP  BIT(8) CONSTANT('03'X);   /*NOOP               @Y17XACL*/
*DCL CKPMSGL  FIXED(8) CONSTANT(65);    /*MSG LENGTH         @Y17XACL*/
*DCL CKPENVL  FIXED(15) CONSTANT(300);  /*LENGTH OF ENVIRONMENT RECORD
*                                         SEGMENT            @Y17XACL*/
*DCL CKP101   FIXED(15) CONSTANT(256);  /*USED TO BUMP TRACK @Y17XACL*/
*DCL CKPCKRNO FIXED(8) CONSTANT(3);     /*NUMBER OF EXTRA CKREQ RECORDS
*                                                            @Y17XACL*/
*DCL CKPCMDCH BIT(8)   CONSTANT('42'X); /*COMMAND CHAINING   @Y17XACL*/
*DCL CKPRETNL FIXED(8) CONSTANT(4);     /*RETURN OFFSET TO CHECKPOINT
*                                         EXECUTOR FOR NO ADDITIONAL
*                                         LOAD REQUESTS      @Y17XAXF*/
*DCL CKPCKREQ FIXED(8) CONSTANT(48);    /*OFFSET FOR CKREQ   @Y17XACL*/
*DCL CKPENV   FIXED(8) CONSTANT(56);    /*OFFSET FOR ENV     @Y17XACL*/
*DCL CKPIOQM  FIXED(8) CONSTANT(64);    /*OFFSET FOR I/O QUEUE MANAGER
*                                                            @Y17XACL*/
*DCL CKPDIOR  FIXED(8) CONSTANT(72);    /*OFFSET FOR DISK I/O ROUTINE
*                                                            @Y17XACL*/
*DCL CKPNOTIF FIXED(8) CONSTANT(80);    /*OFFSET FOR NOTIFICATION
*                                         ROUTINE            @Y17XACL*/
*DCL CKPNOCOR FIXED(8) CONSTANT(88);    /*OFFSET FOR NO AVAILABLE CORE
*                                         ROUTINE            @Y17XACL*/
*DCL CKPNOINC FIXED(8) CONSTANT(96);    /*OFFSET FOR INCIDENT OVERFLOW
*                                         ROUTINE            @Y17XACL*/
*DCL CKPCNCP  FIXED(8) CONSTANT(104);   /*OFFSET FOR 3705 CHECKPOINT
*                                          ROUTINE           @Y17XAXF*/
*DCL CKPRNCP  FIXED(8) CONSTANT(112);   /*OFFSET FOR 3705 RESTART
*                                         ROUTINE            @Y17XAXF*/
*DCL CKPCNCPW FIXED(8) CONSTANT(120);   /*OFFSET FOR 3705 CHECKPOINT
*                                         WRITE ROUTINE      @Y17XAXF*/
*DCL CKPOPLTL FIXED(8) CONSTANT(10);    /*LENGTH OF OPT LENGTH ENTRY
*                                                            @Y17XACL*/
*DCL CKP1BYTE FIXED(8) CONSTANT(8);     /*USED TO SHIFT 1 BYTE
*                                                            @Y17XACL*/
*DCL CKP2BYTE FIXED(8) CONSTANT(16);    /*USED TO SHIFT 2 BYTES
*                                                            @Y17XACL*/
*DCL CKPCVTPT FIXED(8) CONSTANT(16);    /*ADDRESS OF CVT POINTER
*                                                            @Y17XACL*/
*DCL CKPCNTTR FIXED(8) CONSTANT(28);    /*DISPLACEMENT OF TTR CONVERT
*                                         ROUTINE IN CVT     @Y17XACL*/
*DCL CKPCNSEC FIXED(8) CONSTANT(232);   /*DISPLACEMENT OF SECTOR
*                                         ROUTINE ADDR IN CVT
*                                                            @Y17XACL*/
*DCL CKPDELMT CHAR(1)  CONSTANT('*');   /*DELIMITER PLACED IN ENV RCD
*                                                            @Y17XACL*/
*DCL CKPQDELM FIXED(8) CONSTANT(108);   /*DELIMETER FOR QCB ON
*                                         ENVIRONMENT FIELD  @OX16402*/
*DCL CKPLTRLN FIXED(8) CONSTANT(1);     /*LENGTH OF LCBTRACE FIELD
*                                                            @Y17XAXF*/
*DCL CKPDELLN FIXED(8) CONSTANT(1);     /*LENGTH OF DELIMITER FIELD
*                                                            @Y17XACL*/
*DCL CKPSEQLN FIXED(8) CONSTANT(4);     /*LENGTH OF SEQUENCE NUMBER
*                                         FIELD              @Y17XACL*/
*DCL CKPSENSE FIXED(8) CONSTANT(1);     /*LENGTH OF SENSE FIELD
*                                                            @Y17XACL*/
*DCL CKPMCTLN FIXED(8) CONSTANT(2);     /*LENGTH OF COUNT FIELD
*                                                            @Y17XACL*/
*DCL CKPTRMLN FIXED(8) CONSTANT(1);     /*LENGTH OF TRM STATUS FIELD
*                                                            @Y17XACL*/
*DCL CKPQCBLN FIXED(8) CONSTANT(21);    /*LENGTH OF PRIORITY LEVEL QCB
*                                         DISK POINTERS      @Y17XACL*/
*DCL CKPMQBLN FIXED(8) CONSTANT(6);     /*LENGTH OF MASTER QCB FIELDS
*                                         PLUS DELIMETER     @OX16402*/
*DCL CKPQBKLN FIXED(8) CONSTANT(3);     /*LENGTH OF QBACK POINTER
*                                                            @Y17XACL*/
*DCL CKPLCBLN FIXED(8) CONSTANT(2);     /*LENGTH OF LCB STAT INFO
*                                                            @Y17XACL*/
*DCL CKPDCBLN FIXED(8) CONSTANT(1);     /*LENGTH OF DCB FIELDS
*                                                            @Y17XACL*/
*DCL CKPOCODE FIXED(8) CONSTANT(0);     /*COMMAND OPERATION TYPE
*                                                            @Y17XACL*/
*DCL CKPOCSWC FIXED(8) CONSTANT(1);     /*OPERATION SUB-TYPE @Y17XACL*/
*DCL CKPOCFLG FIXED(8) CONSTANT(2);     /*FLAG BYTE          @Y17XACL*/
*DCL CKPOCREL FIXED(8) CONSTANT(3);     /*RELATIVE LINE NUMBER
*                                                            @Y17XACL*/
*DCL CKPOCLNO FIXED(8) CONSTANT(10);    /* HEX LINE NUMBER   @Y17XACL*/
*DCL CKPOCNAM FIXED(8) CONSTANT(20);    /*DDNAME FOR START/STOP
*                                         COMMAND            @Y17XACL*/
*DCL CKPOCLST FIXED(8) CONSTANT(28);    /*ILIST ADDRESS      @Y17XACL*/
*DCL CDROPC   FIXED(8) CONSTANT(16);    /*KEY FOR OPCTL      @Y17XACL*/
*DCL CDRCKREQ FIXED(8) CONSTANT(24);    /*KEY FOR CKREQ      @Y17XACL*/
*DCL CDRTOTAL FIXED(8) CONSTANT(28);    /*KEY FOR TOTAL      @Y17XACL*/
*DCL CDRTOTLC FIXED(8) CONSTANT(32);    /*KEY FOR TOTAL - CONTINUED
*                                                            @Y17XACL*/
*   /*KEYS USED WITH CREKEY                                  @Y17XACL*/
*DCL CRELCB   BIT(8) CONSTANT('00'X);   /*KEY FOR LCB FOR CHECKPOINT
*                                                            @Y17XACL*/
*DCL CRECHNGT BIT(8) CONSTANT('10'X);   /*KEY FOR TCHNG FROM ALLP
*                                                            @Y17XACL*/
*DCL CREREMVE BIT(8) CONSTANT('20'X);   /*KEY FOR TIME DELAY QUEUE
*                                         REMOVAL ELEMENT    @Y17XACL*/
*DCL CREOPC   BIT(8) CONSTANT('40'X);   /*KEY FOR OPERATOR CONTROL
*                                                            @Y17XACL*/
*DCL CRECKREQ BIT(8) CONSTANT('60'X);   /*KEY FOR CKREQ FROM APPL
*                                         PROGRAM            @Y17XACL*/
*DCL CREINCOF BIT(8) CONSTANT('80'X);   /*KEY FLAG - INCIDENT
*                                         OVERFLOW           @Y17XACL*/
*DCL CRECNCP  BIT(8) CONSTANT('D0'X);   /*KEY FOR 3705 CHECKPOINT
*                                                            @Y17XAXF*/
*DCL CRERNCP  BIT(8) CONSTANT('E0'X);   /*KEY FOR 3705 RESTART
*                                                            @Y17XAXF*/
