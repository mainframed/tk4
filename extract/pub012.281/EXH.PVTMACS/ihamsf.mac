*%GOTO  MSF0;           /*  BILINGUAL MAPPING
         MACRO
&MSFNAME IHAMSF &MSFCBI=NO,&MSFABI=NO,&MSFBLK=NO,&MSFDLNG=2040,        *
               &MSFCW=NO,&MSFPARM=NO,&DSECT=NO,&MSFSCP=NO */
*%MSF0: ;
*%GOTO MSF1;   /*
.MSF1A  ANOP
          AIF ('&MSFBLK' NE 'YES').MSF2A
          AIF ('&DSECT' EQ 'NO').MSF1B
MSFDBLK  DSECT
*
          AGO .MSF1C
.MSF1B  ANOP
         DS    0D .
MSFDBLK  DS    CL(8+&MSFDLNG) .
         ORG   MSFDBLK
.MSF1C  ANOP
*******************************************************************
*                                                                 *
*      MAINTENANCE AND SERVICE SUPPORT FACILITY DATA BLOCK        *
*                          (MSFDBLK)                              *
*                                                                 *
*    COPYRIGHT =                                                  *
*                                                                 *
*            5740-XYN COPYRIGHT IBM CORP 1980
*            LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,
*            REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.
*                                                                 *
*    STATUS                                                       *
*        OS/VS2 JBB1326                                           *
*                                                                 *
*    METHOD OF ACCESS                                             *
*        IHAMSF MSFBLK=YES,DSECT=YES (OR THE DEFAULT OF DSECT=NO) *
*        USING MSFDBLK,REGA                                       *
*        LOAD REGA,(USER'S STORAGE ADDRESS)                       *
*                                                                 *
*    DEVELOPERS                                                   *
*        SPECIFY 'MSFBLK=YES' IF MSFDBLK IS DESIRED. THE DEFAULT  *
*        IS 'MSFBLK=NO'                                           *
*        THE KEYWORD 'DSECT=YES' WILL RESULT IN THE MAPPING BEING *
*        GENERATED AS A DSECT. 'DSECT=NO' (THE DEFAULT) WILL      *
*        RESULT IN THE MAPPING BEING GENERATED WITHOUT A DSECT    *
*        CARD OR CSECT CARD AND THUS WILL BECOME PART OF THE      *
*        CSECT (OR DSECT) WHERE IT IS PHYSICALLY INSERTED.        *
*        SPECIFY 'MSFDLNG=(SOME DECIMAL NUMBER)' TO GIVE THE SIZE *
*        OF THE DATA PORTION OF THE MSSF BUFFER. THE DEFAULT SIZE *
*        IS '2040'.                                               *
*                                                                 *
*    F.E.'S                                                       *
*        MICROFICHE LISTINGS - IHAMSF                             *
*                                                                 *
*******************************************************************
* A-000000-999999                                          @G875P2L
*
MSFDBLNG DS    H .           LENGTH OF THE DATA BLOCK
*                              (MAX ALLOWED LENGTH IS 2048)
MSFCDFLG DS    CL1 .         CALLER FLAGS - COMMAND DEPENDENT
*                                                          @ZM50219
MSFHWFLG DS    CL1 .         HARDWARE FLAGS - COMMAND DEPENDENT
*                                                          @ZM49832
MSFDBRV1 DS    CL2 .         RESERVED - SHOULD BE SET ZEROES
*                                                          @ZM49832
MSFDBRSP DS    H .           MSSF COMPLETION RESPONSE
         ORG   MSFDBRSP
MSFREASN DS    XL1 .         REASON CODE ASSOCIATED WITH
*                              THE RESPONSE CODE
MSFRESPN DS    XL1 .         RESPONSE CODE
MSFDATA  DS    CL&MSFDLNG . VARIABLE LENGTH COMMAND
*                               DEPENDENT DATA.
.MSF2A  ANOP
          AIF ('&MSFCW' NE 'YES').MSF3A
          AIF ('&DSECT' EQ 'NO').MSF2B
MSFCMDWD DSECT
*
         AGO   .MSF2C
.MSF2B  ANOP
         DS    0F .
MSFCMDWD DS    CL4 .
         ORG   MSFCMDWD
.MSF2C  ANOP
*******************************************************************
*                                                                 *
*    MAINTENANCE AND SERVICE SUPPORT FACILITY COMMAND WORD        *
*                        (MSFCMDWD)                               *
*                                                                 *
*    COPYRIGHT =                                                  *
*                                                                 *
*            5740-XYN COPYRIGHT IBM CORP 1980
*            LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,
*            REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.
*                                                                 *
*    STATUS                                                       *
*        OS/VS2 JBB1326                                           *
*                                                                 *
*    METHOD OF ACCESS                                             *
*        IHAMSF MSFCW=YES,DSECT=YES (OR THE DEFAULT OF DSECT=NO)  *
*        USING MSFCMDWD,REGA                                      *
*        LOAD REGA,(USER'S STORAGE ADDRESS)                       *
*                                                                 *
*    DEVELOPERS                                                   *
*        SPECIFY 'MSFCW=YES' IF MSFCMDWD IS DESIRED. THE DEFAULT  *
*        IS 'MSFCW=NO'                                           *
*        THE KEYWORD 'DSECT=YES' WILL RESULT IN THE MAPPING BEING *
*        GENERATED AS A DSECT. 'DSECT=NO' (THE DEFAULT) WILL      *
*        RESULT IN THE MAPPING BEING GENERATED WITHOUT A DSECT    *
*        CARD OR CSECT CARD AND THUS WILL BECOME PART OF THE      *
*        CSECT (OR DSECT) WHERE IT IS PHYSICALLY INSERTED.        *
*                                                                 *
*    F.E.'S                                                       *
*        MICROFICHE LISTINGS - IHAMSF                             *
*                                                                 *
*******************************************************************
* A-000000-999999                                          @G875P2L
*
MSFCMD   DS     CL2 .        MSSF COMMAND CODE
MSFCMDDP DS     CL1 .        COMMAND DEPENDENT INFO FOR MSSF
MSFCMDID DS     CL1 .        ASSIGNED ID FOR THIS COMMAND
.MSF3A  ANOP
          AIF ('&MSFPARM' NE 'YES').MSF4A
          AIF ('&DSECT' EQ 'NO').MSF3B
MSFSVCPL DSECT
*
         AGO   .MSF3C
.MSF3B  ANOP
         DS    0F .
MSFSVCPL DS    CL8 .
         ORG   MSFSVCPL
.MSF3C  ANOP
*******************************************************************
*                                                                 *
*    MAINTENANCE AND SERVICE SUPPORT FACILITY SVC PARAMETER LIST  *
*                         (MSFSVCPL)                              *
*                                                                 *
*    COPYRIGHT =                                                  *
*                                                                 *
*            5740-XYN COPYRIGHT IBM CORP 1980
*            LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,
*            REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.
*                                                                 *
*    STATUS
*        OS/VS2 JBB1326                                           *
*                                                                 *
*    METHOD OF ACCESS                                             *
*        IHAMSF MSFPARM=YES,DSECT=YES (OR THE DEFAULT OF DSECT=NO)*
*        USING MSFSVCPL,REGA                                      *
*        LOAD REGA,(USER'S STORAGE ADDRESS)                       *
*                                                                 *
*    DEVELOPERS                                                   *
*        SPECIFY 'MSFPARM=YES' IF MSFCMDWD IS DESIRED. THE DEFAULT*
*        IS 'MSFPARM=NO'                                          *
*        THE KEYWORD 'DSECT=YES' WILL RESULT IN THE MAPPING BEING *
*        GENERATED AS A DSECT. 'DSECT=NO' (THE DEFAULT) WILL      *
*        RESULT IN THE MAPPING BEING GENERATED WITHOUT A DSECT    *
*        CARD OR CSECT CARD AND THUS WILL BECOME PART OF THE      *
*        CSECT (OR DSECT) WHERE IT IS PHYSICALLY INSERTED.        *
*                                                                 *
*    F.E.'S                                                       *
*        MICROFICHE LISTINGS - IHAMSF                             *
*                                                                 *
*******************************************************************
* A-000000-999999                                          @G875P2L
*
MSFSVCDA DS    F .           ADDR OF THE USER'S MSSF DATA BLOCK
MSFSVCCA DS    F .           ADDR OF WORD CONTAINING THE MSSF
*                            COMMAND WORD
.MSF4A  ANOP
          AIF ('&MSFCBI' NE 'YES').MSF5A
MSFCB    DSECT
*
*******************************************************************
*                                                                 *
*     MAINTENANCE AND SERVICE SUPPORT FACILITY CONTROL BLOCK      *
*                            (MSFCB)                              *
*                                                                 *
*    COPYRIGHT =                                                  *
*                                                                 *
*            5740-XYN COPYRIGHT IBM CORP 1980
*            LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,
*            REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.
*                                                                 *
*    STATUS                                                       *
*        OS/VS2 JBB1326                                           *
*                                                                 *
*    METHOD OF ACCESS                                             *
*        IHAMSF MSFCBI=YES                                        *
*        USING MSFCB,REGA                                         *
*        LOAD REGA,CVTMSFCB                                       *
*                                                                 *
*    DEVELOPERS                                                   *
*        SPECIFY 'MSFCBI=YES' IF MSFCB IS DESIRED. THE DEFAULT IS *
*        'MSFCB=NO'                                               *
*        THE KEYWORD 'DSECT' DOES NOT APPLY. A DSECT WILL ALWAYS  *
*        GENERATED.                                               *
*                                                                 *
*    F.E.'S                                                       *
*        MICROFICHE LISTINGS - IHAMSF                             *
*                                                                 *
*******************************************************************
* A-000000-999999                                          @G875P2L
*
         DS    0D .
MSFCBID  DS    C'MSFCB'      MSFCB BLOCK IDENTIFIER
MSFCRES1 DS    X'000000'     RESERVED
MSFCFLGS DS    XL2           FLAGS
         ORG   MSFCFLGS
MSFCFLG1 DS    X'0'          FLAG BYTE 1
* EQUATES FOR MSFCFLG1
MSFCUSE  EQU   X'80'         MSFCB IS IN USE
MSFCINTR EQU   X'40'         WAITING FOR MSSF INTERRUPTION
MSFCTERM EQU   X'20'         REQUESTOR BEING TERMINATED
*        EQU   X'10'         RESERVED                          @ZMH0028
MSFCSCHE EQU   X'08'         MSFCB'S SRB SCHEDULED
MSFCPOST EQU   X'04'         SRB POSTING ECB IN MSFCB
*        EQU   X'02'         RESERVED
*        EQU   X'01'         RESERVED
MSFCFLG2 DS    X'0'          FLAG BYTE 2
* EQUATES FOR MSFCFLG2
MSFCSPIN EQU   X'80'         BRANCH ENTRY SPIN BIT
*        EQU   X'40'         RESERVED
*        EQU   X'20'         RESERVED
*        EQU   X'10'         RESERVED
*        EQU   X'08'         RESERVED
*        EQU   X'04'         RESERVED
*        EQU   X'02'         RESERVED
*        EQU   X'01'         RESERVED
MSFCASID DS    H .           REQUESTOR'S ASID
MSFCATCB DS    F .           REQUESTOR'S TCB ADDRESS
MSFCBCMD DS    XL4 .         MSFCB'S MSSF COMMAND WORD         @ZM50219
MSFCBFHD DS    XL8 .         MSFCB'S MSSF BUFFER HEADER FOR RECORDING
MSFCECB  DS    XL4 .         ECB TO WAIT/POST REQUESTOR
MSFCSRB  DS    XL44 .        SRB FOR POSTING REQUESTOR'S TCB
MSFCADB  DS    F .           VIRTUAL ADDR OF MSFCB'S MSSF DATA BLOCK
MSFCADBR DS    F .           REAL ADDR OF MSFCB'S MSSF DATA BLOCK
MSFCRES2 DS    F .           RESERVED
MSFCMSFA DS    F .           ADDR OF THE MSFAB
MSFCEP1  DS    F .           BRANCH ENTRY POINT TO SVC
*
.MSF5A  ANOP
          AIF ('&MSFABI' NE 'YES').MSF6A
MSFAB    DSECT
*
*******************************************************************
*                                                                 *
*    MAINTENANCE AND SERVICE SUPPORT FACILITY ATTENTION BLOCK     *
*                         (MSFAB)                                 *
*                                                                 *
*    COPYRIGHT =                                                  *
*                                                                 *
*            5740-XYN COPYRIGHT IBM CORP 1980
*            LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,
*            REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.
*                                                                 *
*    STATUS                                                       *
*        OS/VS2 JBB1326                                           *
*                                                                 *
*    METHOD OF ACCESS                                             *
*        IHAMSF MSFABI=YES                                        *
*        USING MSFAB,REGB                                         *
*        LOAD REGA,CVTMSFCB                                       *
*        LOAD REGB,MSFCMSFA(0,REGA)                               *
*                                                                 *
*    DEVELOPERS                                                   *
*        SPECIFY 'MSFABI=YES' IF MSFAB IS DESIRED. THE DEFAULT IS *
*        'MSFAB=NO'                                               *
*        THE KEYWORD 'DSECT' DOES NOT APPLY. A DSECT WILL ALWAYS  *
*        GENERATED.                                               *
*                                                                 *
*    F.E.'S                                                       *
*        MICROFICHE LISTINGS - IHAMSF                             *
*                                                                 *
*******************************************************************
* A-000000-999999                                          @G875P2L
*
         DS    0D .
MSFABID  DS    C'MSFAB'      MSFAB BLOCK IDENTIFIER
MSFARES1 DS    X'000000'     RESERVED
MSFAFLGS DS    XL2           FLAGS
         ORG   MSFAFLGS
MSFAFLG1 DS    X'0'          FLAG BYTE 1
* EQUATES FOR MSFAFL1
MSFAUSE  EQU   X'80'         MSFAB IS IN USE
MSFAINTR EQU   X'40'         WAITING FOR MSSF INTERRUPTION
MSFATERM EQU   X'20'         REQUESTOR BEING TERMINATED
*        EQU   X'10'         RESERVED                          @ZMH0028
MSFASCHE EQU   X'08'         MSFAB'S SRB SCHEDULED
MSFAPOST EQU   X'04'         SRB POSTING ECB IN MSFAB
*        EQU   X'02'         RESERVED
*        EQU   X'01'         RESERVED
MSFAFLG2 DS    X'0'          FLAG BYTE 2
* EQUATES FOR MSFAFLG2
*        EQU   X'80'         RESERVED
MSFADISC EQU   X'40'         DISCONNECT IN PROGRESS
*        EQU   X'20'         RESERVED
*        EQU   X'10'         RESERVED
*        EQU   X'08'         RESERVED
*        EQU   X'04'         RESERVED
*        EQU   X'02'         RESERVED
*        EQU   X'01'         RESERVED
MSFAASID DS    H .           REQUESTOR'S ASID
MSFAATCB DS    F .           REQUESTOR'S TCB ADDRESS
MSFABCMD DS    XL4 .         MSFAB'S MSSF COMMAND WORD         @ZM50219
MSFABFHD DS    XL8 .         MSFAB'S MSSF BUFFER HEADER FOR RECORDING
MSFAECB  DS    XL4 .         ECB TO WAIT/POST REQUESTOR
MSFASRB  DS    XL44 .        SRB FOR POSTING REQUESTOR'S TCB
MSFAADB  DS    F .           VIRTUAL ADDR OF MSFAB'S MSSF DATA BLOCK
MSFAADBR DS    F .           REAL ADDR OF MSFAB'S MSSF DATA BLOCK
MSFATPAS DS    F .           TP REQUESTOR'S ASID
MSFADSDB DS    F .           VIRTUAL ADDR OF DISCONNECT MSSF DATA BLK
MSFADSDR DS    F .           REAL ADDR OF DISCONNECT MSSF DATA BLOCK
*
.MSF6A  ANOP
          AIF ('&MSFSCP' NE 'YES').MSF7A
SCPINFO  DSECT
*******************************************************************
*                                                                 *
*    MAINTENANCE AND SERVICE SUPPORT FACILITY SCP INFORMATION     *
*                           (SCPINFO)                             *
*                                                                 *
*    COPYRIGHT =                                                  *
*                                                                 *
*            5740-XYN COPYRIGHT IBM CORP 1980
*            LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,
*            REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.
*                                                                 *
*    STATUS                                                       *
*        OS/VS2 JBB1326                                           *
*                                                                 *
*    METHOD OF ACCESS                                             *
*        IHAMSF MSFSCP=YES                                        *
*        USING SCPINFO,REGA                                       *
*        LOAD REGA,(ANY ADDRESS)                                  *
*                                                                 *
*    DEVELOPERS                                                   *
*        SPECIFY 'MSFSCP=YES' IF SCPINFO IS DESIRED. THE DEFAULT  *
*        IS 'MSFSCP=NO'                                           *
*        THE KEYWORD 'DSECT' DOES NOT APPLY. A DSECT WILL ALWAYS  *
*        GENERATED.                                               *
*                                                                 *
*    F.E.'S                                                       *
*        MICROFICHE LISTINGS - IHAMSF                             *
*                                                                 *
*******************************************************************
* A-000000-999999                                          @G875P2L
*
         DS    0F .          FIXED PORTION OF SCPINFO INFORMATION
SCPHEAD  DS    CL8 .         HEADER INFORMATION
         ORG   SCPHEAD
SCPLNG   DS    H .           LENGTH OF FIXED AND VARIABLE PORTIONS
SCPRESV1 DS    CL6 .         PERMANENTLY RESERVED FIELD
SCPSAR   DS    XL1 .         STORAGE ADDRESS RANGE
SCPSAI   DS    XL1 .         STORAGE ADDRESS INCREMENT
SCPSBS   DS    XL1 .         STORAGE BLOCK SIZE
SCPSII   DS    XL1 .         STORAGE INTERLEAVE INTERVAL
         DS    F .           PERMANENTLY RESERVED FIELD
SCPNCPS  DS    H .           NUMBER OF CP'S INSTALLED
SCPOCP   DS    H .           OFFSET TO CP DATA
SCPNHSAS DS    H .           NUMBER OF HSA'S ALLOCATED
SCPOHSA  DS    H .           OFFSET TO HSA DATA
SCPPARM  DS    CL8 .         PARAMETER INFORMATION FROM MSSF
         ORG   SCPPARM
SCPNUCID DS    C .           ALTERNATE NUCLEUS ID
         DS    CL7 .         PERMANENTLY RESERVED FIELD
SCPDATAS DS    0XL1 .        VARIABLE DATA STARTS HERE
*
SCPCP    DSECT
*                            VARIABLE CP SCPINFO INFORMATION
SCPCPA   DS    XL1 .         CP ADDRESS
         DS    XL1 .         PERMANENTLY RESERVED FIELD
*
SCPHSA   DSECT
*                            VARIABLE HSA SCPINFO INFORMATION
SCPHSASZ DS    XL2 .         SIZE OF THIS HSA             @ZM50070
SCPAHSA  DS    XL4 .         ADDRESS OF THIS HSA          @ZM50070
.MSF7A  ANOP
         MEND
        EJECT
          */
 %MSF1:  ;
 %MSF2:   ;
 %IF MSFCBI^='YES' %THEN
          %GOTO MSF3;
 %MSF2A: ;
*/********************************************************************/
*/*                                                                  */
*/*      MAINTENANCE AND SERVICE SUPPORT FACILITY CONTROL BLOCK      */
*/*                            (MSFCB)                               */
*/*                                                                  */
*/*    COPYRIGHT =                                                   */
*/*          5740-XYN COPYRIGHT IBM CORP 1980                        */
*/*          LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,             */
*/*          REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.  */
*/*                                                                  */
*/*    STATUS                                                        */
*/*        OS/VS2 JBB1326                                            */
*/*                                                                  */
*/*    METHOD OF ACCESS                                              */
*/*        DCL MSFCBPTR PTR                                          */
*/*        MSFCBPTR = CVTMSFCB                                       */
*/*                                                                  */
*/*    DEVELOPERS                                                    */
*/*        SPECIFY '%MSFCBI=YES' BEFORE INCLUDE FOR IHAMSF. THE      */
*/*        ASSUMED DEFAULT IS '%MSFCBI=NO'.                          */
*/*        THE MSFCB IS ALWAYS DECLARED AS BASED ON MSFCBPTR.        */
*/*                                                                  */
*/*    F.E.'S                                                        */
*/*        MICROFICHE LISTINGS - IHAMSF                              */
*/*                                                                  */
*/* A-000000-999999                                          @G875P2L*/
*/********************************************************************/
     DCL 1 MSFCB BASED (MSFCBPTR) BDY (DWORD),
           2 MSFCBID  CHAR(5),     /* MSFCB BLOCK IDENTIFIER         */
           2 MSFCRES1 CHAR(3),     /* RESERVED                       */
           2 MSFCFLGS BIT(16) BDY(DWORD), /* FLAGS                   */
             4 MSFCFLG1 BIT(8),    /* FLAG BYTE 1                    */
               6 MSFCUSE BIT(1),   /* MSFCB IS IN USE                */
               6 MSFCINTR BIT(1),  /* WAITING FOR MSSF INTERRUPTION  */
               6 MSFCTERM BIT(1),  /* REQUESTOR BEING TERMINATED     */
               6 *        BIT(1),  /* RESERVED               @ZMH0028*/
               6 MSFCSCHE BIT(1),  /* MSFCB'S SRB SCHEDULED          */
               6 MSFCPOST BIT(1),  /* SRB POSTING ECB IN MSFCB       */
               6 *        BIT(2),  /* RESERVED                       */
             4 MSFCFLG2 BIT(8),    /* FLAG BYTE 2                    */
               6 MSFCSPIN BIT(1),  /* BRANCH ENTRY SPIN BIT          */
               6 *        BIT(7),  /* RESERVED                       */
           2 MSFCASID FIXED(15),   /* REQUESTOR'S ASID               */
           2 MSFCATCB PTR(31),     /* REQUESTOR'S TCB ADDRESS        */
           2 MSFCBCMD CHAR(4),     /* MSFCB'S MSSF COMMAND WORD      */
           2 MSFCBFHD CHAR(8),     /* MSFCB'S MSSF BUFFER HEADER
                                      FOR RECORDING                  */
           2 MSFCECB  FIXED(31),   /* ECB TO WAIT/POST REQUESTOR     */
           2 MSFCSRB  CHAR(44),    /* SRB FOR POSTING REQUESTOR'S TCB*/
           2 MSFCADB PTR(31),      /* VIRTUAL ADDR OF MSFCB'S MSSF DATA
                                      BLOCK                          */
           2 MSFCADBR PTR(31),     /* REAL ADDR OF MSFCB'S MSSF DATA
                                      BLOCK                          */
           2 MSFCRES2 FIXED(31),   /* RESERVED                       */
           2 MSFCMSFA PTR(31),     /* ADDR OF THE MSFAB              */
           2 MSFCEP1  PTR(31);     /* BRANCH ENTRY POINT TO SVC      */
 %MSF3:   ;
 %IF MSFABI^='YES' %THEN
          %GOTO MSF4;
 %MSF3A:  ;
*/********************************************************************/
*/*                                                                  */
*/*      MAINTENANCE AND SERVICE SUPPORT FACILITY ATTENTION BLOCK    */
*/*                            (MSFAB)                               */
*/*    COPYRIGHT =                                                   */
*/*          5740-XYN COPYRIGHT IBM CORP 1980                        */
*/*          LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,             */
*/*          REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.  */
*/*                                                                  */
*/*    STATUS                                                        */
*/*        OS/VS2 JBB1326                                            */
*/*                                                                  */
*/*    METHOD OF ACCESS                                              */
*/*        DCL MSFABPTR PTR                                          */
*/*        MSFCBPTR = CVTMSFCB                                       */
*/*        MSFABPTR = MSFCMSFA                                       */
*/*                                                                  */
*/*    DEVELOPERS                                                    */
*/*        SPECIFY '%MSFABI=YES' BEFORE INCLUDE FOR IHAMSF. THE      */
*/*        ASSUMED DEFAULT IS '%MSFABI=NO'.                          */
*/*        THE MSFAB IS ALWAYS DECLARED AS BASED ON MSFABPTR.        */
*/*                                                                  */
*/*    F.E.'S                                                        */
*/*        MICROFICHE LISTINGS - IHAMSF                              */
*/*                                                                  */
*/* A-000000-999999                                          @G875P2L*/
*/********************************************************************/
     DCL 1 MSFAB BASED (MSFABPTR) BDY (DWORD),
           2 MSFABID  CHAR(5),     /* MSFAB BLOCK IDENTIFIER         */
           2 MSFARES1 CHAR(3),     /* RESERVED                       */
           2 MSFAFLGS BIT(16) BDY(DWORD), /* FLAGS                   */
             4 MSFAFLG1 BIT(8),    /* FLAG BYTE 1                    */
               6 MSFAUSE  BIT(1),  /* MSFAB IS IN USE                */
               6 MSFAINTR BIT(1),  /* WAITING FOR MSSF INTERRUPTION  */
               6 MSFATERM BIT(1),  /* REQUESTOR BEING TERMINATED     */
               6 *        BIT(1),  /* RESERVED               @ZMH0028*/
               6 MSFASCHE BIT(1),  /* MSFAB'S SRB SCHEDULED          */
               6 MSFAPOST BIT(1),  /* SRB POSTING ECB IN MSFAB       */
               6 *        BIT(1),  /* RESERVED                       */
               6 *        BIT(1),  /* RESERVED                       */
             4 MSFAFLG2 BIT(8),    /* FLAG BYTE 2                    */
               6 *        BIT(1),  /* RESERVED                       */
               6 MSFADISC BIT(1),  /* DISCONNECT IN PROGRESS         */
               6 *        BIT(6),  /* RESERVED                       */
           2 MSFAASID FIXED(15),   /* REQUESTOR'S ASID               */
           2 MSFAATCB PTR(31),     /* REQUESTOR'S TCB ADDRESS        */
           2 MSFABCMD CHAR(4),     /* MSFAB'S MSSF COMMAND WORK      */
           2 MSFABFHD CHAR(8),     /* MSFAB'S MSSF BUFFER HEADER
                                      FOR RECORDING                  */
           2 MSFAECB  FIXED(31),   /* ECB TO WAIT/POST REQUESTOR     */
           2 MSFASRB  CHAR(44),    /* SRB FOR POSTING REQUESTOR'S TCB*/
           2 MSFAADB  PTR(31),     /* VIRTUAL ADDR OF MSFAB'S MSSF DATA
                                      BLOCK                          */
           2 MSFAADBR PTR(31),     /* REAL ADDR OF MSFAB'S MSSF DATA
                                      BLOCK                          */
           2 MSFATPAS FIXED(31),   /* TP REQUESTOR'S ASID            */
           2 MSFADSDB PTR(31),     /* VIRTUAL ADDR OF DISCONNECT MSSF
                                      DATA BLOCK                     */
           2 MSFADSDR PTR(31);     /* REAL ADDR OF DISCONNECT MSSF
                                      DATA BLOCK                     */
 %MSF4:   ;
 %IF MSFBLK^='YES' %THEN
          %GOTO MSF5;
 %MSF4A:  ;
*/********************************************************************/
*/*                                                                  */
*/*      MAINTENANCE AND SERVICE SUPPORT FACILITY DATA BLOCK         */
*/*                           (MSFDBLK)                              */
*/*                                                                  */
*/*    COPYRIGHT =                                                   */
*/*          5740-XYN COPYRIGHT IBM CORP 1980                        */
*/*          LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,             */
*/*          REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.  */
*/*    STATUS                                                        */
*/*        OS/VS2 JBB1326                                            */
*/*                                                                  */
*/*    METHOD OF ACCESS                                              */
*/*        DCL ANY POINTER WHEN '%MSFBBASE= ' IS SPECIFIED           */
*/*                                                                  */
*/*    DEVELOPERS                                                    */
*/*        SPECIFY '%MSFBLK=YES' BEFORE INCLUDE FOR IHAMSF. THE      */
*/*        ASSUMED DEFAULT IS '%MSFBLK=NO'.                          */
*/*        SPECIFY '%MSFBBASE=(SOME BASING EXPRESSION)' BEFORE       */
*/*        INCLUDE FOR IHAMSF WHEN THE MAPPING SHOULD BE BASED. THE  */
*/*        DEFAULT IS FOR THE MAPPING TO BE NON-BASED.               */
*/*        SPECIFY '%MSFDLNG=(SOME DECIMAL NUMBER)' TO GIVE THE SIZE */
*/*        OF THE DATA PORTION OF THE MSSF BUFFER. THE DEFAULT SIZE  */
*/*        IS '2040'.                                                */
*/*                                                                  */
*/*    F.E.'S                                                        */
*/*        MICROFICHE LISTINGS - IHAMSF                              */
*/*                                                                  */
*/* A-000000-999999                                          @G875P2L*/
*/********************************************************************/
 %IF MSFDLNG='' %THEN
 %MSFDLNG='2040';
 %IF MSFBBASE='' %THEN %GOTO NOBASE1;
     DCL 1 MSFDBLK MSFBBASE BDY (DWORD),
 %GOTO NOBASE1A;
 %NOBASE1: ;
     DCL 1 MSFDBLK BDY (DWORD),
 %NOBASE1A: ;
           2 MSFDBLNG FIXED(15),   /* LENGTH OF THE DATA BLOCK
                                      (MAX ALLOWED LENGTH IS 2048)   */
           2 MSFCDFLG CHAR(1),     /* CALLER FLAGS - COMMAND DEPEND.
                                                             @ZM49832*/
           2 MSFHWFLG CHAR(1),     /* HARDWARE FLAGS - COMMAND DEP.
                                                             @ZM49832*/
           2 MSFDBRV1 CHAR(2),     /* RESERVED - MUST BE SET TO ZERO
                                                             @ZM49832*/
           2 MSFDBRSP FIXED(15),   /* MSSF COMPLETION RESPONSE       */
             4 MSFREASN FIXED(8),  /* REASON CODE ASSOCIATED WITH
                                        THE RESPONSE CODE            */
             4 MSFRESPN FIXED(8),  /* RESPONSE CODE                  */
           2 MSFDATA  CHAR(MSFDLNG); /* VARIABLE LENGTH COMMAND
                                        DEPENDENT DATA.              */
 %MSF5:   ;
 %IF MSFCW^='YES' %THEN
          %GOTO MSF6;
 %MSF5A:  ;
*/********************************************************************/
*/*                                                                  */
*/*      MAINTENANCE AND SERVICE SUPPORT FACILITY COMMAND WORD       */
*/*                          (MSFCMDWD)                              */
*/*    COPYRIGHT =                                                   */
*/*          5740-XYN COPYRIGHT IBM CORP 1980                        */
*/*          LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,             */
*/*          REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.  */
*/*                                                                  */
*/*    STATUS                                                        */
*/*        OS/VS2 JBB1326                                            */
*/*                                                                  */
*/*    METHOD OF ACCESS                                              */
*/*        DCL ANY POINTER WHEN '%MSFCBASE= ' IS SPECIFIED           */
*/*                                                                  */
*/*    DEVELOPERS                                                    */
*/*        SPECIFY '%MSFCW=YES' BEFORE INCLUDE FOR IHAMSF. THE       */
*/*        ASSUMED DEFAULT IS '%MSFCW=NO'.                           */
*/*        SPECIFY '%MSFCBASE=(SOME BASING EXPRESSION)' BEFORE       */
*/*        INCLUDE FOR IHAMSF WHEN THE MAPPING SHOULD BE BASED. THE  */
*/*        DEFAULT IS FOR THE MAPPING TO BE NON-BASED.               */
*/*                                                                  */
*/*    F.E.'S                                                        */
*/*        MICROFICHE LISTINGS - IHAMSF                              */
*/*                                                                  */
*/* A-000000-999999                                          @G875P2L*/
*/********************************************************************/
 %IF MSFCBASE='' %THEN %GOTO NOBASE2;
     DCL 1 MSFCMDWD MSFCBASE  BDY (WORD),
 %GOTO NOBASE2A;
 %NOBASE2: ;
     DCL 1 MSFCMDWD BDY (WORD),
 %NOBASE2A: ;
           2 MSFCMD   CHAR(2),     /* MSSF COMMAND CODE              */
           2 MSFCMDDP CHAR(1),     /* COMMAND DEPENDENT INFO FOR MSSF*/
           2 MSFCMDID CHAR(1);     /* ASSIGNED ID FOR THIS COMMAND   */
 %MSF6:   ;
 %IF MSFPARM^='YES' %THEN
          %GOTO MSF7;
 %MSF6A:  ;
*/********************************************************************/
*/*                                                                  */
*/*   MAINTENANCE AND SERVICE SUPPORT FACILITY SVC PARAMETER LIST    */
*/*                         (MSFSVCPL)                               */
*/*    COPYRIGHT =                                                   */
*/*          5740-XYN COPYRIGHT IBM CORP 1980                        */
*/*          LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,             */
*/*          REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.  */
*/*                                                                  */
*/*    STATUS                                                        */
*/*        OS/VS2 JBB1326                                            */
*/*                                                                  */
*/*    METHOD OF ACCESS                                              */
*/*        DCL ANY POINTER WHEN '%MSFPARM= ' IS SPECIFIED            */
*/*                                                                  */
*/*    DEVELOPERS                                                    */
*/*        SPECIFY '%MSFPARM=YES' BEFORE INCLUDE FOR IHAMSF. THE     */
*/*        ASSUMED DEFAULT IS '%MSFPARM=NO'.                         */
*/*        SPECIFY '%MSFPBASE=(SOME BASING EXPRESSION)' BEFORE       */
*/*        INCLUDE FOR IHAMSF WHEN THE MAPPING SHOULD BE BASED. THE  */
*/*        DEFAULT IS FOR THE MAPPING TO BE NON-BASED.               */
*/*                                                                  */
*/*    F.E.'S                                                        */
*/*        MICROFICHE LISTINGS - IHAMSF                              */
*/*                                                                  */
*/* A-000000-999999                                          @G875P2L*/
*/********************************************************************/
 %IF MSFPBASE='' %THEN %GOTO NOBASE3;
     DCL 1 MSFSVCPL MSFPBASE  BDY (WORD),
 %GOTO NOBASE3A;
 %NOBASE3: ;
     DCL 1 MSFSVCPL BDY (WORD),
 %NOBASE3A: ;
           2 MSFSVCDA PTR(31),     /* ADDR OF THE USER'S MSSF DATA
                                      BLOCK                          */
           2 MSFSVCCA PTR(31);     /* ADDR OF WORD CONTAINING THE MSSF
                                      COMMAND WORD                   */
 %MSF7:   ;
 %IF MSFSCP^='YES' %THEN
          %GOTO MSFEND;
 %MSF7A:  ;
*/********************************************************************/
*/*                                                                  */
*/*      MAINTENANCE AND SERVICE SUPPORT FACILITY SCP INFORMATION    */
*/*                         (SCPINFO)                                */
*/*    COPYRIGHT =                                                   */
*/*          5740-XYN COPYRIGHT IBM CORP 1980                        */
*/*          LICENSED MATERIAL-PROGRAM, PROPERTY OF IBM,             */
*/*          REFER TO COPYRIGHT INSTRUCTIONS FORM NUMBER G120-2083.  */
*/*                                                                  */
*/*    STATUS                                                        */
*/*        OS/VS2 JBB1326                                            */
*/*                                                                  */
*/*    METHOD OF ACCESS                                              */
*/*        DCL ANY POINTER                                           */
*/*                                                                  */
*/*    DEVELOPERS                                                    */
*/*        SPECIFY '%MSFSCP=YES' BEFORE INCLUDE FOR IHAMSF. THE      */
*/*        ASSUMED DEFAULT IS '%MSFSCP=NO'.                          */
*/*        THE SCPINFO IS ALWAYS DECLARED AS BASED BUT NOT ON ANY    */
*/*        SPECIFIC POINTER.                                         */
*/*                                                                  */
*/*    F.E.'S                                                        */
*/*        MICROFICHE LISTINGS - IHAMSF                              */
*/*                                                                  */
*/* A-000000-999999                                          @G875P2L*/
*/********************************************************************/
     DCL 1 SCPINFO BDY (WORD) BASED, /* THE FIXED DATA OF SCPINFO    */
           2 SCPHEAD  CHAR(8) BDY(WORD), /* HEADER INFORMATION       */
             4 SCPLNG FIXED(15),   /* LENGTH OF FIXED AND VARIABLE
                                      PORTIONS                       */
             4 SCPRESV1 CHAR(6),   /* PERMANENTLY RESERVED FIELD     */
           2 SCPSAR   FIXED(8),    /* STORAGE ADDRESS RANGE          */
           2 SCPSAI   FIXED(8),    /* STORAGE ADDRESS INCREMENT      */
           2 SCPSBS   FIXED(8),    /* STORAGE BLOCK SIZE             */
           2 SCPSII   FIXED(8),    /* STORAGE INTERLEAVE INTERVAL    */
           2 *        FIXED(31),   /* PERMANENTLY RESERVED FIELD     */
           2 SCPNCPS  FIXED(15),   /* NUMBER OF CP'S INSTALLED       */
           2 SCPOCP   FIXED(15),   /* OFFSET TO CP DATA              */
           2 SCPNHSAS FIXED(15),   /* NUMBER OF HSA'S ALLOCATED      */
           2 SCPOHSA  FIXED(15),   /* OFFSET TO HSA DATA             */
           2 SCPPARM CHAR(8),      /* MSSF PARAMETER INFORMATION     */
             4 SCPNUCID CHAR(1),   /* ALTERNATE NUCLEUS ID           */
           2 SCPDATAS CHAR(0);     /* VARIABLE DATA STARTS HERE      */
     DCL 1 SCPCP BASED,            /* VARIABLE CP DATA OF SCPINFO
                                                             @ZM50070*/
           2 SCPCPA   FIXED(8),    /* CP ADDRESS                     */
           2 *        FIXED(8);    /* PERMANENTLY RESERVED FIELD     */
     DCL 1 SCPHSA BASED,           /* VARIABLE HSA DATA OF SCPINFO
                                                             @ZM50070*/
           2 SCPHSASZ BIT(16),     /* SIZE OF THIS HSA       @ZM50070*/
           2 SCPAHSA  BIT(32);     /* ADDRESS OF THIS HSA    @ZM50070*/
 %MSFEND:  ;
