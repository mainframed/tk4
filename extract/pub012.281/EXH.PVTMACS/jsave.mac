         MACRO
&NAME    JSAVE &BASE=YES
.*       SAVES THE REGISTERS OF THE CALLING PROGRAM INTO A PUSH DOWN
.*       SAVE AREA (R2 THRU R9). UNLESS OVERRIDDEN THE MACRO WILL LOAD
.*       THE BASE REGISTER R8, FROM R12 AND GIVE A USING STATEMENT.
         AIF   (K'&NAME EQ 0).ERR1
         AIF   ('&BASE' EQ 'NO').NXA
         USING &NAME,R8                 SET USING FOR SUBR BASE
.NXA     ANOP
&NAME    L     R15,JCLVLPTR             POINT TO CURRENT LEVEL
         LA    R15,JSAVESZ(,R15)        INCREMENT LEVEL POINTER
         ST    R15,JCLVLPTR             STORE NEW LEVEL POINTER
         STM   R2,R9,0(R15)             SAVE R2 THRU R9
         AIF   ('&BASE' EQ 'NO').NXB
         LR    R8,R12                   ESTABLISH SUBR BASE
.NXB     MEXIT
.ERR1    MNOTE 8,'OMITTED NAME.'
         MEND
