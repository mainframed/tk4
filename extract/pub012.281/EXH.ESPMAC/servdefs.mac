         MACRO ,
&NM     SERVDEFS &PARM=10
         GBLC  &MACPLAB,&SRVLMOD(20),&SRVLDEL(20)
         GBLB  &SRVBMOD(20)
         GBLB  &BUGBEAR,&ZZSPIE
         GBLB  &MVS,&MVSSP,&MVSXA,&MVSESA
         GBLA  &SRVNMOD
.*--------------------------------------------------------------------*
.*  SERVDEFS IS USED IN THE PROGRAM'S MAIN SAVE AREA TO EXPAND THE    *
.*  ADDRESS LABELS FOR STANDARD SERVICE ROUTINES (@SERVICE, @PRINTER, *
.*  ETC.).  WHEN RUNNING IN DEBUG MODE, IT ALSO EXPANDS PGMTRACE AND  *
.*  DEBTRACE WORK AREAS.                                              *
.*--------------------------------------------------------------------*
         LCLA  &I,&J
&MACPLAB SETC  '&NM'         ENSURE CORRECT VALUE
         MACPARM MODE=LABEL
@SERVICE DS    A             ADDRESS OF @SERVICE ROUTINE
@SERVEXC DS    A             EXECUTED INSTRUCITON (SVC, BASSM, ...)
@SERVTCA DS    A             ADDRESS OF @SERVICE TASK CONTROL AREA
.DSLOOP  AIF   (&I GE &SRVNMOD).NDLOOP
&I       SETA  &I+1
         AIF   (&SRVBMOD(&I)).DSLOOP  SKIP EXPANSION ?
&SRVLMOD(&I)  DS  A
         AGO   .DSLOOP
.NDLOOP  AIF   (NOT &ZZSPIE).NDSPIE  SKIP IF NOT (E)SPIE MODE   GP09277
@SPIEDER DS    A  *DEBUG*    @SPIEDER (E)SPIE INTERCEPT         GP09277
.NDSPIE  AIF   (NOT &BUGBEAR).PARM  SKIP IF NOT DEBUG MODE
@TRACE   DS    A  *DEBUG*    PGMTRACE ROUTINE
    #TRC  DATA    *DEBUG*    PGMTRACE RE-ENTRANT WORK AREA      GP06319
         AIF   (NOT &MVSXA AND NOT &MVSESA).OLDBUG
         DBT   MODE=D  *DEBUG*  DEBTRACE WORK AREA
         AGO   .PARM
.OLDBUG  DBO   MODE=D  *DEBUG*  DEBTROLD WORK AREA
.PARM    AIF   ('&PARM' EQ '').MEND
.*DEFER* AIF   (T'&PARM' NE 'N').MEND
         AIF   ('&PARM' EQ '0').MEND
CALLPARM DS    (&PARM)A      PARAMETER LIST FOR SUBCALL, ETC.
RETCODE  DS    F             PROGRAM RETURN CODE
RSNCODE  DS    F             ERROR REASON
RR1CODE  DS    F             RETURNED R1                        GP04068
.MEND    MEND  ,
