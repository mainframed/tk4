         MACRO
&NM      XSNAP &TEST=
         GBLC  &MACPLAB
.*
.*    THIS MACRO, RUNNING UNDER THE EXORCISE DEBUG PROGRAM, WILL SNAP
.*    STORAGE, REGISTERS, ETC. SIMILAR TO A -SNAP REQUEST.
.*    RESTRUCTURED FOR EASIER MAINTENANCE                       GP15236
.*
&MACPLAB SETC  '&NM'                                            GP15236
         AIF   ('&TEST' EQ '').NOTEST
         MACPARM OPTS,DEBUG,OP=TM TEST FOR DEBUG ENVIRONMENT
         MACPARM *+8,OP=BZ,MODE=ONE
         AGO   .SNAP
.NOTEST  AIF   ('&SYSPARM' NE 'DEBUG').EASY                       *TSM*
.SNAP    MACPARM 0H'0',X'83070000',OP=DC
         MEXIT ,
.EASY    MACPARM MODE=LBL    LABEL ONLY, IF NEEDED
         MEND
