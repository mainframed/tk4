         MACRO
&NM      XDROP  &REGS,&TEST=
         COPY  OPTIONS
         GBLB  &BUGBEAR                                         GP12352
.*     THIS MACRO DROPS (EXECUTABLE) REGISTER MAPPINGS IN CONJUNCTION
.*       WITH EXORCISE.
&SEC     SETA  N'&SYSLIST
&SEC2    SETA  0
&RING    SETC  '&NM'
         AIF   ('&TEST' NE '').TEST
         AIF   (NOT &BUGBEAR AND '&SYSPARM' NE 'DEBUG').EASY    GP12352
.SNAP    AIF   ('&REGS' EQ '').NONE
.LOOP    AIF   (&SEC2 GE &SEC).EOL
&SEC2    SETA  &SEC2+1
         AIF   ('&SYSLIST(&SEC2)' EQ '').LOOP
&RING  DC  0H'0',X'8308',AL.4(&SYSLIST(&SEC2)),AL.12(0)
&RING    SETC  ''
         AGO   .LOOP
.NONE    ANOP
&RING    DC    0H'0',X'83080000' .     DROP ALL REGISTER MAPPINGS
.EOL     AIF   ('&TEST' EQ '').MEND
ZZZZ&SYSNDX DS 0H .          END OF DROP EXPANSION
         MEXIT
.TEST    ANOP
&RING    TM    OPTS,DEBUG .    RUNNING UNDER EXORCISE ?
         BZ    ZZZZ&SYSNDX .      NO, SKIP AROUND DIAG
&RING    SETC  ''
         AGO   .SNAP
.EASY    AIF   ('&NM' EQ '').MEND
&NM      DS    0H .          LABEL ONLY - NO SNAP EXPANSION
.MEND    MEND
