         MACRO ,                                      ADDED ON 20080317
&NM      MAPXOPTS &PFX=OW,&DSECT=YES,&MAXDSN=
         LCLC  &DS,&P
&P       SETC  '&PFX'
&DS      SETC  '&P'.'WORK'
         AIF   ('&NM' EQ '').HAVEDS
&DS      SETC  '&NM'
.HAVEDS  AIF   ('&DSECT' NE 'YES' AND '&DSECT' NE 'ONE').NODSECT
&DS      DSECT ,             MAPPING OF OPTIONS CONTROL BLOCK
         AGO   .COMDS
.NODSECT ANOP  ,
&DS      DS    0D            MAPPING OF OPTIONS CONTROL BLOCK
.COMDS   ANOP  ,
&P.LINK   DC   A(0)          LINK TO NEXT BLOCK
&P.SIZE   DC   A(0)          SUBPOOL/SIZE OF THIS BLOCK
&P.ID     DC   CL8' '        BLOCK ID
&P.IQ     DC   H'0'          (OPTIONAL) BLOCK QUALIFIER
&P.FMIX   DC   X'00'         FORMATTING INDEX
&P.FXHX   EQU  0               JUST FORMAT HEX
&P.FXDS   EQU  1               DSN ARRAY
&P.FXDM   EQU  2               DSN(MEM) ARRAY
&P.FXLF   EQU  3               LIST OFFLINE
&P.FXDX   EQU  4               DATA SET PREFIX LIST
.*.FXxx   EQU                    RESERVED
.*.FXxx   EQU                    RESERVED
.*.FXxx   EQU                    RESERVED
.*.FXxx   EQU                    RESERVED
.*.FXxx   EQU                    RESERVED
&P.ENLN   DC   X'00'         LENGTH OF ARRAY ENTRY
&P.UWORK  DC   A(0)          USE DEPENDING ON FUNCTION
&P.FXHD  DS    0D              START OF VARIABLE PORTION
&P.FXLN  EQU   *-&DS           FIXED OVERHEAD PER BLOCK
         SPACE 1
         AIF   ('&DSECT' NE 'YES').DSNODS
&P.DSENT DSECT ,             MAPPING OF DATA SET LIST ENTRY
         AGO   .DSCOM
.DSNODS  ANOP  ,
         ORG   &P.FXHD
&P.DSENT DS    0A            MAPPING OF DATA SET LIST ENTRY
.DSCOM   ANOP  ,
&P.DSFLAG DC   X'00'         FLAGS
&P.DFSERR EQU  X'80'           FATAL ERROR DURING OPTIONS SETUP
&P.DSORPS EQU  X'40'           PS DSORG
&P.DFNMT  EQU  X'20'           VOLUME NOT MOUNTED
&P.DFCAT  EQU  X'10'           DS FOUND IN CATALOG              GP08252
.*.DFAMS  EQU  X'08'           RESERVED FOR VSAM                GP08252
&P.DSORPO EQU  X'02'           PO DSORG
&P.DSORU  EQU  X'01'           (DSORG=U)
&P.DSSIZE DC   X'00'         LENGTH OF DSN
&P.DSVOL  DC   CL6' '  1/2   VOLUME SERIAL
&P.DSNAME DC   CL44' ' 2/2   DATA SET NAME
&P.DSLEN  EQU  *-&P.DSENT      ENTRY LENGTH
&P.DSMEM  DC   CL8' '  3/2   (OPTIONAL) MEMBER NAME
&P.DSMLN  EQU  *-&P.DSENT      ENTRY LENGTH WITH MEMBER EXTENSION
         SPACE 1
         AIF   ('&DSECT' NE 'YES').LONODS
&P.LOENT DSECT ,             MAPPING OF LIST OFFLINE ENTRY
         AGO   .LOCOM
.LONODS  ANOP  ,
         ORG   &P.FXHD
&P.LOENT DS    0A            MAPPING OF LIST OFFLINE ENTRY
.LOCOM   ANOP  ,
          DC   2X'0'           COMPATIBILITY WITH DS FORMAT
&P.LOVOL  DC   CL6' '        (DEFAULT) VOLSER
&P.LODSN  DC   CL44' '       (DEFAULT) DATA SET
&P.LOMEM  DC   CL8' '        (DEFAULT) MEMBER
&P.LOCOP  DC   X'01'         COPY COUNT
&P.LOCLAS DC   C'A'          SYSOUT CLASS
&P.LOFORM DC   CL8' '        FORMS
&P.LOWTR  DC   CL8' '        WRITER (NOT USED)
&P.LODEST DC   CL8' '        DESTINATION - NOT USED
&P.LOLEN  EQU  *-&P.LOENT      ENTRY LENGTH
         SPACE 1
         AIF   ('&DSECT' NE 'YES').PFNODS
&P.PFENT DSECT ,             MAPPING OF DATA SET PREFIXES
         AGO   .PFCOM
.PFNODS  ANOP  ,
         ORG   &P.FXHD
&P.PFENT DS    0A            MAPPING OF DATA SET LIST ENTRY
.PFCOM   ANOP  ,
&P.PFCHAR DC   C' '          REPLACEMENT CHARACTER
&P.PFSIZE DC   X'00'         LENGTH OF PREXIX
&P.PFNAME DC   CL30' '       DATA SET PREFIX
&P.PFLEN  EQU  *-&P.PFENT      ENTRY LENGTH
         AIF   ('&MAXDSN' EQ '' OR '&DSECT' EQ 'YES').MEND
         ORG   &P.FXHD
         DS    (&MAXDSN)XL(&P.DSLEN)
.MEND    MEND  ,
