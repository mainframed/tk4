* PROGRAM TO DETERMINE IF THE CURRENT TASK IS RUNNING UNDER
* TSO OR BATCH.  TSOADDR WILL CONTAIN THE ADDRESS OF A BYTE
* IN WHICH THE HIGH ORDER BIT IS 1 IF THE TASK IS IN A TSO
* ADDRESS SPACE; 0 OTHERWISE.  (SEE SPL:  SUPERVISOR).
* THIS VERSION IS A FOR FORTRAN AND IS CODED AS A FUNCTION SUBPROGRAM.
* ACCORDINGLY REGISTER 0 IS SET TO 1 IF TSO; SET TO 0 OTHERWISE.
* ATTRIBUTES:  REFR, REUS, RENT.
* APB  11/30/77
ITSO     XSAVE OPT=CSECT,REEN=4
         USING DSA,13
         LA    2,TSOADDR
         EXTRACT (2),'S',FIELDS=(TSO)
         LA    0,1
         L     2,TSOADDR
         TM    0(2),X'80'
         BO    EXIT
         SR    0,0
EXIT     SR    15,15               SET RETURN CODE 0
         XRETURN T=*,RGS=(14,1-12),REEN=4,RC=(15)
DSA      DSECT
         DS    18F               SAVEAREA
TSOADDR  DS    F
         END   ITSO
