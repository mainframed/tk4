         PRINT NOGEN
FCBADDR1 PLIXSET
*        DCL FCBADDR ENTRY(FILE)RETURNS(PTR);
*        OBTAINS THE FCB ADDRESS FOR AN OPEN FILE
*        RETURNS NULL IF THE FILE IS CLOSED
*****JOSH AUERBACH, OCTOBER 13, 1977
FCBADDR PLIXDENT
         LM    R2,R3,0(R1) GET ARGUMENTS
         L     R2,0(R2)    GET DCLCB ADDRESS
         L     R4,4(R12) GET PRV ADDRESS
         AH    R4,2(R2)    ADD OFFSET
         L     R4,0(R4)    LOAD ADDRESS FROM APPROPRIATE PSEUDOREG
         C     R4,100(R12) COMPARE TO DUMMY VALUE
         BNE   GOOD
*              FILE IS CLOSED
         MVC   0(4,R3),=X'FF000000'    RETURN NULL
         B     FINI
GOOD     ST    R4,0(R3)    STORE ANSWER
FINI     PLIXEXT           RETURN
         END
