BYTE     TITLE 'ROUTINE TO CONVERT A PL/I HALFWORD INTEGER TO EBCDIC'
* BYTE:  ON ENTRY R1 POINTS TO A PARAMETER LIST WHICH CONTAINS THE
* ADDRESS OF A HALFWORD INTEGER AND OF A PL/I LOCATOR-DESCRIPTOR FOR
* A ONE CHARACTER FIXED CHARACTER STRING (SEE PL/I EXECUTION LOGIC
* MANUAL FOR DETAILS ON PL/I VARIBLES, ETC).
* WE MERELY MOVE THE LOW-ORDER BYTE OF THE INTEGER (THUS GIVING THE
* 256 MODULUS OF A TRUE HALFWORD) INTO THE CHARACTER, WHICH PRODUCES
* THE EBCDIC NUMERIC EQUIVALENT, IE. A ONE BYTE INTEGER.
* PL/I DECLARATION:
* DCL BYTE     EXT ENTRY (FIXED BIN(15,0)) RETURNS(CHAR(1));
* ATTRIBUTES:  REUSABLE, REFRESHABLE, REENTRANT.
* APB  05/22/78
         SPACE 1
* MODIFICATIONS  07/09/79:
* UNBYTE ROUTINE ADDED, DOES THE REVERSE OF BYTE
* ENTRIES FOR BYTEB & UNBYTEB ADDED,
* (LOCATOR/DESCRIPTOR FOR BIT(8) STRINGS RESEMBLE L/D FOR CHAR(1),
* THOUGH THE BIT LENGTH IS INCLUDED IN THE DESCRIPTOR).
* PL/I DECLARATIONS:
* DCL UNBYTE   EXT ENTRY (CHAR(1)) RETURNS(FIXED BIN(15,0));
* DCL BYTEB    EXT ENTRY (FIXED BIN(15,0)) RETURNS(BIT(8) ALIGNED);
* DCL UNBYTEB  EXT ENTRY (BIT(8) ALIGNED) RETURNS(FIXED BIN(15,0));
         SPACE 1
BYTE     CSECT
         ENTRY BYTEB,UNBYTE,UNBYTEB
BYTEB    DS    0H
         STM   2,3,28(13)          SAVE REGS 2 & 3
         LM    2,3,0(1)            GET PARMS
         L     3,0(3)              -> CHAR
         MVC   0(1,3),1(2)         EBCDIC CHAR
*        MVC   0(1,3),3(2)         (FULLWORD VERSION)
         LM    2,3,28(13)          RESTORE REGS 2 & 3
         XR    15,15               RETURN CODE 0
         BR    14                  RETURN
         EJECT
UNBYTE   DS    0H
UNBYTEB  DS    0H
         STM   2,3,28(13)          SAVE REGS 2 & 3
         LM    2,3,0(1)            GET PARMS
         L     2,0(2)              -> CHAR
         MVI   0(3),X'00'          CLEAR HI-ORDER BYTE
         MVC   1(1,3),0(2)         MOVE THE BYTE
*        MVI   0(3),X'00'          (FULLWORD VERSION)
*        MVI   1(3),X'00'          (FULLWORD VERSION)
*        MVI   2(3),X'00'          (FULLWORD VERSION)
*        MVC   3(1,3),0(2)         (FULLWORD VERSION)
         LM    2,3,28(13)          RESTORE REGS 2 & 3
         XR    15,15               RETURN CODE 0
         BR    14                  RETURN
         END   BYTE
