//VSAMMAP  PROC SYSOUT='*',LIST='*'
//*
//*        VSAMMAP REQUIRES THAT YOU SUPPLY A STEPCAT AND A
//*        REPRO CONTROL CARD FOR THE FIRST STEP. FOR EXAMPLE:
//*
//*    //         EXEC VSAMMAP
//*     REPRO INDATASET ( MASTRCAT / MSTRPSWD ) OUTFILE ( VSAMCAT )
//*    //STEPCAT  DD  DSN=MASTRCAT,DISP=SHR
//*
//*        THE ONLY VARIABLES ARE "MASTRCAT" AND "MSTRPSWD".
//*
//REPROFLE EXEC PGM=IDCAMS,REGION=1024K
//SYSPRINT DD  SYSOUT=&SYSOUT.
//VSAMCAT  DD  DSN=&&VSAMCAT,DISP=(,PASS),UNIT=SYSDA,
//             SPACE=(CYL,(30,10)),DCB=(BLKSIZE=19060,RECFM=VB)
//*
//ALLOCFLE EXEC PGM=IDCAMS,REGION=512K,COND=(0,LT)
//SYSIN    DD  *
 DEFINE CLUSTER ( NAME ( BILLKEY ) VOLUME( COKET2 ) REUSE -
   INDEXED KEYS(3 1) RECORDSIZE(505 505) REPLICATE IMBED ERASE ) -
  DATA ( CYLINDERS ( 30 10 ) ) -
  INDEX ( TRACKS ( 3 1 ) )
 REPRO INFILE ( VSAMCAT ) OUTDATASET ( BILLKEY ) REUSE
 LISTCAT ENTRIES ( BILLKEY ) ALL
//SYSPRINT DD  SYSOUT=&SYSOUT.
//VSAMCAT  DD  DSN=&&VSAMCAT,DISP=(OLD,PASS)
//*
//O9291B15 EXEC PGM=O9291B15,REGION=1024K,
//             COND=((0,LT,REPROFLE),(12,LT,ALLOCFLE))
//VSAMCAT  DD  DSN=&&VSAMCAT,DISP=(OLD,DELETE)
//VSAMKEY  DD  DSN=BILLKEY,DISP=OLD
//VOLMIN   DD  UNIT=SYSDA,SPACE=(TRK,(15,5)),
//             DCB=(LRECL=75,BLKSIZE=19050,RECFM=FB)
//VOLMOUT  DD  UNIT=SYSDA,SPACE=(TRK,(15,5)),
//             DCB=(LRECL=75,BLKSIZE=19050,RECFM=FB)
//VOLMWK01 DD  UNIT=SYSDA,SPACE=(TRK,15)
//VOLMWK02 DD  UNIT=SYSDA,SPACE=(TRK,15)
//VOLMWK03 DD  UNIT=SYSDA,SPACE=(TRK,15)
//DETLIN   DD  UNIT=SYSDA,SPACE=(TRK,(30,15)),
//             DCB=(LRECL=109,BLKSIZE=18966,RECFM=FB)
//DETLOUT  DD  UNIT=SYSDA,SPACE=(TRK,(30,15)),
//             DCB=(LRECL=109,BLKSIZE=18966,RECFM=FB)
//DETLWK01 DD  UNIT=SYSDA,SPACE=(TRK,30)
//DETLWK02 DD  UNIT=SYSDA,SPACE=(TRK,30)
//DETLWK03 DD  UNIT=SYSDA,SPACE=(TRK,30)
//SYSPRINT DD  SYSOUT=&SYSOUT.
//SYSOUT   DD  SYSOUT=&SYSOUT.
//PRTFILE  DD  SYSOUT=&LIST.,
//             DCB=(LRECL=133,BLKSIZE=133,RECFM=FBA)
//DISKTBL  DD  *
*DEVIC UNITTYPE TRK/CYL CYL/DEV BYTES/TRACK
2305-1 00000110    8       48     14576
2305-2 00000111    8       96     14660
2314   00001000   20      200      7294
3330   00001001   19      404     13030
3340   00001010   12      698      8368
3350   00001011   30      560     19069
3330-1 00001101   19      815     13030
//*
//DELETEFL EXEC PGM=IDCAMS,REGION=512K,COND=EVEN
//SYSIN    DD  *
 DELETE ( BILLKEY ) FORCE
 DELETE ( BILLKEY )
//SYSPRINT DD  SYSOUT=R
// PEND
//*
//*
// EXEC VSAMMAP
 REPRO INDATASET ( MASTCAT / MSTRPSWD ) -
   OUTFILE ( VSAMCAT )
//STEPCAT  DD  DSN=MASTCAT,DISP=OLD
