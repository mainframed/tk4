//D000000   JOB (02,
// 0049177,5,59,,,85704,HQ,177),'W015 CLAYTON WILKIE',
// CLASS=7,MSGLEVEL=1,MSGCLASS=X
//* THIS IS SAMPLE JCL TO RUN A FORTRAN JOB AS A SUBTASK UNDER APEMAN.
//* THE IDEA IS TO RUN THE TRACE TABLE MONITOR TO DETERMINE WHERE THE
//* FORTRAN PROGRAM IS USING MOST OF ITS CPU TIME.
//FORTXCLA  PROC  UCYLS=4,MODTRKS=200,MODCYL=4,
//             OUTTRKS=200,SPCEOPT=',,ROUND',
//             DAUTIL=SYSWK,SEQUTIL=SYSWK,MODDEV=SYSWK,
//             CPART=256K,LPART=128K,PART=128K,
//             LNKEDIT=IEWLF880,LSIZE='120K,28K',LOUTBLK=3509,
//             LOPTION='LET,MAP',MNAME=GO,
//             OPTION=,COPTION=NODECK,PUNCH=DUMMY,
//             MODBLK=3200,COUTBLK=3520,PUNBLK=3520,
//             OUTDCB='RECFM=FBSA,LRECL=133,BLKSIZE=3458',
//             PLIB='W015.APEMAN.PARMLIB',
//             LOGBLK=4000,LOGREC=4000,LOGUNIT=TAPE,
//             QUAL=BOMB,LOG=LOG,SER=,LTRKS=20,STRKS=10
//FORT   EXEC PGM=IFEAAB,REGION=&CPART,PARM='&COPTION,OPT(2)',
//             ACCT='FORTXCLG'
//STEPLIB  DD DSN=SYS1.FORTHX,DISP=SHR
//SYSTERM  DD SYSOUT=A
//SYSPRINT DD SYSOUT=*,SPACE=(3500,(&OUTTRKS,5),&SPCEOPT),
//             DCB=(RECFM=VBA,LRECL=137,BLKSIZE=&COUTBLK)
//SYSLIN   DD UNIT=(&DAUTIL,SEP=SYSPRINT),SPACE=(CYL,(&MODCYL,1)),
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=&MODBLK),
//             DSNAME=&LOADSET,DISP=(MOD,PASS)
//SYSPUNCH DD &PUNCH,SPACE=(3520,(&MODTRKS,5),&SPCEOPT),
//             DCB=(RECFM=FBS,LRECL=80,BLKSIZE=&PUNBLK)
//SYSUT1   DD UNIT=(&SEQUTIL,SEP=SYSPRINT),
//             SPACE=(CYL,(&UCYLS,1)),LABEL=(,NL),
//             DCB=(RECFM=FB,LRECL=105,BLKSIZE=3255)
//SYSUT2   DD UNIT=(&SEQUTIL,SEP=(SYSUT1,SYSPRINT)),
//             SPACE=(CYL,(&UCYLS,1)),LABEL=(,NL)
//LKED   EXEC PGM=&LNKEDIT,PARM='LIST,&LOPTION,SIZE=(&LSIZE)',
//             COND=(4,LT,FORT),REGION=&LPART
//SYSABEND DD SYSOUT=A
//SYSLIB   DD DSNAME=SYS1.MOD2LIB,DISP=SHR
//SYSPRINT DD SYSOUT=*,DCB=(RECFM=FBSA,BLKSIZE=&LOUTBLK),
//             SPACE=(3520,(&OUTTRKS,5),&SPCEOPT)
//SYSLIN   DD DSNAME=&LOADSET,DISP=(OLD,DELETE)
//         DD DDNAME=SYSIN
//SYSLMOD  DD DSNAME=&GOSET(&MNAME),UNIT=&MODDEV,DISP=(MOD,PASS),
//             SPACE=(CYL,(&MODCYL,1,1))
//SYSUT1   DD UNIT=(&DAUTIL,SEP=(SYSLIB,SYSLIN,SYSLMOD)),
//             SPACE=(CYL,(&UCYLS,1))
//GO     EXEC PGM=APEUSER,PARM='&OPTION',REGION=&PART,
//             COND=((4,LT,FORT),(4,LT,LKED))
//STEPLIB  DD DSN=W015.GDSMODS.LOAD,DISP=SHR
//         DD DSN=SYS1.MODLNK22,DISP=SHR
//         DD DSN=&GOSET,DISP=(OLD,PASS)
//FT05F001 DD DDNAME=SYSIN
//FT06F001 DD SYSOUT=A,SPACE=(3520,(&OUTTRKS,5),&SPCEOPT),
//             UNIT=(&DAUTIL,SEP=FT05F001),DCB=(&OUTDCB)
//MONPRINT DD SYSOUT=*
//SYSUDUMP DD SYSOUT=A
//SNAPDD   DD SYSOUT=A
//MONPARM  DD DSN=&PLIB,DISP=SHR
//MONLOG   DD DSN=&QUAL..APEMAN.&LOG,DISP=(NEW,KEEP),
//             UNIT=&LOGUNIT,VOL=SER=&SER,SPACE=(TRK,(&LTRKS,&STRKS)),
//             DCB=(RECFM=FB,LRECL=&LOGREC,BLKSIZE=&LOGBLK)
//  PEND
//APELINK EXEC PGM=IEWLF128,PARM='LIST,XREF,SIZE=(312K,120K)',
//  REGION=320K,ACCT='LKED    '
//SYSPRINT DD SYSOUT=*,DCB=(RECFM=FBSA,LRECL=121,BLKSIZE=3509)
//SYSLMOD DD DSN=W015.APEMAN.LOAD,DISP=OLD
//SYSLIB DD DSN=W015.APEMAN.OBJ,DISP=SHR
//SYSUT1 DD UNIT=(SYSWK,SEP=(SYSLMOD,SYSLIN)),SPACE=(CYL,(4,1))
//SYSLIN DD *
 INCLUDE SYSLIB(GETDAT)
 INCLUDE SYSLIB(GETPRM)
 INCLUDE SYSLIB(PARAMS)
 INCLUDE SYSLIB(INPUT)
 INCLUDE SYSLIB(FNDVAL)
 INCLUDE SYSLIB(OUTPUT)
 INCLUDE SYSLIB(APEUSER)
 ENTRY   APEUSER
 NAME    APEUSER
//*MAPLPA  EXEC PGM=AMBLIST
//*SYSLIB DD DSN=SYS1.NUCLEUS,DISP=SHR
//*SYSPRINT DD UNIT=3350,DISP=(NEW,CATLG),VOL=SER=MESURE,
//*  DSNAME=W015.APEMAN.LPAMAP,
//*  SPACE=(TRK,(20,10)),DCB=(RECFM=FBA,LRECL=121,BLKSIZE=3630)
//*SYSIN DD *
//*   LISTLPA
//*PRINTLPA EXEC PGM=IEBGENER,COND=(5,LE)
//*SYSPRINT DD SYSOUT=A
//*SYSUT1 DD DSN=W015.APEMAN.LPAMAP,DISP=SHR,UNIT=3350,VOL=SER=MESURE
//*SYSUT2 DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=121,BLKSIZE=3630)
//*SYSIN DD DUMMY
//SETUP EXEC PGM=IEBUPDTE,PARM=NEW
//SYSPRINT DD SYSOUT=*
//SYSUT2 DD DSN=APEPARMS,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//  UNIT=SYSWK,DISP=(,PASS),SPACE=(TRK,(2,1,4))
//SYSIN DD *
./       ADD   NAME=APEMAN
MILLI,INTVAL=200,MAXTIM=3,MONT=1
./       ADD   NAME=MONP
JOB=*PLPA
JOB=THIS
./       ADD   NAME=MONQ
MAJOR=SYSDSN
MAJOR=SYSIEFSD
MAJOR=SYSVTOC
MAJOR=SYSZLOGR
./       ADD   NAME=MONT
TYPE=SVC
TYPE=I/O
GTF
./       ADD   NAME=MONU
TYPE=DA
./       ENDUP
//ZYSIN DD *
./       ADD   NAME=MONT
TYPE=PGM
TYPE=SVC
TYPE=I/O
./       ENDUP
/* DELIMITER CARD
//TRACE EXEC PGM=DYNTRACE,PARM=TURNON
//STEPLIB DD DSN=W015.APEMAN.LOAD,DISP=SHR
//SYSABEND DD SYSOUT=A
//SYSPRINT DD SYSOUT=*
//APETEST EXEC FORTXCLA,LOGUNIT=3350,SER=MESURE,QUAL=W015,LOG=LOGT,
//  PLIB=APEPARMS,PART=520K,COPTION='NODECK,XREF,LIST,MAP'
//FORT.SYSIN DD DSN=W015.APEMAN.FORT(SIEVE),DISP=SHR
//*
//GO.MONLOG DD DISP=(NEW,CATLG)
