&RJCARD1
//  TIME=&JTIME,MSGLEVEL=1,REGION=4096K,PRTY=&JPRTY,
//  MSGCLASS=&JMCLASS,NOTIFY=&ZUSER
//*MAIN SYSTEM=&JMAIN,LREGION=512K,CLASS=&JCLASS
//*MAIN FAILURE=CANCEL
)SEL &DOMSS = Y && &CHECK ^= CHECK × &SMPOPT = ACCEPT  && &CHECK = &Z
//**********
//ALLOC EXEC PGM=IEHPROGM
//SYSPRINT DD SYSOUT=*
//SYSIN DD DUMMY
//ALLOCIT  DD DSN=&&APPLY,DISP=(NEW,PASS),
//  SPACE=(CYL,(&SPRIM,&SSEC)),UNIT=SYSDA,
//  DCB=(RECFM=FBA,LRECL=121,BLKSIZE=1210)
)ENDSEL
//**********
//SMP      EXEC PGM=HMASMP,REGION=4096K,       SMP RELEASE 4
//             PARM=''                         DATE=U IS DEFAULT
//*
//STEPLIB  DD DSN=JES3.LIONEL.LOAD,DISP=SHR
//*
)SEL &SMPOPT = RECEIVE
//EXIT&EXITOPT DD SYSOUT=&SOC
)ENDSEL
//*
//SMPOUT   DD SYSOUT=&SOC
//SMPRPT   DD SYSOUT=&SOC
//SMPLIST  DD SYSOUT=&SOC
//SYSTERM  DD SYSOUT=&SOC         /* ASSEMBLY ERROR MESSAGES */
)SEL &DOMSS = N × &CHECK = CHECK
//SYSPRINT DD SYSOUT=&SOC
)ENDSEL
)SEL &DOMSS = Y && &CHECK ^= CHECK × &SMPOPT = ACCEPT && &CHECK = &Z
//SYSPRINT DD DSN=&&APPLY,DISP=(MOD,PASS),
//  SPACE=(CYL,(&SPRIM,&SSEC)),UNIT=SYSDA,
//  DCB=(RECFM=FBA,LRECL=121,BLKSIZE=1210)
)ENDSEL
)SEL &CCMC = NO × &CCMC = &Z
//SMPLOG   DD SYSOUT=&SOC
)ENDSEL
)SEL &CCMC = YES
//SMPLOG   DD DSN=&&SMPLOG,DISP=(,PASS),UNIT=SYSDA,
//         SPACE=(TRK,(120,120),RLSE)
)ENDSEL
//*
)SEL &TLIB = Y
//*     TEMPORARY LIBRARY VOLUME
//*
//SMPTLIB DD UNIT=3330V,VOL=SER=AYPT02,DISP=SHR
)ENDSEL
//*
//SYSLIB  DD DSN=JES3.SP131.JES3MAC,DISP=SHR
//        DD DSN=SYS1.MACLIB,DISP=SHR
//        DD DSN=AMVS38H.AMODGEN,DISP=SHR
//        DD DSN=SYS1.ACFMAC,DISP=SHR
//*
//*      SMP DATA SETS
//*
//SMPPTS   DD DISP=SHR,DSN=JES3.SP131.SMPPTS
//SMPCDS  DD DSN=JES3.SP131.SMPCDS,DISP=SHR
//SMPCRQ  DD DSN=JES3.SP131.SMPCRQ,DISP=SHR
//SMPMTS  DD DSN=JES3.SP131.SMPMTS,DISP=SHR
//SMPSCDS DD DSN=JES3.SP131.SMPSCDS,DISP=SHR
//*
//*      SMP EXCLUSIVE DATA SET FOR SERIAL PROCESSING
//*
//ENQ     DD DSN=JES3.SP131.ENQ,DISP=OLD
//*
//*      SMP TEMPORARY WORK DATA SETS
//*
//SMPWRK1  DD UNIT=SYSDA,SPACE=(3120,(364,380,111)),
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=3120)
//SMPWRK2  DD UNIT=SYSDA,SPACE=(3120,(364,380,111)),
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=3120)
//SMPWRK3  DD UNIT=SYSDA,SPACE=(3120,(364,380,111)),
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=3120)
//SMPWRK4  DD UNIT=SYSDA,SPACE=(3120,(364,380,111)),
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=3120)
//SMPWRK5  DD UNIT=SYSDA,SPACE=(6144,(183,380,195)),
//            DCB=(RECFM=U,BLKSIZE=6144)
//*
//*      JES3 SYSRES DATA-SETS
//*
//JES3MAC DD DSN=JES3.SP131.JES3MAC,DISP=SHR
//JES3LIB DD DSN=JES3.SP131.JES3LIB,DISP=SHR
//JES3SRC DD DSN=JES3.SP131.JES3SRC,DISP=SHR
//SMPSTS  DD DSN=JES3.SP131.JES3SRC,DISP=SHR
//LINKLIB DD DSN=JES3.SP131.JES3LPA,DISP=SHR
//LPALIB  DD DSN=JES3.SP131.JES3LPA,DISP=SHR
//PROCLIB DD DSN=JES3.SP131.SMPMTS,DISP=SHR
//CMDLIB  DD DSN=JES3.SP131.JES3LPA,DISP=SHR
//SAMPLIB DD DSN=JES3.SP131.SAMPLIB,DISP=SHR
//*
//****    STANDARD IBM LPALIB
//*
//IBMLPA  DD DSN=JES3.SP131.JES3LPA,DISP=SHR
//*
//*
//****    MVS/BDT SPECIAL LIBRARIES
//*
//BDTMSG  DD DSN=JES3.SP131.BDTMSG,DISP=SHR
//BDTCLST DD DSN=JES3.SP131.BDTCLST,DISP=SHR
//BDTPANL DD DSN=JES3.SP131.BDTPANL,DISP=SHR
//BDTHELP DD DSN=JES3.SP131.BDTHELP,DISP=SHR
//BDTMAC  DD DSN=JES3.SP131.JES3MAC,DISP=SHR
//BDTLIB  DD DSN=JES3.SP131.JES3LIB,DISP=SHR
//*
)SEL &SMPOPT = ACCEPT × &SMPOPT = RESTORE
//*
//*      JES3 DLIB DATA-SETS
//*
//SMPACDS DD DSN=JES3.SP131.SMPACDS,DISP=SHR
//SMPACRQ DD DSN=JES3.SP131.SMPACRQ,DISP=SHR
//*
//AJES3SRC DD DSN=JES3.SP131.AJES3SRC,DISP=SHR
//AJES3MAC DD DSN=JES3.SP131.AJES3MAC,DISP=SHR
//AOSBA    DD DSN=JES3.SP131.AOSBA,DISP=SHR
//*
//*      MVS/BDT DLIB DATA-SETS
//*
//AOSBD    DD DSN=JES3.SP131.AOSBD,DISP=SHR
//ASAMPLIB DD DSN=JES3.SP131.ASAMPLIB,DISP=SHR
//AMODGEN  DD DSN=JES3.SP131.AMODGEN,DISP=SHR
//AGENLIB  DD DSN=JES3.SP131.AGENLIB,DISP=SHR
//ABDTMAC  DD DSN=JES3.SP131.ABDTMAC,DISP=SHR
//BBDTHELP DD DSN=JES3.SP131.ABDTHELP,DISP=SHR
//BBDTCLST DD DSN=JES3.SP131.ABDTCLST,DISP=SHR
//BBDTMSG  DD DSN=JES3.SP131.ABDTMSG,DISP=SHR
//BBDTPANL DD DSN=JES3.SP131.ABDTPANL,DISP=SHR
)ENDSEL
//*
//*      WORK DATA SETS
//*
//SYSUT1   DD UNIT=SYSDA,SPACE=(CYL,(10,5))
//SYSUT2   DD UNIT=SYSDA,SPACE=(CYL,(10,5))
//SYSUT3   DD UNIT=SYSDA,SPACE=(CYL,(10,5))
//SYSUT4   DD UNIT=SYSDA,SPACE=(TRK,1)
)SEL &SMPOPT = RECEIVE
//SMPPTFIN DD DSN=&RECDSN,DISP=SHR
)ENDSEL
//SMPCNTL  DD *
)SEL &SMPOPT = RECEIVE && &SMPSEL = &Z
 RECEIVE .
)ENDSEL
)SEL &SMPOPT = RECEIVE && &SMPSEL ^= &Z
 RECEIVE &SMPSELO(&SMPSEL) .
)ENDSEL
)SEL &SMPOPT = APPLY  && &SMPSEL = &Z
 APPLY  DIS(WRITE) RETRY(YES) ASSEM &CHECK. .
)ENDSEL
)SEL &SMPOPT = APPLY  && &SMPSEL ^= &Z
 APPLY  &SMPSELO(&SMPSEL)
        ASSEM DIS(WRITE) RETRY(YES) &CHECK..
)ENDSEL
)SEL &SMPOPT = ACCEPT && &SMPSEL = &Z
 ACCEPT DIS(WRITE) RETRY(YES) &CHECK..
)ENDSEL
)SEL &SMPOPT = ACCEPT && &SMPSEL ^= &Z
 ACCEPT &SMPSELO(&SMPSEL)
        DIS(WRITE) RETRY(YES) &CHECK..
)ENDSEL
)SEL &SMPOPT = RESTORE && &SMPSEL = &Z
 RESTORE DIS(WRITE) RETRY(YES) &CHECK..
)ENDSEL
)SEL &SMPOPT = RESTORE && &SMPSEL ^= &Z
 RESTORE &SMPSELO(&SMPSEL)
         DIS(WRITE) RETRY(YES) &CHECK..
)ENDSEL
)SEL &SMPOPT = REJECT && &SMPSEL = &Z
 REJECT .
)ENDSEL
)SEL &SMPOPT = REJECT && &SMPSEL ^= &Z
 REJECT &SMPSELO(&SMPSEL) .
)ENDSEL
/*
)SEL &CHECK ^= CHECK
)IM CCMCTRAN
)ENDSEL
)SEL &DOMSS = Y && &CHECK ^= CHECK × &SMPOPT = ACCEPT && &CHECK = &Z
//SYSOUT EXEC PGM=SYSOUT,
)SEL &SUBMIT = Y  && &SMPOPT ^= ACCEPT
// PARM='NOSPL,MSVGP=&MSVGP,PREFIX=&LPREFIX,SUBMIT',
)ENDSEL
)SEL &SUBMIT = N  && &SMPOPT ^= ACCEPT
// PARM='NOSPL,MSVGP=&MSVGP,PREFIX=&LPREFIX',
)ENDSEL
)SEL &SMPOPT = ACCEPT
// PARM='NOSPL',
)ENDSEL
//  COND=EVEN
//STEPLIB  DD DSN=AOST.LOAD,DISP=SHR
//REPORT DD SYSOUT=&SOC
//OTHER  DD SYSOUT=&SOC
//SYSPRINT DD SYSOUT=*
//INPUT  DD DSN=&&APPLY,DISP=(OLD,DELETE)
)SEL &SUBMIT = Y && &SMPOPT ^= ACCEPT
//INTRDR DD SYSOUT=(A,INTRDR)
//SUBMITCC DD *
&SUBMITC1
)ENDSEL
)ENDSEL
