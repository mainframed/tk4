++USERMOD  (MW00044)
 /*        GTEDS/MIDWEST OS/VS PTF NUMBER 00044
  *
  *        TYPE             - ZAP
  *        RELEASE          - 3.8A
  *        PTF LEVEL        - 8201
  *        KEYPHRASE        - REDUCE REMOTE TCAM POLLING
  *        ENVIRONMENT      - 12 MB  3033  - BATCH,RJE,NJE,TSO,IMS
  *        PROBLEM          - POLLING TO REMOTE TSO TUBES WHICH ARE
  *                         - NOT LOGGED ON CAUSES A LOT OF CPU TIME
  *                         - TO BE WASTED AND NEEDLESS LINE ACTIVITY.
  *        SOLUTION         - REDUCE THE POLLING OF REMOTE 3270 DEVICES
  *                         - THAT ARE NOT LOGGED ON. THIS IS ACCOM-
  *                         - PLISHED BY INCREASING THE POLLING INTERVAL
  *                         - BY A FACTOR OF 15 IF NO ONE IS LOGGED ON.
  *                         - ONCE LOGON OCCURS, THE NORMAL POLLING
  *                         - INTERVAL IS UTILIZED.
  *        RESULTS/BENEFITS - FOR TERMINALS NOT LOGGED ON, THIS MOD
  *                         - DECREASED LINE ACTIVITY BY APPROX. 93%.
  *                         - BECAUSE OF THE HIGH CORRELATION BETWEEN
  *                         - LINE ACTIVITY IN POLLING AND CPU USE BY
  *                         - TCAM, CPU UTILIZATION IS REDUCED BY THE
  *                         - SAME ORDER OF MAGNITUDE. IN A LARGE TCAM
  *                         - ENVIRONMENT, WHERE THE AVERAGE TERMINAL
  *                         - WAS LOGGED ON APPROX. 40% OF THE TIME,
  *                         - TOTAL LINE ACTIVITY WAS REDUCED BY 48%.
  *                         - ADDITIONALLY, TCAM CPU UTILIZATION WAS
  *                         - REDUCED 47%.
  *
  *        NOTE - THE BYTE AT PATCH + X'15' DETERMINES THE NUMBER
  *               OF POLLING INTERVALS TO BE SKIPPED.
  *
  */ .
++VER  (Z038) FMID(ETC0108).
++ZAP(IEDAYZ) DISTLIB(AOS21).
 EXPAND IEDAYZ(80)
 NAME IEDAYZ
 VER 007A 91807024        TM  QCBFLAG,QCBTSSES    TSO TERM ACTIVE?
 VER 007E 471060A8        BO  AYZ020              BRANCH IF YES.
 VER 0082 47F0609E        B   AYZ015              RETURN IF NOT.
 VER 009E 1B66     AYZ015 ??
 VER 00A8 5010E028 AYZ020 ??
 VER 011C 58A04034 AYZ042 ??
 VER 015E 91104013        TM  LCBTSOB,LCBSOPL     ANY ENTRIES POLLED?
 VER 0162 4710616E        BO  AYZ045
 VER 016E 41801008 AYZ045 ??
 REP 0082 47F06B80        B   PATCH
 REP 0162 47106BB4        B   PATCH2
 REP 0B80 91487024 PATCH  TM  QCBFLAG,QCBNOBRK+QCBTERMQ
 REP 0B84 47E0609E        BNO AYZ015
 REP 0B88 58A04034        L   RDCB,LCBDCBPT       GET DCB ADDR.
 REP 0B8C 9500A018        CLI DCBINTVL,ZERO       IS INTERVAL=0?
 REP 0B90 4780609E        BE  AYZ015              YES. NO SLOWPOLL.
 REP 0B94 950F7019        CLI QCBINTVL+1          EXCEEDED BYPASS COUNT?
 REP 0B98 47406BA4        BL  INCR                NO. BR INCR ROUTINE.
 REP 0B9C 92007019        MVI QCBINTVL+1,ZERO     RESET COUNTER.
 REP 0BA0 47F0609E        B   AYZ015              GO DO POLL.
 REP 0BA4 43C07019 INCR   IC R12,QCBINTVL+1       GET COUNT.
 REP 0BA8 41C0C001        LA  R12,1(,R12)         INCR COUNT.
 REP 0BAC 42C07019        STC R12,QCBINTVL+1      STORE COUNT.
 REP 0BB0 47F0611C        B   AYZ042              SKIP POLL.
 REP 0BB4 58A04034 PATCH2 L   RDCB,LCBDCBPT       GET DCB ADDR.
 REP 0BB8 9500A018        CLI DCBINTVL+1,ZERO     INTERVAL=0?
 REP 0BBC 4780616E        BE AYZ045
 REP 0BC0 47F06166        BRANCH BACK
 IDRDATA MW00044
