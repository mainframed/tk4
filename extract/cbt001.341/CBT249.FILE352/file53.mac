************************************************************************
*
*         F I L E   5 3   U P D A T E D   Q U E U E
*
************************************************************************

THIS FILE IS IN IEBCOPY UNLOAD FORMAT (80 X 32720).
     THIS VERSION OF THE COMMAND HAS A NUMBER OF ENHANCEMENTS AND
CLEANUP FIXES INSTALLED. THE SUPPORT FOR JES2 PRIOR TO 79/09 WAS REMOVED
AND THE CODE STANDARDIZED ON THE DUPLEX CHECKPOINT LEVEL. A SCREEN PRINT
FACILITY WAS ADDED. THE COMMAND RUNS AUTHORIZED AND NOW HAS SUPPORT FOR
CANCEL, REQUEUE, AND PURGE. THE PDDB SYSOUT COUNTS ARE LISTED ON THE DD
SUBCOMMAND. SUPPORT WAS ADDED TO FIND AND LIST TSO DYNAMICALLY SPUN
SYSOUT.
     THE COMMAND ONLY NEEDS TO RUN AUTHORIZED FOR THE FOLLOWING COMMANDS
CANCEL, REQUEUE, AND PURGE. IF YOU DO NOT MARK THE CODE AC=1, THE
PREVIOUS THREE COMMANDS WILL NOT FUNCTION.

---- QUEUE COMMAND -----------------------------------------------------

  QUEUE SUBCOMMAND OPERAND        DEFAULT Q STATUS *
  Q                               CAN USE Q CKPT(DEVTYPE,VOLSER) TO GET
                                  NONSTANDARD CHECKPOINT.

---- SYSTEM DISPLAYS ---------------------------------------------------

DA                  JOBS IN EXECUTION
DT                  DISPLAY TSO USERS
DS                  DISPLAY STARTED TASKS
DC (B/S/T)          DISPLAY CPU BATCH/STC/TSO
STATUS (JOBMASK)    JOB STATUS. DEFAULT FOR STATUS IS * (TSO ID).   NTL
                    JOBMASK IS PARTIAL JOBNAME WITH '.', '*', OR '?'NTL
                    CHARACTERS AS 'DONT CARE'                       NTL

---- INPUT QUEUE DISPLAYS ----------------------------------------------

DQ                  DISPLAY INPUT QUEUES
DI (CLASS) DEST     DISPLAY ALL INPUT JOBS                          NTL
AI (CLASS) DEST     DISPLAY AVAILABLE JOBS                          NTL
HI (CLASS) DEST     DISPLAY HELD JOBS                               NTL

---- OUTPUT QUEUE DISPLAYS----------------------------------------------

DF                  DISPLAY OUTPUT QUEUES
DO (CLASS) DEST     DISPLAY ALL OUTPUT JOBS                         NTL
AO (CLASS) DEST     DISPLAY AVAILABLE OUTPUT                        NTL
HO (CLASS) DEST     DISPLAY HELD OUTPUT                             NTL
HD                  DISPLAY HELD OUTPUT COUNTS (RESTRICTED TO OPER. NTL
                    PRIVLEDGE USERS).                               NTL

---- JOB MODIFICATION SUBCOMMANDS --------------------------------------

CAN JOBNAME (PURGE) CANCEL FROM INPUT OR EXECUTION. DELETE OUTPUT IF
                     PURGE IS SPECIFIED.
REQ JOBNAME CLASS   CHANGE SYSOUT CLASS
DEL JOBNAME         DELETE HELD OUTPUT

---- MISC SUBCOMMANDS --------------------------------------------------

SLOG STC# SEQ       LIST SYSTEM LOG.  ST SYSLOG WILL GET STC#. IF SEQ
                     IS NOT SPECIFED ZERO IS ASSUMED (CURRENT).
FTIME HH.MM.SS      POSITION SYSLOG TO TIME
H/HELP              HELP
E/END               EXIT

---- JOB RELATED SUBCOMMANDS -------------------------------------------

DJ   JOBID          DISPLAY JOB                                     NTL
JCL  JOBID          LIST JOB JCL                                    NTL
JLOG JOBID          LIST JOB LOG                                    NTL
JMSG JOBID          LIST JOB MESSAGES                               NTL
JH   JOBID                                                          NTL
DD   JOBID          JES2 DD SUMMARY                                 NTL
LIST JOBID DSID     LIST JES2 DATASET. OBTAIN DSID VALUES BY USING  NTL
                     THE DD SUBCOMMAND.

     (JOBID) IS EITHER JOBNAME, JOB NUMBER OR '*' TO INDICATE USE   NTL
             'CURRENT' JOBNAME.                             UF004   NTL
---- LIST RELATED SUBCOMMANDS ---------

FIND 'STRING' COL(SS,EE)  FIND NEXT OCCURANCE OF 'STRING' IN THE DATA.
FALL 'STRING' COL(SS,EE)  FIND ALL OCCURANCES OF 'STRING' IN THE DATA.
                          STRING MUST BE IN QUOTES. COL DEFAULT IS ALL.

COL  #              POSITION TO COLUMN #
@    #              POSITION TO RECORD #
D/+  #              MOVE FORWARD # LINES
UP/- #              MOVE BACKWARD # LINES
TOP                 TOP OF CURRENT DATASET
BOTTOM              BOTTOM OF CURRENT DATASET
HF/HB #             FORWARD/BACKWARD # HALF PAGES
PF/PB #             FORWARD/BACKWARD # PAGES

                    DEFAULT VALUE FOR # IS 1.
                    SYNONYMS L-LIST F-FIND C-COLUMN T-TOP B-BOTTOM

---------- LOGGING SUBCOMMANDS---------------

SAVE DSNAME TYPE    COPY DATASET
PRINT ON CLASS DEST OPEN SCREEN LOG
                    DEFAULT PRINT CLASS IS SYSOUT=A.
PRINT               PRINT SCREEN
PRINT OFF           CLOSE SCREEN LOG

-------------------------------
× PF1/13  × PF2/14  × PF3/15  ×
×   HELP  ×   DA    ×   END   ×    PROGRAM FUNCTION KEY DEFINITIONS
-------------------------------
× PF4/16  × PF5/17  × PF6/18  ×    TO SPECIFY OPERANDS FOR PF 5 OR
×   PRINT ×   FIND  ×   DI    ×    OPTIONALLY FOR PF 6,9,12 OR
-------------------------------    TO OVERRIDE DEFAULTS FOR PF 4,7,8,10,
× PF7/19  × PF8/20  × PF9/21  ×    KEY IN THE VALUE AND PRESS THE KEY
×   PB    ×   PF    ×   DO    ×
-------------------------------
× PF10/22 × PF11/23 × PF12/24 ×
×  COL 1  ×  COL 41 ×   ST    ×
-------------------------------

--------------------------- RESTRICTED SUBCOMMANDS ---------------------

XB MTTR             DISPLAY DISK RECORD
XD JOBNAME DSID     LIST ANY DATASET
XI                  DISPLAY ACTIVE INITIATORS
XJ JOBNAME          DISPLAY JQE AND JOES
XP PASSWORD         REQUEST FOR PASSWORD PROMPT. PROMPT IS A BLANK SCREE
                     THE PASSWARD AND IF SUCCESSFUL A MESSAGE WILL BE IS

INSTALLATION PROCEDURE FOR QUEUE:

     1. THERE ARE 39 MEMBERS IN THE DATASET.
        Q0 IS THE COMMON AREA.
        Q1 - Q29 ARE REENTRANT CODE.                                NTL
        QCOMMON, QSTART, QSTOP, QTILT, AND $JQT ARE MACROS.
        MODESET IS A MACRO (USED FOR SUPVSR STATE/PBLM STATE SWITCH NTL
              USING A LOCAL SVC).                                   NTL
        HELP IS A TSO HELP MEMBER.
        ASSEMBLE IS THE JCL TO ASSEMBLE AND LINK QUEUE.
        TABLE IS A SAMPLE SMP JOB TO AUTHORIZE THE QUEUE COMMAND.

     2. EDIT MEMBER QCOMMON CHANGING THE FOLLOWING PARAMETERS:

        UNIT=XXXX THE DEVICE TYPE FOR SYS1.HASPCKPT.
        VOLSER=YYYYYY THE VOLUME SERIAL FOR SYS1.HASPCKPT.
        SID1-SID7=ZZZZ THE SMF IDS FOR EACH CPU IN THE COMPLEX. THE
        IDS MUST BE IN THE SAME ORDER AS IN THE INITIALIZATION DECK.

        AT PRESENT THERE IS SUPPORT IN THE INITIALIZATION MODULE TO
        DYNAMICALLY ALLOCATE THE CHECKPOINT ON EITHER 3330, 3330-1,
        OR 3350. IF YOU ARE FORTUNATE ENOUGH TO HAVE A DRUM YOU
        WILL HAVE TO MODIFY Q10 TO ADD SUPPORT.

        EDIT THE MACRO QSTART TO INDICATE THE OPTIONS DESIRED.

        QPFK SETB 0      NO PFK SUPPORT.
        QPFK SETB 1      PFK SUPPORT (DEFAULT).

        THE PFK SUPPORT IS FROM VILKO MACEK - INSURANCE CORPORATION
        OF BRITISH COLUMBIA. PFK SUPPORT CAN BE IDENTIFIED BY SOURCE
        MARKED WITH ICBC IN MODULES Q5, Q8, AND THE MACRO QCOMMON. TO
        CHANGE THE DEFINITIONS OF THE PFKS SEE THE END OF MODULE Q5.

        QACF2 SETB 0     NO ACF2 SUPPORT (DEFAULT).
        QACF2 SETB 1     ACF2 SUPPORT.

        THE ACF2 SUPPORT IS FROM KEN TRUE - FAIRCHILD CAMERA. KEN ALSO
        SUPPLIED THE ORIGINAL PRINT SUPPORT.

        MAXCLAS SETA 8   DEFAULT                                    NTL
                                                                    NTL
        MAXCLAS IS USED BY THE 'INITS' COMMAND (Q23) TO INDICATE    NTL
        THE MAXIMUM NUMBER OF JOBCLASSES PER INITIATOR.  SET TO     NTL
        THE NORMAL JES2 DEFAULT OF 8.                               NTL

        MAGIC  SETB  0   USE NORMAL SVC 107 (MODESET) AND AC(1)     NTL
        MAGIC  SETB  1   USING LOCAL 'MAGIC' SVC TO GET INTO SUPV.  NTL
                         STATE.                                     NTL

        IF YOU USE A MAGIC SVC TO GET INTO SUPV STATE FOR 'SYSOUT'  NTL
        COMMAND (Q26), SETTING MAGIC TO 1 WILL BYPASS THE 'TESTAUTH'NTL
        INSTRUCTION.  REMEMBER TO ALTER THE SAMPLE MODESET MACRO    NTL
        TO USE YOU LOCAL INSTALLATION'S MAGIC SVC.                  NTL

     3. EDIT MEMBER ASSEMBLE TO CHANGE THE JCL TO FIT YOUR STANDARDS.
        DO NOT ALTER THE ORDER OF THE ASSEMBLY SYSLIBS AS THERE IS A
        CONFLICT ON THE MACRO QSTART. THE ASSEMBLIES AND LINKS CREATE
        2 LOAD MODULES.

        QUEUE (ALIAS Q) - IS THE REENTRANT CODE OF THE COMMAND. IT MAY
        BE PLACED IN SYS1.LPALIB OR ANY OTHER AUTHORIZED LIBRARY WITH
        AN AUTHORIZATION CODE OF 1.

        QUEUECMN - THE MODIFIABLE COMMON AREA. CAN BE PLACED IN SYS1.
        LINKLIB OR SYS1.CMDLIB. IF YOU WANT TO CHANGE THE NAME OF
        QUEUECMN LOOK IN MEMBER Q10 WHERE THE LINK IS ISSUED.

     4. ADD QUEUE ALIAS Q TO THE IKJEFTE2 MODULE WHICH IS THE TSO LIST
        OF AUTHORIZED COMMANDS. A SAMPLE SMP JOB IS PROVIDED IN THE
        MEMBER TABLE. QUEUE CAN BE RUN UNDER SPF BUT THE SUBCOMMANDS
        USING THE SUBSYSTEM INTERFACE (CANCEL, REQUEUE, AND DELETE)
        WILL BE INOPERABLE, ALL OTHER COMMANDS WILL FUNCTION NORMALLY.
        IF YOU DON'T MIND THE INTEGRITY PROBLEM YOU CAN ADD CODE TO
        QUEUE TO USE A SPECIAL SVC TO GET INTO SUPERVISOR STATE AND
        HAVE FULL FACILITY UNDER SPF.

NOTE:  THE QUEUE COMMAND WAS WRITTEN FOR JES2 4.1 AT PUT TAPE 79/09
LEVEL WITH THE DUPLEX CHECKPOINT FACILITY (AZ27300). THERE IS NO REASON
THAT THE CONCEPT OF ACCESSING THE CHECKPOINT AND SPOOL WOULD NOT WORK
WITH EARLIER VERSIONS OF JES2 OR WITH NJE. THE LOCATION OF CHECKPOINT
VARIABLES AND CHECKPOINT AND SPOOL STRUCTURE MAY BE DIFFERENT AND THE
USER WILL HAVE TO MAKE APPROPRIATE CHANGES TO SUPPORT OTHER VERSIONS
OF JES2.

