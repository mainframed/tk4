
VIRTUAL STORAGE MONITOR

THE VIRTUAL STORAGE MONITOR IS DESIGNED TO ASSIST IS IDENTIFYING VIRTUAL
STORAGE PROBLEMS, PARTICULARLY THOSE ASSOCIATED WITH CSA UTILIZATION.
VSM IS A COMMAND PROCESSOR . IT HAS BEEN TESTED ON MVS/SP1.1.1 AND ON
SP1.3. VSM IS DESIGNED TO RUN WITH ACF/VTAM BUT SHOULD WORK WITH TCAM
IF A FEW CHANGES ARE MADE.

INSTALLATION:


DSECTS:

      VSM USES A NUMBER OF DSECTS FOR IBM CONTROL BLOCKS. WE CODED
THEM OURSELVES BECAUSE WE DO NOT HAVE SYS1.PVTMACS. IF YOU DO HAVE
SYS1.PVTMACS YOU CAN CHANGE OUR CODE TO PICKUP THE IBM SUPPLIED DSECTS.
     IF YOU DO NOT HAVE SYS1.PVTMACS AND DO NOT WANT TO USE OUR DSECTS
TAKE THEM OUT AND CODE THE OFFSETS (TEDIOUS).
     THE EASIEST APPROACH IS TO PLACE THIS LIBRARY FIRST IN THE SYSLIB
CONCATENATION AND USE OUR DSECTS.

KEY ZERO:

     VSM00200 AND VSM00300 NEED TO BE IN KEY ZERO IN ORDER TO READ THE
FETCH PROTECTED SUBPOOLS IN CSA. WE ACCOMPLISH THIS BY USING AN INHOUSE
MACRO (PKEY) TO INVOKE AN IN-HOUSE SVC WHICH FLIPS BIT 15 IN THE PSW
ON AND OFF. DO A FIND ON PKEY IN THE TWO MODULES MENTIONED AND EITHER
INSERT YOUR OWN SVC OR REPLACE PKEY WITH THE MODESET MACRO AND THEN
UPDATE THE APPROPRIATE TABLES (IKJEFTE2 AND/OR IKJEFTE8). PKEY APPEARS
TWICE IN EACH MODULE; ONCE TO GET INTO KEY ZERO AND ONCE TO RETURN TO
PROBLEM STATE.

VTAM/TCAM:
     WE RUN ACF/VTAM RELEASE 3. IF YOU DO ALSO SO SHOULD NOT HAVE PROB-
LEMS. IF YOU RUN TCAM YOU MAY HAVE TO CHANGE THE DEVICE ORDERS. FURTHOR-
MORE YOU MAY HAVE TO REMOVE THE STFSMODE MACROS FROM MODULES VSM00000
AND VSM99000.

TAILORING:
     THE PRIMARY MENU IS CREATED IN MODULE VSM. TO CHANGE THE HEADER
FROM HALLMARK CARDS DO A FIND ON HALLMARK IN MODULE VSM00000. CHANGE TO
YOUR OWN HEADER AND CHANGE THE COLUMN INDICATOR IN THE LINE ABOVE TO
CENTER YOUR HEADER.
     MODULE VSM00300 SHOWS CSA UTILIZATION BY PROTECT KEY. A NAME IS
ASSIGNED TO THOSE PROTECT KEYS IN USE HERE. KEYS 2-4 AND 7 ARE NOT
USED HERE AND HENCE THE NAME IS BLANK. TO INSERT THE NAME YOU WANT (EX:
VSPC OR IMS) EDIT MODULE VSM00300 AND FIND #0XNAME WHERE X IS THE
PROTECT KEY THEN EDIT THE 10 BYTE FIELD.

ASSEMBLY:
     THE LIBRARY CREATED FROM THE DISTRIBUTION TAPE SHOULD BE IN THE
SYSLIB CONCATENATION TO PICKUP SOME IN-HOUSE MACROS THAT WE USE.

LINK:
     VSM SHOULD BE LINKED REUS. IF YOU USE MODESET VSM MUST BE LINKED
AC(1). IF YOU USE AN AUTHORIZATION SVC THE NEED FOR AC(1) WILL DEPEND ON
WHETHER YOUR SVC CHECKS FOR IT OR NOT.

     ASSEMBLE AND LINK VSM00100,VSM00200,VSM00300,VSM99000 AND VSMHELP.
ASSEMBLE VSM00000 AND INCLUDE THE ABOVE MODULES WHEN YOU DO THE LINK.
WE THEN COPY VSM00000 INTO CMDLIB AND RENAME IT TO VSM.
