++PTF (LC00109) /*  FENCING MODIFICATION TO PROHIBIT PAGE STEALING
               FROM CICS DUE TO BATCH PREEMPTION OF UNREFERENCED PAGES.
               MODIFICATION REFUSES TO STEAL PAGES FROM A SPECIFIED
               PERFORMANCE GROUP (SET AT 41 = PRODUCTION CICS)
               IF IT HAS LESS THAN A SPECIFIED THRESHOLD OF PAGES
               ALLOCATED (SET AT 550).

               THIS VERSION OF THE FENCE IS FOR PTF 7811, UZ21470.
               D. THEWLIS, 3/08/79.

               WARNING:  ONLY FENCE ONE PERFORMANCE GROUP;
                         ONLY SET ONE JOB TO THAT PERFORMANCE GROUP.
                         DISABLED WAIT STATE CAN OCCUR IF MULTIPLE
                         MEMBERS OF FENCED PERFORMANCE GROUP.

              NOTE:     THIS MODIFICATION MIGHT BE
                        ACCOMPANIED BY CHANGING THE SRM PAGING
                        RATE HAPPY VALUES, SINCE ONE RESULT OF
                        THE FENCE WILL BE AN ARTIFICIALLY HIGH
                        UIC, WHICH WILL INVALIDATE THE UIC
                        CONTENTION INDICATOR SIGNIFICANCE.  SETTING
                        THE PAGING RATE VALUES TO REAL VALUES
                        SHOULD PROVIDE AN ALTERNATIVE TO THE UIC
                        FOR SRM REAL STORAGE SENSITIVITY IF YOU
                        ARE REAL STORAGE CONSTRAINED.

              D. THEWLIS, JULY 30, 1978.
                         */ .
++VER (Z037) PRE(UZ21470) .
++ZAP (IRARMSTM) .
 NAME IRARMSTM
 EXPAND IRARMSTM(28)
 VER  01FA 45E0,C926    BAL   @14,STEAL     GO TO PAGE STEAL
 REP  01FA 47F0,CA56    B     PATCH         GO TO FENCING MOD
 VER  0A58 00000000,00000000,00000000
 VER  0A64 00000000,00000000,00000000
 VER  0A70 00000000
*REP  0A58 95XX,4018    CLI   OUCBNPG,XX    XX = PERF. GROUP IN HEX
 REP  0A58 9529,4018    CLI   OUCBNPG,41    CICS PERFORMANCE GROUP?
 REP  0A5C 4770,CA6A    BNE   *+14          EXIT IF NOT CICS
*REP  0A60 4190,0NNN    LA    9,NNN         THRESHOLD = NNN PGS IN HEX
 REP  0A60 4190,02BC    LA    9,700         THRESHOLD = 700 PAGES
 REP  0A64 4990,5098    CH    9,ASCBFMCT    THRESHOLD :: CURRENT
 REP  0A68 4720,C214    BH    @RF00141      HAVE < THRESHOLD; IGNORE
 REP  0A6C 45E0,C926    BAL   14,STEAL      HAVE >=; GO TO STEAL
 REP  0A70 47F0,C1FC    B     RETURN        RETURN FROM MODIFICATION
