 S99FAIL: PROC(S99PARM,RETC,MSG) OPTIONS(REENTRANT) REORDER;
  /* PROCEDURE: S99FAIL                                               */
  /* FUNTION:   INTERFACE BETWEEN PLI AND DAIRFAIL (IKJEFT18)         */
  /* LANGUAGE:  PLIX 3.0                                              */
  /* SYSTEM:    MVS R3.7+ SU 7                                        */
  /* VERSION:   FEB 5, 1977                                           */
  /* INPUT:     S99PARM - A SVC 99 INPUT PARAMETER STRUCTURE          */
  /*            CONTAINING ERROR CODES                                */
  /*            RETC    - THE VALUE IN R15 ON RETURN FROM SVC99       */
  /* OUTPUT:    MSG - A FIRST AND SECOND LEVEL MESSAGE FOR THE        */
  /*             ERROR SUITABLE FOR PRINTING, DISPLAYING, OR          */
  /*             WHATEVER (WE DO NOT DISPLAY THE MESSAGE).            */
 DCL 1 S99PARM,
     2 S99STUFF CHAR(1);
 DCL RETC FIXED BIN(31);
 DCL MSG(2) CHAR(251) VAR;
 DCL DFID BIT(16) INIT('0100000000110010');
 DCL 1 DFBUFS,
         2 DFBUFL1 FIXED BIN,
         2 DFBUFO1 FIXED BIN,
         2 DFBUFT1 CHAR(251),
         2 FILL1 CHAR(1),
         2 DFBUFL2 FIXED BIN,
         2 DFBUFO2 FIXED BIN,
         2 DFBUFT2 CHAR(251);
 DCL LINKER ENTRY(CHAR(8),*,*,*,*,*,*) OPTIONS(ASM INTER RETCODE);
 DCL ZERO FIXED BIN(31) INIT(0);
 CALL LINKER('IKJEFF18',S99PARM,RETC,ZERO,DFID,ZERO,DFBUFS);
 IF PLIRETV()>0 THEN PUT EDIT('ERROR FROM IKJEFF18:',PLIRETV())
         (COL(1),A,F(2));
 MSG(1)=SUBSTR(DFBUFT1,1,DFBUFL1-4);
 MSG(2)=SUBSTR(DFBUFT2,1,DFBUFL2-4);
 END;
