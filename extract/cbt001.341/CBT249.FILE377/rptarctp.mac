//RPTARCTP JOB (@SYSUID,@SYSACCT),'LIBSPOOL ARCHIVE RPT',CLASS=B
/*JOBPARM   I,W,T=5,Q=T,L=9
//*
//* THIS JOBSTREAM CAN BE USED TO RECREATE THE LIBSPOOL ARCHIVE TAPE
//* REPORT.
//*
//*    IN1      - LIBSPOOL ARCHIVE TAPE DATA SET NAME BEING INPUT
//*               (INCLUDE RELATIVE GENERATION NUMBER OR FULL DSNAME)
//*    RUNTYPE -  'D' WHEN USING A DAILY ARCHIVE TAPE
//*               'W' WHEN USING A WEEKLY ARCHIVE TAPE
//*
//* RUN CONSIDERATIONS
//*
//*    THIS JOB CAN BE RUN AT ANY TIME BY ANY USER ID THAT HAS
//*    AUTHORITY TO READ THE LIBSPOOL ARCHIVE TAPES. THIS SHOULD
//*    INCLUDE MOST EVERYONE.
//*
//LIBCNTL EXEC PGM=IEBGENER
//SYSPRINT DD DUMMY
//SYSUT2   DD DSN=&&LIBRCNTL,DISP=(,PASS),SPACE=(TRK,1),
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),UNIT=SYSDA
//SYSIN    DD DUMMY
//SYSUT1   DD *
-OPT NOCYCLE,NOOUTPUT,INDEX
-END
//*
//REPORTPE PROC IN1=,                      INPUT ARCHIVE TAPE
//       RUNTYPE=,                         D - DAILY,W - WEEKLY
//       PARMLIB='NRJS,NJTA'               LIBRARIAN PARM INFO
//**********************************************************************
//*   CREATE INDEX DATA SET FROM ARCHIVE TAPE
//**********************************************************************
//INDEX    EXEC  PGM=LIBRARY,PARM='&PARMLIB',COND=(0,NE)
//SYSPRINT DD SYSOUT=A
//OSJOB    DD DUMMY
//LIST     DD SYSOUT=A
//INDEX    DD  DSN=&&INDEX,DISP=(,PASS),
//         DCB=(RECFM=FB,LRECL=133,BLKSIZE=6118),UNIT=SYSDA,
//         SPACE=(6118,(20,20),RLSE)
//SYSAF01  DD  UNIT=(SYSDA,2),SPACE=(CYL,(10,10)),DCB=BLKSIZE=4628
//SYSAF02  DD  UNIT=(SYSDA,2),SPACE=(CYL,(10,10)),DCB=BLKSIZE=4628
//SYSAF03  DD  UNIT=(SYSDA,2),SPACE=(CYL,(10,10)),DCB=BLKSIZE=19069
//MASTIN   DD DSN=&IN1,DISP=(OLD,PASS)
//SYSIN    DD  DSN=&&LIBRCNTL,DISP=(OLD,DELETE)
//**********************************************************************
//*   REPORT CONTENTS OF ARCHIVE TAPE USING INDEX REPORT DATA
//**********************************************************************
//LIBPRT  EXEC PGM=OPS4322G,PARM='&RUNTYPE',COND=(0,NE)
//STEPLIB  DD DSN=PHGI.LINKLIB,DISP=SHR
//SYSABEND DD SYSOUT=A
//SORTLIB  DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,(5,5),,CONTIG)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,(5,5),,CONTIG)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,(5,5),,CONTIG)
//SORTWK04 DD UNIT=SYSDA,SPACE=(CYL,(5,5),,CONTIG)
//SYSOUT   DD SYSOUT=A
//MESSAGES DD SYSOUT=A
//REPORTDD DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//MASTDD   DD DSN=&&INDEX,DISP=(OLD,PASS)
//TAPEDD   DD DSN=*.INDEX.MASTIN,DISP=(OLD,KEEP)
//**********************************************************************
//  PEND
//REDORPT EXEC REPORTPE,
//      IN1='PHGIOPS.OPS2340.WKLYARCH(0)',   INPUT ARCHIVE TAPE DSNAME
//      RUNTYPE='W'                          DAILY OR WEELY TAPE
