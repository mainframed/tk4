
   LIBSPOOL OBJECTIVE
  --------------------

ALLEVIATE PROBLEMS INVOLVED IN REVIEWING, COLLATING, STORING, AND
RETRIEVING A LARGE VOLUME OF PRODUCTION JOB CONTROL LANGUAGE LISTINGS.

       LIBSPOOL ATTEMPTS TO ADDRESS THESE PROBLEMS BY:

           1) PROVIDING AN AUTOMATIC REVIEW OF PRODUCTION TYPE JCL
              LISTINGS LOOKING FOR NON-NORMAL RESULTS.

           2) AUTOMATING AND ORGANIZING THE STORING AND RETRIEVING
              OF ON-LINE JCL.

           3) AUTOMATING AND ORGANIZING THE ARCHIVING AND RETRIEVING
              OF JCL FROM ARCHIVE.

           4) CUTTING DOWN ON JCL PRINT OUTPUT.

   LIBSPOOL DATA SETS
  --------------------

          1) SHSW.LSLIB - CURRENT LIBRARIAN JCL LIBRARY
                          CONTAINS THE CURRENT JCL MODULES
                          GOTTEN FROM THE LIBSPOOL TASK.

          2) SHSW.LSARCLIB - RESTORE FROM LIBRARIAN ARCHIVE TAPE
                             LIBRARIAN JCL LIBRARY

          3) SHSW.LSADRLIB - ARCHIVE DIRECTORY
                             PARTIONED DATA SET CONTAINING INFORMATION
                             ON THE CONTENTS OF THE LIBRARIAN ARCHIVE
                             TAPES.

          4) PHGIOPS.OPS2339.DALYARCH - DAILY LIBRARIAN ARCHIVE TAPE

          5) PHGIOPS.OPS2340.WKLYARCH - WEEKLY LIBRARIAN ARCHIVE TAPE

   LIBSPOOL USAGE
  ----------------

            LIBSPOOL RUNS AS A CONSOLE STARTED TASK THAT CAN BE
            STARTED AUTOMATICALLY AT IPL TIME AND WILL NORMALLY
            ALWAYS BE ACTIVE.
            AT END EXECUTION FOR PRODUCTION JOBS SPECIFYING A
            SPECIFIC MSGCLASS ON THE JOB CARD LIBSPOOL WILL OBTAIN
            THE JCL AND SELECTED SYSOUT OUTPUT FROM JES2.
            LIBSPOOL WILL ONLY PROCESS JOBS RUN WITH A 'P' AS THE
            FIRST CHARACTER OF THE USER-ID. ALL OTHER JOBS USING A
            LIBSPOOL MSGCLASS WILL BE DELETED FROM THE SYSTEM.
            JCL OUTPUT WILL CONSIST OF:

                      1) JES LOG
                      2) JCL
                      3) EXECUTION MESSAGES

            SELECTED SYSOUT OUTPUT CAN BE CAPTURED BY SPECIFING
            SYSOUT=* ON THE DD STATEMENT OF THE SYSOUT WHICH IS
            DESIRED TO BE CAPTURED WITH THE JCL. EACH SYSOUT DATA SET
            IS CURRENTLY LIMITED TO 500 LINES OF OUTPUT. THIS IS DONE
            TO PROTECT LIBSPOOL FROM CAPTURING LARGE SYSOUT DATA SETS
            SUCH AS PROGRAM DUMPS WHICH WOULD CAUSE A LIBSPOOL DISK
            SPACE PROBLEM. COBOL PROGRAM DISPLAYS AND UTILITY PROGRAM
            MESSAGES ARE THE KIND OF SYSOUT DATA SET THAT SHOULD BE
            CONSIDERED.
            THIS OPTION WILL ONLY FUNCTION FOR JOBS THAT
            ARE RUN ON THE NIA NODE WHOSE PRINT IS NOT ROUTED TO
            ANOTHER NODE. THIS OPTION IS NOT AVAILIABLE FOR JOBS RUN
            ON ANOTHER NODE (EG. HOU) WHOSE PRINT (JCL) IS ROUTED
            BACK TO THE NIA NODE. JCL (JES2 LOG, JCL, EXECUTION
            MESSAGES) IS THE ONLY SYSOUT OUTPUT THAT CAN BE CAPTURED
            BY LIBSPOOL FOR JOBS RUN ON ANOTHER NODE. LIBSPOOL WILL
            NOT OPERATE PROPERLY IF A NON-JCL SYSOUT (SYSOUT=*) IS
            SENT BACK TO THE NIA NODE. EVERY EFFORT SHOULD BE MADE
            TO AVOID THIS SITUATION. (SYSOUT=* OUTPUT CAN ONLY BE
            CAPTURED BY LIBSPOOL FOR ONE STEP JOBS RUN ON ANOTHER

            THE LIBSPOOL DATA SET WILL ALLOW APPROXIMATELY A MAXIMUM
            OF 15,000 RECORDS PER JOB. PRINT LINES GREATER THAN 80
            CHARACTERS WILL TAKE 2 RECORDS WHEN STORED BY LIBSPOOL.

            LIBSPOOL WILL SCAN THE JCL LOOKING FOR A MATCH ON A
            PRE-DEFINED SET OF ABEND CONDITIONS. A MATCH OF
            ANY OF THE FOLLOWING IBM MESSAGE IDENTIFICATIONS WILL RESULT
            IN THE JCL TO BE QUEUED FOR OUTPUT UNDER SYSOUT CLASS J
            TO BE PRINTED AT NDC.

                  IEF251I - JOB CANCELLED
                  IEF283I - NOT DELETED X
                  IEF287I - NOT RECTLGD/CATALGD/UNCATLGD
                  IEF450I - ABEND
                  IEF451I - ENDED BY CC
                  IEF452I - JOBFAIL/JOB NOT RUN JCL ERROR
                  IEF453I - JOB FAILED - JCL ERROR

              THE JOB CARD MSGCLASS PARAMETER IS USED TO CONTROL:

                  1) SELECTION OF JCL OUTPUT BY LIBSPOOL
                  2) PRINTING OF THE JCL
                  3) PRINTING OF THE JCL BASED ON CONDITION CODE
                     VALUES ALLOWED

              THE FOLLOWING IDENTIFIES THE MSGCLASS VALUES THAT
              LIBSPOOL WILL SELECT FOR PROCESSING AND THE CONDITION
              CODE VALUES THAT ARE ALLOWED FOR THAT MESSAGE CLASS.

                 MSGCLASS                USAGE
                 ________        _______________________
                    X            JCL OF THIS MSGCLASS WILL ALWAYS PRINT.
                    W            CONDITION CODES GREATER THAN 0 QUEUES
                                 JCL TO BE PRINTED UNDER SYSOUT CLASS J.

              IN ALL CASES THE JCL WILL BE ADDED TO THE LIBSPOOL
              LIBRARIAN DATA SET. LIBSPOOL COSTRUCTS AN EIGHT (8)
              CHARACTER LIBRARIAN MODULE NAME FOR THE JCL OF THE
              FOLLOWING FORMAT:

                        BYTE  1   - LETTER A THRU Z
                        BYTES 2-4 - JULIAN DAY NUMBER
                        BYTES 5-8 - JES2 JOB NUMBER

              THE LETTER IN THE FIRST BYTE IS NORMALLY 'A' BUT WILL BE
              INCREMENTED THRU 'Z' IF IT IS FOUND THAT A MODULE ALREADY
              EXISTS ON THE LIBSPOOL LIBRARIAN DATA SET OF THAT NAME.

              WHILE THE JCL IS ON-LINE IN THE LIBSPOOL DATA SET
              THE LIBSPOOL CLIST CAN BE USED TO DO INQUIRY
              SCANNING FOR MATCHES ON ANY
              ONE OF THE FOLLING CRITERIA:

                    1) GENERIC JOB NAME
                    2) USER-ID OF THE JOB
                    3) JOB NUMBER
                    4) LIBRARIAN MODULE NAME
                    5) ALL MODULES

              A FORMATTED DISPLAY WILL BE MADE BACK TO THE TERMINAL
              SHOWING ANY MODULES THAT MATCHED THE SELECTION CRITERIA
              USED. INFORMATION DISPLAYED WILL CONSIST OF:

                    1) JOB NAME
                    2) JOB NUMBER
                    3) USER-ID
                    4) LIBRARIAN LIBSPOOL MODULE NAME
                    5) RUN DATE
                    6) START RUN TIME
                    7) END RUN TIME

              AN 'END OF DATA' MESSAGE APPEARS AFTER ALL THE DATA
              HAS BEEN SCANNED.
              A 'MODULE NOT FOUND' OR
              'NO MATCHES FOUND' MESSAGE APPEARS IF NO MATCH IS
              FOUND ON THE SEARCH CRITERIA USED.

              USING THE INFORMATION FROM THE ABOVE DISPLAY
              TO IDENTIFY THE RUN(S) IN QUESTION
              THE USER CAN THEN USE THE LIBSPOOL MODULE NAME TO
              SELECT THE JCL OF INTEREST FOR DISPLAY OR PRINT
              THRU USE OF THE LIBSPOOL CLIST.

              IF THE LIBSPOOL CLIST IS INTERRUPTED (PA1 KEY) BEFORE
              COMPLETING NORMALLY (X OPTION ON THE PRIMARY MENU) THEN
              IT MAY BE NECESSARY TO ENTER A 'FREEALL' TSO COMMAND
              TO CLEAN UP ANY ALLOCATIONS MADE BY THE LIBSPOOL CLIST.
              OTHERWISE THE LIBSPOOL CLIST WILL NOT WORK PROPERLY
              IF IT IS RE-ENTERED IN THE SAME TSO SESSION.

              JOBS CANCELLED BEFORE BEING SCHEDULED FOR EXECUTION
              ARE ALSO CAPTURED BY LIBSPOOL BUT NOT PRINTED. THE
              RUN DATE USED WILL BE THE DATE THE JCL WAS ADDED
              TO THE LIBSPOOL LIBRARIAN DATA SET.

              A DAILY OR WEEKLY ARCHIVE JOB IS RUN WHICH WILL
              REMOVE CHRONOLOGICALLY OLD JCL MODULES FROM THE LIBRARIAN
              LIBSPOOL DATA SET TO A LIBRARIAN ARCHIVE TAPE DATA SET.
              CURRENTLY, JCL MODULES WILL BE LEFT ONLINE 120 HOURS
              BEFORE BECOMING ELIGIBLE TO BE TAKEN OFFLINE.
              THE CONTENTS OF THE ARCHIVE TAPES GENERATED IS
              MAINTAINED IN A ONLINE ARCHIVE DIRECTORY DATA SET.

              THE LIBSPOOL CLIST CAN BE USED TO INQUIRE INTO THIS
              DATA SET BASED ON THE SAME SELECTION CRITERIA USED IN
              INTERROGATING THE LIBSPOOL DATA SET.

                    1) GENERIC JOB NAME
                    2) USER-ID OF THE JOB
                    3) JOB NUMBER
                    4) LIBRARIAN MODULE NAME
                    5) ALL MODULES

              THE SELECTION IS QUALIFIED BY A DATE INTERVAL BASED
              ON THE RUN DATE FOR A JOB. A DISPLAY WILL BE MADE
              BACK TO THE TERMINAL INDICATING THE ARCHIVE TAPE
              DATA SET NAME FOLLOWED BY THE THE FOLLOWING DATA
              OF THE MODULES WHICH SATISFIED THE SELECTION
              CRITERIA WITHIN THE DATE INTERVAL SPECIFIED.

                    1) JOB NAME
                    2) JOB NUMBER
                    3) USER-ID
                    4) LIBRARIAN LIBSPOOL MODULE NAME
                    5) RUN DATE
                    6) START RUN TIME
                    7) END RUN TIME

              KNOWING THE ARCHIVE TAPE DATA SET NAME AND THE
              LIBRARIAN MODULE NAME OF THE JCL IN QUESTION THE LIBSPOOL
              CLIST CAN BE USED TO SUBMIT A JOB TO BATCH TO RESTORE
              THE MODULE TO A LIBRARIAN RESTORE FROM ARCHIVE DATA SET.
              THE LIBSPOOL CLIST AGAIN CAN BE USED TO INTERROGATE THIS
              DATA SET AS WOULD BE DONE TO THE CURRENT LIBRARIAN
              LIBSPOOL DATA SET. ALL RESTORED MODULES WILL REMAIN
              ONLINE UNTIL THE NEXT WEEKLY ARCHIVE JOB IS RUN.
              (THIS JOB IS CURRENTLY SCHEDULED TO BE RUN EACH MONDAY
              AT 0300 HOURS).

              THE ARCHIVE JOBS ALSO GENERATE A REPORT WHICH IS
              FILED IN OPERATIONS. THIS REPORT INDICATES THE
              CONTENTS OF THE ARCHIVE TAPE DATA SET NAME IDENTIFIED
              IN THE HEADING. THE SEQUENCE OF THE REPORT IS JOB NAME,
              RUN DATE, RUN TIME. THIS REPORT IS ANOTHER WAY OF
              DETERMINING THE CONTENTS OF THE ARCHIVE TAPES.


LIBSPOOL PROBLEMS
-----------------

THE FOLLOWING ARE KNOWN CURRENT PROBLEMS IN USING LIBSPOOL:

  1) JCL QUEUED TO PRINT BY THE LIBSPOOL TASK PRINTS JOB SEPARATOR
     PAGES FOR EACH SECTION OF JCL OUTPUT. (JES LOG, JCL, EXECUTION
     MESSAGES,SYSOUTS). THE NEW JES SCHEDULED TO BE OPERATIONAL IN 1983
     CORRECTS THIS PROBLEM.

  2) AFTER ADDING THE LIBSPOOL MSGCLASS TO THE JOB CARD,
     JCL WHICH IS DUAL ROUTED WILL RESULT IN THE JCL NOT TO BE
     SENT TO THE REMOTE DESTINATION SPECIFIED ON THE /*OUTPUT CARD.
     DUAL ROUTING OUTPUT CARDS FOR JCL APPEAR AS:
     /*OUTPUT JCL DEST=(LOCAL,RMT10)
     THIS CARD CAN BE LEFT IN JOBS THAT ARE CHANGED TO A LIBSPOOL
     MSGCLASS. AS LONG AS A LIBSPOOL MSGCLASS IS USED IT WILL HAVE
     NO MEANING.


        TECHNICAL SUPPORT OF THE NIAGARA DATA CENTER IS
        AVAILIABLE TO SERVICE PROBLEMS AND ANSWER QUESTIONS
        ABOUT LIBSPOOL AND THE LIBSPOOL CLIST. OXYCOM 939-3251.
