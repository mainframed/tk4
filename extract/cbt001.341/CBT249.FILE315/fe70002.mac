//TEC0169I JOB (T369055000),TIM.BAKER,CLASS=B,NOTIFY=TEC0169,MSGCLASS=X
/*JOBPARM ROOM=2,S=C033
//*
//*******************************************************************
//*                                                                 *
//*  THIS USER MOD CHANGES THE COMMON CONVERT DIR ENT TO EBCDIC     *
//*  ROUTINE TO PRINT THE SPF STATS FROM THE END OF THE USER DATA.  *
//*  THIS FIX MUST BE APPLIED WITH FE70003, FE70004, AND FE70005.   *
//*  JOB SPFSUBS1 SHOULD BE RUN AFTER ALL 4 USER MODS ARE APPLIED   *
//*  TO ASSEMBLE AND LINK CCD, CIV, CML, AND CVSDE THEN SPFSUBS IS  *
//*  LINKED.                                                        *
//*                                                                 *
//*******************************************************************
//*
//COPYOUT EXEC PGM=IEBCOPY,REGION=1024K
//SYSPRINT  DD SYSOUT=*
//SYSIN     DD *
  COPY INDD=SYSUT1,OUTDD=SYSUT2
  SELECT MEMBER=((ISPCCD,ISPCCDO))
//SYSUT1    DD DSN=SYS9.SPF100P1.SOURCE,DISP=SHR
//SYSUT2    DD DSN=&TEMP,DISP=(NEW,KEEP),UNIT=VIO,SPACE=(TRK,(1,1,1)),
//             DCB=*.SYSUT1
//*
//COPYIN  EXEC PGM=IEBCOPY,REGION=1024K
//SYSPRINT  DD SYSOUT=*
//SYSIN     DD *
  COPY INDD=SYSUT1,OUTDD=SYSUT2
  SELECT MEMBER=(ISPCCDO)
//SYSUT1    DD DSN=&TEMP,DISP=(OLD,DELETE)
//SYSUT2    DD DSN=SYS9.SPF100P1.SOURCE,DISP=SHR
//*
//CHANGE  EXEC PGM=IEBUPDTE
//SYSPRINT  DD SYSOUT=*
//SYSUT1    DD DSN=SYS9.SPF100P1.SOURCE,DISP=SHR
//SYSUT2    DD DSN=SYS9.SPF100P1.SOURCE,DISP=SHR
//SYSIN     DD *
./ CHANGE NAME=ISPCCD
*    CONVERTS SPF STATS FROM END OF USER DATA - F.E.D.S. USER MOD
         IC    R10,13(,@03)       LOAD NUMBER OF HALFWORDS IN USER DATA
         N     R10,ONEFOX         TURN OFF NOT - LENGTH BITS
         SLL   R10,1              MULTIPLE HALFWORDS BY 2 FOR LENGTH
         LA    R11,14(,@03)       POINT TO FIRST OF USER DATA
         AR    R11,R10            POINT TO END OF USER DATA
         LA    R10,30             LOAD LENGTH OF SPF USER DATA
         SR    R11,R10            POINT TO FIRST OF SPF USER DATA
*    CONVERTS SPF STATS FROM END OF USER DATA - F.E.D.S. USER MOD
         IC    @08,SDEVERS(,R11)  MOVE VER NUMBER              F.E.D.S.
         IC    @04,SDEMOD(,R11)   MOVE MOD NUMBER              F.E.D.S.
         LA    @08,SDECDATE(,R11) POINT TO CREATE DATE         F.E.D.S.
         CLC   SDEMDATE(4,R11),@CB00441  ANY MOD DATE ?        F.E.D.S.
         LA    @08,SDEMDATE(,R11) POINT TO MOD DATE            F.E.D.S.
         CLC   SDEMTIME(2,R11),@CB00442  ANY MOD TIME ?        F.E.D.S.
         MVC   CCDW1(2),SDEMTIME(R11) MOVE MOD TIME            F.E.D.S.
         LA    @08,SDECLINE(,R11) POINT TO CURRENT LINES       F.E.D.S.
         LA    @08,SDEILINE(,R11) POINT TO INITIAL LINES       F.E.D.S.
         LA    @08,SDEMLINE(,R11) POINT TO MODIFIED LINES      F.E.D.S.
         MVC   CCDID(7,@08),SDEID(R11) MOVE USER ID            F.E.D.S.
ONEFOX   DC    F'31'                                           F.E.D.S.
./ ENDUP
