//BLDO JOB (CCP64,1B),'',REGION=1536K,NOTIFY=CCP11
//* OLD VERSION OF BLDO--PRODUCES DICTIONARY (DQ) DATASET.
/*JOBPARM TIME=2959,TAPES=2,LINES=20K
/*ROUTE  PRINT LOCAL
//*
//* FUNCTION:
//*
//* BLDO IS THE SECOND OF THE QUANDRY BUILDERS.  IT TAKES AS
//* INPUT THE QUANDRY ERIC FILE (CCP64.E) AND BUILDS FILES OF
//* OCCURRENCES OF MAJOR AND MINOR DESCRIPTORS AND IDENTIFIERS
//* (CCP64.MAJOR AND CCP64.MINOR). A FILE OF DESCRIPTORS AND
//* IDENTIFIERS WITH THEIR MAJOR, MINOR, AND TOTAL OCCURRENCES
//* (CCP64.DQ) IS ALSO PRODUCED BUT IS NOT USED BY QUANDRY.
//* SEPARATE STEPS USE A SORT UTILITY TO PREPARE THE FILES FOR
//* THE FINAL BUILDER, BLDX.
//*
//* JCL MODIFICATIONS:
//*
//* JOB CARDS, DEVICE TYPES, VOLUMES, AND SO FORTH MUST BE MODIFIED
//* TO CONFORM TO YOUR INSTALLATION AND REQUIREMENTS. ADDITIONALLY,
//* TWO AUBURN UNIVERSITY UTILITIES ARE USED WHICH MUST BE
//* REPLACED BY CORRESPONDING LOCAL UTILITIES.  ZAP DOES AN
//* IEHPROGM SCRATCH OF DATASETS.  TAPEFILE REQUESTS THE OPERATOR TO
//* FILE A TAPE IN THE MASTER TAPE RACK OR UNCATALOGS A MASTER TAPE
//* AND REQUESTS THE OPERATOR TO RETURN IT TO THE SCRATCH RACK.
//* SORT PARAMETERS ARE FOR SYNCSORT (TM) AND WILL HAVE TO BE ALTERED
//* FOR IBM SORT/MERGE.
//*
//* STORAGE ESTIMATES:
//*
//* BLDO CURRENTLY RUNS IN 1536K.  THIS MAY BE REDUCED BY MODIFYING
//* THE ASSEMBLER ROUTINE CCP11.Q.ASM(BLDO) TO REDUCE THE NUMBER OF
//* ENTRIES IN THE HASH TABLE AT LABEL ENTRIES OR THE NUMBER OF
//* ENTRIES IN THE HASH SYNONYM TABLE AT OFLAREA.  ONE ENTRY IS
//* REQUIRED FOR EACH UNIQUE IDENTIFIER OR DESCRIPTOR FOUND IN A
//* PASS.  BLDO CURRENTLY MAKES TWO PASSES OVER CCP64.E, SPLITTING
//* THE ALPHABET AT THE LETTER M.  THE NUMBER OF PASSES CAN BE
//* ALTERED BY MODIFYING THE STRING AT LABEL BNDADDR.
//*
//* BLDO WILL ABEND WITH A USER 001 IF THE SYNONYM TABLE OVERFLOWS.
//* (THE CURRENT TABLE SIZE IS 24K ENTRIES + 10K OVERFLOWS.)
//* IF THIS HAPPENS, EITHER USE A SMALLER INPUT FILE, INCREASE THE
//* SIZE OF THE HASH TABLES, OR MODIFY BNDADDR TO MAKE MORE PASSES.
//*
//* RUNNING ON A 158 MOD 1 WITH 3350'S ON ONE CHANNEL, BLDO TOOK
//* 11 MINUTES OF COMPUTER TIME, DID 17K TAPE OPERATIONS, AND DID
//* 351K DISK OPERATIONS.  THE SORT STEPS TOOK AN ADDITIONAL
//* 5 MINUTES OF COMPUTER TIME EACH, RUNNING WITH SIX 25 CYLINDER
//* SORTWORK DATASETS ON 3330'S (SYNCSORT).  CLOCK TIME TOTALLED
//* 2 HOURS, 40 MINUTES.  THE TWO PASSES AVERAGE 21K ENTRIES + 7K
//* OVERFLOWS AND 850000 OCCURRENCES FROM 175000 RECORDS.
//*
//* SAMPLE OUTPUT:
//*
//* THE CCP64.E DATASET BUILT BY BLDE FROM THE SAMPLE DATA HAS
//* 2000 RECORDS.  THE OUTPUT FROM BLDO SHOULD BE:
//*
//* ENTRIES      0000NNNN       /* EXCLUSIVE OF OVERFLOWS */
//* OVERFLOWS    00000NNN
//* OCCURRENCES  0000NNNN
//* RECORDS      00002000
//* LBOUND                      /* BLANK */
//*
//* ENTRIES      0000NNNN
//* OVERFLOWS    00000NNN
//* OCCURRENCES  0000NNNN
//* RECORDS      00002000
//* LBOUND       M              /* BLANK */
//*
// EXEC ZAP
//SYSIN DD *
 CCP64.DQ
// EXEC TAPEFILE
//SYSIN DD *
 RETURN CCP64.MAJOR
 RETURN CCP64.MINOR
// EXEC ASMFCG,PARM.GO='SIZE=4096K'
//SYSLIB DD DSNAME=SYS1.MACLIB,DISP=SHR
// DD DSNAME=CCP11.Q.ASM,DISP=SHR
//ASM.SYSIN DD DSNAME=CCP11.Q.ASM(BLDO),DISP=SHR
//GO.ERIC DD DSNAME=CCP11.E,DISP=SHR,DCB=DSORG=PS
//GO.DICT DD DSNAME=CCP64.DQ,DISP=(NEW,CATLG),LABEL=RETPD=365,
// UNIT=DISK,SPACE=(TRK,200,RLSE)
//GO.MAJOR DD DSNAME=CCP64.MAJOR,DISP=(NEW,CATLG),
// UNIT=3400-3,VOL=(,RETAIN)
//GO.MINOR DD DSNAME=CCP64.MINOR,DISP=(NEW,CATLG),
// UNIT=3400-3,VOL=(,RETAIN)
//GO.SYSUDUMP DD SYSOUT=A
//FILE EXEC TAPEFILE,COND=EVEN
//SYSIN DD *
 FILE CCP64.MAJOR
 FILE CCP64.MINOR
//SRTMAJOR EXEC SORTD,PARM='VSCORE=1536000,CORE=MAX,OPT=D'
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTWK04 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTWK05 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTWK06 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTIN   DD DSNAME=CCP64.MAJOR,DISP=OLD,VOL=(,RETAIN)
//SORTOUT  DD DSNAME=CCP64.MAJOR,DISP=OLD,UNIT=AFF=SORTIN
//SYSIN    DD *
 SORT FIELDS=(5,31,CH,A,1,4,CH,A),SIZE=E850000
//SRTMINOR EXEC SORTD,PARM='VSCORE=1536000,CORE=MAX,OPT=D'
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTWK04 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTWK06 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTWK06 DD UNIT=SYSDA,SPACE=(CYL,25)
//SORTIN   DD DSNAME=CCP64.MINOR,DISP=OLD,VOL=(,RETAIN)
//SORTOUT  DD DSNAME=CCP64.MINOR,DISP=OLD,UNIT=AFF=SORTIN
//SYSIN    DD *
 SORT FIELDS=(5,31,CH,A,1,4,CH,A),SIZE=E825000
//
