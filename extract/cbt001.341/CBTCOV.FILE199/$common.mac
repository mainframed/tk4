         MACRO
&NAME    $COMMON ,
*---------------------------------------------------------------------*
*   COMMON AREA USED BY ALL ROUTINES.  THIS AREA IS GETMAIN-ED AND    *
*   INITIALIZED BY GDACINIT, AND ITS ADDRESS PLACED IN R11 FOR ALL    *
*   ROUTINES TO USE.  A DUMMY COPY OF THIS AREA IS CONTAINED IN       *
*   CSECT GDACOMMN, AND IS COPIED TO A GETMAIN-ED AREA BY GDACINIT.   *
*---------------------------------------------------------------------*
COMMON   DC    CL16'GDA COMMON AREA'
QORG     DC    F'0'                    COMMAND QUEUE POINTER
ACPPL    DS    F                       A(CPPL)
ADDN     DS    F                       A(DDNAME IN RECORD)
ADSN     DS    F                       A(DSNAME IN RECORD)
AVOL     DS    F                       A(VOLSER IN RECORD)
OPENLIST OPEN  (,),MF=L                LIST-FORM OPEN MACRO
CLOSLIST CLOSE (,),MF=L                LIST-FORM CLOSE MACRO
STCKLST  STACK MF=L                    LIST-FORM STACK MACRO
DSNWORK  DS    CL44                    WORK AREA FOR DSN CONVERSION
MEMBER   DS    CL8                     MEMBER NAME WORK AREA
VOLWORK  DS    CL6                     WORK AREA FOR VOLSER OBTAINS
SYSINDSN DC    CL56'''SYS1.CNTL(GDATA)''' DEFAULT CONTROL INPUT DSN
LUSRSUFX DC    XL1'8'                  LENGTH OF USER DSN SUFFIX
USERSUFX DC    CL44'GDA.DATA'          USER CNTL INPUT DSNAME SUFFIX
$PRFXFLG DC    XL1'00'                 ^=00, DSNAME PREFIX FOUND
$PRFXLEN DC    XL1'00'                 LENGTH OF DSNAME PREFIX
ERRFLG   DS    XL1                     DATASET ALLOCATE ERROR FLAG
$PREFIX  DC    CL8' '                  DSNAME PREFIX
MSG1     DC    C'ERROR ALLOCATING AAAAAAAA.BBBBBBBB.CCCCCCCC.DDDDDDDD.EX
               EEEEEEE(MMMMMMMM) VVVVVV'
MSG1DSN  EQU   MSG1+17
MSG2     DC    C'DAIR RC=X''....'', ERROR CODE=X''....'', REASON CODE=XX
               ''....'''
MSG2RC   EQU   MSG2+10
MSG2ERR  EQU   MSG2+30
MSG2INFO EQU   MSG2+51
MSG3     DC    C'UNABLE TO CONCATENATE DATASETS UNDER DDNAME DDDDDDDD'
MSG3DDN  EQU   MSG3+44
MSG4     DC    C'DDNAME=12345678, DSNAME=1...5....0....5....0....5....0X
               ....5....0...4'
MSG4DDN  EQU   MSG4+7
MSG4DSN  EQU   MSG4+24
MSG11    DC    C'UNABLE TO READ DATASET 1...5....0....5....0....5....0.X
               ...5....0...4'
MSG11DSN EQU   MSG11+23
MSG12    DC    C'THE GDA INPUT DATASET MUST HAVE FIXED LENGTH OR VARIABX
               LE LENGTH RECORDS.'
MSG13    DC    C'SYNTAX ERROR IN THE FOLLOWING INPUT RECORD:'
MSG14    DC    C'DDNAME MISSING AND NO PREVIOUS DATASET SPECIFIED TO WHX
               ICH IT CAN BE'
MSG15    DC    C'CONCATENATED.'
MSG16    DC    C'MORE THAN 16 DATASETS SPECIFIED UNDER DDNAME ........'
MSG16DDN EQU   MSG16+45
MSG17    DC    C'PROCESSING BYPASSED FOR DATASET 1...5....0....5....0..X
               ..5....0....5....0...4'
MSG17DSN EQU   MSG17+32
         SPACE 3
*
*   DA1:  DAIR CONTROL BLOCK TO DEALLOCATE A SPECIFIED DDNAME
*
         DS    0F
DA1      DC    AL1(128),AL3(DA1RB)     DA1 RB POINTER
DA1RB    DC    AL1(20)                 LENGTH = 20
         DC    XL1'02'                 VERB CODE = 2 (UNALLOCATION)
         DC    XL2'0000'               FLAGS1
DA1ERR   DC    AL2(0)                  ERROR CODE
DA1INFO  DC    AL2(0)                  INFO CODE
         DC    AL4(DA1TUPL)            A(TEXT UNIT POINTERS)
         DC    AL4(0)                  RESERVED
         DC    AL4(0)                  FLAGS2
DA1TUPL  DC    AL4(DA1DDN)             DDNAME TEXT UNIT POINTER
         DC    AL1(128),AL3(DA1UNALC)  UNALLOCATE TEXT UNIT POINTER
         DS    0F
DA1DDN   DC    XL2'0001',XL2'0001',AL2(8) DDNAME TEXT UNIT
DA1DDNAM DC    CL8' '                  DDNAME
         DS    0F
DA1UNALC DC    XL2'0007',XL2'0000'     UNALLOCATE TEXT UNIT
         SPACE 3
*
*   DA2:  DAIR CONTROL BLOCK TO ALLOCATE A SPECIFIED DSNAME
*
         DS    0F
DA2      DC    AL1(128),AL3(DA2RB)     DA2 RB POINTER
DA2RB    DC    AL1(20)                 LENGTH = 20
         DC    XL1'01'                 VERB CODE = 1 (ALLOCATION)
         DC    XL2'2800'               FLAGS1
DA2ERROR DC    AL2(0)                  ERROR CODE
DA2INFO  DC    AL2(0)                  INFO CODE
         DC    AL4(DA2TUPL)            A(TEXT UNIT POINTERS)
         DC    AL4(0)                  RESERVED
         DC    AL4(0)                  FLAGS2
DA2TUPL  DC    AL4(DA2DDN)             DDNAME TEXT UNIT POINTER
         DC    AL4(DA2DSN)             DSNAME TEXT UNIT POINTER
         DC    AL4(DA2PERM)            PERM ALLOC TEXT UNIT POINTER
DA2TUPL3 DC    AL4(DA2SHR)             DISP=SHR TEXT UNIT POINTER
         DC    AL4(DA2VOL)             VOLSER TEXT UNIT POINTER
         DC    AL1(128),AL3(DA2UNIT)   UNIT TEXT UNIT POINTER
         DS    0F
DA2DDN   DC    XL2'0001',XL2'0001',AL2(8)  DDNAME TEXT UNIT
DA2DDNAM DC    CL8' '                  DDNAME
         DS    0F
DA2DSN   DC    XL2'0002',XL2'0001',AL2(44) DATASET NAME TEXT UNIT
DA2DSNAM DC    CL44' '                 DATASET NAME
         DS    0F
DA2PERM  DC    XL2'0052',XL2'0000'     PERMANENTLY ALLOCATED ATTRIBUTE
         DS    0F
DA2SHR   DC    XL2'0004',XL2'0001',AL2(1)  DISP=SHR TEXT UNIT
         DC    XL1'08'                 DISP=SHR
         DS    0F
DA2MEM   DC    XL2'0003',XL2'0001',AL2(8)  MEMBER NAME TEXT UNIT
DA2MEMBE DC    CL8' '                  MEMBER NAME
         DS    0F
DA2VOL   DC    XL2'0010',XL2'0001',AL2(6)  VOLSER TEXT UNIT
DA2VOLSE DC    CL6' '                  VOLSER
         DS    0F
DA2UNIT  DC    XL2'0015',XL2'0001',AL2(8)  UNIT=SYSDA TEXT UNIT
DA2SYSDA DC    CL8'SYSDA'              UNIT=SYSDA
         SPACE 3
*
*   DA3:  DAIR CONTROL BLOCK TO CONCATENATE A SET OF DDNAMES
*
         DS    0F
DA3      DC    AL1(128),AL3(DA3RB)     DA3 RB POINTER
DA3RB    DC    AL1(20)                 LENGTH = 20
         DC    XL1'03'                 VERB CODE = 3 (CONCATENATION)
         DC    XL2'0000'               FLAGS1
DA3ERR   DC    AL2(0)                  ERROR CODE
DA3INFO  DC    AL2(0)                  INFO CODE
         DC    AL4(DA3TUPL)            A(TEXT UNIT POINTERS)
         DC    AL4(0)                  RESERVED
         DC    AL4(0)                  FLAGS2
DA3TUPL  DC    AL1(128),AL3(DA3DDN)    DDNAME TEXT UNIT POINTER
         DS    0F
DA3DDN   DC    XL2'0001'               DDNAME TEXT UNIT
DA3DDN#  DC    AL2(0)                  # OF DDNAMES TO BE CONCATENATED
DA3DDN1  DS    16CL10                  16*(LENGTH + DDNAME)
         SPACE 3
*
*   DCB USED FOR READING THE USER'S GDA.LIST DATASET
*
SYSUT1   DCB   DDNAME=XXXXXXXX,DEVD=DA,DSORG=PS,MACRF=GL
         SPACE 3
*
*   WORK AREAS FOR PARSE, OBTAIN AND LOCATE.
*
WORK256A DS    32D                     256-BYTE WORK AREA
WORK256B DS    32D                     ANOTHER 256-BYTE AREA
TEXTSYM  EQU   WORK256A                TEXT SYMBOL TRANSLATE TABLE
PUNCSYM  EQU   WORK256B                PUNCTUATION TRANSLATE TABLE
TUPL     EQU   WORK256B+200            TEXT UNIT POINTER LIST STORAGE
         SPACE 3
*
*   LIST OF DATASET NAMES TO BE CONCATENATED
*
$DSN#    DC    F'0'                    COUNT OF DSNAMES IN LIST
$DSNLIST DS    16CL66                  DSNAME LIST
LENCOMMN EQU   *-COMMON                LENGTH OF COMMON AREA
         MEND
