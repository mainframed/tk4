*          DATA SET SMFZPD    -----  CREATED                11/05/80
*
         MACRO
         SMFZPD   &TYPE=255,&DSECT=YES
.*********************************************************************
.*                                                                   *
.*       CREATED BY   CURTISS G. STANLEY        DATE 10/08/80        *
.*       USE          DSDSPZAP CALLED BY AMASPZAP MODULE             *
.*                                                                   *
.*                    S M F Z A P R    M A C R O                     *
.*                                                                   *
.*       FUNCTION   -   THIS MACRO IS USE TO DSECT OR CREATE THE     *
.*                      INITIAL WORK AREA FOR THE USER SMF RECORD    *
.*                      GENERATED BY DSDSPZAP MODULE.                *
.*                                                                   *
.*       SYMBOLICS  -   TYPE = THE SMF RECORD TYPE. THE TYPE MUST    *
.*                             BE A NUMBER INCLUSIVE OF 128 THRU     *
.*                             255. THE DEFAULT IS 255.              *
.*                                                                   *
.*                      DSECT = NO OR YES - YES IS THE DEFAULT.      *
.*                             THIS PARAMETER TELLS THE MACRO        *
.*                             TO MAKE THE DEFINES FOR A DSECTED     *
.*                             AREA OR FOR A REAL AREA. THE TAG      *
.*                             FOR THE DSECT IS "SMFZPD  ".          *
.*                                                                   *
.*********************************************************************
*******************************************************************
***                                                             ***
***         THIS MAPPING IS FOR THE SMF RECORD PRODUCED BY      ***
***         AMASPZAP FOR AN AUDIT TRAIL. THE TAGS ARE OF THE    ***
***         FORMAT 'SMFZPXXX' WHERE XXX = VERIABLE DATA. THE    ***
***         SYMBOLICS AVAILABLE IN THE PROC ARE:                ***
***                                                             ***
***         TYPE  - THIS IS FOR THE RECORD TYPE PRODUCED        ***
***                 DEFAULT = 255                               ***
***         DSECT - THIS IS USED TO CAUSE A DSECT DEFINITION    ***
***                 DEFAULT = YES, DSECT NAME = SMFZPD          ***
***                                                             ***
*******************************************************************
         SPACE 2
         LCLC  &TSTA
         LCLC  &NUMTST
&NUMTST  SETC  T'&TYPE
&TSTA    SETC  'OK'
         AIF   (K'&TYPE EQ 3).TYPECK2
         MNOTE 8,'TYPE FIELD NOT INCLUSIVE OF 128 THRU 255'
&TSTA    SETC  'BAD'
         AGO   .DSECTCK
.TYPECK2 ANOP
         AIF   ('&NUMTST' EQ 'N').TYPECK3
         MNOTE 8,'TYPE FIELD EQUALS "&TYPE" WHICH IS NOT NUMERIC'
&TSTA    SETC  'BAD'
         AGO   .DSECTCK
.TYPECK3 ANOP
         AIF   ('&TYPE' GE '128' AND '&TYPE' LE '255').DSECTCK
         MNOTE 8,'TYPE FIELD NOT INCLUSIVE OF 128 THRU 255'
&TSTA    SETC  'BAD'
         AGO   .DSECTCK
.DSECTCK ANOP
         AIF   ('&DSECT' EQ 'NO').SKPD
         AIF   ('&DSECT' EQ 'YES').DODSECT
         MNOTE 8,'"&DSECT" GIVEN AS DSECT VALUE -- MUST BE  YES OR NO'
.RAPUP   ANOP
         MEXIT
.DODSECT ANOP
         AIF   ('&TSTA' EQ 'BAD').RAPUP
SMFZPD   DSECT
         AGO   .SKPD2
.SKPD    ANOP
         AIF   ('&TSTA' EQ 'BAD').RAPUP
SMFZPD   DS    0D
.SKPD3   ANOP
SMFZPRCL DC    H'0'                 RECORD LENGTH
SMFZPSEG DC    H'0'                 SEGMENT AREA USED BY ACCESS MEATHOD
.SKPD2   ANOP
SMFZPFLG DC    X'02'                SYSTEM INDICATOR FOR "VS2"
SMFEQFLG EQU   X'02'                SYSTEM INDICATOR EQUATE
SMFZPRTY DC    AL1(&TYPE)           RECORD TYPE
SMFEQRTY EQU   &TYPE                RECORD TYPE
SMFZPTME DC    XL4'00'              TIME, IN HUNDREDTHS OF A SECOND,
*                                      RECORD WAS MOVED TO SMF BUFFER.
*                                      THIS FIELD IS TAKEN FROM A
*                                      TIME MACRO PRIOR TO ISSUING
*                                      THE "SMFWTM" MACRO.
SMFZPDTE DC    PL4'0'               DATE RECORD MOVED TO SMF BUFFER
*                                      IN THE FORM 00YYDDDF WHERE
*                                      F IS THE SIGN.
*                                      THIS FIELD IS TAKEN FROM A
*                                      TIME MACRO PRIOR TO ISSUING
*                                      THE "SMFWTM" MACRO.
SMFZPSID DC    CL4' '               SYSTEM IDENTIFICATION (SID).
*                                      THIS FIELD IS TAKEN FROM THE
*                                      SMCA FIELD POINTED TO BY THE
*                                      "CVTSMCA" FIELD OF THE "CVT".
SMFZPJBN DC    CL8' '               JOBNAME.
*                                      THIS FIELD IS TAKEN FROM THE
*                                      JCT FIELD.
*                                      "JSCBJCT" FIELD OFF THE "TCB".
SMFZPRST DC    XL4'00'              TIME, IN HUNDREDTHS OF A SECOND,
*                                      READER RECOGNIZED THE JOB CARD.
*                                      THIS FIELD IS TAKEN FROM A
*                                      JMR FIELD.
SMFZPRSD DC    PL4'0'               DATE READER RECOGNIZED THE JOB
*                                      CARD IN THE FORM
*                                      00YYDDDF WHERE F IS THE SIGN.
*                                      THIS FIELD IS TAKEN FROM A
*                                      JMR FIELD.
SMFZPJST DC    XL4'00'              TIME, IN HUNDREDTHS OF A SECOND,
*                                      OF START OF EXECUTION OF THE
*                                      JOB
*                                      THIS FIELD IS TAKEN FROM A
*                                      JCT FIELD. POINTED TO BY THE
*                                      "TCBJSCB" FIELD OF THE "TCB",
*                                      THE JSCB FIELD "JSCBJCT" FIELD
*                                      IS THE POINTER TO THE JCT,
*                                      THE "JCTJMRJT" CONTAINS THE
*                                      TIME.
SMFZPJSD DC    PL4'0'               DATE OF START OF EXECUTION OF
*                                      THIS JOB, IN THE FORM 00YYDDDF
*                                      WHERE F IS THE SIGN.
*                                      THIS FIELD IS TAKEN FROM A
*                                      JCT FIELD. POINTED TO BY THE
*                                      "TCBJSCB" FIELD OF THE "TCB",
*                                      THE JSCB FIELD "JSCBJCT" FIELD
*                                      IS THE POINTER TO THE JCT,
*                                      THE "JCTJMRJD" CONTAINS THE
*                                      DATE.
SMFZPSST DC    XL4'00'              TIME, IN HUNDREDTHS OF A SECOND,
*                                      OF START OF EXECUTION OF THIS
*                                      STEP
*                                      THIS FIELD IS TAKEN FROM A
*                                      JCT FIELD. POINTED TO BY THE
*                                      "TCBJSCB" FIELD OF THE "TCB",
*                                      THE JSCB FIELD "JSCBJCT" FIELD
*                                      IS THE POINTER TO THE JCT,
*                                      THE "JCTJMRSS" CONTAINS THE
*                                      TIME.
SMFZPSSD DC    PL4'0'               DATE OF START OF EXECUTION OF
*                                      THIS STEP, IN THE FORM 00YYDDDF
*                                      WHERE F IS THE SIGN.
*                                      THIS FIELD IS TAKEN FROM A
*                                      JCT FIELD. POINTED TO BY THE
*                                      "TCBJSCB" FIELD OF THE "TCB",
*                                      THE JSCB FIELD "JSCBJCT" FIELD
*                                      IS THE POINTER TO THE JCT,
*                                      THE "JCTSSD" CONTAINS THE
*                                      DATE.
SMFZPJID DC    CL8' '               JOB ID IN THE FORM "XXX NNNN"
*                                      WHERE XXX IS "TSU", "STC", OR
*                                      "JOB" AND NNNN IS THE TASK
*                                      NUMBER. SSIB FIELD "SSIBJBID"
SMFZPDSN DC    CL44' '              THE DATA SET NAME OF THE FILE
*                                      WHICH SUPERZAP IS BEING RUN
*                                      AGAINST. THIS FIELD IS TAKEN
*                                      FROM THE JFCB READ BY PROGRAM
*                                      "AMASPZAP" FOR FILE "SYSLIB"
*                                      IF THE JFCB AREA IS 44 X'04'S
*                                      THE DATA SET NAME WILL BE
*                                      "FORMAT4.DSCB".
SMFZPVOL DC    CL6' '               THE VOLUME SERIAL NUMBER THAT THE
*                                      "SYSLIB" DATASET RESIDES ON.
*
*        NOTE: THE "JCT" AND THE "ACT" CONTROL BLOCKS BOTH HAVE
*              A X'10' BYTE PREFIX NOT DESCRIBED BY THE MACRO
*              OR THE "DEBUGGING HANDBOOK". THE POINTERS IN THE
*              DESCRIBED IN THE HANDBOOKS POINT TO THE PREFIX.
*              AN ALLOWANCEMUST BE MADE FOR THESE PREFIXES.
*
SMFZPPNM DC    CL20' '              PROGRAMMER NAME FROM THE ACT FIELD
*                                      "ACTPRGNM"
*                                      THIS FIELD IS TAKEN FROM A
*                                      ACT FIELD. POINTED TO BY THE
*                                      "TCBJSCB" FIELD OF THE "TCB",
*                                      THE JSCB FIELD "JSCBJCT" FIELD
*                                      IS THE POINTER TO THE JCT,
*                                      THE "JCTACTAD" FIELD IS THE
*                                      POINTER TO THE "ACT". THE
*                                      PROGRAMMER NAME IS TAKEN FROM
*                                      THE "ACTPRGNM" FIELD OF THE
*                                      "ACT".
SMFZPCRD DC    CL80' '              INPUT CONTROL CARD FROM
*                                      PGM=AMASPZAP
SMFZPFSL EQU   *-SMFZPFLG           THE "FIXED SEGMENT LENGTH" PORTION
*                                      OF THE SUPERZAP SMF RECORD
*
*           THE ACCOUNTING FIELD IS VARIABLE:
*
*           IF SMFZP#AC IS EQUAL TO X'00' THEN NO ACCOUNTING
*           FIELDS FOLLOW. IF SMFZP#AC IS NOT X'00' IT IS THE
*           TOTAL ACCOUNTING FIELDS. THE ACCOUNTING FIELDS ARE
*           IN THE FORMAT: LFIELD WHERE L=A ONE BYTE BINARY LENGTH
*           AND FIELD=THE ACCOUNTING FIELD.
*
*
SMFZP#AC DC    XL1'00'              NUMBER OF ACCOUNTING FIELDS
SMFZPACT DC    CL144' '             ACCOUNTING FIELDS FROM THE ACT
*                                      FIELDS ARE LENGTH OF FIELD
*                                      FOLLOWED BY THE ACCOUNTING
*                                      FIELD FOLLOWED BY NEXT FIELD
*                                      LENGTH ETC.
*                                      THIS FIELD IS TAKEN FROM A
*                                      ACT FIELD. POINTED TO BY THE
*                                      "TCBJSCB" FIELD OF THE "TCB",
*                                      THE JSCB FIELD "JSCBJCT" FIELD
*                                      IS THE POINTER TO THE JCT,
*                                      THE "JCTACTAD" FIELD IS THE
*                                      POINTER TO THE "ACT". THE
*                                      ACCOUNTING IS TAKEN FROM
*                                      THE "ACTACCNT" FIELD OF THE
*                                      "ACT".
SMFZPTRL EQU   *-SMFZPFLG           THE "TOTAL RECORD LENGTH"
*                                      OF THE SUPERZAP SMF RECORD
         MEND
