21 1
//O1003520 JOB (VSP,008),
//         OLEKSIW,MSGCLASS=A,TIME=90,CLASS=F,MSGLEVEL=1
//*
//*   SAS PROGRAM TO READ THE SMF FILES FOR THE NCP TUNING STATISTICS
//*   RECORD FOR ACF/VTAM ACF/NCP.  NOTE THAT IN THE VTAM START-UP
//*   PROCEDURE MEMBER ATRSTRXX IN VTAMLST YOU MUST HAVE  TNSTAT,NOCNSL
//*   SPECIFIED.
//*               JIM OLEKSIW, NORTHEAST UTILITIES SERVICE COMPANY
//*         P.O. BOX 270, HARTFORD, CONNECTICUT 06101  (203-666-6911)
//*
//SAS  EXEC SAS79,OPTIONS='LINESIZE=72,PAGESIZE=44,NODATE'
//FT11F001 DD  SYSOUT=*,CHARS=SPEC,MODIFY=LOGO
//FT12F001 DD  SYSOUT=*,CHARS=SPEC,MODIFY=LOGO
//SMFIN DD  DSN=SYS1.MANB,DISP=SHR
//SYSIN     DD  *
*
     SAS PROGRAM TO READ
ACF/VTAM TUNING STATISTICS
*   ;
DATA TUNE ;
* SEE SC27-0468-0   APPENDIX C-26     ;
LENGTH DEFAULT=4 TIME 8 ;
   INFILE SMFIN ;
* DOCUMENTED IN ACF/VTAM INSTALLATION ;
   INPUT @6 SMF50RTY PIB1. @ ;
  DROP SMF50RTY  ID   TIME ;
   IF SMF50RTY NE 50 THEN DELETE ;
* VSAM SMF FILE ORGANIZATION ;
* SUBTRACT 4 FROM DISPLACEMENTS FOR
* NON-VSAM SMF FILES ;
   INPUT @7 TIME     SMFSTAMP8.
         @15 ID $4.
         @19 NCP_NAME $8.
         @27 NO_DLR   PIB4.
         @31 CHWR     PIB4.
         @35 CHRD     PIB4.
         @39 ATTN     PIB4.
         @43 RDATN    PIB4.
         @47 IPIU     PIB4.
         @51 OPIU     PIB4.
         @55 RDBUF    PIB4.
         @59 SLOWDOWN PIB4. ;
   DATE=DATEPART(TIME) ;
HOUR=TIMEPART(TIME) ;
   IF IPIU NE 0 THEN
 BUFFS_IN = RDBUF / IPIU ;
   IF CHRD NE 0 THEN
 ATTNO    = ATTN / CHRD  ;
   IF IPIU NE 0 THEN
 VPAC_NO  = RDBUF / IPIU ;
   IF BUFFS_IN > 2 THEN FLAG='*';
ELSE FLAG=' ';
FORMAT HOUR TIME5. DATE DATE5. ;
PROC SORT ; BY NCP_NAME ;
PROC PRINT UNIFORM ; BY NCP_NAME ;
TITLE1 FIGURE 9. ;
TITLE3 ACF/NCP TO ACF/VTAM TUNING STATISTICS ;
TITLE2 NORTHEAST UTILITIES SERVICE COMPANY ;
TITLE4  RECORDS COLLECTED FROM SMF DATASETS ;
PROC MEANS MAXDEC=2 DATA=TUNE(DROP=HOUR DATE);
BY NCP_NAME ;
PROC PLOT ;  BY NCP_NAME ;
     PLOT IPIU*HOUR='2A'X / HOUR=1 TO 12 BY 1 ;
