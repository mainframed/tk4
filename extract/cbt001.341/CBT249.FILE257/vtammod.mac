//NEM0019 JOB  (T,AFPM,S200C168),02879MXMAHONEY,CLASS=I,MSGCLASS=A,
//        NOTIFY=SSUMXM
/*JOBPARM SYSAFF=2B33
//PAN    EXEC  PANONEWK,LIB='ERI.TECH.SOURCE'
//STEPLIB DD   DSN=ERI.PANLIB,DISP=SHR
//PAN1.SYSIN DD *
++UPDATE NEM0019,4,ALL
++USERMOD (NEM0019)
 /*        GTEDS/NORTHEAST OS/VS PTF NUMBER NEM0019
  *
  *        TYPE             - ZAP
  *        RELEASE          - 3.8A
  *        PTF LEVEL        - 7908
  *        PROBLEM          - GTF TRACE FOR VTAM BUFFER USAGE IS
  *                         - NOT CONVENIENT TO USE. RMF IS BETTER.
  *        SOLUTION         - WRITE AN RMF EXIT FOR INTERVAL PROCESSING
  *                         - TO RECORD THE VTAM BUFFER USAGES. THIS
  *                         - MOD WILL HAVE VTAM CLEAR THE HWM VALUES
  *                         - AFTER RMF HAS RECORDED THEM IN SMF.
  *        RESULTS/BENEFITS - DAILY TRACKING OF VTAM BUFFER USAGE
  *                         - BECOMES PRACTICAL, AND CORRESPONDS TO
  *                         - THE RMF RECORDING INTERVAL.
  *
  */ .
++VER  (Z038) FMID(JVT1212) PRE (UZ28625).
++ZAP  (ISTORFBA).
 NAME  ISTORFBA
 VER  00E4 9180,2028      TEST FOR GTRACE REQUESTED
 VER  00E8 47E0,A17A      IF NOT BRANCH AROUND
 VER  00EC 41F0,0001      PUT VALUE OF 1 IN R15
 VER  00F0 4AF0,202C      ADD CURRENT BUFFER REQ COUNT
 VER  0180 41F0,00FD      PUT FID IN R15
 VER  0184 40F1,0002      PUT FID IN GPARM
 REP  00E4 9140,2028      TEST FOR RMF INTERVAL EXPIRED
 REP  00EC 4160,2030      GET GPARM AREA ADDRESS
 REP  00F0 41F0,00FD      PUT FID IN R15
 REP  00F4 40F6,0002      PUT FID IN GPARM
 REP  00F8 94BF,2028      CLEAR RMF INT EXP BIT
 REP  00FC 47F0,A0EC      BR AROUND UNUSED CODE
 REP  0180 9180,2028      IS GTRACE REQUIRED?
 REP  0184 4780,A178      IF NO ... BYPASS MONITOR CALL
 IDRDATA NEM0019
++COMMENT NEM0019,M MAHONEY       CLEAR VTAM HWM AT RMF REQUEST
++WRITE PRINT,NEM0019
++WRITE WORK,NEM0019
//SMP    EXEC  IPOSMP,RES=XVS33B
//SMPPTFIN DD DSN=*.PAN.PAN1.PANDD2,DISP=(OLD,DELETE)
//SYSIN  DD    *
 RECEIVE S(NEM0019).
 APPLY S(NEM0019).
