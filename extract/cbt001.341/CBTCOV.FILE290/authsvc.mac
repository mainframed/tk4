SVC243   CSECT     AUTHORIZATION ON/OFF SVC IGC0024C (TYPE 3)
*
*        R0<-1 TO REQUEST AUTHORIZATION ON
*        R0<-0 TO REQUEST AUTHORIZATION OFF
*
*        IF CALLING PROGRAM DOES NOT RESIDE IN THE
*        PAGEABLE LINK PACK AREA, THE CODE F'2121'
*        MUST ALSO BE PLACED IN R1.
*
         BALR      R12,0  PROGRAM ADDRESSABILITY
         USING     *,R12
         L         R2,28(R5)  ADDRESS OF CALLERS RB TO R2
         CLC       21(3,R2),361(R3)  CHECK RESUME PSW
         BL        TEST  BRANCH IF CALLER NOT IN PLPA
LOCJSCB  L         R2,180(R4)  ADDRESS OF JSCB TO R2
         BCT       0,AUTHOFF  R0^=1 REQUESTS AUTH OFF
AUTHON   OI        236(R2),X'01'  SET JSCBAUTH BIT
         B         RETURN  EXIT WITH AUTHORIZATION ON
AUTHOFF  NI        236(R2),X'FE'  CLEAR JSCBAUTH BIT
RETURN   BR        R14
TEST     LA        R6,2121  R6<-CODE
         CR        R1,R6  CHECK CALLERS CODE
         BNE       RETURN  EXIT IF CODE INVALID
         B         LOCJSCB
         EQUREGS
         END
