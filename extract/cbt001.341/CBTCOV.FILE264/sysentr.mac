* SYSENTR
*$.HE GENERALIZED SUBROUTINES - SYSENTR
*$.HE GENERALIZED CALL SUBROUTINE
*$.PL 55
*$.PN 0
*$.PA
*$.SS
*$.NF
*$88/04/08
*$AUTHOR:  T. SMITH
*$SOURCE MODULE NAME:  SYSENTR
*$DOCUMENTATION ID:  *$
*$.FI L
*$.SP 5
*$THIS SUBROUTINE SUPPLIES A GENERALIZED CALL FACILITY.  IT DIFFERS
*$FROM SYSCALL IN THE STRUCTURE OF THE PARAMETER LIST.
*$.SP 1
*$.IN 5
*$.NF
*$DCL SYSENTR ENTRY(PTR,PTR) RETURNS(FIXED BIN(31,0));
*$DCL (EPPTR,BOP(5)) PTR;
*$DCL RET FIXED BIN(31,0);
*$CALL SYSLOAD('TESTPGM',EPPTR);
*$UNSPEC(BOP(HBOUND(BOP,1)))=UNSPEC(BOP(HBOUND(BOP,1)))×'1'B;
*$RET=SYSENTR(EPPTR,ADDR(BOP(1)));
*$.FI L
*$.IN 0
*$.SP 1
*$BOP CONTAINS POINTERS TO THE REAL PARAMETERS FOR THE ROUTINE
*$POINTED TO BY EPPTR. THE ADDRESSES IN THESE POINTERS WILL BE STORED
*$IN THE FULLWORD ARGUMENT LIST POINTED TO BY REGISTER ONE WHEN EPPTR
*$IS CALLED. RET SHOULD BE FIXED BIN(31,0), AND WILL BE SET TO THE
*$VALUE OF REGISTER 15 ON RETURN FROM THE ROUTINE POINTED TO BY EPPTR.
*$THE HIGH BIT IN THE LAST ELEMENT OF BOP SHOULD BE SET TO '1'B.
*
SYSENTR  PLIENTRY
         L     RF,0(R1)           RF=A(ENTRY POINT)
         L     RF,0(RF)           RF=ENTRY POINT
         L     R2,8(R1)           R2=A(RETURN CODE)
         L     R1,4(R1)           POINT AT REST OF PARM LIST
         L     R1,0(R1)
         BALR  RE,RF              BRANCH TO SUBRTNE
         ST    RF,0(R2)           STORE RETURN CODE
         PLIEXIT
         LTORG
         END
