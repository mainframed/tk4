*$.HE GENERALIZED SUBROUTINES - STLINEN
*$.HE INTERFACE TO STLINENO MACRO
*$.PL 55
*$.PN 0
*$.PA
*$.SS
*$.NF
*$4/17/80
*$AUTHOR:  T. SMITH
*$SOURCE MODULE NAME:  STLINEN
*$DOCUMENTATION ID:  *$
*$.FI L
*$.SP 5
*$THIS SUBROUTINE IS AN INTERFACE TO THE STLINENO MACRO, WHICH IS
*$USED UNDER TSO/VTAM TO SPECIFY THE NUMBER OF THE SCREEN LINE
*$ON AN IBM 3270 DISPLAY TERMINAL ON WHICH THE NEXT NON-FULL-SCREEN
*$MESSAGE SHOULD APPEAR.  CALL FORMAT IS AS FOLLOWS:
*$.SP 1
*$.IN 5
*$.NF
*$DCL STLINEN ENTRY(FIXED BIN(15,0),CHAR(*))
*$  RETURNS(FIXED BIN(15,0));
*$I = STLINEN(1,'MODE=ON')
*$.FI L
*$.IN 0
*$.SP 1
*$THE FIRST PARAMETER SPECIFIED THE LINE NUMBER ON WHICH THE NEXT
*$NON-FILL-SCREEN MESSAGE IS TO APPEAR.
*$.SP 1
*$THE SECOND PARAMETER MAY BE EITHER 'MODE=ON' OR 'MODE=OFF',
*$AND INDICATES WHETHER FULL SCREEN MODE IS TO BE SET ON OR OFF.
*$.SP 1
*$THE SUBROUTINE RETURNS THE RETURN CODE SET IN REGISTER 15
*$AFTER THE STFSMODE MACRO IS ISSUED.  POSSIBLE RETURNS CODES
*$ARE:
*$.SP 1
*$.IN 5
*$.NF
*$00 - SUCCESSFUL.
*$04 - INVALID PARAMETER SPECIFIED.
*$08 - INVALID TERMINAL TYPE.
*$12 - LINE NUMBER IS 0 OR GREATER
*$     THAN MAXIMUM NUMBER OF LINES.
********************************************************************
STLINEN  PLIENTRY ,COMPILE=O
         LM    R2,R4,0(R1)
         LH    R1,0(R2)           R1=LINE NUMBER
         L     R3,0(R3)           R3=A(MODE=ON/OFF)
         CLC   0(7,R2),=C'MODE=ON'
         BC    7,DOSVC            BR IF MODE=OFF
         LA    R0,128             INDICATE MODE=ON
         SLL   R0,24              SHIFT MODE FLAG TO HI BYTE
         OR    R1,R0              SET MODE FLAG IN REG 1
DOSVC    DS    0H
         LA    0,19               LOAD ENTRY CODE
         SLL   0,24               SHIFT TO HIGH ORDER BYTE
         SVC   94
         STH   RF,0(R4)           SET RETURN CODE
         PLIEXIT
         END
