*$.HE GENERALIZED SUBROUTINES - SYSLOAD
*$.HE PLI INTERFACE TO LOAD MACRO
*$.PL 55
*$.PN 0
*$.PA
*$.SS
*$.NF
*$5/22/74
*$AUTHOR:  T. SMITH
*$SOURCE MODULE NAME:  SYSLOAD
*$DOCUMENTATION ID:  *$
*$.FI L
*$.SP 5
*$THIS ROUTINE PROVIDES THE PLI PROGRAMMER WITH AN INTERFACE TO THE
*$LOAD MACRO.  IT CAN BE USED TO CAUSE THE CONTROL PROGRAM TO BRING
*$THE LOAD MODULE CONTAINING THE SPECIFIED ENTRY POINT IN TO MAIN
*$STORAGE.
*$.SP 1
*$CALL SYSLOAD(PGMNAME,EPPTR,DCBPTR);
*$.SP 1
*$.CE 1
*$DEFINITION OF TERMS
*$.SP 1
*$DCBPTR
*$.IN 5
*$OPTIONAL POINTER VARIABLE CONTAINING THE ADDRESS OF THE BPAM
*$DCB FROM WHICH THE SPECIFIED PROGRAM IS TO BE LOADED.
*$.IN 0
*$EPPTR
*$.IN 5
*$POINTER VARIABLE WHICH WILL BE SET BY THIS ROUTINE TO THE ENTRY
*$POINT ADDRESS OF THE LOADED PROGRAM.
*$.IN 0
*$PGMNAME
*$.IN 5
*$EIGHT-CHARACTER NAME OF THE PROGRAM TO BE LOADED.
SYSLOAD  CSECT
         USING *,15          NO ADDITIONAL BASE NEEDED
         STM   14,12,12(13)
         LM    2,4,0(1)      LOAD PARAMETER LIST
         L     0,0(2)        LOAD NAME ADDRESS FROM SDV
*                              NAME MUST BE CHAR(8) IN CALLING PROG
         LTR   1,3           TEST IF DCB ADDRESS SUPPLIED
         BP    LDCB            YES IF SECOND PARAMETER NOT LAST
         SR    1,1             NO - PASS SVC A ZERO (LINKLIB/JOBLIB)
LOADOP   LOAD  EPLOC=(0),DCB=(1)  ISSUE SVC
         ST    0,0(3)        RETURN LOAD ADDRESS IN SUPPLIED POINTER
         LM    14,12,12(13)
         BR    14
LDCB     L     1,0(4)        LOAD PASSED DCB ADDRESS (POINTER)
         B     LOADOP
         END
