 /* EXPANP */
 /*
0*$.HE GENERALIZED SUBROUTINES - EXPANP
0*$.HE REINSERTS BLANKS REMOVED BY COMPRP
0*$.PL 55
0*$.PN 0
0*$.PA
0*$.SS
0*$.NF
0*$04/09/80
0*$AUTHOR:  T. SMITH
0*$SOURCE MODULE NAME:  EXPANP
0*$DOCUMENTATION ID:  0*$
0*$.FI L
0*$.SP 5
0*$EXPANP WILL REINSERT BLANKS REMOVED BY THE COMPRP SUBROUTINE.
0*$COMPRP WILL STRIP ALL SETS OF TWO OR MORE CONTIGUOUS BLANKS FROM A
0*$CHARACTER STRING, REPLACING THEM WITH HALFWORD CONTROL WORDS,
0*$INDICATING THE NUMBER OF BLANKS REMOVED.  THE BLANKS CAN
0*$SUBSEQUENTLY BE REINSERTED BY CALLING THE EXPANP SUBROUTINE.
0*$CALL FORMAT IS AS FOLLOWS:
0*$.SP 1
0*$.IN 5
0*$.NF
0*$DCL EXPANP ENTRY(CHAR(*) VAR,CHAR(*) VAR);
0*$DCL (IN,OUT) CHAR(32767) VAR;
0*$READ FILE(INPUT) INTO(IN);
0*$CALL EXPANP(IN,OUT);
0*$WRITE FILE(OUTPUT) FROM(OUT);
 */
 EXPANP: PROC(IN,OUT);
         DCL (IN,OUT) CHAR(*) VAR;
         DCL W FIXED BIN(15,0) INIT(0),
             S CHAR(1) DEF W POS(2);
         DCL N FIXED BIN(15,0) INIT(0),
             P CHAR(1) DEF N POS(2);
         OUT = '';
         I = 1;
         DO WHILE(I < LENGTH(IN));
           S = SUBSTR(IN,I,1); /* W,S = # NONBLANKS */
           P = SUBSTR(IN,I+1,1); /* N,P = # BLANKS */
           IF N = 0
             THEN OUT=OUT××SUBSTR(IN,I+2,W);
             ELSE OUT=OUT××SUBSTR(IN,I+2,W)××REPEAT(' ',N-1);
           I = I + W + 2;
           END;
         END;
