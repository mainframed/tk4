 /* PHUPDT - PHONE DIRECTORY UPDATE PROGRAM - FRONT END */
         % NOPRINT;
         % INCLUDE CPINIT;
         % PRINT;
         DCL QNAME CHAR(8) STATIC INIT('TSMITH');
         DCL RNAME CHAR(8) STATIC INIT('PHONEUPD');
         DCL ENQRET CHAR(2);
         CALL SYSENQ(QNAME,RNAME,'SYSTEM','E','USE',ENQRET);
         IF ENQRET ^= 'OK'
              THEN DO;
                 @WRITE('SORRY, SOMEONE ELSE IS UPDATING, TRY LATER');
                 RETURN;
                 END;
         @ALLOC(DA('VSAM.PHONE'),SHR);
         CALL NULLSTX;
         CALL PHUPDTA(DA08DDN);
         @FREE(DA('VSAM.PHONE'),KEEP);
         CALL SYSDEQ(QNAME,RNAME,'SYSTEM',ENQRET);
         END;
