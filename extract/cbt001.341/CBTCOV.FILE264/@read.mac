 /* @READ */
 %NOPRINT;
         % @READI = 'Y';
         % DCL @READ ENTRY;
 % @READ:  PROC(NAME,NOCAPS) STATEMENT RETURNS(CHAR);
 /*
0*$.HE GENERALIZED SUBROUTINES = @READ
0*$.HE PLI PREPROCESSOR TEXT
0*$.HE GETS A LINE FROM THE TSO TERMINAL
0*$.PL 55
0*$.PN 0
0*$.PA
0*$.SS
0*$.NF
0*$09/10/76
0*$AUTHOR:  T. SMITH
0*$SOURCE MODULE NAME:  @READ
0*$DOCUMENTATION ID:  0*$
0*$.FI L
0*$.SP 5
0*$THIS PLI PREPROCESSOR PROCEDURE CAN BE INVOKED TO GENERATE THE
0*$NECESSARY PLI STATEMENTS TO READ A LINE OF TEXT FROM THE TSO
0*$TERMINAL.  FORMAT IS AS FOLLOWS -
0*$.SP 1
0*$.IN 5
0*$@READ(NAME,NOCAPS);
0*$.IN 0
0*$.SP 1
0*$WHERE NAME IS THE NAME OF THE CHARACTER STRING TO WHICH THE
0*$INPUT FROM THE TEMINAL WILL BE ASSIGNED.  NOCAPS IS OPTIONAL,
0*$AND SPECIFIES THAT THE LINE OF TEXT IS NOT TO BE TRANSLATED TO
0*$UPPERCASE.
 */
         DCL (NAME,NOCAPS,RETSTR) CHAR;
         RETSTR='DO; CALL GETLINE(CPPLUPT,CPPLECT,PCECB,IKJRET,INPTR@);'
          ×× ' IF IKJRET>4 THEN SIGNAL ERROR; ' ×× NAME ××
          '=SUBSTR(INSTR@,1,INLEN@-4);';
         IF NOCAPS ^= 'NOCAPS'
              THEN RETSTR=RETSTR××' CALL SETCAPS('××NAME××');';
         RETSTR=RETSTR ×× ' END;';
         RETURN(RETSTR);
         % END @READ;
 %PRINT;
