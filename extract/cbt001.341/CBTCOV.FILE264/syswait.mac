*  SYSWAIT
*$.HE GENERALIZED SUBROUTINES - SYSWAIT
*$.HE GENERALIZED WAIT SUBROUTINE
*$.PL 55
*$.PN 0
*$.PA
*$.SS
*$.NF
*$09/19/79
*$AUTHOR:  T. SMITH
*$SOURCE MODULE NAME:  SYSWAIT
*$DOCUMENTATION ID:  *$
*$.FI L
*$.SP 5
*$THIS SUBROUTINE SUPPLIES A GENERALIZED WAIT FACILITY.
*$THE PARAMETER LIST MUST CONSIST OF A LIST OF ECB ADDRESSES:
*$.SP 1
*$.IN 5
*$.NF
*$DCL SYSWAIT ENTRY;
*$DCL (A,B,C) EVENT;
*$DCL CNT FIXED BIN(15,0) INIT(2);
*$CALL SYSWAIT(CNT,A,B,C);
*$.FI L
*$.IN 0
*$CNT SHOULD CONTAIN THE NUMBER OF EVENTS THAT MUST COMPLETE
*$TO SATISFY THE WAIT.  IN THE EXAMPLE ABOVE, 2 EVENTS OUT
*$OF THE THREE MUST COMPLETE TO SATISFY THE WAIT.
*$.SP 1
*$NOTE THAT AN ALTERNATE ENTRY POINT, SYSWAIS, CAN BE USED
*$IF YOU WANT TO PASS A STRUCTURE SUCH AS THE FOLLOWING:
*$.SP 1
*$.IN 5
*$.NF
*$DCL 1 ECBPRM,
*$     2 CNTA PTR,
*$     2 ECBP(*$) PTR;
*$.FI L
*$.IN 0
*$.SP 1
*$CNTA MUST CONTAIN THE ADDRESS OF THE HALFWORD CONTAINING
*$THE COUNT OF EVENTS THAT WILL SATISFY
*$THE WAIT.  ECBP IS A LIST OF ECB ADDRESSES.  THE HIGH ORDER
*$BYTE OF THE LAST ECB ADDRESS MUST BE SET TO 1.
*
SYSWAIT  PLIENTRY ,DSA=256,COMPILE=O
         L     R2,0(R1)           R2=A(CNT)
         LH    R2,0(R2)           R2=CNT
         LA    R3,4(R1)           BUMP PAST CNT IN PARM LIST
         WAIT (R2),ECBLIST=(R3)
         PLIEXIT
         LTORG
         DROP  RA
SYSWAIS  CSECT
         USING *,RF
         L     R1,0(R1)           R1=A(VECTOR)
         L     R1,0(R1)           R1=A(PARM LIST)
         L     RF,=A(SYSWAIT)
         BR    RF
         LTORG
         END
