  /*TGSRESTL*/
 RESTORL:  PROC OPTIONS(MAIN);
         DCL LOGFLE FILE ENV(F RECSIZE(80) BLKSIZE(80) REGIONAL(1))
           RECORD KEYED;
         DCL CARD CHAR(80) STATIC INIT(' ');
         DCL 1 CARD2 DEF CARD,
              2 PAD CHAR(72),
              2 NXTAVLBL FIXED DEC(7,0),
              2 MAXAVLBL FIXED DEC(7,0);
         DCL I FIXED BIN(31,0);
         DCL LOGREC CHAR(80);
         OPEN FILE(LOGFLE) OUTPUT SEQUENTIAL;
         CLOSE FILE(LOGFLE);
         OPEN FILE(LOGFLE) UPDATE SEQUENTIAL;
         ON ENDFILE(LOGFLE) GO TO RESTORED;
         I = 0;
 NXT:
         READ FILE(LOGFLE) INTO(LOGREC);
         REWRITE FILE(LOGFLE) FROM(CARD);
         I = I + 1;
         GO TO NXT;
 RESTORED:
         CLOSE FILE(LOGFLE);
         OPEN FILE(LOGFLE) UPDATE DIRECT KEYED;
         NXTAVLBL = 1;
         MAXAVLBL = I;
         J = 0;
         WRITE FILE(LOGFLE) FROM(CARD) KEYFROM(J);
         CLOSE FILE(LOGFLE);
         END;
