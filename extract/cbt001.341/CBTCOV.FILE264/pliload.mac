*$.HE GENERALIZED SUBROUTINES - PLILOAD
*$.HE DYNAMIC FETCH WITH DYNAMIC NAME
*$.PL 55
*$.PN 0
*$.PA
*$.SS
*$.NF
*$08/19/81
*$AUTHOR:  HOWARD GILBERT, YALE COMPUTER CENTER
*$         MODIFIED BY T. SMITH, KIM
*$SOURCE MODULE NAME:  PLILOAD
*$DOCUMENTATION ID:  *$
*$.FI L
*$.SP 5
*$PLILOAD ALLOWS YOU TO HAVE A DYNAMICALLY FETCHED PLI PROCEDURE
*$WITHOUT HAVING TO KNOW THE PROCEDURE NAME AT COMPILE TIME.
*$FOR EXAMPLE:
*$.SP 1
*$.IN 5
*$.NF
*$TEST: PROC(PARM) OPTIONS(MAIN);
*$DCL PARM CHAR(100) VAR;
*$*** PARM = NAME TO FETCH ***
*$DCL PLILOAD ENTRY(CHAR(8),ENTRY,
*$  FIXED BIN(15,0));
*$DCL ENTRYPT ENTRY(CHAR(*)) VARIABLE
*$  RETURNS(FIXED BIN(15,0));
*$CALL PLILOAD(PARM,ENTRYPT,I);
*$IF I=0 THEN PUT LIST(ENTRYPT('XYZ'));
*$END TEST;
PLILOAD   PLIENTRY
          LR    R2,R1
          LM    R3,R5,0(R2)
          L     R3,0(,R3)
          LOAD  EPLOC=(R3),ERRET=FAIL
          ST    R0,0(,R4)
          XC    4(4,R4),4(R4)
          XC    0(2,R5),0(R5)
          PLIEXIT
FAIL      MVC   0(2,R5),=H'4'
          PLIEXIT
          END
