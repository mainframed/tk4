 /* EXCPCNT */
 /*
0*$.HE GENERALIZED SUBROUTINES - EXCPCNT
0*$.HE RETURNS ACCUMULATED SMF EXCPCNT
0*$.PL 55
0*$.PN 0
0*$.PA
0*$.SS
0*$.NF
0*$01/07/80
0*$AUTHOR:  T. SMITH
0*$SOURCE MODULE NAME:  EXCPCNT
0*$DOCUMENTATION ID:  0*$
0*$.FI L
0*$.SP 5
0*$THIS SUBROUTINE WILL RETURN THE ACCUMULATED EXCP COUNT
0*$FROM A TYPE 4 SMF RECORD.  CALL FORMAT IS AS FOLLOWS:
0*$.SP 1
0*$.NF
0*$DCL EXCPCNT ENTRY(PTR)
0*$  RETURNS(FIXED BIN(31,0));
0*$I = EXCPCNT(ADDR(SMF4LENN));
0*$.FI L
0*$.SP 1
0*$WHERE SMF4LENN IS THE HALFWORD AT OFFSET 102 DECIMAL IN
0*$THE SMF TYPE 4 RECORD.
 */
 EXCPCNT:  PROC(LENPTR) RETURNS(FIXED BIN(31,0));
         DCL LENPTR PTR;
         DFT RANGE(*) FIXED BIN VALUE(FIXED BIN(31,0));
         DCL 1 STR UNALIGNED BASED(STRPTR),
           2 SMF4LENN FIXED BIN(15,0),
           2 DEVARRAY(1000),
             3 DEVDESCR CHAR(4),
             3 SMF4EXCP FIXED BIN(31,0);
         STRPTR = LENPTR;
         J = SMF4LENN;
         WRKA = 0;
         DO K = 1 TO 1000 WHILE(J > 2);
           WRKB = SMF4EXCP(K);
           WRKA = WRKA + WRKB;
           J = J - 8;
           END;
         RETURN(WRKA);
         END EXCPCNT;
