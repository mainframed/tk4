 /* GREPLAY */
   % INCLUDE CPINIT;
   DCL REC CHAR(80);
   DCL OUT FILE RECORD OUTPUT ENV(FB RECSIZE(80) BLKSIZE(160));
   DCL SUFFIX ENTRY(CHAR(*), CHAR(*))
     RETURNS(FIXED BIN(15,0));
   DCL STMTS(2) CHAR(80) VAR STATIC INIT(
     'PROC GREPLAY DATA=&INDDN..&MEMBER &PIC;',
     'OPTIONS DEVICE=&DEVICE &DEVA;');
   DCL INDDN CHAR(8) VAR;
   @PROC(1,MEMBER,LIBRARY(LIB#(DSNAME,DEFAULT=SAS.DATA)),
     DEVICE(SER281),PICTURE(),DEVADDR(),GO);
   @SETDSN(LIB);
   @ALLOC(SHR);
   INDDN=SUBSTR(DA08DDN,1,SUFFIX(DA08DDN,' '));
   @SETL(&INDDN=INDDN);
   IF PICTURE=0
     THEN @SETL(&PIC='');
     ELSE @SETL(&PIC='PICTURE=&PICTURE');
   IF DEVADDR=0
     THEN @SETL(&DEVA='');
     ELSE @SETL(&DEVA='DEVADDR=&DEVADDR');
   IF SYMC('&GO')^='GO'
     THEN @CMD('ALLOC FI(OUT) NEW TR SP(1 1) REUSE');
   DO I = 1 TO HBOUND(STMTS,1);
     @REP(REC=STMTS(I));
     WRITE FILE(OUT) FROM(REC);
     END;
   CLOSE FILE(OUT);
   @CMD('%SAS OPTIONS(SYSIN=OUT) VERSION(796) &GO');
   END;
