 /* DSNLOC
0*$.HE GENERALIZED UTILITIES - DSNLOC
0*$.HE UTILITY TO TEST EXISTENCE OF DATA SET
0*$.PL 55
0*$.PN 0
0*$.PA
0*$.SS
0*$.NF
0*$8/12/74
0*$AUTHOR:  T. SMITH
0*$SOURCE MODULE NAME:  DSNLOC
0*$DOCUMENTATION ID:  0*$
0*$.FI L
0*$.SP 5
0*$THIS UTILITY CAN BE USED TO TEST THE EXISTENCE OF A SPECIFIED
0*$DATA SET.  IF THE DATA SET IS CATALOGED, THE RETURN CODE FOR
0*$THE STEP IN WHICH THIS UTILITY IS EXECUTED WILL BE SET TO ZERO.
0*$OTHERWISE, THE RETURN CODE IS SET TO THE VALUE IN REGISTER 15
0*$ON RETURN OF CONTROL FROM THE LOCATE MACRO USED TO DETERMINED
0*$IF THE DATA SET IS CATALOGED.
0*$.SP 1
0*$.NF
0*$//TEST EXEC PGM=DSNLOC,REGION=80K,PARM='DATA-SET-NAME'
0*$//SYSPRINT DD SYSOUT=A
0*$//DD1 DD UNIT=3330,VOL=SER=CATLOG,DISP=OLD
0*$.SP 1
0*$.FI L
0*$NOTE 1:  DATA-SET-NAME IS THE NAME OF THE DATA SET WHOSE EXISTENCE
0*$IS TO BE TESTED.
0*$.SP 1
0*$NOTE 2:  DD STATEMENT DD1 IS OPTIONAL AND IS NECESSARY ONLY IF THE
0*$CATALOG FOR THE DATA SET IS ON A VOLUME NOT NORMALLY ONLINE.
0*$REPLACE "CATLOG" WITH THE APPROPRIATE VOLUME SERIAL.
 */
 DSNLOC:  PROC(PARM) OPTIONS(MAIN);
   DCL PLICRETC BUILTIN;
   DCL SYSCTLG ENTRY;
   DCL PARM CHAR(100) VARYING;
   DCL AREA CHAR(265);
   DCL RET BIT(32);
   DCL CVOL CHAR(6) STATIC INIT('SYSRES');
   DCL DSNAME CHAR(44) VAR;

   DSNAME=PARM;
   CALL SYSCTLG('NAME',RET,PARM,CVOL,AREA);
   CALL PLIRETC(SUBSTR(RET,1,8));
   END;
