*$.HE ISD GENERALIZED SUBROUTINES - SYSOPEN
*$.HE PLI INTERFACE TO OPEN MACRO
*$.PL 55
*$.PN 0
*$.PA
*$.SS
*$.NF
*$12/1/76
*$AUTHOR:  T. SMITH
*$SOURCE MODULE NAME:  SYSOPEN
*$DOCUMENTATION ID:  *$
*$.FI L
*$.SP 5
*$THIS ROUTINE PROVIDES THE PLI PROGRAMMER WITH AN INTERFACE
*$TO THE OPEN MACRO.
*$.SP 1
*$CALL SYSOPEN(DCBPTR,OPTION);
*$.SP 1
*$.CE 1
*$DEFINITION OF TERMS
*$.SP 1
*$DCBPTR
*$.IN 5
*$POINTER VARIABLE CONTAINING THE ADDRESS OF THE DCB TO BE OPENED.
*$MAY HAVE BEEN SET BY A PREVIOUS CALL TO SYSDCBP.
*$.IN 0
*$OPTION CHAR(*)
*$.IN 5
*$'INPUT' - READ THE DATA SET ONLY.
*$.IN 5
*$'UPDAT' - DATA SET WILL BE UPDATED IN PLACE.
*$.IN 5
*$'OUTPUT' - WRITE DATA SET ONLY.
*$.IN 0
SYSOPEN  PLIENTRY ,DSA=108
         LM    2,3,0(1)            LOAD PARM LIST FROM REG 1
         L     2,0(2)
         L     3,0(3)
         LA    1,LIST
         MVC   LIST,=X'80000000'
         CLC   0(5,3),=C'INPUT'
         BNE   OU
         OPEN  ((2),INPUT),MF=(E,(1))
         B     RETCTL
OU       CLC   0(5,3),=C'UPDAT'
         BNE   OO
         OPEN  ((2),UPDAT),MF=(E,(1))
         B     RETCTL
OO       CLC   0(6,3),=C'OUTPUT'
         BNE   RETCTL
         OPEN  ((2),OUTPUT),MF=(E,(1))
RETCTL   DS    0H
         PLIEXIT
         LTORG
DSA      DSECT
LIST     DS    F
         END
