 RSTFLG: PROC(PARM) OPTIONS(MAIN);
         DCL PARM CHAR(100) VARYING;
         DCL DDNAME CHAR(8) INIT('CONTROL');
         DCL 1 JFCB,
              2 JFCBDSNAM CHAR(44),
              2 JFCBPAD CHAR(132);
         DCL JFCBPTR PTR;
         JFCBPTR = ADDR(JFCB);
         CALL SYSJFCB(DDNAME,JFCBPTR);
         DCL QNAME CHAR(8) STATIC INIT('KCENQ');
         DCL RNAME CHAR(52);
         DCL RETURN CHAR(2);
         RNAME='CONTROL.'××JFCBDSNAM;
         CALL SYSENQ(QNAME,RNAME,'SYSTEM','E','WAIT',RETURN);
         DCL SWOUT CHAR(36),
              MASK BIT(256) DEF SWOUT;
         CTLREC = PARM;
         CALL TRIN(CTLREC,SWOUT);
         DCL CONTROL FILE SEQUENTIAL UPDATE;
         DCL 1 CTL,
              2 CTLREC CHAR(72),
              2 PAD CHAR(8);
         DCL CTLOUT CHAR(36),
              SWITCHES BIT(256) DEF CTLOUT;
         READ FILE(CONTROL) INTO(CTL);
         CALL TRIN(CTLREC,CTLOUT);
         MASK = ^MASK;
         SWITCHES = SWITCHES & MASK;
         CALL TROUT(CTLOUT,CTLREC);
         REWRITE FILE(CONTROL) FROM (CTL);
 DEQ:
         CALL SYSDEQ(QNAME,JFCBDSNAM,'SYSTEM',RETURN);
         END;
