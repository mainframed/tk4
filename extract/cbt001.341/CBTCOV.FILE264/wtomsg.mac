0*$.HE GENERALIZED UTILITIES - WTOMSG
0*$.HE WTOMSG - SEND MESSAGES TO THE OPERATOR
0*$.PL 55
0*$.PN 0
0*$.PA
0*$.SS
0*$.NF
0*$6/20/74
0*$AUTHOR:  T. SMITH
0*$SOURCE MODULE NAME:  WTOMSG
0*$DOCUMENTATION ID:  0*$
0*$.FI L
0*$.SP 5
0*$THE WTOMSG UTILITY PROGRAM PROVIDES THE USER WITH THE FACILITY FOR
0*$SENDING MESSAGES TO THE OPERATOR FROM HIS JOB BY INPUTTING THEM
0*$TO A UTILITY PROGRAM RATHER THAN HAVING TO WRITE HIS OWN PROGRAM.
0*$.SP 1
0*$.IN 5
0*$.NF
0*$// EXEC PGM=WTOMSG,REGION=80K,
0*$// PARM='MESSAGE'
0*$//SYSPRINT DD SYSOUT=A
0*$//SYSIN DD *
0*$MESSAGE
0*$ .
0*$ .
0*$ .
0*$MESSAGE
0*$/*
0*$.SP 1
0*$.FI L
0*$.IN 0
0*$IF YOU HAVE ONLY ONE MESSAGE, YOU MAY ENTER IT VIA THE PARM FIELD AND
0*$OMIT THE SYSIN DATA SET.  ALSO, IF YOU HAVE MORE THAN ONE MESSAGE,
0*$YOU MAY OMIT THE PARM FIELD AND ENTER ALL MESSAGES IN THE SYSIN
0*$DATA SET.
0*$.SP 1
0*$.CE 1
0*$EXAMPLE
0*$.SP 1
0*$SUPPOSE YOU HAVE A CRITICAL JOB THAT MUST RUN CORRECTLY.  IF IT
0*$DOESN'T, YOU WANT TO BE NOTIFIED.  YOU MIGHT EXECUTE THE FOLLOWING
0*$AS THE LAST STEP OF THAT JOB:
0*$.SP 1
0*$.IN 5
0*$.NF
0*$// EXEC PGM=WTOMSG,REGION=80K,
0*$// COND=ONLY
0*$//SYSPRINT DD SYSOUT=A
0*$//SYSIN DD *
0*$CRITICAL JOB IN MY SYSTEM HAS FAILED -
0*$CONTACT JOE BLOW, TEL 763-3381
0*$/*
 */
 WTOMSG.. PROC(PARM) OPTIONS(MAIN),.
         DCL PARM CHAR(100) VARYING,.
         ON ENDFILE(SYSIN) GO TO EOJ,.
         DCL ((NXFIRST,NXLAST) BIT(1),
              DDNAME CHAR(8)) EXTERNAL,.
         NXFIRST = '1'B,.
         NXLAST = '0'B,.
         DCL INSW BIT(1) INIT('0'B),.
         DO WHILE(NXLAST = '0'B),.
         CALL D10201C,.
         IF DDNAME = 'SYSIN' THEN INSW = '1'B,.
         END,.
         DCL 1 INREC,
              2 DISPLAY CHAR(72),
              2 PAD CHAR(8),.
         DISPLAY = PARM,.
         IF DISPLAY NE ' ' THEN GO TO DODISP,.
         IF INSW = '0'B THEN GO TO EOJ,.
 NEXT..
         READ FILE(SYSIN) INTO(INREC),.
 DODISP..
         DISPLAY(DISPLAY),.
         IF INSW = '1'B THEN GO TO NEXT,.
 EOJ..
         END,.
