 /* @PUTGET */
 %NOPRINT;
         % @PUTGETI = 'Y';
         % DCL @PUTGET ENTRY;
 % @PUTGET:  PROC(P1,P2,P3) STATEMENT RETURNS(CHAR);
 /*
0*$.HE GENERALIZED SUBROUTINES - @PUTGET
0*$.HE PLI PREPROCESSOR TEXT
0*$.HE PROMPT FOR AND GET A LINE FROM TERMINAL
0*$.PL 55
0*$.PN 0
0*$.PA
0*$.SS
0*$.NF
0*$09/10/76
0*$AUTHOR:  T. SMITH
0*$SOURCE MOUDLE NAME: @PUTGET
0*$DOCUMENTATION ID:  0*$
0*$.FI L
0*$.SP 5
0*$THIS PLI PREPROCESSOR PROCEDURE CAN BE INVOKED TO GENERATE THE
0*$NECESSARY PLI STATEMENTS TO ISSUE A PROMPTING MESSAGE, AND
0*$THEN ACCEPT A LINE OF INPUT FROM THE TSO TERMINAL.  FORMATS ARE
0*$AS FOLLOWS -
0*$.SP 1
0*$.IN 5
0*$@PUTGET('PROMPT-MESSAGE',NAME2,NOCAPS);
0*$.SP 1
0*$@PUTGET(NAME1,NAME2,NOCAPS);
0*$.IN 0
0*$.SP 1
0*$WHERE 'PROMPT-MESSAGE' IS TEXT FOR THE PROMPTING MESSAGE TO BE
0*$WRITTEN AT THE TERMINAL, AND NAME2 IS THE NAME OF A CHARACTER
0*$STRING TO WHICH THE INPUT FROM THE TERMINAL IS TO BE ASSIGNED.
0*$NOCAPS IS OPTIONAL, AND INDICATES THAT THE INPUT IS NOT TO BE
0*$TRANSLATED TO UPPER CASE.
0*$.SP 1
0*$IN THE SECOND FORMAT, NAME1 IS THE NAME SPECIFIED IN A
0*$PREVIOUS @WRITE STATEMENT USING THE 'MF=L' OPTION.
 */
         DCL (P1,P2,P3) CHAR;
         DCL (LAB1,LAB2) CHAR;
         DCL (TEXT,RETSTR) CHAR;
         DCL (I,J) FIXED;
         P2=@STRIP(P2);
         P3=@STRIP(P3);
         RETSTR = 'DO;';
         IF SUBSTR(P1,1,1) = ''''
              THEN DO;
                   LAB1 = @NULL;
                   RETSTR=RETSTR ×× @WRITE(LAB1,P1,'MF=L');
                   END;
              ELSE LAB1 = P1;
         LAB2 = @NULL;
         RETSTR=RETSTR××' DCL 1 '××LAB2××', 2 OLDCNT@ FIXED BIN(31,0) '
           ××'INIT(1), 2 OUTPTR@ PTR; '××LAB2××'.OUTPTR@=ADDR(BUFFER@)'
           ××'; BUFFER@='××LAB1××'; CALL REP@(BUFFER@);'××
           ' CALL PUTGET(CPPLUPT,CPPLECT,CPECB,'××LAB2××',IKJRET,'××
           'INPTR@,''HOLD'',''GWAIT''); IF IKJRET^=0 THEN SIGNAL '××
           'ERROR; '××P2××'=SUBSTR(INSTR@,1,INLEN@-4);';
         IF P3 ^= 'NOCAPS'
              THEN RETSTR=RETSTR××' CALL SETCAPS('××P2××');';
         RETSTR=RETSTR××' END;';
         RETURN(RETSTR);
         % END @PUTGET;
 %PRINT;
