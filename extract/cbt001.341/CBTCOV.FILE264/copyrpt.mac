 /* COPYRPT */
 /*
0*$.HE GENERALIZED UTILITIES - COPYRPT
0*$.HE COPIES REPORTS OF DIFFERENT LRECLS
0*$.PL 55
0*$.PN 0
0*$.PA
0*$.SS
0*$.NF
0*$08/05/80
0*$AUTHOR:  T. SMITH
0*$SOURCE MODULE NAME:  COPYRPT
0*$DOCUMENTATION ID:  0*$
0*$.FI L
0*$.SP 5
0*$COPYRPT COPIES ONE OR MORE REPORTS, ONE BEHIND THE OTHER, TO
0*$AN OUTPUT FILE.  THE INCOMING REPORT FILES CAN HAVE DIFFERENT
0*$RECORD AND BLOCK SIZES.  THE DCB ATTRIBUTES OF THE OUTPUT FILE
0*$WILL BE AS SPECIFIED IN JCL, BUT THE LRECL MUST BE AT LEAST
0*$AS LARGE AS THE LARGEST RECORD (LESS TRAILING BLANKS)
0*$IN THE INCOMING REPORT FILES.
0*$NOTE ALSO THAT THE OUTPUT FILE MUST HAVE A RECFM OF VARYING.
0*$THE OUTPUT FILE IS IDENTIFIED WITH THE DDNAME SYSOUT, AND THE
0*$INPUT REPORT FILES ARE IDENTIFIED WITH DDNAMES OF THE FORM
0*$INDDD, WHERE DDD IS AN INCREMENTAL NUMBER, BEGINNING WITH 1.
0*$NOTE THAT DDD MUST NOT HAVE ZEROS TO THE LEFT OF THE SIGNIFICANT
0*$DIGITS.  THAT IS, IN1 IS CORRECT, BUT IN01 IS NOT.  THE FIRST
0*$INPUT REPORT FILE MUST HAVE THE DDNAME IN1.  NO INCREMENTAL
0*$NUMBERS CAN BE MISSED (E.G. IF YOU HAVE TWO INPUT REPORTS,
0*$DDNAMES IN1 AND IN2 MUST BE USED, NOT IN1 AND IN4).
0*$SAMPLE JCL FOLLOWS:
0*$.SP 1
0*$.IN 5
0*$.NF
0*$// EXEC PGM=COPYRPT
0*$//STEPLIB DD DSN=U.SD.U000.TGSLOAD,DISP=SHR
0*$//SYSPRINT DD SYSOUT=*
0*$//IN1 DD DSN=&BURST,DISP=(OLD,DELETE)
0*$//IN2 DD DSN=EUP027.EUP027JA.OUTLIST,DISP=SHR
0*$//SYSOUT DD SYSOUT=A,
0*$// DCB=(LRECL=137,BLKSIZE=141,RECFM=VA)
 */
 COPYRPT:  PROC OPTIONS(MAIN);
         DCL IN FILE RECORD INPUT SEQUENTIAL
           ENV(CONSECUTIVE);
         DCL SYSOUT FILE RECORD OUTPUT SEQUENTIAL
           ENV(CONSECUTIVE);
         DCL DDNEW CHAR(8) INIT('NONE');
         DCL DDOLD CHAR(8);
         DCL N PIC'ZZZ9';
         DCL (PREFIX,SUFFIX) ENTRY(CHAR(*),CHAR(*))
           RETURNS(FIXED BIN(15,0));
         DCL REC CHAR(32760) VAR;
         ON UNDF(IN) GO TO EOJ;
         ON ENDFILE(IN) GO TO EOF;
         OPEN FILE(SYSOUT);
         DO N = 1 REPEAT N+1;
           DDOLD = DDNEW;
           DDNEW = 'IN'××SUBSTR(N,PREFIX(N,' '));
           OPEN FILE(IN) TITLE(DDNEW);
           DO FOREVER=1 REPEAT FOREVER;
             READ FILE(IN) INTO(REC);
             REC=SUBSTR(REC,1,MAX(1,SUFFIX(REC,' ')));
             WRITE FILE(SYSOUT) FROM(REC);
             END;
           EOF: CLOSE FILE(IN);
           END;
 EOJ:
         PUT SKIP LIST('LAST FILE PROCESSED WAS ',DDOLD);
         END;
