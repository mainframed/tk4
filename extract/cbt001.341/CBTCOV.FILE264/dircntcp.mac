 /* DIRCNTCP */
 /*
0*#)F FUNCTION
0*# USE THE DIRCNT COMMAND TO OBTAIN A COUNT OF THE DIRECTORY
0*# BLOCKS IN A PARTITIONED DATA SET, AND THE PERCENT OF THE DIRECTORY
0*# SPACE IN USE.
0*#)X SYNTAX
0*# DIRCNT 'DSNAME'
0*#)O OPERANDS
0*# 'DSNAME' - THIS IS THE DSNAME OF THE PARTITIONED DATA SET FOR
0*#   WHICH YOU WANT A COUNT OF DIRECTORY BLOCKS.  STANDARD TSO
0*#   NAMEING CONVENTIONS APPLY.
 */
 % INCLUDE CPINIT;
 DCL (I,J) FIXED BIN(15,0);
 DCL MYDSN CHAR(44) VAR;
 DCL DIRSIZ ENTRY(CHAR(8),FIXED BIN(15,0),FIXED BIN(15,0));
 DCL PVOL CHAR(6);
 @PROC(1,NAME#(DSNAME),VOLSER());
 @SETDSN(NAME);
 PVOL=SYMC('&VOLSER');
 IF PVOL=''
   THEN @ALLOC(DA,SHR);
   ELSE @ALLOC(DA,VOLUME(PVOL),SHR);
 CALL DIRSIZ(DA08DDN,I,J);
 @SETL(&MYCNT = I);
 @SETL(&MYPCT = J);
 @WRITE('DIRECTORY BLOCKS = &MYCNT, PERCENT DIRECTORY USED = &MYPCT');
 DA18DDN=DA08DDN;
 @FREE(DA);
 END;
