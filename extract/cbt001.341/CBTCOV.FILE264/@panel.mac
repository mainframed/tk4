 /* @PANEL */
 %NOPRINT;
         % DCL @PANEL ENTRY;
 % @PANEL:  PROC(P1,P2) STATEMENT RETURNS(CHAR);
 /*
0*$.HE GENERALIZED SUBROUTINES - @PANEL
0*$.HE PLI PREPROCESSOR TEXT
0*$.HE FULLSCR SUPPORT FOR PLI UNDER TSO
0*$.PL 55
0*$.PN 0
0*$.PA
0*$.SS
0*$.NF
0*$06/21/77
0*$AUTHOR:  T. SMITH
0*$SOURCE MODULE NAME:  @PANEL
0*$DOCUMENTATION ID:  0*$
0*$.FI L
0*$.SP 5
0*$THIS PLI PREPROCESSOR MACRO IS PART OF A PACKAGE TO PROVIDE
0*$3277 FULL SCREEN CAPABILITIES FOR PLI PROGRAMS UNDER TSO.
0*$THIS MACRO, IN CONJUNCTION WITH THE @FIELD AND @ENDPNL MACROS
0*$ARE USED TO DEFINE EACH PANEL OR SCREEN OF DATA YOU WANT DISPLAYED
0*$ON THE 3270.  THERE IS ONE @PANEL MACRO FOR EACH SCREEN DEFINITION,
0*$AND IT SHOULD BE THE FIRST MACRO SPECIFIED.  FORMAT IS AS FOLLOWS:
0*$.SP 1
0*$.IN 5
0*$@PANEL(NAME,CURSOR(ROW,COLUMN));
0*$.IN 0
0*$WHERE NAME IS THE NAME YOU MAY USE TO SUBSEQUENTLY REFERENCE DATA
0*$PERTAINING TO THIS PANEL OR SCREEN.  THE CURSOR KEYWORD IS OPTIONAL
0*$AND SPECIFIES THE LOCATION WHERE THE CURSOR IS TO BE PLACED WHEN
0*$THIS PANEL IS WRITTEN TO THE SCREEN.  IF THE CURSOR KEYWORD IS NOT
0*$SPECIFIED, THE DEFAULT LOCATION IS ROW 1, COLUMN 1.
0*$.SP 1
0*$NOTE:  THE STATEMENT "% INCLUDE @FULLSCR;" SHOULD BE
0*$PLACED AT THE FRONT OF YOUR PROGRAM, UNLESS YOU ARE ALSO USING
0*$THE PLIST FACILITY (% INCLUDE CPINIT), WHICH WHICH CASE YOU
0*$SHOULD USE "% INCLUDE @FULLSCP;" INSTEAD.
 */
         DCL (P1,P2) CHAR;
         DCL (ROW,COL,L,I,SBA) FIXED;
         DCL (STR,SBAC) CHAR;
         @@PNLNAME = P1;
         @@INOFF = 0;
         @@OUTOFF = 0;
         @@FLDNUM = 0;
         @@INCNT = 0;
         @@INDYN = '';
         @@OUTDYN = '';
         @@PNLLEN = 24;
         IF P2 = ''
              THEN SBA = 0;
              ELSE DO;
                   L = LENGTH(P2)-8;
                   STR = SUBSTR(P2,8,L);
                   I = INDEX(STR,',');
                   ROW = SUBSTR(STR,1,I-1);
                   COL = SUBSTR(STR,I+1);
                   SBA = (ROW-1)*@COLS + COL-1;
                   END;
         SBAC = @CONSBA(SBA);
         @@PNLNUM = @@PNLNUM + 1;
         @@PNLDYN = '';
         @@PNLSTA = '';
         @@PNLSTR = '';
         @@SBASAV=
          ', 3 @CURSBA BIT(16) '××
          'INIT('××SBAC××'), 3 @CURSBAB FIXED BIN(15,0) INIT('××
          SBA;
         RETURN('');
         % END @PANEL;
 %PRINT;
