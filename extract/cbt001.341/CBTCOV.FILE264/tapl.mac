  /* TAPL */
  % INCLUDE CPINIT1;
  % @CMP ='O';
  % INCLUDE CPINIT2;
  % INCLUDE IKJPSCB;
  DCL PLIRETC BUILTIN;
  DCL 1 MYBUF UNALIGNED,
    2 LEN FIXED BIN(15,0), /* TOTAL LENGTH OF BUF */
    2 OFF FIXED BIN(15,0), /* OFFSET TO DATA */
    2 DATA CHAR(256);
  DCL 1 CBUF UNALIGNED BASED(CPPLCBUF),
    2 LEN FIXED BIN(15,0),
    2 OFF FIXED BIN(15,0),
    2 DATA CHAR(256);
  DCL SYSCMD ENTRY;
  DCL IL FIXED BIN(15,0),
      ILD BIT(16) DEF IL;
  DCL OLDPSCB PTR;
  OLDPSCB=CPPLPSCB;
  ALLOCATE PSCB SET(CPPLPSCB);
  CPPLPSCB->PSCB=OLDPSCB->PSCB;
  I=INDEX(SUBSTR(CBUF.DATA,CBUF.OFF+1,CBUF.LEN-4-CBUF.OFF),' ');
  IF I=0
    THEN I=CBUF.LEN-3;
    ELSE I=I+CBUF.OFF;
  /* I NOW EQUALS OFFSET TO BLANK AFTER UID IN CBUF */
  IL=I-CBUF.OFF+1;
  PSCBUSER=SUBSTR(CBUF.DATA,CBUF.OFF+1,IL);
  PSCBUSRL=SUBSTR(ILD,9);
  NL=CBUF.LEN-4-I;
  MYBUF.DATA='APL '××SUBSTR(CBUF.DATA,I+1,NL);
  MYBUF.LEN=NL+4;
  MYBUF.OFF=0;
  CPPLCBUF=ADDR(MYBUF);
  CALL SYSCMD(CPPL,IKJRET);
  CALL PLIRETC(SYMA('&LASTCC'));
  END;
