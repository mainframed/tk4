 /* COPYRIGHT 1983 BY THOMAS GLEN SMITH */
 /* DENTDSN */
 /* THIS SUBROUTINE IS CALLED TO SET THE COMMAND LINE TO CONTAIN THE
 CURRENT OUTPUT DSNAME AND SYMBOLIC NAME ASSOCIATED WITH THIS DATA
 SET. */
 DENTDSN: PROC(RHPTR,RHHDRPT,DATA,LEN) OPTIONS(REENTRANT);
   % DCL @PROCNAME CHAR;
   % @PROCNAME = 'MAIN';
   % INCLUDE DENTSUB;
   % INCLUDE @HEXCHAR;
   DCL (NULL,LOW) BUILTIN;
   DCL SUFFIX ENTRY(CHAR(*),CHAR(*))
     RETURNS(FIXED BIN(15,0));
   DCL MYDATA CHAR(132) VAR;
   DCL DATA CHAR(*) VAR;
   DCL LEN FIXED BIN(15,0) UNALIGNED; /* MAX LENGTH FOR DATA */
   MYDATA=@HEXCHAR(6A);
   IF RHNAME^='====>'
     THEN MYDATA=MYDATA××SUBSTR(RHNAME,1,SUFFIX(RHNAME,' '));
   MYDATA=MYDATA××@HEXCHAR(6A);
   IF OUTDDN^=NULL
     THEN DO;
       MYDATA=MYDATA××OUTDDN->ALCDSN;
       IF OUTDDN->ALCMEM^=''
         THEN MYDATA=MYDATA××'('××SUBSTR(OUTDDN->ALCMEM,1,
           SUFFIX(OUTDDN->ALCMEM,' '))××')';
       END;
   L=LENGTH(MYDATA);
   I=LENGTH(DATA);
   IF L<=LEN-I
     THEN DATA=DATA××LOW(LEN-I-L)××MYDATA;
   END DENTDSN;
