 /* FORMOUT */
 % INCLUDE CPINIT;
 DCL MYDSN CHAR(44) VARYING;
 DCL (MYFORM,MYOFF,MYUCS,MYCHARS,MYJOBC,MYFCB,MYBURST,MYAT)
   CHAR(40) VARYING;
 @PROC(1,DSN#(DSNAME),SYSOUT(A),AT(LOCAL),TEMP(F1234567),PC(PS),
   COPY(3),FORM(),OFF(8),UCS(TN),CHARS(TN),JOBCARD(JOBCARD),
   FCB(KF02),NOBURST);
 MYAT = SYMC('&AT');
 MYDSN=SETDSN@(DSN);
 @SETL(&MYDSN=MYDSN);
 MYFORM=SYMC('&FORM');
 IF MYFORM = '' & MYAT = 'LOCAL'
   THEN MYFORM = '0095';
 IF MYFORM^=''
   THEN MYFORM='FORM('××MYFORM××')';
 @SETL(&MYFORM=MYFORM);
 MYJOBC=SYMC('&JOBCARD');
 IF MYJOBC^=''
   THEN MYJOBC='JOBC('××MYJOBC××')';
 @SETL(&MYJOBC=MYJOBC);
 IF NOBURST = 0
   THEN @SETL(&MYBURST='BURST');
 MYFCB=SYMC('&FCB');
 IF MYFCB^=''
   THEN MYFCB='FCB('××MYFCB××')';
 @SETL(&MYFCB=MYFCB);
 IF MYAT ^= 'LOCAL'
   THEN MYUCS = '';
   ELSE DO;
     MYUCS=SYMC('&UCS');
     IF MYUCS^=''
       THEN MYUCS='UCS('××MYUCS××')';
     END;
 @SETL(&MYUCS=MYUCS);
 IF MYAT ^= 'LOCAL'
   THEN MYCHARS = '';
   ELSE DO;
     MYCHARS=SYMC('&CHARS');
     IF MYCHARS^=''
       THEN MYCHARS='CHAR('××MYCHARS××')';
     END;
 @SETL(&MYCHARS=MYCHARS);
 MYOFF=SYMC('&OFF');
 IF MYOFF^=''
   THEN MYOFF='OFF('××MYOFF××')';
 @SETL(&MYOFF=MYOFF);
 IF MYFORM^=''
   THEN IF SYMC('&SYSOUT')='A'
     THEN IF MYAT = 'LOCAL'
       THEN DO;
         @SETL(&SYSOUT='G');
         END;
       ELSE DO;
         @SETL(&SYSOUT='C');
         END;
 @CMD('FORMAT ''&MYDSN'' PRINT(&TEMP,&PC)');
 @CMD('FREE DA(&TEMP..LIST)');
 @CMD('PRNT &TEMP..LIST A(&AT) CO(&COPY) D(DELETE) &MYFORM &MYOFF SYSOUT
 (&SYSOUT) &MYUCS &MYCHARS &MYJOBC &MYFCB &MYBURST');
 END;
