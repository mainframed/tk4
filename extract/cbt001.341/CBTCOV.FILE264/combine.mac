 /* COMBINE
0*$.HE GENERALIZED UTILITIES - COMBINE
0*$.HE REPLACE SEQUENCE IN 73-80
0*$.PL 55
0*$.PN 0
0*$.PA
0*$.SS
0*$.NF
0*$6/19/74
0*$AUTHOR:  T. SMITH
0*$SOURCE MODULE NAME:  COMBINE
0*$DOCUMENTATION ID:  0*$
0*$.FI L
0*$.SP 5
0*$THE COMBINE UTILITY PROGRAM CAN BE USED TO PROCESS A TSO OR CRJE
0*$NUMBERED DATA TO REPLACE SEQUENCE NUMBERS IN 73-80 WITH VALUES YOU
0*$SPECIFY BEFORE THE DATA SET IS PROCESSED BY AN APPLICATION PROGRAM.
0*$.SP 1
0*$FOR EXAMPLE, SUPPOSE YOU WANTED TO CREATE A DATA SET UNDER TSO/CRJE
0*$WHICH WILL EVENTUALLY BE SUPPLIED TO THE IEBUPDTE UTILITY PROGRAM AS
0*$THE SYSIN DATA SET.  THIS DATA SET IS TO CONSIST OF IEBUPDTE CONTROL
0*$STATEMENTS AND THE NECESSARY DATA STATEMENTS TO MODIFY A MEMBER
0*$OF THE PROCEDURE LIBRARY.  SINCE THE IEBUPDTE UTILITY NORMALLY
0*$REQUIRES SEQUENCE NUMBERS IN COLUMNS 73-80 OF THE INCOMING DATA
0*$STATEMENTS TO IDENTIFY WHERE THEY ARE TO BE INSERTED IN THE
0*$SOURCE TO BE MODIFIED, NONUM WOULD NORMALLY HAVE TO BE USED BY
0*$THE TSO/CRJE USER.  THIS MAKES THE EDITING OF THE DATA SET MORE
0*$CUMBERSOME.  HOWEVER, IF HE CREATED THE JOB CONTROL AND IEBUPDTE
0*$CONTROL STATEMENTS AS FOLLOWS, HE COULD STILL USE THE NUM OPTION
0*$TO EDIT THE DATA SET:
0*$.SP 1
0*$.IN 5
0*$.NF
0*$//TS400DTE JOB MSGLEVEL=1
0*$// EXEC PGM=COMBINE,REGION=80K
0*$//SYSPRINT DD SYSOUT=A
0*$//OUT DD DSN=&DTE,DISP=(NEW,PASS),
0*$// SPACE=(TRK,(1,1)),
0*$// VOL=REF=SYS1.WORK1
0*$//IN DD *
0*$.LI
0*$./ CHANGE NAME=USERPROC,LIST=ALL
0*$XXXXXXXX
0*$HI
0*$00001000
0*$DIDDLE
0*$00001010
0*$DIDDLE,
0*$00001020
0*$/*
0*$// EXEC PGM=IEBUPDTE,REGION=80K
0*$//SYSPRINT DD SYSOUT=A
0*$//SYSUT1 DD DSN=PROCLIB,DISP=SHR
0*$//SYSUT2 DD DSN=PROCLIB,DISP=SHR
0*$//SYSIN DD DSN=&DTE,DISP=(OLD,DELETE)
0*$.SP 1
0*$.IN 0
0*$.FI L
0*$IN THE ABOVE EXAMPLE, THE COMBINE UTILITY PROGRAM WOULD PROCESS
0*$EACH PAIR OF RECORDS IN THE IN DATA SET, INSERTING COLUMNS 1-8
0*$FROM THE SECOND RECORD IN EACH PAIR TO COLUMNS 70-80 OF THE
0*$FIRST RECORD, AND WRITING THE COMBINED RECORD TO THE FILE CALLED
0*$OUT.
0*$.SP 1
0*$NOTE: OUT HAS A BLKSIZE OF 800.
 */
 MERGE.. PROC OPTIONS(MAIN),.
 DCL (CD1,CD2) CHAR(80),.
 ON ENDFILE(IN) GO TO EOJ,.
 DCL OUT FILE RECORD OUTPUT ENV(F(800,80)),.
 NXT..
 READ FILE(IN) INTO (CD1),.
 READ FILE(IN) INTO (CD2),.
 SUBSTR(CD1,73,8) = SUBSTR(CD2,1,8),.
 WRITE FILE(OUT) FROM(CD1),.
 GO TO NXT,.
 EOJ..
 END,.
