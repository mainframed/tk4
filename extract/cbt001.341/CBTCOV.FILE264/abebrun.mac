$* ABEBRUN IS RUN AGAINST ABEBIN TO PRODUCE THE SUBCOMMAND ENTRY
$* POINT TABLE, MODULE ABEB.  SHOULD BE RUN IMMEDIATELY AFTER ENTERING
$* ABE, SO TEMPORARY DATASETS AREN'T DUPLICATED.
$*
$* EDIT NECESSARY MODULES
 ABE ABE.PLI(ABEBIN)
 ABE ABE.PLI(ABEB)
 A ABEB DEL
 ABE ABE.PLI(ABEBTAB)
 A ABEBTAB DEL
$* INITIALIZE CHARACTER CONSTANTS
 SETL AAA *
 SETL BBB ' '
$* FIRST BUILD THE SKELETON MODULE IN ABEB
 A ABEBIN F 'START OF SOURCE CODE' 1 MARK(1)
 A ABEBIN F 'END OF SOURCE CODE' 1 MARK(2)
 A ABEBIN 1M+1 2M-1 CO ABEB
$* NOW BUILD ENTRY DECLARATIONS
 A ABEBIN 2M+1 B F ' ' 1 NOT ALL NAME(EEE)
 A EEE 1.1 DEL *
 A EEE F NOFETCH NOT ALL NAME(DOF)
 A EEE CO CCC
 A EEE SNO ANCHOR PAD BREAK(' ') $ NAME RTAB(0) = +
  ' DCL ' NAME ' ENTRY(FIXED BIN(15,0),CHAR(*) VAR,PTR,PTR,PTR);'
 A ABEB F 'ENTRY DECLARATIONS GO HERE'
 A EEE CO (ABEB *)
 A EEE END N
$* NOW BUILD FETCH STATEMENTS
 A DOF F NORELEASE NOT ALL NAME(DOR)
 A DOF SNO ANCHOR PAD BREAK(' ') $ NAME RTAB(0) = ' FETCH ' NAME ';'
 A ABEB F 'FETCH STATEMENTS GO HERE'
 A DOF CO (ABEB *)
 A DOF END N
$* NOW BUILD RELEASE STATEMENTS
 A DOR SNO ANCHOR PAD BREAK(' ') $ NAME RTAB(0) = '  RELEASE ' NAME ';'
 A ABEB F 'RELEASE STATEMENTS GO HERE'
 A DOR CO (ABEB *)
 A DOR END N
$* NOW BUILD CALL STATEMENTS
 A CCC SNO ANCHOR PAD 'ABE' BREAK(' ') $ NUM RTAB(0) = +
  ' WHEN(' NUM ') CALL ABE' NUM '(J,CMDBUF,RHPTR,RHHDRPT,LRNPTR);'
 A ABEB F 'CALL STATEMENTS GO HERE'
 A CCC CO (ABEB *)
 A CCC END N
$* NOW BUILD ABEBTAB ASSEMBLER MODULE
 A ABEBIN 2M+1 B CO TABLE
 A TABLE C NORELEASE ''
 A TABLE C NOFETCH ''
 CALC MODNO#SUBNO#UNQNO#0
 $DATA TABLE
   $IF (WWW#(1=VERIFY(TABLE,BBB)))
     CALC MODNO#&SUBSTR(TABLE,4)
  CALC NUM#1000*MODNO+(SUBNO#1+SUBNO*^WWW)
  SETL &TABLE &NUM '' '' POOL
 A TABLE DEL
 A TABLE POOL POOL
 A TABLE USE FIXED NAME $ 1-9 LCHILD $ 10-18 RCHILD $ 19-27 ID 28-42
 SELECT NAME,LCHILD,RCHILD,FIXED(ID/1000),MOD(ID,1000) +
  RENAME EXP1=MODNO,EXP2=SUBNO +
  FROM TABLE TO ABEBTAB
 A TABLE END N
 A ABEBTAB UPDATE SET LCHILD='.' WHERE LCHILD=''
 A ABEBTAB UPDATE SET RCHILD='.' WHERE RCHILD=''
 A ABEBTAB USE ×
 A ABEBTAB SNO ANCHOR TRIM PAD BREAK(' ') $ NAME SPAN(' ') +
  BREAK(' ') $ LCHILD SPAN(' ') +
  BREAK(' ') $ RCHILD SPAN(' ') +
  BREAK(' ') $ MODNO  SPAN(' ') +
  BREAK(' ') $ SUBNO RTAB(0) = +
  NAME ' DC A(' LCHILD '),A(' RCHILD '),CL8''' NAME ''',H''' MODNO +
  ''',H''' SUBNO ''''
 A ABEBTAB COLADJ
 A ABEBTAB C 'A(.)' 'X''FF000000'''
 A ABEBTAB 0 BL 5
 A ABEBTAB T   SUBSTR 'ABEBTAB CSECT'
 A ABEBTAB T+1 SUBSTR '* ASSEMBLE WITH -'
 A ABEBTAB T+2 SUBSTR '*   %ASM ABE.PLI(ABEBTAB) NAME(ABEBTAB)'
 A ABEBTAB T+3 SUBSTR '*   COPY ABEBTAB.OBJ ABE.OBJ(ABEBTAB)'
 A ABEBTAB T+4 SUBSTR '*   COPY ABEBTAB.OBJ ABECK.OBJ(ABEBTAB)'
 A ABEBTAB B BL 1
 A ABEBTAB B SUBSTR ' END'
