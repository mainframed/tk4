 /* SCRMEMB
0*$.HE GENERALIZED UTILITIES - SCRMEMB
0*$.HE SCRMEMB UTILITY PROGRAM - SCRATCH PDS MEMBERS
0*$.PL 55
0*$.PN 0
0*$.PA
0*$.SS
0*$.NF
0*$6/7/74
0*$AUTHOR:  T. SMITH
0*$SOURCE MODULE NAME:  SCRMEMB
0*$DOCUMENTATION ID:  0*$
0*$.FI L
0*$.SP 5
0*$THE SCRMEMB UTILITY PROGRAM WILL DELETE ONE OR MORE MEMBERS
0*$FROM A PARTITIONED DATA SET AS SPECIFIED BY THE USER.
0*$.SP 1
0*$.NF
0*$// EXEC PGM=SCRMEMB,PARM='MEMBER1'
0*$//SYSPRINT DD SYSOUT=A
0*$//SYSLIB DD DSN=PDSNAME,DISP=OLD
0*$//SYSIN DD *
0*$'MEMBER2' 'MEMBER3' :. 'MEMBERN'
0*$/*
0*$.FI L
0*$.SP 1
0*$THE FIRST OR ONLY MEMBER NAME TO BE DELETED IS OPTIONALLY
0*$SPECIFIED IN THE PARM FIELD ON THE EXEC STATEMENT.
0*$NOTE HOWEVER, THAT IT COULD HAVE BEEN SPECIFIED IN
0*$THE SYSIN DATA SET ALONG WITH THE REST OF THE MEMBER
0*$NAMES TO BE DELETED.
0*$MEMBER NAMES SPECIFIED IN THE SYSIN DATA SET MUST EACH
0*$BE ENCLOSED IN QUOTES, AND SEPARATED BY ONE OR MORE BLANKS.  THE
0*$LIST OF MEMBER NAMES TO BE DELETED MAY BE CONTINUED ON AS MANY
0*$CARDS AS NEEDED.
0*$.SP 1
0*$NOTE:  COLUMNS 73-80 OF THE SYSIN RECORDS MUST NOT CONTAIN
0*$SEQUENCE NUMBERS SUCH AS WOULD BE PLACED THERE ON A TSO
0*$OR CRJE NUMBERED DATA SET.
0*$.SP 1
0*$EXAMPLE 1
0*$.SP 1
0*$.NF
0*$// EXEC PGM=SCRMEMB,PARM='TEMPNAME'
0*$//SYSPRINT DD SYSOUT=A
0*$//SYSLIB DD DSN=SYS1.LINKLIB,DISP=OLD
0*$.SP 1
0*$.FI L
0*$AFTER THE ABOVE STEP HAS EXECUTED, MEMBER NAMED TEMPNAME WILL
0*$HAVE BEEN DELETED FROM DATA SET SYS1.LINKLIB.
0*$.SP 1
0*$EXAMPLE 2
0*$.SP 1
0*$.NF
0*$// EXEC PGM=SCRMEMB
0*$//SYSPRINT DD SYSOUT=A
0*$//SYSLIB DD DSN=SYS1.LINKLIB,DISP=OLD
0*$//SYSIN DD *
0*$'PROGRAMA' 'PROGRAMB'
0*$'PROGRAMC'
0*$/*
0*$.FI L
0*$.SP 1
0*$AFTER THE ABOVE STEP HAS EXECUTED, MEMBERS NAMED PROGRAMA,
0*$PROGRAMB, AND PROGRAMC WILL HAVE BEEN DELETED FROM
0*$SYS1.LINKLIB.
 ************************************/
 SCRMEMB: PROC (PARM) OPTIONS(MAIN);
 DCL PARM CHAR(100) VARYING;
 DCL 1 BLDLIST STATIC,
 2 BLDL FIXED BIN(15,0) INIT(1),
 2 LGTH FIXED BIN(15,0) INIT(42),
 2 NAME CHAR(8) INIT(' '),
 2 ENTRY CHAR(58);
 DCL (BLDLPTR,DCBPTR) PTR;
 BLDLPTR = ADDR(BLDLIST);
 CALL SYSDCBP(DCBPTR,'SYSLIB');
 CALL SYSOPEN(DCBPTR,'UPDAT');
 ON ENDFILE(SYSIN) GO TO EOJ;
 DCL N FIXED BIN(31,0);
 PUT PAGE;
 DCL ((NXFIRST,NXLAST) BIT(1),
 DDNAME CHAR(8)) EXTERNAL;
 NXFIRST = '1'B;
 NXLAST = '0'B;
 DCL INSW BIT(1) INIT('0'B);
 DO WHILE(NXLAST = '0'B);
 CALL D10201C;
 IF DDNAME='SYSIN' THEN INSW = '1'B;
 END;
 NAME = PARM;
 IF NAME NE ' ' THEN GO TO DELET;
 IF INSW = '0'B THEN GO TO EOJ;
 NEXT:
 GET LIST(NAME);
 DELET:
 PUT EDIT('MEMBER',NAME) (A,X(1),A);
 CALL SYSBLDL(DCBPTR,BLDLPTR,N);
 IF N = 0 THEN CALL SYSSTOW(DCBPTR,NAME,'D',N);
 IF N = 0 THEN PUT EDIT(' DELETED')(A);
 ELSE PUT EDIT(' NOT DELETED')(A);
 PUT SKIP;
 IF INSW = '1'B THEN GO TO NEXT;
 EOJ:
 END;
