 /* SASBIGI */
 SASBIGI: PROC OPTIONS(MAIN);
   %DCL (@CMDI,@SETBUFI,@LISTSW) CHAR;
   %@LISTSW='N';
   %INCLUDE @CMD,@SETBUF;
   %INCLUDE IKJCPPL;
   DFT RANGE(*) FIXED BIN VALUE(FIXED BIN(31,0));
   DCL PTRIN ENTRY(PTR)
     RETURNS(FIXED BIN(31,0));
   DCL PTROUT ENTRY(FIXED BIN(31,0))
     RETURNS(PTR);
   DCL (REP@,SETCAPS,SYSCMD) ENTRY;
   DCL GETCMD ENTRY(PTR,PTR,CHAR(80) VAR,FIXED BIN(31,0))
     RETURNS(CHAR(256) VAR);
   DCL STACK ENTRY;
   DCL IOECB FIXED BIN(31,0) INIT(0);
   DCL 1 BUFFER@,
     2 BUFLEN@ FIXED BIN(15,0),
     2 BUFOFF@ FIXED BIN(15,0) INIT(0),
     2 BUFSTR@ CHAR(256);
   DCL WP PTR BASED(DP);
   DCL WRKSTR CHAR(256) BASED(WRKPTR);
   DCL (TCB,JSCB,RLGB) PTR;
   DCL IKJRET FIXED BIN(31,0);
   DCL PRMPT CHAR(80) VAR INIT('YES MASTER?');
   DCL CMDSTR CHAR(256) VAR INIT('');
   TCB=PTROUT(540)->WP;
   JSCB=PTROUT(PTRIN(TCB)+180)->WP;
   CPPLPSCB=PTROUT(PTRIN(JSCB)+264)->WP;
   CPPLUPT=PTROUT(PTRIN(CPPLPSCB)+52)->WP;
   RLGB=PTROUT(PTRIN(CPPLPSCB)+48)->WP;
   CPPLECT=PTROUT(PTRIN(RLGB)+256)->WP;
   CALL STACK(CPPLUPT,CPPLECT,IOECB,IKJRET,'TERM');
   DO FOREVER=1 REPEAT FOREVER;
     CMDSTR=GETCMD(CPPLUPT,CPPLECT,PRMPT,IKJRET);
     CALL SETCAPS(CMDSTR);
     IF CMDSTR = 'END IDLE'
       THEN RETURN;
     @CMD(CMDSTR,MF=S);
     END;
   CALL STACK(CPPLUPT,CPPLECT,IOECB,IKJRET,'TOP');
   END SASBIGI;
