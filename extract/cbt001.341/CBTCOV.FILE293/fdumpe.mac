&TRACE OFF
&IF &INDEX = 1 &IF &1 = ? &GOTO -EXP
&IF &INDEX > 0 &IF &1 = T &0 = FDUMPT
&IF &INDEX > 0 &IF &1 = T &ARGS &2 &3 &4 &5 &6 &7 &8 &9
&IF &INDEX = 0 &ARGS SYS1 PROCLIB
&FN = &1
&IF &INDEX = 1 &FT = DATASET
&P = &LOCATION OF ( &ARGSTRING
&IF &P > 0 &P = &P - 1
&IF &P = 0 &P = *
&DSN = &SUBSTR OF &ARGSTRING 1 &P
&L = &LOCATION OF MEMBER &ARGSTRING
&IF &L > 0 &GOTO -MEM
&IF &INDEX = 2 &FT = &2
&IF &INDEX GT 2 &FN = &CONCAT OF &1 &2
&IF &INDEX GT 2 &FT = &3
&GOTO -FILEDF
*
-MEM
&MEMBER = MEMBER
&IF &INDEX NE 5 &SKIP 4
&FN = &SUBSTR OF &FN 1 3
&SUB = &SUBSTR OF &2 1 3
&FN = &CONCAT OF &FN $ &SUB
&GOTO -MEM1
*
&IF &INDEX NE 6 &SKIP 5
&FN = &SUBSTR OF &FN 1 2
&SUB = &SUBSTR OF &2 1 2
&SUB2 = &SUBSTR OF &3 1 2
&FN = &CONCAT OF &FN $ &SUB $ &SUB2
&GOTO -MEM1
*
&IF &INDEX NE 7 &SKIP 6
&FN = &SUBSTR OF &FN 1 1
&SUB = &SUBSTR OF &2 1 1
&SUB2 = &SUBSTR OF &3 1 1
&SUB3 = &SUBSTR OF &4 1 1
&FN = &CONCAT OF &FN $ &SUB $ &SUB2 $ &SUB3
&GOTO -MEM1
*
-MEM1
&IF &INDEX GT 2 &IF &3 =  MEMBER &MEMBER = &4
&IF &INDEX GT 3 &IF &4 =  MEMBER &MEMBER = &5
&IF &INDEX GT 4 &IF &5 =  MEMBER &MEMBER = &6
&IF &INDEX GT 5 &IF &6 =  MEMBER &MEMBER = &7
&IF &INDEX GT 6 &IF &7 =  MEMBER &MEMBER = &8
&IF &INDEX GT 7 &IF &8 =  MEMBER &MEMBER = &9
*
&IF .&MEMBER NE . &FT = &MEMBER
*
-FILEDF
&TYPE ENTER DATASET QUALIFIER1 QUALIFIER2 ...
&READ ARGS
FI INDCB DISK &FN &FT L DSN  &1 &2 &3 &4 &5 &6 &7 &8 &9
&IF &0 = FDUMP  FI OUTDCB DISK FILEDUMP LISTING A3
&IF &0 = FDUMPT FI OUTDCB TERM (LRECL 121 BLKSIZE 4235 RECFM FBA
&IF &0 = FDUMPP FI OUTDCB PRINTER
SET CMSTYPE HT
STATE &FN &FT
&RCS = &RC
SET CMSTYPE RT
&IF &RCS EQ 0 &SKIP 2
&TYPE DATA SET NOT FOUND OR DISK NOT ACCESSED
&GOTO -EXIT
&TYPE ENTER SKIP PRINT INPUT
&READ VARS &SKIPP &PRINT &INPUT
&IF .&SKIPP EQ . &GOTO -EXIT
&IF .&PRINT NE . &SKIP 2
&PRINT = &SKIPP
&SKIPP = 0
&IF &PRINT = 0 &GOTO -EXIT
&IF .&INPUT EQ . &INPUT = EBCDIC
&SKIPP = &RIGHT OF 00000000&SKIPP 8
&PRINT = &RIGHT OF 00000000&PRINT 7
-DOIT
&S1 = &MULT OF &SKIPP 1
&P1 = &MULT OF &PRINT 1
&TYPE FILEDUMP ON DATASET &1 &2 &3 &4 &5 &6 &7 &8 &9 -- SKIP= &S1 , PRIN
&IF &0 ^= FDUMPT CP SPOOL CONS NOTERM
FDUMP &SKIPP ,&PRINT ,&INPUT
CP SPOOL CONS   TERM
&IF &0 ^= FDUMP &GOTO -TYPIT
XEDIT FILEDUMP LISTING
&SKIP 2
-TYPIT
FI INDCB CLEAR
FI OUTDCB CLEAR
-EXIT
&EXIT
-EXP
&BEGTYPE -END
FDUMP IS THE CMS VERSION OF THE PROGRAM FILEDUMP. FDUMP SETS UP THE PARA
FOR THE FILEDUMP PROGRAM AND BALR'S TO IT. THE PROPER FORM IS :
          FDUMP QUAL1 QUAL2 QUAL3 ...

WHERE QUALN IS THE NTH QUALIFIER OF THE DATASET TO BE DUMPED. A PROMPT W
BE GIVEN FOR # OF BLOCKS TO BE PRINTED AND # OF BLOCKS TO BE SKIPPED.
AN EXAMPLE FOLLOWS.

* FDUMP PSCC DISPLAYS
  ENTER PRINT SKIP
* 20 150
  FILEDUMP ON PSCC DISPLAYS -- SKIP= 150 , PRINT= 20
  FDUMP 00150,20

(AT THIS POINT A FILE CALLED FILEDUMP LISTING A3 WILL BE CREATED AND EDI
 IF FDUMPT IS DEFINED AS A SYNONYM AND IS USED IN PLACE OF FDUMP THE OUT
 WILL BE TO THE TERMINAL )
(* DENOTES USER ENTRY )

NOTE : DIRECT ACCESS DATASETS CANNOT BE FDUMPED.
NOTE : THE DATASET INVOLVED MUST BE ON AN ACCESSED DISK.
-END
