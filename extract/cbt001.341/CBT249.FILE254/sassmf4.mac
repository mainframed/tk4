
*-------------RETRIEVING SMF TYPE 4 RECORDS (END-OF-STEP)----------*
* FOR EACH PROGRAM EXECUTED, FIND THE FREQUENCY OF USE, AVERAGE    *
* RUN TIME, CORE USE, AND PAGING.                                  *
*------------------------------------------------------------------*;
                       *THIS EXAMPLE HAS NOT BEEN TESTED;

DATA PROGS;
   INFILE SMFTAPE;
   INPUT  @2 TYPE PIB1.;  *SMF RECORD TYPE;
   IF TYPE^=4 THEN DELETE;
   INPUT @3   TIMEOUT PIB4. DATEOUT PD4.
         @40  TIMEIN  PIB4. DATEIN  PD4.
         @52  CCODE   PIB2.
         @55  PROGNAME $8.
         @73  REGION  PIB2.
         @101 COLREL PIB2. DEVLEN PIB2.
         @103 +DEVLEN +1 CPUTIME PIB3.
         @COLREL +1 (PAGEINS PAGEOUTS) (PIB4.) ;
   ELAPSED=((DATEOUT-DATEIN)*8640000 + (TIMEOUT-TIMEIN))/100;*SECONDS;
   KEEP PROGNAME CCODE REGION CPUTIME ELAPSED PAGEINS PAGEOUTS;
PROC FREQ; TABLES PROGNAME;
PROC SORT; BY PROGNAME;
PROC MEANS; BY PROGNAME;
   VAR REGION CPUTIME ELAPSED PAGEINS PAGEOUTS;
   OUTPUT OUT=STATS
          MEAN=REGION CPUTIME ELAPSED PAGEINS PAGEOUTS
          N=COUNT;
PROC PRINT;
