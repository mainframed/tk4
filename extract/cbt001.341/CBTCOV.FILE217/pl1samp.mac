//PL1LFCLG PROC CR=300K,LR=450K,GR=700K
//*-------------------------------------------------------------------*
//PL1L     EXEC  PGM=IEMAA,PARM='LOAD,NODECK',REGION=&CR
//STEPLIB  DD DSN=JDMARSH.SHARE.PL1FXA,DISP=SHR
//SYSPRINT DD SYSOUT=*
//SYSLIN   DD DSN=&&LOADSET,UNIT=SYSDA,DISP=(MOD,PASS),
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=3200),
//            SPACE=(CYL,(2,1))
//SYSUT3   DD DSNAME=&&SYSUT3,UNIT=SYSDA,SPACE=(CYL,(4,1))
//SYSUT1   DD DSN=&&SYSUT1,UNIT=(SYSDA,SEP=(SYSUT3,SYSLIN)),
//            SPACE=(1024,(60,60),,CONTIG),DCB=BLKSIZE=1024
//SYSPUNCH DD DUMMY
//*-------------------------------------------------------------------*
//LKED     EXEC  PGM=IEWL,PARM='XREF,LIST',COND=(9,LT,PL1L),
//         REGION=&LR
//SYSLIB   DD DSN=JDMARSH.SHARE.PL1FXA,DISP=SHR
//SYSLMOD  DD DSN=&&GOSET(GO),DISP=(MOD,PASS),UNIT=SYSDA,
//            SPACE=(CYL,(4,,16))
//SYSUT1   DD DSNAME=&&SYSUT1,UNIT=SYSDA,SPACE=(1024,(200,20)),
//            DCB=BLKSIZE=1024
//SYSPRINT DD SYSOUT=*
//SYSLIN   DD DSN=&&LOADSET,DISP=(OLD,DELETE)
//         DD DDNAME=SYSIN
//*-------------------------------------------------------------------*
//GO       EXEC PGM=*.LKED.SYSLMOD,COND=((9,LT,LKED),(9,LT,PL1L)),
//         REGION=&GR
//GOSET    DD DSN=&&GOSET,UNIT=SYSDA,DISP=(MOD,DELETE),SPACE=(TRK,0)
//SYSPRINT DD SYSOUT=*
//         PEND
//X EXEC PL1LFCLG,PARM.PL1L='SIZE=45056,S,NL,A,X,LD,ND,SM=(2,72),EB,C',
//             PARM.LKED='LET'
//PL1L.SYSIN DD *
 IEMSP2 : PROCEDURE OPTIONS(MAIN);
 /* THIS PROGRAM TRANSFERS CARD IMAGES FROM ONE FILE TO ANOTHER.
 /* EACH IMAGE HAS A TYPE NUMBER AS FIRST CHARACTER.THE PROGRAM
 /* RECORDS THE NUMBER OF CARDS THERE ARE OF EACH TYPE. */
    DECLARE CARDS INPUT ENVIRONMENT(F(80)) ,
            BUILD OUTPUT ENVIRONMENT(F(480,80)),
          1 CARD,
          2 TYP CHAR(1),
          2 BODY CHAR(79),
            T FIXED BINARY,
            TYPE(0:9) FIXED(3) STATIC INITIAL((10) 0 );
    PUT EDIT('OUTPUT OF PL/1 SAMPLE PROGRAM')(COLUMN(45),A) PAGE;
    ON ENDFILE(CARDS) GOTO FINISH;
    ON CONVERSION BEGIN;PUT EDIT
 ('THIS CARD IGNORED BECAUSE TYPE IS NOT NUMERIC := ',CARD)(A) SKIP(2);
    GOTO LOOP; END;
 LOOP: READ FILE(CARDS) INTO(CARD);
    T=TYP;TYPE(T) = TYPE(T) + 1;
    WRITE FROM(CARD) FILE(BUILD);
    GOTO LOOP;
 FINISH: PUT DATA(TYPE) SKIP(3);
    PUT EDIT('END OF SAMPLE OUTPUT')(COLUMN(47),A) SKIP(2);
    END IEMSP2;
/*
//GO.SYSABEND  DD  SYSOUT=A
//GO.BUILD DD UNIT=SYSDA,SPACE=(480,(10,5))
//GO.CARDS DD *,DCB=BLKSIZE=80
2    FIRST OF DATA FOR PL1 SAMPLE PROGRAM
6
6 THE
8  CONTENTS
6   OF
2   THESE
4     CARDS
7      IMMATERIAL
2       SINCE
0       THEY
6        ARE
6         ONLY
6          TRANSMITTED
6           NOT
6            PRINTED
6
&       DELIBERATE DUD CARD
6
2   LAST OF SOURCE DATA FOR PL1 SAMPLE
/*
