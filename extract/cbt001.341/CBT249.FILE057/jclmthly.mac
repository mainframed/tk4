//S300T16  JOB (8203,1234),'99 RICH STEHN',CLASS=Z,MSGCLASS=W
/*SETUP
//*****
//*
//*   UPDATED 02OCT80, WILLIAM SMITH
//*   MEMOREX/SSG TECHNICAL SUPPORT
//*
//*   JCLMTHLY JOB EXECUTION GUIDELINES:
//*   ---------------------------------
//*      1.  RUN AS THE FIRST INITIAL JOB WHEN PANSPOOL IS PLACED
//*          IN A PRODUCTION STATUS - AFTER 72 HOURS OF PROCESSING
//*          SPECIFY CURRENT DAY MINUS 3 IN THE PARM FIELD AS THE
//*          DATE FOR MEMBERS TO BE ARCHIVED
//*      2.  PANDD3 MUST BE CHANGED TO 'DUMMY' SINCE NO PRIOR
//*          GENERATIONS OF PANVALET BACKUPS EXIST; NOTE THE
//*          ABSENCE OF THE CONCATENATION OF PANSPOOL.DIRECTRY
//*          IN THE 'SORTIN' DD STATEMENT - THIS IS ONLY USED DURING
//*          EXECUTION OF A DAILY RUN
//*      3.  MONTHLY ARCHIVAL TAPES WILL BE RETAINED FOR A PERIOD
//*          OF TWO (2) YEARS; THE NULLFILE WILL ALSO SERVE TO EASILY
//*          IDENTIFY MONTHLY BACKUPS
//*      4.  UPDATE THE DATASET NAME IN STEP 'MTHDIREC' TO APPROPRI-
//*          ATELY NAME THE DIRECTORY FILE TO REMAIN ON-LINE FOR TWO
//*          YEARS FOR USER BROWSING AND RETRIEVAL; WHERE MMM=MONTH,
//*          (EG. APR, FEB, ETC.), DD=DAY, YY=YEAR
//*      5.  ADDED STEP 'BACKUP' TO CREATE BACKUP GDG TAPE FILE OF
//*          PROD.PANSPOOL IN THE EVENT OF A FAILURE WHILE EXECUTING
//*          THE JCLARCH PROGRAM
//*      6.  NOTE:  JCLMTHLY SHOULD BE SCHEDULED TO RUN AFTER THE
//*          LAST DAILY ARCHIVE HAS COMPLETELY CAPTURED ALL JOBS
//*          DURING THAT TIME FRAME; PARTICULAR ATTENTION SHOULD
//*          BE GIVEN TO CORRECT DATE PARM SPECIFICATION AND A
//*          CORRECT NAME/DATE FOR THE DIRECTORY IN STEP 'MTHDIREC'
//*
//*****
//S300BGIN EXEC S300BGIN,JOB=S300T16
//*
//ANALYSIS EXEC PGM=PAN#6
//SYSPRINT  DD  SYSOUT=*
//PANDD1    DD  DISP=SHR,DSN=PROD.PANSPOOL
//PANDD2    DD  DUMMY
//PANDD3    DD  DUMMY
//SYSIN     DD  *
++ANALYSIS
/*
//CATALOG  EXEC PGM=GDGCHNGE
//PRT       DD  SYSOUT=*
//CARD      DD  *
MRX.JCLLIST,LISTENTRIES
PANSPOOL.ARCHIVE,LISTENTRIES
PANSPOOL.DIRECTRY,LISTENTRIES
/*
//TMSFIXUP EXEC PGM=IEBGENER,COND=(0,LT)
//SYSPRINT  DD  SYSOUT=*
//SYSIN     DD  DUMMY
//SYSUT2    DD  UNIT=TAPE,DSN=PANSPOOL.ARCHIVE(0),
//     DCB=(RECFM=FB,LRECL=80,BLKSIZE=8000),LABEL=(2,SL,RETPD=730),
//     DISP=(OLD,KEEP,DELETE)
//SYSUT1    DD  *
START OF NEW PERIOD - RETAIN LAST DAILY ARCHIVE OF EACH MONTH 2 YEARS
/*
//MTHDIREC EXEC PGM=IEBGENER,COND=(0,LT)
//SYSPRINT  DD  SYSOUT=*
//SYSIN     DD  DUMMY
//SYSUT1    DD  DISP=OLD,DSN=PANSPOOL.DIRECTRY(0)
//SYSUT2    DD  UNIT=3350,VOL=SER=PAG004,SPACE=(CYL,(2,1),RLSE),
//     DSN=PANSPOOL.MONTHLY.NOV0580,
//     DCB=(RECFM=FB,LRECL=121,BLKSIZE=3146),DISP=(,CATLG,DELETE)
/*
//BACKUP   EXEC PGM=FDRDSF,COND=(0,LT)
//SYSPRINT  DD  SYSOUT=*
//DISK1     DD  UNIT=3350,VOL=SER=PAG004,DISP=SHR
//TAPE1     DD  UNIT=(TAPE,,DEFER),VOL=PRIVATE,DSN=PANSPOOL.BACKUP(+1),
//      DCB=M.D,LABEL=(,SL,EXPDT=99000),DISP=(NEW,CATLG,DELETE)
//DD0       DD  DISP=SHR,DSN=PROD.PANSPOOL
//SYSIN     DD  *
 DUMP DSN=PROD.PANSPOOL
/*
//JCLMTHLY EXEC PGM=JCLARCH,PARM='/110280,MONTHLY',COND=(0,LT),
//        REGION=1024K
//SYSPRINT  DD  SYSOUT=*
//SYSUDUMP  DD  SYSOUT=*
//PL1DUMP   DD  SYSOUT=*
//PANARCH   DD  SYSOUT=*,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=1330)
//PANERRS   DD  SYSOUT=*,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=1330)
//PANDD1    DD  DISP=SHR,DSN=PROD.PANSPOOL
//PANDD2    DD  UNIT=TAPE,VOL=PRIVATE,DSN=PANSPOOL.ARCHIVE(+1),
//     DCB=M.D,LABEL=(1,SL,RETPD=45),DISP=(,CATLG,DELETE)
//PANDD3    DD  UNIT=(TAPE,,DEFER),DSN=PANSPOOL.ARCHIVE(0),DISP=OLD
//TEMPFILE  DD  UNIT=SYSDA,SPACE=(CYL,(2,1)),DSN=PANSPOOL.TEMPFILE,
//     DISP=(,KEEP)
//SYSOUT    DD  SYSOUT=*,DCB=(RECFM=FBA,LRECL=121,BLKSIZE=3146)
//SORTIN    DD  VOL=REF=*.TEMPFILE,DSN=PANSPOOL.TEMPFILE,
//     DISP=(OLD,DELETE,DELETE)
//SORTOUT   DD  UNIT=3350,VOL=SER=PAG004,SPACE=(CYL,(3,2),RLSE),
//     DSN=PANSPOOL.DIRECTRY(+1),
//     DCB=(M.D,RECFM=FB,LRECL=121,BLKSIZE=3146),DISP=(,CATLG,KEEP)
//SORTWK01  DD  UNIT=SYSDA,SPACE=(CYL,(7,3))
//SORTWK02  DD  UNIT=SYSDA,SPACE=(CYL,(7,3))
//SORTWK03  DD  UNIT=SYSDA,SPACE=(CYL,(7,3))
/*
//DELDISAB EXEC PGM=PAN#2,COND=EVEN
//SYSPRINT  DD  SYSOUT=*
//PANDD1    DD  DISP=SHR,DSN=PROD.TAPELIST
//PANDD2    DD  DUMMY
//SYSIN     DD  *
++DELETE DISABLED
++PRINT 1-UP,COMMENT
/*
//S300EOJ  EXEC S300EOJ,JOB=S300T16,COND=(0,NE)
/*
//
