SEE PRINT FILE THIS MEMBER FOR MAINTENANCE INFORMATION.
DUE TO A PROBLEM IN THE PACKAGING OF AMDPSCAN, ANYBODY WHO
HAS A PREVIOUS VERSION INSTALLED SHOULD DELETE THE LOAD
MODULE AMDPSCAN FROM LPALIB BEFORE INSTALLING AMDPSCAN. THIS
WILL AVOID A PROBLEM WITH 'DOUBLY DEFINED CSECT' - IEW024I
FROM THE LINKAGE EDITOR.
***********  N O T E  ***********
THE FOLLOWING LIST ENABLES THE PSR TO DETERMINE WHICH
VERSION OF AMDPSCAN HE SHOULD USE IN HIS SYSTEM. TO FIND
OUT WHICH PTF(S)/ZAP(S) ARE APPLICABLE, SEE THE PRINT FILE
FOR THIS MEMBER.  (ENTER - 'PRT')
 OPERATING SYSTEM.             AMDPSCAN VERSION.
MVS/NON-SE                    SCANPGM1 SUPPORT DROPPED.
MVS/SE1                       SCANPGM2 SUPPORT DROPPED.
MVS/SE2/SP1.1 - SUP'D -       SCANPGM3 (CDS SHOWS SC04000)
MVS/SP2/SP1.1 - SUP'D -       SCANPGM4 (CDS SHOWS SC05000)
MVS/SE2/SP1.1/SP1.2/SP1.3     AMDPSCAN - SUP'S SCANPGM2-4
-----------------------------------------------------------
AMDPSCAN IS A USER EXIT FOR AMDPRDMP FOR VS2 REL 3.8. IT IS
INVOKED BY USING AN AMDPRDMP CONTROL CARD WITH THE VERB
'SCAN' ON IT.
THE OBJECTIVES OF THIS EXIT:-
1.  TO CHECK VARIOUS FLAG BITS IN THE DUMP WHICH MAY HAVE
CONTRIBUTED TO THE FAILURE, BUT WOULD NOT HAVE BEEN NOTICED
BY THE PSR UNLESS HE WAS SPECIFICALLY LOOKING FOR THEM. AN
EXAMPLE OF THIS WOULD BE THE 'SQA CRITICAL' BIT IN THE GDA.
2.  CONTROL BLOCK VERIFICATION. VS2 HAS MANY QUEUES OF
CONTROL BLOCKS AND A SYMPTOM OR CAUSE OF SYSTEM FAILURE IS
FREQUENTLY AN INVALID CONTROL BLOCK OR CORRUPTED QUEUE.
SCANNING THESE CONTROL BLOCKS MANUALLY WOULD BE TOO TIME
CONSUMING TO BE PRACTICAL. AMDPSCAN SCANS MANY CONTROL
BLOCKS AND QUEUES, PRINTING ERROR MESSAGES AND LEADING THE
PSR TO THE CAUSE OF THE PROBLEM.
INSTALLATION:-
   BEFORE AMDPSCAN CAN BE USED, THE VERB 'SCAN' MUST BE
ADDED TO AMDPRDMP'S CONTROL TABLE, AMDPRECT.
THIS IS DONE AS FOLLOWS:-
1)  OBTAIN A SUPERZAP DUMP OF AMDPRECT. NORMALLY ON LINKLIB.
2)  LOCATE THE NEXT AVAILABLE ENTRY.
    AN EMPTY ENTRY LOOKS LIKE THIS........
40404040 40404040 00000000 40404040 40404040
3)  APPLY THE FOLLOWING SUPERZAP.
NAME AMDPRECT
VER XXXX 40404040 40404040 00000000 40404040 40404040
REP XXXX C1D4C4D7 E2C3C1D5 00000000 E2C3C1D5 40404040
THIS MAKES THE VERB 'SCAN' KNOWN TO AMDPRDMP.
TO USE THE DUMP SCAN FEATURE, SIMPLY CODE THE VERB 'SCAN'
IN YOUR AMDPRDMP CONTRL CARDS.
-----------------------------------------------------------
THE CSECTS IN AMDPSCAN PERFORM THE FOLLOWING FUNCTIONS.
AMDPSCAN:- ROOT CSECT...
           INITIALIZES DSECTS AND DETERMINES CERTAIN SYSTEM
           BOUNDARIES.
           PERFORMS COMMS TASK CONTROL BLOCK CHECKING.
        PRINTS ANY WQE'S STILL ON THE SYSOUT QUEUE (NOT YET
        PRINTED AT A CONSOLE.)
        PRINTS ANY OUTSTANDING ORE'S.
        CHECKS ALL UCM'S, CQE'S AND WWB'S ETC.
        GIVES CONTROL TO EACH OF THE OTHER CSECTS AND
        CONTAINS THE INTERFACE BETWEEN THE OTHER CSECTS AND
        COMMONLY USED ROUTINES WITHIN AMDPSCAN.
AMDPSMTT:- FORMATS THE MASTER TRACE TABLE IN CHRONOLOGICAL
           SEQUENCE IF MTT WAS ACTIVE AT DUMP TIME.
AMDPSSTT:- FORMATS THE SYSTEM TRACE TABLE IF TRACE WAS
           ACTIVE AT DUMP TIME. SVC'S ARE DECODED.
AMDPSVSM:- CHECKS ALL SPQE'S, DQE'S, FQE'S, PQE'S, FBQE'S
           AND AQE'S FOR CSA, SQA AND ALL ADDRESS SPACES.
           ALL CPAB'S, CPABE'S AND QUICKCELLS ARE CHECKED
           FOR ALL GLOBAL CELL POOLS AND LOCAL SVRB POOLS.
AMDPSUCB:- ALL UCB'S ARE CHECKED FOR 'MISSING INTERRUPTS'.
           LCH'S ARE CHECKED FOR WAITING REQUESTS.
           I/O CONTROL BLOCK CHAINS ARE VALIDITY CHECKED.
AMDPSTAT:- GIVES INFORMATION ABOUT GLOBAL LOCKS HELD AT
           DUMP TIME. E.G. ASM LOCK, DISP LOCK ETC.
AMDPSPAG:- VALIDITY CHECKS MOST RSM CONTROL BLOCKS.....
           ALSO, PAGE-IN REQESTS ARE TRACED FOR LATER
           ANALYSIS BY AMDPSALZ.
AMDPSQCB:- ANALYSES QCB'S AND QEL'S FOR ENQUEUE LOCKOUT
           SITUATIONS.
           NOTIFIES VIA MSGS IN THE DUMP FROM AMDPSALZ.
AMDPSLOK:- CHECK FOR AND TRACES CMS LOCK AND/OR LOCAL LOCK
           LOCKOUT SITUATIONS.
AMDPSALZ:- ANALYZES CONTROL BLOCKS BUILT BY OTHER 'SCAN'
           ROUTINES.... AMDPSLOK, AMDPSPAG, AMDPSQCB,
           AMDPSCAN AND AMDPSUCB.
           THIS GIVES INFORMATION ABOUT THE FOLLOWING SYSTEM
           RESOURCES:-
                       PAGE SUPERVISOR.
                       I/O DEVICES.
                       LOCKS.
                       QCB'S
                       REAL STORAGE FRAMES.
                       WQE'S
                       ORE'S
   DETAILS OF HOLDERS AND WAITORS FOR THESE RESOURCES ARE
PRINTED IN ORDER OF IMPORTANCE TO THE SYSTEM AT THE TIME
OF THE DUMP.
FROM THIS PRINTOUT, IT SHOULD BE POSSIBLE TO DETERMINE THE
'CRITICAL' SYSTEM RESOURCE AT THE TIME OF THE DUMP.
AMDPSLOP:- DETERMINES IF THE PSW STORED BY STORE STATUS HAS
           THE WAIT BIT ON OR OFF.
           IF 'OFF' THE INSTRUCTION STREAM POINTED TO BY THE
           PSW IS SIMULATED AND ANALYSED TO DETERMINE IF THE
           SYSTEM WAS 'LOOPING' OR NOT AT THE TIME OF THE
           DUMP.
           IF A LOOP IS DETECTED, IT IS PRINTED OUT ALONG
           WITH THE REGISTERS AND INTRUCTION AT THE ADDRESS
           POINTED TO BY THE PSW.
*---------------------------------------------------------*
*                                                         *
* NOTE...... TO UTILIZE THE 'LOOP CHECKING FEATURE'       *
*    YOU MUST INCLUDE A SYSUT3 DD CARD IN THE JCL FOR     *
*    PRDMP. GIVE IT THE SAME SPACE AS THE SYSUT1 DD.      *
*    ALSO, IF THIS DATASET CAN BE VIO, THIS WILL IMPROVE  *
*    INSTUCTION SIMULATION PERFORMANCE.                   *
*                    ****  NOTE  ****                     *
*   AMDPSCAN OCCASIONALLY ISSUES 'USER ABENDS - 1-6'.     *
*   IN THESE SITUATIONS, PLEASE BE PREPARED TO MAIL THE   *
*   DUMP TO ME.                                           *
*                                                         *
*---------------------------------------------------------*
A 'USER' MANUAL IS AVAILABLE GIVING DETAILS OF MESSAGES
ISSUED BY 'AMDPSCAN'.
IF YOU REQUIRE THIS MANUAL, PLEASE CONTACT ME EITHER BY
PEND MSG TO C895 OR BY PMS INCIDENT TO 'SCAN0,351'.
REGARDS. RONNIE RENDALL. STAFF PSR TORONTO.
