PROC 0 DEBUG
CONTROL NOMSG PROMPT NOLIST NOFLUSH
IF &DEBUG NE &STR() THEN +
  CONTROL LIST CONLIST SYMLIST MSG
SET &DSNAMEIN EQ &STR()
SET &NEWPW EQ &STR()
SET &PWREADIN EQ &STR()
SET &CPW EQ &STR()
RESTART: +
SET &PROTR EQ &STR(NOPWREAD)
SET &PROTW EQ &STR(PWWRITE)
ISPEXEC DISPLAY PANEL(PWADD)
IF &LASTCC EQ 8 THEN +
  EXIT
IF &PWREADIN NE &STR() THEN +
  DO
    IF &STR(Y) EQ &SUBSTR(1:1,&STR(&PWREADIN)) THEN +
      SET &PROTR EQ &STR(PWREAD)
  END
CONTROL MSG
IF &CPW EQ &STR() THEN +
  PROTECT '&DSNAMEIN' ADD(&NEWPW) &PROTR &PROTW
ELSE +
  PROTECT '&DSNAMEIN'/&CPW ADD(&NEWPW) &PROTR &PROTW
CONTROL NOMSG
ISPEXEC CONTROL DISPLAY REFRESH
GOTO RESTART
END
