PROC 0 DEBUG
CONTROL NOMSG NOFLUSH NOPROMPT NOLIST
IF &DEBUG NE &STR() THEN +
  CONTROL MSG PROMPT CONLIST SYMLIST LIST
ISPEXEC CONTROL ERRORS RETURN
ISPEXEC VGET (PRJ1,LIB1,LNKT,MEM) PROFILE
ISPEXEC VGET (DESTID) SHARED
SET &ERRM EQ &STR()
RESTART: +
FREE F(SYSUT1,SYSUT2,SYSIN,SYSPRINT)
ISPEXEC DISPLAY PANEL(S1OBJ1) &ERRM
IF &LASTCC EQ 8 THEN +
  DO
    ALLOC F(SYSUT1) NEW DELETE UNIT(VIO) SPACE(4) CYL
    ALLOC F(SYSUT2) NEW DELETE UNIT(VIO) SPACE(4) CYL
    ALLOC F(SYSPRINT) DA(*)
    ALLOC F(SYSIN) DA(*)
    EXIT
  END
SET &ERRM EQ &STR()
WHATIF DATASET ('&PRJ1..&LIB1..&LNKT') CATALOGED
IF &LASTCC NE 0 THEN +
  DO
    SET &ERRM EQ &STR(MSG(SASM000))
    GOTO RESTART
  END
ALLOC F(SYSUT1) DA('&PRJ1..&LIB1..&LNKT(&MEM)') SHR
ALLOC F(SYSUT2) SYSOUT(B) NOHOLD KEEP DEST(&DESTID)
ALLOC F(SYSIN) DUMMY
ALLOC F(SYSPRINT) DUMMY
$ IEBGENER
SET &RC = &LASTCC
IF &RC = 0 THEN +
  SET &ERRM EQ &STR(MSG(SASM001))
ELSE +
  SET &ERRM EQ &STR(MSG(SASM002))
ISPEXEC CONTROL DISPLAY REFRESH
ISPEXEC VPUT (PRJ1,LIB1,LNKT,MEM) PROFILE
ISPEXEC VPUT (DESTID) SHARED
GOTO RESTART
END
