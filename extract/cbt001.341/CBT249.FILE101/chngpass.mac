PROC 0 DEBUG
CONTROL NOMSG PROMPT NOLIST NOFLUSH
IF &DEBUG NE &STR() THEN +
  CONTROL LIST CONLIST SYMLIST MSG
SET &DSNAMEIN EQ &STR()
SET &NEWPW EQ &STR()
SET &OLDPW EQ &STR()
SET &CPW EQ &STR()
RESTART: +
ISPEXEC DISPLAY PANEL(PWCHNG)
IF &LASTCC EQ 8 THEN +
  EXIT
CONTROL MSG
IF &CPW EQ &STR() THEN +
  PROTECT '&DSNAMEIN' REPLACE(&STR(&OLDPW),&STR(&NEWPW))
ELSE +
  PROTECT '&DSNAMEIN'/&CPW REPLACE(&STR(&OLDPW),&STR(&NEWPW))
CONTROL NOMSG
ISPEXEC CONTROL DISPLAY REFRESH
GOTO RESTART
END
