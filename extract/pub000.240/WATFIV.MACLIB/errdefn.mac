         MACRO
         ERRDEFN &ERRCD,&W4CODE
         GBLA  &ERRNUM
         GBLC  &ERROPT,&ERRSTAT,&MINERR,&MAXERR
         LCLC  &LCLCODE
&ERRNUM  SETA  &ERRNUM+1
         AIF   ('&ERRCD' EQ 'RESERVED').IGNORE
&ERRCD   EQU   &ERRNUM+31
.IGNORE  AIF   ('&SYSECT' NE 'ERROR').NEXT
         AIF   ('&ERROPT' EQ 'FULL').FULL
         AIF   ('&ERROPT' EQ 'READ').READ
.*ASSUME &ERROPT IS 'CODE'
         AIF   ('&ERRCD' NE 'RESERVED').NOTRES1
         DC    CL3'???'            RESERVED FOR FUTURE USE
         MEXIT
.NOTRES1 ANOP
&LCLCODE SETC  '&ERRCD'
         AIF   ('&W4CODE' EQ '').USEW5
&LCLCODE SETC  '&W4CODE'
.USEW5   ANOP
         DC    CL3'&LCLCODE'
         MEXIT
.FULL    AIF   ('&ERRCD' NE 'RESERVED').NOTRES2
         DC    AL2(0)              RESERVED FOR FUTURE USE
         MEXIT
.NOTRES2 ANOP
         DC    AL2(&ERRCD.TEXT-1-ERRTEXT)
         MEXIT
.READ    AIF   ('&ERRCD' NE 'RESERVED').NOTRES3
         AIF   ('&MINERR' EQ '').NEXT
         DC    AL1(0)              RESERVED FOR FUTURE USE
         MEXIT
.NOTRES3 ERRSTAT &ERRCD
         AIF   ('&ERRSTAT' EQ 'CORE').INCORE
         AIF       ('&MINERR' EQ '').NEXT
         DC    X'00',0C'&ERRCD'    TEXT NOT IN CORE
         MEXIT
.INCORE  AIF   ('&MINERR' NE '').SKIP
&MINERR  SETC  '&ERRCD'
.SKIP    ANOP
&MAXERR  SETC      '&ERRCD'
         DC    AL1((&ERRCD.TAB2-ERR2TAB)/2+1)
.NEXT    MEND
