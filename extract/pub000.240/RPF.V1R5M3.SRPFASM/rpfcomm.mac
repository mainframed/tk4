         MACRO
&NAME    RPFCOMM &DSECT=YES
         AIF   ('&DSECT' EQ 'NO').LABEL1
&NAME    DSECT
         AGO   .LABEL2
.LABEL1  ANOP
&NAME    CSECT
.LABEL2  ANOP
         DC    CL8'RPFCOMM'        ACRONYM
USERID   DS    CL8                 USERID
*        T S O    C P P L    A D D R E S S
COMMCPPL DS    F                   CPPL ADDRESS OF RPF
*        R P F    D E F A U L T S
DEFPFK01 DS    CL26                DEFAULT PFK
DEFPFK02 DS    CL26                DEFAULT PFK
DEFPFK03 DS    CL26                DEFAULT PFK
DEFPFK04 DS    CL26                DEFAULT PFK
DEFPFK05 DS    CL26                DEFAULT PFK
DEFPFK06 DS    CL26                DEFAULT PFK
DEFPFK07 DS    CL26                DEFAULT PFK
DEFPFK08 DS    CL26                DEFAULT PFK
DEFPFK09 DS    CL26                DEFAULT PFK
DEFPFK10 DS    CL26                DEFAULT PFK
DEFPFK11 DS    CL26                DEFAULT PFK
DEFPFK12 DS    CL26                DEFAULT PFK
DEFPFK13 DS    CL26                DEFAULT PFK
DEFPFK14 DS    CL26                DEFAULT PFK
DEFPFK15 DS    CL26                DEFAULT PFK
DEFPFK16 DS    CL26                DEFAULT PFK
DEFPFK17 DS    CL26                DEFAULT PFK
DEFPFK18 DS    CL26                DEFAULT PFK
DEFPFK19 DS    CL26                DEFAULT PFK
DEFPFK20 DS    CL26                DEFAULT PFK
DEFPFK21 DS    CL26                DEFAULT PFK
DEFPFK22 DS    CL26                DEFAULT PFK
DEFPFK23 DS    CL26                DEFAULT PFK
DEFPFK24 DS    CL26                DEFAULT PFK
DEFOLD   DS    CL3                 DEFAULT FOLD
DEFAPP   DS    CL3                 DEFAULT APPEND
DEFNUM   DS    CL3                 DEFAULT NUMBERED
DEFOUT   DS    CL1                 DEFAULT OUTPUT CLASS
DEFLOG   DS    CL3                 DEFAULT LOGGING
DEFNULL  DS    CL3                 DEFAULT NULLS
         ORG   DEFNULL
DEFNUL   DS    CL3                 DEFAULT NULLS (SAME AS DEFNULL)
DEFAUTO  DS    CL1                 AUTOSAVE (Y OR N)
*        C U R R E N T   O P T I O N S
FOLD     DS    CL3                 FOLD (YES OR NO)
APPEND   DS    CL3                 APPEND (YES OR NO)
NUMBERED DS    CL3                 NUMBERED (YES OR NO)
COMMSUB  DC    CL3'TSO'            CONTAINS 'TSO' OR 'RPF'         @RP1
         DS    C                   RESERVED                        @RP1
*        S T O R A G E   A R E A S
GETMSTRT DS    F                   START GETMAINED WORKSPACE
GETMLEN  DS    F                   LENGTH GETMAINED WORKSPACE
NEXTENT  EQU   88                  LENGTH OF ENTRY IN WORKSPACE
GETMEND  DS    F                   END GETMAINED AREA
FIRSTREC DS    F                   FIRST RECORD USED
LASTREC  DS    F                   LAST RECORD USED
FIRSTSCR DS    F                   FIRST RECORD ON SCREEN
LASTSCR  DS    F                   LAST RECORD ON SCREEN
SAVEP3   DS    F                   SAVED GETMEND
SAVEP4   DS    F                   SAVED FIRSTREC
SAVEP5   DS    F                   SAVED LASTREC
COMMSCR  DS    F                   ADDRESS OF A 4096 BYTE SCREEN AREA
EPCNVDT  DS    F                   ADDRESS OF RPFCNVDT ROUTINE
*        D A T A   S E T S   USED IN R P F
COMMDSN  DS    CL44                NAME OF RPF DATABASE
MEMBER   DS    CL8                 CURRENT MEMBER   (OS DATASET)
LASTEDIT DS    CL8                 LAST MEMBER EDITED
DSNAME   DS    CL44                CURRENT DSNAME   (OS DATASET)
VOLUME   DS    CL6                 CURRENT VOLUME   (OS DATASET)
COMMSTR  DS    CL44                NAME OF LIBRARIAN MASTER FILE
COMMSVOL DS    CL6                 NAME OF LIBRARIAN MASTER VOLUME
COMMMOD  DS    CL8                 NAME OF LIBRARIAN MODULE
PANMOD   DS    CL10                PANVALET MODULE
PANLIB   DS    CL44                PANVALET LIBRARY
PANVOL   DS    CL6                 PANVALET VOLUME
COMMHELP DS    CL44                NAME OF HELP DS IF PRESENT
QNAME    DS    CL8                 QNAME OF ENQ
RNAME    DS    CL52                RNAME=DSN+MEMBER OF ENQ
*                                                                  @RP2
COMMREPL DS    CL3                 REPLACE MEMBERS YES/NO IN 3.3   @RP2
         DS    CL7                 RESERVED                        @RP2
*        THIS FIELD IS ONLY USED IF $NOHELP=OFF AND $HELPDD=OFF
*        SO THIS FIELD IS USED FOR A DYNAMIC ALLOCATION OF THE
*        HELP DATASET
*        E N T R Y   P O I N T S
EPCHNG   DS    F                   CHANGE CHARACTER STRINGS
EPDAIR   DS    F                   PERFORM DYNAMIC ALLOCATION
EPDATAL  DS    F                   DATASET MENU FOR EDIT
EPALLOC  DS    F                   RPFALLOC ROUTINE
EPEDITL  DS    F                   LOAD FILE INTO WORKSPACE
EPEDIT   DS    F                   MODULE TO EDIT
EPFIND   DS    F                   RPFFIND MODULE
EPNEXT   DS    F                   NEXT MODULE TO RECEIVE CONTROL
EPSAVE   DS    F                   SAVE WORKSPACE INTO OS FILE
EPUTIL   DS    F                   UTILITY
EPVTOC1  DS    F                   RPFVTOC1 UTILITY
EPSRCH   DS    F                   SEARCH LINE ROUTINE,CSECT OF XPFEDIT
*        F L A G S
INFCODE  DS    F                   BITSTRING OF RPF
SEQALC   EQU   X'80'     1X.. .... MASK SEQ DATASET ALLOCATED
$DAIR00  EQU   X'20'     .X1. .... RPFDAIR ACCEPTS ONLY RC=0
NOTLOAD  EQU   X'10'     .X.1 .... RPFEDITL WILL NOT BE LINKED
DATAENT  EQU   X'08'     .X.. 1... RPFEDIT GENERATE INPUT SCREEN
NODB     EQU   X'04'     .X.. .1.. BYPASS RPF DATABASE (RPF FAST)
$NODB    EQU   NODB                * MVS 3.8J
NOTMPPDS EQU   X'02'     .X.. ..1. RPFPDS UNABLE TO EDIT
$NOTMP   EQU   NOTMPPDS            * MVS 3.8J
COBBIT   EQU   X'01'     .X.. ...1 IF ON RPFEDIT WILL DISPL COLS 07-78
$COBOL   EQU   COBBIT              * MVS 3.8J
INFCODE2 EQU   INFCODE+1           2ND FLAG BYTE
ENQUED   EQU   X'80'     1... .... RESOURCE SPFDSN/DSNAME+MEMBER ENQ'D
$RETURN  EQU   X'40'     .1.. .... IF ON THEN ALLWAYS RETURN TO MAIN
$VTOCDSN EQU   X'20'     ..1. .... IF ON RPFVTOC LISTING IN RPFVTOCO DS
$OPTION  EQU   X'10'     ...1 .... IF ON OPTION SELECTED FROM MAIN MENU
$NOHELP  EQU   X'08'     .... 1... IF ON: UNABLE TO ALLOC. HELP DATASET
$NOGO    EQU   X'04'     .... .1.. IF ON: GETMAIN WORKSPACE FAILED
$UC      EQU   X'02'     .... ..1. IF ON: RPFFILL PROCESSES 'UC' CMD
$LC      EQU   X'01'     .... ...1 IF ON: RPFFILL PROCESSES 'LC' CMD
INFCODE3 EQU   INFCODE+2           3RD FLAG BYTE
$HELPDD  EQU   X'80'     1... .... IF ON: RPFHELP DD-STATEMENT PRESENT
$EDTCOPY EQU   X'40'     .1.. .... IF ON: RPFEDIT PROCESS COPY CMD
$UTILBR  EQU   X'20'     ..1. .... IF ON: RPFBRO INVOKED BY UTILITY
$DAIRALC EQU   X'10'     ...1 .... IF ON: RPFDAIR HAD ALLOCATED DS
$PDSE    EQU   X'08'     .... 1... IF ON: A PDSE IS ALLOCATED
$PDSEDIT EQU   X'04'     .... .1.. IF ON: RPFPDS INVOKED BY EDIT
$PDSBR   EQU   X'02'     .... ..1. IF ON: RPFPDS INVOKED BY BROWSE
$OSSAVE  EQU   X'01'     .... ...1 IF ON: RPFLIB INVOKES RPFSAVE
INFCODE4 EQU   INFCODE+3           4TH FLAG BYTE
$DATAU   EQU   X'80'     1... .XXX IF ON: RPFDATAL WILL ACT AS RPFDATAU
$SAMEDS  EQU   X'40'     .1.. .XXX IF ON: EDIT PROCESSES THE END CMD
$CHANGED EQU   X'20'     ..1. .XXX IF ON: EDIT HAD MADE CHANGES
$RECFB   EQU   X'10'     ...1 .XXX IF ON: RPFWORK HAS FIXED RECORDS
$RECVB   EQU   X'08'     .... 1XXX IF ON: RPFWORK HAS VARIABLE RCDS
*                                  E.G OPTION 3.4 SELECTED FOR PDSMAINT
*        M I S C E L A N I O U S
RPFDCB   DS    F
STIME    DS    F                   START TIME
TTIME    DS    F                   STOP TIME
ERRCODE  DS    F                   DYN ALLOC ERROR CODE
RTNCODE  DS    F                   RETURNCODE BETWEEN MODULES
BUFFADDR DS    F                   ADDRESS INPUT BUFFER
SCOPES   DS    F                   START POS OF EDIT SCOPE
SCOPEL   DS    F                   LENGTH OF EDIT SCOPE
PASSTXT  DS    CL8                 PASSWORD FOR RPFTEST
DEFOPT   DS    C                   OPTION TO SELECT IN DEFAULTS MENU
EDITOPT  DS    C                   OPTION TO SELECT IN EDIT MENU
HELPOPT  DS    C                   OPTION TO SELECT IN HELP MENU
UTILOPT  DS    C                   OPTION TO SELECT IN UTILITY MENU
CMAINOPT DS    CL3                DATA AFTER '=' CMD IN EDIT/BROWSE/PDS
         DS    CL1                 RESERVED
CMDAREA  DC    CL25' '             USER COMMAND AREA
         DS    CL10                RESERVED
BLANKS   DC    CL256' '
*        T R A N S L A T E   T A B L E S
COMTRTAB DC    256AL1(*-COMTRTAB)
         ORG   COMTRTAB
         DC    64X'A1'                 NON-PRINTABLE
         ORG
COMTRTST DC    256X'00'                TEST TABLE FOR UNPRINTABLES
         ORG   COMTRTST
         DC    64C'0'
         ORG
COMTRTXT DC    256X'00'            TEST TABLE ASIS MODE
         ORG   COMTRTXT+X'81'
         DC    X'F0F0F0F0F0F0F0F0F0' LOWER CASE A-I
         ORG   COMTRTXT+X'91'
         DC    X'F0F0F0F0F0F0F0F0F0' LOWER CASE J-R
         ORG   COMTRTXT+X'A2'
         DC    X'F0F0F0F0F0F0F0F0' LOWER CASE S-Z
         ORG
COMMSTOR DC    CL8'SYSDA'
COMMUNIT DC    CL8'SYSALLDA'
*
COMMOBJ  DS    CL44
COMMMAC1 DS    CL44                MACLIB NAME 1 IN RPFASM
COMMMAC2 DS    CL44                MACLIB NAME 2 IN RPFASM
COMMMAC3 DS    CL44                MACLIB NAME 3 IN RPFASM
COMMMAC4 DS    CL44                MACLIB NAME 4 IN RPFASM
COMMMAC5 DS    CL44                MACLIB NAME 5 IN RPFASM
COMMMAC6 DS    CL44                MACLIB NAME 6 IN RPFASM
COMMIDDN DS    CL8                 DDNAME OF INCLUDE LIBRARY RPFASM
         DS    CL2                 RESERVED
COMMLKED DS    0CL276              4 CONTROL STATEMENTS OF RPFASM
COMMLK1  DS    CL69
COMMLK2  DS    CL69
COMMLK3  DS    CL69
COMMLK4  DS    CL69
COMMIDSN DS    CL44
COMMLKD2 DS    0CL138              ANOTHER 2 LKED STMNTS OF RPFASM
COMMLK5  DS    CL69
COMMLK6  DS    CL69
*
COMMASPA DC    CL30' '             ASSEMBLER PARM
COMMLKPA DC    CL30'XREF,LIST,NCAL' BINDER PARM
COMMSIZE DC    H'24'               DEFAULT NUMBER OF ROWS
DEFPRT   DC    CL8' '              DEFAULT PRINTER NAME
*
COMMEDS1 DS    CL44                DSN1 EDIT SELECTION PANEL
COMMEVO1 DS    CL6                 VOLUME1 EDIT SELECTION PANEL
COMMEDS2 DS    CL44                DSN2 EDIT SELECTION PANEL
COMMEVO2 DS    CL6                 VOLUME2 EDIT SELECTION PANEL
COMMEDS3 DS    CL44                DSN3 EDIT SELECTION PANEL
COMMEVO3 DS    CL6                 VOLUME3 EDIT SELECTION PANEL
COMMEDS4 DS    CL44                DSN4 EDIT SELECTION PANEL
COMMEVO4 DS    CL6                 VOLUME4 EDIT SELECTION PANEL
COMMEDS5 DS    CL44                DSN5 EDIT SELECTION PANEL
COMMEVO5 DS    CL6                 VOLUME5 EDIT SELECTION PANEL
COMMEDS6 DS    CL44                DSN6 EDIT SELECTION PANEL
COMMEVO6 DS    CL6                 VOLUME6 EDIT SELECTION PANEL
COMMEDS7 DS    CL44                DSN7 EDIT SELECTION PANEL
COMMEVO7 DS    CL6                 VOLUME7 EDIT SELECTION PANEL
COMMEDS8 DS    CL44                DSN8 EDIT SELECTION PANEL
COMMEVO8 DS    CL6                 VOLUME8 EDIT SELECTION PANEL
*
CRETRIEV DS    F                   ADDRESS OF A 8K RETRIEVE BFR
*                                  ATTRIBUTES
COMMPFX  DS    CL17                    DEFAULT PREFIX
COMMASM  DS    CL8                     ASSEMBLER PROGRAM NAME
BLUE     EQU   X'2842F1'
RED      EQU   X'2842F2'
PINK     EQU   X'2842F3'
GREEN    EQU   X'2842F4'
TURQ     EQU   X'2842F5'
YELLOW   EQU   X'2842F6'
WHITE    EQU   X'2842F7'
HDEFAULT EQU   X'284100'
REVERSE  EQU   X'2841F2'
USCORE   EQU   X'2841F4'
         AIF   ('&DSECT' EQ 'NO').LABEL3
*---------------------------------------------------------------------*
*        RECORD IN WORKSPACE                                          *
*--------------------------------------(C)-2001 SKYBIRD SYSTEMS ------*
WORKSPCE DSECT
WORKSLIN DS    CL6                     LINE NUMBER ON SCREEN
WORKFLGS DS    2X                      FLAGBYTES
$INSERTD EQU   128                     EMPTY INSERTED LINE
WORKDATA DS    CL80                    DATA PORTION
.LABEL3  ANOP
         MEND
