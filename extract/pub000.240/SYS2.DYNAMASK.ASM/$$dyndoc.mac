THIS PROGRAM IS ORIGINALLY FROM FILE 400 OF THE CBT TAPE.  I HAVE
MADE SOME MINOR CHANGES AND SET UP THE JCL SO THAT YOU CAN ASSEMBLE
AND RUN THE PROGRAM WITH LITTLE PREVIOUS EXPERIENCE.  YOU WILL
WANT TO CHANGE THE SOURCE PDS NAME AND THE LOAD LIBRARY NAMES
IN THE JCL, AND VERY LITTLE ELSE IS REQUIRED TO USE THE PRODUCT.

I HAVE ALSO ADDED A MODULE CALLED UNITMAP WHICH IS ALSO FROM THE CBT
TAPE (FILE 301). I COPIED IT'S NECESSARY MACROS IN-LINE WITH THE
SOURCE CODE TO MAKE IT EASIER TO WORK WITH.

THE INSTALLATION STEPS ARE VERY EASY:
1) ASSEMBLE THE GENERIC MEMBER TO SOME LINKLIST LIBRARY
2) ASSEMBLE THE DYNAMASK TO SOME LINKLIST LIBRARY
3) ASSEMBLE THE UNITMAP MEMBER TO LINKLIST OR TSO COMMAND MODULE LIB
4) COPY THE DYNAPROC MEMBER TO PROCLIB (CALL IT DYNAMASK OR ANYTHING
5)                                      YOU WISH)
6) COPY THE EDT00 MEMBER TO SYS1.PARMLIB (OR SOME OTHER LIBRARY - MAKE
7)                                        SURE THE PROC MATCHES THE
8)                                        LIBRARY YOU CHOOSE)
9) MAKE THE CHANGES TO EDT00 TO MATCH WHAT YOU WANT TO DO
        SEE THE INSTRUCTIONS BELOW FOR EXAMPLES OR LOOK AT
        THE SAMPLE EDT00 MEMBER SUPPLIED
A) START DYNAMASK (OR WHATEVER YOU CALLED THE PROC IN PROCLIB)
B) YOU CAN EXECUTE THE UNITMAP MODULE TO LIST THE UNITNAME TABLE
C) DO NOT NOT NOT ASSEMBLE THE VATUCB MEMBER IT CONTAINS AN ERROR
      AND IT IS NOT NEEDED FOR PROPER FUNCTIONING ANYWAY

SOME THINGS TO KEEP IN MIND:
1) WHEN YOU WANT TO ADD A UNIT TO AN EXISTING UNITNAME (I.E ADD
       VOLSER MVSWRK TO THE WORK UNITNAME, YOU NEED TO IDENTIFY ALL
       OF THE CURRENT UNITS AS WELL.  FOR INSTANCE, ON THE HERC-390
       TURNKEY SYSTEM, WORK IS SET UP AS UNITS 140-147 AND 240-247
       IF YOU WANT TO ADD YOUR NEW UNIT (WHICH IS AT SAY X'123' YOU
       WOULD CODE THE EDT00 LINE AS:
       WORK MVSWRK,/140-147,/240-247
   IF YOU WERE TO LEAVE OFF THE OLD UNITS, THEN YOU WOULD END UP
   WITH A UNITNAME OF WORK THAT ONLY HAD ONE UNIT X'123' IN IT.

   IT'S NOT A BIG DEAL BUT WORTH REMEMBERING.

2) TRY TO RUN THE DYNAMASK MEMBER JUST AFTER IPL OR WHEN YOU DON'T HAVE
     MUCH ELSE GOING ON.  IT CAN CAUSE HAVOK TO CHANGE UNITNAMES ON
     RUNNING APPLICATIONS, IF YOU ARE RUNNING A JOB THAT IS IN STEP
     30 AND YOU MODIFY THE UNITNAME FOR SOMETHING THAT IT WILL NEED
     IN LATER STEPS, YOU COULD SCREW YOURSELF PRETTY WELL, SO (AS
     ALWAYS)  BE CAREFUL

3) THE UNITMAP MODULE IS A GOOD THING TO HAVE TO SEE BOTH BEFORE
     AND AFTER YOU MAKE CHANGES TO THE GENERICS.  YOU CAN JUST
     TYPE "UNITMAP" AND SEE EVERYTHING, OR YOU CAN TYPE
     "UNITMAP XXXXX" WHERE "XXXXX" IS THE UNITNAME YOU WANT TO SEE

4) THE DYNAMASK MEMBER HAS ASSEMBLY JCL WHICH USE A SYSPARM(NONXA)
      DO NOT NOT NOT REMOVE THAT SYSPARM, BECAUSE IT WON'T ASSEMBLE
      ON THE HERCULES SYSTEM WITHOUT THAT.

5) READ THE INSTRUCTIONS BELOW, THEY ARE THE ORIGINAL ONES FROM
   STEVE SMITH (THE ORIGINAL AUTHOR OF THE UTILITY):

     INSTALLATION

     DYNAMASK IS A SINGLE MODULE AND MUST BE LINK EDITED INTO
     AN AUTHORIZED LIBRARY WITH ATTRIBUTES AC=1 RENT REUS REFR
     ASSEMBLY USING ASMH AND XA MACRO LIBRARY WILL ALSO EXECUTE
     IN NON XA (370 MODE)
     FOR ASSEMBLY UNDER NON XA SYSTEMS USE SYSPARM(NONXA) TO
     AVOIDE XA ONLY MACRO PARMS AND BSM INSTRUCTIONS
     THERE IS ALSO A TEST MODE NOTED LATER IN THIS DOCUMENATION

     DYNAMASK SPECIFICATIONS MUST BE PROVIDED IN A CONTROL
     LIBRARY LIKE SYS1.PARMLIB

     THE DYNAMASK JCL MUST PROVIDE A SYSIN TO THE CONTROL
     LIBRARY AND MEMBER.  WHEN RUN AS A STARTED TASK A PROC
     MEMBER MUST BE PROVIDE IN SYS1.PROCLIB,
     A PARM VALUE MAY BE INCLUDED.  THE PARM VALUE IS PLACED
     IN A WTO MESSAGE AND DISPLAYED AT THE END OF DYNAMASK
     PROCESSING.  THIS IS USEFUL FOR SIGNALING INSTALLATION
     WTO EXIT OR AUTOMATIC OPERATOR SUBSYSTEM
     SAMPLE:

     //DYNAMASK PROC M=EDTUPDTE,P='START IPL POSTPROCESS'
     //DYNAMASK EXEC PGM=DYNAMASK,PARM=&P
     //SYSIN DD DISP=SHR,DSN=SYS1.PARMLIB(&M.)

    DYNAMASK CONTROL CARD FORMAT

    STARTING IN COLLUME 1 THE UNIT NAME TO BE CHANGED OR ADDED
    FOLLOWED BY A BLANK.

    FOLLOWED BY VOLUME(S) AND/OR UNIT ADDRESS(ES) TO BE ASSIGNED
    TO THIS UNIT NAME.  VOLUMES CAN BE SPECIFIED ONLY FOR DISK
    DEVICES FOR UNIT NAMES OF DASD ONLY.

    VOLUMES ARE OF THE FORM: ONE TO SIX CHARACTER VOLUME IDS.
    LIKEWISE A MODEL VOLUME OF ONE TO FIVE CHARACTERS PLUS
    AN ASTERISK WILL SELECT ALL VOLUMES THAT MATCH THE MODEL.

    UNIT ADDRESS ARE OF THE FORM: SLASH (/) AS FIRST CHARACTER,
    FOLLOWED BY THE 3 DIGIT HEXIDECIMAL UNIT ADDRESS.
    LIKEWISE A MODEL 1 OR 2 DIGIT HEXIDECIMAL ADDRESS PLUS
    AN ASTERISK WILL SELECT ALL UNITS THAT MATCH THE FIRST GIVEN
    DIGITS. A RANGE OF UNITS MAY BE SPECIFIED AS FOLLOWS /CUU-CUU

    IF MORE THAN ONE VOLUME OR UNIT ADDRESS IS NEEDED EACH IS
    SEPARATED BY A COMMA.  IF MORE ENTRIES ARE REQUIRED THAN
    CAN BE CONTAINED ON ONE CARD, THE CARD CAN BE CONTINUED BY
    PLACEING A COMMA AFTER THE LAST ENTRY. THE NEXT CARD MUST
    BE CONTINUED ON OR AFTER COLUME 2.

    THE SPECIFIED UNIT NAME ASSIGNMENSTS NORMALLY REPLACE ALL
    PREVIOUS ASSIGNMENTS.  HOWERER, IF A MINUS (-) PRECEDES
    THE UNIT NAME, THE SPECIFIED UNIT.VOLUES ENTRIES WILL BE
    EXCLUED FROM THE EXISTING ASSIGNMENTS FROM SYSGEN.

    IF A PLUS (+) PRECEDES THE UNIT NAME, THE UNIT NAME IS
    AN ASTERISK (*) IN COLUME 1 INDICATES A COMMENT CARD.
    MARKED FOR VIO.
     A COMMENT CARD CAN BE PLACED ANYWHERE.

     SAMPLES:

          SYSDA SYSDA*

          SORT  SYSDA1,SYSDA2,
          * COMMENT CARD, THE NEXT CARD IS CONTINUEATION OF PREVIOUS
           SYSDA3,SYSDA4

          -2400-3 /48E,/48F

          TAPE1  /42*,/5*,/440-45F

          +SYSVIO SYSDA1

     IF THE SAME UNIT NAME IS SPECIFED MORE THAN ONCE, ONLY
     THE FIRST IS USED.

     ANY ERROR OR INVALID SPECIFICATION IN A UNIT NAME CAUSES
    THAT UNIT NAME NOT TO BE UPDATED

    ANY ERROR OR INVALID SPECIFICATION IN A UNIT ADDRESS OR
    VOLUME WILL BE IGNORED AND THE UNIT NAME WILL BE UPDATED
    WITH ANY CORRECT UNIT ADDRESSES AND/OR VOLUMES. MISSING
    VOLUMES ARE IGNORED.

    ALL UNCHANGED UNIT NAMES FROM THE SYSGEN ARE RETAINED.
    ONLY UNIT NAMES TO BE CHANGED NEED BE SPECIFIED.

    RESTRICTIONS

    DYNAMASK DOES NOT UPDATE THE DEVICE NAME AND MASK TABLE
    WHICH IS USED BY SOME MVS/370 IBM UTILITIES. A SEPERATE
    PROGRAM IS AVAILABLE THAT WILL UPDATE THESE FROM THE
    EDT WITH IS THE TABLE DYNAMASK UPDATES.

    CURRENTLY, THERE IS NO ENCOMPASSING ENQUEUE NAME TO PROTECT
    JOBES IN ALLOCATION WHEN THE EDT IS REPLACED.  DYNAMASK
    SHOULD BE RUN ONLY WHEN THE SYSTEM IS IN A DRAINED STATE
     OR RIGHT AFTER IPL.  MOST SHOPS INCLUDE A START DYNAMASK
     COMMAND IN THE COMMND00 OF PARMLIB

     THE 'CGA' SOFTWARE PRODUCT GROUP'S 'MSX' MUST RUN START AFTER
     DYNAMASK.  TO FORCE SERIALATION WITH DYNAMASK, INCLUDE A
     DD CARD FOR THE MSX TABLE DATASET IF YOU USE MSX.

     LOGIC FLOW

     DURING INITIZATION WORKING STORAGE IS UPTAINED AND CSA STORAGE
     IS UPTAINED FOR THE NEW EDT (ELIGIBLE DIVICE TABLE). A LOAD
     IS DONE FOR IEFEDTTB BUILD FROM SYSGEN AND USED FOR A MODEL.
     FROM THE MODEL EDT AND INCORE CONTROL BLOCKS A DYNAMASK GROUP
     UNIT CROSS REFERENCE TABLE (GXREF) IS BUILT.

     DYNAMASK THEN READS THE SYSIN FILE FOR CONTROL CARD AND BUILDS
     A DYNAMASK MODIFIED NAME TABLE (MNT) ASSIGNING A MASK BIT
     EACH UNIT NAME AND MARKS THE MASK IN THE GXREF FOR ALL RELATED
     DEVICE ADDRESS (EXPLICED OR VOLUME RELATED) FOR EACH UNIT NAME.
    THE DEVICES REFERENCED IN THE GXREF CAN THEN BE REGROUPED BY
    SORTING ON THE OLD GROUP NUMBER AND MASK IN THE GXREF.  THEN
    NEW GROUP NUMBERS CAN BE ASSIGNED AND A NEW EDT CAN BE BUILD.
    IN XA A NEW UCB POINTER LIST (UPL) IS BUILT IN FRONT OF THE
    EDT JUST AFTER THE HEADER SECTION. THE FOLLOWING EDT SECTIONS
    ARE BUILD IN ORDER: UCB INDEX SECTION, GROUP ID SECTION,
    GROUP POINTER SECTION, GENERIC SECTION, GROUP LOOKUP SECTION,
    AND LAST THE GROUP MASK SECTION.

    THE COMPLETED EDT (AND IN XA THE UPT) POINTERS ARE UPDATED
    IN THE JESCT. THEN THE OLD EDT IF IT WAS BUILT BY DYNAMASK
    IS DELETED FROM STORAGE. THEN ANY USER SUPPLIED EXITS ARE
    CALLED.

    TEST MODE

    TEST MODE CONTROLLED BY SYSPARM(TEST) OR SYSPARM(TESTXA).
    ALSO A SECOND CSECT AFTER THE END CARD PROVIDE DUMP FORMATING
    REQUIRES ASMH BATCH MODE FOR ASSEMBLY OR THE SECOND CSECT
    COULD BE SEPERATED OUT FOR SEPERATE ASSEMBLY

    TEST MODE PROVIDES FOR BUILDING A NEW EDT WITHOUT UPDATING
    CURRENT EDT POINTERS.  IT ALSO DUMPS GEN, OLD, AND NEW EDTS,
    ALSO PROVIDING A COMPARE DUMP OF OLD AND NEW EDTS.
    IN TEST MODE APF AUTHORIZATION IS NOT NEEDED.

    NOTES

    ALL MESSAGES ARE OF THE FORM TSDXXX WHICH CAN BE EDITTED
    TO LOCAL MESSAGE ID STANDARDS  (CURRENTLY DMSKXXI)
    ::::::::::::::::::::::::::::::::::::::::::::::::::::
          TO:      DYNAMASK USERS
          FROM:    STEVEN SMITH
                   SYSTEMS ARCHITECT
                   TECHNICAL SERVICES  G12-99

          DATE:    JUNE  14, 1990

          SUBJECT: NEW DYNAMASK FOR XA

          SEND INQUIRES TO:
                   STEVEN D. SMITH   G12-99
                   SECURITY PACIFIC AUTOMATION COMPANY
                   611 NORTH BRAND
                   GLENDALE, CA, 91203

          OR PHONE: (818) 507-3014

      THE ENCLOSED TAPE IS A IEBCOPY UNLOAD OF THE NEW DYNAMASK
   AND RELATED PROGRAMS.
   THE TAPE IS  NONLABELED AND HAS TWO  FILES,  BOTH IEBCOPY
   UNLOADS OF THE SAME MEMBERS.  NO ADDITIONAL USER MACROS
   ARE REQUIRED FOR THESE PROGRAMS.

   MEMBERS:

    $$DYNDOC     THIS MEMBER

    DYNAMASK
      DYNAMASK PROVIDES THE ABILITY TO DYNAMICALLY CHANGE AND ADD
      TO THE UNIT NAMES DEFINED AT SYSGEN.   DYNAMASK OPTIONALLY
      CAN BE GIVEN UNIT ADDRESSES OR VOLUMES AND THE UNIT NAMES
      WILL BE ASSIGNED TO THE UNIT ADDRESSES THAT THE VOLUMES ARE
      CURRENTLY MOUNTED.  IT CAN BE RUN AT ANY TIME THE SYSTEM
      IS DAINED OF ALL ACTIVITY.  DYNAMASK RUNS AS AN OPERATOR
      REQUESTED OR BATCH SUBMITTED UTILITY WHICH MAKES THE
      NECESSARY CONTROL BLOCK CHANGES AND EXITS.  IT REQUIRES
      MINIMUM RESOURCES AND EXECUTES IN A FEW SECONDS.
      DYNAMASK SUPPORTS THE FOLLOWING RELEASES:
      MVS3.8 - MVS/SP1.3, MVS/XA2.0 - 2.1.7

      COMPLETE DOCUMENTATION IS CONTAINED IN THE COMMENTS AT THE
      FRONT OF THE SOURCE


    GENERIC
      THIS IS A MVS/370 PROGRAM TO UPDATE THE DEVTMASK AND DEVTNAME
      TABLES.  IT WILL BE CALLED BY DYNAMASK IF INCLUDED IN THE
      LKED AND WILL BE BYPASSED IF IN A XA SYSTEM.
      THIS PROGRAM WAS WRITTEN BY LOCKHEED CALIFORNIA.
      THIS PROGRAM IS NOT SUPPORTED BY SECURITY PACIFIC AUTOMATION

    VATUCB
      THIS IS A PROGRAM TO UPDATE THE UCB'S FROM INFORMATION IN
      A USER SUPPLIED VATLST.  THIS WILL RUN IN XA AND MVS/370 MODE.
      IT WILL BE CALLED BY DYNAMASK IF INCLUDED IN THE LKED
      THIS PROGRAM WAS WRITTEN BY LOCKHEED CALIFORNIA.
      THIS PROGRAM IS NOT SUPPORTED BY SECURITY PACIFIC AUTOMATION
      THIS PROGRAM WILL NOT WORK WITH ESA GENERIC VATLST ENTRIES
