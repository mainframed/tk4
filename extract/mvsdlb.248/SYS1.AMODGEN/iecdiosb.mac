* %      GOTO IOSBPLS;             /* GO TO THE PLS VERSION    @ZM30407
         MACRO
         IECDIOSB
IOSB     DSECT
         SPACE 1
****************************************************************
*                                                              *
*   THIS DSECT DESCRIBES THE CONTROL BLOCK PASSED TO THE I/O   *
*   SUPERVISOR AS A PARAMETER OF THE SRB.  THE CONTROL BLOCK   *
*   CONTAINS ALL INFORMATION NECESSARY TO INITIATE AND TERM-   *
*   INATE AN I/O OPERATION.  FIELDS OF THE IOSB ARE USED FOR   *
*   COMMUNICATION BETWEEN THE -                                *
*                                                              *
*        1. I/O SUPERVISOR AND I/O REQUESTOR                   *
*        2. I/O SUPERVISOR AND ERROR RECOVERY PROCEDURES       *
*        3. COMPONENTS OF THE I/O SUPERVISOR                   *
*        4. SUCCESSIVE ENTRANCES TO THE ERPS                   *
*        5. ERP AND COMMON WTO AND STATISTICS UPDATE MODULES   *
*                                                              *
****************************************************************
         SPACE 1
         DS    0F
IOSFLA   DS    XL1                 FLAG BYTE A
         SPACE 1
*   BIT DEFINITIONS FOR IOSFLA
         SPACE 1
*        EQU   X'00'               NO CCW CHAINING
IOSDCHN  EQU   X'80'               DATA CHAINING
IOSCCHN  EQU   X'40'               COMMAND CHAINING
IOSACHN  EQU   X'C0'               COMMAND AND DATA CHAINING
IOSERR   EQU   X'20'               ERROR ROUTINE IN CONTROL
*                                  MUST BE SET TO ZERO BY DRIVER
*                                  IF ERP RETURNS WITH THIS BIT
*                                  ON, A RETRY IS ASSUMED. IF ERP
*                                  RETURNS WITH THIS BIT OFF, THE
*                                  ERROR IS CONSIDERED PERMANENT
*                                  OR CORRECTED DEPENDING ON THE
*                                  SETTING OF IOSEX.
IOSSMDA  EQU   X'10'               ERP STATUS MODIFIER BIT A
*                                  MUST BE SET TO ZERO BY DRIVER
*                                    TAPE - REPOSITION DEVICE
*                                    1052 - IMMEDIATE OPERATION,
*                                          CCW OP CODE IN IOSMDB
IOSSMDB  EQU   X'08'               ERP STATUS MODIFIER BIT B
*                                  MUST BE SET TO ZERO BY DRIVER
*                                  SET BY PCI FETCH IN APPENDAGE
*                                  FOR POSTING
*                                    TAPE - CRC NEEDED
*                                    DASD - PCI FETCH STOP FLAG
IOSEX    EQU   X'04'               EXCEPTIONAL CONDITION. UPON
*                                  RETURN FROM NORMAL OR ABNORMAL
*                                  EXIT WITH THIS BIT ON, ERP PRO-
*                                  CESSING IS INITIATED IF INITIAL
*                                  ERROR CONDITION. IF BIT IS OFF,
*                                  IT IS ASSUMED THAT THE EXIT
*                                  CORRECTED THE CONDITION OR DID
*                                  NOT CONSIDER IT AN ERROR. WHEN
*                                  THE ERROR ROUTINE RETURNS WITH
*                                  THIS BIT ON AND IOSERR OFF, THE
*                                  ERROR IS CONSIDERED PERMANENT.
*                                  WHEN THE ERP RETURNS WITH BOTH
*                                  BITS OFF, THE ERROR HAS BEEN
*                                  CORRECTED.
IOSDOM   EQU   X'02'               DOM MACRO REQUIRED          @YM06828
IOSIOSB  EQU   X'01'               IOSB CREATED BY I/O SUPERVISOR
*                                  MUST BE SET TO ZERO BY DRIVER
         SPACE 1
IOSFLB   DS    XL1                 FLAG BYTE B
         SPACE 1
*   BIT DEFINITIONS FOR IOSFLB
         SPACE 1
IOSDIESE EQU   X'80'               SECOND ENTRY TO DIE
IOSSDR   EQU   X'40'               ERP DOESNT WANT OBR         @Z40MPLG
IOSNOTRS EQU   X'20'               DRIVER WANTS NO TRAS ON     @ZA25620
*                                  ENTRY TO DIE.               @ZA25620
IOSFLB3  EQU   X'10'               RESERVED
IOSFLB4  EQU   X'08'               RESERVED
IOSMSG   EQU   X'04'               MESSAGE INDICATOR
*                                  0 = INTERVENTION REQUIRED MSG
*                                  1 = I/O ERROR MESSAGE
IOSBDCST EQU   X'02'               BROADCAST BIT
IOSLOG   EQU   X'01'               CREATE AN OBR RECORD
         SPACE 1
IOSFLC   DS    XL1                 DEVICE DEPENDENT ERP FLAGS
         SPACE 1
*   BIT DEFINITIONS FOR IOSFLC
         SPACE 1
IOSDVMNT EQU   X'80'               DAVV ISSUED MOUNT
IOSDVALT EQU   X'40'               ALTERNATE TRACK PROCESSING
*                                  BY DAVV (DA)
IOSVERIF EQU   X'40'               UNSOLICITED DEVICE END VERIFI-
*                                  CATION NEEDED (NON-DA)
IOSCC3WE EQU   X'20'               GDP REQ'RS CC3 POST OF X6D  @DCRR054
IOSTP    EQU   X'10'               NO SPECIAL CC3 HANDLING    TOBEFLGED
IOSRWAIT EQU   X'0C'               RESTARTABLE WAIT REASON     @ZA00904
IOSRWVID EQU   X'00'               00--WRONG VOL ID            @ZA00904
IOSRWIR  EQU   X'04'               01--INTERVENTION REQUIRED   @ZA00904
IOSRWCC3 EQU   X'08'               10--CONDITION CODE 3        @AA00904
IOSRWERR EQU   X'0C'               11--READ ERROR FOR LABEL    @ZA00904
IOSCTCNR EQU   X'02'               CTC - NO RETRY ALLOWED      @ZA11845
IOSFLC7  EQU   X'01'               RESERVED
         SPACE 1
IOSPROC  DS    XL1                 THIS BYTE INDICATES WHAT TYPE
*                                  OF SPECIAL PROCESSING IS TO
*                                  BE PERFORMED BY IOS COM-
*                                  PONENTS OPERATING ASYNCHRON-
*                                  OUS TO MAINLINE
*                                  MUST BE SET TO ZERO BY DRIVER
         SPACE 1
*   SPECIAL PROCESSING INDEXES ASSIGNED TO IOSPROC
         SPACE 1
*        EQU   X'00'               RESERVED
IOSAPCI  EQU   X'04'               PCI
IOSATTN  EQU   X'08'               ATTENTION
IOSAPURG EQU   X'0C'               PURGE
IOSADAVV EQU   X'10'               DAVV
IOSAWTO  EQU   X'14'               WTO
IOSADDR  EQU   X'18'               DDR
IOSACRH  EQU   X'1C'               CHANNEL RECONFIGURATION HARD Y30CQLG
IOSAUR   EQU   X'20'               UNCONDITIONAL RESERVE       @ZA35535
         SPACE 1
IOSDVRID DS    XL1                 DRIVER IDENTIFICATION VALUE
         SPACE 1
IOSIOSID EQU   X'00'               RESERVED FOR IOS
IOSMISID EQU   X'01'               MISCELLANEOUS ID FOR I/O RE-
*                                  QUESTS THAT CANNOT BE PURGED,
*                                  ASSOCIATED WITH A TASK, OR
*                                  VIOLATE EXTENTS
IOSXCPID EQU   X'02'               EXCP
IOSVSAID EQU   X'03'               VSAM
IOSATMID EQU   X'04'               VTAM
IOSTCMID EQU   X'05'               TCAM
IOSOLTID EQU   X'06'               OLTEP
IOSFCHID EQU   X'07'               PCI FETCH
IOSJESID EQU   X'08'               JES3
IOSSS1ID EQU   X'09'               SS1/DSM                     @Y30LPLC
IOSPRGID EQU   X'0A'               IECVIOPM PURGE              @ZA04107
IOSVPSID EQU   X'0B'               VPSS                        @G29ANLO
         SPACE 1
IOSPRLVL DS    XL1                 THE PRIOITY LEVEL AT WHICH
*                                  THE ADDRESS SPACE IS TO BE SCHED-
*                                  ULED, 0 OR 4
         SPACE 1
IOSASID  DS    H                   ADDRESS SPACE IDENTIFICATION OF
*                                  ADDRESS SPACE TO BE SCHEDULED AT
*                                  TERMINATION OF I/O REQUEST
IOSPGAD  DS    A                   PROGRAM ADDRESS TO BE DISPATCHED
IOSPKEY  DS    XL1                 PROTECT KEY OF IOSPGAD
*        EQU   X'F0'               PROTECT KEY
IOSLCL   EQU   X'08'               ASID SCHEDULE AT LOCAL LEVEL
IOSIDR   EQU   X'04'               ASYNCHRONOUS ERP SCHEDULING
*                                  SHOULD BE USED FOR THIS
*                                  REQUEST (INDIRECT RECORDING
*                                  FOR PAGING I/O).
IOSPGDPX EQU   X'02'               THIS REQUEST HAS A BACKED UP
*                                  COPY (DUPLEXED PAGE).
IOSPKY7  EQU   X'01'               RESERVED
IOSCOD   DS    XL1                 I/O COMPLETION CODE
*                                  USED AS TEMPORARY SAVE FOR
*                                  SYSTEM MASK BY CHAN. SCHEDLR.
         SPACE 1
*****************************************************************
*   COMPLETION CODES 41 - 5F ARE RESERVED FOR PERMANENT ERROR   *
*   CONDITIONS. THESE CODES WILL ALWAYS BE LAST ENTRY CODES     *
*   TO ABNORMAL EXITS.                                          *
*   COMPLETIONS CODES 60 - 73 ARE RESERVED FOR IOS USE.         *
*   COMPLETION CODES 74 - 7E DENOTE ABNORMAL CONDITIONS FOR     *
*   WHICH CORRECTION MAY BE POSSIBLE. THESE CODES DENOTE FIRST  *
*   ENTRY TO ABNORMAL EXITS.                                    *
*****************************************************************
         SPACE 1
*   COMPLETION CODE DEFINITION
         SPACE 1
IOSFTCHC EQU   X'71'               HARDWARE CORRECTED DATA CHECK
*                                  FOR FETCH
IOSMIHC  EQU   X'74'               THE I/O REQUEST HAS BEEN
*                                  ROUTED TO I/O RESTART BY CCH,
*                                  ALTERNATE CPU RECOVERY, OR
*                                  MISSING INTERRUPT HANDLER FOR
*                                  PROCESSING.
IOSFINTC EQU   X'7E'               INTERCEPT CONDITION BEFORE EN-
*                                  TRANCE TO ERROR ROUTINE
IOSNRMC  EQU   X'7F'               NORMAL COMPLETION
IOSGDPWE EQU   X'6D'               POST STATUS GOTO ABE & ERP  @DCRR054
IOSERRC  EQU   X'41'               PERMANENT I/O ERROR
IOSEXTC  EQU   X'42'               EXTENT ERROR
IOSDPXC  EQU   X'43'               DUPLEXED I/O REQUEST WAS NOT
*                                  STARTED BECAUSE OF A QUIESCED
*                                  OR NOT READY DEVICE
IOSINTC  EQU   X'44'               REQUEST WAS INTERCEPTED BE-
*                                  CAUSE A PERMANENT ERROR OCCUR-
*                                  RED THE LAST TIME THE DEVICE
*                                  WAS USED.
IOSABNC  EQU   X'45'               I/O REQUEST ABNORMALLY TERM-
*                                  INATED BECAUSE OF PROGRAM CHECK
*                                  MACHINE CHECK, ETC. IN IOS OR
*                                  APPENDAGE
IOSCD46  EQU   X'46'               RESERVED
IOSCD47  EQU   X'47'               RESERVED
IOSPRGC  EQU   X'48'               PURGED REQUEST
IOSCD49  EQU   X'49'               RESERVED
IOSTAPEC EQU   X'4B'               ERROR IN TAPE REPOSITIONING
IOSIVEXP EQU   X'4C'               INVALID EXPOSURE NUMBER
IOSGDPCC EQU   X'4D'               CC=3 - GDP OR NIP IN CONTROL
IOSGDPRD EQU   X'4E'               GDP - RESERVED DEVICE  OR
*                                  IN CONJUNCTION WITH IOSRELSE,
*                                  DEVICE CANNOT BE RELEASED.
IOSGDPCO EQU   X'4F'               GDP - CPU OFFLINE
IOSCD50  EQU   X'50'               RESERVED
IOSMIHCA EQU   X'51'               THE I/O REQUEST HAS BEEN DE-
*                                  CLARED IN PERMANENT ERROR
*                                  AFTER ERP PROCESSING AND I/O
*                                  RESTART
IOSOPT   DS    XL1                 OPTIONS BYTE
         SPACE 1
*   BIT DEFINITIONS FOR IOSOPT
         SPACE 1
IOSBYP   EQU   X'80'               BYPASS IOS CHANNEL PRGM PREFIX
IOSDEP   EQU   X'40'               DEVICE END POSTING REQUESTED
IOSQISCE EQU   X'20'               THIS REQUEST INITIATED BY
*                                  FUNCTION WHICH HAS QUISCED
*                                  THE DEVICE
IOSPSLL  EQU   X'10'               ON = LOCAL LOCK NOT WANTED
*                                  FOR POST STATUS PROCESSING
*                                  OFF = LOCAL LOCK WANTED
IOSNERP  EQU   X'08'               IBM ERPS NOT TO BE USED
IOSTSLL  EQU   X'04'               ON = LOCAL LOCK NOT WANTED BY
*                                  TERMINATION ROUTINE
*                                  OFF = LOCAL LOCK WANTED BY
*                                  TERMINATION ROUTINE IF IOSPSLL
*                                  IS ALSO OFF
IOSAPR   EQU   X'02'               ALTERNATE PATH RETRY ACTIVE
*                                  MUST BE SET TO ZERO BY DRIVER
IOSRELSE EQU   X'01'               STAND ALONE RELEASE CCW
*                                  ISSUED BY IOS
         SPACE 1
IOSOPT2  DS    XL1                 SECOND OPTION BYTE
*              BIT DEFINITIONS FOR IOSOPT2
IOSHTP   EQU   X'80'               ELIGIBLE FOR SHOULDER TAP
IOSIGP   EQU   X'40'               ELIGIBLE FOR SIGP           @ZA18121
IOSCHMSK EQU   X'20'               UPDATE IRTCHMSK, DON'T SIGP @ZA47390
IOSOPT2X EQU   X'1F'               RESERVED BITS               @ZA47390
         SPACE 1
IOSUCB   DS    A                   UNIT CONTROL BLOCK ADDRESS
IOSCC    DS    XL1                 SIO CONDITION CODE
IOSCC3   EQU   X'30'               CONDITION CODE 3
IOSCC2   EQU   X'20'               CONDITION CODE 2
IOSCC1   EQU   X'10'               CONDITION CODE 1
IOSCC0   EQU   X'00'               CONDITION CODE 0
IOSCSW   DS    XL7                 LOW ORDER 7 BYTES OF CSW
         ORG   IOSCSW
IOSCSWCA DS    AL3                 COMMAND ADDRESS
IOSTATUS DS    XL2                 CSW STATUS BYTES
         ORG   IOSTATUS
IOSTSA   DS    XL1                 DEVICE STATUS BYTE OF CSW
IOSTSB   DS    XL1                 CHANNEL STATUS BYTE
IOSCSWRC DS    XL2                 RESIDUAL COUNT
         ORG   IOSCSW+L'IOSCSW     '
         SPACE 1
IOSSRB   DS    A                   BACK POINTER TO SRB
IOSUSE   DS    A                   USER FIELD
IOSRES4A DS    A                   RESERVED
IOSAPMSK DS    XL2                 EXCLUSIVE PATH MASK FOR APR
*                                  MUST BE SET TO ZERO BY DRIVER
IOSSNS   DS    H                   SENSE DATA
IOSSNSBD EQU   X'10FE'             VALUE SUPPLIED FOR
*                                  UNSUCCESSFUL SENSE
         SPACE 2
IOSSECT  EQU   *                   END OF COMMON SECTION AND START
*                                  OF PROCESSING DEPENDNT SECTIONS
*                                  WHICH ARE: NORMAL I/O REQUEST,
*                                  WTO, AND PCI SCHEDULING.
         SPACE 1
IOSIPIB  DS    A                   IOS/PURGE INTERFACE BLK ADDRESS
*                                  MUST BE SET TO ZERO UPON IN-
*                                  ITIAL ENTRY AND NOT TO BE RESET
*                                  BY EXITS. OR,
*                                  CHAIN PTR FOR PCI SRB/IOSBS
IOSPCHN  DS    A                   PTR TO ENDING STATUS IOSB FOR
*                                  PCI SRB/IOSBS
*                                  PTR TO FIRST PCI SRB/IOSB FOR
*                                  ENDING STATUS IOSB
IOSERP   DS    A                   ERP DYNAMIC WORKAREA ADDRESS
*                                  MUST BE SET TO ZERO BY DRIVER
IOSPCI   DS    A                   PCI EXIT ADDRESS
IOSNRM   DS    A                   NORMAL EXIT ADDRESS
IOSABN   DS    A                   ABNORMAL EXIT ADDRESS
IOSDIE   DS    A                   DISABLED INTERRUPT EXIT ADDRESS
IOSRST   DS    A                   REAL ADDRESS OF REAL CHANNEL
*                                  PROGRAM
IOSVST   DS    A                   VIRTUAL ADDR  OF REAL CHNNL PROG
IOSDSID  DS    A                   DATA SET IDENTIFIER FOR PURGE
IOSRSS1B DS    XL1                 RESERVED
IOSAFF   DS    XL1                 CPU AFFINITY INDICATOR FOR
*                                  GUARANTEED DEVICE PATH
IOSPATH  DS    XL2                 PATH SPECIFICATION FOR GUAR-
*                                  ANTEED DEVICE PATH OR SPE-
*                                  CIFIC EXPOSURE REQUESTED
         ORG   IOSPATH
IOSCHN   DS    XL1
IOSGDP   EQU   X'80'               GUARANTEED DEVICE PATH
IOSEXP   EQU   X'40'               SPECIFIC EXPOSURE REQUESTED
IOSPATH2 EQU   X'20'               RESERVED
IOSPATH3 EQU   X'10'               RESERVED
*        EQU   X'0F'               CHANNEL NUMBER
IOSCUDEV DS    XL1                 CONTROL UNIT/DEVICE ADDRESS
IOSCU    EQU   X'F0'               CONTROL UNIT
IOSDEV   EQU   X'0F'               DEVICE
         SPACE 1
IOSFMSK  DS    XL1                 MODE SET/FILE MASK
IOSCKEY  DS    XL1                 PROTECT KEY OF CHANNEL PROGRAM
*        EQU   X'F0'               PROTECT KEY
IOSCKEY4 EQU   X'08'               RESERVED
IOSCKEY5 EQU   X'04'               RESERVED
IOSCKEY6 EQU   X'02'               RESERVED
IOSCKEY7 EQU   X'01'               RESERVED
IOSMDB   DS    XL1                 ERP IMMEDIATE CCW OP CODE
IOSMDM   DS    XL1                 ERP MODIFIER MASK
IOSEEK   DS    CL8                 STATIC SEEK ADDRESS
IOSEEKA  DS    CL8                 DYNAMIC SEEK ADDRESS
         ORG   IOSEEKA
IOSSKM   DS    XL1                 M
IOSSKBB  DS    XL2                 BB
IOSSKCC  DS    XL2                 CC
IOSSKHH  DS    0XL2                HH
IOSSKH1  DS    XL1                 H
IOSSKH2  DS    XL1                 H
IOSSKR   DS    XL1                 R
         ORG   IOSEEKA+L'IOSEEKA   '
         SPACE 1
IOSEND   EQU   *                   END OF IOSB
         SPACE 1
         ORG   IOSSECT             START OF ATTN SECTION
IOSATTSN DS    XL24                ADDITIONAL SENSE IF ANY
         DS    XL16                ADDITIONAL SENSE IF ANY     @G29ANLO
IOSATTWA DS    XL(IOSEND-*)        ATTN ROUTINE WORK AREA
         SPACE 1
         ORG   IOSSECT             START OF WTO SECTION
IOSWTOWA EQU   *                   WTO WORK AREA
IOSWTOCH DS    XL2                 ADDR CC=3 OCCURRED ON
IOSWTOCP DS    XL1                 CPU CC=3 OCCURRED ON
IOSWTOPT DS    XL1                 PATH INDICATOR FOR CC=3
IOSWRMDR DS    XL(IOSEND-*)        REMAINDER OF WTO WORK AREA
         SPACE 1
         ORG   IOSSECT             START OF PCI SECTION
         DS    A                   SAME AS IOSIPIB. MUST NOT BE
*                                  CHANGED
         DS    A                   SAME AS IOSPCHN. MUST NOT BE
*                                  CHANGED
IOSPCIRS DS    XL32                PCI RESERVED AREA
IOSPCIWA DS    XL(IOSEND-*)        PCI WORK AREA
         MEND
*                                                            @ZM30407*/
         EJECT
*%IOSBPLS: ;
*
*/*************************************************************/
*/*                                                           */
*/*  THIS STRUCTURE DESCRIBES THE CONTROL BLOCK PASSED TO THE */
*/*  I/O SUPERVISOR  AS A  PARAMETER OF THE SRB.  THE CONTROL */
*/*  BLOCK CONTAINS ALL INFORMATION NECESSARY TO INITIATE AND */
*/*  TERMINATE AN I/O OPERATION.  FIELDS OF THE IOSB ARE USED */
*/*  FOR COMMUNICATION BETWEEN THE:                           */
*/*                                                           */
*/*      1. I/O SUPERVISOR AND I/O REQUESTOR                  */
*/*      2. I/O SUPERVISOR AND ERROR RECOVERY PROCEDURES      */
*/*      3. COMPONENTS OF THE I/O SUPERVISOR                  */
*/*      4. SUCCESSIVE ENTRANCES TO THE ERP'S                 */
*/*      5. ERP AND COMMON WTO AND STATISTICS UPDATE MODULES  */
*/*                                                           */
*/*************************************************************/
*/*                                                           */
*/*      05/30/72   LEVEL=00                                  */
*/*                                                           */
*/*************************************************************/
*
*   DCL 1 IOSB  BDY(WORD)  BASED(IOSBPTR),
*       2 IOSFLA    CHAR(1),       /* FLAG BYTE A             */
*         3 IOSACHN BIT(2),        /* COMMAND & DATA CHAINING */
*           4 IOSDCHN BIT(1),      /* DATA CHAINING           */
*           4 IOSCCHN BIT(1),      /* COMMAND CHAINING        */
*         3 IOSERR  BIT(1),        /* ERROR ROUTINE IN CONTROL
*                                     MUST BE ZEROED BY DRIVER
*                                     IF ERP RETURNS WITH THIS
*                                     BIT ON, A RETRY IS
*                                     ASSUMED. IF THE ERP RE-
*                                     TURNS WITH THIS BIT OFF,
*                                     THE ERROR IS CONSIDERED
*                                     PERMANENT OR CORRECTED
*                                     DEPENDING ON THE SETTING
*                                     OF IOSEX.               */
*         3 IOSSMDA BIT(1),        /* ERP STATUS MODFR BIT .
*                                     MUST BE ZEROED BY DRIVER
*                                      TAPE - REPOSITION DEVCE
*                                      1052 - IMMEDIATE OPERA-
*                                        TION, CCW OP CODE IN
*                                        IOSMDB.              */
*         3 IOSSMDB BIT(1),        /* ERP STATUS MODFR BIT B
*                                     MUST BE ZEROED BY DRIVER
*                                     SET BY FETCH IN APPEN-
*                                     DAGE FOR POSTING.
*                                      TAPE - CRC NEEDED
*                                      DASD - PCI FETCH STOP
*                                           FLAG              */
*         3 IOSEX   BIT(1),        /* EXCEPTIONAL CONDITION.
*                                     UPON RETURN FROM NORMAL
*                                     OR ABNORMAL EXIT WITH
*                                     THIS BIT ON, ERP PROCES-
*                                     SING IS INITIATED IF IN-
*                                     ITIAL ERROR CONDITION.
*                                     IF BIT IS OFF, IT IS AS-
*                                     SUMED THAT THE EXIT COR-
*                                     RECTED THE CONDITION OR
*                                     DID NOT CONSIDER IT AN
*                                     ERROR. WHEN THE ERP RE-
*                                     TURNS WITH THIS BIT ON,
*                                     AND IOSERR OFF,THE ERROR
*                                     IS CONSIDERED PERMANENT.
*                                     WHEN THE ERP RETRNS WITH
*                                     THIS BIT OFF, THE ERROR
*                                     HAS BEEN CORRECTED.     */
*         3 IOSDOM  BIT(1),        /* DOM MACRO REQUIRED     @YM06828*/
*         3 IOSIOSB BIT(1),        /* IOSB CREATED BY IOS.
*                                     MUST BE ZEROED BY DRIVER*/
*
*       2 IOSFLB    CHAR(1),       /* FLAG BYTE B             */
*         3 IOSDIESE BIT(1),       /* SECOND ENTRY TO DIE     */
*         3 IOSSDR   BIT(1),       /* ERP DOESNT WANT OBR    @Z40MPLG*/
*         3 IOSNOTRS BIT(1),       /* DRIVER WANTS NO TRAS ON
*                                     ENTRY TO DIE.          @ZA25620*/
*         3 IOSFLB3  BIT(1),       /* RESERVED                */
*         3 IOSFLB4  BIT(1),       /* RESERVED                */
*         3 IOSMSG   BIT(1),       /* MESSAGE INDICATOR
*                                     0 = INTRVNTN REQURD MSG
*                                     1 = I/O ERROR MESSAGE   */
*         3 IOSBDCST BIT(1),       /* BROADCAST BIT           */
*         3 IOSLOG   BIT(1),       /* CREATE AN OBR RECORD    */
*
*       2 IOSFLC    CHAR(1),       /* DEVICE DEP ERP FLAGS    */
*         3 IOSDVMNT BIT(1),       /* DAVV ISSUED MOUNT       */
*         3 IOSDVALT BIT(1),       /* ALTERNATE TRACK PROCES-
*                                     SING BY DAVV            */
*          4 IOSVERIF BIT(1),      /* UNSOLICITED DEVICE END
*                                     VERIFICATION NEEDED
*                                     (NON-DA)                */
*         3 IOSCC3WE BIT(1),       /* GDP REQ'RS CC3 POST X6D@DCRR054*/
*         3 IOSTP    BIT(1),       /* NO SPECIAL CC3 HANDLINGTOBEFLGD*/
*         3 IOSRWAIT BIT(2),       /* RESTARTABLE WAIT REASON@ZA00904*/
*         3 IOSCTCNR BIT(1),       /* CTC-NO RETRY ALLOWED   @ZA11845*/
*         3 IOSFLC7  BIT(1),       /* RESERVED                */
*
*       2 IOSPROC   CHAR(1),       /* THIS BYTE INDICATES WHAT
*                                     TYPE OF SPECIAL PROCES-
*                                     SING IS TO BE PERFORMED
*                                     BY IOS COMPONENTS OPER-
*                                     ATING ASYNCHRONOUS TO
*                                     MAINLINE
*                                     MUST BE ZEROED BY DRIVER
*                                     DCLS ARE AT END OF IOSB */
*
*       2 IOSDVRID  CHAR(1),       /* DRIVER ID VALUE
*                                     VALUES AT END OF IOSB   */
*
*       2 IOSPRLVL  CHAR(1),       /* PRIORITY LEVEL AT WHICH
*                                     THE ADDRESS SPACE IS TO BE
*                                     SCHEDULED, 0 OR 1       */
*       2 IOSASID   CHAR(2),       /* ADDR SPACE ID OF MEMORY
*                                     TO BE SCHEDULED AT TERM
*                                     OF I/O REQUEST          */
*       2 IOSPGAD   PTR(31),       /* PGM ADDR TO BE DISPTCHD */
*       2 IOSPKEY BIT(8),          /* PROTECT KEY OF IOSPGAD  */
*        3 *       BIT(4),         /* PROTECT KEY             */
*        3 IOSLCL  BIT(1),         /* ASID SCHDLD AT LOCAL LVL*/
*        3 IOSIDR  BIT(1),         /* ASYNCHRONOUS SCHEDULING
*                                     SHOULD BE USED FOR THIS
*                                     REQUEST (INDIRECT RE-
*                                     CORDING FOR PAGING I/O  */
*        3 IOSPGDPX BIT(1),        /* THIS REQUEST HAS A BACK
*                                     UP COPY (DUPLEXED PAGE) */
*        3 IOSPKY7  BIT(1),        /* RESERVED                */
*       2 IOSCOD    CHAR(1),       /* I/O COMPLETION CODE
*                                     USED AS TEMP SAVE FOR
*                                     SYSTEM MASK BY CHAN SCHD
*                                     VALUES AT END OF IOSB   */
*
*       2 IOSOPT    CHAR(1),       /* OPTIONS BYTE            */
*         3 IOSBYP  BIT(1),        /* BYPSS IOS CHAN PGM PRFX */
*         3 IOSDEP  BIT(1),        /* DEVICE END POST REQUSTD */
*         3 IOSQISCE BIT(1),       /* THIS REQUEST INITIATED
*                                     BY FUNCTION WHICH HAS
*                                     QUIESCED THE DEVICE     */
*         3 IOSPSLL BIT(1),        /* ON=LOCAL LOCK NOT WANTED
*                                     FOR POST STATUS PROCSS
*                                     OFF=LOCAL LOCK WANTED   */
*         3 IOSNERP BIT(1),        /* IBM ERPS NOT TO BE USED */
*         3 IOSTSLL BIT(1),        /* ON = LOCAL LOCK NOT
*                                     WANTED BY TERMINATION
*                                     ROUTINE
*                                     OFF = LOCAL LOCK WANTED
*                                     BY TERMINATION ROUTINE
*                                     IF IOSPSLL ALSO ON      */
*         3 IOSAPR  BIT(1),        /* ALT PATH RETRY ACTIVE.
*                                     MUST BE ZEROED BY DRIVER*/
*         3 IOSRELSE BIT(1),       /* STAND-ALONE RELEASE CCW
*                                     ISSUED BY IOS           */
*
*       2 IOSOPT2  CHAR(1),        /* OPTION BYTE 2           */
*         3 IOSHTP  BIT(1),        /* ELIGIBLE FOR SHOULDR TAP*/
*         3 IOSIGP  BIT(1),        /* ELIGIBLE FOR SIGP      @ZA18121*/
          3 IOSCHMSK BIT(1),       /* UPDATE IRTCHMSK, DON'T SIGP
                                                             @ZA47390*/
          3 IOSOPT2X BIT(5),       /* RESERVED BITS          @ZA47390*/
*       2 IOSUCB    PTR(31),       /* UNIT CONTROL BLOCK ADDR */
*       2 *         CHAR(8) BDY(WORD),
*         3 IOSCC     BIT(8),      /* SIO CONDITION CODE      */
*         3 IOSCSW CHAR(7) BDY(WORD,2), /* CSW LO ORDR 7 BYTES*/
*          4 IOSCSWCA  PTR(24) BDY(WORD,2), /*
*                                     LAST COMMAND ADDRESS    */
*          4 IOSTATUS  CHAR(2),    /* CSW STATUS              */
*            5 IOSTSA  BIT(8),     /* DEVICE STATUS           */
*            5 IOSTSB  BIT(8),     /* CHANNEL STATUS          */
*          4 IOSCSWRC PTR(16) BDY(WORD,3), /*
*                                     RESIDUAL COUNT          */
*
*       2 IOSSRB    PTR(31),       /* POINTER BACK TO SRB     */
*       2 IOSUSE    PTR(31),       /* USER FIELD              */
*       2 IOSRES4A  PTR(31),       /* RESERVED                */
*       2 IOSAPMSK  CHAR(2),       /* EXCLUSIVE PATH MASK FOR
*                                     APR
*                                     MUST BE ZEROED BY DRIVER*/
*       2 IOSSNS    BIT(16),       /* SENSE DATA              */
*
*  /***********************************************************/
*  /*  END OF COMMON SECTION AND START OF PROCESSING  DEPEN-  */
*  /*  DENT SECTIONS WHICH ARE: NORMAL I/O REQUEST, WTO, AND  */
*  /*  PCI SCHEDULING.                                        */
*  /***********************************************************/
*
*       2 IOSIPIB   PTR(31),       /* IOS/PURGE INTERFACE
*                                     BLOCK ADDRESS
*                                     MUST BE ZEROED BY DRIVER.
*                                     OR CHAIN PTR FOR PCI
*                                     SRB/IOSBS               */
*       2 IOSPCHN   PTR(31),       /* PTR TO ENDING STATUS IOSB
*                                     FOR PCI SRB/IOSBS.
*                                     PTR TO FIRST PCI SRB/IOSB
*                                     FOR ENDING STATUS IOSB. */
*       2 IOSERP    PTR(31),       /* ERP DYNAMIC W.A. ADDR.
*                                     MUST BE ZEROED BY DRIVER*/
*       2 IOSPCI    PTR(31),       /* PCI EXIT ADDRESS        */
*       2 IOSNRM    PTR(31),       /* NORMAL EXIT ADDRESS     */
*       2 IOSABN    PTR(31),       /* ABNORMAL EXIT ADDRESS   */
*       2 IOSDIE    PTR(31),       /* DISABLED INT. EXIT ADDR */
*       2 IOSRST    PTR(31),       /* REAL ADDRESS OF REAL
*                                     CHANNEL PROGRAM         */
*       2 IOSVST    PTR(31),       /* VIRTUAL ADDRESS OF REAL
*                                     CHANNEL PROGRAM         */
*       2 IOSDSID   PTR(31),       /* DATA SET ID FOR PURGE   */
*
*       2 IOSRSS1B  CHAR(1),       /* RESERVED                */
*       2 IOSAFF    BIT(8),        /* CPU AFFINITY INDICATOR
*                                     FOR GUARANTEED DEVCE PTH*/
*       2 IOSPATH   CHAR(2),       /* PATH SPECIFICATION FOR
*                                     GUARANTEED DEVICE PATH
*                                     OR SPECIFIC EXPOSURE
*                                     REQUESTS                */
*         3 IOSCHN  CHAR(1),
*           4 IOSGDP    BIT(1),    /* GUARANTEED DEVICE PATH  */
*           4 IOSEXP    BIT(1),    /* SPECIFIC EXPOSURE REQST */
*           4 IOSPATH2  BIT(1),    /* RESERVED                */
*           4 IOSPATH3  BIT(1),    /* RESERVED                */
*           4 *         BIT(4),    /* CHANNEL NUMBER          */
*
*         3 IOSCUDEV CHAR(1),      /* CONTRL UNIT/DEVICE ADDR */
*
*       2 IOSFMSK   CHAR(1),       /* MODE SET/FILE MASK      */
*       2 IOSCKEY   BIT(8),        /* PROT. KEY OF CHAN PGM   */
*         3 *        BIT(4),       /* PROTECT KEY             */
*         3 IOSCKEY4 BIT(1),       /* RESERVED                */
*         3 IOSCKEY5 BIT(1),       /* RESERVED                */
*         3 IOSCKEY6 BIT(1),       /* RESERVED                */
*         3 IOSCKEY7 BIT(1),       /* RESERVED                */
*       2 IOSMDB    CHAR(1),       /* ERP IMMED. CCW OP CODE  */
*       2 IOSMDM    CHAR(1),       /* ERP MODIFIER MASK       */
*       2 IOSEEK    CHAR(8),       /* STATIC SEEK ADDRESS     */
*       2 IOSEEKA CHAR(8) BDY(WORD), /* DYNAMIC SEEK ADDRESS  */
*         3 IOSSKM  PTR(8),             /*   M                */
*         3 IOSSKBB PTR(16) BDY(WORD,2), /*  BB               */
*         3 IOSCCHH CHAR(4) BDY(WORD,4), /*  CCHH             */
*          4 IOSSKCC PTR(16) BDY(WORD,4), /* CC               */
*          4 IOSSKHH PTR(16) BDY(WORD,2), /* HH               */
*             5 IOSSKH1 PTR(8),         /*   H                */
*             5 IOSSKH2  PTR(8),        /*   H                */
*         3 IOSSKR  PTR(8),             /*   R                */
*       2 IOSEND    CHAR(0);       /* END OF IOSB             */
*
*  /*  ATTENTION PROCESSING SECTION                           */
*   DCL 1 IOSATTSC  CHAR(64) DEF(IOSIPIB),
*         2 IOSATTSN CHAR(24),     /* ADDITIONAL SENSE IF ANY */
*         2 *        CHAR(16),   /* ADDITIONAL SENSE IF ANY  @G29ANLO*/
*         2 IOSATTWA CHAR(24);     /* ATTN RTN WORK AREA      */
*
*  /*  WTO PROCESSING SECTION                                 */
*   DCL 1 IOSWTOWA  CHAR(64) DEF(IOSIPIB),
*         2 IOSWTOCH CHAR(2),      /* ADDR CC=3 OCCURRED ON   */
*         2 IOSWTOCP CHAR(1),      /* CPU CC=3 OCCURRED ON    */
*         2 IOSWTOPT CHAR(1),      /* PATH IND. FOR CC=3      */
*         2 IOSWRNDR CHAR(60);     /* REMAINDER OF WTO W.A.   */
*
*  /*  PCI SCHEDULING SECTION                                 */
*   DCL 1 IOSPCISC  CHAR(64)  DEF(IOSIPIB) BDY(WORD),
*         2 *       PTR(31),       /* SAME AS IOSIPIB. MUST
*                                     NOT BE USED             */
*         2 *       PTR(31),       /* SAME AS IOSPCHN. MUST
*                                     NOT BE USED             */
*         2 IOSPCIRS CHAR(36),     /* PCI RSVD SECTION        */
*         2 IOSPCIWA CHAR(20);     /* PCI WORK AREA           */
*
* /************************************************************/
* /*                                                          */
* /*     FOLLOWING ARE THE PLS DECLARES WHICH REPLACE  THE    */
* /*     PREVIOUSLY DEFINED %DCLARES.  THE FIELDS TO WHICH    */
* /*     THE VALUES APPLY ARE REPRODUCED AS A COMMENT. THIS   */
* /*     CHANGE ALLOWS A CROSS REFERENCE OF THE NAMES  USED   */
* /*     AS FIELD VALUES.                                     */
* /*                                                          */
* /************************************************************/
*
*   /*  2 IOSPROC  CHAR(1),           SEE DCL FOR DESCRIPTION */
*
*   DCL IOSAPCI BIT(8) CONSTANT('04'X);     /* PCI            */
*   DCL IOSATTN BIT(8) CONSTANT('08'X);     /* ATTENTION      */
*   DCL IOSAPURG BIT(8) CONSTANT('0C'X);    /* PURGE          */
*   DCL IOSADAVV BIT(8) CONSTANT('10'X);    /* DAVV           */
*   DCL IOSAWTO BIT(8) CONSTANT('14'X);     /* WTO            */
*   DCL IOSADDR BIT(8) CONSTANT('18'X);     /* DDR            */
*   DCL IOSACRH BIT(8) CONSTANT('1C'X);     /* CRH            Y30CQLG*/
*   DCL  IOSAUR BIT(8) CONSTANT('20'X);     /* UNCONDITIONAL
*                                              RESERVE       @ZA35535*/
*
*   /*  2 IOSDVRID CHAR(1),           SEE DCL FOR DESCRIPTION */
*
*   DCL IOSIOSID BIT(8) CONSTANT('00'X); /*
*                                     RESERVED FOR IOS        */
*   DCL IOSMISID BIT(8) CONSTANT('01'X); /*
*                                     MISCELLANEOUS ID FOR I/O
*                                     REQUESTS THAT CANNOT BE
*                                     PURGED, ASSOCIATED WITH
*                                     A TASK, OR VIOLATE XTNTS*/
*   DCL IOSXCPID BIT(8) CONSTANT('02'X);    /* EXCP           */
*   DCL IOSVSAID BIT(8) CONSTANT('03'X);    /* VSAM           */
*   DCL IOSATMID BIT(8) CONSTANT('04'X);    /* VTAM           */
*   DCL IOSTCMID BIT(8) CONSTANT('05'X);    /* TCAM           */
*   DCL IOSOLTID BIT(8) CONSTANT('06'X);    /* OLTEP          */
*   DCL IOSFCHID BIT(8) CONSTANT('07'X);    /* PROGRAM FETCH  */
*   DCL IOSJESID BIT(8) CONSTANT('08'X);    /* JES3           */
*   DCL IOSSS1ID BIT(8) CONSTANT('09'X);    /* SS1/DSM        */
*   DCL IOSPRGID BIT(8) CONSTANT('0A'X);   /* IECVIOPM PURGE @ZA04107*/
*   DCL IOSVPSID BIT(8) CONSTANT('0B'X);   /* VPSS           @G29ANLO*/
*
*   /*  2 IOSCOD CHAR(1),             SEE DCL FOR DESCRIPTION */
*
* /************************************************************/
* /*  COMPLETION CODES 41 - 5F ARE RESERVED FOR PERMANENT     */
* /*  ERROR CONDITIONS. THESE CODES WILL ALWAYS BE LAST ENTRY */
* /*  CODES TO ABNORMAL EXITS.                                */
* /*  COMPLETION CODES 60 - 73 ARE RESERVED FOR IOS USE.      */
* /*  COMPLETION CODES 74 - 7E DENOTE ABNORMAL CONDITIONS FOR */
* /*  WHICH CORRECTION MAY BE POSSIBLE. THESE CODES DENOTE    */
* /*  FIRST ENTRY TO ABNORMAL EXITS.                          */
* /************************************************************/
*
*   DCL IOSFTCHC BIT(8) CONSTANT('71'X); /*
*                                     HARDWARE CORRECTED DATA
*                                     CHECK FOR FETCH         */
*   DCL IOSMIHC BIT(8) CONSTANT('74'X); /*
*                                     THE I/O REQUEST HAS BEEN
*                                     ROUTED TO I/O RESTART BY
*                                     CCH, ALTERNATE CPU RECOV-
*                                     ERY, MISSING INTERRUPT
*                                     HANDLER.                */
*   DCL IOSFINTC BIT(8) CONSTANT('7E'X); /*
*                                     INTERCEPT CONDITION BE-
*                                     FORE ENTRANCE TO ERP    */
*   DCL IOSNRMC BIT(8) CONSTANT('7F'X); /*
*                                     NORMAL COMPLETION       */
*   DCL IOSGDPWE BIT(8) CONSTANT('6D'X); /* IECVPST GOTO ABE & ERP
*                                                            @DCRR054*/
*   DCL IOSERRC BIT(8) CONSTANT('41'X); /*
*                                     PERMANENT I/O ERROR     */
*   DCL IOSEXTC BIT(8) CONSTANT('42'X); /*
*                                     EXTENT ERROR            */
*   DCL IOSDPXC BIT(8) CONSTANT('43'X); /*
*                                     DUPLEXED I/O REQUEST WAS
*                                     NOT STARTED BECAUSE OF
*                                     A QUIESCED OR NOT READY
*                                     DEVICE.                 */
*   DCL IOSINTC BIT(8) CONSTANT('44'X); /*
*                                     REQUEST INTERCEPTED BE-
*                                     CAUSE A PERMANENT ERROR
*                                     OCCURRED THE LAST TIME
*                                     THE DEVICE WAS USED.    */
*   DCL IOSABNC BIT(8) CONSTANT('45'X); /*
*                                     I/O REQUEST ABNORMALLY
*                                     TERMINATED BECAUSE OF PRO-
*                                     GRAM CHECK, MACHINE CHECK,
*                                     ETC. IN IOS OR AN APPEN-
*                                     DAGE.                   */
*   DCL IOSCD46 BIT(8) CONSTANT('46'X);     /* RESERVED       */
*   DCL IOSCD47 BIT(8) CONSTANT('47'X);     /* RESERVED       */
*   DCL IOSPRGC BIT(8) CONSTANT('48'X);     /* REQUEST PURGED */
*   DCL IOSCD49 BIT(8) CONSTANT('49'X);     /* RESERVED       */
*   DCL IOSTAPEC BIT(8) CONSTANT('4B'X);    /*
*                                     ERR IN TAPE REPOSITIONNG*/
*   DCL IOSIVEXP BIT(8) CONSTANT('4C'X);    /*
*                                     INVALID EXPOSURE NUMBER */
*   DCL IOSGDPCC BIT(8) CONSTANT('4D'X);    /*
*                                     CC=3 - GDP OR WHILE NIP
*                                     IN CONTROL              */
*   DCL IOSGDPRD BIT(8) CONSTANT('4E'X);    /*
*                                     GDP - RESERVED DEVICE
*                                     OR IN CONJUNCTION WITH
*                                     IOSRELSE,DEVICE CANNOT
*                                     BE RELEASED.            */
*   DCL IOSGDPCO BIT(8) CONSTANT('4F'X);    /*
*                                     GDP - CPU OFFLINE       */
*   DCL IOSCD50 BIT(8) CONSTANT('50'X);     /* RESERVED       */
*   DCL IOSMIHCA BIT(8) CONSTANT('51'X);    /*
*                                     THE REQUEST HAS BEEN DE-
*                                     CLARED IN PERMANENT ERROR
*                                     AFTER ERP AND I/O RESTART
*                                     PROCESSING.             */
*
*   /*  3 IOSCUDEV CHAR(1),           SEE DCL FOR DESCRIPTION */
*
*   DCL IOSCU BIT(8) CONSTANT('F0'X);  /* CONTROL UNIT        */
*   DCL IOSDEV BIT(8) CONSTANT('0F'X); /* DEVICE              */
*   DCL IOSSNSBD BIT(16) CONSTANT('10FE'X); /*
*                                     VALUE SUPPLIED FOR
*                                     UNSUCCESSFUL SENSE      */
*
*   /*  3 IOSCC BIT(8),               SEE DCL FOR DESCRIPTION */
*
*   DCL IOSCC3 BIT(8) CONSTANT('30'X); /* CONDITION CODE 3    */
*   DCL IOSCC2 BIT(8) CONSTANT('20'X); /* CONDITION CODE 2    */
*   DCL IOSCC1 BIT(8) CONSTANT('10'X); /* CONDITION CODE 1    */
*   DCL IOSCC0 BIT(8) CONSTANT('00'X); /* CONDITION CODE 0    */
*
*   /* 3 IOSRWAIT BIT(2),            RESTARTABLE WAIT REASON @ZA00904*/
*
*   DCL IOSRWVID BIT(8) CONSTANT('00'X); /* 00--WRONG VOL ID @ZA00904*/
*   DCL IOSRWIR  BIT(8) CONSTANT('04'X); /* 01--INTERVENTION @ZA00904*/
*                                        /*     REQUIRED     @ZA00904*/
*   DCL IOSRWCC3 BIT(8) CONSTANT('08'X); /* 10--CONDITION    @ZA00904*/
*                                        /*     CODE 3       @ZA00904*/
*   DCL IOSRWERR BIT(8) CONSTANT('0C'X); /* 11--READ ERROR   @ZA00904*/
*                                        /*     FOR LABEL    @ZA00904*/
