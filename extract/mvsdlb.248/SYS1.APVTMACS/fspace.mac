             MACRO
&NAME        FSPACE &R,&LV=,&A=
.*****************************************************************
.*
.* MACRO NAME - FSPACE
.*
.* DESCRIPTIVE NAME -FREE SPACE MACRO (THIS IS FREEMAIN LIKE)
.*
.* COPYRIGHT - N/A
.*
.* STATUS - OS/VS2 REL. 2.0
.*
.* FUNCTION -
.*
.*   THE FUNCTION OF THIS MACRO IS TO SETUP THE INPUT REGS TO THE
.*   FSPACE SERVICE ROUTINE LOCATED IN MODULE IEFAB4F6.
.*
.*   OPERATION -
.*
.*      THIS MACRO REQUIRES - FSPACE R,LV=(0)
.*      1) IF INVALID PARAMETERS PRINT MNOTE.
.*      2) INSERT CODE
.*      3) EXIT
.*
.* NOTES -
.*   DEPENDENCIES -
.*      THIS MACRO IS CALLED BY USING THE PL/S STACK OPTION.
.*      THEREFORE CHANGES TO PL/S MAY IMPACT THIS MACRO
.*      THE ONLY REGISTERS THE MACRO MAY ALTER ARE 0,1,14,15.
.*
.*   RESTRICTIONS
.*      NONE.
.*   REGISTER CONVENTIONS -
.*      MAY ONLY USE 14 THRU 1
.*
.*   PATCH LABEL - N/A
.*
.* MODULE TYPE - MACRO
.*
.*   PROCESSER - ASSEM
.*   MODULE SIZE - N/A
.*   ATTRIBUTES - EXECUTABLE MACRO
.*
.* ENTRY POINT - N/A
.*
.* EXIT -
.*   R0- UNPREDICTABLE
.*   R1- UNPREDICTABLE
.*   R2-R13 NOT CHANGED
.*   R14 - UNPREDICTABLE
.*   R15 - UNPREDICTABLE
.*
.* EXTERNAL REFERENCES - NONE
.*
.* TABLES - NONE
.* MACROS - NONE
.*
.* CHANGE ACTIVITY - Y02670
.*
.* MESSAGES - SEE MNOTE IN MACRO CODE.
.*
.* ABEND CODES - NONE
.*
.*****************************************************************
             AIF ('&R' EQ 'R' AND '&LV' EQ '(0)' AND '&A' EQ '(1)').OK
             MNOTE 4,'FSPACE PARAMETERS INVALID'
.OK          ANOP
&NAME        L     15,GS&SYSNDX.C      SET FSPACE EP IN REG 15
             CNOP  2,4                 *
GS&SYSNDX.L  BALR  14,15               CALL FSPACE
             B     GS&SYSNDX.E         +0 RETURN IS NORMAL RETURN
             B     GS&SYSNDX.D         +4 RETURN REQUIRES FREEMAIN
GS&SYSNDX.C  DC    V(FSPACE)           FSPACE ENTRY POINT
GS&SYSNDX.D  SVC   10                  FREEMAIN
GS&SYSNDX.E  EQU   *                   *
             MEND
